import{j as e}from"./query-CQB1N7mz.js";import{r as E}from"./vendor-D5cPNHfC.js";import{n as ye,o as je,m as ve,Q as we,R as Ne,S as De,T as Ce,q as Ee,t as B}from"./index-DrAcGZG1.js";import"./supabase-Br6iVc9W.js";function Q(t){const x=t instanceof Date?t:new Date(t),f=x.getFullYear(),o=String(x.getMonth()+1).padStart(2,"0"),d=String(x.getDate()).padStart(2,"0");return`${f}-${o}-${d}`}function Se(t,x,f){const o=new Date(t),d=f.interval||1;switch(x){case"daily":o.setDate(o.getDate()+d);break;case"weekly":o.setDate(o.getDate()+7*d);break;case"monthly":{const p=o.getDate();o.setMonth(o.getMonth()+d),o.getDate()<p&&o.setDate(0);break}case"yearly":o.setFullYear(o.getFullYear()+d);break;case"custom":o.setDate(o.getDate()+1);break;default:o.setDate(o.getDate()+1)}return o}function Te(t,x,f){const o=[],d=new Date(t.startDate),c=new Date(t.endDate)-d,n=t.recurrenceConfig||{interval:1},l=t.recurrenceEndType||"never",g=t.recurrenceEndValue;let a=1/0,u=null;l==="after"&&g?a=parseInt(g)||1/0:l==="on_date"&&g&&(u=new Date(g),u.setHours(23,59,59,999));let r=new Date(d),h=0;const m=365,C=new Date(f);for(C.setFullYear(C.getFullYear()+2);h<m&&!(h>=a||u&&r>u||r>C);){const j=(t.recurrenceType==="weekly"||t.recurrenceType==="custom")&&n.daysOfWeek&&n.daysOfWeek.length>0;if(j&&!n.daysOfWeek.includes(r.getDay())){r.setDate(r.getDate()+1);continue}const k=new Date(r.getTime()+c);if(k>=x&&r<f&&o.push({...t,id:`${t.id}_${Q(r)}`,_parentId:t.id,_occurrenceDate:Q(r),startDate:r.toISOString(),endDate:k.toISOString()}),r>f)break;if(h++,j){const S=r.getDay(),T=n.daysOfWeek.filter(D=>D>S);if(T.length>0)r.setDate(r.getDate()+(T[0]-S));else{const O=6-S+1+(n.interval-1)*7;r.setDate(r.getDate()+O)}}else r=Se(r,t.recurrenceType,n)}return o}function Me(t,x,f){const o=[];for(const d of t){if(!d.recurrenceType){const n=new Date(d.startDate);new Date(d.endDate)>=x&&n<f&&o.push(d);continue}const p=Te(d,x,f),c=d.recurrenceExceptions||[];for(const n of p){const l=n._occurrenceDate,g=c.find(a=>a.date===l);if(!(g&&g.type==="deleted")){if(g&&g.type==="modified"&&g.overrides){o.push({...n,...g.overrides,id:n.id,_parentId:n._parentId,_occurrenceDate:n._occurrenceDate,_isModified:!0});continue}o.push(n)}}}return o}function Le(t){const x=`${t.id}@fyness-os`,f=G(new Date),o=G(new Date(t.startDate)),d=t.endDate?G(new Date(t.endDate)):o;let p=["BEGIN:VEVENT",`UID:${x}`,`DTSTAMP:${f}`,`DTSTART:${o}`,`DTEND:${d}`,`SUMMARY:${q(t.title)}`];if(t.description&&p.push(`DESCRIPTION:${q(t.description)}`),t.assignee&&p.push(`ORGANIZER:${q(t.assignee)}`),t.attendees&&t.attendees.length>0)for(const c of t.attendees){const n=c.name||c;p.push(`ATTENDEE;CN=${q(n)}:MAILTO:${c.email||""}`)}if(t.recurrenceType){const c=Oe(t);c&&p.push(`RRULE:${c}`)}if(t.type){const c={meeting:"Reuniao",task:"Tarefa",reminder:"Lembrete",deadline:"Prazo",other:"Outro"};p.push(`CATEGORIES:${c[t.type]||t.type}`)}return p.push("END:VEVENT"),p.join(`\r
`)}function Oe(t){const f={daily:"DAILY",weekly:"WEEKLY",monthly:"MONTHLY",yearly:"YEARLY"}[t.recurrenceType];if(!f)return null;let o=`FREQ=${f}`;const d=t.recurrenceConfig||{};if(d.interval&&d.interval>1&&(o+=`;INTERVAL=${d.interval}`),t.recurrenceType==="weekly"&&d.daysOfWeek&&d.daysOfWeek.length>0){const p={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},c=d.daysOfWeek.map(n=>p[n]).filter(Boolean).join(",");c&&(o+=`;BYDAY=${c}`)}return t.recurrenceEndType==="after"&&t.recurrenceEndValue?o+=`;COUNT=${t.recurrenceEndValue}`:t.recurrenceEndType==="on"&&t.recurrenceEndValue&&(o+=`;UNTIL=${G(new Date(t.recurrenceEndValue))}`),o}function $e(t,x="fyness_agenda.ics"){const o=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Fyness OS//Agenda//PT","CALSCALE:GREGORIAN","METHOD:PUBLISH","X-WR-CALNAME:Fyness OS Agenda",...(Array.isArray(t)?t:[t]).map(Le),"END:VCALENDAR"].join(`\r
`),d=new Blob([o],{type:"text/calendar;charset=utf-8"}),p=URL.createObjectURL(d),c=document.createElement("a");c.href=p,c.download=x,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(p)}function G(t){return!(t instanceof Date)||isNaN(t.getTime())?"":t.toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/,"")}function q(t){return t?t.replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}const H=[{id:"meeting",label:"Reuniao",color:"#3b82f6"},{id:"os",label:"Ordem de Servico",color:"#f97316"},{id:"task",label:"Tarefa",color:"#22c55e"},{id:"personal",label:"Pessoal",color:"#64748b"}],oe=Array.from({length:16},(t,x)=>x+7),_e={start:8,end:18},P=["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],ie=["domingo","segunda-feira","terca-feira","quarta-feira","quinta-feira","sexta-feira","sabado"],z=["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];function ee(t,x){return t.getFullYear()===x.getFullYear()&&t.getMonth()===x.getMonth()&&t.getDate()===x.getDate()}function Ae(t,x){const f=new Date(t,x,1),o=new Date(t,x+1,0),d=f.getDay(),p=[];for(let n=d-1;n>=0;n--){const l=new Date(t,x,-n);p.push({date:l,isCurrentMonth:!1})}for(let n=1;n<=o.getDate();n++)p.push({date:new Date(t,x,n),isCurrentMonth:!0});const c=42-p.length;for(let n=1;n<=c;n++)p.push({date:new Date(t,x+1,n),isCurrentMonth:!1});return p}function de(t){const x=new Date(t);return x.setDate(x.getDate()-x.getDay()),Array.from({length:7},(f,o)=>{const d=new Date(x);return d.setDate(d.getDate()+o),d})}function I(t){return t.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}function V(t){const x=t.getFullYear(),f=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${x}-${f}-${o}`}function Ue(){const t=new Date,{data:x=[],isLoading:f}=ye(),{data:o=[],isLoading:d}=je(),{data:p=[],isLoading:c}=ve(),n=we(),l=Ne(),g=De(),a=f||d||c;Ce();const[u,r]=E.useState(t),[h,m]=E.useState("day"),[C,j]=E.useState(!1),[k,S]=E.useState(null),[T,D]=E.useState(null),[O,R]=E.useState(null),[Y,$]=E.useState(null),[A,ce]=E.useState({}),[_,U]=E.useState([]),[te,se]=E.useState(!1),M=E.useMemo(()=>!A.name||o.some(i=>i.name.toLowerCase().trim()===A.name.toLowerCase().trim())?o:[{id:"profile_self",name:A.name,role:A.role||"",color:"#3b82f6"},...o],[o,A]),ue=s=>{U(i=>i.includes(s)?i.length===1?M.map(b=>b.id):i.filter(b=>b!==s):[...i,s])},[v,F]=E.useState({title:"",description:"",startDate:V(t),startTime:"09:00",endDate:V(t),endTime:"10:00",assignee:"1",attendees:[],type:"task",attended:!1,wasLate:!1,lateMinutes:0,recurrenceType:null,recurrenceConfig:{interval:1},recurrenceEndType:"never",recurrenceEndValue:"",notes:"",attachments:[]});E.useEffect(()=>{Ee().then(s=>ce(s))},[]),E.useEffect(()=>{d||!o.length||U(s=>{var w;if(s.length>0)return s;const i=(w=A==null?void 0:A.name)==null?void 0:w.toLowerCase().trim();return i&&o.some(y=>y.name.toLowerCase().trim()===i)?o.map(y=>y.id):["profile_self",...o.map(y=>y.id)]})},[o,A,d]);const K=s=>{var L;const i=s||u,b=V(i),w=i.getHours?i.getHours():9,y=`${String(w).padStart(2,"0")}:00`,N=`${String(Math.min(w+1,23)).padStart(2,"0")}:00`;S(null),F({title:"",description:"",startDate:b,startTime:y,endDate:b,endTime:N,assignee:((L=M[0])==null?void 0:L.id)||"1",attendees:[],type:"task",attended:!1,wasLate:!1,recurrenceType:null,recurrenceConfig:{interval:1},recurrenceEndType:"never",recurrenceEndValue:"",notes:"",attachments:[]}),R({date:b,startTime:y,endTime:N})},xe=()=>{R(null),j(!0)},J=s=>{if(!s._isOS){if(s._parentId){$({event:s,action:"edit"});return}X(s)}},X=s=>{const i=new Date(s.startDate),b=new Date(s.endDate);S(s),F({title:s.title,description:s.description||"",startDate:V(i),startTime:I(i),endDate:V(b),endTime:I(b),assignee:s.assignee||"1",attendees:s.attendees||[],type:s.type||"task",attended:s.attended||!1,wasLate:s.wasLate||!1,lateMinutes:s.lateMinutes||0,recurrenceType:s.recurrenceType||null,recurrenceConfig:s.recurrenceConfig||{interval:1},recurrenceEndType:s.recurrenceEndType||"never",recurrenceEndValue:s.recurrenceEndValue||"",notes:s.notes||"",attachments:s.attachments||[]}),j(!0)},ae=async()=>{if(!v.title.trim())return;if(k!=null&&k._editThisOnly){await me();return}const s=new Date(`${v.startDate}T${v.startTime}:00`),i=new Date(`${v.endDate}T${v.endTime}:00`),b=H.find(y=>y.id===v.type),w={title:v.title,description:v.description,startDate:s.toISOString(),endDate:i.toISOString(),assignee:v.assignee,attendees:v.attendees||[],type:v.type,color:b.color,attended:v.attended,wasLate:v.wasLate,lateMinutes:v.wasLate&&parseInt(v.lateMinutes)||0,recurrenceType:v.recurrenceType||null,recurrenceConfig:v.recurrenceConfig||{interval:1},recurrenceEndType:v.recurrenceEndType||"never",recurrenceEndValue:v.recurrenceEndValue||null,notes:v.notes||"",attachments:v.attachments||[]};if(k){const y=k._parentId||k.id;await l.mutateAsync({id:y,updates:w})}else await n.mutateAsync(w);j(!1),R(null),$(null)},pe=async s=>{if(k&&k._parentId){$({event:k,action:"delete"}),D(null),j(!1);return}await g.mutateAsync(s),D(null),j(!1),R(null)},he=async s=>{if(!Y)return;const{event:i,action:b}=Y,w=i._parentId,y=x.find(N=>N.id===w);if(!y){$(null);return}if(s==="this"){const N=[...y.recurrenceExceptions||[]];if(b==="delete")N.push({date:i._occurrenceDate,type:"deleted"}),await l.mutateAsync({id:w,updates:{recurrenceExceptions:N}});else{$(null),X({...i,_editThisOnly:!0});return}}else if(s==="all")if(b==="delete")await g.mutateAsync(w);else{$(null),X(y);return}else if(s==="future")if(b==="delete"){const N=new Date(i._occurrenceDate);N.setDate(N.getDate()-1),await l.mutateAsync({id:w,updates:{recurrenceEndType:"on_date",recurrenceEndValue:Q(N)}})}else{const N=new Date(i._occurrenceDate);N.setDate(N.getDate()-1),await l.mutateAsync({id:w,updates:{recurrenceEndType:"on_date",recurrenceEndValue:Q(N)}}),$(null);const L=new Date(i.startDate),W=new Date(i.endDate);S(null),F({title:i.title,description:i.description||"",startDate:V(L),startTime:I(L),endDate:V(W),endTime:I(W),assignee:i.assignee||"1",attendees:i.attendees||[],type:i.type||"task",attended:!1,wasLate:!1,lateMinutes:0,recurrenceType:y.recurrenceType,recurrenceConfig:y.recurrenceConfig||{interval:1},recurrenceEndType:y.recurrenceEndType||"never",recurrenceEndValue:y.recurrenceEndValue||"",notes:i.notes||"",attachments:i.attachments||[]}),j(!0);return}$(null),j(!1),R(null)},me=async()=>{if(!v.title.trim()||!(k!=null&&k._parentId))return;const s=k._parentId,i=x.find(W=>W.id===s);if(!i)return;const b=new Date(`${v.startDate}T${v.startTime}:00`),w=new Date(`${v.endDate}T${v.endTime}:00`),y=H.find(W=>W.id===v.type),N=[...i.recurrenceExceptions||[]],L=N.findIndex(W=>W.date===k._occurrenceDate);L>=0&&N.splice(L,1),N.push({date:k._occurrenceDate,type:"modified",overrides:{title:v.title,description:v.description,startDate:b.toISOString(),endDate:w.toISOString(),assignee:v.assignee,type:v.type,color:y.color}}),await l.mutateAsync({id:s,updates:{recurrenceExceptions:N}}),j(!1),$(null)},re=s=>{const i=new Date(u);h==="month"?i.setMonth(i.getMonth()+s):h==="week"?i.setDate(i.getDate()+s*7):i.setDate(i.getDate()+s),r(i)},ge=()=>r(new Date),fe={available:"#3b82f6",in_progress:"#f97316",done:"#22c55e",blocked:"#ef4444"},be={urgent:4,high:24,medium:72,low:168},ne=E.useMemo(()=>p.filter(s=>(s.assignee||s.assignedTo)&&(s.actualStart||s.estimatedStart||s.slaDeadline||s.createdAt)).map(s=>{const i=s.assignee||s.assignedTo||"",b=M.find(L=>L.name.toLowerCase().trim()===i.toLowerCase().trim());let w,y;if(s.actualStart)w=new Date(s.actualStart),y=s.actualEnd?new Date(s.actualEnd):new Date(w.getTime()+2*36e5);else if(s.estimatedStart)w=new Date(s.estimatedStart),y=s.estimatedEnd?new Date(s.estimatedEnd):new Date(w.getTime()+1*36e5);else if(s.slaDeadline)y=new Date(s.slaDeadline),w=new Date(y.getTime()-1*36e5);else{const L=be[s.priority]||72;y=new Date(new Date(s.createdAt).getTime()+L*36e5),w=new Date(y.getTime()-1*36e5)}const N=s.type==="emergency"?`EMG-${s.emergencyNumber}`:`#${s.number}`;return{id:`os_cal_${s.id}`,title:`O.S. ${N} - ${s.title}`,description:s.client?`Cliente: ${s.client}`:s.description||"",startDate:w.toISOString(),endDate:y.toISOString(),assignee:(b==null?void 0:b.id)||null,type:"os",color:fe[s.status]||"#f97316",_isOS:!0,_osId:s.id,_osStatus:s.status,_osPriority:s.priority}}),[p,M]),Z=E.useCallback(s=>{const i=new Date(s.getFullYear(),s.getMonth(),s.getDate()),b=new Date(i);b.setDate(b.getDate()+1);const w=Me(x,i,b),y=ne.filter(N=>{const L=new Date(N.startDate);return new Date(N.endDate)>=i&&L<b});return[...w,...y].filter(N=>_.includes(N.assignee))},[x,ne,_]),le=E.useMemo(()=>{const s=M.filter(w=>_.includes(w.id));if(s.length===0)return _e;let i=23,b=0;for(const w of s){const y=parseInt((w.workStart||"08:00").split(":")[0]),N=parseInt((w.workEnd||"18:00").split(":")[0]);y<i&&(i=y),N>b&&(b=N)}return{start:i,end:b}},[M,_]),ke=E.useMemo(()=>{if(h==="month")return`${z[u.getMonth()]} ${u.getFullYear()}`;if(h==="week"){const s=de(u),i=s[0],b=s[6];return i.getMonth()===b.getMonth()?`${i.getDate()} - ${b.getDate()} ${z[i.getMonth()]} ${i.getFullYear()}`:`${i.getDate()} ${z[i.getMonth()].slice(0,3)} - ${b.getDate()} ${z[b.getMonth()].slice(0,3)} ${b.getFullYear()}`}return`${u.getDate()} de ${z[u.getMonth()]} de ${u.getFullYear()}`},[u,h]);return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>K(),className:"flex items-center gap-2 px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors text-sm font-medium shadow-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Novo Evento"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>re(-1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-slate-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:ge,className:"px-3 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Hoje"}),e.jsx("button",{onClick:()=>re(1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-slate-600 dark:text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:ke})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>se(s=>!s),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),e.jsx("span",{children:"Equipe"}),_.length<M.length&&e.jsx("span",{className:"bg-blue-500 text-white text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center",children:_.length}),e.jsx("svg",{className:`w-3.5 h-3.5 transition-transform ${te?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),te&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>se(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-xl z-40 py-1 overflow-hidden",children:[e.jsxs("button",{onClick:()=>{_.length===M.length?U([]):U(M.map(s=>s.id))},className:"w-full px-3 py-2 text-left text-xs font-semibold text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors uppercase tracking-wide flex items-center justify-between",children:[e.jsx("span",{children:_.length===M.length?"Desmarcar todos":"Selecionar todos"}),e.jsxs("span",{className:"text-[10px] normal-case font-normal text-slate-400 dark:text-slate-500",children:[_.length,"/",M.length]})]}),e.jsx("div",{className:"border-t border-slate-100 dark:border-slate-700"}),M.map(s=>{const i=_.includes(s.id);return e.jsxs("button",{onClick:()=>ue(s.id),className:"w-full px-3 py-2 flex items-center gap-2.5 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center shrink-0 transition-colors ${i?"border-transparent":"border-slate-300 dark:border-slate-600"}`,style:i?{backgroundColor:s.color}:{},children:i&&e.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-[10px] font-bold shrink-0",style:{backgroundColor:s.color},children:(s.name||"?").charAt(0).toUpperCase()}),e.jsx("span",{className:`text-sm truncate ${i?"text-slate-800 dark:text-slate-100 font-medium":"text-slate-400 dark:text-slate-500"}`,children:B(s.name)})]},s.id)})]})]})]}),e.jsxs("button",{onClick:()=>{try{$e(x,`agenda-${V(new Date)}.ics`)}catch(s){console.error("Erro ao exportar .ics:",s)}},className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",title:"Exportar calendario .ics",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),".ics"]}),e.jsx("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 rounded-lg p-0.5",children:["month","week","day"].map(s=>e.jsx("button",{onClick:()=>m(s),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${h===s?"bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:s==="month"?"Mes":s==="week"?"Semana":"Dia"},s))})]})]}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[h==="month"&&e.jsx(We,{currentDate:u,today:t,getEventsForDay:Z,onDayClick:s=>{r(s),m("day")},onEventClick:J,allMembers:M}),h==="week"&&e.jsx(Ie,{currentDate:u,today:t,getEventsForDay:Z,onEventClick:J,onSlotClick:s=>K(s),allMembers:M,businessHours:le}),h==="day"&&e.jsx(Re,{currentDate:u,today:t,getEventsForDay:Z,onEventClick:J,onSlotClick:()=>K(u),allMembers:M,businessHours:le})]}),O&&e.jsx(Ve,{form:v,setForm:F,onSave:ae,onClose:()=>R(null),onMoreOptions:xe,allMembers:M}),C&&e.jsx(He,{form:v,setForm:F,editing:!!k,onSave:ae,onClose:()=>j(!1),onDelete:()=>D(k==null?void 0:k.id),allMembers:M}),T&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl max-w-sm w-full mx-4 overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 text-center mb-2",children:"Excluir Evento?"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center",children:"Esta acao nao pode ser desfeita."})]}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>D(null),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:()=>pe(T),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Excluir"})]})]})}),Y&&e.jsx(Be,{action:Y.action,onChoice:he,onClose:()=>$(null)})]})}function We({currentDate:t,today:x,getEventsForDay:f,onDayClick:o,onEventClick:d,allMembers:p}){const c=E.useMemo(()=>Ae(t.getFullYear(),t.getMonth()),[t]);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-slate-200 dark:border-slate-700",children:P.map(n=>e.jsx("div",{className:"px-2 py-2 text-center text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase",children:n},n))}),e.jsx("div",{className:"flex-1 grid grid-cols-7 grid-rows-6",children:c.map(({date:n,isCurrentMonth:l},g)=>{const a=f(n),u=ee(n,x);return e.jsxs("div",{onClick:()=>o(n),className:`border-b border-r border-slate-100 dark:border-slate-700 p-1 min-h-[80px] cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ${l?"":"bg-slate-50/50 dark:bg-slate-800/50"}`,children:[e.jsx("div",{className:`text-xs font-medium mb-1 w-6 h-6 flex items-center justify-center rounded-full ${u?"bg-fyness-primary text-white":l?"text-slate-700 dark:text-slate-200":"text-slate-400 dark:text-slate-500"}`,children:n.getDate()}),e.jsxs("div",{className:"space-y-0.5",children:[a.slice(0,3).map(r=>{const h=p.find(m=>m.id===r.assignee);return e.jsxs("div",{onClick:m=>{m.stopPropagation(),d(r)},className:`text-[10px] px-1.5 py-0.5 rounded truncate text-white font-medium cursor-pointer hover:opacity-80 transition-opacity flex items-center gap-0.5 ${r._isOS?"ring-1 ring-orange-300":""}`,style:{backgroundColor:r.color||"#3b82f6"},title:`${r.title} - ${(h==null?void 0:h.name)||""}`,children:[r._isOS&&e.jsxs("svg",{className:"w-2.5 h-2.5 shrink-0 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),r._parentId&&!r._isOS&&e.jsx("svg",{className:"w-2.5 h-2.5 shrink-0 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsxs("span",{className:`truncate ${r._isOS&&r._osStatus==="done"?"line-through opacity-70":""}`,children:[I(new Date(r.startDate))," ",r.title]}),r._isOS&&r._osStatus==="available"&&e.jsx("span",{className:"ml-auto text-[8px] bg-white/30 px-1 rounded shrink-0",children:"A fazer"}),r._isOS&&r._osStatus==="done"&&e.jsx("span",{className:"ml-auto text-[8px] bg-white/30 px-1 rounded shrink-0",children:"✓"})]},r.id)}),a.length>3&&e.jsxs("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-medium px-1",children:["+",a.length-3," mais"]})]})]},g)})})]})}function Ie({currentDate:t,today:x,getEventsForDay:f,onEventClick:o,onSlotClick:d,allMembers:p,businessHours:c}){const n=E.useMemo(()=>de(t),[t]);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] border-b border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"border-r border-slate-200 dark:border-slate-700"}),n.map((l,g)=>{const a=ee(l,x);return e.jsxs("div",{className:"px-2 py-2 text-center border-r border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase",children:P[l.getDay()]}),e.jsx("div",{className:`text-lg font-semibold mt-0.5 w-8 h-8 flex items-center justify-center rounded-full mx-auto ${a?"bg-fyness-primary text-white":"text-slate-800 dark:text-slate-100"}`,children:l.getDate()})]},g)})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-[60px_repeat(7,1fr)]",children:oe.map(l=>{const g=l<c.start||l>=c.end;return e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:`h-14 border-r border-b border-slate-100 dark:border-slate-700 flex items-start justify-end pr-2 pt-0.5 ${g?"bg-slate-100/60 dark:bg-slate-700/50":""}`,children:e.jsxs("span",{className:`text-[10px] font-medium ${g?"text-slate-300 dark:text-slate-600":"text-slate-400 dark:text-slate-500"}`,children:[String(l).padStart(2,"0"),":00"]})}),n.map((a,u)=>{const h=f(a).filter(m=>new Date(m.startDate).getHours()===l);return e.jsx("div",{onClick:()=>{const m=new Date(a);m.setHours(l,0,0,0),d(m)},className:`h-14 border-r border-b border-slate-100 dark:border-slate-700 relative cursor-pointer hover:bg-blue-50/30 dark:hover:bg-blue-900/20 transition-colors ${g?"bg-slate-100/60 dark:bg-slate-700/50":""}`,children:h.map(m=>{const C=new Date(m.startDate),j=new Date(m.endDate),k=Math.max((j-C)/36e5,.5),S=C.getMinutes()/60*56,T=Math.min(k*56,56*4),D=p.find(O=>O.id===m.assignee);return e.jsxs("div",{onClick:O=>{O.stopPropagation(),o(m)},className:`absolute left-0.5 right-0.5 rounded px-1.5 py-0.5 text-white text-[10px] overflow-hidden cursor-pointer hover:opacity-90 transition-opacity z-10 shadow-sm ${m._isOS?"ring-1 ring-orange-300":""}`,style:{backgroundColor:m.color||"#3b82f6",top:`${S}px`,height:`${T}px`,minHeight:"20px"},title:`${m.title} - ${(D==null?void 0:D.name)||""}`,children:[e.jsxs("div",{className:"font-semibold truncate flex items-center gap-0.5",children:[m._isOS&&e.jsxs("svg",{className:"w-2.5 h-2.5 shrink-0 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),m._parentId&&!m._isOS&&e.jsx("svg",{className:"w-2.5 h-2.5 shrink-0 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{className:`truncate ${m._isOS&&m._osStatus==="done"?"line-through opacity-70":""}`,children:m.title}),m._isOS&&m._osStatus==="available"&&e.jsx("span",{className:"text-[8px] bg-white/30 px-1 rounded shrink-0 ml-auto",children:"A fazer"}),m._isOS&&m._osStatus==="done"&&e.jsx("span",{className:"text-[8px] bg-white/30 px-1 rounded shrink-0 ml-auto",children:"✓"})]}),e.jsxs("div",{className:"opacity-80 truncate",children:[I(C)," - ",I(j)]}),D&&e.jsx("div",{className:"opacity-70 truncate",children:B(D.name)})]},m.id)})},u)})]},l)})})})]})}function Re({currentDate:t,today:x,getEventsForDay:f,onEventClick:o,onSlotClick:d,allMembers:p,businessHours:c}){const n=E.useMemo(()=>f(t),[f,t]),l=ee(t,x);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 dark:border-slate-700 flex items-center gap-3",children:[e.jsxs("div",{className:`w-12 h-12 rounded-full flex flex-col items-center justify-center ${l?"bg-fyness-primary text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200"}`,children:[e.jsx("span",{className:"text-[10px] uppercase leading-none",children:P[t.getDay()]}),e.jsx("span",{className:"text-lg font-bold leading-none",children:t.getDate()})]}),e.jsx("div",{children:e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[n.length," evento",n.length!==1?"s":""]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-[60px_1fr]",children:oe.map(g=>{const a=n.filter(r=>new Date(r.startDate).getHours()===g),u=g<c.start||g>=c.end;return e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:`h-16 border-r border-b border-slate-100 dark:border-slate-700 flex items-start justify-end pr-2 pt-1 ${u?"bg-slate-100/60 dark:bg-slate-700/50":""}`,children:e.jsxs("span",{className:`text-xs font-medium ${u?"text-slate-300 dark:text-slate-600":"text-slate-400 dark:text-slate-500"}`,children:[String(g).padStart(2,"0"),":00"]})}),e.jsx("div",{onClick:d,className:`h-16 border-b border-slate-100 dark:border-slate-700 relative cursor-pointer hover:bg-blue-50/30 dark:hover:bg-blue-900/20 transition-colors ${u?"bg-slate-100/60 dark:bg-slate-700/50":""}`,children:a.map(r=>{const h=new Date(r.startDate),m=new Date(r.endDate),C=(m-h)/6e4,j=h.getMinutes()/60*64,k=Math.max(C/60*64,28),S=p.find(D=>D.id===r.assignee),T=H.find(D=>D.id===r.type);return e.jsxs("div",{onClick:D=>{D.stopPropagation(),o(r)},className:`absolute left-1 right-4 rounded-lg px-3 py-1.5 text-white overflow-hidden cursor-pointer hover:opacity-90 transition-opacity z-10 shadow-sm ${r._isOS?"ring-2 ring-orange-300":""}`,style:{backgroundColor:r.color||"#3b82f6",top:`${j}px`,minHeight:`${k}px`},children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("span",{className:`font-semibold text-sm truncate flex items-center gap-1 ${r._isOS&&r._osStatus==="done"?"line-through opacity-70":""}`,children:[r._isOS&&e.jsxs("svg",{className:"w-3 h-3 shrink-0 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),r._parentId&&!r._isOS&&e.jsx("svg",{className:"w-3 h-3 shrink-0 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.title]}),e.jsxs("div",{className:"flex items-center gap-1",children:[r._isOS&&r._osStatus==="available"&&e.jsx("span",{className:"text-[9px] bg-blue-400/30 text-blue-100 px-1.5 py-0.5 rounded-full whitespace-nowrap font-semibold",children:"A fazer"}),r._isOS&&r._osStatus==="in_progress"&&e.jsx("span",{className:"text-[9px] bg-yellow-400/30 text-yellow-100 px-1 py-0.5 rounded-full whitespace-nowrap font-semibold",children:"Em andamento"}),r._isOS&&r._osStatus==="done"&&e.jsx("span",{className:"text-[9px] bg-green-400/30 text-green-100 px-1.5 py-0.5 rounded-full whitespace-nowrap font-semibold",children:"✓ Concluida"}),r._isOS&&r._osStatus==="blocked"&&e.jsx("span",{className:"text-[9px] bg-red-400/30 text-red-100 px-1.5 py-0.5 rounded-full whitespace-nowrap font-semibold",children:"Bloqueada"}),T&&e.jsx("span",{className:"text-[10px] bg-white/20 px-1.5 py-0.5 rounded-full whitespace-nowrap",children:T.label})]})]}),e.jsxs("div",{className:"text-xs opacity-80 mt-0.5",children:[I(h)," - ",I(m),S&&e.jsx("span",{className:"ml-2",children:B(S.name)})]}),r.description&&e.jsx("div",{className:"text-xs opacity-70 mt-0.5 truncate",children:r.description})]},r.id)})})]},g)})})})]})}function Ve({form:t,setForm:x,onSave:f,onClose:o,onMoreOptions:d,allMembers:p}){const c=(l,g)=>x(a=>({...a,[l]:g})),n=H.find(l=>l.id===t.type)||H[0];return e.jsx("div",{className:"fixed inset-0 z-50",onClick:o,children:e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[420px] bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"h-2 rounded-t-2xl",style:{backgroundColor:n.color}}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsx("input",{type:"text",value:t.title,onChange:l=>c("title",l.target.value),className:"w-full text-xl font-medium text-slate-800 dark:text-slate-100 placeholder:text-slate-300 dark:placeholder:text-slate-500 focus:outline-none border-b-2 border-transparent focus:border-fyness-primary pb-2 transition-colors dark:bg-transparent",placeholder:"Adicionar titulo",autoFocus:!0,onKeyDown:l=>{l.key==="Enter"&&t.title.trim()&&f(),l.key==="Escape"&&o()}}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("svg",{className:"w-5 h-5 text-slate-400 dark:text-slate-500 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("input",{type:"date",value:t.startDate,onChange:l=>{c("startDate",l.target.value),c("endDate",l.target.value)},className:"px-2 py-1.5 border border-slate-200 dark:border-slate-600 rounded-lg text-sm dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent"}),e.jsx("input",{type:"time",value:t.startTime,onChange:l=>c("startTime",l.target.value),className:"px-2 py-1.5 border border-slate-200 dark:border-slate-600 rounded-lg text-sm dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent"}),e.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"-"}),e.jsx("input",{type:"time",value:t.endTime,onChange:l=>c("endTime",l.target.value),className:"px-2 py-1.5 border border-slate-200 dark:border-slate-600 rounded-lg text-sm dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent"})]}),(()=>{const l=t.startDate?new Date(t.startDate+"T00:00:00"):new Date,g=l.getDay(),a=l.getDate(),u=ie[g];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("svg",{className:"w-5 h-5 text-slate-400 dark:text-slate-500 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsxs("select",{value:t.recurrenceType||"",onChange:r=>{const h=r.target.value;if(h==="custom"){c("recurrenceType","weekly"),c("recurrenceConfig",{interval:1,daysOfWeek:[g]}),d();return}c("recurrenceType",h||null),h==="weekly"?c("recurrenceConfig",{interval:1,daysOfWeek:[g]}):h==="monthly"?c("recurrenceConfig",{interval:1,dayOfMonth:a}):c("recurrenceConfig",{interval:1})},className:"flex-1 px-2 py-1.5 border border-slate-200 dark:border-slate-600 rounded-lg text-sm dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",children:[e.jsx("option",{value:"",children:"Nao repete"}),e.jsx("option",{value:"daily",children:"Diariamente"}),e.jsxs("option",{value:"weekly",children:["Semanalmente na ",u]}),e.jsxs("option",{value:"monthly",children:["Mensalmente no dia ",a]}),e.jsx("option",{value:"yearly",children:"Anualmente"}),e.jsx("option",{value:"custom",children:"Personalizado..."})]})]}),t.recurrenceType==="weekly"&&e.jsx("div",{className:"flex items-center gap-1 pl-7",children:P.map((r,h)=>{var C;const m=(((C=t.recurrenceConfig)==null?void 0:C.daysOfWeek)||[]).includes(h);return e.jsx("button",{type:"button",onClick:()=>{var S;const j=((S=t.recurrenceConfig)==null?void 0:S.daysOfWeek)||[],k=m?j.filter(T=>T!==h):[...j,h];k.length!==0&&c("recurrenceConfig",{...t.recurrenceConfig,daysOfWeek:k.sort()})},className:`w-8 h-8 rounded-full text-[10px] font-bold transition-all ${m?"bg-fyness-primary text-white shadow-sm":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:r},h)})})]})})(),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-slate-400 dark:text-slate-500 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsx("div",{className:"flex gap-1.5",children:H.map(l=>e.jsx("button",{onClick:()=>c("type",l.id),className:`px-3 py-1 rounded-full text-xs font-medium transition-all ${t.type===l.id?"text-white shadow-sm":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,style:t.type===l.id?{backgroundColor:l.color}:{},children:l.label},l.id))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-slate-400 dark:text-slate-500 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:t.type==="meeting"?"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z":"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("div",{className:"flex gap-1.5 flex-wrap",children:t.type==="meeting"?p.map(l=>{const g=(t.attendees||[]).includes(l.id);return e.jsxs("button",{onClick:()=>{const a=t.attendees||[],u=g?a.filter(r=>r!==l.id):[...a,l.id];c("attendees",u),u.length>0&&!u.includes(t.assignee)&&c("assignee",u[0])},className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium transition-all ${g?"text-white shadow-sm":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,style:g?{backgroundColor:l.color}:{},children:[g&&e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),B(l.name)]},l.id)}):p.map(l=>e.jsx("button",{onClick:()=>c("assignee",l.id),className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium transition-all ${t.assignee===l.id?"text-white shadow-sm":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,style:t.assignee===l.id?{backgroundColor:l.color}:{},children:B(l.name)},l.id))})]}),t.type==="meeting"&&(t.attendees||[]).length>0&&e.jsxs("p",{className:"text-[10px] text-slate-400 dark:text-slate-500 ml-7",children:[(t.attendees||[]).length," participante",(t.attendees||[]).length>1?"s":""]})]}),e.jsxs("div",{className:"px-5 py-3 bg-slate-50 dark:bg-slate-800/50 flex items-center justify-between border-t border-slate-100 dark:border-slate-700",children:[e.jsx("button",{onClick:d,className:"text-sm text-fyness-primary hover:text-fyness-secondary font-medium transition-colors",children:"Mais opcoes"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{onClick:f,disabled:!t.title.trim(),className:"px-5 py-2 bg-fyness-primary text-white text-sm rounded-lg hover:bg-fyness-secondary transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Salvar"})]})]})]})})}function He({form:t,setForm:x,editing:f,onSave:o,onClose:d,onDelete:p,allMembers:c}){const n=(a,u)=>x(r=>({...r,[a]:u})),l=new Date(`${t.endDate}T${t.endTime}:00`)<new Date,g=t.type==="meeting";return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:d,children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl max-w-lg w-full mx-4 max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:f?"Editar Evento":"Novo Evento"}),e.jsx("button",{onClick:d,className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-slate-400 dark:text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Titulo"}),e.jsx("input",{type:"text",value:t.title,onChange:a=>n("title",a.target.value),className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm",placeholder:"Ex: Reuniao de equipe",autoFocus:!0,onKeyDown:a=>{a.key==="Enter"&&o(),a.key==="Escape"&&d()}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Data Inicio"}),e.jsx("input",{type:"date",value:t.startDate,onChange:a=>n("startDate",a.target.value),className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Hora Inicio"}),e.jsx("input",{type:"time",value:t.startTime,onChange:a=>n("startTime",a.target.value),className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:t.endDate,onChange:a=>n("endDate",a.target.value),className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Hora Fim"}),e.jsx("input",{type:"time",value:t.endTime,onChange:a=>n("endTime",a.target.value),className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:t.type==="meeting"?"Participantes":"Responsavel"}),t.type==="meeting"?e.jsx("div",{className:"flex gap-1.5 flex-wrap p-2 border border-slate-300 dark:border-slate-600 rounded-lg min-h-[42px] dark:bg-slate-800",children:c.map(a=>{const u=(t.attendees||[]).includes(a.id);return e.jsxs("button",{type:"button",onClick:()=>{const r=t.attendees||[],h=u?r.filter(m=>m!==a.id):[...r,a.id];n("attendees",h),h.length>0&&!h.includes(t.assignee)&&n("assignee",h[0])},className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium transition-all ${u?"text-white shadow-sm":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,style:u?{backgroundColor:a.color}:{},children:[u&&e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),B(a.name)]},a.id)})}):e.jsx("select",{value:t.assignee,onChange:a=>n("assignee",a.target.value),className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm",children:c.map(a=>e.jsx("option",{value:a.id,children:B(a.name)},a.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Tipo"}),e.jsx("select",{value:t.type,onChange:a=>n("type",a.target.value),className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm",children:H.map(a=>e.jsx("option",{value:a.id,children:a.label},a.id))})]})]}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-slate-500 dark:text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Recorrencia"})]}),(()=>{var m;const a=t.startDate?new Date(t.startDate+"T00:00:00"):new Date,u=a.getDay(),r=a.getDate(),h=ie[u];return e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:t.recurrenceType||"",onChange:C=>{var k,S,T,D;const j=C.target.value||null;n("recurrenceType",j),j?j==="weekly"||j==="custom"?(n("recurrenceType","weekly"),n("recurrenceConfig",{...t.recurrenceConfig,interval:((k=t.recurrenceConfig)==null?void 0:k.interval)||1,daysOfWeek:(T=(S=t.recurrenceConfig)==null?void 0:S.daysOfWeek)!=null&&T.length?t.recurrenceConfig.daysOfWeek:[u]})):j==="monthly"?n("recurrenceConfig",{interval:1,dayOfMonth:r}):n("recurrenceConfig",{interval:((D=t.recurrenceConfig)==null?void 0:D.interval)||1}):(n("recurrenceConfig",{interval:1}),n("recurrenceEndType","never"),n("recurrenceEndValue",""))},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",children:[e.jsx("option",{value:"",children:"Nao repete"}),e.jsx("option",{value:"daily",children:"Diariamente"}),e.jsxs("option",{value:"weekly",children:["Semanalmente na ",h]}),e.jsxs("option",{value:"monthly",children:["Mensalmente no dia ",r]}),e.jsx("option",{value:"yearly",children:"Anualmente"})]}),t.recurrenceType&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"A cada"}),e.jsx("input",{type:"number",min:"1",max:"99",value:((m=t.recurrenceConfig)==null?void 0:m.interval)||1,onChange:C=>n("recurrenceConfig",{...t.recurrenceConfig,interval:parseInt(C.target.value)||1}),className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm text-center dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary"}),e.jsxs("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:[t.recurrenceType==="daily"&&"dia(s)",t.recurrenceType==="weekly"&&"semana(s)",t.recurrenceType==="monthly"&&"mes(es)",t.recurrenceType==="yearly"&&"ano(s)"]})]}),t.recurrenceType==="weekly"&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Repetir nos dias:"}),e.jsx("div",{className:"flex gap-1",children:P.map((C,j)=>{var S;const k=(((S=t.recurrenceConfig)==null?void 0:S.daysOfWeek)||[]).includes(j);return e.jsx("button",{type:"button",onClick:()=>{var O;const T=((O=t.recurrenceConfig)==null?void 0:O.daysOfWeek)||[],D=k?T.filter(R=>R!==j):[...T,j];D.length!==0&&n("recurrenceConfig",{...t.recurrenceConfig,daysOfWeek:D.sort()})},className:`w-9 h-9 rounded-full text-xs font-medium transition-all ${k?"bg-fyness-primary text-white shadow-sm":"bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:C},j)})})]}),t.recurrenceType==="monthly"&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Repete todo dia ",e.jsx("strong",{children:r})," de cada mes"]})]})})(),t.recurrenceType&&e.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"Termina"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"recEnd",checked:t.recurrenceEndType==="never",onChange:()=>{n("recurrenceEndType","never"),n("recurrenceEndValue","")},className:"w-3.5 h-3.5 text-fyness-primary"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:"Nunca"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"recEnd",checked:t.recurrenceEndType==="after",onChange:()=>n("recurrenceEndType","after"),className:"w-3.5 h-3.5 text-fyness-primary"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:"Apos"}),t.recurrenceEndType==="after"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"number",min:"1",max:"999",value:t.recurrenceEndValue||"",onChange:a=>n("recurrenceEndValue",a.target.value),className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm text-center dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary",placeholder:"10"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ocorrencia(s)"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"recEnd",checked:t.recurrenceEndType==="on_date",onChange:()=>n("recurrenceEndType","on_date"),className:"w-3.5 h-3.5 text-fyness-primary"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:"Na data"}),t.recurrenceEndType==="on_date"&&e.jsx("input",{type:"date",value:t.recurrenceEndValue||"",onChange:a=>n("recurrenceEndValue",a.target.value),className:"px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-sm dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary"})]})]})]})]}),g&&l&&e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700 space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wide",children:"Registro de Presenca"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.attended,onChange:a=>{n("attended",a.target.checked),a.target.checked||n("wasLate",!1)},className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:"Participou da reuniao"})]}),t.attended&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer ml-6",children:[e.jsx("input",{type:"checkbox",checked:t.wasLate,onChange:a=>{n("wasLate",a.target.checked),a.target.checked||n("lateMinutes",0)},className:"w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-400"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:"Chegou atrasado"})]}),t.attended&&t.wasLate&&e.jsxs("div",{className:"ml-6 flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"480",value:t.lateMinutes||"",onChange:a=>n("lateMinutes",a.target.value),placeholder:"0",className:"w-20 px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded-lg text-sm dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400 focus:border-transparent"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"minutos de atraso"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Descricao"}),e.jsx("textarea",{value:t.description,onChange:a=>n("description",a.target.value),rows:3,className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm resize-none dark:placeholder-slate-500",placeholder:"Detalhes do evento..."})]}),g&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Anotacoes / Ata da Reuniao"]})}),e.jsx("textarea",{value:t.notes,onChange:a=>n("notes",a.target.value),rows:5,className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-800 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm resize-y dark:placeholder-slate-500",placeholder:"Pauta, decisoes, pendencias..."})]}),g&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),"Anexos"]})}),(t.attachments||[]).length>0&&e.jsx("div",{className:"space-y-1.5",children:t.attachments.map((a,u)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[a.type==="image"?e.jsx("img",{src:a.data,alt:a.label,className:"w-8 h-8 rounded object-cover shrink-0"}):e.jsx("div",{className:"w-8 h-8 bg-blue-50 dark:bg-blue-900/20 rounded flex items-center justify-center shrink-0",children:e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300 truncate flex-1",children:a.label||"Arquivo"}),e.jsx("button",{type:"button",onClick:()=>n("attachments",t.attachments.filter((r,h)=>h!==u)),className:"p-1 text-slate-400 hover:text-red-500 transition-colors",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},a.id||u))}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg cursor-pointer hover:border-blue-400 dark:hover:border-blue-500 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Adicionar arquivo (max 3MB)"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt",onChange:a=>{var h;const u=(h=a.target.files)==null?void 0:h[0];if(!u)return;if(u.size>3*1024*1024){alert("Arquivo muito grande! Maximo: 3MB.");return}const r=new FileReader;r.onload=m=>{const C=u.type.startsWith("image/"),j={id:Date.now(),type:C?"image":"document",data:m.target.result,label:u.name,mimeType:u.type};n("attachments",[...t.attachments||[],j])},r.readAsDataURL(u),a.target.value=""}})]}),e.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:"Atas, documentos, imagens, PDFs"})]})]}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 flex items-center justify-between",children:[e.jsx("div",{children:f&&e.jsx("button",{onClick:p,className:"px-3 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-sm font-medium",children:"Excluir"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:d,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors text-sm",children:"Cancelar"}),e.jsx("button",{onClick:o,disabled:!t.title.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Salvar":"Criar Evento"})]})]})]})})}function Be({action:t,onChoice:x,onClose:f}){const[o,d]=E.useState("this"),p=t==="delete";return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl max-w-sm w-full mx-4 overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${p?"bg-red-100 dark:bg-red-900/20":"bg-blue-100 dark:bg-blue-900/20"}`,children:e.jsx("svg",{className:`w-5 h-5 ${p?"text-red-500":"text-blue-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:p?"Excluir evento recorrente":"Editar evento recorrente"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("input",{type:"radio",name:"recChoice",checked:o==="this",onChange:()=>d("this"),className:"w-4 h-4 text-fyness-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:"Este evento"}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Apenas esta ocorrencia sera ",p?"excluida":"editada"]})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("input",{type:"radio",name:"recChoice",checked:o==="future",onChange:()=>d("future"),className:"w-4 h-4 text-fyness-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:"Este e os proximos"}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[p?"Excluir":"Editar"," esta e todas as ocorrencias futuras"]})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("input",{type:"radio",name:"recChoice",checked:o==="all",onChange:()=>d("all"),className:"w-4 h-4 text-fyness-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:"Todos os eventos da serie"}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Todas as ocorrencias serao ",p?"excluidas":"editadas"]})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 flex gap-3 justify-end border-t border-slate-100 dark:border-slate-700",children:[e.jsx("button",{onClick:f,className:"px-4 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:()=>x(o),className:`px-4 py-2 text-sm text-white rounded-lg transition-colors font-medium ${p?"bg-red-500 hover:bg-red-600":"bg-fyness-primary hover:bg-fyness-secondary"}`,children:p?"Excluir":"Editar"})]})]})})}export{Ue as default};
