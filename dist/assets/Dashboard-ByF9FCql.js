import{j as e}from"./query-CQB1N7mz.js";import{E as pe}from"./fynessTemplate-CM7nxNkA.js";import{b as ve,r as l}from"./vendor-D5cPNHfC.js";import{g as ke,a as je,c as we,b as Ne,d as ee,e as ye,f as Ce,h as te}from"./index-DrAcGZG1.js";import"./supabase-Br6iVc9W.js";const Y=[{bg:"bg-blue-500",light:"bg-blue-50",border:"border-blue-300",text:"text-blue-700",gradient:"from-blue-500 to-blue-600"},{bg:"bg-emerald-500",light:"bg-emerald-50",border:"border-emerald-300",text:"text-emerald-700",gradient:"from-emerald-500 to-emerald-600"},{bg:"bg-amber-500",light:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",gradient:"from-amber-500 to-amber-600"},{bg:"bg-rose-500",light:"bg-rose-50",border:"border-rose-300",text:"text-rose-700",gradient:"from-rose-500 to-rose-600"},{bg:"bg-cyan-500",light:"bg-cyan-50",border:"border-cyan-300",text:"text-cyan-700",gradient:"from-cyan-500 to-cyan-600"},{bg:"bg-violet-500",light:"bg-violet-50",border:"border-violet-300",text:"text-violet-700",gradient:"from-violet-500 to-violet-600"}];function Ie(){const V=ve(),[i,se]=l.useState([]),[u,re]=l.useState([]),[ae,X]=l.useState(!0),[F,A]=l.useState(null),[T,P]=l.useState(null),[E,I]=l.useState(""),[le,M]=l.useState(!1),[j,S]=l.useState(null),[w,$]=l.useState(""),[N,oe]=l.useState({}),D=l.useRef({}),B=l.useRef({}),[de,b]=l.useState(!1),[y,p]=l.useState(null),[C,g]=l.useState(""),[R,v]=l.useState(0),[L,f]=l.useState(null),[ne,z]=l.useState(null),[O,H]=l.useState(null),G=l.useRef(null),m=l.useCallback(async()=>{X(!0),A(null);try{const[t,r]=await Promise.all([ke(),je()]);re(t),se(r)}catch(t){console.error("Erro ao carregar dados:",t),A("Erro ao carregar dados do banco de dados")}finally{X(!1)}},[]);l.useEffect(()=>{m()},[m]);const k=l.useCallback(()=>{const t={};Object.keys(D.current).forEach(r=>{const a=D.current[r];if(!a)return;const d=a.getBoundingClientRect();Object.keys(B.current).forEach(s=>{const o=B.current[s];if(o){const c=i.find(n=>n.id===s);if((c==null?void 0:c.companyId)===r){const n=o.getBoundingClientRect();t[s]={x:n.left-d.left+n.width/2,y:n.top-d.top+n.height/2,width:n.width,height:n.height,top:n.top-d.top,bottom:n.top-d.top+n.height,left:n.left-d.left,right:n.left-d.left+n.width,companyId:r}}}})}),oe(t)},[i]);l.useEffect(()=>{const t=setTimeout(k,100),r=setTimeout(k,400);window.addEventListener("resize",k);const a=new ResizeObserver(()=>{k()});return document.querySelector("aside")&&a.observe(document.querySelector("aside")),()=>{clearTimeout(t),clearTimeout(r),window.removeEventListener("resize",k),a.disconnect()}},[i,u,k]);const ie=l.useCallback(t=>{const r=[];return i.filter(d=>d.companyId===t).forEach(d=>{if(d.parentId&&N[d.id]&&N[d.parentId]){const s=N[d.parentId],o=N[d.id];if(s.companyId!==t||o.companyId!==t)return;let c,n,h,x;o.top>s.bottom-10?(c=s.x,n=s.bottom,h=o.x,x=o.top):o.left>s.right-10?(c=s.right,n=s.y,h=o.left,x=o.y):o.right<s.left+10?(c=s.left,n=s.y,h=o.right,x=o.y):(c=s.x,n=s.top,h=o.x,x=o.bottom),r.push({id:`${d.parentId}-${d.id}`,parentId:d.parentId,childId:d.id,startX:c,startY:n,endX:h,endY:x,level:d.level||1})}}),r},[i,N]),K=async()=>{await we({name:C,colorIndex:R,image:L})&&await m(),b(!1),g(""),v(0),f(null)},_=async()=>{await Ne(y.id,{name:C,colorIndex:R,image:L}),await m(),p(null),b(!1),g(""),v(0),f(null)},ce=t=>{const r=t.target.files[0];if(!r)return;if(r.size>500*1024){alert("Imagem muito grande. Máximo 500KB.");return}const a=new FileReader;a.onloadend=()=>f(a.result),a.readAsDataURL(r)},xe=async t=>{const r=i.filter(a=>a.companyId===t);for(const a of r)await ee(a.id);await ye(t),await m(),H(null)},me=(t,r)=>i.filter(a=>a.id!==t&&a.companyId===r),q=t=>{z(t),I("Novo Diagrama"),M(!0)},U=async()=>{const t=await Ce({name:E,xml:pe,companyId:ne,level:0,parentId:null,isRoot:!0,isTemplate:!1});t&&(M(!1),I(""),z(null),V(`/editor/${t.id}`))},J=t=>{V(`/editor/${t}`)},he=async t=>{const r=i.filter(a=>a.parentId===t);for(const a of r)await te(a.id,{parentId:null,level:0});await ee(t),await m(),P(null)},ue=async()=>{if(j){const t=i.find(a=>a.id===w),r=(t==null?void 0:t.level)??0;await te(j,{parentId:w||null,level:w?r+1:0,isRoot:!w}),await m()}S(null),$("")},be=t=>t?new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}):"",ge=t=>{const r=i.find(a=>a.id===t);return(r==null?void 0:r.name)||"Desconhecido"},Q=t=>{const r=[{gradient:"from-green-500 to-emerald-600",border:"border-green-400",bg:"bg-green-500",light:"bg-green-50"},{gradient:"from-blue-500 to-blue-600",border:"border-blue-400",bg:"bg-blue-500",light:"bg-blue-50"},{gradient:"from-purple-500 to-violet-600",border:"border-purple-400",bg:"bg-purple-500",light:"bg-purple-50"},{gradient:"from-orange-500 to-amber-600",border:"border-orange-400",bg:"bg-orange-500",light:"bg-orange-50"},{gradient:"from-pink-500 to-rose-600",border:"border-pink-400",bg:"bg-pink-500",light:"bg-pink-50"}];return r[t%r.length]},Z=t=>{const r=["#22c55e","#3b82f6","#2563eb","#f97316","#ec4899"];return r[(t-1)%r.length]||"#64748b"},fe=l.useMemo(()=>{const t={};return u.forEach(r=>{t[r.id]=i.filter(a=>a.companyId===r.id).sort((a,d)=>{const s=a.level??0,o=d.level??0;return s!==o?s-o:new Date(d.updatedAt||0)-new Date(a.updatedAt||0)})}),t},[i,u]),W=i.find(t=>t.id===j);return ae?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-fyness-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Carregando dados..."})]})}):F?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-lg dark:shadow-slate-900/50 max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-2",children:"Erro de Conexão"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:F}),e.jsx("button",{onClick:m,className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors",children:"Tentar Novamente"})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-950",children:[e.jsx("header",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-fyness-primary to-fyness-secondary rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"BPMN Holding"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Gestão de Processos Empresariais"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-2 py-1 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Supabase"]}),e.jsxs("button",{onClick:()=>{p(null),g(""),b(!0)},className:"flex items-center gap-2 px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nova Empresa"]}),e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[u.length," empresa",u.length!==1?"s":""," • ",i.length," fluxo",i.length!==1?"s":""]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-6 py-8 space-y-8",children:u.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-12 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-slate-300 dark:text-slate-600 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5"})}),e.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Nenhuma empresa cadastrada"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"Crie sua primeira empresa para começar a gerenciar os processos."}),e.jsx("button",{onClick:()=>{p(null),g(""),b(!0)},className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors",children:"Criar Primeira Empresa"})]}):e.jsx(e.Fragment,{children:u.map(t=>{const r=Y[t.colorIndex%Y.length],a=fe[t.id]||[],d=ie(t.id);return e.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-2xl border-2 ${r.border} shadow-sm overflow-hidden`,children:[e.jsx("div",{className:`bg-gradient-to-r ${r.gradient} px-6 py-4`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-10 h-10 rounded-lg object-contain bg-white/20 p-1 border-2 border-white/30"}):e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),e.jsxs("p",{className:"text-white/70 text-sm",children:[a.length," fluxo",a.length!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>q(t.id),className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-colors text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Novo Fluxo"]}),e.jsx("button",{onClick:()=>{p(t),g(t.name),v(t.colorIndex||0),f(t.image||null),b(!0)},className:"p-1.5 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-colors",title:"Editar empresa",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>H(t.id),className:"p-1.5 bg-white/20 hover:bg-red-500/50 text-white rounded-lg transition-colors",title:"Excluir empresa",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),e.jsx("div",{className:"p-6",children:a.length===0?e.jsxs("div",{className:`${r.light} rounded-xl border-2 border-dashed ${r.border} p-8 text-center`,children:[e.jsx("svg",{className:`w-12 h-12 ${r.text} mx-auto mb-3 opacity-50`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7"})}),e.jsx("p",{className:`${r.text} font-medium mb-1`,children:"Nenhum fluxo ainda"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-4",children:"Crie o primeiro fluxo de processos desta empresa"}),e.jsx("button",{onClick:()=>q(t.id),className:`px-4 py-2 bg-gradient-to-r ${r.gradient} text-white rounded-lg hover:opacity-90 transition-opacity text-sm font-medium`,children:"Criar Primeiro Fluxo"})]}):e.jsxs("div",{ref:s=>D.current[t.id]=s,className:"relative",children:[e.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-0",style:{overflow:"visible"},children:[e.jsx("defs",{children:[0,1,2,3,4].map(s=>e.jsx("marker",{id:`arrowhead-${t.id}-${s}`,markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:Z(s+1)})},`arrow-${t.id}-${s}`))}),d.map(s=>{const o=Z(s.level),c=Math.abs(s.endY-s.startY)>Math.abs(s.endX-s.startX),n=(s.startX+s.endX)/2,h=(s.startY+s.endY)/2;let x;return c?x=`M ${s.startX} ${s.startY} C ${s.startX} ${h}, ${s.endX} ${h}, ${s.endX} ${s.endY}`:x=`M ${s.startX} ${s.startY} C ${n} ${s.startY}, ${n} ${s.endY}, ${s.endX} ${s.endY}`,e.jsxs("g",{children:[e.jsx("path",{d:x,fill:"none",stroke:o,strokeWidth:"4",strokeOpacity:"0.2",strokeLinecap:"round"}),e.jsx("path",{d:x,fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",markerEnd:`url(#arrowhead-${t.id}-${(s.level-1)%5})`})]},s.id)})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 relative z-10",children:a.map(s=>{const o=Q(s.level||0);return e.jsxs("div",{ref:c=>B.current[s.id]=c,className:`bg-white dark:bg-slate-800 rounded-lg border hover:shadow-md dark:hover:shadow-slate-900/50 transition-all overflow-hidden group relative z-20 ${o.border} hover:border-slate-400 dark:hover:border-slate-500`,children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${o.gradient}`}),e.jsxs("div",{onClick:()=>J(s.id),className:"h-14 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 flex items-center justify-center cursor-pointer relative overflow-hidden",children:[e.jsx("svg",{className:"w-6 h-6 text-slate-300 dark:text-slate-600 group-hover:opacity-0 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7"})}),e.jsx("div",{className:`absolute top-1 left-1 bg-gradient-to-r ${o.gradient} text-white text-[8px] px-1.5 py-0.5 rounded-full font-medium z-20`,children:s.level===0||s.isRoot?"Raiz":`N${s.level}`}),e.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/90 dark:group-hover:bg-slate-800/90 transition-all flex items-center justify-center",children:e.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-fyness-primary font-medium text-xs",children:"Abrir"})})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100 truncate text-xs",children:s.name}),e.jsx("p",{className:"text-[9px] text-slate-400 dark:text-slate-500 mb-1.5",children:be(s.updatedAt)}),s.parentId&&e.jsxs("div",{className:"mb-1.5 p-1 bg-slate-50 dark:bg-slate-700/50 rounded flex items-center gap-1 text-[8px]",children:[e.jsx("div",{className:`w-1 h-1 rounded-full ${Q((s.level||1)-1).bg}`}),e.jsxs("span",{className:"text-slate-500 dark:text-slate-400 truncate",children:["← ",ge(s.parentId)]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>J(s.id),className:"flex-1 px-1.5 py-0.5 bg-fyness-primary text-white text-[9px] rounded hover:bg-fyness-secondary transition-colors",children:"Editar"}),e.jsx("button",{onClick:()=>{S(s.id),$(s.parentId||"")},className:"px-1.5 py-0.5 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 rounded hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",title:"Dependência",children:e.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"})})}),e.jsx("button",{onClick:()=>P(s.id),className:"px-1.5 py-0.5 border border-red-200 dark:border-red-800 text-red-400 rounded hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Excluir",children:e.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},s.id)})})]})})]},t.id)})})}),de&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl dark:shadow-slate-900/50 max-w-md w-full mx-4 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:y?"Editar Empresa":"Nova Empresa"})}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Nome da Empresa"}),e.jsx("input",{type:"text",value:C,onChange:t=>g(t.target.value),className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent dark:bg-slate-800 dark:text-slate-200",placeholder:"Ex: Empresa de Tecnologia",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"&&C.trim()&&(y?_():K()),t.key==="Escape"&&(b(!1),p(null),v(0),f(null))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Cor"}),e.jsx("div",{className:"flex gap-3",children:Y.map((t,r)=>e.jsx("button",{onClick:()=>v(r),className:`w-10 h-10 rounded-full ${t.bg} transition-all ${R===r?"ring-3 ring-offset-2 ring-slate-400 dark:ring-offset-slate-800 scale-110":"hover:scale-105 opacity-70 hover:opacity-100"}`,title:`Cor ${r+1}`},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Logo / Imagem"}),e.jsxs("div",{className:"flex items-center gap-4",children:[L?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:L,alt:"Logo",className:"w-16 h-16 rounded-xl object-cover border-2 border-slate-200 dark:border-slate-700"}),e.jsx("button",{onClick:()=>f(null),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",title:"Remover imagem",children:"x"})]}):e.jsx("div",{className:"w-16 h-16 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600 flex items-center justify-center text-slate-400 dark:text-slate-500",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("input",{ref:G,type:"file",accept:"image/*",onChange:ce,className:"hidden"}),e.jsx("button",{onClick:()=>{var t;return(t=G.current)==null?void 0:t.click()},className:"px-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:L?"Trocar Imagem":"Escolher Imagem"}),e.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:"PNG, JPG. Max 500KB"})]})]})]})]}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>{b(!1),p(null),g(""),v(0),f(null)},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:y?_:K,disabled:!C.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Salvar":"Criar Empresa"})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl dark:shadow-slate-900/50 max-w-md w-full mx-4 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Definir Dependência"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Este fluxo depende de:"}),e.jsxs("select",{value:w,onChange:t=>$(t.target.value),className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent dark:bg-slate-800 dark:text-slate-200",children:[e.jsx("option",{value:"",children:"Nenhum (Fluxo Raiz)"}),me(j,W==null?void 0:W.companyId).map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.level!==void 0?`(Nível ${t.level})`:""]},t.id))]})]}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>{S(null),$("")},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:ue,className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors",children:"Salvar"})]})]})}),le&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl dark:shadow-slate-900/50 max-w-md w-full mx-4 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Novo Fluxo"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-2",children:"Nome do Fluxo"}),e.jsx("input",{type:"text",value:E,onChange:t=>I(t.target.value),className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent dark:bg-slate-800 dark:text-slate-200",placeholder:"Ex: Processo de Vendas",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"&&E.trim()&&U(),t.key==="Escape"&&M(!1)}})]}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>{M(!1),z(null)},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:U,disabled:!E.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Criar Fluxo"})]})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl dark:shadow-slate-900/50 max-w-sm w-full mx-4 overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 text-center mb-2",children:"Excluir Fluxo?"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center",children:"Esta ação não pode ser desfeita."})]}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>P(null),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:()=>he(T),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Excluir"})]})]})}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl dark:shadow-slate-900/50 max-w-sm w-full mx-4 overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5"})})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 text-center mb-2",children:"Excluir Empresa?"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center",children:"Todos os fluxos desta empresa serão excluídos."})]}),e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>H(null),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:()=>xe(O),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Excluir"})]})]})})]})}export{Ie as default};
