var m8=Object.defineProperty;var g8=(e,t,n)=>t in e?m8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ln=(e,t,n)=>g8(e,typeof t!="symbol"?t+"":t,n);function v8(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var ere=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qC={exports:{}},Jv={},HC={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=Symbol.for("react.element"),y8=Symbol.for("react.portal"),b8=Symbol.for("react.fragment"),_8=Symbol.for("react.strict_mode"),w8=Symbol.for("react.profiler"),x8=Symbol.for("react.provider"),E8=Symbol.for("react.context"),S8=Symbol.for("react.forward_ref"),N8=Symbol.for("react.suspense"),A8=Symbol.for("react.memo"),k8=Symbol.for("react.lazy"),ES=Symbol.iterator;function C8(e){return e===null||typeof e!="object"?null:(e=ES&&e[ES]||e["@@iterator"],typeof e=="function"?e:null)}var VC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WC=Object.assign,KC={};function sf(e,t,n){this.props=e,this.context=t,this.refs=KC,this.updater=n||VC}sf.prototype.isReactComponent={};sf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function YC(){}YC.prototype=sf.prototype;function Fw(e,t,n){this.props=e,this.context=t,this.refs=KC,this.updater=n||VC}var $w=Fw.prototype=new YC;$w.constructor=Fw;WC($w,sf.prototype);$w.isPureReactComponent=!0;var SS=Array.isArray,JC=Object.prototype.hasOwnProperty,Uw={current:null},XC={key:!0,ref:!0,__self:!0,__source:!0};function ZC(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)JC.call(t,r)&&!XC.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:jp,type:e,key:o,ref:a,props:i,_owner:Uw.current}}function P8(e,t){return{$$typeof:jp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zw(e){return typeof e=="object"&&e!==null&&e.$$typeof===jp}function T8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var NS=/\/+/g;function i2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?T8(""+e.key):t.toString(36)}function f0(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case jp:case y8:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+i2(a,0):r,SS(i)?(n="",e!=null&&(n=e.replace(NS,"$&/")+"/"),f0(i,t,n,"",function(c){return c})):i!=null&&(zw(i)&&(i=P8(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(NS,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",SS(e))for(var s=0;s<e.length;s++){o=e[s];var l=r+i2(o,s);a+=f0(o,t,n,l,i)}else if(l=C8(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=r+i2(o,s++),a+=f0(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function rg(e,t,n){if(e==null)return e;var r=[],i=0;return f0(e,r,"","",function(o){return t.call(n,o,i++)}),r}function R8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Si={current:null},h0={transition:null},L8={ReactCurrentDispatcher:Si,ReactCurrentBatchConfig:h0,ReactCurrentOwner:Uw};function QC(){throw Error("act(...) is not supported in production builds of React.")}Wt.Children={map:rg,forEach:function(e,t,n){rg(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rg(e,function(){t++}),t},toArray:function(e){return rg(e,function(t){return t})||[]},only:function(e){if(!zw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Wt.Component=sf;Wt.Fragment=b8;Wt.Profiler=w8;Wt.PureComponent=Fw;Wt.StrictMode=_8;Wt.Suspense=N8;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L8;Wt.act=QC;Wt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=WC({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Uw.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)JC.call(t,l)&&!XC.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:jp,type:e.type,key:i,ref:o,props:r,_owner:a}};Wt.createContext=function(e){return e={$$typeof:E8,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:x8,_context:e},e.Consumer=e};Wt.createElement=ZC;Wt.createFactory=function(e){var t=ZC.bind(null,e);return t.type=e,t};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(e){return{$$typeof:S8,render:e}};Wt.isValidElement=zw;Wt.lazy=function(e){return{$$typeof:k8,_payload:{_status:-1,_result:e},_init:R8}};Wt.memo=function(e,t){return{$$typeof:A8,type:e,compare:t===void 0?null:t}};Wt.startTransition=function(e){var t=h0.transition;h0.transition={};try{e()}finally{h0.transition=t}};Wt.unstable_act=QC;Wt.useCallback=function(e,t){return Si.current.useCallback(e,t)};Wt.useContext=function(e){return Si.current.useContext(e)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(e){return Si.current.useDeferredValue(e)};Wt.useEffect=function(e,t){return Si.current.useEffect(e,t)};Wt.useId=function(){return Si.current.useId()};Wt.useImperativeHandle=function(e,t,n){return Si.current.useImperativeHandle(e,t,n)};Wt.useInsertionEffect=function(e,t){return Si.current.useInsertionEffect(e,t)};Wt.useLayoutEffect=function(e,t){return Si.current.useLayoutEffect(e,t)};Wt.useMemo=function(e,t){return Si.current.useMemo(e,t)};Wt.useReducer=function(e,t,n){return Si.current.useReducer(e,t,n)};Wt.useRef=function(e){return Si.current.useRef(e)};Wt.useState=function(e){return Si.current.useState(e)};Wt.useSyncExternalStore=function(e,t,n){return Si.current.useSyncExternalStore(e,t,n)};Wt.useTransition=function(){return Si.current.useTransition()};Wt.version="18.3.1";HC.exports=Wt;var _e=HC.exports;const eP=GC(_e),O8=v8({__proto__:null,default:eP},[_e]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M8=_e,I8=Symbol.for("react.element"),D8=Symbol.for("react.fragment"),j8=Object.prototype.hasOwnProperty,B8=M8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F8={key:!0,ref:!0,__self:!0,__source:!0};function tP(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)j8.call(t,r)&&!F8.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:I8,type:e,key:o,ref:a,props:i,_owner:B8.current}}Jv.Fragment=D8;Jv.jsx=tP;Jv.jsxs=tP;qC.exports=Jv;var E=qC.exports,Lb={},nP={exports:{}},so={},rP={exports:{}},iP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,ae){var ye=te.length;te.push(ae);e:for(;0<ye;){var we=ye-1>>>1,L=te[we];if(0<i(L,ae))te[we]=ae,te[ye]=L,ye=we;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var ae=te[0],ye=te.pop();if(ye!==ae){te[0]=ye;e:for(var we=0,L=te.length,G=L>>>1;we<G;){var K=2*(we+1)-1,ee=te[K],O=K+1,N=te[O];if(0>i(ee,ye))O<L&&0>i(N,ee)?(te[we]=N,te[O]=ye,we=O):(te[we]=ee,te[K]=ye,we=K);else if(O<L&&0>i(N,ye))te[we]=N,te[O]=ye,we=O;else break e}}return ae}function i(te,ae){var ye=te.sortIndex-ae.sortIndex;return ye!==0?ye:te.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(te){for(var ae=n(c);ae!==null;){if(ae.callback===null)r(c);else if(ae.startTime<=te)r(c),ae.sortIndex=ae.expirationTime,t(l,ae);else break;ae=n(c)}}function w(te){if(v=!1,_(te),!m)if(n(l)!==null)m=!0,pe(R);else{var ae=n(c);ae!==null&&ue(w,ae.startTime-te)}}function R(te,ae){m=!1,v&&(v=!1,y(T),T=-1),f=!0;var ye=h;try{for(_(ae),d=n(l);d!==null&&(!(d.expirationTime>ae)||te&&!C());){var we=d.callback;if(typeof we=="function"){d.callback=null,h=d.priorityLevel;var L=we(d.expirationTime<=ae);ae=e.unstable_now(),typeof L=="function"?d.callback=L:d===n(l)&&r(l),_(ae)}else r(l);d=n(l)}if(d!==null)var G=!0;else{var K=n(c);K!==null&&ue(w,K.startTime-ae),G=!1}return G}finally{d=null,h=ye,f=!1}}var I=!1,q=null,T=-1,D=5,M=-1;function C(){return!(e.unstable_now()-M<D)}function j(){if(q!==null){var te=e.unstable_now();M=te;var ae=!0;try{ae=q(!0,te)}finally{ae?z():(I=!1,q=null)}}else I=!1}var z;if(typeof x=="function")z=function(){x(j)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,me=Q.port2;Q.port1.onmessage=j,z=function(){me.postMessage(null)}}else z=function(){b(j,0)};function pe(te){q=te,I||(I=!0,z())}function ue(te,ae){T=b(function(){te(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,pe(R))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(te){switch(h){case 1:case 2:case 3:var ae=3;break;default:ae=h}var ye=h;h=ae;try{return te()}finally{h=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,ae){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ye=h;h=te;try{return ae()}finally{h=ye}},e.unstable_scheduleCallback=function(te,ae,ye){var we=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?we+ye:we):ye=we,te){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ye+L,te={id:u++,callback:ae,priorityLevel:te,startTime:ye,expirationTime:L,sortIndex:-1},ye>we?(te.sortIndex=ye,t(c,te),n(l)===null&&te===n(c)&&(v?(y(T),T=-1):v=!0,ue(w,ye-we))):(te.sortIndex=L,t(l,te),m||f||(m=!0,pe(R))),te},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(te){var ae=h;return function(){var ye=h;h=ae;try{return te.apply(this,arguments)}finally{h=ye}}}})(iP);rP.exports=iP;var $8=rP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U8=_e,ao=$8;function ze(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oP=new Set,ep={};function yu(e,t){Ud(e,t),Ud(e+"Capture",t)}function Ud(e,t){for(ep[e]=t,e=0;e<t.length;e++)oP.add(t[e])}var Cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ob=Object.prototype.hasOwnProperty,z8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,AS={},kS={};function G8(e){return Ob.call(kS,e)?!0:Ob.call(AS,e)?!1:z8.test(e)?kS[e]=!0:(AS[e]=!0,!1)}function q8(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function H8(e,t,n,r){if(t===null||typeof t>"u"||q8(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ni(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ei[e]=new Ni(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ei[t]=new Ni(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ei[e]=new Ni(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ei[e]=new Ni(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ei[e]=new Ni(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ei[e]=new Ni(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ei[e]=new Ni(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ei[e]=new Ni(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ei[e]=new Ni(e,5,!1,e.toLowerCase(),null,!1,!1)});var Gw=/[\-:]([a-z])/g;function qw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Gw,qw);ei[t]=new Ni(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Gw,qw);ei[t]=new Ni(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Gw,qw);ei[t]=new Ni(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ei[e]=new Ni(e,1,!1,e.toLowerCase(),null,!1,!1)});ei.xlinkHref=new Ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ei[e]=new Ni(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hw(e,t,n,r){var i=ei.hasOwnProperty(t)?ei[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(H8(t,n,i,r)&&(n=null),r||i===null?G8(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Os=U8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ig=Symbol.for("react.element"),gd=Symbol.for("react.portal"),vd=Symbol.for("react.fragment"),Vw=Symbol.for("react.strict_mode"),Mb=Symbol.for("react.profiler"),aP=Symbol.for("react.provider"),sP=Symbol.for("react.context"),Ww=Symbol.for("react.forward_ref"),Ib=Symbol.for("react.suspense"),Db=Symbol.for("react.suspense_list"),Kw=Symbol.for("react.memo"),vl=Symbol.for("react.lazy"),lP=Symbol.for("react.offscreen"),CS=Symbol.iterator;function ih(e){return e===null||typeof e!="object"?null:(e=CS&&e[CS]||e["@@iterator"],typeof e=="function"?e:null)}var Fn=Object.assign,o2;function kh(e){if(o2===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);o2=t&&t[1]||""}return`
`+o2+e}var a2=!1;function s2(e,t){if(!e||a2)return"";a2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{a2=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?kh(e):""}function V8(e){switch(e.tag){case 5:return kh(e.type);case 16:return kh("Lazy");case 13:return kh("Suspense");case 19:return kh("SuspenseList");case 0:case 2:case 15:return e=s2(e.type,!1),e;case 11:return e=s2(e.type.render,!1),e;case 1:return e=s2(e.type,!0),e;default:return""}}function jb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vd:return"Fragment";case gd:return"Portal";case Mb:return"Profiler";case Vw:return"StrictMode";case Ib:return"Suspense";case Db:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sP:return(e.displayName||"Context")+".Consumer";case aP:return(e._context.displayName||"Context")+".Provider";case Ww:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kw:return t=e.displayName||null,t!==null?t:jb(e.type)||"Memo";case vl:t=e._payload,e=e._init;try{return jb(e(t))}catch{}}return null}function W8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jb(t);case 8:return t===Vw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function K8(e){var t=cP(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function og(e){e._valueTracker||(e._valueTracker=K8(e))}function uP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=cP(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Y0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bb(e,t){var n=t.checked;return Fn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function PS(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dP(e,t){t=t.checked,t!=null&&Hw(e,"checked",t,!1)}function Fb(e,t){dP(e,t);var n=Fl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$b(e,t.type,n):t.hasOwnProperty("defaultValue")&&$b(e,t.type,Fl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function TS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function $b(e,t,n){(t!=="number"||Y0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ch=Array.isArray;function Td(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fl(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ub(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ze(91));return Fn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function RS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ze(92));if(Ch(n)){if(1<n.length)throw Error(ze(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fl(n)}}function fP(e,t){var n=Fl(t.value),r=Fl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function LS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ag,pP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ag=ag||document.createElement("div"),ag.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ag.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Mh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y8=["Webkit","ms","Moz","O"];Object.keys(Mh).forEach(function(e){Y8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Mh[t]=Mh[e]})});function mP(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Mh.hasOwnProperty(e)&&Mh[e]?(""+t).trim():t+"px"}function gP(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mP(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var J8=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gb(e,t){if(t){if(J8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ze(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ze(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ze(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ze(62))}}function qb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hb=null;function Yw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vb=null,Rd=null,Ld=null;function OS(e){if(e=$p(e)){if(typeof Vb!="function")throw Error(ze(280));var t=e.stateNode;t&&(t=ty(t),Vb(e.stateNode,e.type,t))}}function vP(e){Rd?Ld?Ld.push(e):Ld=[e]:Rd=e}function yP(){if(Rd){var e=Rd,t=Ld;if(Ld=Rd=null,OS(e),t)for(e=0;e<t.length;e++)OS(t[e])}}function bP(e,t){return e(t)}function _P(){}var l2=!1;function wP(e,t,n){if(l2)return e(t,n);l2=!0;try{return bP(e,t,n)}finally{l2=!1,(Rd!==null||Ld!==null)&&(_P(),yP())}}function np(e,t){var n=e.stateNode;if(n===null)return null;var r=ty(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ze(231,t,typeof n));return n}var Wb=!1;if(Cs)try{var oh={};Object.defineProperty(oh,"passive",{get:function(){Wb=!0}}),window.addEventListener("test",oh,oh),window.removeEventListener("test",oh,oh)}catch{Wb=!1}function X8(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ih=!1,J0=null,X0=!1,Kb=null,Z8={onError:function(e){Ih=!0,J0=e}};function Q8(e,t,n,r,i,o,a,s,l){Ih=!1,J0=null,X8.apply(Z8,arguments)}function eD(e,t,n,r,i,o,a,s,l){if(Q8.apply(this,arguments),Ih){if(Ih){var c=J0;Ih=!1,J0=null}else throw Error(ze(198));X0||(X0=!0,Kb=c)}}function bu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function MS(e){if(bu(e)!==e)throw Error(ze(188))}function tD(e){var t=e.alternate;if(!t){if(t=bu(e),t===null)throw Error(ze(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return MS(i),e;if(o===r)return MS(i),t;o=o.sibling}throw Error(ze(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(ze(189))}}if(n.alternate!==r)throw Error(ze(190))}if(n.tag!==3)throw Error(ze(188));return n.stateNode.current===n?e:t}function EP(e){return e=tD(e),e!==null?SP(e):null}function SP(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=SP(e);if(t!==null)return t;e=e.sibling}return null}var NP=ao.unstable_scheduleCallback,IS=ao.unstable_cancelCallback,nD=ao.unstable_shouldYield,rD=ao.unstable_requestPaint,or=ao.unstable_now,iD=ao.unstable_getCurrentPriorityLevel,Jw=ao.unstable_ImmediatePriority,AP=ao.unstable_UserBlockingPriority,Z0=ao.unstable_NormalPriority,oD=ao.unstable_LowPriority,kP=ao.unstable_IdlePriority,Xv=null,ja=null;function aD(e){if(ja&&typeof ja.onCommitFiberRoot=="function")try{ja.onCommitFiberRoot(Xv,e,void 0,(e.current.flags&128)===128)}catch{}}var aa=Math.clz32?Math.clz32:cD,sD=Math.log,lD=Math.LN2;function cD(e){return e>>>=0,e===0?32:31-(sD(e)/lD|0)|0}var sg=64,lg=4194304;function Ph(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Q0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Ph(s):(o&=a,o!==0&&(r=Ph(o)))}else a=n&~i,a!==0?r=Ph(a):o!==0&&(r=Ph(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-aa(t),i=1<<n,r|=e[n],t&=~i;return r}function uD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dD(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-aa(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=uD(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function Yb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function CP(){var e=sg;return sg<<=1,!(sg&4194240)&&(sg=64),e}function c2(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-aa(t),e[t]=n}function fD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-aa(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Xw(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-aa(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var un=0;function PP(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var TP,Zw,RP,LP,OP,Jb=!1,cg=[],Pl=null,Tl=null,Rl=null,rp=new Map,ip=new Map,wl=[],hD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DS(e,t){switch(e){case"focusin":case"focusout":Pl=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":Rl=null;break;case"pointerover":case"pointerout":rp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ip.delete(t.pointerId)}}function ah(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=$p(t),t!==null&&Zw(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function pD(e,t,n,r,i){switch(t){case"focusin":return Pl=ah(Pl,e,t,n,r,i),!0;case"dragenter":return Tl=ah(Tl,e,t,n,r,i),!0;case"mouseover":return Rl=ah(Rl,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return rp.set(o,ah(rp.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ip.set(o,ah(ip.get(o)||null,e,t,n,r,i)),!0}return!1}function MP(e){var t=Jc(e.target);if(t!==null){var n=bu(t);if(n!==null){if(t=n.tag,t===13){if(t=xP(n),t!==null){e.blockedOn=t,OP(e.priority,function(){RP(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function p0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Hb=r,n.target.dispatchEvent(r),Hb=null}else return t=$p(n),t!==null&&Zw(t),e.blockedOn=n,!1;t.shift()}return!0}function jS(e,t,n){p0(e)&&n.delete(t)}function mD(){Jb=!1,Pl!==null&&p0(Pl)&&(Pl=null),Tl!==null&&p0(Tl)&&(Tl=null),Rl!==null&&p0(Rl)&&(Rl=null),rp.forEach(jS),ip.forEach(jS)}function sh(e,t){e.blockedOn===t&&(e.blockedOn=null,Jb||(Jb=!0,ao.unstable_scheduleCallback(ao.unstable_NormalPriority,mD)))}function op(e){function t(i){return sh(i,e)}if(0<cg.length){sh(cg[0],e);for(var n=1;n<cg.length;n++){var r=cg[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Pl!==null&&sh(Pl,e),Tl!==null&&sh(Tl,e),Rl!==null&&sh(Rl,e),rp.forEach(t),ip.forEach(t),n=0;n<wl.length;n++)r=wl[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<wl.length&&(n=wl[0],n.blockedOn===null);)MP(n),n.blockedOn===null&&wl.shift()}var Od=Os.ReactCurrentBatchConfig,ev=!0;function gD(e,t,n,r){var i=un,o=Od.transition;Od.transition=null;try{un=1,Qw(e,t,n,r)}finally{un=i,Od.transition=o}}function vD(e,t,n,r){var i=un,o=Od.transition;Od.transition=null;try{un=4,Qw(e,t,n,r)}finally{un=i,Od.transition=o}}function Qw(e,t,n,r){if(ev){var i=Xb(e,t,n,r);if(i===null)b2(e,t,r,tv,n),DS(e,r);else if(pD(i,e,t,n,r))r.stopPropagation();else if(DS(e,r),t&4&&-1<hD.indexOf(e)){for(;i!==null;){var o=$p(i);if(o!==null&&TP(o),o=Xb(e,t,n,r),o===null&&b2(e,t,r,tv,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else b2(e,t,r,null,n)}}var tv=null;function Xb(e,t,n,r){if(tv=null,e=Yw(r),e=Jc(e),e!==null)if(t=bu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xP(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tv=e,null}function IP(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iD()){case Jw:return 1;case AP:return 4;case Z0:case oD:return 16;case kP:return 536870912;default:return 16}default:return 16}}var Sl=null,ex=null,m0=null;function DP(){if(m0)return m0;var e,t=ex,n=t.length,r,i="value"in Sl?Sl.value:Sl.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return m0=i.slice(e,1<r?1-r:void 0)}function g0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ug(){return!0}function BS(){return!1}function lo(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ug:BS,this.isPropagationStopped=BS,this}return Fn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ug)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ug)},persist:function(){},isPersistent:ug}),t}var lf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tx=lo(lf),Fp=Fn({},lf,{view:0,detail:0}),yD=lo(Fp),u2,d2,lh,Zv=Fn({},Fp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lh&&(lh&&e.type==="mousemove"?(u2=e.screenX-lh.screenX,d2=e.screenY-lh.screenY):d2=u2=0,lh=e),u2)},movementY:function(e){return"movementY"in e?e.movementY:d2}}),FS=lo(Zv),bD=Fn({},Zv,{dataTransfer:0}),_D=lo(bD),wD=Fn({},Fp,{relatedTarget:0}),f2=lo(wD),xD=Fn({},lf,{animationName:0,elapsedTime:0,pseudoElement:0}),ED=lo(xD),SD=Fn({},lf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ND=lo(SD),AD=Fn({},lf,{data:0}),$S=lo(AD),kD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=PD[e])?!!t[e]:!1}function nx(){return TD}var RD=Fn({},Fp,{key:function(e){if(e.key){var t=kD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=g0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?CD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nx,charCode:function(e){return e.type==="keypress"?g0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?g0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),LD=lo(RD),OD=Fn({},Zv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),US=lo(OD),MD=Fn({},Fp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nx}),ID=lo(MD),DD=Fn({},lf,{propertyName:0,elapsedTime:0,pseudoElement:0}),jD=lo(DD),BD=Fn({},Zv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),FD=lo(BD),$D=[9,13,27,32],rx=Cs&&"CompositionEvent"in window,Dh=null;Cs&&"documentMode"in document&&(Dh=document.documentMode);var UD=Cs&&"TextEvent"in window&&!Dh,jP=Cs&&(!rx||Dh&&8<Dh&&11>=Dh),zS=" ",GS=!1;function BP(e,t){switch(e){case"keyup":return $D.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yd=!1;function zD(e,t){switch(e){case"compositionend":return FP(t);case"keypress":return t.which!==32?null:(GS=!0,zS);case"textInput":return e=t.data,e===zS&&GS?null:e;default:return null}}function GD(e,t){if(yd)return e==="compositionend"||!rx&&BP(e,t)?(e=DP(),m0=ex=Sl=null,yd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jP&&t.locale!=="ko"?null:t.data;default:return null}}var qD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qD[e.type]:t==="textarea"}function $P(e,t,n,r){vP(r),t=nv(t,"onChange"),0<t.length&&(n=new tx("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jh=null,ap=null;function HD(e){XP(e,0)}function Qv(e){var t=wd(e);if(uP(t))return e}function VD(e,t){if(e==="change")return t}var UP=!1;if(Cs){var h2;if(Cs){var p2="oninput"in document;if(!p2){var HS=document.createElement("div");HS.setAttribute("oninput","return;"),p2=typeof HS.oninput=="function"}h2=p2}else h2=!1;UP=h2&&(!document.documentMode||9<document.documentMode)}function VS(){jh&&(jh.detachEvent("onpropertychange",zP),ap=jh=null)}function zP(e){if(e.propertyName==="value"&&Qv(ap)){var t=[];$P(t,ap,e,Yw(e)),wP(HD,t)}}function WD(e,t,n){e==="focusin"?(VS(),jh=t,ap=n,jh.attachEvent("onpropertychange",zP)):e==="focusout"&&VS()}function KD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qv(ap)}function YD(e,t){if(e==="click")return Qv(t)}function JD(e,t){if(e==="input"||e==="change")return Qv(t)}function XD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ua=typeof Object.is=="function"?Object.is:XD;function sp(e,t){if(ua(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ob.call(t,i)||!ua(e[i],t[i]))return!1}return!0}function WS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function KS(e,t){var n=WS(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=WS(n)}}function GP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?GP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qP(){for(var e=window,t=Y0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Y0(e.document)}return t}function ix(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ZD(e){var t=qP(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&GP(n.ownerDocument.documentElement,n)){if(r!==null&&ix(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=KS(n,o);var a=KS(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var QD=Cs&&"documentMode"in document&&11>=document.documentMode,bd=null,Zb=null,Bh=null,Qb=!1;function YS(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qb||bd==null||bd!==Y0(r)||(r=bd,"selectionStart"in r&&ix(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bh&&sp(Bh,r)||(Bh=r,r=nv(Zb,"onSelect"),0<r.length&&(t=new tx("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bd)))}function dg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _d={animationend:dg("Animation","AnimationEnd"),animationiteration:dg("Animation","AnimationIteration"),animationstart:dg("Animation","AnimationStart"),transitionend:dg("Transition","TransitionEnd")},m2={},HP={};Cs&&(HP=document.createElement("div").style,"AnimationEvent"in window||(delete _d.animationend.animation,delete _d.animationiteration.animation,delete _d.animationstart.animation),"TransitionEvent"in window||delete _d.transitionend.transition);function ey(e){if(m2[e])return m2[e];if(!_d[e])return e;var t=_d[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in HP)return m2[e]=t[n];return e}var VP=ey("animationend"),WP=ey("animationiteration"),KP=ey("animationstart"),YP=ey("transitionend"),JP=new Map,JS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hl(e,t){JP.set(e,t),yu(t,[e])}for(var g2=0;g2<JS.length;g2++){var v2=JS[g2],ej=v2.toLowerCase(),tj=v2[0].toUpperCase()+v2.slice(1);Hl(ej,"on"+tj)}Hl(VP,"onAnimationEnd");Hl(WP,"onAnimationIteration");Hl(KP,"onAnimationStart");Hl("dblclick","onDoubleClick");Hl("focusin","onFocus");Hl("focusout","onBlur");Hl(YP,"onTransitionEnd");Ud("onMouseEnter",["mouseout","mouseover"]);Ud("onMouseLeave",["mouseout","mouseover"]);Ud("onPointerEnter",["pointerout","pointerover"]);Ud("onPointerLeave",["pointerout","pointerover"]);yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Th));function XS(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,eD(r,t,void 0,e),e.currentTarget=null}function XP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;XS(i,s,c),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;XS(i,s,c),o=l}}}if(X0)throw e=Kb,X0=!1,Kb=null,e}function xn(e,t){var n=t[i_];n===void 0&&(n=t[i_]=new Set);var r=e+"__bubble";n.has(r)||(ZP(t,e,2,!1),n.add(r))}function y2(e,t,n){var r=0;t&&(r|=4),ZP(n,e,r,t)}var fg="_reactListening"+Math.random().toString(36).slice(2);function lp(e){if(!e[fg]){e[fg]=!0,oP.forEach(function(n){n!=="selectionchange"&&(nj.has(n)||y2(n,!1,e),y2(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fg]||(t[fg]=!0,y2("selectionchange",!1,t))}}function ZP(e,t,n,r){switch(IP(t)){case 1:var i=gD;break;case 4:i=vD;break;default:i=Qw}n=i.bind(null,t,n,e),i=void 0,!Wb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function b2(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Jc(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}wP(function(){var c=o,u=Yw(n),d=[];e:{var h=JP.get(e);if(h!==void 0){var f=tx,m=e;switch(e){case"keypress":if(g0(n)===0)break e;case"keydown":case"keyup":f=LD;break;case"focusin":m="focus",f=f2;break;case"focusout":m="blur",f=f2;break;case"beforeblur":case"afterblur":f=f2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=FS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=_D;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=ID;break;case VP:case WP:case KP:f=ED;break;case YP:f=jD;break;case"scroll":f=yD;break;case"wheel":f=FD;break;case"copy":case"cut":case"paste":f=ND;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=US}var v=(t&4)!==0,b=!v&&e==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var x=c,_;x!==null;){_=x;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=np(x,y),w!=null&&v.push(cp(x,w,_)))),b)break;x=x.return}0<v.length&&(h=new f(h,m,null,n,u),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&n!==Hb&&(m=n.relatedTarget||n.fromElement)&&(Jc(m)||m[Ps]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=c,m=m?Jc(m):null,m!==null&&(b=bu(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(v=FS,w="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=US,w="onPointerLeave",y="onPointerEnter",x="pointer"),b=f==null?h:wd(f),_=m==null?h:wd(m),h=new v(w,x+"leave",f,n,u),h.target=b,h.relatedTarget=_,w=null,Jc(u)===c&&(v=new v(y,x+"enter",m,n,u),v.target=_,v.relatedTarget=b,w=v),b=w,f&&m)t:{for(v=f,y=m,x=0,_=v;_;_=Vu(_))x++;for(_=0,w=y;w;w=Vu(w))_++;for(;0<x-_;)v=Vu(v),x--;for(;0<_-x;)y=Vu(y),_--;for(;x--;){if(v===y||y!==null&&v===y.alternate)break t;v=Vu(v),y=Vu(y)}v=null}else v=null;f!==null&&ZS(d,h,f,v,!1),m!==null&&b!==null&&ZS(d,b,m,v,!0)}}e:{if(h=c?wd(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var R=VD;else if(qS(h))if(UP)R=JD;else{R=KD;var I=WD}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=YD);if(R&&(R=R(e,c))){$P(d,R,n,u);break e}I&&I(e,h,c),e==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&$b(h,"number",h.value)}switch(I=c?wd(c):window,e){case"focusin":(qS(I)||I.contentEditable==="true")&&(bd=I,Zb=c,Bh=null);break;case"focusout":Bh=Zb=bd=null;break;case"mousedown":Qb=!0;break;case"contextmenu":case"mouseup":case"dragend":Qb=!1,YS(d,n,u);break;case"selectionchange":if(QD)break;case"keydown":case"keyup":YS(d,n,u)}var q;if(rx)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else yd?BP(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(jP&&n.locale!=="ko"&&(yd||T!=="onCompositionStart"?T==="onCompositionEnd"&&yd&&(q=DP()):(Sl=u,ex="value"in Sl?Sl.value:Sl.textContent,yd=!0)),I=nv(c,T),0<I.length&&(T=new $S(T,e,null,n,u),d.push({event:T,listeners:I}),q?T.data=q:(q=FP(n),q!==null&&(T.data=q)))),(q=UD?zD(e,n):GD(e,n))&&(c=nv(c,"onBeforeInput"),0<c.length&&(u=new $S("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=q))}XP(d,t)})}function cp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function nv(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=np(e,n),o!=null&&r.unshift(cp(e,o,i)),o=np(e,t),o!=null&&r.push(cp(e,o,i))),e=e.return}return r}function Vu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ZS(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=np(n,o),l!=null&&a.unshift(cp(n,l,s))):i||(l=np(n,o),l!=null&&a.push(cp(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var rj=/\r\n?/g,ij=/\u0000|\uFFFD/g;function QS(e){return(typeof e=="string"?e:""+e).replace(rj,`
`).replace(ij,"")}function hg(e,t,n){if(t=QS(t),QS(e)!==t&&n)throw Error(ze(425))}function rv(){}var e_=null,t_=null;function n_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var r_=typeof setTimeout=="function"?setTimeout:void 0,oj=typeof clearTimeout=="function"?clearTimeout:void 0,eN=typeof Promise=="function"?Promise:void 0,aj=typeof queueMicrotask=="function"?queueMicrotask:typeof eN<"u"?function(e){return eN.resolve(null).then(e).catch(sj)}:r_;function sj(e){setTimeout(function(){throw e})}function _2(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),op(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);op(t)}function Ll(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var cf=Math.random().toString(36).slice(2),Ma="__reactFiber$"+cf,up="__reactProps$"+cf,Ps="__reactContainer$"+cf,i_="__reactEvents$"+cf,lj="__reactListeners$"+cf,cj="__reactHandles$"+cf;function Jc(e){var t=e[Ma];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ps]||n[Ma]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tN(e);e!==null;){if(n=e[Ma])return n;e=tN(e)}return t}e=n,n=e.parentNode}return null}function $p(e){return e=e[Ma]||e[Ps],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ze(33))}function ty(e){return e[up]||null}var o_=[],xd=-1;function Vl(e){return{current:e}}function Sn(e){0>xd||(e.current=o_[xd],o_[xd]=null,xd--)}function bn(e,t){xd++,o_[xd]=e.current,e.current=t}var $l={},pi=Vl($l),Mi=Vl(!1),au=$l;function zd(e,t){var n=e.type.contextTypes;if(!n)return $l;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ii(e){return e=e.childContextTypes,e!=null}function iv(){Sn(Mi),Sn(pi)}function nN(e,t,n){if(pi.current!==$l)throw Error(ze(168));bn(pi,t),bn(Mi,n)}function QP(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ze(108,W8(e)||"Unknown",i));return Fn({},n,r)}function ov(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$l,au=pi.current,bn(pi,e),bn(Mi,Mi.current),!0}function rN(e,t,n){var r=e.stateNode;if(!r)throw Error(ze(169));n?(e=QP(e,t,au),r.__reactInternalMemoizedMergedChildContext=e,Sn(Mi),Sn(pi),bn(pi,e)):Sn(Mi),bn(Mi,n)}var vs=null,ny=!1,w2=!1;function eT(e){vs===null?vs=[e]:vs.push(e)}function uj(e){ny=!0,eT(e)}function Wl(){if(!w2&&vs!==null){w2=!0;var e=0,t=un;try{var n=vs;for(un=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}vs=null,ny=!1}catch(i){throw vs!==null&&(vs=vs.slice(e+1)),NP(Jw,Wl),i}finally{un=t,w2=!1}}return null}var Ed=[],Sd=0,av=null,sv=0,Ao=[],ko=0,su=null,_s=1,ws="";function jc(e,t){Ed[Sd++]=sv,Ed[Sd++]=av,av=e,sv=t}function tT(e,t,n){Ao[ko++]=_s,Ao[ko++]=ws,Ao[ko++]=su,su=e;var r=_s;e=ws;var i=32-aa(r)-1;r&=~(1<<i),n+=1;var o=32-aa(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,_s=1<<32-aa(t)+i|n<<i|r,ws=o+e}else _s=1<<o|n<<i|r,ws=e}function ox(e){e.return!==null&&(jc(e,1),tT(e,1,0))}function ax(e){for(;e===av;)av=Ed[--Sd],Ed[Sd]=null,sv=Ed[--Sd],Ed[Sd]=null;for(;e===su;)su=Ao[--ko],Ao[ko]=null,ws=Ao[--ko],Ao[ko]=null,_s=Ao[--ko],Ao[ko]=null}var ro=null,to=null,Ln=!1,oa=null;function nT(e,t){var n=Po(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function iN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ro=e,to=Ll(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ro=e,to=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=su!==null?{id:_s,overflow:ws}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Po(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ro=e,to=null,!0):!1;default:return!1}}function a_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function s_(e){if(Ln){var t=to;if(t){var n=t;if(!iN(e,t)){if(a_(e))throw Error(ze(418));t=Ll(n.nextSibling);var r=ro;t&&iN(e,t)?nT(r,n):(e.flags=e.flags&-4097|2,Ln=!1,ro=e)}}else{if(a_(e))throw Error(ze(418));e.flags=e.flags&-4097|2,Ln=!1,ro=e}}}function oN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ro=e}function pg(e){if(e!==ro)return!1;if(!Ln)return oN(e),Ln=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!n_(e.type,e.memoizedProps)),t&&(t=to)){if(a_(e))throw rT(),Error(ze(418));for(;t;)nT(e,t),t=Ll(t.nextSibling)}if(oN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ze(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){to=Ll(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}to=null}}else to=ro?Ll(e.stateNode.nextSibling):null;return!0}function rT(){for(var e=to;e;)e=Ll(e.nextSibling)}function Gd(){to=ro=null,Ln=!1}function sx(e){oa===null?oa=[e]:oa.push(e)}var dj=Os.ReactCurrentBatchConfig;function ch(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ze(309));var r=n.stateNode}if(!r)throw Error(ze(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(ze(284));if(!n._owner)throw Error(ze(290,e))}return e}function mg(e,t){throw e=Object.prototype.toString.call(t),Error(ze(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function aN(e){var t=e._init;return t(e._payload)}function iT(e){function t(y,x){if(e){var _=y.deletions;_===null?(y.deletions=[x],y.flags|=16):_.push(x)}}function n(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=Dl(y,x),y.index=0,y.sibling=null,y}function o(y,x,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<x?(y.flags|=2,x):_):(y.flags|=2,x)):(y.flags|=1048576,x)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function s(y,x,_,w){return x===null||x.tag!==6?(x=C2(_,y.mode,w),x.return=y,x):(x=i(x,_),x.return=y,x)}function l(y,x,_,w){var R=_.type;return R===vd?u(y,x,_.props.children,w,_.key):x!==null&&(x.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===vl&&aN(R)===x.type)?(w=i(x,_.props),w.ref=ch(y,x,_),w.return=y,w):(w=E0(_.type,_.key,_.props,null,y.mode,w),w.ref=ch(y,x,_),w.return=y,w)}function c(y,x,_,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=P2(_,y.mode,w),x.return=y,x):(x=i(x,_.children||[]),x.return=y,x)}function u(y,x,_,w,R){return x===null||x.tag!==7?(x=ru(_,y.mode,w,R),x.return=y,x):(x=i(x,_),x.return=y,x)}function d(y,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=C2(""+x,y.mode,_),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ig:return _=E0(x.type,x.key,x.props,null,y.mode,_),_.ref=ch(y,null,x),_.return=y,_;case gd:return x=P2(x,y.mode,_),x.return=y,x;case vl:var w=x._init;return d(y,w(x._payload),_)}if(Ch(x)||ih(x))return x=ru(x,y.mode,_,null),x.return=y,x;mg(y,x)}return null}function h(y,x,_,w){var R=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return R!==null?null:s(y,x,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ig:return _.key===R?l(y,x,_,w):null;case gd:return _.key===R?c(y,x,_,w):null;case vl:return R=_._init,h(y,x,R(_._payload),w)}if(Ch(_)||ih(_))return R!==null?null:u(y,x,_,w,null);mg(y,_)}return null}function f(y,x,_,w,R){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,s(x,y,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ig:return y=y.get(w.key===null?_:w.key)||null,l(x,y,w,R);case gd:return y=y.get(w.key===null?_:w.key)||null,c(x,y,w,R);case vl:var I=w._init;return f(y,x,_,I(w._payload),R)}if(Ch(w)||ih(w))return y=y.get(_)||null,u(x,y,w,R,null);mg(x,w)}return null}function m(y,x,_,w){for(var R=null,I=null,q=x,T=x=0,D=null;q!==null&&T<_.length;T++){q.index>T?(D=q,q=null):D=q.sibling;var M=h(y,q,_[T],w);if(M===null){q===null&&(q=D);break}e&&q&&M.alternate===null&&t(y,q),x=o(M,x,T),I===null?R=M:I.sibling=M,I=M,q=D}if(T===_.length)return n(y,q),Ln&&jc(y,T),R;if(q===null){for(;T<_.length;T++)q=d(y,_[T],w),q!==null&&(x=o(q,x,T),I===null?R=q:I.sibling=q,I=q);return Ln&&jc(y,T),R}for(q=r(y,q);T<_.length;T++)D=f(q,y,T,_[T],w),D!==null&&(e&&D.alternate!==null&&q.delete(D.key===null?T:D.key),x=o(D,x,T),I===null?R=D:I.sibling=D,I=D);return e&&q.forEach(function(C){return t(y,C)}),Ln&&jc(y,T),R}function v(y,x,_,w){var R=ih(_);if(typeof R!="function")throw Error(ze(150));if(_=R.call(_),_==null)throw Error(ze(151));for(var I=R=null,q=x,T=x=0,D=null,M=_.next();q!==null&&!M.done;T++,M=_.next()){q.index>T?(D=q,q=null):D=q.sibling;var C=h(y,q,M.value,w);if(C===null){q===null&&(q=D);break}e&&q&&C.alternate===null&&t(y,q),x=o(C,x,T),I===null?R=C:I.sibling=C,I=C,q=D}if(M.done)return n(y,q),Ln&&jc(y,T),R;if(q===null){for(;!M.done;T++,M=_.next())M=d(y,M.value,w),M!==null&&(x=o(M,x,T),I===null?R=M:I.sibling=M,I=M);return Ln&&jc(y,T),R}for(q=r(y,q);!M.done;T++,M=_.next())M=f(q,y,T,M.value,w),M!==null&&(e&&M.alternate!==null&&q.delete(M.key===null?T:M.key),x=o(M,x,T),I===null?R=M:I.sibling=M,I=M);return e&&q.forEach(function(j){return t(y,j)}),Ln&&jc(y,T),R}function b(y,x,_,w){if(typeof _=="object"&&_!==null&&_.type===vd&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ig:e:{for(var R=_.key,I=x;I!==null;){if(I.key===R){if(R=_.type,R===vd){if(I.tag===7){n(y,I.sibling),x=i(I,_.props.children),x.return=y,y=x;break e}}else if(I.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===vl&&aN(R)===I.type){n(y,I.sibling),x=i(I,_.props),x.ref=ch(y,I,_),x.return=y,y=x;break e}n(y,I);break}else t(y,I);I=I.sibling}_.type===vd?(x=ru(_.props.children,y.mode,w,_.key),x.return=y,y=x):(w=E0(_.type,_.key,_.props,null,y.mode,w),w.ref=ch(y,x,_),w.return=y,y=w)}return a(y);case gd:e:{for(I=_.key;x!==null;){if(x.key===I)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(y,x.sibling),x=i(x,_.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else t(y,x);x=x.sibling}x=P2(_,y.mode,w),x.return=y,y=x}return a(y);case vl:return I=_._init,b(y,x,I(_._payload),w)}if(Ch(_))return m(y,x,_,w);if(ih(_))return v(y,x,_,w);mg(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,_),x.return=y,y=x):(n(y,x),x=C2(_,y.mode,w),x.return=y,y=x),a(y)):n(y,x)}return b}var qd=iT(!0),oT=iT(!1),lv=Vl(null),cv=null,Nd=null,lx=null;function cx(){lx=Nd=cv=null}function ux(e){var t=lv.current;Sn(lv),e._currentValue=t}function l_(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Md(e,t){cv=e,lx=Nd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Li=!0),e.firstContext=null)}function Lo(e){var t=e._currentValue;if(lx!==e)if(e={context:e,memoizedValue:t,next:null},Nd===null){if(cv===null)throw Error(ze(308));Nd=e,cv.dependencies={lanes:0,firstContext:e}}else Nd=Nd.next=e;return t}var Xc=null;function dx(e){Xc===null?Xc=[e]:Xc.push(e)}function aT(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,dx(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ts(e,r)}function Ts(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var yl=!1;function fx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ss(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ol(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ts(e,n)}return i=r.interleaved,i===null?(t.next=t,dx(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ts(e,n)}function v0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xw(e,n)}}function sN(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function uv(e,t,n,r){var i=e.updateQueue;yl=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;a=0,u=c=l=null,s=o;do{var h=s.lane,f=s.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,v=s;switch(h=t,f=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=Fn({},d,h);break e;case 2:yl=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);cu|=a,e.lanes=a,e.memoizedState=d}}function lN(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ze(191,i));i.call(r)}}}var Up={},Ba=Vl(Up),dp=Vl(Up),fp=Vl(Up);function Zc(e){if(e===Up)throw Error(ze(174));return e}function hx(e,t){switch(bn(fp,t),bn(dp,e),bn(Ba,Up),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zb(t,e)}Sn(Ba),bn(Ba,t)}function Hd(){Sn(Ba),Sn(dp),Sn(fp)}function lT(e){Zc(fp.current);var t=Zc(Ba.current),n=zb(t,e.type);t!==n&&(bn(dp,e),bn(Ba,n))}function px(e){dp.current===e&&(Sn(Ba),Sn(dp))}var In=Vl(0);function dv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var x2=[];function mx(){for(var e=0;e<x2.length;e++)x2[e]._workInProgressVersionPrimary=null;x2.length=0}var y0=Os.ReactCurrentDispatcher,E2=Os.ReactCurrentBatchConfig,lu=0,jn=null,kr=null,Or=null,fv=!1,Fh=!1,hp=0,fj=0;function oi(){throw Error(ze(321))}function gx(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ua(e[n],t[n]))return!1;return!0}function vx(e,t,n,r,i,o){if(lu=o,jn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,y0.current=e===null||e.memoizedState===null?gj:vj,e=n(r,i),Fh){o=0;do{if(Fh=!1,hp=0,25<=o)throw Error(ze(301));o+=1,Or=kr=null,t.updateQueue=null,y0.current=yj,e=n(r,i)}while(Fh)}if(y0.current=hv,t=kr!==null&&kr.next!==null,lu=0,Or=kr=jn=null,fv=!1,t)throw Error(ze(300));return e}function yx(){var e=hp!==0;return hp=0,e}function Ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?jn.memoizedState=Or=e:Or=Or.next=e,Or}function Oo(){if(kr===null){var e=jn.alternate;e=e!==null?e.memoizedState:null}else e=kr.next;var t=Or===null?jn.memoizedState:Or.next;if(t!==null)Or=t,kr=e;else{if(e===null)throw Error(ze(310));kr=e,e={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},Or===null?jn.memoizedState=Or=e:Or=Or.next=e}return Or}function pp(e,t){return typeof t=="function"?t(e):t}function S2(e){var t=Oo(),n=t.queue;if(n===null)throw Error(ze(311));n.lastRenderedReducer=e;var r=kr,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,c=o;do{var u=c.lane;if((lu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=d,a=r):l=l.next=d,jn.lanes|=u,cu|=u}c=c.next}while(c!==null&&c!==o);l===null?a=r:l.next=s,ua(r,t.memoizedState)||(Li=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,jn.lanes|=o,cu|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function N2(e){var t=Oo(),n=t.queue;if(n===null)throw Error(ze(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);ua(o,t.memoizedState)||(Li=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function cT(){}function uT(e,t){var n=jn,r=Oo(),i=t(),o=!ua(r.memoizedState,i);if(o&&(r.memoizedState=i,Li=!0),r=r.queue,bx(hT.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Or!==null&&Or.memoizedState.tag&1){if(n.flags|=2048,mp(9,fT.bind(null,n,r,i,t),void 0,null),jr===null)throw Error(ze(349));lu&30||dT(n,t,i)}return i}function dT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=jn.updateQueue,t===null?(t={lastEffect:null,stores:null},jn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function fT(e,t,n,r){t.value=n,t.getSnapshot=r,pT(t)&&mT(e)}function hT(e,t,n){return n(function(){pT(t)&&mT(e)})}function pT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ua(e,n)}catch{return!0}}function mT(e){var t=Ts(e,1);t!==null&&sa(t,e,1,-1)}function cN(e){var t=Ta();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pp,lastRenderedState:e},t.queue=e,e=e.dispatch=mj.bind(null,jn,e),[t.memoizedState,e]}function mp(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=jn.updateQueue,t===null?(t={lastEffect:null,stores:null},jn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function gT(){return Oo().memoizedState}function b0(e,t,n,r){var i=Ta();jn.flags|=e,i.memoizedState=mp(1|t,n,void 0,r===void 0?null:r)}function ry(e,t,n,r){var i=Oo();r=r===void 0?null:r;var o=void 0;if(kr!==null){var a=kr.memoizedState;if(o=a.destroy,r!==null&&gx(r,a.deps)){i.memoizedState=mp(t,n,o,r);return}}jn.flags|=e,i.memoizedState=mp(1|t,n,o,r)}function uN(e,t){return b0(8390656,8,e,t)}function bx(e,t){return ry(2048,8,e,t)}function vT(e,t){return ry(4,2,e,t)}function yT(e,t){return ry(4,4,e,t)}function bT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _T(e,t,n){return n=n!=null?n.concat([e]):null,ry(4,4,bT.bind(null,t,e),n)}function _x(){}function wT(e,t){var n=Oo();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gx(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xT(e,t){var n=Oo();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gx(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ET(e,t,n){return lu&21?(ua(n,t)||(n=CP(),jn.lanes|=n,cu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Li=!0),e.memoizedState=n)}function hj(e,t){var n=un;un=n!==0&&4>n?n:4,e(!0);var r=E2.transition;E2.transition={};try{e(!1),t()}finally{un=n,E2.transition=r}}function ST(){return Oo().memoizedState}function pj(e,t,n){var r=Il(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},NT(e))AT(t,n);else if(n=aT(e,t,n,r),n!==null){var i=Ei();sa(n,e,r,i),kT(n,t,r)}}function mj(e,t,n){var r=Il(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(NT(e))AT(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,ua(s,a)){var l=t.interleaved;l===null?(i.next=i,dx(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=aT(e,t,i,r),n!==null&&(i=Ei(),sa(n,e,r,i),kT(n,t,r))}}function NT(e){var t=e.alternate;return e===jn||t!==null&&t===jn}function AT(e,t){Fh=fv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kT(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xw(e,n)}}var hv={readContext:Lo,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useInsertionEffect:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useSyncExternalStore:oi,useId:oi,unstable_isNewReconciler:!1},gj={readContext:Lo,useCallback:function(e,t){return Ta().memoizedState=[e,t===void 0?null:t],e},useContext:Lo,useEffect:uN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,b0(4194308,4,bT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return b0(4194308,4,e,t)},useInsertionEffect:function(e,t){return b0(4,2,e,t)},useMemo:function(e,t){var n=Ta();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ta();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=pj.bind(null,jn,e),[r.memoizedState,e]},useRef:function(e){var t=Ta();return e={current:e},t.memoizedState=e},useState:cN,useDebugValue:_x,useDeferredValue:function(e){return Ta().memoizedState=e},useTransition:function(){var e=cN(!1),t=e[0];return e=hj.bind(null,e[1]),Ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=jn,i=Ta();if(Ln){if(n===void 0)throw Error(ze(407));n=n()}else{if(n=t(),jr===null)throw Error(ze(349));lu&30||dT(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,uN(hT.bind(null,r,o,e),[e]),r.flags|=2048,mp(9,fT.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ta(),t=jr.identifierPrefix;if(Ln){var n=ws,r=_s;n=(r&~(1<<32-aa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=fj++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vj={readContext:Lo,useCallback:wT,useContext:Lo,useEffect:bx,useImperativeHandle:_T,useInsertionEffect:vT,useLayoutEffect:yT,useMemo:xT,useReducer:S2,useRef:gT,useState:function(){return S2(pp)},useDebugValue:_x,useDeferredValue:function(e){var t=Oo();return ET(t,kr.memoizedState,e)},useTransition:function(){var e=S2(pp)[0],t=Oo().memoizedState;return[e,t]},useMutableSource:cT,useSyncExternalStore:uT,useId:ST,unstable_isNewReconciler:!1},yj={readContext:Lo,useCallback:wT,useContext:Lo,useEffect:bx,useImperativeHandle:_T,useInsertionEffect:vT,useLayoutEffect:yT,useMemo:xT,useReducer:N2,useRef:gT,useState:function(){return N2(pp)},useDebugValue:_x,useDeferredValue:function(e){var t=Oo();return kr===null?t.memoizedState=e:ET(t,kr.memoizedState,e)},useTransition:function(){var e=N2(pp)[0],t=Oo().memoizedState;return[e,t]},useMutableSource:cT,useSyncExternalStore:uT,useId:ST,unstable_isNewReconciler:!1};function ta(e,t){if(e&&e.defaultProps){t=Fn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function c_(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Fn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var iy={isMounted:function(e){return(e=e._reactInternals)?bu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ei(),i=Il(e),o=Ss(r,i);o.payload=t,n!=null&&(o.callback=n),t=Ol(e,o,i),t!==null&&(sa(t,e,i,r),v0(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ei(),i=Il(e),o=Ss(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ol(e,o,i),t!==null&&(sa(t,e,i,r),v0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ei(),r=Il(e),i=Ss(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ol(e,i,r),t!==null&&(sa(t,e,r,n),v0(t,e,r))}};function dN(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!sp(n,r)||!sp(i,o):!0}function CT(e,t,n){var r=!1,i=$l,o=t.contextType;return typeof o=="object"&&o!==null?o=Lo(o):(i=Ii(t)?au:pi.current,r=t.contextTypes,o=(r=r!=null)?zd(e,i):$l),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=iy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function fN(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&iy.enqueueReplaceState(t,t.state,null)}function u_(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},fx(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Lo(o):(o=Ii(t)?au:pi.current,i.context=zd(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(c_(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&iy.enqueueReplaceState(i,i.state,null),uv(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Vd(e,t){try{var n="",r=t;do n+=V8(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function A2(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function d_(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bj=typeof WeakMap=="function"?WeakMap:Map;function PT(e,t,n){n=Ss(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){mv||(mv=!0,w_=r),d_(e,t)},n}function TT(e,t,n){n=Ss(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){d_(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){d_(e,t),typeof r!="function"&&(Ml===null?Ml=new Set([this]):Ml.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function hN(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bj;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Oj.bind(null,e,t,n),t.then(e,e))}function pN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mN(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ss(-1,1),t.tag=2,Ol(n,t,1))),n.lanes|=1),e)}var _j=Os.ReactCurrentOwner,Li=!1;function wi(e,t,n,r){t.child=e===null?oT(t,null,n,r):qd(t,e.child,n,r)}function gN(e,t,n,r,i){n=n.render;var o=t.ref;return Md(t,i),r=vx(e,t,n,r,o,i),n=yx(),e!==null&&!Li?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rs(e,t,i)):(Ln&&n&&ox(t),t.flags|=1,wi(e,t,r,i),t.child)}function vN(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Cx(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,RT(e,t,o,r,i)):(e=E0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:sp,n(a,r)&&e.ref===t.ref)return Rs(e,t,i)}return t.flags|=1,e=Dl(o,r),e.ref=t.ref,e.return=t,t.child=e}function RT(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(sp(o,r)&&e.ref===t.ref)if(Li=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Li=!0);else return t.lanes=e.lanes,Rs(e,t,i)}return f_(e,t,n,r,i)}function LT(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bn(kd,Zi),Zi|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bn(kd,Zi),Zi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,bn(kd,Zi),Zi|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,bn(kd,Zi),Zi|=r;return wi(e,t,i,n),t.child}function OT(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function f_(e,t,n,r,i){var o=Ii(n)?au:pi.current;return o=zd(t,o),Md(t,i),n=vx(e,t,n,r,o,i),r=yx(),e!==null&&!Li?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rs(e,t,i)):(Ln&&r&&ox(t),t.flags|=1,wi(e,t,n,i),t.child)}function yN(e,t,n,r,i){if(Ii(n)){var o=!0;ov(t)}else o=!1;if(Md(t,i),t.stateNode===null)_0(e,t),CT(t,n,r),u_(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Lo(c):(c=Ii(n)?au:pi.current,c=zd(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&fN(t,a,r,c),yl=!1;var h=t.memoizedState;a.state=h,uv(t,r,a,i),l=t.memoizedState,s!==r||h!==l||Mi.current||yl?(typeof u=="function"&&(c_(t,n,u,r),l=t.memoizedState),(s=yl||dN(t,n,s,r,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,sT(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ta(t.type,s),a.props=c,d=t.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Lo(l):(l=Ii(n)?au:pi.current,l=zd(t,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==l)&&fN(t,a,r,l),yl=!1,h=t.memoizedState,a.state=h,uv(t,r,a,i);var m=t.memoizedState;s!==d||h!==m||Mi.current||yl?(typeof f=="function"&&(c_(t,n,f,r),m=t.memoizedState),(c=yl||dN(t,n,c,r,h,m,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return h_(e,t,n,r,o,i)}function h_(e,t,n,r,i,o){OT(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&rN(t,n,!1),Rs(e,t,o);r=t.stateNode,_j.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=qd(t,e.child,null,o),t.child=qd(t,null,s,o)):wi(e,t,s,o),t.memoizedState=r.state,i&&rN(t,n,!0),t.child}function MT(e){var t=e.stateNode;t.pendingContext?nN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nN(e,t.context,!1),hx(e,t.containerInfo)}function bN(e,t,n,r,i){return Gd(),sx(i),t.flags|=256,wi(e,t,n,r),t.child}var p_={dehydrated:null,treeContext:null,retryLane:0};function m_(e){return{baseLanes:e,cachePool:null,transitions:null}}function IT(e,t,n){var r=t.pendingProps,i=In.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),bn(In,i&1),e===null)return s_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=sy(a,r,0,null),e=ru(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=m_(n),t.memoizedState=p_,e):wx(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return wj(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Dl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Dl(s,o):(o=ru(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?m_(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=p_,r}return o=e.child,e=o.sibling,r=Dl(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function wx(e,t){return t=sy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gg(e,t,n,r){return r!==null&&sx(r),qd(t,e.child,null,n),e=wx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wj(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=A2(Error(ze(422))),gg(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=sy({mode:"visible",children:r.children},i,0,null),o=ru(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&qd(t,e.child,null,a),t.child.memoizedState=m_(a),t.memoizedState=p_,o);if(!(t.mode&1))return gg(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(ze(419)),r=A2(o,r,void 0),gg(e,t,a,r)}if(s=(a&e.childLanes)!==0,Li||s){if(r=jr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ts(e,i),sa(r,e,i,-1))}return kx(),r=A2(Error(ze(421))),gg(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Mj.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,to=Ll(i.nextSibling),ro=t,Ln=!0,oa=null,e!==null&&(Ao[ko++]=_s,Ao[ko++]=ws,Ao[ko++]=su,_s=e.id,ws=e.overflow,su=t),t=wx(t,r.children),t.flags|=4096,t)}function _N(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),l_(e.return,t,n)}function k2(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function DT(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(wi(e,t,r.children,n),r=In.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_N(e,n,t);else if(e.tag===19)_N(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(bn(In,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&dv(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),k2(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&dv(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}k2(t,!0,n,null,o);break;case"together":k2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),cu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ze(153));if(t.child!==null){for(e=t.child,n=Dl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Dl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xj(e,t,n){switch(t.tag){case 3:MT(t),Gd();break;case 5:lT(t);break;case 1:Ii(t.type)&&ov(t);break;case 4:hx(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;bn(lv,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(bn(In,In.current&1),t.flags|=128,null):n&t.child.childLanes?IT(e,t,n):(bn(In,In.current&1),e=Rs(e,t,n),e!==null?e.sibling:null);bn(In,In.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return DT(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),bn(In,In.current),r)break;return null;case 22:case 23:return t.lanes=0,LT(e,t,n)}return Rs(e,t,n)}var jT,g_,BT,FT;jT=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};g_=function(){};BT=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zc(Ba.current);var o=null;switch(n){case"input":i=Bb(e,i),r=Bb(e,r),o=[];break;case"select":i=Fn({},i,{value:void 0}),r=Fn({},r,{value:void 0}),o=[];break;case"textarea":i=Ub(e,i),r=Ub(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=rv)}Gb(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ep.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ep.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xn("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};FT=function(e,t,n,r){n!==r&&(t.flags|=4)};function uh(e,t){if(!Ln)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ai(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ej(e,t,n){var r=t.pendingProps;switch(ax(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(t),null;case 1:return Ii(t.type)&&iv(),ai(t),null;case 3:return r=t.stateNode,Hd(),Sn(Mi),Sn(pi),mx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(pg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,oa!==null&&(S_(oa),oa=null))),g_(e,t),ai(t),null;case 5:px(t);var i=Zc(fp.current);if(n=t.type,e!==null&&t.stateNode!=null)BT(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ze(166));return ai(t),null}if(e=Zc(Ba.current),pg(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ma]=t,r[up]=o,e=(t.mode&1)!==0,n){case"dialog":xn("cancel",r),xn("close",r);break;case"iframe":case"object":case"embed":xn("load",r);break;case"video":case"audio":for(i=0;i<Th.length;i++)xn(Th[i],r);break;case"source":xn("error",r);break;case"img":case"image":case"link":xn("error",r),xn("load",r);break;case"details":xn("toggle",r);break;case"input":PS(r,o),xn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},xn("invalid",r);break;case"textarea":RS(r,o),xn("invalid",r)}Gb(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&hg(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&hg(r.textContent,s,e),i=["children",""+s]):ep.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&xn("scroll",r)}switch(n){case"input":og(r),TS(r,o,!0);break;case"textarea":og(r),LS(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=rv)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hP(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Ma]=t,e[up]=r,jT(e,t,!1,!1),t.stateNode=e;e:{switch(a=qb(n,r),n){case"dialog":xn("cancel",e),xn("close",e),i=r;break;case"iframe":case"object":case"embed":xn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Th.length;i++)xn(Th[i],e);i=r;break;case"source":xn("error",e),i=r;break;case"img":case"image":case"link":xn("error",e),xn("load",e),i=r;break;case"details":xn("toggle",e),i=r;break;case"input":PS(e,r),i=Bb(e,r),xn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Fn({},r,{value:void 0}),xn("invalid",e);break;case"textarea":RS(e,r),i=Ub(e,r),xn("invalid",e);break;default:i=r}Gb(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?gP(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pP(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&tp(e,l):typeof l=="number"&&tp(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ep.hasOwnProperty(o)?l!=null&&o==="onScroll"&&xn("scroll",e):l!=null&&Hw(e,o,l,a))}switch(n){case"input":og(e),TS(e,r,!1);break;case"textarea":og(e),LS(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fl(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Td(e,!!r.multiple,o,!1):r.defaultValue!=null&&Td(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=rv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ai(t),null;case 6:if(e&&t.stateNode!=null)FT(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ze(166));if(n=Zc(fp.current),Zc(Ba.current),pg(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ma]=t,(o=r.nodeValue!==n)&&(e=ro,e!==null))switch(e.tag){case 3:hg(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hg(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ma]=t,t.stateNode=r}return ai(t),null;case 13:if(Sn(In),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ln&&to!==null&&t.mode&1&&!(t.flags&128))rT(),Gd(),t.flags|=98560,o=!1;else if(o=pg(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ze(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ze(317));o[Ma]=t}else Gd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ai(t),o=!1}else oa!==null&&(S_(oa),oa=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||In.current&1?Pr===0&&(Pr=3):kx())),t.updateQueue!==null&&(t.flags|=4),ai(t),null);case 4:return Hd(),g_(e,t),e===null&&lp(t.stateNode.containerInfo),ai(t),null;case 10:return ux(t.type._context),ai(t),null;case 17:return Ii(t.type)&&iv(),ai(t),null;case 19:if(Sn(In),o=t.memoizedState,o===null)return ai(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)uh(o,!1);else{if(Pr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=dv(e),a!==null){for(t.flags|=128,uh(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return bn(In,In.current&1|2),t.child}e=e.sibling}o.tail!==null&&or()>Wd&&(t.flags|=128,r=!0,uh(o,!1),t.lanes=4194304)}else{if(!r)if(e=dv(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),uh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ln)return ai(t),null}else 2*or()-o.renderingStartTime>Wd&&n!==1073741824&&(t.flags|=128,r=!0,uh(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=or(),t.sibling=null,n=In.current,bn(In,r?n&1|2:n&1),t):(ai(t),null);case 22:case 23:return Ax(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Zi&1073741824&&(ai(t),t.subtreeFlags&6&&(t.flags|=8192)):ai(t),null;case 24:return null;case 25:return null}throw Error(ze(156,t.tag))}function Sj(e,t){switch(ax(t),t.tag){case 1:return Ii(t.type)&&iv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Hd(),Sn(Mi),Sn(pi),mx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return px(t),null;case 13:if(Sn(In),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ze(340));Gd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sn(In),null;case 4:return Hd(),null;case 10:return ux(t.type._context),null;case 22:case 23:return Ax(),null;case 24:return null;default:return null}}var vg=!1,di=!1,Nj=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Ad(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vn(e,t,r)}else n.current=null}function v_(e,t,n){try{n()}catch(r){Vn(e,t,r)}}var wN=!1;function Aj(e,t){if(e_=ev,e=qP(),ix(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===i&&(s=a),h===o&&++u===r&&(l=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(t_={focusedElem:e,selectionRange:n},ev=!1,Ye=t;Ye!==null;)if(t=Ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ye=e;else for(;Ye!==null;){t=Ye;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,b=m.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:ta(t.type,v),b);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ze(163))}}catch(w){Vn(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Ye=e;break}Ye=t.return}return m=wN,wN=!1,m}function $h(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&v_(t,n,o)}i=i.next}while(i!==r)}}function oy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function y_(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function $T(e){var t=e.alternate;t!==null&&(e.alternate=null,$T(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ma],delete t[up],delete t[i_],delete t[lj],delete t[cj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function UT(e){return e.tag===5||e.tag===3||e.tag===4}function xN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||UT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function b_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rv));else if(r!==4&&(e=e.child,e!==null))for(b_(e,t,n),e=e.sibling;e!==null;)b_(e,t,n),e=e.sibling}function __(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(__(e,t,n),e=e.sibling;e!==null;)__(e,t,n),e=e.sibling}var Kr=null,ra=!1;function ll(e,t,n){for(n=n.child;n!==null;)zT(e,t,n),n=n.sibling}function zT(e,t,n){if(ja&&typeof ja.onCommitFiberUnmount=="function")try{ja.onCommitFiberUnmount(Xv,n)}catch{}switch(n.tag){case 5:di||Ad(n,t);case 6:var r=Kr,i=ra;Kr=null,ll(e,t,n),Kr=r,ra=i,Kr!==null&&(ra?(e=Kr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Kr.removeChild(n.stateNode));break;case 18:Kr!==null&&(ra?(e=Kr,n=n.stateNode,e.nodeType===8?_2(e.parentNode,n):e.nodeType===1&&_2(e,n),op(e)):_2(Kr,n.stateNode));break;case 4:r=Kr,i=ra,Kr=n.stateNode.containerInfo,ra=!0,ll(e,t,n),Kr=r,ra=i;break;case 0:case 11:case 14:case 15:if(!di&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&v_(n,t,a),i=i.next}while(i!==r)}ll(e,t,n);break;case 1:if(!di&&(Ad(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Vn(n,t,s)}ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:n.mode&1?(di=(r=di)||n.memoizedState!==null,ll(e,t,n),di=r):ll(e,t,n);break;default:ll(e,t,n)}}function EN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Nj),t.forEach(function(r){var i=Ij.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xo(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Kr=s.stateNode,ra=!1;break e;case 3:Kr=s.stateNode.containerInfo,ra=!0;break e;case 4:Kr=s.stateNode.containerInfo,ra=!0;break e}s=s.return}if(Kr===null)throw Error(ze(160));zT(o,a,i),Kr=null,ra=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Vn(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)GT(t,e),t=t.sibling}function GT(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xo(t,e),Aa(e),r&4){try{$h(3,e,e.return),oy(3,e)}catch(v){Vn(e,e.return,v)}try{$h(5,e,e.return)}catch(v){Vn(e,e.return,v)}}break;case 1:Xo(t,e),Aa(e),r&512&&n!==null&&Ad(n,n.return);break;case 5:if(Xo(t,e),Aa(e),r&512&&n!==null&&Ad(n,n.return),e.flags&32){var i=e.stateNode;try{tp(i,"")}catch(v){Vn(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&dP(i,o),qb(s,a);var c=qb(s,o);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?gP(i,d):u==="dangerouslySetInnerHTML"?pP(i,d):u==="children"?tp(i,d):Hw(i,u,d,c)}switch(s){case"input":Fb(i,o);break;case"textarea":fP(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Td(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Td(i,!!o.multiple,o.defaultValue,!0):Td(i,!!o.multiple,o.multiple?[]:"",!1))}i[up]=o}catch(v){Vn(e,e.return,v)}}break;case 6:if(Xo(t,e),Aa(e),r&4){if(e.stateNode===null)throw Error(ze(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){Vn(e,e.return,v)}}break;case 3:if(Xo(t,e),Aa(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{op(t.containerInfo)}catch(v){Vn(e,e.return,v)}break;case 4:Xo(t,e),Aa(e);break;case 13:Xo(t,e),Aa(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Sx=or())),r&4&&EN(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(di=(c=di)||u,Xo(t,e),di=c):Xo(t,e),Aa(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Ye=e,u=e.child;u!==null;){for(d=Ye=u;Ye!==null;){switch(h=Ye,f=h.child,h.tag){case 0:case 11:case 14:case 15:$h(4,h,h.return);break;case 1:Ad(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Vn(r,n,v)}}break;case 5:Ad(h,h.return);break;case 22:if(h.memoizedState!==null){NN(d);continue}}f!==null?(f.return=h,Ye=f):NN(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=mP("display",a))}catch(v){Vn(e,e.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Vn(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Xo(t,e),Aa(e),r&4&&EN(e);break;case 21:break;default:Xo(t,e),Aa(e)}}function Aa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(UT(n)){var r=n;break e}n=n.return}throw Error(ze(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(tp(i,""),r.flags&=-33);var o=xN(e);__(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=xN(e);b_(e,s,a);break;default:throw Error(ze(161))}}catch(l){Vn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kj(e,t,n){Ye=e,qT(e)}function qT(e,t,n){for(var r=(e.mode&1)!==0;Ye!==null;){var i=Ye,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||vg;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||di;s=vg;var c=di;if(vg=a,(di=l)&&!c)for(Ye=i;Ye!==null;)a=Ye,l=a.child,a.tag===22&&a.memoizedState!==null?AN(i):l!==null?(l.return=a,Ye=l):AN(i);for(;o!==null;)Ye=o,qT(o),o=o.sibling;Ye=i,vg=s,di=c}SN(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ye=o):SN(e)}}function SN(e){for(;Ye!==null;){var t=Ye;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:di||oy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!di)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ta(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&lN(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}lN(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&op(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ze(163))}di||t.flags&512&&y_(t)}catch(h){Vn(t,t.return,h)}}if(t===e){Ye=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ye=n;break}Ye=t.return}}function NN(e){for(;Ye!==null;){var t=Ye;if(t===e){Ye=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ye=n;break}Ye=t.return}}function AN(e){for(;Ye!==null;){var t=Ye;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oy(4,t)}catch(l){Vn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Vn(t,i,l)}}var o=t.return;try{y_(t)}catch(l){Vn(t,o,l)}break;case 5:var a=t.return;try{y_(t)}catch(l){Vn(t,a,l)}}}catch(l){Vn(t,t.return,l)}if(t===e){Ye=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ye=s;break}Ye=t.return}}var Cj=Math.ceil,pv=Os.ReactCurrentDispatcher,xx=Os.ReactCurrentOwner,Ro=Os.ReactCurrentBatchConfig,Qt=0,jr=null,vr=null,Xr=0,Zi=0,kd=Vl(0),Pr=0,gp=null,cu=0,ay=0,Ex=0,Uh=null,Ri=null,Sx=0,Wd=1/0,ms=null,mv=!1,w_=null,Ml=null,yg=!1,Nl=null,gv=0,zh=0,x_=null,w0=-1,x0=0;function Ei(){return Qt&6?or():w0!==-1?w0:w0=or()}function Il(e){return e.mode&1?Qt&2&&Xr!==0?Xr&-Xr:dj.transition!==null?(x0===0&&(x0=CP()),x0):(e=un,e!==0||(e=window.event,e=e===void 0?16:IP(e.type)),e):1}function sa(e,t,n,r){if(50<zh)throw zh=0,x_=null,Error(ze(185));Bp(e,n,r),(!(Qt&2)||e!==jr)&&(e===jr&&(!(Qt&2)&&(ay|=n),Pr===4&&xl(e,Xr)),Di(e,r),n===1&&Qt===0&&!(t.mode&1)&&(Wd=or()+500,ny&&Wl()))}function Di(e,t){var n=e.callbackNode;dD(e,t);var r=Q0(e,e===jr?Xr:0);if(r===0)n!==null&&IS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&IS(n),t===1)e.tag===0?uj(kN.bind(null,e)):eT(kN.bind(null,e)),aj(function(){!(Qt&6)&&Wl()}),n=null;else{switch(PP(r)){case 1:n=Jw;break;case 4:n=AP;break;case 16:n=Z0;break;case 536870912:n=kP;break;default:n=Z0}n=ZT(n,HT.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function HT(e,t){if(w0=-1,x0=0,Qt&6)throw Error(ze(327));var n=e.callbackNode;if(Id()&&e.callbackNode!==n)return null;var r=Q0(e,e===jr?Xr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=vv(e,r);else{t=r;var i=Qt;Qt|=2;var o=WT();(jr!==e||Xr!==t)&&(ms=null,Wd=or()+500,nu(e,t));do try{Rj();break}catch(s){VT(e,s)}while(!0);cx(),pv.current=o,Qt=i,vr!==null?t=0:(jr=null,Xr=0,t=Pr)}if(t!==0){if(t===2&&(i=Yb(e),i!==0&&(r=i,t=E_(e,i))),t===1)throw n=gp,nu(e,0),xl(e,r),Di(e,or()),n;if(t===6)xl(e,r);else{if(i=e.current.alternate,!(r&30)&&!Pj(i)&&(t=vv(e,r),t===2&&(o=Yb(e),o!==0&&(r=o,t=E_(e,o))),t===1))throw n=gp,nu(e,0),xl(e,r),Di(e,or()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ze(345));case 2:Bc(e,Ri,ms);break;case 3:if(xl(e,r),(r&130023424)===r&&(t=Sx+500-or(),10<t)){if(Q0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ei(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=r_(Bc.bind(null,e,Ri,ms),t);break}Bc(e,Ri,ms);break;case 4:if(xl(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-aa(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=or()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cj(r/1960))-r,10<r){e.timeoutHandle=r_(Bc.bind(null,e,Ri,ms),r);break}Bc(e,Ri,ms);break;case 5:Bc(e,Ri,ms);break;default:throw Error(ze(329))}}}return Di(e,or()),e.callbackNode===n?HT.bind(null,e):null}function E_(e,t){var n=Uh;return e.current.memoizedState.isDehydrated&&(nu(e,t).flags|=256),e=vv(e,t),e!==2&&(t=Ri,Ri=n,t!==null&&S_(t)),e}function S_(e){Ri===null?Ri=e:Ri.push.apply(Ri,e)}function Pj(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ua(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xl(e,t){for(t&=~Ex,t&=~ay,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-aa(t),r=1<<n;e[n]=-1,t&=~r}}function kN(e){if(Qt&6)throw Error(ze(327));Id();var t=Q0(e,0);if(!(t&1))return Di(e,or()),null;var n=vv(e,t);if(e.tag!==0&&n===2){var r=Yb(e);r!==0&&(t=r,n=E_(e,r))}if(n===1)throw n=gp,nu(e,0),xl(e,t),Di(e,or()),n;if(n===6)throw Error(ze(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bc(e,Ri,ms),Di(e,or()),null}function Nx(e,t){var n=Qt;Qt|=1;try{return e(t)}finally{Qt=n,Qt===0&&(Wd=or()+500,ny&&Wl())}}function uu(e){Nl!==null&&Nl.tag===0&&!(Qt&6)&&Id();var t=Qt;Qt|=1;var n=Ro.transition,r=un;try{if(Ro.transition=null,un=1,e)return e()}finally{un=r,Ro.transition=n,Qt=t,!(Qt&6)&&Wl()}}function Ax(){Zi=kd.current,Sn(kd)}function nu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,oj(n)),vr!==null)for(n=vr.return;n!==null;){var r=n;switch(ax(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&iv();break;case 3:Hd(),Sn(Mi),Sn(pi),mx();break;case 5:px(r);break;case 4:Hd();break;case 13:Sn(In);break;case 19:Sn(In);break;case 10:ux(r.type._context);break;case 22:case 23:Ax()}n=n.return}if(jr=e,vr=e=Dl(e.current,null),Xr=Zi=t,Pr=0,gp=null,Ex=ay=cu=0,Ri=Uh=null,Xc!==null){for(t=0;t<Xc.length;t++)if(n=Xc[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Xc=null}return e}function VT(e,t){do{var n=vr;try{if(cx(),y0.current=hv,fv){for(var r=jn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fv=!1}if(lu=0,Or=kr=jn=null,Fh=!1,hp=0,xx.current=null,n===null||n.return===null){Pr=1,gp=t,vr=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Xr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=pN(a);if(f!==null){f.flags&=-257,mN(f,a,s,o,t),f.mode&1&&hN(o,c,t),t=f,l=c;var m=t.updateQueue;if(m===null){var v=new Set;v.add(l),t.updateQueue=v}else m.add(l);break e}else{if(!(t&1)){hN(o,c,t),kx();break e}l=Error(ze(426))}}else if(Ln&&s.mode&1){var b=pN(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),mN(b,a,s,o,t),sx(Vd(l,s));break e}}o=l=Vd(l,s),Pr!==4&&(Pr=2),Uh===null?Uh=[o]:Uh.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=PT(o,l,t);sN(o,y);break e;case 1:s=l;var x=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ml===null||!Ml.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=TT(o,s,t);sN(o,w);break e}}o=o.return}while(o!==null)}YT(n)}catch(R){t=R,vr===n&&n!==null&&(vr=n=n.return);continue}break}while(!0)}function WT(){var e=pv.current;return pv.current=hv,e===null?hv:e}function kx(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),jr===null||!(cu&268435455)&&!(ay&268435455)||xl(jr,Xr)}function vv(e,t){var n=Qt;Qt|=2;var r=WT();(jr!==e||Xr!==t)&&(ms=null,nu(e,t));do try{Tj();break}catch(i){VT(e,i)}while(!0);if(cx(),Qt=n,pv.current=r,vr!==null)throw Error(ze(261));return jr=null,Xr=0,Pr}function Tj(){for(;vr!==null;)KT(vr)}function Rj(){for(;vr!==null&&!nD();)KT(vr)}function KT(e){var t=XT(e.alternate,e,Zi);e.memoizedProps=e.pendingProps,t===null?YT(e):vr=t,xx.current=null}function YT(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Sj(n,t),n!==null){n.flags&=32767,vr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pr=6,vr=null;return}}else if(n=Ej(n,t,Zi),n!==null){vr=n;return}if(t=t.sibling,t!==null){vr=t;return}vr=t=e}while(t!==null);Pr===0&&(Pr=5)}function Bc(e,t,n){var r=un,i=Ro.transition;try{Ro.transition=null,un=1,Lj(e,t,n,r)}finally{Ro.transition=i,un=r}return null}function Lj(e,t,n,r){do Id();while(Nl!==null);if(Qt&6)throw Error(ze(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ze(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(fD(e,o),e===jr&&(vr=jr=null,Xr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yg||(yg=!0,ZT(Z0,function(){return Id(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ro.transition,Ro.transition=null;var a=un;un=1;var s=Qt;Qt|=4,xx.current=null,Aj(e,n),GT(n,e),ZD(t_),ev=!!e_,t_=e_=null,e.current=n,kj(n),rD(),Qt=s,un=a,Ro.transition=o}else e.current=n;if(yg&&(yg=!1,Nl=e,gv=i),o=e.pendingLanes,o===0&&(Ml=null),aD(n.stateNode),Di(e,or()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mv)throw mv=!1,e=w_,w_=null,e;return gv&1&&e.tag!==0&&Id(),o=e.pendingLanes,o&1?e===x_?zh++:(zh=0,x_=e):zh=0,Wl(),null}function Id(){if(Nl!==null){var e=PP(gv),t=Ro.transition,n=un;try{if(Ro.transition=null,un=16>e?16:e,Nl===null)var r=!1;else{if(e=Nl,Nl=null,gv=0,Qt&6)throw Error(ze(331));var i=Qt;for(Qt|=4,Ye=e.current;Ye!==null;){var o=Ye,a=o.child;if(Ye.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Ye=c;Ye!==null;){var u=Ye;switch(u.tag){case 0:case 11:case 15:$h(8,u,o)}var d=u.child;if(d!==null)d.return=u,Ye=d;else for(;Ye!==null;){u=Ye;var h=u.sibling,f=u.return;if($T(u),u===c){Ye=null;break}if(h!==null){h.return=f,Ye=h;break}Ye=f}}}var m=o.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Ye=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Ye=a;else e:for(;Ye!==null;){if(o=Ye,o.flags&2048)switch(o.tag){case 0:case 11:case 15:$h(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,Ye=y;break e}Ye=o.return}}var x=e.current;for(Ye=x;Ye!==null;){a=Ye;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,Ye=_;else e:for(a=x;Ye!==null;){if(s=Ye,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:oy(9,s)}}catch(R){Vn(s,s.return,R)}if(s===a){Ye=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,Ye=w;break e}Ye=s.return}}if(Qt=i,Wl(),ja&&typeof ja.onPostCommitFiberRoot=="function")try{ja.onPostCommitFiberRoot(Xv,e)}catch{}r=!0}return r}finally{un=n,Ro.transition=t}}return!1}function CN(e,t,n){t=Vd(n,t),t=PT(e,t,1),e=Ol(e,t,1),t=Ei(),e!==null&&(Bp(e,1,t),Di(e,t))}function Vn(e,t,n){if(e.tag===3)CN(e,e,n);else for(;t!==null;){if(t.tag===3){CN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ml===null||!Ml.has(r))){e=Vd(n,e),e=TT(t,e,1),t=Ol(t,e,1),e=Ei(),t!==null&&(Bp(t,1,e),Di(t,e));break}}t=t.return}}function Oj(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ei(),e.pingedLanes|=e.suspendedLanes&n,jr===e&&(Xr&n)===n&&(Pr===4||Pr===3&&(Xr&130023424)===Xr&&500>or()-Sx?nu(e,0):Ex|=n),Di(e,t)}function JT(e,t){t===0&&(e.mode&1?(t=lg,lg<<=1,!(lg&130023424)&&(lg=4194304)):t=1);var n=Ei();e=Ts(e,t),e!==null&&(Bp(e,t,n),Di(e,n))}function Mj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),JT(e,n)}function Ij(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ze(314))}r!==null&&r.delete(t),JT(e,n)}var XT;XT=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mi.current)Li=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Li=!1,xj(e,t,n);Li=!!(e.flags&131072)}else Li=!1,Ln&&t.flags&1048576&&tT(t,sv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;_0(e,t),e=t.pendingProps;var i=zd(t,pi.current);Md(t,n),i=vx(null,t,r,e,i,n);var o=yx();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(r)?(o=!0,ov(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fx(t),i.updater=iy,t.stateNode=i,i._reactInternals=t,u_(t,r,e,n),t=h_(null,t,r,!0,o,n)):(t.tag=0,Ln&&o&&ox(t),wi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(_0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=jj(r),e=ta(r,e),i){case 0:t=f_(null,t,r,e,n);break e;case 1:t=yN(null,t,r,e,n);break e;case 11:t=gN(null,t,r,e,n);break e;case 14:t=vN(null,t,r,ta(r.type,e),n);break e}throw Error(ze(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ta(r,i),f_(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ta(r,i),yN(e,t,r,i,n);case 3:e:{if(MT(t),e===null)throw Error(ze(387));r=t.pendingProps,o=t.memoizedState,i=o.element,sT(e,t),uv(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Vd(Error(ze(423)),t),t=bN(e,t,r,n,i);break e}else if(r!==i){i=Vd(Error(ze(424)),t),t=bN(e,t,r,n,i);break e}else for(to=Ll(t.stateNode.containerInfo.firstChild),ro=t,Ln=!0,oa=null,n=oT(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gd(),r===i){t=Rs(e,t,n);break e}wi(e,t,r,n)}t=t.child}return t;case 5:return lT(t),e===null&&s_(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,n_(r,i)?a=null:o!==null&&n_(r,o)&&(t.flags|=32),OT(e,t),wi(e,t,a,n),t.child;case 6:return e===null&&s_(t),null;case 13:return IT(e,t,n);case 4:return hx(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qd(t,null,r,n):wi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ta(r,i),gN(e,t,r,i,n);case 7:return wi(e,t,t.pendingProps,n),t.child;case 8:return wi(e,t,t.pendingProps.children,n),t.child;case 12:return wi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,bn(lv,r._currentValue),r._currentValue=a,o!==null)if(ua(o.value,a)){if(o.children===i.children&&!Mi.current){t=Rs(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Ss(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),l_(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ze(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),l_(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}wi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Md(t,n),i=Lo(i),r=r(i),t.flags|=1,wi(e,t,r,n),t.child;case 14:return r=t.type,i=ta(r,t.pendingProps),i=ta(r.type,i),vN(e,t,r,i,n);case 15:return RT(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ta(r,i),_0(e,t),t.tag=1,Ii(r)?(e=!0,ov(t)):e=!1,Md(t,n),CT(t,r,i),u_(t,r,i,n),h_(null,t,r,!0,e,n);case 19:return DT(e,t,n);case 22:return LT(e,t,n)}throw Error(ze(156,t.tag))};function ZT(e,t){return NP(e,t)}function Dj(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(e,t,n,r){return new Dj(e,t,n,r)}function Cx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jj(e){if(typeof e=="function")return Cx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ww)return 11;if(e===Kw)return 14}return 2}function Dl(e,t){var n=e.alternate;return n===null?(n=Po(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function E0(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")Cx(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case vd:return ru(n.children,i,o,t);case Vw:a=8,i|=8;break;case Mb:return e=Po(12,n,t,i|2),e.elementType=Mb,e.lanes=o,e;case Ib:return e=Po(13,n,t,i),e.elementType=Ib,e.lanes=o,e;case Db:return e=Po(19,n,t,i),e.elementType=Db,e.lanes=o,e;case lP:return sy(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case aP:a=10;break e;case sP:a=9;break e;case Ww:a=11;break e;case Kw:a=14;break e;case vl:a=16,r=null;break e}throw Error(ze(130,e==null?e:typeof e,""))}return t=Po(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function ru(e,t,n,r){return e=Po(7,e,r,t),e.lanes=n,e}function sy(e,t,n,r){return e=Po(22,e,r,t),e.elementType=lP,e.lanes=n,e.stateNode={isHidden:!1},e}function C2(e,t,n){return e=Po(6,e,null,t),e.lanes=n,e}function P2(e,t,n){return t=Po(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bj(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c2(0),this.expirationTimes=c2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c2(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Px(e,t,n,r,i,o,a,s,l){return e=new Bj(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Po(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fx(o),e}function Fj(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function QT(e){if(!e)return $l;e=e._reactInternals;e:{if(bu(e)!==e||e.tag!==1)throw Error(ze(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ze(171))}if(e.tag===1){var n=e.type;if(Ii(n))return QP(e,n,t)}return t}function eR(e,t,n,r,i,o,a,s,l){return e=Px(n,r,!0,e,i,o,a,s,l),e.context=QT(null),n=e.current,r=Ei(),i=Il(n),o=Ss(r,i),o.callback=t??null,Ol(n,o,i),e.current.lanes=i,Bp(e,i,r),Di(e,r),e}function ly(e,t,n,r){var i=t.current,o=Ei(),a=Il(i);return n=QT(n),t.context===null?t.context=n:t.pendingContext=n,t=Ss(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ol(i,t,a),e!==null&&(sa(e,i,a,o),v0(e,i,a)),a}function yv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function PN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Tx(e,t){PN(e,t),(e=e.alternate)&&PN(e,t)}function $j(){return null}var tR=typeof reportError=="function"?reportError:function(e){console.error(e)};function Rx(e){this._internalRoot=e}cy.prototype.render=Rx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ze(409));ly(e,t,null,null)};cy.prototype.unmount=Rx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;uu(function(){ly(null,e,null,null)}),t[Ps]=null}};function cy(e){this._internalRoot=e}cy.prototype.unstable_scheduleHydration=function(e){if(e){var t=LP();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wl.length&&t!==0&&t<wl[n].priority;n++);wl.splice(n,0,e),n===0&&MP(e)}};function Lx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function uy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function TN(){}function Uj(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=yv(a);o.call(c)}}var a=eR(t,r,e,0,null,!1,!1,"",TN);return e._reactRootContainer=a,e[Ps]=a.current,lp(e.nodeType===8?e.parentNode:e),uu(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=yv(l);s.call(c)}}var l=Px(e,0,!1,null,null,!1,!1,"",TN);return e._reactRootContainer=l,e[Ps]=l.current,lp(e.nodeType===8?e.parentNode:e),uu(function(){ly(t,l,n,r)}),l}function dy(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=yv(a);s.call(l)}}ly(t,a,e,i)}else a=Uj(n,t,e,i,r);return yv(a)}TP=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ph(t.pendingLanes);n!==0&&(Xw(t,n|1),Di(t,or()),!(Qt&6)&&(Wd=or()+500,Wl()))}break;case 13:uu(function(){var r=Ts(e,1);if(r!==null){var i=Ei();sa(r,e,1,i)}}),Tx(e,1)}};Zw=function(e){if(e.tag===13){var t=Ts(e,134217728);if(t!==null){var n=Ei();sa(t,e,134217728,n)}Tx(e,134217728)}};RP=function(e){if(e.tag===13){var t=Il(e),n=Ts(e,t);if(n!==null){var r=Ei();sa(n,e,t,r)}Tx(e,t)}};LP=function(){return un};OP=function(e,t){var n=un;try{return un=e,t()}finally{un=n}};Vb=function(e,t,n){switch(t){case"input":if(Fb(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ty(r);if(!i)throw Error(ze(90));uP(r),Fb(r,i)}}}break;case"textarea":fP(e,n);break;case"select":t=n.value,t!=null&&Td(e,!!n.multiple,t,!1)}};bP=Nx;_P=uu;var zj={usingClientEntryPoint:!1,Events:[$p,wd,ty,vP,yP,Nx]},dh={findFiberByHostInstance:Jc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gj={bundleType:dh.bundleType,version:dh.version,rendererPackageName:dh.rendererPackageName,rendererConfig:dh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=EP(e),e===null?null:e.stateNode},findFiberByHostInstance:dh.findFiberByHostInstance||$j,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bg.isDisabled&&bg.supportsFiber)try{Xv=bg.inject(Gj),ja=bg}catch{}}so.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zj;so.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lx(t))throw Error(ze(200));return Fj(e,t,null,n)};so.createRoot=function(e,t){if(!Lx(e))throw Error(ze(299));var n=!1,r="",i=tR;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Px(e,1,!1,null,null,n,!1,r,i),e[Ps]=t.current,lp(e.nodeType===8?e.parentNode:e),new Rx(t)};so.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ze(188)):(e=Object.keys(e).join(","),Error(ze(268,e)));return e=EP(t),e=e===null?null:e.stateNode,e};so.flushSync=function(e){return uu(e)};so.hydrate=function(e,t,n){if(!uy(t))throw Error(ze(200));return dy(null,e,t,!0,n)};so.hydrateRoot=function(e,t,n){if(!Lx(e))throw Error(ze(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=tR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=eR(t,null,e,1,n??null,i,!1,o,a),e[Ps]=t.current,lp(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new cy(t)};so.render=function(e,t,n){if(!uy(t))throw Error(ze(200));return dy(null,e,t,!1,n)};so.unmountComponentAtNode=function(e){if(!uy(e))throw Error(ze(40));return e._reactRootContainer?(uu(function(){dy(null,null,e,!1,function(){e._reactRootContainer=null,e[Ps]=null})}),!0):!1};so.unstable_batchedUpdates=Nx;so.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!uy(n))throw Error(ze(200));if(e==null||e._reactInternals===void 0)throw Error(ze(38));return dy(e,t,n,!1,r)};so.version="18.3.1-next-f1338f8080-20240426";function nR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nR)}catch(e){console.error(e)}}nR(),nP.exports=so;var qj=nP.exports,RN=qj;Lb.createRoot=RN.createRoot,Lb.hydrateRoot=RN.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vp(){return vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vp.apply(this,arguments)}var Al;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Al||(Al={}));const LN="popstate";function Hj(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:a,hash:s}=r.location;return N_("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bv(i)}return Wj(t,n,null,e)}function Bn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ox(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Vj(){return Math.random().toString(36).substr(2,8)}function ON(e,t){return{usr:e.state,key:e.key,idx:t}}function N_(e,t,n,r){return n===void 0&&(n=null),vp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?uf(t):t,{state:n,key:t&&t.key||r||Vj()})}function bv(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function uf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Wj(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=Al.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(vp({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){s=Al.Pop;let b=u(),y=b==null?null:b-c;c=b,l&&l({action:s,location:v.location,delta:y})}function h(b,y){s=Al.Push;let x=N_(v.location,b,y);c=u()+1;let _=ON(x,c),w=v.createHref(x);try{a.pushState(_,"",w)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(w)}o&&l&&l({action:s,location:v.location,delta:1})}function f(b,y){s=Al.Replace;let x=N_(v.location,b,y);c=u();let _=ON(x,c),w=v.createHref(x);a.replaceState(_,"",w),o&&l&&l({action:s,location:v.location,delta:0})}function m(b){let y=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof b=="string"?b:bv(b);return x=x.replace(/ $/,"%20"),Bn(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let v={get action(){return s},get location(){return e(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(LN,d),l=b,()=>{i.removeEventListener(LN,d),l=null}},createHref(b){return t(i,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(b){return a.go(b)}};return v}var MN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(MN||(MN={}));function Kj(e,t,n){return n===void 0&&(n="/"),Yj(e,t,n)}function Yj(e,t,n,r){let i=typeof t=="string"?uf(t):t,o=Kd(i.pathname||"/",n);if(o==null)return null;let a=rR(e);Jj(a);let s=null;for(let l=0;s==null&&l<a.length;++l){let c=sB(o);s=oB(a[l],c)}return s}function rR(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(Bn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=jl([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(Bn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),rR(o.children,t,u,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:rB(c,o.index),routesMeta:u})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let l of iR(o.path))i(o,a,l)}),t}function iR(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=iR(r.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),i&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function Jj(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:iB(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Xj=/^:[\w-]+$/,Zj=3,Qj=2,eB=1,tB=10,nB=-2,IN=e=>e==="*";function rB(e,t){let n=e.split("/"),r=n.length;return n.some(IN)&&(r+=nB),t&&(r+=Qj),n.filter(i=>!IN(i)).reduce((i,o)=>i+(Xj.test(o)?Zj:o===""?eB:tB),r)}function iB(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function oB(e,t,n){let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,u=o==="/"?t:t.slice(o.length)||"/",d=A_({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:jl([o,d.pathname]),pathnameBase:fB(jl([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=jl([o,d.pathnameBase]))}return a}function A_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=aB(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let v=s[d]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const m=s[d];return f&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:e}}function aB(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ox(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function sB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ox(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Kd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const lB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cB=e=>lB.test(e);function uB(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?uf(e):e,o;if(n)if(cB(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Ox(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=DN(n.substring(1),"/"):o=DN(n,t)}else o=t;return{pathname:o,search:hB(r),hash:pB(i)}}function DN(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function T2(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dB(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Mx(e,t){let n=dB(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ix(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=uf(e):(i=vp({},e),Bn(!i.pathname||!i.pathname.includes("?"),T2("?","pathname","search",i)),Bn(!i.pathname||!i.pathname.includes("#"),T2("#","pathname","hash",i)),Bn(!i.search||!i.search.includes("#"),T2("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=n;else{let d=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}s=d>=0?t[d]:"/"}let l=uB(i,s),c=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const jl=e=>e.join("/").replace(/\/\/+/g,"/"),fB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function mB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oR=["post","put","patch","delete"];new Set(oR);const gB=["get",...oR];new Set(gB);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yp(){return yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yp.apply(this,arguments)}const fy=_e.createContext(null),aR=_e.createContext(null),Ms=_e.createContext(null),hy=_e.createContext(null),za=_e.createContext({outlet:null,matches:[],isDataRoute:!1}),sR=_e.createContext(null);function vB(e,t){let{relative:n}=t===void 0?{}:t;df()||Bn(!1);let{basename:r,navigator:i}=_e.useContext(Ms),{hash:o,pathname:a,search:s}=my(e,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:jl([r,a])),i.createHref({pathname:l,search:s,hash:o})}function df(){return _e.useContext(hy)!=null}function Kl(){return df()||Bn(!1),_e.useContext(hy).location}function lR(e){_e.useContext(Ms).static||_e.useLayoutEffect(e)}function py(){let{isDataRoute:e}=_e.useContext(za);return e?OB():yB()}function yB(){df()||Bn(!1);let e=_e.useContext(fy),{basename:t,future:n,navigator:r}=_e.useContext(Ms),{matches:i}=_e.useContext(za),{pathname:o}=Kl(),a=JSON.stringify(Mx(i,n.v7_relativeSplatPath)),s=_e.useRef(!1);return lR(()=>{s.current=!0}),_e.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){r.go(c);return}let d=Ix(c,JSON.parse(a),o,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:jl([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,a,o,e])}const bB=_e.createContext(null);function _B(e){let t=_e.useContext(za).outlet;return t&&_e.createElement(bB.Provider,{value:e},t)}function wB(){let{matches:e}=_e.useContext(za),t=e[e.length-1];return t?t.params:{}}function my(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=_e.useContext(Ms),{matches:i}=_e.useContext(za),{pathname:o}=Kl(),a=JSON.stringify(Mx(i,r.v7_relativeSplatPath));return _e.useMemo(()=>Ix(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function xB(e,t){return EB(e,t)}function EB(e,t,n,r){df()||Bn(!1);let{navigator:i}=_e.useContext(Ms),{matches:o}=_e.useContext(za),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Kl(),u;if(t){var d;let b=typeof t=="string"?uf(t):t;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||Bn(!1),u=b}else u=c;let h=u.pathname||"/",f=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=Kj(e,{pathname:f}),v=CB(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},s,b.params),pathname:jl([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:jl([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,r);return t&&v?_e.createElement(hy.Provider,{value:{location:yp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Al.Pop}},v):v}function SB(){let e=LB(),t=mB(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _e.createElement(_e.Fragment,null,_e.createElement("h2",null,"Unexpected Application Error!"),_e.createElement("h3",{style:{fontStyle:"italic"}},t),n?_e.createElement("pre",{style:i},n):null,null)}const NB=_e.createElement(SB,null);class AB extends _e.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?_e.createElement(za.Provider,{value:this.props.routeContext},_e.createElement(sR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kB(e){let{routeContext:t,match:n,children:r}=e,i=_e.useContext(fy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_e.createElement(za.Provider,{value:t},r)}function CB(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,s=(i=n)==null?void 0:i.errors;if(s!=null){let u=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||Bn(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=n,m=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,h)=>{let f,m=!1,v=null,b=null;n&&(f=s&&d.route.id?s[d.route.id]:void 0,v=d.route.errorElement||NB,l&&(c<0&&h===0?(MB("route-fallback"),m=!0,b=null):c===h&&(m=!0,b=d.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,h+1)),x=()=>{let _;return f?_=v:m?_=b:d.route.Component?_=_e.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=u,_e.createElement(kB,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?_e.createElement(AB,{location:n.location,revalidation:n.revalidation,component:v,error:f,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var cR=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(cR||{}),uR=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(uR||{});function PB(e){let t=_e.useContext(fy);return t||Bn(!1),t}function TB(e){let t=_e.useContext(aR);return t||Bn(!1),t}function RB(e){let t=_e.useContext(za);return t||Bn(!1),t}function dR(e){let t=RB(),n=t.matches[t.matches.length-1];return n.route.id||Bn(!1),n.route.id}function LB(){var e;let t=_e.useContext(sR),n=TB(),r=dR();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function OB(){let{router:e}=PB(cR.UseNavigateStable),t=dR(uR.UseNavigateStable),n=_e.useRef(!1);return lR(()=>{n.current=!0}),_e.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,yp({fromRouteId:t},o)))},[e,t])}const jN={};function MB(e,t,n){jN[e]||(jN[e]=!0)}function IB(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function DB(e){let{to:t,replace:n,state:r,relative:i}=e;df()||Bn(!1);let{future:o,static:a}=_e.useContext(Ms),{matches:s}=_e.useContext(za),{pathname:l}=Kl(),c=py(),u=Ix(t,Mx(s,o.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return _e.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function jB(e){return _B(e.context)}function Qo(e){Bn(!1)}function BB(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Al.Pop,navigator:o,static:a=!1,future:s}=e;df()&&Bn(!1);let l=t.replace(/^\/*/,"/"),c=_e.useMemo(()=>({basename:l,navigator:o,static:a,future:yp({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof r=="string"&&(r=uf(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:m="default"}=r,v=_e.useMemo(()=>{let b=Kd(u,l);return b==null?null:{location:{pathname:b,search:d,hash:h,state:f,key:m},navigationType:i}},[l,u,d,h,f,m,i]);return v==null?null:_e.createElement(Ms.Provider,{value:c},_e.createElement(hy.Provider,{children:n,value:v}))}function FB(e){let{children:t,location:n}=e;return xB(k_(t),n)}new Promise(()=>{});function k_(e,t){t===void 0&&(t=[]);let n=[];return _e.Children.forEach(e,(r,i)=>{if(!_e.isValidElement(r))return;let o=[...t,i];if(r.type===_e.Fragment){n.push.apply(n,k_(r.props.children,o));return}r.type!==Qo&&Bn(!1),!r.props.index||!r.props.children||Bn(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=k_(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_v.apply(this,arguments)}function fR(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function $B(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function UB(e,t){return e.button===0&&(!t||t==="_self")&&!$B(e)}const zB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GB=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],qB="6";try{window.__reactRouterVersion=qB}catch{}const HB=_e.createContext({isTransitioning:!1}),VB="startTransition",BN=O8[VB];function WB(e){let{basename:t,children:n,future:r,window:i}=e,o=_e.useRef();o.current==null&&(o.current=Hj({window:i,v5Compat:!0}));let a=o.current,[s,l]=_e.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},u=_e.useCallback(d=>{c&&BN?BN(()=>l(d)):l(d)},[l,c]);return _e.useLayoutEffect(()=>a.listen(u),[a,u]),_e.useEffect(()=>IB(r),[r]),_e.createElement(BB,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}const KB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qc=_e.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:l,to:c,preventScrollReset:u,viewTransition:d}=t,h=fR(t,zB),{basename:f}=_e.useContext(Ms),m,v=!1;if(typeof c=="string"&&YB.test(c)&&(m=c,KB))try{let _=new URL(window.location.href),w=c.startsWith("//")?new URL(_.protocol+c):new URL(c),R=Kd(w.pathname,f);w.origin===_.origin&&R!=null?c=R+w.search+w.hash:v=!0}catch{}let b=vB(c,{relative:i}),y=ZB(c,{replace:a,state:s,target:l,preventScrollReset:u,relative:i,viewTransition:d});function x(_){r&&r(_),_.defaultPrevented||y(_)}return _e.createElement("a",_v({},h,{href:m||b,onClick:v||o?r:x,ref:n,target:l}))}),JB=_e.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:a=!1,style:s,to:l,viewTransition:c,children:u}=t,d=fR(t,GB),h=my(l,{relative:d.relative}),f=Kl(),m=_e.useContext(aR),{navigator:v,basename:b}=_e.useContext(Ms),y=m!=null&&QB(h)&&c===!0,x=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,_=f.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(_=_.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&b&&(w=Kd(w,b)||w);const R=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let I=_===x||!a&&_.startsWith(x)&&_.charAt(R)==="/",q=w!=null&&(w===x||!a&&w.startsWith(x)&&w.charAt(x.length)==="/"),T={isActive:I,isPending:q,isTransitioning:y},D=I?r:void 0,M;typeof o=="function"?M=o(T):M=[o,I?"active":null,q?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(T):s;return _e.createElement(qc,_v({},d,{"aria-current":D,className:M,ref:n,style:C,to:l,viewTransition:c}),typeof u=="function"?u(T):u)});var C_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(C_||(C_={}));var FN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(FN||(FN={}));function XB(e){let t=_e.useContext(fy);return t||Bn(!1),t}function ZB(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:s}=t===void 0?{}:t,l=py(),c=Kl(),u=my(e,{relative:a});return _e.useCallback(d=>{if(UB(d,n)){d.preventDefault();let h=r!==void 0?r:bv(c)===bv(u);l(e,{replace:h,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[c,l,u,r,i,n,e,o,a,s])}function QB(e,t){t===void 0&&(t={});let n=_e.useContext(HB);n==null&&Bn(!1);let{basename:r}=XB(C_.useViewTransitionState),i=my(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Kd(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Kd(n.nextLocation.pathname,r)||n.nextLocation.pathname;return A_(i.pathname,a)!=null||A_(i.pathname,o)!=null}const P_=`<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" id="Definitions_Empty" targetNamespace="http://bpmn.io/schema/bpmn">
  <bpmn:process id="Process_1" isExecutable="false">
    <bpmn:startEvent id="StartEvent_1" name="Inicio" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="180" y="160" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="184" y="206" width="28" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>`;function gy(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function e7(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(d){a(d)}}function l(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})}const t7=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Dx extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class n7 extends Dx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $N extends Dx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class UN extends Dx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var T_;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(T_||(T_={}));class r7{constructor(t,{headers:n={},customFetch:r,region:i=T_.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=t7(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return e7(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:s,method:l,body:c,signal:u,timeout:d}=r;let h={},{region:f}=r;f||(f=this.region);const m=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,m.searchParams.set("forceFunctionRegion",f));let v;c&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(h["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(h["Content-Type"]="application/json",v=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?v=JSON.stringify(c):v=c;let b=u;d&&(a=new AbortController,o=setTimeout(()=>a.abort(),d),u?(b=a.signal,u.addEventListener("abort",()=>a.abort())):b=a.signal);const y=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:v,signal:b}).catch(R=>{throw new n7(R)}),x=y.headers.get("x-relay-error");if(x&&x==="true")throw new $N(y);if(!y.ok)throw new UN(y);let _=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return _==="application/json"?w=yield y.json():_==="application/octet-stream"||_==="application/pdf"?w=yield y.blob():_==="text/event-stream"?w=y:_==="multipart/form-data"?w=yield y.formData():w=yield y.text(),{data:w,error:null,response:y}}catch(s){return{data:null,error:s,response:s instanceof UN||s instanceof $N?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var i7=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},o7=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,s=null,l=null,c=o.status,u=o.statusText;if(o.ok){var d,h;if(n.method!=="HEAD"){var f;const y=await o.text();y===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?s=y:s=JSON.parse(y))}const v=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),b=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");v&&b&&b.length>1&&(l=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,c=406,u="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var m;const v=await o.text();try{a=JSON.parse(v),Array.isArray(a)&&o.status===404&&(s=[],a=null,c=200,u="OK")}catch{o.status===404&&v===""?(c=204,u="No Content"):a={message:v}}if(a&&n.isMaybeSingle&&(!(a==null||(m=a.details)===null||m===void 0)&&m.includes("0 rows"))&&(a=null,c=200,u="OK"),a&&n.shouldThrowOnError)throw new i7(a)}return{error:a,data:s,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(o=>{var a;let s="";const l=o==null?void 0:o.cause;if(l){var c,u,d,h;const m=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",v=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";s=`${(d=o==null?void 0:o.name)!==null&&d!==void 0?d:"FetchError"}: ${o==null?void 0:o.message}`,s+=`

Caused by: ${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"Error"}: ${m}`,v&&(s+=` (${v})`),l!=null&&l.stack&&(s+=`
${l.stack}`)}else{var f;s=(f=o==null?void 0:o.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},a7=class extends o7{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${l}"; options=${s};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const zN=new RegExp("[,()]");var dd=class extends a7{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&zN.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&zN.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},s7=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},i=n?"HEAD":"GET";let o=!1;const a=(e??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join(""),{url:s,headers:l}=this.cloneRequestState();return s.searchParams.set("select",a),r&&l.append("Prefer",`count=${r}`),new dd({method:i,url:s,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const i="POST",{url:o,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),n||a.append("Prefer","missing=default"),Array.isArray(e)){const s=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(s.length>0){const l=[...new Set(s)].map(c=>`"${c}"`);o.searchParams.set("columns",l.join(","))}}return new dd({method:i,url:o,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const a="POST",{url:s,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&s.searchParams.set("on_conflict",t),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);s.searchParams.set("columns",u.join(","))}}return new dd({method:a,url:s,headers:l,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;const r="PATCH",{url:i,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new dd({method:r,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new dd({method:n,url:r,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},l7=class hR{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new s7(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new hR(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:o}={}){var a;let s;const l=new URL(`${this.url}/rpc/${t}`);let c;const u=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(u)),d=r&&Object.values(n).some(u);d?(s="POST",c=n):r||i?(s=r?"HEAD":"GET",Object.entries(n).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{l.searchParams.append(f,m)})):(s="POST",c=n);const h=new Headers(this.headers);return d?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new dd({method:s,url:l,headers:h,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class c7{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const u7="2.93.3",d7=`realtime-js/${u7}`,f7="1.0.0",pR="2.0.0",GN=pR,R_=1e4,h7=1e3,p7=100;var bl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(bl||(bl={}));var Ar;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ar||(Ar={}));var ia;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ia||(ia={}));var L_;(function(e){e.websocket="websocket"})(L_||(L_={}));var Hc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Hc||(Hc={}));class m7{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,n,r){var i,o;const a=t.topic,s=(i=t.ref)!==null&&i!==void 0?i:"",l=(o=t.join_ref)!==null&&o!==void 0?o:"",c=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+a.length+c.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let m=new DataView(f),v=0;m.setUint8(v++,this.KINDS.userBroadcastPush),m.setUint8(v++,l.length),m.setUint8(v++,s.length),m.setUint8(v++,a.length),m.setUint8(v++,c.length),m.setUint8(v++,d.length),m.setUint8(v++,n),Array.from(l,y=>m.setUint8(v++,y.charCodeAt(0))),Array.from(s,y=>m.setUint8(v++,y.charCodeAt(0))),Array.from(a,y=>m.setUint8(v++,y.charCodeAt(0))),Array.from(c,y=>m.setUint8(v++,y.charCodeAt(0))),Array.from(d,y=>m.setUint8(v++,y.charCodeAt(0)));var b=new Uint8Array(f.byteLength+r.byteLength);return b.set(new Uint8Array(f),0),b.set(new Uint8Array(r),f.byteLength),b.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,o,a,s,l]=r;return n({join_ref:i,ref:o,topic:a,event:s,payload:l})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),s=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(t.slice(l,l+i));l=l+i;const u=r.decode(t.slice(l,l+o));l=l+o;const d=r.decode(t.slice(l,l+a));l=l+a;const h=t.slice(l,t.byteLength),f=s===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,m={type:this.BROADCAST_EVENT,event:u,payload:f};return a>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class mR{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var yn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(yn||(yn={}));const qN=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,a)=>(o[a]=g7(a,e,t,i),o),{}):{}},g7=(e,t,n,r)=>{const i=t.find(s=>s.name===e),o=i==null?void 0:i.type,a=n[e];return o&&!r.includes(o)?gR(o,a):O_(a)},gR=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return _7(t,n)}switch(e){case yn.bool:return v7(t);case yn.float4:case yn.float8:case yn.int2:case yn.int4:case yn.int8:case yn.numeric:case yn.oid:return y7(t);case yn.json:case yn.jsonb:return b7(t);case yn.timestamp:return w7(t);case yn.abstime:case yn.date:case yn.daterange:case yn.int4range:case yn.int8range:case yn.money:case yn.reltime:case yn.text:case yn.time:case yn.timestamptz:case yn.timetz:case yn.tsrange:case yn.tstzrange:return O_(t);default:return O_(t)}},O_=e=>e,v7=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},y7=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},b7=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},_7=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const a=e.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>gR(t,s))}return e},w7=e=>typeof e=="string"?e.replace(" ","T"):e,vR=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class R2{constructor(t,n,r={},i=R_){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var HN;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(HN||(HN={}));class Gh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gh.syncState(this.state,i,o,a),this.pendingDiffs.forEach(l=>{this.state=Gh.syncDiff(this.state,l,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Gh.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),a=this.transformState(n),s={},l={};return this.map(o,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const d=o[c];if(d){const h=u.map(b=>b.presence_ref),f=d.map(b=>b.presence_ref),m=u.filter(b=>f.indexOf(b.presence_ref)<0),v=d.filter(b=>h.indexOf(b.presence_ref)<0);m.length>0&&(s[c]=m),v.length>0&&(l[c]=v)}else s[c]=u}),this.syncDiff(o,{joins:s,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(s,l)=>{var c;const u=(c=t[s])!==null&&c!==void 0?c:[];if(t[s]=this.cloneDeep(l),u.length>0){const d=t[s].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[s].unshift(...h)}r(s,u,l)}),this.map(a,(s,l)=>{let c=t[s];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[s]=c,i(s,c,l),c.length===0&&delete t[s]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var VN;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(VN||(VN={}));var qh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(qh||(qh={}));var gs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(gs||(gs={}));class Cd{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ar.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new R2(this,ia.join,this.params,this.timeout),this.rejoinTimer=new mR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ar.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ar.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ar.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ar.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ar.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ia.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Gh(this),this.broadcastEndpointURL=vR(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ar.closed){const{config:{broadcast:a,presence:s,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[qh.PRESENCE]&&this.bindings[qh.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(gs.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(gs.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){t==null||t(gs.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,y=[];for(let x=0;x<b;x++){const _=v[x],{filter:{event:w,schema:R,table:I,filter:q}}=_,T=f&&f[x];if(T&&T.event===w&&Cd.isFilterValueEqual(T.schema,R)&&Cd.isFilterValueEqual(T.table,I)&&Cd.isFilterValueEqual(T.filter,q))y.push(Object.assign(Object.assign({},_),{id:T.id}));else{this.unsubscribe(),this.state=Ar.errored,t==null||t(gs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(gs.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ar.errored,t==null||t(gs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(gs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ar.joined&&t===qh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const c=await s.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=t,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ar.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ia.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new R2(this,ia.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ar.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new R2(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>p7){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const a=t.toLocaleLowerCase(),{close:s,error:l,leave:c,join:u}=ia;if(r&&[s,l,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var m,v,b;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(v=f.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(f=>f.callback(h,r)):(o=this.bindings[a])===null||o===void 0||o.filter(f=>{var m,v,b,y,x,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const w=f.id,R=(m=f.filter)===null||m===void 0?void 0:m.event;return w&&((v=n.ids)===null||v===void 0?void 0:v.includes(w))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(x=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return w==="*"||w===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:v,table:b,commit_timestamp:y,type:x,errors:_}=m;h=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:y,eventType:x,new:{},old:{},errors:_}),this._getPayloadRecords(m))}f.callback(h,r)})}_isClosed(){return this.state===Ar.closed}_isJoined(){return this.state===Ar.joined}_isJoining(){return this.state===Ar.joining}_isLeaving(){return this.state===Ar.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Cd.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ia.close,{},t)}_onError(t){this._on(ia.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ar.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=qN(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=qN(t.columns,t.old_record)),n}}const L2=()=>{},_g={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},x7=[1e3,2e3,5e3,1e4],E7=1e4,S7=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class N7{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=R_,this.transport=null,this.heartbeatIntervalMs=_g.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=L2,this.ref=0,this.reconnectTimer=null,this.vsn=GN,this.logger=L2,this.conn=null,this.sendBuffer=[],this.serializer=new m7,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${L_.websocket}`,this.httpEndpoint=vR(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=c7.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bl.connecting:return Hc.Connecting;case bl.open:return Hc.Open;case bl.closing:return Hc.Closing;default:return Hc.Closed}}isConnected(){return this.connectionState()===Hc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Cd(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:i,ref:o}=t,a=()=>{this.encode(t,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(h7,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},_g.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:a}=n,s=a?`(${a})`:"",l=o.status||"";this.log("receive",`${l} ${r} ${i} ${s}`.trim(),o),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===bl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bl.open||this.conn.readyState===bl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ia.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([S7],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:d7};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(ia.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new mR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_g.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,a,s,l,c,u,d,h,f;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:R_,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:_g.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=t==null?void 0:t.heartbeatCallback)!==null&&s!==void 0?s:L2,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:GN,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>x7[m-1]||E7,this.vsn){case f7:this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(m,v)=>v(JSON.stringify(m)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(m,v)=>v(JSON.parse(m));break;case pR:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var bp=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function A7(e,t,n){const r=new URL(t,e);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function k7(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function C7(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:a}){const s=A7(e.baseUrl,r,i),l=await k7(e.auth),c=await t(s,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...l,...a},body:o?JSON.stringify(o):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){const f=d?h:void 0,m=f==null?void 0:f.error;throw new bp((m==null?void 0:m.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:f})}return{status:c.status,headers:c.headers,data:h}}}}function wg(e){return e.join("")}var P7=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:wg(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wg(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wg(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wg(e.namespace)}`}),!0}catch(t){if(t instanceof bp&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof bp&&n.status===409)return;throw n}}};function Wu(e){return e.join("")}var T7=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wu(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wu(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wu(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wu(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wu(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wu(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof bp&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof bp&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},R7=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=C7({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new P7(this.client,t),this.tableOps=new T7(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},vy=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function yy(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var xg=class extends vy{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},yR=class extends vy{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const L7=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),O7=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},M_=e=>{if(Array.isArray(e))return e.map(n=>M_(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=M_(r)}),t},M7=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function _p(e){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}function I7(e,t){if(_p(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D7(e){var t=I7(e,"string");return _p(t)=="symbol"?t:t+""}function j7(e,t,n){return(t=D7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WN(Object(n),!0).forEach(function(r){j7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const KN=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},B7=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e,o=i.status||500;if(typeof i.json=="function")i.json().then(a=>{const s=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||o+"";t(new xg(KN(a),o,s,r))}).catch(()=>{if(r==="vectors"){const a=o+"";t(new xg(i.statusText||`HTTP ${o} error`,o,a,r))}else{const a=o+"";t(new xg(i.statusText||`HTTP ${o} error`,o,a,r))}});else{const a=o+"";t(new xg(i.statusText||`HTTP ${o} error`,o,a,r))}}else t(new yR(KN(e),e,r))},F7=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!r?xt(xt({},i),n):(O7(r)?(i.headers=xt({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),xt(xt({},i),n))};async function fh(e,t,n,r,i,o,a){return new Promise((s,l)=>{e(n,F7(t,r,i,o)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;if(a==="vectors"){const u=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>s(c)).catch(c=>B7(c,l,r,a))})}function bR(e="storage"){return{get:async(t,n,r,i)=>fh(t,"GET",n,r,i,void 0,e),post:async(t,n,r,i,o)=>fh(t,"POST",n,i,o,r,e),put:async(t,n,r,i,o)=>fh(t,"PUT",n,i,o,r,e),head:async(t,n,r,i)=>fh(t,"HEAD",n,xt(xt({},r),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,n,r,i,o)=>fh(t,"DELETE",n,i,o,r,e)}}const $7=bR("storage"),{get:wp,post:na,put:I_,head:U7,remove:jx}=$7,Qi=bR("vectors");var ff=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=L7(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(yy(n))return{data:null,error:n};throw n}}},z7=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(yy(t))return{data:null,error:t};throw t}}};let _R;_R=Symbol.toStringTag;var G7=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[_R]="BlobDownloadBuilder",this.promise=null}asStream(){return new z7(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(yy(t))return{data:null,error:t};throw t}}};const q7={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},YN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var H7=class extends ff{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var i=this;return i.handleOperation(async()=>{let o;const a=xt(xt({},YN),r);let s=xt(xt({},i.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",i.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),l&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(l))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,l&&(s["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(s=xt(xt({},s),r.headers));const c=i._removeEmptyFolders(t),u=i._getFinalPath(c),d=await(e=="PUT"?I_:na)(i.fetch,`${i.url}/object/${u}`,o,xt({headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:c,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;const o=i._removeEmptyFolders(e),a=i._getFinalPath(o),s=new URL(i.url+`/object/upload/sign/${a}`);return s.searchParams.set("token",t),i.handleOperation(async()=>{let l;const c=xt({upsert:YN.upsert},r),u=xt(xt({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:o,fullPath:(await I_(i.fetch,s.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const i=xt({},n.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const o=await na(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+o.url),s=a.searchParams.get("token");if(!s)throw new vy("No token returned by API");return{signedUrl:a.toString(),path:e,token:s}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await na(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await na(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e),o=await na(r.fetch,`${r.url}/object/sign/${i}`,xt({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${a}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const i=await na(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(a=>xt(xt({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${o}`):null}))})}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=r?`?${r}`:"",o=this._getFinalPath(e),a=()=>wp(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new G7(a,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>M_(await wp(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await U7(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yy(r)&&r instanceof yR){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&r.push(a);let s=r.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${s}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await jx(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const i=xt(xt(xt({},q7),t),{},{prefix:e||""});return await na(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=xt({},e);return await na(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const V7="2.93.3",zp={"X-Client-Info":`storage-js/${V7}`};var W7=class extends ff{constructor(e,t={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const o=i.href.replace(/\/$/,""),a=xt(xt({},zp),t);super(o,a,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await wp(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await wp(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await na(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await I_(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await na(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await jx(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},K7=class extends ff{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=xt(xt({},zp),t);super(r,i,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await na(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await wp(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await jx(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!M7(e))throw new vy("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new R7({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const a=i[o];return typeof a!="function"?a:async(...s)=>{try{return{data:await a.apply(i,s),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},Y7=class extends ff{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=xt(xt({},zp),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await Qi.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await Qi.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},J7=class extends ff{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=xt(xt({},zp),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},X7=class extends ff{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=xt(xt({},zp),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Qi.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},Z7=class extends X7{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Q7(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},Q7=class extends Y7{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,xt(xt({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,xt(xt({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new eF(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},eF=class extends J7{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,xt(xt({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,xt(xt({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,xt(xt({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,xt(xt({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,xt(xt({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},tF=class extends W7{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new H7(this.url,this.headers,e,this.fetch)}get vectors(){return new Z7(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new K7(this.url+"/iceberg",this.headers,this.fetch)}};const wR="2.93.3",fd=30*1e3,D_=3,O2=D_*fd,nF="http://localhost:9999",rF="supabase.auth.token",iF={"X-Client-Info":`gotrue-js/${wR}`},j_="X-Supabase-Api-Version",xR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},oF=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,aF=10*60*1e3;class xp extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function lt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class sF extends xp{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function lF(e){return lt(e)&&e.name==="AuthApiError"}class Vc extends xp{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Is extends xp{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Xi extends Is{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function M2(e){return lt(e)&&e.name==="AuthSessionMissingError"}class Ku extends Is{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Eg extends Is{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Sg extends Is{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cF(e){return lt(e)&&e.name==="AuthImplicitGrantRedirectError"}class JN extends Is{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uF extends Is{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class B_ extends Is{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function I2(e){return lt(e)&&e.name==="AuthRetryableFetchError"}class XN extends Is{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class F_ extends Is{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const wv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ZN=` 	
\r=`.split(""),dF=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ZN.length;t+=1)e[ZN[t].charCodeAt(0)]=-2;for(let t=0;t<wv.length;t+=1)e[wv[t].charCodeAt(0)]=t;return e})();function QN(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(wv[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(wv[r]),t.queuedBits-=6}}function ER(e,t,n){const r=dF[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function eA(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{pF(a,r,n)};for(let a=0;a<e.length;a+=1)ER(e.charCodeAt(a),i,o);return t.join("")}function fF(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function hF(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}fF(r,t)}}function pF(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Dd(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)ER(e.charCodeAt(i),n,r);return new Uint8Array(t)}function mF(e){const t=[];return hF(e,n=>t.push(n)),new Uint8Array(t)}function Qc(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>QN(i,n,r)),QN(null,n,r),t.join("")}function gF(e){return Math.round(Date.now()/1e3)+e}function vF(){return Symbol("auth-callback")}const Wr=()=>typeof window<"u"&&typeof document<"u",Lc={tested:!1,writable:!1},SR=()=>{if(!Wr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Lc.tested)return Lc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Lc.tested=!0,Lc.writable=!0}catch{Lc.tested=!0,Lc.writable=!1}return Lc.writable};function yF(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const NR=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),bF=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",hd=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Oc=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Vr=async(e,t)=>{await e.removeItem(t)};class by{constructor(){this.promise=new by.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}by.promiseConstructor=Promise;function Ng(e){const t=e.split(".");if(t.length!==3)throw new F_("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!oF.test(t[r]))throw new F_("JWT not in base64url format");return{header:JSON.parse(eA(t[0])),payload:JSON.parse(eA(t[1])),signature:Dd(t[2]),raw:{header:t[0],payload:t[1]}}}async function _F(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function wF(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){r(a);return}}catch(a){if(!t(o,a)){i(a);return}}})()})}function xF(e){return("0"+e.toString(16)).substr(-2)}function EF(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,xF).join("")}async function SF(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function NF(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await SF(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yu(e,t,n=!1){const r=EF();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await hd(e,`${t}-code-verifier`,i);const o=await NF(r);return[o,r===o?"plain":"s256"]}const AF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kF(e){const t=e.headers.get(j_);if(!t||!t.match(AF))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function CF(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function PF(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const TF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ju(e){if(!TF.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function D2(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function RF(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function tA(e){return JSON.parse(JSON.stringify(e))}const Fc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),LF=[502,503,504];async function nA(e){var t;if(!bF(e))throw new B_(Fc(e),0);if(LF.includes(e.status))throw new B_(Fc(e),e.status);let n;try{n=await e.json()}catch(o){throw new Vc(Fc(o),o)}let r;const i=kF(e);if(i&&i.getTime()>=xR["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new XN(Fc(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Xi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new XN(Fc(n),e.status,n.weak_password.reasons);throw new sF(Fc(n),e.status||500,r)}const OF=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function yt(e,t,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[j_]||(o[j_]=xR["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await MF(e,t,n+s,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function MF(e,t,n,r,i,o){const a=OF(t,r,i,o);let s;try{s=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new B_(Fc(l),0)}if(s.ok||await nA(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(l){await nA(l)}}function ea(e){var t;let n=null;jF(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=gF(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function rA(e){const t=ea(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function El(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function IF(e){return{data:e,error:null}}function DF(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,a=gy(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},a);return{data:{properties:s,user:l},error:null}}function iA(e){return e}function jF(e){return e.access_token&&e.refresh_token&&e.expires_in}const j2=["global","local","others"];class BF{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=NR(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=j2[0]){if(j2.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${j2.join(", ")}`);try{return await yt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:El})}catch(r){if(lt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=gy(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:DF,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(lt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await yt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:El})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,a,s,l;try{const c={nextPage:null,lastPage:0,total:0},u=await yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:iA});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(lt(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Ju(t);try{return await yt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:El})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ju(t);try{return await yt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:El})}catch(r){if(lt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ju(t);try{return await yt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:El})}catch(r){if(lt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ju(t.userId);try{const{data:n,error:r}=await yt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ju(t.userId),Ju(t.id);try{return{data:await yt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,a,s,l;try{const c={nextPage:null,lastPage:0,total:0},u=await yt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:iA});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(lt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await yt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await yt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await yt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(lt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await yt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await yt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(lt(n))return{data:null,error:n};throw n}}}function oA(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Xu={debug:!!(globalThis&&SR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class AR extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class FF extends AR{}async function $F(e,t,n){Xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Xu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new FF(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xu.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function UF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function kR(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function zF(e){return parseInt(e,16)}function GF(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function qF(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=kR(e.address),m=u?`${u}://${r}`:r,v=e.statement?`${e.statement}
`:"",b=`${m} wants you to sign in with your Ethereum account:
${f}

${v}`;let y=`URI: ${d}
Version: ${h}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),s&&(y+=`
Not Before: ${s.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const _ of c){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);x+=`
- ${_}`}y+=x}return`${b}
${y}`}class mr extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class xv extends mr{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function HF({error:e,options:t}){var n,r,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new mr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new mr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new mr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new mr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new mr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new mr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new mr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new mr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(CR(a)){if(o.rp.id!==a)return new mr({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new mr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new mr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new mr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function VF({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new mr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new mr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(CR(r)){if(n.rpId!==r)return new mr({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new mr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new mr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class WF{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const KF=new WF;function YF(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=gy(e,["challenge","user","excludeCredentials"]),o=Dd(t).buffer,a=Object.assign(Object.assign({},n),{id:Dd(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];s.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Dd(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function JF(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=gy(e,["challenge","allowCredentials"]),i=Dd(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const s=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:Dd(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function XF(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Qc(new Uint8Array(e.response.attestationObject)),clientDataJSON:Qc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ZF(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Qc(new Uint8Array(i.authenticatorData)),clientDataJSON:Qc(new Uint8Array(i.clientDataJSON)),signature:Qc(new Uint8Array(i.signature)),userHandle:i.userHandle?Qc(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function CR(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function aA(){var e,t;return!!(Wr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function QF(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xv("Browser returned unexpected credential type",t)}:{data:null,error:new xv("Empty credential response",t)}}catch(t){return{data:null,error:HF({error:t,options:e})}}}async function e9(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xv("Browser returned unexpected credential type",t)}:{data:null,error:new xv("Empty credential response",t)}}catch(t){return{data:null,error:VF({error:t,options:e})}}}const t9={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},n9={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ev(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(t(a)){const s=r[o];t(s)?r[o]=Ev(s,a):r[o]=Ev(a)}else r[o]=a}return r}function r9(e,t){return Ev(t9,e,t||{})}function i9(e,t){return Ev(n9,e,t||{})}class o9{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){var a;try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:l};const c=i??KF.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;if(!u.name){const d=r;if(d)u.name=`${u.id}:${d}`;else{const f=(await this.client.getUser()).data.user,m=((a=f==null?void 0:f.user_metadata)===null||a===void 0?void 0:a.name)||(f==null?void 0:f.email)||(f==null?void 0:f.id)||"User";u.name=`${u.id}:${m}`}}u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=r9(s.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:d,error:h}=await QF({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=i9(s.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:d,error:h}=await e9(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(s){return lt(s)?{data:null,error:s}:{data:null,error:new Vc("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new xp("rpId is required for WebAuthn authentication")};try{if(!aA())return{data:null,error:new Vc("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:l}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return lt(a)?{data:null,error:a}:{data:null,error:new Vc("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new xp("rpId is required for WebAuthn registration")};try{if(!aA())return{data:null,error:new Vc("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:s};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return lt(a)?{data:null,error:a}:{data:null,error:new Vc("Unexpected error in register",a)}}}}UF();const a9={url:nF,storageKey:rF,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function sA(e,t,n){return await n()}const Zu={};class Ep{get jwks(){var t,n;return(n=(t=Zu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Zu[this.storageKey]=Object.assign(Object.assign({},Zu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Zu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Zu[this.storageKey]=Object.assign(Object.assign({},Zu[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},a9),t);if(this.storageKey=o.storageKey,this.instanceID=(n=Ep.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Ep.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Wr()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new BF({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=NR(o.fetch),this.lock=o.lock||sA,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Wr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=$F:this.lock=sA,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new o9(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:SR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=oA(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=oA(this.memoryStorage)),Wr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(s){this._debug("#broadcastChannel","error",s)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${wR}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Wr()&&(n=yF(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Wr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),cF(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return lt(n)?this._returnResult({error:n}):this._returnResult({error:new Vc("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:ea}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(lt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:u,password:d,options:h}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Yu(this.storage,this.storageKey)),o=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},xform:ea})}else if("phone"in t){const{phone:u,password:d,options:h}=t;o=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ea})}else throw new Eg("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return await Vr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(await Vr(this.storage,`${this.storageKey}-code-verifier`),lt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:a,options:s}=t;n=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:rA})}else if("phone"in t){const{phone:o,password:a,options:s}=t;n=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:rA})}else throw new Eg("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new Ku;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,o,a,s,l,c,u,d,h;let f,m;if("message"in t)f=t.message,m=t.signature;else{const{chain:v,wallet:b,statement:y,options:x}=t;let _;if(Wr())if(typeof b=="object")_=b;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")_=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const w=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),R=await _.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=kR(R[0]);let q=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!q){const D=await _.request({method:"eth_chainId"});q=zF(D)}const T={domain:w.host,address:I,statement:y,uri:w.href,version:"1",chainId:q,nonce:(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=qF(T),m=await _.request({method:"personal_sign",params:[GF(f),I]})}try{const{data:v,error:b}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:m},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:ea});if(b)throw b;if(!v||!v.session||!v.user){const y=new Ku;return this._returnResult({data:{user:null,session:null},error:y})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(lt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var n,r,i,o,a,s,l,c,u,d,h,f;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:b,wallet:y,statement:x,options:_}=t;let w;if(Wr())if(typeof y=="object")w=y;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))w=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const R=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const I=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),x?{statement:x}:null));let q;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")q=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)q=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in q&&"signature"in q&&(typeof q.signedMessage=="string"||q.signedMessage instanceof Uint8Array)&&q.signature instanceof Uint8Array)m=typeof q.signedMessage=="string"?q.signedMessage:new TextDecoder().decode(q.signedMessage),v=q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${R.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(i=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(q=>`- ${q}`)]:[]].join(`
`);const I=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=I}}try{const{data:b,error:y}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Qc(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ea});if(y)throw y;if(!b||!b.session||!b.user){const x=new Ku;return this._returnResult({data:{user:null,session:null},error:x})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:y})}catch(b){if(lt(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const n=await Oc(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new uF;const{data:o,error:a}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ea});if(await Vr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new Ku;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await Vr(this.storage,`${this.storageKey}-code-verifier`),lt(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=t,s=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ea}),{data:l,error:c}=s;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Ku;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,o,a;try{if("email"in t){const{email:s,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Yu(this.storage,this.storageKey));const{error:d}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:s,options:l}=t,{data:c,error:u}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Eg("You must provide either an email or phone number.")}catch(s){if(await Vr(this.storage,`${this.storageKey}-code-verifier`),lt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:s}=await yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:ea});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(lt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,o,a;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await Yu(this.storage,this.storageKey));const c=await yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:IF});return!((o=c.data)===null||o===void 0)&&o.url&&Wr()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(s){if(await Vr(this.storage,`${this.storageKey}-code-verifier`),lt(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Xi;const{error:i}=await yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(lt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:a}=await yt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:a,error:s}=await yt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s})}throw new Eg("You must provide either an email or phone number and a type")}catch(n){if(lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Oc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<O2:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await Oc(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=D2()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=RF(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:El}):await this._useSession(async n=>{var r,i,o;const{data:a,error:s}=n;if(s)throw s;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xi}:await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:El})})}catch(n){if(lt(n))return M2(n)&&(await this._removeSession(),await Vr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Xi;const a=i.session;let s=null,l=null;this.flowType==="pkce"&&t.email!=null&&([s,l]=await Yu(this.storage,this.storageKey));const{data:c,error:u}=await yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:s,code_challenge_method:l}),jwt:a.access_token,xform:El});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await Vr(this.storage,`${this.storageKey}-code-verifier`),lt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Xi;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=Ng(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:s,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:l}=await this._getUser(t.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});o={access_token:t.access_token,refresh_token:t.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(lt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:s}=n;if(s)throw s;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Xi;const{data:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Wr())throw new Sg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Sg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new JN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new JN("No code detected.");const{data:x,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:l,token_type:c}=t;if(!o||!s||!a||!c)throw new Sg("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(s);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=fd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:v,error:b}=await this._getUser(o);if(b)throw b;const y={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:h,refresh_token:a,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(r){if(lt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Oc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o&&!M2(o))return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:s}=await this.admin.signOut(a,t);if(s&&!(lF(s)&&(s.status===404||s.status===401||s.status===403)||M2(s)))return this._returnResult({error:s})}return t!=="others"&&(await this._removeSession(),await Vr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=vF(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Yu(this.storage,this.storageKey,!0));try{return await yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Vr(this.storage,`${this.storageKey}-code-verifier`),lt(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,s,l,c,u;const{data:d,error:h}=o;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await yt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Wr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(lt(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:s,token:l,access_token:c,nonce:u}=t,d=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:s,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ea}),{data:h,error:f}=d;return f?this._returnResult({data:{user:null,session:null},error:f}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Ku}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:f}))}catch(i){if(await Vr(this.storage,`${this.storageKey}-code-verifier`),lt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await yt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await wF(async i=>(i>0&&await _F(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ea})),(i,o)=>{const a=200*Math.pow(2,i);return o&&I2(o)&&Date.now()+a-r<fd})}catch(r){if(this._debug(n,"error",r),lt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Wr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Oc(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Oc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await hd(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:D2()}else if(i&&!i.user&&!i.user){const a=await Oc(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Vr(this.storage,this.storageKey+"-user"),await hd(this.storage,this.storageKey,i)):i.user=D2()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<O2;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${O2}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),I2(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Xi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new by;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new Xi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),lt(o)){const a={data:null,error:o};return I2(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(t,n)}catch(l){o.push(l)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Vr(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await hd(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=tA(i);await hd(this.storage,this.storageKey,o)}else{const i=tA(n);await hd(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Vr(this.storage,this.storageKey),await Vr(this.storage,this.storageKey+"-code-verifier"),await Vr(this.storage,this.storageKey+"-user"),this.userStorage&&await Vr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Wr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),fd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/fd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${fd}ms, refresh threshold is ${D_} ticks`),i<=D_&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof AR)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await Yu(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await yt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await yt(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?XF(t.webauthn.credential_response):ZF(t.webauthn.credential_response)})}:{code:t.code}),{data:s,error:l}=await yt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await yt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:YF(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:JF(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,r,i,o;if(t)try{const{payload:f}=Ng(t);let m=null;f.aal&&(m=f.aal);let v=m;const{data:{user:b},error:y}=await this.getUser(t);if(y)return this._returnResult({data:null,error:y});((r=(n=b==null?void 0:b.factors)===null||n===void 0?void 0:n.filter(w=>w.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(v="aal2");const _=f.amr||[];return{data:{currentLevel:m,nextLevel:v,currentAuthenticationMethods:_},error:null}}catch(f){if(lt(f))return this._returnResult({data:null,error:f});throw f}const{data:{session:a},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ng(a.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((o=(i=a.user.factors)===null||i===void 0?void 0:i.filter(f=>f.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(u="aal2");const h=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await yt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Xi})})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Xi});const a=await yt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Wr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(lt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Xi});const a=await yt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Wr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(lt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await yt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Xi})})}catch(t){if(lt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await yt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Xi})})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(s=>s.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(s=>s.kid===t),r&&this.jwks_cached_at+aF>i)return r;const{data:o,error:a}=await yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(s=>s.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:m}=await this.getSession();if(m||!f.session)return this._returnResult({data:null,error:m});r=f.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:l}}=Ng(r);n!=null&&n.allowExpired||CF(o.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:o,header:i,signature:a},error:null}}const u=PF(i.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,a,mF(`${s}.${l}`)))throw new F_("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(lt(r))return this._returnResult({data:null,error:r});throw r}}}Ep.nextInstanceID={};const s9=Ep,l9="2.93.3";let Rh="";typeof Deno<"u"?Rh="deno":typeof document<"u"?Rh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rh="react-native":Rh="node";const c9={"X-Client-Info":`supabase-js-${Rh}/${l9}`},u9={headers:c9},d9={schema:"public"},f9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},h9={};function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function p9(e,t){if(Sp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m9(e){var t=p9(e,"string");return Sp(t)=="symbol"?t:t+""}function g9(e,t,n){return(t=m9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lA(Object(n),!0).forEach(function(r){g9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const v9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),y9=()=>Headers,b9=(e,t,n)=>{const r=v9(n),i=y9();return async(o,a)=>{var s;const l=(s=await t())!==null&&s!==void 0?s:e;let c=new i(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(o,Hn(Hn({},a),{},{headers:c}))}};function _9(e){return e.endsWith("/")?e:e+"/"}function w9(e,t){var n,r;const{db:i,auth:o,realtime:a,global:s}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Hn(Hn({},l),i),auth:Hn(Hn({},c),o),realtime:Hn(Hn({},u),a),storage:{},global:Hn(Hn(Hn({},d),s),{},{headers:Hn(Hn({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=s==null?void 0:s.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function x9(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_9(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var E9=class extends s9{constructor(e){super(e)}},S9=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;const o=x9(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,s={db:d9,realtime:h9,auth:Hn(Hn({},f9),{},{storageKey:a}),global:u9},l=w9(n??{},s);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=b9(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Hn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new l7(new URL("rest/v1",o).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new tF(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new r7(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:a,lock:s,debug:l,throwOnError:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new E9({url:this.authUrl.href,headers:Hn(Hn({},h),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:s,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new N7(this.realtimeUrl.href,Hn(Hn({},e),{},{params:Hn(Hn({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const N9=(e,t,n)=>new S9(e,t,n);function A9(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}A9()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const k9="https://ydiwxlrkrmygpdfacpkt.supabase.co",C9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkaXd4bHJrcm15Z3BkZmFjcGt0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwNzAwMTIsImV4cCI6MjA4NTY0NjAxMn0.uMqOpfKiRSpyaG0Da47KZWI5rOm7_Negsd5VU8J8RiI",Ir=N9(k9,C9);async function P9(){const{data:e,error:t}=await Ir.from("companies").select("*").order("created_at",{ascending:!0});return t?(console.log(" Supabase no conectado, usando localStorage"),JSON.parse(localStorage.getItem("bpmn_companies")||"[]")):e||[]}async function T9(e){const{data:t,error:n}=await Ir.from("companies").insert([{name:e.name,color_index:e.colorIndex||0}]).select().single();if(n){console.log(" Supabase no conectado, criando empresa no localStorage");const r=JSON.parse(localStorage.getItem("bpmn_companies")||"[]"),i={id:`local_company_${Date.now()}`,name:e.name,color_index:e.colorIndex||0,created_at:new Date().toISOString()};return r.push(i),localStorage.setItem("bpmn_companies",JSON.stringify(r)),console.log(" Empresa criada no localStorage!"),i}return t}async function R9(e,t){const{data:n,error:r}=await Ir.from("companies").update({name:t.name,color_index:t.colorIndex,updated_at:new Date().toISOString()}).eq("id",e).select().single();return r?(console.error("Error updating company:",r),null):n}async function L9(e){const{error:t}=await Ir.from("companies").delete().eq("id",e);return t?(console.error("Error deleting company:",t),!1):!0}async function Lh(){const{data:e,error:t}=await Ir.from("projects").select("*").order("created_at",{ascending:!0});return t?(console.error("Error fetching projects (usando localStorage):",t),JSON.parse(localStorage.getItem("bpmn_projects")||"[]")):e||[]}async function O9(e){const{data:t,error:n}=await Ir.from("projects").select("*").eq("id",e).single();return n?(console.error("Error fetching project (usando localStorage):",n),JSON.parse(localStorage.getItem("bpmn_projects")||"[]").find(o=>o.id===e)||null):t}async function $_(e){const{data:t,error:n}=await Ir.from("projects").insert([{name:e.name,xml:e.xml,company_id:e.companyId,parent_id:e.parentId||null,level:e.level||0,is_root:e.isRoot||!1,is_template:e.isTemplate||!1}]).select().single();if(n){console.error("Error creating project (usando localStorage):",n);const r=JSON.parse(localStorage.getItem("bpmn_projects")||"[]"),i={id:`local_${Date.now()}`,name:e.name,xml:e.xml,company_id:e.companyId,parent_id:e.parentId||null,level:e.level||0,is_root:e.isRoot||!1,is_template:e.isTemplate||!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return r.push(i),localStorage.setItem("bpmn_projects",JSON.stringify(r)),console.log(" Projeto criado no localStorage!"),i}return t}async function Wc(e,t){const n={updated_at:new Date().toISOString()};t.name!==void 0&&(n.name=t.name),t.xml!==void 0&&(n.xml=t.xml),t.companyId!==void 0&&(n.company_id=t.companyId),t.parentId!==void 0&&(n.parent_id=t.parentId),t.level!==void 0&&(n.level=t.level),t.isRoot!==void 0&&(n.is_root=t.isRoot);const{data:r,error:i}=await Ir.from("projects").update(n).eq("id",e).select().single();if(i){console.log(" Supabase no conectado, usando localStorage como fallback");try{const o=JSON.parse(localStorage.getItem("bpmn_projects")||"[]"),a=o.findIndex(s=>s.id===e);return a>=0?(o[a]={...o[a],...n,name:t.name!==void 0?t.name:o[a].name,xml:t.xml!==void 0?t.xml:o[a].xml,company_id:t.companyId!==void 0?t.companyId:o[a].company_id,parent_id:t.parentId!==void 0?t.parentId:o[a].parent_id,level:t.level!==void 0?t.level:o[a].level,is_root:t.isRoot!==void 0?t.isRoot:o[a].is_root},localStorage.setItem("bpmn_projects",JSON.stringify(o)),console.log(" Salvo no localStorage!",{id:e,updates:t}),o[a]):(console.error("Projeto no encontrado no localStorage:",e),null)}catch(o){return console.error("Error salvando no localStorage:",o),null}}return r}async function cA(e){const{error:t}=await Ir.from("projects").delete().eq("id",e);return t?(console.error("Error deleting project:",t),!1):!0}function $c(e){return e?{id:e.id,name:e.name,xml:e.xml,companyId:e.company_id,parentId:e.parent_id,level:e.level,isRoot:e.is_root,isTemplate:e.is_template,createdAt:e.created_at,updatedAt:e.updated_at}:null}function M9(e){return e?{id:e.id,name:e.name,colorIndex:e.color_index,createdAt:e.created_at}:null}const B2=[{bg:"bg-indigo-500",light:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700",gradient:"from-indigo-500 to-indigo-600"},{bg:"bg-emerald-500",light:"bg-emerald-50",border:"border-emerald-300",text:"text-emerald-700",gradient:"from-emerald-500 to-emerald-600"},{bg:"bg-amber-500",light:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",gradient:"from-amber-500 to-amber-600"},{bg:"bg-rose-500",light:"bg-rose-50",border:"border-rose-300",text:"text-rose-700",gradient:"from-rose-500 to-rose-600"},{bg:"bg-cyan-500",light:"bg-cyan-50",border:"border-cyan-300",text:"text-cyan-700",gradient:"from-cyan-500 to-cyan-600"},{bg:"bg-violet-500",light:"bg-violet-50",border:"border-violet-300",text:"text-violet-700",gradient:"from-violet-500 to-violet-600"}];function I9(){const e=py(),[t,n]=_e.useState([]),[r,i]=_e.useState([]),[o,a]=_e.useState(!0),[s,l]=_e.useState(null),[c,u]=_e.useState(null),[d,h]=_e.useState(""),[f,m]=_e.useState(!1),[v,b]=_e.useState(null),[y,x]=_e.useState(""),[_,w]=_e.useState({}),R=_e.useRef({}),I=_e.useRef({}),[q,T]=_e.useState(!1),[D,M]=_e.useState(null),[C,j]=_e.useState(""),[z,Q]=_e.useState(null),[me,pe]=_e.useState(null),ue=_e.useCallback(async()=>{a(!0),l(null);try{const[U,ge]=await Promise.all([P9(),Lh()]),Pe=U.map(M9),oe=ge.map($c);i(Pe),n(oe)}catch(U){console.error("Erro ao carregar dados:",U),l("Erro ao carregar dados do banco de dados")}finally{a(!1)}},[]);_e.useEffect(()=>{ue()},[ue]);const te=_e.useCallback(()=>{const U={};Object.keys(R.current).forEach(ge=>{const Pe=R.current[ge];if(!Pe)return;const oe=Pe.getBoundingClientRect();Object.keys(I.current).forEach(Z=>{const de=I.current[Z];if(de){const he=t.find(Ce=>Ce.id===Z);if((he==null?void 0:he.companyId)===ge){const Ce=de.getBoundingClientRect();U[Z]={x:Ce.left-oe.left+Ce.width/2,y:Ce.top-oe.top+Ce.height/2,width:Ce.width,height:Ce.height,top:Ce.top-oe.top,bottom:Ce.top-oe.top+Ce.height,left:Ce.left-oe.left,right:Ce.left-oe.left+Ce.width,companyId:ge}}}})}),w(U)},[t]);_e.useEffect(()=>{const U=setTimeout(te,100),ge=setTimeout(te,400);window.addEventListener("resize",te);const Pe=new ResizeObserver(()=>{te()});return document.querySelector("aside")&&Pe.observe(document.querySelector("aside")),()=>{clearTimeout(U),clearTimeout(ge),window.removeEventListener("resize",te),Pe.disconnect()}},[t,r,te]);const ae=_e.useCallback(U=>{const ge=[];return t.filter(oe=>oe.companyId===U).forEach(oe=>{if(oe.parentId&&_[oe.id]&&_[oe.parentId]){const Z=_[oe.parentId],de=_[oe.id];if(Z.companyId!==U||de.companyId!==U)return;let he,Ce,De,Te;de.top>Z.bottom-10?(he=Z.x,Ce=Z.bottom,De=de.x,Te=de.top):de.left>Z.right-10?(he=Z.right,Ce=Z.y,De=de.left,Te=de.y):de.right<Z.left+10?(he=Z.left,Ce=Z.y,De=de.right,Te=de.y):(he=Z.x,Ce=Z.top,De=de.x,Te=de.bottom),ge.push({id:`${oe.parentId}-${oe.id}`,parentId:oe.parentId,childId:oe.id,startX:he,startY:Ce,endX:De,endY:Te,level:oe.level||1})}}),ge},[t,_]),ye=async()=>{await T9({name:C,colorIndex:r.length%B2.length})&&await ue(),T(!1),j("")},we=async()=>{await R9(D.id,{name:C}),await ue(),M(null),j("")},L=async U=>{const ge=t.filter(Pe=>Pe.companyId===U);for(const Pe of ge)await cA(Pe.id);await L9(U),await ue(),pe(null)},G=(U,ge)=>t.filter(Pe=>Pe.id!==U&&Pe.companyId===ge),K=U=>{Q(U),h("Novo Diagrama"),m(!0)},ee=async()=>{const U=await $_({name:d,xml:P_,companyId:z,level:0,parentId:null,isRoot:!0,isTemplate:!1});U&&(m(!1),h(""),Q(null),e(`/editor/${U.id}`))},O=U=>{e(`/editor/${U}`)},N=async U=>{const ge=t.filter(Pe=>Pe.parentId===U);for(const Pe of ge)await Wc(Pe.id,{parentId:null,level:0});await cA(U),await ue(),u(null)},k=async()=>{if(v){const U=t.find(Pe=>Pe.id===y),ge=(U==null?void 0:U.level)??0;await Wc(v,{parentId:y||null,level:y?ge+1:0,isRoot:!y}),await ue()}b(null),x("")},V=U=>U?new Date(U).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}):"",J=U=>{const ge=t.find(Pe=>Pe.id===U);return(ge==null?void 0:ge.name)||"Desconhecido"},se=U=>{const ge=[{gradient:"from-green-500 to-emerald-600",border:"border-green-400",bg:"bg-green-500",light:"bg-green-50"},{gradient:"from-blue-500 to-indigo-600",border:"border-blue-400",bg:"bg-blue-500",light:"bg-blue-50"},{gradient:"from-purple-500 to-violet-600",border:"border-purple-400",bg:"bg-purple-500",light:"bg-purple-50"},{gradient:"from-orange-500 to-amber-600",border:"border-orange-400",bg:"bg-orange-500",light:"bg-orange-50"},{gradient:"from-pink-500 to-rose-600",border:"border-pink-400",bg:"bg-pink-500",light:"bg-pink-50"}];return ge[U%ge.length]},ke=U=>{const ge=["#22c55e","#3b82f6","#8b5cf6","#f97316","#ec4899"];return ge[(U-1)%ge.length]||"#64748b"},Ae=_e.useMemo(()=>{const U={};return r.forEach(ge=>{U[ge.id]=t.filter(Pe=>Pe.companyId===ge.id).sort((Pe,oe)=>{const Z=Pe.level??0,de=oe.level??0;return Z!==de?Z-de:new Date(oe.updatedAt||0)-new Date(Pe.updatedAt||0)})}),U},[t,r]),Ie=t.find(U=>U.id===v);return o?E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 border-4 border-fyness-primary border-t-transparent rounded-full animate-spin"}),E.jsx("span",{className:"text-slate-600",children:"Carregando dados..."})]})}):s?E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:E.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md text-center",children:[E.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:E.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),E.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Erro de Conexo"}),E.jsx("p",{className:"text-slate-500 mb-4",children:s}),E.jsx("button",{onClick:ue,className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors",children:"Tentar Novamente"})]})}):E.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[E.jsx("header",{className:"bg-white border-b border-slate-200 shadow-sm",children:E.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-fyness-primary to-fyness-secondary rounded-xl flex items-center justify-center",children:E.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),E.jsxs("div",{children:[E.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"BPMN Holding"}),E.jsx("p",{className:"text-sm text-slate-500",children:"Gesto de Processos Empresariais"})]})]}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[E.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Supabase"]}),E.jsxs("button",{onClick:()=>{M(null),j(""),T(!0)},className:"flex items-center gap-2 px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors text-sm font-medium",children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nova Empresa"]}),E.jsxs("span",{className:"text-sm text-slate-500",children:[r.length," empresa",r.length!==1?"s":"","  ",t.length," fluxo",t.length!==1?"s":""]})]})]})})}),E.jsx("main",{className:"max-w-7xl mx-auto px-6 py-8 space-y-8",children:r.length===0?E.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[E.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5"})}),E.jsx("h2",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Nenhuma empresa cadastrada"}),E.jsx("p",{className:"text-slate-500 mb-4",children:"Crie sua primeira empresa para comear a gerenciar os processos."}),E.jsx("button",{onClick:()=>{M(null),j(""),T(!0)},className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors",children:"Criar Primeira Empresa"})]}):E.jsxs(E.Fragment,{children:[r.map(U=>{const ge=B2[U.colorIndex%B2.length],Pe=Ae[U.id]||[],oe=ae(U.id);return E.jsxs("div",{className:`bg-white rounded-2xl border-2 ${ge.border} shadow-sm overflow-hidden`,children:[E.jsx("div",{className:`bg-gradient-to-r ${ge.gradient} px-6 py-4`,children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:E.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-lg font-bold text-white",children:U.name}),E.jsxs("p",{className:"text-white/70 text-sm",children:[Pe.length," fluxo",Pe.length!==1?"s":""]})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("button",{onClick:()=>K(U.id),className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-colors text-sm",children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Novo Fluxo"]}),E.jsx("button",{onClick:()=>{M(U),j(U.name),T(!0)},className:"p-1.5 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-colors",title:"Editar empresa",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),E.jsx("button",{onClick:()=>pe(U.id),className:"p-1.5 bg-white/20 hover:bg-red-500/50 text-white rounded-lg transition-colors",title:"Excluir empresa",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),E.jsx("div",{className:"p-6",children:Pe.length===0?E.jsxs("div",{className:`${ge.light} rounded-xl border-2 border-dashed ${ge.border} p-8 text-center`,children:[E.jsx("svg",{className:`w-12 h-12 ${ge.text} mx-auto mb-3 opacity-50`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7"})}),E.jsx("p",{className:`${ge.text} font-medium mb-1`,children:"Nenhum fluxo ainda"}),E.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Crie o primeiro fluxo de processos desta empresa"}),E.jsx("button",{onClick:()=>K(U.id),className:`px-4 py-2 bg-gradient-to-r ${ge.gradient} text-white rounded-lg hover:opacity-90 transition-opacity text-sm font-medium`,children:"Criar Primeiro Fluxo"})]}):E.jsxs("div",{ref:Z=>R.current[U.id]=Z,className:"relative",children:[E.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-0",style:{overflow:"visible"},children:[E.jsx("defs",{children:[0,1,2,3,4].map(Z=>E.jsx("marker",{id:`arrowhead-${U.id}-${Z}`,markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:E.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:ke(Z+1)})},`arrow-${U.id}-${Z}`))}),oe.map(Z=>{const de=ke(Z.level),he=Math.abs(Z.endY-Z.startY)>Math.abs(Z.endX-Z.startX),Ce=(Z.startX+Z.endX)/2,De=(Z.startY+Z.endY)/2;let Te;return he?Te=`M ${Z.startX} ${Z.startY} C ${Z.startX} ${De}, ${Z.endX} ${De}, ${Z.endX} ${Z.endY}`:Te=`M ${Z.startX} ${Z.startY} C ${Ce} ${Z.startY}, ${Ce} ${Z.endY}, ${Z.endX} ${Z.endY}`,E.jsxs("g",{children:[E.jsx("path",{d:Te,fill:"none",stroke:de,strokeWidth:"4",strokeOpacity:"0.2",strokeLinecap:"round"}),E.jsx("path",{d:Te,fill:"none",stroke:de,strokeWidth:"2",strokeLinecap:"round",markerEnd:`url(#arrowhead-${U.id}-${(Z.level-1)%5})`})]},Z.id)})]}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 relative z-10",children:Pe.map(Z=>{const de=se(Z.level||0);return E.jsxs("div",{ref:he=>I.current[Z.id]=he,className:`bg-white rounded-lg border hover:shadow-md transition-all overflow-hidden group relative z-20 ${de.border} hover:border-slate-400`,children:[E.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${de.gradient}`}),E.jsxs("div",{onClick:()=>O(Z.id),className:"h-14 bg-slate-50 border-b border-slate-200 flex items-center justify-center cursor-pointer relative overflow-hidden",children:[E.jsx("svg",{className:"w-6 h-6 text-slate-300 group-hover:opacity-0 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7"})}),E.jsx("div",{className:`absolute top-1 left-1 bg-gradient-to-r ${de.gradient} text-white text-[8px] px-1.5 py-0.5 rounded-full font-medium z-20`,children:Z.level===0||Z.isRoot?"Raiz":`N${Z.level}`}),E.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/90 transition-all flex items-center justify-center",children:E.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-fyness-primary font-medium text-xs",children:"Abrir"})})]}),E.jsxs("div",{className:"p-2",children:[E.jsx("h3",{className:"font-semibold text-slate-800 truncate text-xs",children:Z.name}),E.jsx("p",{className:"text-[9px] text-slate-400 mb-1.5",children:V(Z.updatedAt)}),Z.parentId&&E.jsxs("div",{className:"mb-1.5 p-1 bg-slate-50 rounded flex items-center gap-1 text-[8px]",children:[E.jsx("div",{className:`w-1 h-1 rounded-full ${se((Z.level||1)-1).bg}`}),E.jsxs("span",{className:"text-slate-500 truncate",children:[" ",J(Z.parentId)]})]}),E.jsxs("div",{className:"flex gap-1",children:[E.jsx("button",{onClick:()=>O(Z.id),className:"flex-1 px-1.5 py-0.5 bg-fyness-primary text-white text-[9px] rounded hover:bg-fyness-secondary transition-colors",children:"Editar"}),E.jsx("button",{onClick:()=>{b(Z.id),x(Z.parentId||"")},className:"px-1.5 py-0.5 border border-slate-200 text-slate-500 rounded hover:bg-slate-50 transition-colors",title:"Dependncia",children:E.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"})})}),E.jsx("button",{onClick:()=>u(Z.id),className:"px-1.5 py-0.5 border border-red-200 text-red-400 rounded hover:bg-red-50 transition-colors",title:"Excluir",children:E.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},Z.id)})})]})})]},U.id)}),E.jsxs("div",{className:"p-4 bg-white rounded-xl border border-slate-200",children:[E.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Legenda - Relacionamento entre Fluxos"}),E.jsxs("div",{className:"flex flex-wrap gap-4 text-xs",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-r from-green-500 to-emerald-600"}),E.jsx("span",{className:"text-slate-600",children:"Nvel 0 - Raiz"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-r from-blue-500 to-indigo-600"}),E.jsx("span",{className:"text-slate-600",children:"Nvel 1"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-r from-purple-500 to-violet-600"}),E.jsx("span",{className:"text-slate-600",children:"Nvel 2+"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("svg",{className:"w-6 h-3",viewBox:"0 0 24 12",children:[E.jsx("path",{d:"M0 6 L18 6",stroke:"#3b82f6",strokeWidth:"2",fill:"none"}),E.jsx("polygon",{points:"16,3 22,6 16,9",fill:"#3b82f6"})]}),E.jsx("span",{className:"text-slate-600",children:"Dependncia"})]})]})]})]})}),q&&E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[E.jsx("div",{className:"p-6 border-b border-slate-200",children:E.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:D?"Editar Empresa":"Nova Empresa"})}),E.jsxs("div",{className:"p-6",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome da Empresa"}),E.jsx("input",{type:"text",value:C,onChange:U=>j(U.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",placeholder:"Ex: Empresa de Tecnologia",autoFocus:!0,onKeyDown:U=>{U.key==="Enter"&&C.trim()&&(D?we():ye()),U.key==="Escape"&&(T(!1),M(null))}})]}),E.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[E.jsx("button",{onClick:()=>{T(!1),M(null),j("")},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),E.jsx("button",{onClick:D?we:ye,disabled:!C.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:D?"Salvar":"Criar Empresa"})]})]})}),v&&E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[E.jsx("div",{className:"p-6 border-b border-slate-200",children:E.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Definir Dependncia"})}),E.jsxs("div",{className:"p-6",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Este fluxo depende de:"}),E.jsxs("select",{value:y,onChange:U=>x(U.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",children:[E.jsx("option",{value:"",children:"Nenhum (Fluxo Raiz)"}),G(v,Ie==null?void 0:Ie.companyId).map(U=>E.jsxs("option",{value:U.id,children:[U.name," ",U.level!==void 0?`(Nvel ${U.level})`:""]},U.id))]})]}),E.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[E.jsx("button",{onClick:()=>{b(null),x("")},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),E.jsx("button",{onClick:k,className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors",children:"Salvar"})]})]})}),f&&E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[E.jsx("div",{className:"p-6 border-b border-slate-200",children:E.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Novo Fluxo"})}),E.jsxs("div",{className:"p-6",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Fluxo"}),E.jsx("input",{type:"text",value:d,onChange:U=>h(U.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",placeholder:"Ex: Processo de Vendas",autoFocus:!0,onKeyDown:U=>{U.key==="Enter"&&d.trim()&&ee(),U.key==="Escape"&&m(!1)}})]}),E.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[E.jsx("button",{onClick:()=>{m(!1),Q(null)},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),E.jsx("button",{onClick:ee,disabled:!d.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Criar Fluxo"})]})]})}),c&&E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full mx-4 overflow-hidden",children:[E.jsxs("div",{className:"p-6",children:[E.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:E.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),E.jsx("h3",{className:"text-lg font-semibold text-slate-800 text-center mb-2",children:"Excluir Fluxo?"}),E.jsx("p",{className:"text-sm text-slate-500 text-center",children:"Esta ao no pode ser desfeita."})]}),E.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-center",children:[E.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),E.jsx("button",{onClick:()=>N(c),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Excluir"})]})]})}),me&&E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full mx-4 overflow-hidden",children:[E.jsxs("div",{className:"p-6",children:[E.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:E.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5"})})}),E.jsx("h3",{className:"text-lg font-semibold text-slate-800 text-center mb-2",children:"Excluir Empresa?"}),E.jsx("p",{className:"text-sm text-slate-500 text-center",children:"Todos os fluxos desta empresa sero excludos."})]}),E.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-center",children:[E.jsx("button",{onClick:()=>pe(null),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),E.jsx("button",{onClick:()=>L(me),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Excluir"})]})]})})]})}const D9="modulepreload",j9=function(e){return"/"+e},uA={},F2=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=j9(l),l in uA)return;uA[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":D9,c||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),c)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return t().catch(o)})};function cn(e){"@babel/helpers - typeof";return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(e)}var da=Uint8Array,no=Uint16Array,Bx=Int32Array,Fx=new da([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$x=new da([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dA=new da([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),PR=function(e,t){for(var n=new no(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new Bx(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},TR=PR(Fx,2),B9=TR.b,U_=TR.r;B9[28]=258,U_[258]=28;var F9=PR($x,0),fA=F9.r,z_=new no(32768);for(var En=0;En<32768;++En){var cl=(En&43690)>>1|(En&21845)<<1;cl=(cl&52428)>>2|(cl&13107)<<2,cl=(cl&61680)>>4|(cl&3855)<<4,z_[En]=((cl&65280)>>8|(cl&255)<<8)>>1}var Hh=function(e,t,n){for(var r=e.length,i=0,o=new no(t);i<r;++i)e[i]&&++o[e[i]-1];var a=new no(t);for(i=1;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;var s;if(n){s=new no(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],d=a[e[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)s[z_[d]>>l]=c}else for(s=new no(r),i=0;i<r;++i)e[i]&&(s[i]=z_[a[e[i]-1]++]>>15-e[i]);return s},du=new da(288);for(var En=0;En<144;++En)du[En]=8;for(var En=144;En<256;++En)du[En]=9;for(var En=256;En<280;++En)du[En]=7;for(var En=280;En<288;++En)du[En]=8;var Sv=new da(32);for(var En=0;En<32;++En)Sv[En]=5;var $9=Hh(du,9,0),U9=Hh(Sv,5,0),RR=function(e){return(e+7)/8|0},z9=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new da(e.subarray(t,n))},fs=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},hh=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},$2=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return{t:OR,l:0};if(i==1){var a=new da(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(R,I){return R.f-I.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=i-1;)s=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:s.f+l.f,l:s,r:l};for(var h=o[0].s,r=1;r<i;++r)o[r].s>h&&(h=o[r].s);var f=new no(h+1),m=G_(n[u-1],f,0);if(m>t){var r=0,v=0,b=m-t,y=1<<b;for(o.sort(function(I,q){return f[q.s]-f[I.s]||I.f-q.f});r<i;++r){var x=o[r].s;if(f[x]>t)v+=y-(1<<m-f[x]),f[x]=t;else break}for(v>>=b;v>0;){var _=o[r].s;f[_]<t?v-=1<<t-f[_]++-1:++r}for(;r>=0&&v;--r){var w=o[r].s;f[w]==t&&(--f[w],++v)}m=t}return{t:new da(f),l:m}},G_=function(e,t,n){return e.s==-1?Math.max(G_(e.l,t,n+1),G_(e.r,t,n+1)):t[e.s]=n},hA=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new no(++t),r=0,i=e[0],o=1,a=function(l){n[r++]=l},s=1;s<=t;++s)if(e[s]==i&&s!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=e[s]}return{c:n.subarray(0,r),n:t}},ph=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},LR=function(e,t,n){var r=n.length,i=RR(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<r;++o)e[i+o+4]=n[o];return(i+4+r)*8},pA=function(e,t,n,r,i,o,a,s,l,c,u){fs(t,u++,n),++i[256];for(var d=$2(i,15),h=d.t,f=d.l,m=$2(o,15),v=m.t,b=m.l,y=hA(h),x=y.c,_=y.n,w=hA(v),R=w.c,I=w.n,q=new no(19),T=0;T<x.length;++T)++q[x[T]&31];for(var T=0;T<R.length;++T)++q[R[T]&31];for(var D=$2(q,7),M=D.t,C=D.l,j=19;j>4&&!M[dA[j-1]];--j);var z=c+5<<3,Q=ph(i,du)+ph(o,Sv)+a,me=ph(i,h)+ph(o,v)+a+14+3*j+ph(q,M)+2*q[16]+3*q[17]+7*q[18];if(l>=0&&z<=Q&&z<=me)return LR(t,u,e.subarray(l,l+c));var pe,ue,te,ae;if(fs(t,u,1+(me<Q)),u+=2,me<Q){pe=Hh(h,f,0),ue=h,te=Hh(v,b,0),ae=v;var ye=Hh(M,C,0);fs(t,u,_-257),fs(t,u+5,I-1),fs(t,u+10,j-4),u+=14;for(var T=0;T<j;++T)fs(t,u+3*T,M[dA[T]]);u+=3*j;for(var we=[x,R],L=0;L<2;++L)for(var G=we[L],T=0;T<G.length;++T){var K=G[T]&31;fs(t,u,ye[K]),u+=M[K],K>15&&(fs(t,u,G[T]>>5&127),u+=G[T]>>12)}}else pe=$9,ue=du,te=U9,ae=Sv;for(var T=0;T<s;++T){var ee=r[T];if(ee>255){var K=ee>>18&31;hh(t,u,pe[K+257]),u+=ue[K+257],K>7&&(fs(t,u,ee>>23&31),u+=Fx[K]);var O=ee&31;hh(t,u,te[O]),u+=ae[O],O>3&&(hh(t,u,ee>>5&8191),u+=$x[O])}else hh(t,u,pe[ee]),u+=ue[ee]}return hh(t,u,pe[256]),u+ue[256]},G9=new Bx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),OR=new da(0),q9=function(e,t,n,r,i,o){var a=o.z||e.length,s=new da(r+a+5*(1+Math.ceil(a/7e3))+i),l=s.subarray(r,s.length-i),c=o.l,u=(o.r||0)&7;if(t){u&&(l[0]=o.r>>3);for(var d=G9[t-1],h=d>>13,f=d&8191,m=(1<<n)-1,v=o.p||new no(32768),b=o.h||new no(m+1),y=Math.ceil(n/3),x=2*y,_=function(Ie){return(e[Ie]^e[Ie+1]<<y^e[Ie+2]<<x)&m},w=new Bx(25e3),R=new no(288),I=new no(32),q=0,T=0,D=o.i||0,M=0,C=o.w||0,j=0;D+2<a;++D){var z=_(D),Q=D&32767,me=b[z];if(v[Q]=me,b[z]=Q,C<=D){var pe=a-D;if((q>7e3||M>24576)&&(pe>423||!c)){u=pA(e,l,0,w,R,I,T,M,j,D-j,u),M=q=T=0,j=D;for(var ue=0;ue<286;++ue)R[ue]=0;for(var ue=0;ue<30;++ue)I[ue]=0}var te=2,ae=0,ye=f,we=Q-me&32767;if(pe>2&&z==_(D-we))for(var L=Math.min(h,pe)-1,G=Math.min(32767,D),K=Math.min(258,pe);we<=G&&--ye&&Q!=me;){if(e[D+te]==e[D+te-we]){for(var ee=0;ee<K&&e[D+ee]==e[D+ee-we];++ee);if(ee>te){if(te=ee,ae=we,ee>L)break;for(var O=Math.min(we,ee-2),N=0,ue=0;ue<O;++ue){var k=D-we+ue&32767,V=v[k],J=k-V&32767;J>N&&(N=J,me=k)}}}Q=me,me=v[Q],we+=Q-me&32767}if(ae){w[M++]=268435456|U_[te]<<18|fA[ae];var se=U_[te]&31,ke=fA[ae]&31;T+=Fx[se]+$x[ke],++R[257+se],++I[ke],C=D+te,++q}else w[M++]=e[D],++R[e[D]]}}for(D=Math.max(D,C);D<a;++D)w[M++]=e[D],++R[e[D]];u=pA(e,l,c,w,R,I,T,M,j,D-j,u),c||(o.r=u&7|l[u/8|0]<<3,u-=7,o.h=b,o.p=v,o.i=D,o.w=C)}else{for(var D=o.w||0;D<a+c;D+=65535){var Ae=D+65535;Ae>=a&&(l[u/8|0]=c,Ae=a),u=LR(l,u+1,e.subarray(D,Ae))}o.i=a}return z9(s,0,r+RR(u)+i)},MR=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=n.length|0,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},H9=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),a=new da(o.length+e.length);a.set(o),a.set(e,o.length),e=a,i.w=o.length}return q9(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},IR=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},V9=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=MR();i.p(t.dictionary),IR(e,2,i.d())}};function q_(e,t){t||(t={});var n=MR();n.p(e);var r=H9(e,t,t.dictionary?6:2,4);return V9(r,t),IR(r,r.length-4,n.d()),r}var W9=typeof TextDecoder<"u"&&new TextDecoder,K9=0;try{W9.decode(OR,{stream:!0}),K9=1}catch{}function Y9(e){if(Array.isArray(e))return e}function J9(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function mA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function X9(e,t){if(e){if(typeof e=="string")return mA(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mA(e,t):void 0}}function Z9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gA(e,t){return Y9(e)||J9(e,t)||X9(e,t)||Z9()}function vA(e,t="utf8"){return new TextDecoder(t).decode(e)}const Q9=new TextEncoder;function e$(e){return Q9.encode(e)}const t$=1024*8,n$=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),U2={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Ux{constructor(t=t$,n={}){ln(this,"buffer");ln(this,"byteLength");ln(this,"byteOffset");ln(this,"length");ln(this,"offset");ln(this,"lastWrittenByte");ln(this,"littleEndian");ln(this,"_data");ln(this,"_mark");ln(this,"_marks");let r=!1;typeof t=="number"?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=n.offset?n.offset>>>0:0,o=t.byteLength-i;let a=i;(ArrayBuffer.isView(t)||t instanceof Ux)&&(t.byteLength!==t.buffer.byteLength&&(a=t.byteOffset+i),t=t.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=(this.offset+t)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const r=U2[n].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===n$&&n!=="uint8"&&n!=="int8"){const s=new Uint8Array(this.buffer.slice(i,i+r));s.reverse();const l=new U2[n](s.buffer);return this.offset+=r,l.reverse(),l}const a=new U2[n](o);return this.offset+=r,a}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return vA(this.readBytes(t))}decodeText(t=1,n="utf8"){return vA(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(e$(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function hf(e){let t=e.length;for(;--t>=0;)e[t]=0}const r$=3,i$=258,DR=29,o$=256,a$=o$+1+DR,jR=30,s$=512,l$=new Array((a$+2)*2);hf(l$);const c$=new Array(jR*2);hf(c$);const u$=new Array(s$);hf(u$);const d$=new Array(i$-r$+1);hf(d$);const f$=new Array(DR);hf(f$);const h$=new Array(jR);hf(h$);const p$=(e,t,n,r)=>{let i=e&65535|0,o=e>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0};var H_=p$;const m$=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},g$=new Uint32Array(m$()),v$=(e,t,n,r)=>{const i=g$,o=r+n;e^=-1;for(let a=r;a<o;a++)e=e>>>8^i[(e^t[a])&255];return e^-1};var ka=v$,V_={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},BR={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const y$=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var b$=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)y$(n,r)&&(e[r]=n[r])}}return e},_$=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let a=e[r];n.set(a,i),i+=a.length}return n},FR={assign:b$,flattenChunks:_$};let $R=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$R=!1}const Np=new Uint8Array(256);for(let e=0;e<256;e++)Np[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Np[254]=Np[254]=1;var w$=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t};const x$=(e,t)=>{if(t<65534&&e.subarray&&$R)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var E$=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const o=new Array(n*2);for(i=0,r=0;r<n;){let a=e[r++];if(a<128){o[i++]=a;continue}let s=Np[a];if(s>4){o[i++]=65533,r+=s-1;continue}for(a&=s===2?31:s===3?15:7;s>1&&r<n;)a=a<<6|e[r++]&63,s--;if(s>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return x$(o,i)},S$=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Np[e[n]]>t?n:t},W_={string2buf:w$,buf2string:E$,utf8border:S$};function N$(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var A$=N$;const Ag=16209,k$=16191;var C$=function(t,n){let r,i,o,a,s,l,c,u,d,h,f,m,v,b,y,x,_,w,R,I,q,T,D,M;const C=t.state;r=t.next_in,D=t.input,i=r+(t.avail_in-5),o=t.next_out,M=t.output,a=o-(n-t.avail_out),s=o+(t.avail_out-257),l=C.dmax,c=C.wsize,u=C.whave,d=C.wnext,h=C.window,f=C.hold,m=C.bits,v=C.lencode,b=C.distcode,y=(1<<C.lenbits)-1,x=(1<<C.distbits)-1;e:do{m<15&&(f+=D[r++]<<m,m+=8,f+=D[r++]<<m,m+=8),_=v[f&y];t:for(;;){if(w=_>>>24,f>>>=w,m-=w,w=_>>>16&255,w===0)M[o++]=_&65535;else if(w&16){R=_&65535,w&=15,w&&(m<w&&(f+=D[r++]<<m,m+=8),R+=f&(1<<w)-1,f>>>=w,m-=w),m<15&&(f+=D[r++]<<m,m+=8,f+=D[r++]<<m,m+=8),_=b[f&x];n:for(;;){if(w=_>>>24,f>>>=w,m-=w,w=_>>>16&255,w&16){if(I=_&65535,w&=15,m<w&&(f+=D[r++]<<m,m+=8,m<w&&(f+=D[r++]<<m,m+=8)),I+=f&(1<<w)-1,I>l){t.msg="invalid distance too far back",C.mode=Ag;break e}if(f>>>=w,m-=w,w=o-a,I>w){if(w=I-w,w>u&&C.sane){t.msg="invalid distance too far back",C.mode=Ag;break e}if(q=0,T=h,d===0){if(q+=c-w,w<R){R-=w;do M[o++]=h[q++];while(--w);q=o-I,T=M}}else if(d<w){if(q+=c+d-w,w-=d,w<R){R-=w;do M[o++]=h[q++];while(--w);if(q=0,d<R){w=d,R-=w;do M[o++]=h[q++];while(--w);q=o-I,T=M}}}else if(q+=d-w,w<R){R-=w;do M[o++]=h[q++];while(--w);q=o-I,T=M}for(;R>2;)M[o++]=T[q++],M[o++]=T[q++],M[o++]=T[q++],R-=3;R&&(M[o++]=T[q++],R>1&&(M[o++]=T[q++]))}else{q=o-I;do M[o++]=M[q++],M[o++]=M[q++],M[o++]=M[q++],R-=3;while(R>2);R&&(M[o++]=M[q++],R>1&&(M[o++]=M[q++]))}}else if(w&64){t.msg="invalid distance code",C.mode=Ag;break e}else{_=b[(_&65535)+(f&(1<<w)-1)];continue n}break}}else if(w&64)if(w&32){C.mode=k$;break e}else{t.msg="invalid literal/length code",C.mode=Ag;break e}else{_=v[(_&65535)+(f&(1<<w)-1)];continue t}break}}while(r<i&&o<s);R=m>>3,r-=R,m-=R<<3,f&=(1<<m)-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=o<s?257+(s-o):257-(o-s),C.hold=f,C.bits=m};const Qu=15,yA=852,bA=592,_A=0,z2=1,wA=2,P$=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),T$=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),R$=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),L$=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),O$=(e,t,n,r,i,o,a,s)=>{const l=s.bits;let c=0,u=0,d=0,h=0,f=0,m=0,v=0,b=0,y=0,x=0,_,w,R,I,q,T=null,D;const M=new Uint16Array(Qu+1),C=new Uint16Array(Qu+1);let j=null,z,Q,me;for(c=0;c<=Qu;c++)M[c]=0;for(u=0;u<r;u++)M[t[n+u]]++;for(f=l,h=Qu;h>=1&&M[h]===0;h--);if(f>h&&(f=h),h===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(d=1;d<h&&M[d]===0;d++);for(f<d&&(f=d),b=1,c=1;c<=Qu;c++)if(b<<=1,b-=M[c],b<0)return-1;if(b>0&&(e===_A||h!==1))return-1;for(C[1]=0,c=1;c<Qu;c++)C[c+1]=C[c]+M[c];for(u=0;u<r;u++)t[n+u]!==0&&(a[C[t[n+u]]++]=u);if(e===_A?(T=j=a,D=20):e===z2?(T=P$,j=T$,D=257):(T=R$,j=L$,D=0),x=0,u=0,c=d,q=o,m=f,v=0,R=-1,y=1<<f,I=y-1,e===z2&&y>yA||e===wA&&y>bA)return 1;for(;;){z=c-v,a[u]+1<D?(Q=0,me=a[u]):a[u]>=D?(Q=j[a[u]-D],me=T[a[u]-D]):(Q=96,me=0),_=1<<c-v,w=1<<m,d=w;do w-=_,i[q+(x>>v)+w]=z<<24|Q<<16|me|0;while(w!==0);for(_=1<<c-1;x&_;)_>>=1;if(_!==0?(x&=_-1,x+=_):x=0,u++,--M[c]===0){if(c===h)break;c=t[n+a[u]]}if(c>f&&(x&I)!==R){for(v===0&&(v=f),q+=d,m=c-v,b=1<<m;m+v<h&&(b-=M[m+v],!(b<=0));)m++,b<<=1;if(y+=1<<m,e===z2&&y>yA||e===wA&&y>bA)return 1;R=x&I,i[R]=f<<24|m<<16|q-o|0}}return x!==0&&(i[q+x]=c-v<<24|64<<16|0),s.bits=f,0};var Vh=O$;const M$=0,UR=1,zR=2,{Z_FINISH:xA,Z_BLOCK:I$,Z_TREES:kg,Z_OK:fu,Z_STREAM_END:D$,Z_NEED_DICT:j$,Z_STREAM_ERROR:Mo,Z_DATA_ERROR:GR,Z_MEM_ERROR:qR,Z_BUF_ERROR:B$,Z_DEFLATED:EA}=BR,_y=16180,SA=16181,NA=16182,AA=16183,kA=16184,CA=16185,PA=16186,TA=16187,RA=16188,LA=16189,Nv=16190,hs=16191,G2=16192,OA=16193,q2=16194,MA=16195,IA=16196,DA=16197,jA=16198,Cg=16199,Pg=16200,BA=16201,FA=16202,$A=16203,UA=16204,zA=16205,H2=16206,GA=16207,qA=16208,Rn=16209,HR=16210,VR=16211,F$=852,$$=592,U$=15,z$=U$,HA=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function G$(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const _u=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<_y||t.mode>VR?1:0},WR=e=>{if(_u(e))return Mo;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=_y,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(F$),t.distcode=t.distdyn=new Int32Array($$),t.sane=1,t.back=-1,fu},KR=e=>{if(_u(e))return Mo;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,WR(e)},YR=(e,t)=>{let n;if(_u(e))return Mo;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Mo:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,KR(e))},JR=(e,t)=>{if(!e)return Mo;const n=new G$;e.state=n,n.strm=e,n.window=null,n.mode=_y;const r=YR(e,t);return r!==fu&&(e.state=null),r},q$=e=>JR(e,z$);let VA=!0,V2,W2;const H$=e=>{if(VA){V2=new Int32Array(512),W2=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Vh(UR,e.lens,0,288,V2,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Vh(zR,e.lens,0,32,W2,0,e.work,{bits:5}),VA=!1}e.lencode=V2,e.lenbits=9,e.distcode=W2,e.distbits=5},XR=(e,t,n,r)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),r-=i,r?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},V$=(e,t)=>{let n,r,i,o,a,s,l,c,u,d,h,f,m,v,b=0,y,x,_,w,R,I,q,T;const D=new Uint8Array(4);let M,C;const j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(_u(e)||!e.output||!e.input&&e.avail_in!==0)return Mo;n=e.state,n.mode===hs&&(n.mode=G2),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,d=s,h=l,T=fu;e:for(;;)switch(n.mode){case _y:if(n.wrap===0){n.mode=G2;break}for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,D[0]=c&255,D[1]=c>>>8&255,n.check=ka(n.check,D,2,0),c=0,u=0,n.mode=SA;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Rn;break}if((c&15)!==EA){e.msg="unknown compression method",n.mode=Rn;break}if(c>>>=4,u-=4,q=(c&15)+8,n.wbits===0&&(n.wbits=q),q>15||q>n.wbits){e.msg="invalid window size",n.mode=Rn;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=c&512?LA:hs,c=0,u=0;break;case SA:for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==EA){e.msg="unknown compression method",n.mode=Rn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Rn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,n.check=ka(n.check,D,2,0)),c=0,u=0,n.mode=NA;case NA:for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,n.check=ka(n.check,D,4,0)),c=0,u=0,n.mode=AA;case AA:for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,n.check=ka(n.check,D,2,0)),c=0,u=0,n.mode=kA;case kA:if(n.flags&1024){for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,n.check=ka(n.check,D,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=CA;case CA:if(n.flags&1024&&(f=n.length,f>s&&(f=s),f&&(n.head&&(q=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+f),q)),n.flags&512&&n.wrap&4&&(n.check=ka(n.check,r,f,o)),s-=f,o+=f,n.length-=f),n.length))break e;n.length=0,n.mode=PA;case PA:if(n.flags&2048){if(s===0)break e;f=0;do q=r[o+f++],n.head&&q&&n.length<65536&&(n.head.name+=String.fromCharCode(q));while(q&&f<s);if(n.flags&512&&n.wrap&4&&(n.check=ka(n.check,r,f,o)),s-=f,o+=f,q)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=TA;case TA:if(n.flags&4096){if(s===0)break e;f=0;do q=r[o+f++],n.head&&q&&n.length<65536&&(n.head.comment+=String.fromCharCode(q));while(q&&f<s);if(n.flags&512&&n.wrap&4&&(n.check=ka(n.check,r,f,o)),s-=f,o+=f,q)break e}else n.head&&(n.head.comment=null);n.mode=RA;case RA:if(n.flags&512){for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.wrap&4&&c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Rn;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=hs;break;case LA:for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}e.adler=n.check=HA(c),c=0,u=0,n.mode=Nv;case Nv:if(n.havedict===0)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,j$;e.adler=n.check=1,n.mode=hs;case hs:if(t===I$||t===kg)break e;case G2:if(n.last){c>>>=u&7,u-=u&7,n.mode=H2;break}for(;u<3;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=OA;break;case 1:if(H$(n),n.mode=Cg,t===kg){c>>>=2,u-=2;break e}break;case 2:n.mode=IA;break;case 3:e.msg="invalid block type",n.mode=Rn}c>>>=2,u-=2;break;case OA:for(c>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Rn;break}if(n.length=c&65535,c=0,u=0,n.mode=q2,t===kg)break e;case q2:n.mode=MA;case MA:if(f=n.length,f){if(f>s&&(f=s),f>l&&(f=l),f===0)break e;i.set(r.subarray(o,o+f),a),s-=f,o+=f,l-=f,a+=f,n.length-=f;break}n.mode=hs;break;case IA:for(;u<14;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Rn;break}n.have=0,n.mode=DA;case DA:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.lens[j[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,M={bits:n.lenbits},T=Vh(M$,n.lens,0,19,n.lencode,0,n.work,M),n.lenbits=M.bits,T){e.msg="invalid code lengths set",n.mode=Rn;break}n.have=0,n.mode=jA;case jA:for(;n.have<n.nlen+n.ndist;){for(;b=n.lencode[c&(1<<n.lenbits)-1],y=b>>>24,x=b>>>16&255,_=b&65535,!(y<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(_<16)c>>>=y,u-=y,n.lens[n.have++]=_;else{if(_===16){for(C=y+2;u<C;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(c>>>=y,u-=y,n.have===0){e.msg="invalid bit length repeat",n.mode=Rn;break}q=n.lens[n.have-1],f=3+(c&3),c>>>=2,u-=2}else if(_===17){for(C=y+3;u<C;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=y,u-=y,q=0,f=3+(c&7),c>>>=3,u-=3}else{for(C=y+7;u<C;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=y,u-=y,q=0,f=11+(c&127),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Rn;break}for(;f--;)n.lens[n.have++]=q}}if(n.mode===Rn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Rn;break}if(n.lenbits=9,M={bits:n.lenbits},T=Vh(UR,n.lens,0,n.nlen,n.lencode,0,n.work,M),n.lenbits=M.bits,T){e.msg="invalid literal/lengths set",n.mode=Rn;break}if(n.distbits=6,n.distcode=n.distdyn,M={bits:n.distbits},T=Vh(zR,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,M),n.distbits=M.bits,T){e.msg="invalid distances set",n.mode=Rn;break}if(n.mode=Cg,t===kg)break e;case Cg:n.mode=Pg;case Pg:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,C$(e,h),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===hs&&(n.back=-1);break}for(n.back=0;b=n.lencode[c&(1<<n.lenbits)-1],y=b>>>24,x=b>>>16&255,_=b&65535,!(y<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(x&&!(x&240)){for(w=y,R=x,I=_;b=n.lencode[I+((c&(1<<w+R)-1)>>w)],y=b>>>24,x=b>>>16&255,_=b&65535,!(w+y<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=y,u-=y,n.back+=y,n.length=_,x===0){n.mode=zA;break}if(x&32){n.back=-1,n.mode=hs;break}if(x&64){e.msg="invalid literal/length code",n.mode=Rn;break}n.extra=x&15,n.mode=BA;case BA:if(n.extra){for(C=n.extra;u<C;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=FA;case FA:for(;b=n.distcode[c&(1<<n.distbits)-1],y=b>>>24,x=b>>>16&255,_=b&65535,!(y<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(!(x&240)){for(w=y,R=x,I=_;b=n.distcode[I+((c&(1<<w+R)-1)>>w)],y=b>>>24,x=b>>>16&255,_=b&65535,!(w+y<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=y,u-=y,n.back+=y,x&64){e.msg="invalid distance code",n.mode=Rn;break}n.offset=_,n.extra=x&15,n.mode=$A;case $A:if(n.extra){for(C=n.extra;u<C;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Rn;break}n.mode=UA;case UA:if(l===0)break e;if(f=h-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Rn;break}f>n.wnext?(f-=n.wnext,m=n.wsize-f):m=n.wnext-f,f>n.length&&(f=n.length),v=n.window}else v=i,m=a-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do i[a++]=v[m++];while(--f);n.length===0&&(n.mode=Pg);break;case zA:if(l===0)break e;i[a++]=n.length,l--,n.mode=Pg;break;case H2:if(n.wrap){for(;u<32;){if(s===0)break e;s--,c|=r[o++]<<u,u+=8}if(h-=l,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?ka(n.check,i,h,a-h):H_(n.check,i,h,a-h)),h=l,n.wrap&4&&(n.flags?c:HA(c))!==n.check){e.msg="incorrect data check",n.mode=Rn;break}c=0,u=0}n.mode=GA;case GA:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.wrap&4&&c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Rn;break}c=0,u=0}n.mode=qA;case qA:T=D$;break e;case Rn:T=GR;break e;case HR:return qR;case VR:default:return Mo}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<Rn&&(n.mode<H2||t!==xA))&&XR(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?ka(n.check,i,h,e.next_out-h):H_(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===hs?128:0)+(n.mode===Cg||n.mode===q2?256:0),(d===0&&h===0||t===xA)&&T===fu&&(T=B$),T},W$=e=>{if(_u(e))return Mo;let t=e.state;return t.window&&(t.window=null),e.state=null,fu},K$=(e,t)=>{if(_u(e))return Mo;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,fu):Mo},Y$=(e,t)=>{const n=t.length;let r,i,o;return _u(e)||(r=e.state,r.wrap!==0&&r.mode!==Nv)?Mo:r.mode===Nv&&(i=1,i=H_(i,t,n,0),i!==r.check)?GR:(o=XR(e,t,n,n),o?(r.mode=HR,qR):(r.havedict=1,fu))};var J$=KR,X$=YR,Z$=WR,Q$=q$,eU=JR,tU=V$,nU=W$,rU=K$,iU=Y$,oU="pako inflate (from Nodeca project)",ys={inflateReset:J$,inflateReset2:X$,inflateResetKeep:Z$,inflateInit:Q$,inflateInit2:eU,inflate:tU,inflateEnd:nU,inflateGetHeader:rU,inflateSetDictionary:iU,inflateInfo:oU};function aU(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var sU=aU;const ZR=Object.prototype.toString,{Z_NO_FLUSH:lU,Z_FINISH:cU,Z_OK:Ap,Z_STREAM_END:K2,Z_NEED_DICT:Y2,Z_STREAM_ERROR:uU,Z_DATA_ERROR:WA,Z_MEM_ERROR:dU}=BR;function Gp(e){this.options=FR.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A$,this.strm.avail_out=0;let n=ys.inflateInit2(this.strm,t.windowBits);if(n!==Ap)throw new Error(V_[n]);if(this.header=new sU,ys.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=W_.string2buf(t.dictionary):ZR.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ys.inflateSetDictionary(this.strm,t.dictionary),n!==Ap)))throw new Error(V_[n])}Gp.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?cU:lU,ZR.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=ys.inflate(n,a),o===Y2&&i&&(o=ys.inflateSetDictionary(n,i),o===Ap?o=ys.inflate(n,a):o===WA&&(o=Y2));n.avail_in>0&&o===K2&&n.state.wrap>0&&e[n.next_in]!==0;)ys.inflateReset(n),o=ys.inflate(n,a);switch(o){case uU:case WA:case Y2:case dU:return this.onEnd(o),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||o===K2))if(this.options.to==="string"){let l=W_.utf8border(n.output,n.next_out),c=n.next_out-l,u=W_.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===Ap&&s===0)){if(o===K2)return o=ys.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Gp.prototype.onData=function(e){this.chunks.push(e)};Gp.prototype.onEnd=function(e){e===Ap&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=FR.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function fU(e,t){const n=new Gp(t);if(n.push(e),n.err)throw n.msg||V_[n.err];return n.result}var hU=Gp,pU=fU,mU={Inflate:hU,inflate:pU};const{Inflate:gU,inflate:vU}=mU;var KA=gU,yU=vU;const QR=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;QR[e]=t}const YA=4294967295;function bU(e,t,n){let r=e;for(let i=0;i<n;i++)r=QR[(r^t[i])&255]^r>>>8;return r}function _U(e,t){return(bU(YA,e,t)^YA)>>>0}function JA(e,t,n){const r=e.readUint32(),i=_U(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function e6(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function t6(e,t,n,r){let i=0;for(;i<r;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-r]&255}function n6(e,t,n,r){let i=0;if(n.length===0)for(;i<r;i++)t[i]=e[i];else for(;i<r;i++)t[i]=e[i]+n[i]&255}function r6(e,t,n,r,i){let o=0;if(n.length===0){for(;o<i;o++)t[o]=e[o];for(;o<r;o++)t[o]=e[o]+(t[o-i]>>1)&255}else{for(;o<i;o++)t[o]=e[o]+(n[o]>>1)&255;for(;o<r;o++)t[o]=e[o]+(t[o-i]+n[o]>>1)&255}}function i6(e,t,n,r,i){let o=0;if(n.length===0){for(;o<i;o++)t[o]=e[o];for(;o<r;o++)t[o]=e[o]+t[o-i]&255}else{for(;o<i;o++)t[o]=e[o]+n[o]&255;for(;o<r;o++)t[o]=e[o]+wU(t[o-i],n[o],n[o-i])&255}}function wU(e,t,n){const r=e+t-n,i=Math.abs(r-e),o=Math.abs(r-t),a=Math.abs(r-n);return i<=o&&i<=a?e:o<=a?t:n}function xU(e,t,n,r,i,o){switch(e){case 0:e6(t,n,i);break;case 1:t6(t,n,i,o);break;case 2:n6(t,n,r,i);break;case 3:r6(t,n,r,i,o);break;case 4:i6(t,n,r,i,o);break;default:throw new Error(`Unsupported filter: ${e}`)}}const EU=new Uint16Array([255]),SU=new Uint8Array(EU.buffer),NU=SU[0]===255;function AU(e){const{data:t,width:n,height:r,channels:i,depth:o}=e,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],s=Math.ceil(o/8)*i,l=new Uint8Array(r*n*s);let c=0;for(let u=0;u<7;u++){const d=a[u],h=Math.ceil((n-d.x)/d.xStep),f=Math.ceil((r-d.y)/d.yStep);if(h<=0||f<=0)continue;const m=h*s,v=new Uint8Array(m);for(let b=0;b<f;b++){const y=t[c++],x=t.subarray(c,c+m);c+=m;const _=new Uint8Array(m);xU(y,x,_,v,m,s),v.set(_);for(let w=0;w<h;w++){const R=d.x+w*d.xStep,I=d.y+b*d.yStep;if(!(R>=n||I>=r))for(let q=0;q<s;q++)l[(I*n+R)*s+q]=_[w*s+q]}}}if(o===16){const u=new Uint16Array(l.buffer);if(NU)for(let d=0;d<u.length;d++)u[d]=kU(u[d]);return u}else return l}function kU(e){return(e&255)<<8|e>>8&255}const CU=new Uint16Array([255]),PU=new Uint8Array(CU.buffer),TU=PU[0]===255,RU=new Uint8Array(0);function XA(e){const{data:t,width:n,height:r,channels:i,depth:o}=e,a=Math.ceil(o/8)*i,s=Math.ceil(o/8*i*n),l=new Uint8Array(r*s);let c=RU,u=0,d,h;for(let f=0;f<r;f++){switch(d=t.subarray(u+1,u+1+s),h=l.subarray(f*s,(f+1)*s),t[u]){case 0:e6(d,h,s);break;case 1:t6(d,h,s,a);break;case 2:n6(d,h,c,s);break;case 3:r6(d,h,c,s,a);break;case 4:i6(d,h,c,s,a);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}c=h,u+=s+1}if(o===16){const f=new Uint16Array(l.buffer);if(TU)for(let m=0;m<f.length;m++)f[m]=LU(f[m]);return f}else return l}function LU(e){return(e&255)<<8|e>>8&255}const S0=Uint8Array.of(137,80,78,71,13,10,26,10);function ZA(e){if(!OU(e.readBytes(S0.length)))throw new Error("wrong PNG signature")}function OU(e){if(e.length<S0.length)return!1;for(let t=0;t<S0.length;t++)if(e[t]!==S0[t])return!1;return!0}const MU="tEXt",IU=0,o6=new TextDecoder("latin1");function DU(e){if(BU(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const jU=/^[\u0000-\u00FF]*$/;function BU(e){if(!jU.test(e))throw new Error("invalid latin1 text")}function FU(e,t,n){const r=a6(t);e[r]=$U(t,n-r.length-1)}function a6(e){for(e.mark();e.readByte()!==IU;);const t=e.offset;e.reset();const n=o6.decode(e.readBytes(t-e.offset-1));return e.skip(1),DU(n),n}function $U(e,t){return o6.decode(e.readBytes(t))}const Ji={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},J2={UNKNOWN:-1,DEFLATE:0},QA={UNKNOWN:-1,ADAPTIVE:0},X2={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Tg={NONE:0,BACKGROUND:1,PREVIOUS:2},Z2={SOURCE:0,OVER:1};class UU extends Ux{constructor(n,r={}){super(n);ln(this,"_checkCrc");ln(this,"_inflator");ln(this,"_png");ln(this,"_apng");ln(this,"_end");ln(this,"_hasPalette");ln(this,"_palette");ln(this,"_hasTransparency");ln(this,"_transparency");ln(this,"_compressionMethod");ln(this,"_filterMethod");ln(this,"_interlaceMethod");ln(this,"_colorType");ln(this,"_isAnimated");ln(this,"_numberOfFrames");ln(this,"_numberOfPlays");ln(this,"_frames");ln(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new KA,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=J2.UNKNOWN,this._filterMethod=QA.UNKNOWN,this._interlaceMethod=X2.UNKNOWN,this._colorType=Ji.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(ZA(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(ZA(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case MU:FU(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?JA(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?JA(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=zU(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Ji.GREYSCALE:i=1;break;case Ji.TRUECOLOUR:i=3;break;case Ji.INDEXED_COLOUR:i=1;break;case Ji.GREYSCALE_ALPHA:i=2;break;case Ji.TRUECOLOUR_ALPHA:i=4;break;case Ji.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==J2.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let o=0;o<r;o++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Ji.GREYSCALE:case Ji.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Ji.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Ji.UNKNOWN:case Ji.GREYSCALE_ALPHA:case Ji.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=a6(this),i=this.readUint8();if(i!==J2.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const o=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:yU(o)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=XA({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const o=this._apng.frames.at(n-1);this.disposeFrame(i,o,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case Tg.NONE:break;case Tg.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let a=0;a<this._png.width;a++){const s=(o*n.width+a)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[s+l]=0}break;case Tg.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,o=(a,s)=>{const l=((a+r.yOffset)*this._png.width+r.xOffset+s)*this._png.channels,c=(a*r.width+s)*this._png.channels;return{index:l,frameIndex:c}};switch(r.blendOp){case Z2.SOURCE:for(let a=0;a<r.height;a++)for(let s=0;s<r.width;s++){const{index:l,frameIndex:c}=o(a,s);for(let u=0;u<this._png.channels;u++)n.data[l+u]=r.data[c+u]}break;case Z2.OVER:for(let a=0;a<r.height;a++)for(let s=0;s<r.width;s++){const{index:l,frameIndex:c}=o(a,s);for(let u=0;u<this._png.channels;u++){const d=r.data[c+this._png.channels-1]/i,h=u%(this._png.channels-1)===0?1:r.data[c+u],f=Math.floor(d*h+(1-d)*n.data[l+u]);n.data[l+u]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==QA.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===X2.NO_INTERLACE)this._png.data=XA({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===X2.ADAM7)this._png.data=AU({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Tg.NONE,blendOp:Z2.SOURCE,data:n}),this._inflator=new KA,this._writingDataChunks=!1}}function zU(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var ek;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(ek||(ek={}));function GU(e,t){return new UU(e,t).decode()}var St=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Q2(){St.console&&typeof St.console.log=="function"&&St.console.log.apply(St.console,arguments)}var hn={log:Q2,warn:function(e){St.console&&(typeof St.console.warn=="function"?St.console.warn.apply(St.console,arguments):Q2.call(null,arguments))},error:function(e){St.console&&(typeof St.console.error=="function"?St.console.error.apply(St.console,arguments):Q2(e))}};function eb(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Uc(r.response,t,n)},r.onerror=function(){hn.error("could not download file")},r.send()}function tk(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Rg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Uc=St.saveAs||((typeof window>"u"?"undefined":cn(window))!=="object"||window!==St?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=St.URL||St.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?tk(i.href)?eb(e,t,n):Rg(i,i.target="_blank"):Rg(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Rg(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(tk(e))eb(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Rg(r)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:cn(o)!=="object"&&(hn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return eb(e,t,n);var i=e.type==="application/octet-stream",o=/constructor/i.test(St.HTMLElement)||St.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&(typeof FileReader>"u"?"undefined":cn(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var u=s.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},s.readAsDataURL(e)}else{var l=St.URL||St.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function s6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,a=i.exec(e);a&&(t=o(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+s+l+c}}var N0=St.atob.bind(St),nk=St.btoa.bind(St);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function tb(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];n=si(n,r,i,o,t[0],7,-680876936),o=si(o,n,r,i,t[1],12,-389564586),i=si(i,o,n,r,t[2],17,606105819),r=si(r,i,o,n,t[3],22,-1044525330),n=si(n,r,i,o,t[4],7,-176418897),o=si(o,n,r,i,t[5],12,1200080426),i=si(i,o,n,r,t[6],17,-1473231341),r=si(r,i,o,n,t[7],22,-45705983),n=si(n,r,i,o,t[8],7,1770035416),o=si(o,n,r,i,t[9],12,-1958414417),i=si(i,o,n,r,t[10],17,-42063),r=si(r,i,o,n,t[11],22,-1990404162),n=si(n,r,i,o,t[12],7,1804603682),o=si(o,n,r,i,t[13],12,-40341101),i=si(i,o,n,r,t[14],17,-1502002290),n=li(n,r=si(r,i,o,n,t[15],22,1236535329),i,o,t[1],5,-165796510),o=li(o,n,r,i,t[6],9,-1069501632),i=li(i,o,n,r,t[11],14,643717713),r=li(r,i,o,n,t[0],20,-373897302),n=li(n,r,i,o,t[5],5,-701558691),o=li(o,n,r,i,t[10],9,38016083),i=li(i,o,n,r,t[15],14,-660478335),r=li(r,i,o,n,t[4],20,-405537848),n=li(n,r,i,o,t[9],5,568446438),o=li(o,n,r,i,t[14],9,-1019803690),i=li(i,o,n,r,t[3],14,-187363961),r=li(r,i,o,n,t[8],20,1163531501),n=li(n,r,i,o,t[13],5,-1444681467),o=li(o,n,r,i,t[2],9,-51403784),i=li(i,o,n,r,t[7],14,1735328473),n=ci(n,r=li(r,i,o,n,t[12],20,-1926607734),i,o,t[5],4,-378558),o=ci(o,n,r,i,t[8],11,-2022574463),i=ci(i,o,n,r,t[11],16,1839030562),r=ci(r,i,o,n,t[14],23,-35309556),n=ci(n,r,i,o,t[1],4,-1530992060),o=ci(o,n,r,i,t[4],11,1272893353),i=ci(i,o,n,r,t[7],16,-155497632),r=ci(r,i,o,n,t[10],23,-1094730640),n=ci(n,r,i,o,t[13],4,681279174),o=ci(o,n,r,i,t[0],11,-358537222),i=ci(i,o,n,r,t[3],16,-722521979),r=ci(r,i,o,n,t[6],23,76029189),n=ci(n,r,i,o,t[9],4,-640364487),o=ci(o,n,r,i,t[12],11,-421815835),i=ci(i,o,n,r,t[15],16,530742520),n=ui(n,r=ci(r,i,o,n,t[2],23,-995338651),i,o,t[0],6,-198630844),o=ui(o,n,r,i,t[7],10,1126891415),i=ui(i,o,n,r,t[14],15,-1416354905),r=ui(r,i,o,n,t[5],21,-57434055),n=ui(n,r,i,o,t[12],6,1700485571),o=ui(o,n,r,i,t[3],10,-1894986606),i=ui(i,o,n,r,t[10],15,-1051523),r=ui(r,i,o,n,t[1],21,-2054922799),n=ui(n,r,i,o,t[8],6,1873313359),o=ui(o,n,r,i,t[15],10,-30611744),i=ui(i,o,n,r,t[6],15,-1560198380),r=ui(r,i,o,n,t[13],21,1309151649),n=ui(n,r,i,o,t[4],6,-145523070),o=ui(o,n,r,i,t[11],10,-1120210379),i=ui(i,o,n,r,t[2],15,718787259),r=ui(r,i,o,n,t[9],21,-343485551),e[0]=kl(n,e[0]),e[1]=kl(r,e[1]),e[2]=kl(i,e[2]),e[3]=kl(o,e[3])}function wy(e,t,n,r,i,o){return t=kl(kl(t,e),kl(r,o)),kl(t<<i|t>>>32-i,n)}function si(e,t,n,r,i,o,a){return wy(t&n|~t&r,e,t,i,o,a)}function li(e,t,n,r,i,o,a){return wy(t&r|n&~r,e,t,i,o,a)}function ci(e,t,n,r,i,o,a){return wy(t^n^r,e,t,i,o,a)}function ui(e,t,n,r,i,o,a){return wy(n^(t|~r),e,t,i,o,a)}function l6(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)tb(r,qU(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(tb(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,tb(r,i),r}function qU(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var rk="0123456789abcdef".split("");function HU(e){for(var t="",n=0;n<4;n++)t+=rk[e>>8*n+4&15]+rk[e>>8*n&15];return t}function VU(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function K_(e){return l6(e).map(VU).join("")}var WU=function(e){for(var t=0;t<e.length;t++)e[t]=HU(e[t]);return e.join("")}(l6("hello"))!="5d41402abc4b2a76b9719d911017c592";function kl(e,t){if(WU){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Y_(e,t){var n,r,i,o;if(e!==n){for(var a=(i=e,o=1+(256/e.length|0),new Array(o+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var u=s[l];c=(c+u+a.charCodeAt(l))%256,s[l]=s[c],s[c]=u}n=e,r=s}else s=r;var d=t.length,h=0,f=0,m="";for(l=0;l<d;l++)f=(f+(u=s[h=(h+1)%256]))%256,s[h]=s[f],s[f]=u,a=s[(s[h]+s[f])%256],m+=String.fromCharCode(t.charCodeAt(l)^a);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ik={print:4,modify:8,copy:16,"annot-forms":32};function pd(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(s){if(ik.perm!==void 0)throw new Error("Invalid permission: "+s);i+=ik[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=K_(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Y_(this.encryptionKey,this.padding)}function md(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function ok(e){if(cn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var o=Math.random().toString(35);return t[n][o]=[r,!!i],o},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[n]){var a=t[n][o];try{a[0].apply(e,r)}catch(s){St.console&&hn.error("jsPDF PubSub Error",s.message,s)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Av(e){if(!(this instanceof Av))return new Av(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function c6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Kc(e,t,n,r,i){if(!(this instanceof Kc))return new Kc(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,c6.call(this,r,i)}function Pd(e,t,n,r,i){if(!(this instanceof Pd))return new Pd(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,c6.call(this,r,i)}function ut(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],a=[],s=1,l=16,c="S",u=null;cn(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,o=e.compress||e.compressPdf||o,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),s=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),a=e.filters||(o===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=e.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=ok;var m="1.3",v=f.__private__.getPdfVersion=function(){return m};f.__private__.setPdfVersion=function(S){m=S};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return b};var y=f.__private__.getPageFormat=function(S){return b[S]};i=i||"a4";var x="compat",_="advanced",w=x;function R(){this.saveGraphicsState(),U(new vt(_t,0,0,-_t,0,xc()*_t).toString()+" cm"),this.setFontSize(this.getFontSize()/_t),c="n",w=_}function I(){this.restoreGraphicsState(),c="S",w=x}var q=f.__private__.combineFontStyleAndFontWeight=function(S,F){if(S=="bold"&&F=="normal"||S=="bold"&&F==400||S=="normal"&&F=="italic"||S=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(S=F==400||F==="normal"?S==="italic"?"italic":"normal":F!=700&&F!=="bold"||S!=="normal"?(F==700?"bold":F)+""+S:"bold"),S};f.advancedAPI=function(S){var F=w===x;return F&&R.call(this),typeof S!="function"||(S(this),F&&I.call(this)),this},f.compatAPI=function(S){var F=w===_;return F&&I.call(this),typeof S!="function"||(S(this),F&&R.call(this)),this},f.isAdvancedAPI=function(){return w===_};var T,D=function(S){if(w!==_)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=f.roundToPrecision=f.__private__.roundToPrecision=function(S,F){var ie=t||F;if(isNaN(S)||isNaN(ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(ie).replace(/0+$/,"")};T=f.hpf=f.__private__.hpf=typeof l=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return M(S,l)}:l==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return M(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return M(S,16)};var C=f.f2=f.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return M(S,2)},j=f.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return M(S,3)},z=f.scale=f.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return w===x?S*_t:w===_?S:void 0},Q=function(S){return z(function(F){return w===x?xc()-F:w===_?F:void 0}(S))};f.__private__.setPrecision=f.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(t=parseInt(S,10))};var me,pe="00000000000000000000000000000000",ue=f.__private__.getFileId=function(){return pe},te=f.__private__.setFileId=function(S){return pe=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():pe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(_r=new pd(u.userPermissions,u.userPassword,u.ownerPassword,pe)),pe};f.setFileId=function(S){return te(S),this},f.getFileId=function(){return ue()};var ae=f.__private__.convertDateToPDFDate=function(S){var F=S.getTimezoneOffset(),ie=F<0?"+":"-",ce=Math.floor(Math.abs(F/60)),xe=Math.abs(F%60),Oe=[ie,K(ce),"'",K(xe),"'"].join("");return["D:",S.getFullYear(),K(S.getMonth()+1),K(S.getDate()),K(S.getHours()),K(S.getMinutes()),K(S.getSeconds()),Oe].join("")},ye=f.__private__.convertPDFDateToDate=function(S){var F=parseInt(S.substr(2,4),10),ie=parseInt(S.substr(6,2),10)-1,ce=parseInt(S.substr(8,2),10),xe=parseInt(S.substr(10,2),10),Oe=parseInt(S.substr(12,2),10),je=parseInt(S.substr(14,2),10);return new Date(F,ie,ce,xe,Oe,je,0)},we=f.__private__.setCreationDate=function(S){var F;if(S===void 0&&(S=new Date),S instanceof Date)F=ae(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=S}return me=F},L=f.__private__.getCreationDate=function(S){var F=me;return S==="jsDate"&&(F=ye(me)),F};f.setCreationDate=function(S){return we(S),this},f.getCreationDate=function(S){return L(S)};var G,K=f.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},ee=f.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},O=0,N=[],k=[],V=0,J=[],se=[],ke=!1,Ae=k;f.__private__.setCustomOutputDestination=function(S){ke=!0,Ae=S};var Ie=function(S){ke||(Ae=S)};f.__private__.resetCustomOutputDestination=function(){ke=!1,Ae=k};var U=f.__private__.out=function(S){return S=S.toString(),V+=S.length+1,Ae.push(S),Ae},ge=f.__private__.write=function(S){return U(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},Pe=f.__private__.getArrayBuffer=function(S){for(var F=S.length,ie=new ArrayBuffer(F),ce=new Uint8Array(ie);F--;)ce[F]=S.charCodeAt(F);return ie},oe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return oe};var Z=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(S){return Z=w===_?S/_t:S,this};var de,he=f.__private__.getFontSize=f.getFontSize=function(){return w===x?Z:Z*_t},Ce=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(S){return Ce=S,this},f.__private__.getR2L=f.getR2L=function(){return Ce};var De,Te=f.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))de=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');de=S}else de=parseInt(S,10)};f.__private__.getZoomMode=function(){return de};var Ge,tt=f.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');De=S};f.__private__.getPageMode=function(){return De};var At=f.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');Ge=S};f.__private__.getLayoutMode=function(){return Ge},f.__private__.setDisplayMode=f.setDisplayMode=function(S,F,ie){return Te(S),At(F),tt(ie),this};var kt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(S){if(Object.keys(kt).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return kt[S]},f.__private__.getDocumentProperties=function(){return kt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(S){for(var F in kt)kt.hasOwnProperty(F)&&S[F]&&(kt[F]=S[F]);return this},f.__private__.setDocumentProperty=function(S,F){if(Object.keys(kt).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return kt[S]=F};var Ke,_t,nt,pn,Ft,rt={},Xe={},Yt=[],dt={},mn={},wt={},Ot={},Tn=null,qt=0,gt=[],tn=new ok(f),pc=e.hotfixes||[],ri={},Ka={},va=[],vt=function S(F,ie,ce,xe,Oe,je){if(!(this instanceof S))return new S(F,ie,ce,xe,Oe,je);isNaN(F)&&(F=1),isNaN(ie)&&(ie=0),isNaN(ce)&&(ce=0),isNaN(xe)&&(xe=1),isNaN(Oe)&&(Oe=0),isNaN(je)&&(je=0),this._matrix=[F,ie,ce,xe,Oe,je]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(S)},vt.prototype.multiply=function(S){var F=S.sx*this.sx+S.shy*this.shx,ie=S.sx*this.shy+S.shy*this.sy,ce=S.shx*this.sx+S.sy*this.shx,xe=S.shx*this.shy+S.sy*this.sy,Oe=S.tx*this.sx+S.ty*this.shx+this.tx,je=S.tx*this.shy+S.ty*this.sy+this.ty;return new vt(F,ie,ce,xe,Oe,je)},vt.prototype.decompose=function(){var S=this.sx,F=this.shy,ie=this.shx,ce=this.sy,xe=this.tx,Oe=this.ty,je=Math.sqrt(S*S+F*F),et=(S/=je)*ie+(F/=je)*ce;ie-=S*et,ce-=F*et;var st=Math.sqrt(ie*ie+ce*ce);return et/=st,S*(ce/=st)<F*(ie/=st)&&(S=-S,F=-F,et=-et,je=-je),{scale:new vt(je,0,0,st,0,0),translate:new vt(1,0,0,1,xe,Oe),rotate:new vt(S,F,-F,S,0,0),skew:new vt(1,0,et,1,0,0)}},vt.prototype.toString=function(S){return this.join(" ")},vt.prototype.inversed=function(){var S=this.sx,F=this.shy,ie=this.shx,ce=this.sy,xe=this.tx,Oe=this.ty,je=1/(S*ce-F*ie),et=ce*je,st=-F*je,Nt=-ie*je,It=S*je;return new vt(et,st,Nt,It,-et*xe-Nt*Oe,-st*xe-It*Oe)},vt.prototype.applyToPoint=function(S){var F=S.x*this.sx+S.y*this.shx+this.tx,ie=S.x*this.shy+S.y*this.sy+this.ty;return new ts(F,ie)},vt.prototype.applyToRectangle=function(S){var F=this.applyToPoint(S),ie=this.applyToPoint(new ts(S.x+S.w,S.y+S.h));return new Bf(F.x,F.y,ie.x-F.x,ie.y-F.y)},vt.prototype.clone=function(){var S=this.sx,F=this.shy,ie=this.shx,ce=this.sy,xe=this.tx,Oe=this.ty;return new vt(S,F,ie,ce,xe,Oe)},f.Matrix=vt;var Ya=f.matrixMult=function(S,F){return F.multiply(S)},Ja=new vt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Ja;var mo=function(S,F){if(!mn[S]){var ie=(F instanceof Kc?"Sh":"P")+(Object.keys(dt).length+1).toString(10);F.id=ie,mn[S]=ie,dt[ie]=F,tn.publish("addPattern",F)}};f.ShadingPattern=Kc,f.TilingPattern=Pd,f.addShadingPattern=function(S,F){return D("addShadingPattern()"),mo(S,F),this},f.beginTilingPattern=function(S){D("beginTilingPattern()"),Ff(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},f.endTilingPattern=function(S,F){D("endTilingPattern()"),F.stream=se[G].join(`
`),mo(S,F),tn.publish("endTilingPattern",F),va.pop().restore()};var go,$n=f.__private__.newObject=function(){var S=Lr();return $r(S,!0),S},Lr=f.__private__.newObjectDeferred=function(){return O++,N[O]=function(){return V},O},$r=function(S,F){return F=typeof F=="boolean"&&F,N[S]=V,F&&U(S+" 0 obj"),S},mc=f.__private__.newAdditionalObject=function(){var S={objId:Lr(),content:""};return J.push(S),S},Vs=Lr(),Go=Lr(),ya=f.__private__.decodeColorString=function(S){var F=S.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length!==5||F[4]!=="k"&&F[4]!=="K"||(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var ie=parseFloat(F[0]);F=[ie,ie,ie,"r"]}for(var ce="#",xe=0;xe<3;xe++)ce+=("0"+Math.floor(255*parseFloat(F[xe])).toString(16)).slice(-2);return ce},qo=f.__private__.encodeColorString=function(S){var F;typeof S=="string"&&(S={ch1:S});var ie=S.ch1,ce=S.ch2,xe=S.ch3,Oe=S.ch4,je=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ie=="string"&&ie.charAt(0)!=="#"){var et=new s6(ie);if(et.ok)ie=et.toHex();else if(!/^\d*\.?\d*$/.test(ie))throw new Error('Invalid color "'+ie+'" passed to jsPDF.encodeColorString.')}if(typeof ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ie)&&(ie="#"+ie[1]+ie[1]+ie[2]+ie[2]+ie[3]+ie[3]),typeof ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ie)){var st=parseInt(ie.substr(1),16);ie=st>>16&255,ce=st>>8&255,xe=255&st}if(ce===void 0||Oe===void 0&&ie===ce&&ce===xe)F=typeof ie=="string"?ie+" "+je[0]:S.precision===2?C(ie/255)+" "+je[0]:j(ie/255)+" "+je[0];else if(Oe===void 0||cn(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return["1.","1.","1.",je[1]].join(" ");F=typeof ie=="string"?[ie,ce,xe,je[1]].join(" "):S.precision===2?[C(ie/255),C(ce/255),C(xe/255),je[1]].join(" "):[j(ie/255),j(ce/255),j(xe/255),je[1]].join(" ")}else F=typeof ie=="string"?[ie,ce,xe,Oe,je[2]].join(" "):S.precision===2?[C(ie),C(ce),C(xe),C(Oe),je[2]].join(" "):[j(ie),j(ce),j(xe),j(Oe),je[2]].join(" ");return F},Ho=f.__private__.getFilters=function(){return a},vo=f.__private__.putStream=function(S){var F=(S=S||{}).data||"",ie=S.filters||Ho(),ce=S.alreadyAppliedFilters||[],xe=S.addLength1||!1,Oe=F.length,je=S.objectId,et=function(wr){return wr};if(u!==null&&je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(et=_r.encryptor(je,0));var st={};ie===!0&&(ie=["FlateEncode"]);var Nt=S.additionalKeyValues||[],It=(st=ut.API.processDataByFilters!==void 0?ut.API.processDataByFilters(F,ie):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(ce)?ce.join(" "):ce.toString());if(st.data.length!==0&&(Nt.push({key:"Length",value:st.data.length}),xe===!0&&Nt.push({key:"Length1",value:Oe})),It.length!=0)if(It.split("/").length-1==1)Nt.push({key:"Filter",value:It});else{Nt.push({key:"Filter",value:"["+It+"]"});for(var Xt=0;Xt<Nt.length;Xt+=1)if(Nt[Xt].key==="DecodeParms"){for(var Mn=[],hr=0;hr<st.reverseChain.split("/").length-1;hr+=1)Mn.push("null");Mn.push(Nt[Xt].value),Nt[Xt].value="["+Mn.join(" ")+"]"}}U("<<");for(var gn=0;gn<Nt.length;gn++)U("/"+Nt[gn].key+" "+Nt[gn].value);U(">>"),st.data.length!==0&&(U("stream"),U(et(st.data)),U("endstream"))},gc=f.__private__.putPage=function(S){var F=S.number,ie=S.data,ce=S.objId,xe=S.contentsObjId;$r(ce,!0),U("<</Type /Page"),U("/Parent "+S.rootDictionaryObjId+" 0 R"),U("/Resources "+S.resourceDictionaryObjId+" 0 R"),U("/MediaBox ["+parseFloat(T(S.mediaBox.bottomLeftX))+" "+parseFloat(T(S.mediaBox.bottomLeftY))+" "+T(S.mediaBox.topRightX)+" "+T(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&U("/CropBox ["+T(S.cropBox.bottomLeftX)+" "+T(S.cropBox.bottomLeftY)+" "+T(S.cropBox.topRightX)+" "+T(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&U("/BleedBox ["+T(S.bleedBox.bottomLeftX)+" "+T(S.bleedBox.bottomLeftY)+" "+T(S.bleedBox.topRightX)+" "+T(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&U("/TrimBox ["+T(S.trimBox.bottomLeftX)+" "+T(S.trimBox.bottomLeftY)+" "+T(S.trimBox.topRightX)+" "+T(S.trimBox.topRightY)+"]"),S.artBox!==null&&U("/ArtBox ["+T(S.artBox.bottomLeftX)+" "+T(S.artBox.bottomLeftY)+" "+T(S.artBox.topRightX)+" "+T(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&U("/UserUnit "+S.userUnit),tn.publish("putPage",{objId:ce,pageContext:gt[F],pageNumber:F,page:ie}),U("/Contents "+xe+" 0 R"),U(">>"),U("endobj");var Oe=ie.join(`
`);return w===_&&(Oe+=`
Q`),$r(xe,!0),vo({data:Oe,filters:Ho(),objectId:xe}),U("endobj"),ce},ba=f.__private__.putPages=function(){var S,F,ie=[];for(S=1;S<=qt;S++)gt[S].objId=Lr(),gt[S].contentsObjId=Lr();for(S=1;S<=qt;S++)ie.push(gc({number:S,data:se[S],objId:gt[S].objId,contentsObjId:gt[S].contentsObjId,mediaBox:gt[S].mediaBox,cropBox:gt[S].cropBox,bleedBox:gt[S].bleedBox,trimBox:gt[S].trimBox,artBox:gt[S].artBox,userUnit:gt[S].userUnit,rootDictionaryObjId:Vs,resourceDictionaryObjId:Go}));$r(Vs,!0),U("<</Type /Pages");var ce="/Kids [";for(F=0;F<qt;F++)ce+=ie[F]+" 0 R ";U(ce+"]"),U("/Count "+qt),U(">>"),U("endobj"),tn.publish("postPutPages")},vc=function(S){tn.publish("putFont",{font:S,out:U,newObject:$n,putStream:vo}),S.isAlreadyPutted!==!0&&(S.objectNumber=$n(),U("<<"),U("/Type /Font"),U("/BaseFont /"+md(S.postScriptName)),U("/Subtype /Type1"),typeof S.encoding=="string"&&U("/Encoding /"+S.encoding),U("/FirstChar 32"),U("/LastChar 255"),U(">>"),U("endobj"))},Ou=function(S){S.objectNumber=$n();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[T(S.x),T(S.y),T(S.x+S.width),T(S.y+S.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var ie=S.pages[1].join(`
`);vo({data:ie,additionalKeyValues:F,objectId:S.objectNumber}),U("endobj")},Mu=function(S,F){F||(F=21);var ie=$n(),ce=function(je,et){var st,Nt=[],It=1/(et-1);for(st=0;st<1;st+=It)Nt.push(st);if(Nt.push(1),je[0].offset!=0){var Xt={offset:0,color:je[0].color};je.unshift(Xt)}if(je[je.length-1].offset!=1){var Mn={offset:1,color:je[je.length-1].color};je.push(Mn)}for(var hr="",gn=0,wr=0;wr<Nt.length;wr++){for(st=Nt[wr];st>je[gn+1].offset;)gn++;var pr=je[gn].offset,Ur=(st-pr)/(je[gn+1].offset-pr),is=je[gn].color,Wo=je[gn+1].color;hr+=ee(Math.round((1-Ur)*is[0]+Ur*Wo[0]).toString(16))+ee(Math.round((1-Ur)*is[1]+Ur*Wo[1]).toString(16))+ee(Math.round((1-Ur)*is[2]+Ur*Wo[2]).toString(16))}return hr.trim()}(S.colors,F),xe=[];xe.push({key:"FunctionType",value:"0"}),xe.push({key:"Domain",value:"[0.0 1.0]"}),xe.push({key:"Size",value:"["+F+"]"}),xe.push({key:"BitsPerSample",value:"8"}),xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vo({data:ce,additionalKeyValues:xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ie}),U("endobj"),S.objectNumber=$n(),U("<< /ShadingType "+S.type),U("/ColorSpace /DeviceRGB");var Oe="/Coords ["+T(parseFloat(S.coords[0]))+" "+T(parseFloat(S.coords[1]))+" ";S.type===2?Oe+=T(parseFloat(S.coords[2]))+" "+T(parseFloat(S.coords[3])):Oe+=T(parseFloat(S.coords[2]))+" "+T(parseFloat(S.coords[3]))+" "+T(parseFloat(S.coords[4]))+" "+T(parseFloat(S.coords[5])),U(Oe+="]"),S.matrix&&U("/Matrix ["+S.matrix.toString()+"]"),U("/Function "+ie+" 0 R"),U("/Extend [true true]"),U(">>"),U("endobj")},Iu=function(S,F){var ie=Lr(),ce=$n();F.push({resourcesOid:ie,objectOid:ce}),S.objectNumber=ce;var xe=[];xe.push({key:"Type",value:"/Pattern"}),xe.push({key:"PatternType",value:"1"}),xe.push({key:"PaintType",value:"1"}),xe.push({key:"TilingType",value:"1"}),xe.push({key:"BBox",value:"["+S.boundingBox.map(T).join(" ")+"]"}),xe.push({key:"XStep",value:T(S.xStep)}),xe.push({key:"YStep",value:T(S.yStep)}),xe.push({key:"Resources",value:ie+" 0 R"}),S.matrix&&xe.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),vo({data:S.stream,additionalKeyValues:xe,objectId:S.objectNumber}),U("endobj")},A1=function(S){for(var F in S.objectNumber=$n(),U("<<"),S)switch(F){case"opacity":U("/ca "+C(S[F]));break;case"stroke-opacity":U("/CA "+C(S[F]))}U(">>"),U("endobj")},Tf=function(S){$r(S.resourcesOid,!0),U("<<"),U("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var F in U("/Font <<"),rt)rt.hasOwnProperty(F)&&(d===!1||d===!0&&h.hasOwnProperty(F))&&U("/"+F+" "+rt[F].objectNumber+" 0 R");U(">>")}(),function(){if(Object.keys(dt).length>0){for(var F in U("/Shading <<"),dt)dt.hasOwnProperty(F)&&dt[F]instanceof Kc&&dt[F].objectNumber>=0&&U("/"+F+" "+dt[F].objectNumber+" 0 R");tn.publish("putShadingPatternDict"),U(">>")}}(),function(F){if(Object.keys(dt).length>0){for(var ie in U("/Pattern <<"),dt)dt.hasOwnProperty(ie)&&dt[ie]instanceof f.TilingPattern&&dt[ie].objectNumber>=0&&dt[ie].objectNumber<F&&U("/"+ie+" "+dt[ie].objectNumber+" 0 R");tn.publish("putTilingPatternDict"),U(">>")}}(S.objectOid),function(){if(Object.keys(wt).length>0){var F;for(F in U("/ExtGState <<"),wt)wt.hasOwnProperty(F)&&wt[F].objectNumber>=0&&U("/"+F+" "+wt[F].objectNumber+" 0 R");tn.publish("putGStateDict"),U(">>")}}(),function(){for(var F in U("/XObject <<"),ri)ri.hasOwnProperty(F)&&ri[F].objectNumber>=0&&U("/"+F+" "+ri[F].objectNumber+" 0 R");tn.publish("putXobjectDict"),U(">>")}(),U(">>"),U("endobj")},wm=function(S){Xe[S.fontName]=Xe[S.fontName]||{},Xe[S.fontName][S.fontStyle]=S.id},xm=function(S,F,ie,ce,xe){var Oe={id:"F"+(Object.keys(rt).length+1).toString(10),postScriptName:S,fontName:F,fontStyle:ie,encoding:ce,isStandardFont:xe||!1,metadata:{}};return tn.publish("addFont",{font:Oe,instance:this}),rt[Oe.id]=Oe,wm(Oe),Oe.id},yo=f.__private__.pdfEscape=f.pdfEscape=function(S,F){return function(ie,ce){var xe,Oe,je,et,st,Nt,It,Xt,Mn;if(je=(ce=ce||{}).sourceEncoding||"Unicode",st=ce.outputEncoding,(ce.autoencode||st)&&rt[Ke].metadata&&rt[Ke].metadata[je]&&rt[Ke].metadata[je].encoding&&(et=rt[Ke].metadata[je].encoding,!st&&rt[Ke].encoding&&(st=rt[Ke].encoding),!st&&et.codePages&&(st=et.codePages[0]),typeof st=="string"&&(st=et[st]),st)){for(It=!1,Nt=[],xe=0,Oe=ie.length;xe<Oe;xe++)(Xt=st[ie.charCodeAt(xe)])?Nt.push(String.fromCharCode(Xt)):Nt.push(ie[xe]),Nt[xe].charCodeAt(0)>>8&&(It=!0);ie=Nt.join("")}for(xe=ie.length;It===void 0&&xe!==0;)ie.charCodeAt(xe-1)>>8&&(It=!0),xe--;if(!It)return ie;for(Nt=ce.noBOM?[]:[254,255],xe=0,Oe=ie.length;xe<Oe;xe++){if((Mn=(Xt=ie.charCodeAt(xe))>>8)>>8)throw new Error("Character at position "+xe+" of string '"+ie+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nt.push(Mn),Nt.push(Xt-(Mn<<8))}return String.fromCharCode.apply(void 0,Nt)}(S,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rf=f.__private__.beginPage=function(S){se[++qt]=[],gt[qt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Sm(qt),Ie(se[G])},Em=function(S,F){var ie,ce,xe;switch(n=F||n,typeof S=="string"&&(ie=y(S.toLowerCase()),Array.isArray(ie)&&(ce=ie[0],xe=ie[1])),Array.isArray(S)&&(ce=S[0]*_t,xe=S[1]*_t),isNaN(ce)&&(ce=i[0],xe=i[1]),(ce>14400||xe>14400)&&(hn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ce=Math.min(14400,ce),xe=Math.min(14400,xe)),i=[ce,xe],n.substr(0,1)){case"l":xe>ce&&(i=[xe,ce]);break;case"p":ce>xe&&(i=[xe,ce])}Rf(i),Ct(Mf),U(Fu),Df!==0&&U(Df+" J"),jf!==0&&U(jf+" j"),tn.publish("addPage",{pageNumber:qt})},Lf=function(S){S>0&&S<=qt&&(se.splice(S,1),gt.splice(S,1),qt--,G>qt&&(G=qt),this.setPage(G))},Sm=function(S){S>0&&S<=qt&&(G=S)},Nm=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return se.length-1},Am=function(S,F,ie){var ce,xe=void 0;return ie=ie||{},S=S!==void 0?S:rt[Ke].fontName,F=F!==void 0?F:rt[Ke].fontStyle,ce=S.toLowerCase(),Xe[ce]!==void 0&&Xe[ce][F]!==void 0?xe=Xe[ce][F]:Xe[S]!==void 0&&Xe[S][F]!==void 0?xe=Xe[S][F]:ie.disableWarning===!1&&hn.warn("Unable to look up font label for font '"+S+"', '"+F+"'. Refer to getFontList() for available fonts."),xe||ie.noFallback||(xe=Xe.times[F])==null&&(xe=Xe.times.normal),xe},_a=f.__private__.putInfo=function(){var S=$n(),F=function(ce){return ce};for(var ie in u!==null&&(F=_r.encryptor(S,0)),U("<<"),U("/Producer ("+yo(F("jsPDF "+ut.version))+")"),kt)kt.hasOwnProperty(ie)&&kt[ie]&&U("/"+ie.substr(0,1).toUpperCase()+ie.substr(1)+" ("+yo(F(kt[ie]))+")");U("/CreationDate ("+yo(F(me))+")"),U(">>"),U("endobj")},Du=f.__private__.putCatalog=function(S){var F=(S=S||{}).rootDictionaryObjId||Vs;switch($n(),U("<<"),U("/Type /Catalog"),U("/Pages "+F+" 0 R"),de||(de="fullwidth"),de){case"fullwidth":U("/OpenAction [3 0 R /FitH null]");break;case"fullheight":U("/OpenAction [3 0 R /FitV null]");break;case"fullpage":U("/OpenAction [3 0 R /Fit]");break;case"original":U("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ie=""+de;ie.substr(ie.length-1)==="%"&&(de=parseInt(de)/100),typeof de=="number"&&U("/OpenAction [3 0 R /XYZ null null "+C(de)+"]")}switch(Ge||(Ge="continuous"),Ge){case"continuous":U("/PageLayout /OneColumn");break;case"single":U("/PageLayout /SinglePage");break;case"two":case"twoleft":U("/PageLayout /TwoColumnLeft");break;case"tworight":U("/PageLayout /TwoColumnRight")}De&&U("/PageMode /"+De),tn.publish("putCatalog"),U(">>"),U("endobj")},k1=f.__private__.putTrailer=function(){U("trailer"),U("<<"),U("/Size "+(O+1)),U("/Root "+O+" 0 R"),U("/Info "+(O-1)+" 0 R"),u!==null&&U("/Encrypt "+_r.oid+" 0 R"),U("/ID [ <"+pe+"> <"+pe+"> ]"),U(">>")},fr=f.__private__.putHeader=function(){U("%PDF-"+m),U("%")},km=f.__private__.putXRef=function(){var S="0000000000";U("xref"),U("0 "+(O+1)),U("0000000000 65535 f ");for(var F=1;F<=O;F++)typeof N[F]=="function"?U((S+N[F]()).slice(-10)+" 00000 n "):N[F]!==void 0?U((S+N[F]).slice(-10)+" 00000 n "):U("0000000000 00000 n ")},wa=f.__private__.buildDocument=function(){var S;O=0,V=0,k=[],N=[],J=[],Vs=Lr(),Go=Lr(),Ie(k),tn.publish("buildDocument"),fr(),ba(),function(){tn.publish("putAdditionalObjects");for(var ie=0;ie<J.length;ie++){var ce=J[ie];$r(ce.objId,!0),U(ce.content),U("endobj")}tn.publish("postPutAdditionalObjects")}(),S=[],function(){for(var ie in rt)rt.hasOwnProperty(ie)&&(d===!1||d===!0&&h.hasOwnProperty(ie))&&vc(rt[ie])}(),function(){var ie;for(ie in wt)wt.hasOwnProperty(ie)&&A1(wt[ie])}(),function(){for(var ie in ri)ri.hasOwnProperty(ie)&&Ou(ri[ie])}(),function(ie){var ce;for(ce in dt)dt.hasOwnProperty(ce)&&(dt[ce]instanceof Kc?Mu(dt[ce]):dt[ce]instanceof Pd&&Iu(dt[ce],ie))}(S),tn.publish("putResources"),S.forEach(Tf),Tf({resourcesOid:Go,objectOid:Number.MAX_SAFE_INTEGER}),tn.publish("postPutResources"),u!==null&&(_r.oid=$n(),U("<<"),U("/Filter /Standard"),U("/V "+_r.v),U("/R "+_r.r),U("/U <"+_r.toHexString(_r.U)+">"),U("/O <"+_r.toHexString(_r.O)+">"),U("/P "+_r.P),U(">>"),U("endobj")),_a(),Du();var F=V;return km(),k1(),U("startxref"),U(""+F),U("%%EOF"),Ie(se[G]),k.join(`
`)},ju=f.__private__.getBlob=function(S){return new Blob([Pe(S)],{type:"application/pdf"})},Cm=f.output=f.__private__.output=(go=function(S,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",S){case void 0:return wa();case"save":f.save(F.filename);break;case"arraybuffer":return Pe(wa());case"blob":return ju(wa());case"bloburi":case"bloburl":if(St.URL!==void 0&&typeof St.URL.createObjectURL=="function")return St.URL&&St.URL.createObjectURL(ju(wa()))||void 0;hn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ie="",ce=wa();try{ie=nk(ce)}catch{ie=nk(unescape(encodeURIComponent(ce)))}return"data:application/pdf;filename="+F.filename+";base64,"+ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(St)==="[object Window]"){var xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(xe=F.pdfObjectUrl,Oe="");var je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xe+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",et=St.open();return et!==null&&et.document.write(je),et}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(St)==="[object Window]"){var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',Nt=St.open();if(Nt!==null){Nt.document.write(st);var It=this;Nt.document.documentElement.querySelector("#pdfViewer").onload=function(){Nt.document.title=F.filename,Nt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(It.output("bloburl"))}}return Nt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(St)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',Mn=St.open();if(Mn!==null&&(Mn.document.write(Xt),Mn.document.title=F.filename),Mn||typeof safari>"u")return Mn;break;case"datauri":case"dataurl":return St.document.location.href=this.output("datauristring",F);default:return null}},go.foo=function(){try{return go.apply(this,arguments)}catch(ie){var S=ie.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var F="Error in function "+S.split(`
`)[0].split("<")[0]+": "+ie.message;if(!St.console)throw new Error(F);St.console.error(F,ie),St.alert&&alert(F)}},go.foo.bar=go,go.foo),bo=function(S){return Array.isArray(pc)===!0&&pc.indexOf(S)>-1};switch(r){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=bo("px_scaling")==1?.75:96/72;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);_t=r}var _r=null;we(),te();var Xa=f.__private__.getPageInfo=f.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gt[S].objId,pageNumber:S,pageContext:gt[S]}},Pm=f.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in gt)if(gt[F].objId===S)break;return Xa(F)},C1=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:gt[G].objId,pageNumber:G,pageContext:gt[G]}};f.addPage=function(){return Em.apply(this,arguments),this},f.setPage=function(){return Sm.apply(this,arguments),Ie.call(this,se[G]),this},f.insertPage=function(S){return this.addPage(),this.movePage(G,S),this},f.movePage=function(S,F){var ie,ce;if(S>F){ie=se[S],ce=gt[S];for(var xe=S;xe>F;xe--)se[xe]=se[xe-1],gt[xe]=gt[xe-1];se[F]=ie,gt[F]=ce,this.setPage(F)}else if(S<F){ie=se[S],ce=gt[S];for(var Oe=S;Oe<F;Oe++)se[Oe]=se[Oe+1],gt[Oe]=gt[Oe+1];se[F]=ie,gt[F]=ce,this.setPage(F)}return this},f.deletePage=function(){return Lf.apply(this,arguments),this},f.__private__.text=f.text=function(S,F,ie,ce,xe){var Oe,je,et,st,Nt,It,Xt,Mn,hr,gn=(ce=ce||{}).scope||this;if(typeof S=="number"&&typeof F=="number"&&(typeof ie=="string"||Array.isArray(ie))){var wr=ie;ie=F,F=S,S=wr}if(arguments[3]instanceof vt==0?(et=arguments[4],st=arguments[5],cn(Xt=arguments[3])==="object"&&Xt!==null||(typeof et=="string"&&(st=et,et=null),typeof Xt=="string"&&(st=Xt,Xt=null),typeof Xt=="number"&&(et=Xt,Xt=null),ce={flags:Xt,angle:et,align:st})):(D("The transform parameter of text() with a Matrix value"),hr=xe),isNaN(F)||isNaN(ie)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return gn;var pr,Ur="",is=typeof ce.lineHeightFactor=="number"?ce.lineHeightFactor:bc,Wo=gn.internal.scaleFactor;function os(nn){return nn=nn.split("	").join(Array(ce.TabLen||9).join(" ")),yo(nn,Xt)}function Uf(nn){for(var dn,Qn=nn.concat(),xr=[],ls=Qn.length;ls--;)typeof(dn=Qn.shift())=="string"?xr.push(dn):Array.isArray(nn)&&(dn.length===1||dn[1]===void 0&&dn[2]===void 0)?xr.push(dn[0]):xr.push([dn[0],dn[1],dn[2]]);return xr}function Uu(nn,dn){var Qn;if(typeof nn=="string")Qn=dn(nn)[0];else if(Array.isArray(nn)){for(var xr,ls,Xf=nn.concat(),qu=[],$m=Xf.length;$m--;)typeof(xr=Xf.shift())=="string"?qu.push(dn(xr)[0]):Array.isArray(xr)&&typeof xr[0]=="string"&&(ls=dn(xr[0],xr[1],xr[2]),qu.push([ls[0],ls[1],ls[2]]));Qn=qu}return Qn}var Ws=!1,Ec=!0;if(typeof S=="string")Ws=!0;else if(Array.isArray(S)){var Sc=S.concat();je=[];for(var Ks,zr=Sc.length;zr--;)(typeof(Ks=Sc.shift())!="string"||Array.isArray(Ks)&&typeof Ks[0]!="string")&&(Ec=!1);Ws=Ec}if(Ws===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var Nc=Z/gn.internal.scaleFactor,Ac=Nc*(is-1);switch(ce.baseline){case"bottom":ie-=Ac;break;case"top":ie+=Nc-Ac;break;case"hanging":ie+=Nc-2*Ac;break;case"middle":ie+=Nc/2-Ac}if((It=ce.maxWidth||0)>0&&(typeof S=="string"?S=gn.splitTextToSize(S,It):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(nn,dn){return nn.concat(gn.splitTextToSize(dn,It))},[]))),Oe={text:S,x:F,y:ie,options:ce,mutex:{pdfEscape:yo,activeFontKey:Ke,fonts:rt,activeFontSize:Z}},tn.publish("preProcessText",Oe),S=Oe.text,et=(ce=Oe.options).angle,hr instanceof vt==0&&et&&typeof et=="number"){et*=Math.PI/180,ce.rotationDirection===0&&(et=-et),w===_&&(et=-et);var zf=Math.cos(et),Gf=Math.sin(et);hr=new vt(zf,Gf,-Gf,zf,0,0)}else et&&et instanceof vt&&(hr=et);w!==_||hr||(hr=Ja),(Nt=ce.charSpace||es)!==void 0&&(Ur+=T(z(Nt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Mn=ce.horizontalScale)!==void 0&&(Ur+=T(100*Mn)+` Tz
`),ce.lang;var gi=-1,as=ce.renderingMode!==void 0?ce.renderingMode:ce.stroke,zu=gn.internal.getCurrentPageInfo().pageContext;switch(as){case 0:case!1:case"fill":gi=0;break;case 1:case!0:case"stroke":gi=1;break;case 2:case"fillThenStroke":gi=2;break;case 3:case"invisible":gi=3;break;case 4:case"fillAndAddForClipping":gi=4;break;case 5:case"strokeAndAddPathForClipping":gi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gi=6;break;case 7:case"addToPathForClipping":gi=7}var Bm=zu.usedRenderingMode!==void 0?zu.usedRenderingMode:-1;gi!==-1?Ur+=gi+` Tr
`:Bm!==-1&&(Ur+=`0 Tr
`),gi!==-1&&(zu.usedRenderingMode=gi),st=ce.align||"left";var _o,kc=Z*is,qf=gn.internal.pageSize.getWidth(),Hf=rt[Ke];Nt=ce.charSpace||es,It=ce.maxWidth||0,Xt=Object.assign({autoencode:!0,noBOM:!0},ce.flags);var Ys=[],Cc=function(nn){return gn.getStringUnitWidth(nn,{font:Hf,charSpace:Nt,fontSize:Z,doKerning:!1})*Z/Wo};if(Object.prototype.toString.call(S)==="[object Array]"){var zi;je=Uf(S),st!=="left"&&(_o=je.map(Cc));var Gi,Js=0;if(st==="right"){F-=_o[0],S=[],zr=je.length;for(var ss=0;ss<zr;ss++)ss===0?(Gi=Za(F),zi=Qa(ie)):(Gi=z(Js-_o[ss]),zi=-kc),S.push([je[ss],Gi,zi]),Js=_o[ss]}else if(st==="center"){F-=_o[0]/2,S=[],zr=je.length;for(var Xs=0;Xs<zr;Xs++)Xs===0?(Gi=Za(F),zi=Qa(ie)):(Gi=z((Js-_o[Xs])/2),zi=-kc),S.push([je[Xs],Gi,zi]),Js=_o[Xs]}else if(st==="left"){S=[],zr=je.length;for(var Vf=0;Vf<zr;Vf++)S.push(je[Vf])}else if(st==="justify"&&Hf.encoding==="Identity-H"){S=[],zr=je.length,It=It!==0?It:qf;for(var Gu=0,Zn=0;Zn<zr;Zn++)if(zi=Zn===0?Qa(ie):-kc,Gi=Zn===0?Za(F):Gu,Zn<zr-1){var Fm=z((It-_o[Zn])/(je[Zn].split(" ").length-1)),Ea=je[Zn].split(" ");S.push([Ea[0]+" ",Gi,zi]),Gu=0;for(var Sa=1;Sa<Ea.length;Sa++){var Wf=(Cc(Ea[Sa-1]+" "+Ea[Sa])-Cc(Ea[Sa]))*Wo+Fm;Sa==Ea.length-1?S.push([Ea[Sa],Wf,0]):S.push([Ea[Sa]+" ",Wf,0]),Gu-=Wf}}else S.push([je[Zn],Gi,zi]);S.push(["",Gu,0])}else{if(st!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],zr=je.length,It=It!==0?It:qf,Zn=0;Zn<zr;Zn++){zi=Zn===0?Qa(ie):-kc,Gi=Zn===0?Za(F):0;var Kf=je[Zn].split(" ").length-1,Yf=Kf>0?(It-_o[Zn])/Kf:0;Zn<zr-1?Ys.push(T(z(Yf))):Ys.push(0),S.push([je[Zn],Gi,zi])}}}(typeof ce.R2L=="boolean"?ce.R2L:Ce)===!0&&(S=Uu(S,function(nn,dn,Qn){return[nn.split("").reverse().join(""),dn,Qn]})),Oe={text:S,x:F,y:ie,options:ce,mutex:{pdfEscape:yo,activeFontKey:Ke,fonts:rt,activeFontSize:Z}},tn.publish("postProcessText",Oe),S=Oe.text,pr=Oe.mutex.isHex||!1;var Jf=rt[Ke].encoding;Jf!=="WinAnsiEncoding"&&Jf!=="StandardEncoding"||(S=Uu(S,function(nn,dn,Qn){return[os(nn),dn,Qn]})),je=Uf(S),S=[];for(var Zs,Qs,el,Pc=Array.isArray(je[0])?1:0,tl="",Tc=function(nn,dn,Qn){var xr="";return Qn instanceof vt?(Qn=typeof ce.angle=="number"?Ya(Qn,new vt(1,0,0,1,nn,dn)):Ya(new vt(1,0,0,1,nn,dn),Qn),w===_&&(Qn=Ya(new vt(1,0,0,-1,0,0),Qn)),xr=Qn.join(" ")+` Tm
`):xr=T(nn)+" "+T(dn)+` Td
`,xr},wo=0;wo<je.length;wo++){switch(tl="",Pc){case 1:el=(pr?"<":"(")+je[wo][0]+(pr?">":")"),Zs=parseFloat(je[wo][1]),Qs=parseFloat(je[wo][2]);break;case 0:el=(pr?"<":"(")+je[wo]+(pr?">":")"),Zs=Za(F),Qs=Qa(ie)}Ys!==void 0&&Ys[wo]!==void 0&&(tl=Ys[wo]+` Tw
`),wo===0?S.push(tl+Tc(Zs,Qs,hr)+el):Pc===0?S.push(tl+el):Pc===1&&S.push(tl+Tc(Zs,Qs,hr)+el)}S=Pc===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Na=`BT
/`;return Na+=Ke+" "+Z+` Tf
`,Na+=T(Z*is)+` TL
`,Na+=_c+`
`,Na+=Ur,Na+=S,U(Na+="ET"),h[Ke]=!0,gn};var P1=f.__private__.clip=f.clip=function(S){return U(S==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return P1("evenodd")},f.__private__.discardPath=f.discardPath=function(){return U("n"),this};var xa=f.__private__.isValidStyle=function(S){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(F=!0),F};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(S){return xa(S)&&(c=S),this};var Tm=f.__private__.getStyle=f.getStyle=function(S){var F=c;switch(S){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=S}return F},Rm=f.close=function(){return U("h"),this};f.stroke=function(){return U("S"),this},f.fill=function(S){return Bu("f",S),this},f.fillEvenOdd=function(S){return Bu("f*",S),this},f.fillStroke=function(S){return Bu("B",S),this},f.fillStrokeEvenOdd=function(S){return Bu("B*",S),this};var Bu=function(S,F){cn(F)==="object"?R1(F,S):U(S)},yc=function(S){S===null||w===_&&S===void 0||(S=Tm(S),U(S))};function T1(S,F,ie,ce,xe){var Oe=new Pd(F||this.boundingBox,ie||this.xStep,ce||this.yStep,this.gState,xe||this.matrix);Oe.stream=this.stream;var je=S+"$$"+this.cloneIndex+++"$$";return mo(je,Oe),Oe}var R1=function(S,F){var ie=mn[S.key],ce=dt[ie];if(ce instanceof Kc)U("q"),U(L1(F)),ce.gState&&f.setGState(ce.gState),U(S.matrix.toString()+" cm"),U("/"+ie+" sh"),U("Q");else if(ce instanceof Pd){var xe=new vt(1,0,0,-1,0,xc());S.matrix&&(xe=xe.multiply(S.matrix||Ja),ie=T1.call(ce,S.key,S.boundingBox,S.xStep,S.yStep,xe).id),U("q"),U("/Pattern cs"),U("/"+ie+" scn"),ce.gState&&f.setGState(ce.gState),U(F),U("Q")}},L1=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Of=f.moveTo=function(S,F){return U(T(z(S))+" "+T(Q(F))+" m"),this},Lm=f.lineTo=function(S,F){return U(T(z(S))+" "+T(Q(F))+" l"),this},Vo=f.curveTo=function(S,F,ie,ce,xe,Oe){return U([T(z(S)),T(Q(F)),T(z(ie)),T(Q(ce)),T(z(xe)),T(Q(Oe)),"c"].join(" ")),this};f.__private__.line=f.line=function(S,F,ie,ce,xe){if(isNaN(S)||isNaN(F)||isNaN(ie)||isNaN(ce)||!xa(xe))throw new Error("Invalid arguments passed to jsPDF.line");return w===x?this.lines([[ie-S,ce-F]],S,F,[1,1],xe||"S"):this.lines([[ie-S,ce-F]],S,F,[1,1]).stroke()},f.__private__.lines=f.lines=function(S,F,ie,ce,xe,Oe){var je,et,st,Nt,It,Xt,Mn,hr,gn,wr,pr,Ur;if(typeof S=="number"&&(Ur=ie,ie=F,F=S,S=Ur),ce=ce||[1,1],Oe=Oe||!1,isNaN(F)||isNaN(ie)||!Array.isArray(S)||!Array.isArray(ce)||!xa(xe)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Of(F,ie),je=ce[0],et=ce[1],Nt=S.length,wr=F,pr=ie,st=0;st<Nt;st++)(It=S[st]).length===2?(wr=It[0]*je+wr,pr=It[1]*et+pr,Lm(wr,pr)):(Xt=It[0]*je+wr,Mn=It[1]*et+pr,hr=It[2]*je+wr,gn=It[3]*et+pr,wr=It[4]*je+wr,pr=It[5]*et+pr,Vo(Xt,Mn,hr,gn,wr,pr));return Oe&&Rm(),yc(xe),this},f.path=function(S){for(var F=0;F<S.length;F++){var ie=S[F],ce=ie.c;switch(ie.op){case"m":Of(ce[0],ce[1]);break;case"l":Lm(ce[0],ce[1]);break;case"c":Vo.apply(this,ce);break;case"h":Rm()}}return this},f.__private__.rect=f.rect=function(S,F,ie,ce,xe){if(isNaN(S)||isNaN(F)||isNaN(ie)||isNaN(ce)||!xa(xe))throw new Error("Invalid arguments passed to jsPDF.rect");return w===x&&(ce=-ce),U([T(z(S)),T(Q(F)),T(z(ie)),T(z(ce)),"re"].join(" ")),yc(xe),this},f.__private__.triangle=f.triangle=function(S,F,ie,ce,xe,Oe,je){if(isNaN(S)||isNaN(F)||isNaN(ie)||isNaN(ce)||isNaN(xe)||isNaN(Oe)||!xa(je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ie-S,ce-F],[xe-ie,Oe-ce],[S-xe,F-Oe]],S,F,[1,1],je,!0),this},f.__private__.roundedRect=f.roundedRect=function(S,F,ie,ce,xe,Oe,je){if(isNaN(S)||isNaN(F)||isNaN(ie)||isNaN(ce)||isNaN(xe)||isNaN(Oe)||!xa(je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var et=4/3*(Math.SQRT2-1);return xe=Math.min(xe,.5*ie),Oe=Math.min(Oe,.5*ce),this.lines([[ie-2*xe,0],[xe*et,0,xe,Oe-Oe*et,xe,Oe],[0,ce-2*Oe],[0,Oe*et,-xe*et,Oe,-xe,Oe],[2*xe-ie,0],[-xe*et,0,-xe,-Oe*et,-xe,-Oe],[0,2*Oe-ce],[0,-Oe*et,xe*et,-Oe,xe,-Oe]],S+xe,F,[1,1],je,!0),this},f.__private__.ellipse=f.ellipse=function(S,F,ie,ce,xe){if(isNaN(S)||isNaN(F)||isNaN(ie)||isNaN(ce)||!xa(xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*ie,je=4/3*(Math.SQRT2-1)*ce;return Of(S+ie,F),Vo(S+ie,F-je,S+Oe,F-ce,S,F-ce),Vo(S-Oe,F-ce,S-ie,F-je,S-ie,F),Vo(S-ie,F+je,S-Oe,F+ce,S,F+ce),Vo(S+Oe,F+ce,S+ie,F+je,S+ie,F),yc(xe),this},f.__private__.circle=f.circle=function(S,F,ie,ce){if(isNaN(S)||isNaN(F)||isNaN(ie)||!xa(ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,F,ie,ie,ce)},f.setFont=function(S,F,ie){return ie&&(F=q(F,ie)),Ke=Am(S,F,{disableWarning:!1}),this};var O1=f.__private__.getFont=f.getFont=function(){return rt[Am.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var S,F,ie={};for(S in Xe)if(Xe.hasOwnProperty(S))for(F in ie[S]=[],Xe[S])Xe[S].hasOwnProperty(F)&&ie[S].push(F);return ie},f.addFont=function(S,F,ie,ce,xe){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?xe=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(ie=q(ie,ce)),xm.call(this,S,F,ie,xe=xe||"Identity-H")};var bc,Mf=e.lineWidth||.200025,M1=f.__private__.getLineWidth=f.getLineWidth=function(){return Mf},Ct=f.__private__.setLineWidth=f.setLineWidth=function(S){return Mf=S,U(T(z(S))+" w"),this};f.__private__.setLineDash=ut.API.setLineDash=ut.API.setLineDashPattern=function(S,F){if(S=S||[],F=F||0,isNaN(F)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(ie){return T(z(ie))}).join(" "),F=T(z(F)),U("["+S+"] "+F+" d"),this};var I1=f.__private__.getLineHeight=f.getLineHeight=function(){return Z*bc};f.__private__.getLineHeight=f.getLineHeight=function(){return Z*bc};var D1=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(bc=S),this},j1=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return bc};D1(e.lineHeight);var Za=f.__private__.getHorizontalCoordinate=function(S){return z(S)},Qa=f.__private__.getVerticalCoordinate=function(S){return w===_?S:gt[G].mediaBox.topRightY-gt[G].mediaBox.bottomLeftY-z(S)},B1=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(S){return T(Za(S))},F1=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(S){return T(Qa(S))},Fu=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ya(Fu)},f.__private__.setStrokeColor=f.setDrawColor=function(S,F,ie,ce){return Fu=qo({ch1:S,ch2:F,ch3:ie,ch4:ce,pdfColorType:"draw",precision:2}),U(Fu),this};var If=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ya(If)},f.__private__.setFillColor=f.setFillColor=function(S,F,ie,ce){return If=qo({ch1:S,ch2:F,ch3:ie,ch4:ce,pdfColorType:"fill",precision:2}),U(If),this};var _c=e.textColor||"0 g",$1=f.__private__.getTextColor=f.getTextColor=function(){return ya(_c)};f.__private__.setTextColor=f.setTextColor=function(S,F,ie,ce){return _c=qo({ch1:S,ch2:F,ch3:ie,ch4:ce,pdfColorType:"text",precision:3}),this};var es=e.charSpace,U1=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(es||0)};f.__private__.setCharSpace=f.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return es=S,this};var Df=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(S){var F=f.CapJoinStyles[S];if(F===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Df=F,U(F+" J"),this};var jf=0;f.__private__.setLineJoin=f.setLineJoin=function(S){var F=f.CapJoinStyles[S];if(F===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return jf=F,U(F+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return U(T(z(S))+" M"),this},f.GState=Av,f.setGState=function(S){(S=typeof S=="string"?wt[Ot[S]]:Om(null,S)).equals(Tn)||(U("/"+S.id+" gs"),Tn=S)};var Om=function(S,F){if(!S||!Ot[S]){var ie=!1;for(var ce in wt)if(wt.hasOwnProperty(ce)&&wt[ce].equals(F)){ie=!0;break}if(ie)F=wt[ce];else{var xe="GS"+(Object.keys(wt).length+1).toString(10);wt[xe]=F,F.id=xe}return S&&(Ot[S]=F.id),tn.publish("addGState",F),F}};f.addGState=function(S,F){return Om(S,F),this},f.saveGraphicsState=function(){return U("q"),Yt.push({key:Ke,size:Z,color:_c}),this},f.restoreGraphicsState=function(){U("Q");var S=Yt.pop();return Ke=S.key,Z=S.size,_c=S.color,Tn=null,this},f.setCurrentTransformationMatrix=function(S){return U(S.toString()+" cm"),this},f.comment=function(S){return U("#"+S),this};var ts=function(S,F){var ie=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ie},set:function(Oe){isNaN(Oe)||(ie=parseFloat(Oe))}});var ce=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ce},set:function(Oe){isNaN(Oe)||(ce=parseFloat(Oe))}});var xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xe},set:function(Oe){xe=Oe.toString()}}),this},Bf=function(S,F,ie,ce){ts.call(this,S,F),this.type="rect";var xe=ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xe},set:function(je){isNaN(je)||(xe=parseFloat(je))}});var Oe=ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(je){isNaN(je)||(Oe=parseFloat(je))}}),this},$u=function(){this.page=qt,this.currentPage=G,this.pages=se.slice(0),this.pagesContext=gt.slice(0),this.x=nt,this.y=pn,this.matrix=Ft,this.width=$f(G),this.height=Im(G),this.outputDestination=Ae,this.id="",this.objectNumber=-1};$u.prototype.restore=function(){qt=this.page,G=this.currentPage,gt=this.pagesContext,se=this.pages,nt=this.x,pn=this.y,Ft=this.matrix,Mm(G,this.width),ns(G,this.height),Ae=this.outputDestination};var Ff=function(S,F,ie,ce,xe){va.push(new $u),qt=G=0,se=[],nt=S,pn=F,Ft=xe,Rf([ie,ce])};for(var wc in f.beginFormObject=function(S,F,ie,ce,xe){return Ff(S,F,ie,ce,xe),this},f.endFormObject=function(S){return function(F){if(Ka[F])va.pop().restore();else{var ie=new $u,ce="Xo"+(Object.keys(ri).length+1).toString(10);ie.id=ce,Ka[F]=ce,ri[ce]=ie,tn.publish("addFormObject",ie),va.pop().restore()}}(S),this},f.doFormObject=function(S,F){var ie=ri[Ka[S]];return U("q"),U(F.toString()+" cm"),U("/"+ie.id+" Do"),U("Q"),this},f.getFormObject=function(S){var F=ri[Ka[S]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},f.save=function(S,F){return S=S||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Uc(ju(wa()),S),typeof Uc.unload=="function"&&St.setTimeout&&setTimeout(Uc.unload,911),this):new Promise(function(ie,ce){try{var xe=Uc(ju(wa()),S);typeof Uc.unload=="function"&&St.setTimeout&&setTimeout(Uc.unload,911),ie(xe)}catch(Oe){ce(Oe.message)}})},ut.API)ut.API.hasOwnProperty(wc)&&(wc==="events"&&ut.API.events.length?function(S,F){var ie,ce,xe;for(xe=F.length-1;xe!==-1;xe--)ie=F[xe][0],ce=F[xe][1],S.subscribe.apply(S,[ie].concat(typeof ce=="function"?[ce]:ce))}(tn,ut.API.events):f[wc]=ut.API[wc]);function $f(S){return gt[S].mediaBox.topRightX-gt[S].mediaBox.bottomLeftX}function Mm(S,F){gt[S].mediaBox.topRightX=F+gt[S].mediaBox.bottomLeftX}function Im(S){return gt[S].mediaBox.topRightY-gt[S].mediaBox.bottomLeftY}function ns(S,F){gt[S].mediaBox.topRightY=F+gt[S].mediaBox.bottomLeftY}var rs=f.getPageWidth=function(S){return $f(S=S||G)/_t},Dm=f.setPageWidth=function(S,F){Mm(S,F*_t)},xc=f.getPageHeight=function(S){return Im(S=S||G)/_t},jm=f.setPageHeight=function(S,F){ns(S,F*_t)};return f.internal={pdfEscape:yo,getStyle:Tm,getFont:O1,getFontSize:he,getCharSpace:U1,getTextColor:$1,getLineHeight:I1,getLineHeightFactor:j1,getLineWidth:M1,write:ge,getHorizontalCoordinate:Za,getVerticalCoordinate:Qa,getCoordinateString:B1,getVerticalCoordinateString:F1,collections:{},newObject:$n,newAdditionalObject:mc,newObjectDeferred:Lr,newObjectDeferredBegin:$r,getFilters:Ho,putStream:vo,events:tn,scaleFactor:_t,pageSize:{getWidth:function(){return rs(G)},setWidth:function(S){Dm(G,S)},getHeight:function(){return xc(G)},setHeight:function(S){jm(G,S)}},encryptionOptions:u,encryption:_r,getEncryptor:function(S){return u!==null?_r.encryptor(S,0):function(F){return F}},output:Cm,getNumberOfPages:Nm,get pages(){return se},out:U,f2:C,f3:j,getPageInfo:Xa,getPageInfoByObjId:Pm,getCurrentPageInfo:C1,getPDFVersion:v,Point:ts,Rectangle:Bf,Matrix:vt,hasHotfix:bo},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return rs(G)},set:function(S){Dm(G,S)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return xc(G)},set:function(S){jm(G,S)},enumerable:!0,configurable:!0}),(function(S){for(var F=0,ie=oe.length;F<ie;F++){var ce=xm.call(this,S[F][0],S[F][1],S[F][2],oe[F][3],!0);d===!1&&(h[ce]=!0);var xe=S[F][0].split("-");wm({id:ce,fontName:xe[0],fontStyle:xe[1]||""})}tn.publish("addFonts",{fonts:rt,dictionary:Xe})}).call(f,oe),Ke="F1",Em(i,n),tn.publish("initialized"),f}pd.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},pd.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},pd.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},pd.prototype.processOwnerPassword=function(e,t){return Y_(K_(t).substr(0,5),e)},pd.prototype.encryptor=function(e,t){var n=K_(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return Y_(n,r)}},Av.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||cn(e)!==cn(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},ut.API={events:[]},ut.version="4.1.0";var qn=ut.API,zx=1,wu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ed=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},kv=function(e){return e.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(t){var n=t.charCodeAt(0).toString(16).toUpperCase();return"#"+(n.length===1?"0"+n:n)})},Rt=function(e){return e.toFixed(2)},ul=function(e){return e.toFixed(5)};qn.__acroform__={};var Fi=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},ak=function(e){return e*zx},Pa=function(e){var t=new d6,n=Ze.internal.getHeight(e)||0,r=Ze.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Rt(r)),Number(Rt(n))],t},KU=qn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},YU=qn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},JU=qn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ar=qn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return JU(e,t-1)},sr=qn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return KU(e,t-1)},lr=qn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return YU(e,t-1)},XU=qn.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],o=e[1],a=e[2],s=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(o+s)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(o)||0,[Number(Rt(l.lowerLeft_X)),Number(Rt(l.lowerLeft_Y)),Number(Rt(l.upperRight_X)),Number(Rt(l.upperRight_Y))]},ZU=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=J_(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Rt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=Pa(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},J_=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(C){return C.split(`
`)}):i.map(function(C){return[C]});var o=n,a=Ze.internal.getHeight(e)||0;a=a<0?-a:a;var s=Ze.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(C,j,z){if(C+1<i.length){var Q=j+" "+i[C+1][0];return Lg(Q,e,z).width<=s-4}return!1};o++;e:for(;o>0;){t="",o--;var c,u,d=Lg("3",e,o).height,h=e.multiline?a-o:(a-d)/2,f=h+=2,m=0,v=0,b=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+Lg(t,e,o=12).width+", FieldWidth:"+s+`
`;break}for(var y="",x=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var w=!1;if(i[_].length!==1&&b!==i[_].length-1){if((d+2)*(x+2)+2>a)continue e;y+=i[_][b],w=!0,v=_,_--}else{y=(y+=i[_][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var R=parseInt(_),I=l(R,y,o),q=_>=i.length-1;if(I&&!q){y+=" ",b=0;continue}if(I||q){if(q)v=R;else if(e.multiline&&(d+2)*(x+2)+2>a)continue e}else{if(!e.multiline||(d+2)*(x+2)+2>a)continue e;v=R}}for(var T="",D=m;D<=v;D++){var M=i[D];if(e.multiline){if(D===v){T+=M[b]+" ",b=(b+1)%M.length;continue}if(D===m){T+=M[M.length-1]+" ";continue}}T+=M[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,u=Lg(T,e,o).width,e.textAlign){case"right":c=s-u-2;break;case"center":c=(s-u)/2;break;default:c=2}t+=Rt(c)+" "+Rt(f)+` Td
`,t+="("+wu(T)+`) Tj
`,t+=-Rt(c)+` 0 Td
`,f=-(o+2),u=0,m=w?v:v+1,x++,y=""}break}return r.text=t,r.fontSize=o,r},Lg=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},QU={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ez=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},tz=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ha.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(QU)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");zx=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new f6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&ez(o,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var o=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var s=r[a],l=[],c=s.Rect;if(s.Rect&&(s.Rect=XU(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Ze.createDefaultAppearanceStream(s),cn(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=c,s.hasAppearanceStream&&!s.appearanceStreamContent){var u=ZU(s);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(s.appearanceStreamContent){var d="";for(var h in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(h)){var f=s.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var m=f[a];typeof m=="function"&&(m=m.call(i,s)),d+="/"+a+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=f)=="function"&&(m=m.call(i,s)),d+="/"+a+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}o&&function(v,b){for(var y in v)if(v.hasOwnProperty(y)){var x=y,_=v[y];b.internal.newObjectDeferredBegin(_.objId,!0),cn(_)==="object"&&typeof _.putStream=="function"&&_.putStream(),delete v[x]}}(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},u6=qn.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(o!==0&&(i+=" "),cn(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":e[o].substr(0,1)==="/"?i+="/"+kv(e[o].substr(1)):(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+wu(r(e[o].toString()))+")")}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},nb=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+wu(r(e))+")"},Ia=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ia.prototype.toString=function(){return this.objId+" 0 R"},Ia.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ia.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:u6(i,this.objId,this.scope)}):i instanceof Ia?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var d6=function(){Ia.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Fi(d6,Ia);var f6=function(){Ia.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+wu(n(e))+")"}},set:function(n){e=n}})};Fi(f6,Ia);var ha=function e(){Ia.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ar(t,3)},set:function(y){y?this.F=sr(t,3):this.F=lr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Cv)return;o="FieldObject"+e.FieldNum++}var y=function(x){return x};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+wu(y(o))+")"},set:function(y){o=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(y){o=y}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/zx:c},set:function(y){c=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Cv||this instanceof iu))return nb(d,this.objId,this.scope)},set:function(y){y=y.toString(),d=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Mr==0?nb(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof Mr==0?y.substr(0,1)==="("?ed(y.substr(1,y.length-2)):ed(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Mr==1?ed(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Mr==1?"/"+kv(y):y}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Mr==0?nb(f,this.objId,this.scope):f},set:function(y){y=y.toString(),f=this instanceof Mr==0?y.substr(0,1)==="("?ed(y.substr(1,y.length-2)):ed(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Mr==1?ed(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof Mr==1?"/"+kv(y):y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(y){y=!!y,v=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(y){m=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,1)},set:function(y){y?this.Ff=sr(this.Ff,1):this.Ff=lr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,2)},set:function(y){y?this.Ff=sr(this.Ff,2):this.Ff=lr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,3)},set:function(y){y?this.Ff=sr(this.Ff,3):this.Ff=lr(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};Fi(ha,Ia);var jd=function(){ha.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return u6(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(o,a,s){s||(s=1);for(var l,c=[];l=a.exec(o);)c.push(l[s]);return c}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,18)},set:function(n){n?this.Ff=sr(this.Ff,18):this.Ff=lr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=sr(this.Ff,19):this.Ff=lr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,20)},set:function(n){n?(this.Ff=sr(this.Ff,20),t.sort()):this.Ff=lr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,22)},set:function(n){n?this.Ff=sr(this.Ff,22):this.Ff=lr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,23)},set:function(n){n?this.Ff=sr(this.Ff,23):this.Ff=lr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,27)},set:function(n){n?this.Ff=sr(this.Ff,27):this.Ff=lr(this.Ff,27)}}),this.hasAppearanceStream=!1};Fi(jd,ha);var Bd=function(){jd.call(this),this.fontName="helvetica",this.combo=!1};Fi(Bd,jd);var Fd=function(){Bd.call(this),this.combo=!0};Fi(Fd,Bd);var A0=function(){Fd.call(this),this.edit=!0};Fi(A0,Fd);var Mr=function(){ha.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,15)},set:function(n){n?this.Ff=sr(this.Ff,15):this.Ff=lr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,16)},set:function(n){n?this.Ff=sr(this.Ff,16):this.Ff=lr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,17)},set:function(n){n?this.Ff=sr(this.Ff,17):this.Ff=lr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,26)},set:function(n){n?this.Ff=sr(this.Ff,26):this.Ff=lr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+wu(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){cn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+kv(n)}})};Fi(Mr,ha);var k0=function(){Mr.call(this),this.pushButton=!0};Fi(k0,Mr);var $d=function(){Mr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Fi($d,Mr);var Cv=function(){var e,t;ha.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,a=[];for(o in a.push("<<"),r)a.push("/"+o+" ("+wu(i(r[o]))+")");return a.push(">>"),a.join(`
`)},set:function(i){cn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ze.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Fi(Cv,ha),$d.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},$d.prototype.createOption=function(e){var t=new Cv;return t.Parent=this,t.optionName=e,this.Kids.push(t),nz.call(this.scope,t),t};var C0=function(){Mr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ze.CheckBox.createAppearanceStream()};Fi(C0,Mr);var iu=function(){ha.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,13)},set:function(t){t?this.Ff=sr(this.Ff,13):this.Ff=lr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,21)},set:function(t){t?this.Ff=sr(this.Ff,21):this.Ff=lr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,23)},set:function(t){t?this.Ff=sr(this.Ff,23):this.Ff=lr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,24)},set:function(t){t?this.Ff=sr(this.Ff,24):this.Ff=lr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,25)},set:function(t){t?this.Ff=sr(this.Ff,25):this.Ff=lr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,26)},set:function(t){t?this.Ff=sr(this.Ff,26):this.Ff=lr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Fi(iu,ha);var P0=function(){iu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ar(this.Ff,14)},set:function(e){e?this.Ff=sr(this.Ff,14):this.Ff=lr(this.Ff,14)}}),this.password=!0};Fi(P0,iu);var Ze={CheckBox:{createAppearanceStream:function(){return{N:{On:Ze.CheckBox.YesNormal},D:{On:Ze.CheckBox.YesPushDown,Off:Ze.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Pa(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=J_(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Rt(Ze.internal.getWidth(e))+" "+Rt(Ze.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Rt(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Pa(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],o=Ze.internal.getHeight(e),a=Ze.internal.getWidth(e),s=J_(e,e.caption);return i.push("1 g"),i.push("0 0 "+Rt(a)+" "+Rt(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Rt(a-1)+" "+Rt(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Rt(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Pa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rt(Ze.internal.getWidth(e))+" "+Rt(Ze.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ze.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ze.RadioButton.Circle.YesNormal,t.D[e]=Ze.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Pa(e);t.scope=e.scope;var n=[],r=Ze.internal.getWidth(e)<=Ze.internal.getHeight(e)?Ze.internal.getWidth(e)/4:Ze.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Ze.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ul(Ze.internal.getWidth(e)/2)+" "+ul(Ze.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Pa(e);t.scope=e.scope;var n=[],r=Ze.internal.getWidth(e)<=Ze.internal.getHeight(e)?Ze.internal.getWidth(e)/4:Ze.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Ze.internal.Bezier_C).toFixed(5)),a=Number((r*Ze.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ul(Ze.internal.getWidth(e)/2)+" "+ul(Ze.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ul(Ze.internal.getWidth(e)/2)+" "+ul(Ze.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Pa(e);t.scope=e.scope;var n=[],r=Ze.internal.getWidth(e)<=Ze.internal.getHeight(e)?Ze.internal.getWidth(e)/4:Ze.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Ze.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ul(Ze.internal.getWidth(e)/2)+" "+ul(Ze.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ze.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ze.RadioButton.Cross.YesNormal,t.D[e]=Ze.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Pa(e);t.scope=e.scope;var n=[],r=Ze.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Rt(Ze.internal.getWidth(e)-2)+" "+Rt(Ze.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Rt(r.x1.x)+" "+Rt(r.x1.y)+" m"),n.push(Rt(r.x2.x)+" "+Rt(r.x2.y)+" l"),n.push(Rt(r.x4.x)+" "+Rt(r.x4.y)+" m"),n.push(Rt(r.x3.x)+" "+Rt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Pa(e);t.scope=e.scope;var n=Ze.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Rt(Ze.internal.getWidth(e))+" "+Rt(Ze.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Rt(Ze.internal.getWidth(e)-2)+" "+Rt(Ze.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Rt(n.x1.x)+" "+Rt(n.x1.y)+" m"),r.push(Rt(n.x2.x)+" "+Rt(n.x2.y)+" l"),r.push(Rt(n.x4.x)+" "+Rt(n.x4.y)+" m"),r.push(Rt(n.x3.x)+" "+Rt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Pa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rt(Ze.internal.getWidth(e))+" "+Rt(Ze.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Ze.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ze.internal.getWidth(e),n=Ze.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Ze.internal.getWidth=function(e){var t=0;return cn(e)==="object"&&(t=ak(e.Rect[2])),t},Ze.internal.getHeight=function(e){var t=0;return cn(e)==="object"&&(t=ak(e.Rect[3])),t};var nz=qn.addField=function(e){if(tz(this,e),!(e instanceof ha))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};qn.AcroFormChoiceField=jd,qn.AcroFormListBox=Bd,qn.AcroFormComboBox=Fd,qn.AcroFormEditBox=A0,qn.AcroFormButton=Mr,qn.AcroFormPushButton=k0,qn.AcroFormRadioButton=$d,qn.AcroFormCheckBox=C0,qn.AcroFormTextField=iu,qn.AcroFormPasswordField=P0,qn.AcroFormAppearance=Ze,qn.AcroForm={ChoiceField:jd,ListBox:Bd,ComboBox:Fd,EditBox:A0,Button:Mr,PushButton:k0,RadioButton:$d,CheckBox:C0,TextField:iu,PasswordField:P0,Appearance:Ze},ut.AcroForm={ChoiceField:jd,ListBox:Bd,ComboBox:Fd,EditBox:A0,Button:Mr,PushButton:k0,RadioButton:$d,CheckBox:C0,TextField:iu,PasswordField:P0,Appearance:Ze};ut.AcroForm;function h6(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(C,j){var z,Q,me,pe,ue,te=n;if((j=j||n)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(I(C))for(ue in r)for(me=r[ue],z=0;z<me.length;z+=1){for(pe=!0,Q=0;Q<me[z].length;Q+=1)if(me[z][Q]!==void 0&&me[z][Q]!==C[Q]){pe=!1;break}if(pe===!0){te=ue;break}}else for(ue in r)for(me=r[ue],z=0;z<me.length;z+=1){for(pe=!0,Q=0;Q<me[z].length;Q+=1)if(me[z][Q]!==void 0&&me[z][Q]!==C.charCodeAt(Q)){pe=!1;break}if(pe===!0){te=ue;break}}return te===n&&j!==n&&(te=j),te},o=function C(j){for(var z=this.internal.write,Q=this.internal.putStream,me=(0,this.internal.getFilters)();me.indexOf("FlateEncode")!==-1;)me.splice(me.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var pe=[];if(pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Image"}),pe.push({key:"Width",value:j.width}),pe.push({key:"Height",value:j.height}),j.colorSpace===y.INDEXED?pe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(pe.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===y.DEVICE_CMYK&&pe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pe.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&pe.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)&&j.transparency.length>0){for(var ue="",te=0,ae=j.transparency.length;te<ae;te++)ue+=j.transparency[te]+" "+j.transparency[te]+" ";pe.push({key:"Mask",value:"["+ue+"]"})}j.sMask!==void 0&&pe.push({key:"SMask",value:j.objectId+1+" 0 R"});var ye=j.filter!==void 0?["/"+j.filter]:void 0;if(Q({data:j.data,additionalKeyValues:pe,alreadyAppliedFilters:ye,objectId:j.objectId}),z("endobj"),"sMask"in j&&j.sMask!==void 0){var we,L=(we=j.sMaskBitsPerComponent)!==null&&we!==void 0?we:j.bitsPerComponent,G={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:j.sMask};"filter"in j&&(G.decodeParameters="/Predictor ".concat(j.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(j.width),G.filter=j.filter),C.call(this,G)}if(j.colorSpace===y.INDEXED){var K=this.internal.newObject();Q({data:T(new Uint8Array(j.palette)),objectId:K}),z("endobj")}},a=function(){var C=this.internal.collections[t+"images"];for(var j in C)o.call(this,C[j])},s=function(){var C,j=this.internal.collections[t+"images"],z=this.internal.write;for(var Q in j)z("/I"+(C=j[Q]).index,C.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",s))},c=function(){var C=this.internal.collections[t+"images"];return l.call(this),C},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},d=function(C){return typeof e["process"+C.toUpperCase()]=="function"},h=function(C){return cn(C)==="object"&&C.nodeType===1},f=function(C,j){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var z=""+C.getAttribute("src");if(z.indexOf("data:image/")===0)return N0(unescape(z).split("base64,").pop());var Q=e.loadFile(z,!0);if(Q!==void 0)return Q}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var me;switch(j){case"PNG":me="image/png";break;case"WEBP":me="image/webp";break;default:me="image/jpeg"}return N0(C.toDataURL(me,1).split("base64,").pop())}},m=function(C){var j=this.internal.collections[t+"images"];if(j){for(var z in j)if(C===j[z].alias)return j[z]}},v=function(C,j,z){return C||j||(C=-96,j=-96),C<0&&(C=-1*z.width*72/C/this.internal.scaleFactor),j<0&&(j=-1*z.height*72/j/this.internal.scaleFactor),C===0&&(C=j*z.width/z.height),j===0&&(j=C*z.height/z.width),[C,j]},b=function(C,j,z,Q,me,pe){var ue=v.call(this,z,Q,me),te=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,ye=c.call(this);if(z=ue[0],Q=ue[1],ye[me.index]=me,pe){pe*=Math.PI/180;var we=Math.cos(pe),L=Math.sin(pe),G=function(ee){return ee.toFixed(4)},K=[G(we),G(L),G(-1*L),G(we),0,0,"cm"]}this.internal.write("q"),pe?(this.internal.write([1,"0","0",1,te(C),ae(j+Q),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([te(z),"0","0",te(Q),"0","0","cm"].join(" "))):this.internal.write([te(z),"0","0",te(Q),te(C),ae(j+Q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+me.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=e.__addimage__.sHashCode=function(C){var j,z,Q=0;if(typeof C=="string")for(z=C.length,j=0;j<z;j++)Q=(Q<<5)-Q+C.charCodeAt(j),Q|=0;else if(I(C))for(z=C.byteLength/2,j=0;j<z;j++)Q=(Q<<5)-Q+C[j],Q|=0;return Q},w=e.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var j=!0;return C.length===0&&(j=!1),C.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(j=!1),j},R=e.__addimage__.extractImageFromDataUrl=function(C){if(C==null||!(C=C.trim()).startsWith("data:"))return null;var j=C.indexOf(",");return j<0?null:C.substring(0,j).trim().endsWith("base64")?C.substring(j+1):null};e.__addimage__.isArrayBuffer=function(C){return C instanceof ArrayBuffer};var I=e.__addimage__.isArrayBufferView=function(C){return C instanceof Int8Array||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array},q=e.__addimage__.binaryStringToUint8Array=function(C){for(var j=C.length,z=new Uint8Array(j),Q=0;Q<j;Q++)z[Q]=C.charCodeAt(Q);return z},T=e.__addimage__.arrayBufferToBinaryString=function(C){for(var j="",z=I(C)?C:new Uint8Array(C),Q=0;Q<z.length;Q+=8192)j+=String.fromCharCode.apply(null,z.subarray(Q,Q+8192));return j};e.addImage=function(){var C,j,z,Q,me,pe,ue,te,ae;if(typeof arguments[1]=="number"?(j=n,z=arguments[1],Q=arguments[2],me=arguments[3],pe=arguments[4],ue=arguments[5],te=arguments[6],ae=arguments[7]):(j=arguments[1],z=arguments[2],Q=arguments[3],me=arguments[4],pe=arguments[5],ue=arguments[6],te=arguments[7],ae=arguments[8]),cn(C=arguments[0])==="object"&&!h(C)&&"imageData"in C){var ye=C;C=ye.imageData,j=ye.format||j||n,z=ye.x||z||0,Q=ye.y||Q||0,me=ye.w||ye.width||me,pe=ye.h||ye.height||pe,ue=ye.alias||ue,te=ye.compression||te,ae=ye.rotation||ye.angle||ae}var we=this.internal.getFilters();if(te===void 0&&we.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(z)||isNaN(Q))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var L=D.call(this,C,j,ue,te);return b.call(this,z,Q,me,pe,L,ae),this};var D=function(C,j,z,Q){var me,pe,ue;if(typeof C=="string"&&i(C)===n){C=unescape(C);var te=M(C,!1);(te!==""||(te=e.loadFile(C,!0))!==void 0)&&(C=te)}if(h(C)&&(C=f(C,j)),j=i(C,j),!d(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(((ue=z)==null||ue.length===0)&&(z=function(ae){return typeof ae=="string"||I(ae)?_(ae):I(ae.data)?_(ae.data):null}(C)),(me=m.call(this,z))||(C instanceof Uint8Array||j==="RGBA"||(pe=C,C=q(C)),me=this["process"+j.toUpperCase()](C,u.call(this),z,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in e.image_compression?ae:x.NONE}(Q),pe)),!me)throw new Error("An unknown error occurred whilst processing the image.");return me},M=e.__addimage__.convertBase64ToBinaryString=function(C,j){j=typeof j!="boolean"||j;var z,Q="";if(typeof C=="string"){var me;z=(me=R(C))!==null&&me!==void 0?me:C;try{Q=N0(z)}catch(pe){if(j)throw w(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Q};e.getImageProperties=function(C){var j,z,Q="";if(h(C)&&(C=f(C)),typeof C=="string"&&i(C)===n&&((Q=M(C,!1))===""&&(Q=e.loadFile(C)||""),C=Q),z=i(C),!d(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(C instanceof Uint8Array||(C=q(C)),!(j=this["process"+z.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=z,j}})(ut.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};ut.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,o,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((r=c[d]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){r=c[h];var f=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(v.objId),x=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+f(y(r.contents))+")",o+=" /Popup "+b.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+f(y(x))+") >>",v.content=o;var _=v.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(o+=" /Open true"),o+=" >>",b.content=o,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+s(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var w=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(m(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var R=this.annotations._nameMap[r.options.name];r.options.pageNumber=R.page,r.options.top=R.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var I=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+I+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,o,a){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+o)},options:a,type:"link"})},e.textWithLink=function(n,r,i,o){var a,s,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){s=o.maxWidth;var u=this.splitTextToSize(n,s).length;a=Math.ceil(c*u)}else s=l,a=c;return this.text(n,r,i,o),i+=.2*c,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-c,s,a,o),l},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(ut.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},s=e.__arabicParser__.isArabicEndLetter=function(v){return a(v)&&o(v)&&t[v.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(v){return a(v)&&i.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return a(v)&&o(v)&&t[v.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return a(v)&&o(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return a(v)&&o(v)&&t[v.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return a(v)&&o(v)&&t[v.charCodeAt(0)].length==4},d=e.__arabicParser__.resolveLigatures=function(v){var b=0,y=n,x="",_=0;for(b=0;b<v.length;b+=1)y[v.charCodeAt(b)]!==void 0?(_++,typeof(y=y[v.charCodeAt(b)])=="number"&&(x+=String.fromCharCode(y),y=n,_=0),b===v.length-1&&(y=n,x+=v.charAt(b-(_-1)),b-=_-1,_=0)):(y=n,x+=v.charAt(b-_),b-=_,_=0);return x};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&r[v.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(v,b,y){return a(v)?o(v)===!1?-1:!c(v)||!a(b)&&!a(y)||!a(y)&&s(b)||s(v)&&!a(b)||s(v)&&l(b)||s(v)&&s(b)?0:u(v)&&a(b)&&!s(b)&&a(y)&&c(y)?3:s(v)||!a(y)?1:2:-1},f=function(v){var b=0,y=0,x=0,_="",w="",R="",I=(v=v||"").split("\\s+"),q=[];for(b=0;b<I.length;b+=1){for(q.push(""),y=0;y<I[b].length;y+=1)_=I[b][y],w=I[b][y-1],R=I[b][y+1],a(_)?(x=h(_,w,R),q[b]+=x!==-1?String.fromCharCode(t[_.charCodeAt(0)][x]):_):q[b]+=_;q[b]=d(q[b])}return q.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var x=0;for(y=[],x=0;x<b.length;x+=1)Array.isArray(b[x])?y.push([f(b[x][0]),b[x][1],b[x][2]]):y.push([f(b[x])]);v=y}else v=f(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",m])}(ut.API),ut.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(s){n=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(s){o=s}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ut.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(v){m=v}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,f=0,m=0,v=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,w){return _.concat(b.splitTextToSize(w,y))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)f<(v=this.getStringUnitWidth(l[x],{font:d})*u)&&(f=v);return f!==0&&(m=l.length),{w:f/=h,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,u,d,h){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,m,v,b,y=[],x=[],_=[],w={},R={},I=[],q=[],T=(h=h||{}).autoSize||!1,D=h.printHeaders!==!1,M=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,C=h.margins||Object.assign({width:this.getPageWidth()},t),j=typeof h.padding=="number"?h.padding:3,z=h.headerBackgroundColor||"#c8c8c8",Q=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=Q,this.setFontSize(M),d==null)x=y=Object.keys(u[0]),_=y.map(function(){return"left"});else if(Array.isArray(d)&&cn(d[0])==="object")for(y=d.map(function(ye){return ye.name}),x=d.map(function(ye){return ye.prompt||ye.name||""}),_=d.map(function(ye){return ye.align||"left"}),f=0;f<d.length;f+=1)R[d[f].name]=.7499990551181103*d[f].width;else Array.isArray(d)&&typeof d[0]=="string"&&(x=y=d,_=y.map(function(){return"left"}));if(T||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<y.length;f+=1){for(w[b=y[f]]=u.map(function(ye){return ye[b]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(x[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[b],this.setFont(void 0,"normal"),v=0;v<m.length;v+=1)I.push(this.getTextDimensions(m[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[b]=Math.max.apply(null,I)+j+j,I=[]}if(D){var me={};for(f=0;f<y.length;f+=1)me[y[f]]={},me[y[f]].text=x[f],me[y[f]].align=_[f];var pe=s.call(this,me,R);q=y.map(function(ye){return new o(l,c,R[ye],pe,me[ye].text,void 0,me[ye].align)}),this.setTableHeaderRow(q),this.printHeaderRow(1,!1)}var ue=d.reduce(function(ye,we){return ye[we.name]=we.align,ye},{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var te=s.call(this,u[f],R);for(v=0;v<y.length;v+=1){var ae=u[f][y[v]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:v,data:ae},this),a.call(this,new o(l,c,R[y[v]],te,ae,f+2,ue[y[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var s=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(f){var m=l[f];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+u+u},this).reduce(function(f,m){return Math.max(f,m)},0)};e.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(ut.API);var p6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},m6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],X_=h6(m6),g6=[100,200,300,400,500,600,700,800,900],rz=h6(g6);function rb(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(o){return p6[o=o||"normal"]?o:"normal"}(e.style),r=function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400}(e.weight),i=function(o){return typeof X_[o=o||"normal"]=="number"?o:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function sk(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var iz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},lk={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ck(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function uk(e){return e.trimLeft()}function oz(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function az(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var td,Og,dk,fk,hk,ib=["times"];function pk(e,t,n,r,i){var o=4,a=gk;switch(i){case ut.API.image_compression.FAST:o=1,a=mk;break;case ut.API.image_compression.MEDIUM:o=6,a=vk;break;case ut.API.image_compression.SLOW:o=9,a=yk}e=function(l,c,u,d){for(var h,f=l.length/c,m=new Uint8Array(l.length+f),v=[sz,mk,gk,vk,yk],b=0;b<f;b+=1){var y=b*c,x=l.subarray(y,y+c);if(d)m.set(d(x,u,h),y+b);else{for(var _=v.length,w=[],R=0;R<_;R+=1)w[R]=v[R](x,u,h);var I=cz(w.concat());m.set(w[I],y+b)}h=x}return m}(e,t,Math.ceil(n*r/8),a);var s=q_(e,{level:o});return ut.API.__addimage__.arrayBufferToBinaryString(s)}function sz(e){var t=Array.apply([],e);return t.unshift(0),t}function mk(e,t){var n=e.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var o=e[i-t]||0;r[i+1]=e[i]-o+256&255}return r}function gk(e,t,n){var r=e.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var a=n&&n[o]||0;i[o+1]=e[o]-a+256&255}return i}function vk(e,t,n){var r=e.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var a=e[o-t]||0,s=n&&n[o]||0;i[o+1]=e[o]+256-(a+s>>>1)&255}return i}function yk(e,t,n){var r=e.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var a=lz(e[o-t]||0,n&&n[o]||0,n&&n[o-t]||0);i[o+1]=e[o]-a+256&255}return i}function lz(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),o=Math.abs(e+t-n-n);return r<=i&&r<=o?e:i<=o?t:n}function cz(e){var t=e.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function ob(e,t,n){var r=t*n,i=Math.floor(r/8),o=16-(r-8*i+n),a=(1<<n)-1;return v6(e,i)>>o&a}function bk(e,t,n,r){var i=n*r,o=Math.floor(i/8),a=16-(i-8*o+r),s=(1<<r)-1,l=(t&s)<<a;(function(c,u,d){if(u+1<c.byteLength)c.setUint16(u,d,!1);else{var h=d>>8&255;c.setUint8(u,h)}})(e,o,v6(e,o)&~(s<<a)&65535|l)}function v6(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function uz(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,a=1<<1+(7&i);e[t++],e[t++];var s=null,l=null;o&&(s=t,l=a,t+=3*a);var c=!0,u=[],d=0,h=null,f=0,m=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];d=e[t++]|e[t++]<<8,h=e[t++],1&v||(h=null),f=v>>2&7,t++;break;case 254:for(;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,w=e[t++],R=w>>6&1,I=1<<1+(7&w),q=s,T=l,D=!1;w>>7&&(D=!0,q=t,T=I,t+=3*I);var M=t;for(t++;;){var C;if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}u.push({x:b,y,width:x,height:_,has_local_palette:D,palette_offset:q,palette_size:T,data_offset:M,data_length:t-M,transparent_index:h,interlaced:!!R,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(j){if(j<0||j>=u.length)throw new Error("Frame index out of range.");return u[j]},this.decodeAndBlitFrameBGRA=function(j,z){var Q=this.frameInfo(j),me=Q.width*Q.height,pe=new Uint8Array(me);_k(e,Q.data_offset,pe,me);var ue=Q.palette_offset,te=Q.transparent_index;te===null&&(te=256);var ae=Q.width,ye=n-ae,we=ae,L=4*(Q.y*n+Q.x),G=4*((Q.y+Q.height)*n+Q.x),K=L,ee=4*ye;Q.interlaced===!0&&(ee+=4*n*7);for(var O=8,N=0,k=pe.length;N<k;++N){var V=pe[N];if(we===0&&(we=ae,(K+=ee)>=G&&(ee=4*ye+4*n*(O-1),K=L+(ae+ye)*(O<<1),O>>=1)),V===te)K+=4;else{var J=e[ue+3*V],se=e[ue+3*V+1],ke=e[ue+3*V+2];z[K++]=ke,z[K++]=se,z[K++]=J,z[K++]=255}--we}},this.decodeAndBlitFrameRGBA=function(j,z){var Q=this.frameInfo(j),me=Q.width*Q.height,pe=new Uint8Array(me);_k(e,Q.data_offset,pe,me);var ue=Q.palette_offset,te=Q.transparent_index;te===null&&(te=256);var ae=Q.width,ye=n-ae,we=ae,L=4*(Q.y*n+Q.x),G=4*((Q.y+Q.height)*n+Q.x),K=L,ee=4*ye;Q.interlaced===!0&&(ee+=4*n*7);for(var O=8,N=0,k=pe.length;N<k;++N){var V=pe[N];if(we===0&&(we=ae,(K+=ee)>=G&&(ee=4*ye+4*n*(O-1),K=L+(ae+ye)*(O<<1),O>>=1)),V===te)K+=4;else{var J=e[ue+3*V],se=e[ue+3*V+1],ke=e[ue+3*V+2];z[K++]=J,z[K++]=se,z[K++]=ke,z[K++]=255}--we}}}function _k(e,t,n,r){for(var i=e[t++],o=1<<i,a=o+1,s=a+1,l=i+1,c=(1<<l)-1,u=0,d=0,h=0,f=e[t++],m=new Int32Array(4096),v=null;;){for(;u<16&&f!==0;)d|=e[t++]<<u,u+=8,f===1?f=e[t++]:--f;if(u<l)break;var b=d&c;if(d>>=l,u-=l,b!==o){if(b===a)break;for(var y=b<s?b:v,x=0,_=y;_>o;)_=m[_]>>8,++x;var w=_;if(h+x+(y!==b?1:0)>r)return void hn.log("Warning, gif stream longer than expected.");n[h++]=w;var R=h+=x;for(y!==b&&(n[h++]=w),_=y;x--;)_=m[_],n[--R]=255&_,_>>=8;v!==null&&s<4096&&(m[s++]=v<<8|w,s>=c+1&&l<12&&(++l,c=c<<1|1)),v=b}else s=a+1,c=(1<<(l=i+1))-1,v=null}return h!==r&&hn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function ab(e){var t,n,r,i,o,a=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),m=new Array(64),v=[],b=0,y=7,x=new Array(64),_=new Array(64),w=new Array(64),R=new Array(256),I=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],me=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pe(L,G){for(var K=0,ee=0,O=new Array,N=1;N<=16;N++){for(var k=1;k<=L[N];k++)O[G[ee]]=[],O[G[ee]][0]=K,O[G[ee]][1]=N,ee++,K++;K*=2}return O}function ue(L){for(var G=L[0],K=L[1]-1;K>=0;)G&1<<K&&(b|=1<<y),K--,--y<0&&(b==255?(te(255),te(0)):te(b),y=7,b=0)}function te(L){v.push(L)}function ae(L){te(L>>8&255),te(255&L)}function ye(L,G,K,ee,O){for(var N,k=O[0],V=O[240],J=function(Z,de){var he,Ce,De,Te,Ge,tt,At,kt,Ke,_t,nt=0;for(Ke=0;Ke<8;++Ke){he=Z[nt],Ce=Z[nt+1],De=Z[nt+2],Te=Z[nt+3],Ge=Z[nt+4],tt=Z[nt+5],At=Z[nt+6];var pn=he+(kt=Z[nt+7]),Ft=he-kt,rt=Ce+At,Xe=Ce-At,Yt=De+tt,dt=De-tt,mn=Te+Ge,wt=Te-Ge,Ot=pn+mn,Tn=pn-mn,qt=rt+Yt,gt=rt-Yt;Z[nt]=Ot+qt,Z[nt+4]=Ot-qt;var tn=.707106781*(gt+Tn);Z[nt+2]=Tn+tn,Z[nt+6]=Tn-tn;var pc=.382683433*((Ot=wt+dt)-(gt=Xe+Ft)),ri=.5411961*Ot+pc,Ka=1.306562965*gt+pc,va=.707106781*(qt=dt+Xe),vt=Ft+va,Ya=Ft-va;Z[nt+5]=Ya+ri,Z[nt+3]=Ya-ri,Z[nt+1]=vt+Ka,Z[nt+7]=vt-Ka,nt+=8}for(nt=0,Ke=0;Ke<8;++Ke){he=Z[nt],Ce=Z[nt+8],De=Z[nt+16],Te=Z[nt+24],Ge=Z[nt+32],tt=Z[nt+40],At=Z[nt+48];var Ja=he+(kt=Z[nt+56]),mo=he-kt,go=Ce+At,$n=Ce-At,Lr=De+tt,$r=De-tt,mc=Te+Ge,Vs=Te-Ge,Go=Ja+mc,ya=Ja-mc,qo=go+Lr,Ho=go-Lr;Z[nt]=Go+qo,Z[nt+32]=Go-qo;var vo=.707106781*(Ho+ya);Z[nt+16]=ya+vo,Z[nt+48]=ya-vo;var gc=.382683433*((Go=Vs+$r)-(Ho=$n+mo)),ba=.5411961*Go+gc,vc=1.306562965*Ho+gc,Ou=.707106781*(qo=$r+$n),Mu=mo+Ou,Iu=mo-Ou;Z[nt+40]=Iu+ba,Z[nt+24]=Iu-ba,Z[nt+8]=Mu+vc,Z[nt+56]=Mu-vc,nt++}for(Ke=0;Ke<64;++Ke)_t=Z[Ke]*de[Ke],f[Ke]=_t>0?_t+.5|0:_t-.5|0;return f}(L,G),se=0;se<64;++se)m[q[se]]=J[se];var ke=m[0]-K;K=m[0],ke==0?ue(ee[0]):(ue(ee[h[N=32767+ke]]),ue(d[N]));for(var Ae=63;Ae>0&&m[Ae]==0;)Ae--;if(Ae==0)return ue(k),K;for(var Ie,U=1;U<=Ae;){for(var ge=U;m[U]==0&&U<=Ae;)++U;var Pe=U-ge;if(Pe>=16){Ie=Pe>>4;for(var oe=1;oe<=Ie;++oe)ue(V);Pe&=15}N=32767+m[U],ue(O[(Pe<<4)+h[N]]),ue(d[N]),U++}return Ae!=63&&ue(k),K}function we(L){L=Math.min(Math.max(L,1),100),o!=L&&(function(G){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var O=a((K[ee]*G+50)/100);O=Math.min(Math.max(O,1),255),s[q[ee]]=O}for(var N=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],k=0;k<64;k++){var V=a((N[k]*G+50)/100);V=Math.min(Math.max(V,1),255),l[q[k]]=V}for(var J=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],se=0,ke=0;ke<8;ke++)for(var Ae=0;Ae<8;Ae++)c[se]=1/(s[q[se]]*J[ke]*J[Ae]*8),u[se]=1/(l[q[se]]*J[ke]*J[Ae]*8),se++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),o=L)}this.encode=function(L,G){G&&we(G),v=new Array,b=0,y=7,ae(65496),ae(65504),ae(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),ae(1),ae(1),te(0),te(0),function(){ae(65499),ae(132),te(0);for(var Ce=0;Ce<64;Ce++)te(s[Ce]);te(1);for(var De=0;De<64;De++)te(l[De])}(),function(Ce,De){ae(65472),ae(17),te(8),ae(De),ae(Ce),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(L.width,L.height),function(){ae(65476),ae(418),te(0);for(var Ce=0;Ce<16;Ce++)te(T[Ce+1]);for(var De=0;De<=11;De++)te(D[De]);te(16);for(var Te=0;Te<16;Te++)te(M[Te+1]);for(var Ge=0;Ge<=161;Ge++)te(C[Ge]);te(1);for(var tt=0;tt<16;tt++)te(j[tt+1]);for(var At=0;At<=11;At++)te(z[At]);te(17);for(var kt=0;kt<16;kt++)te(Q[kt+1]);for(var Ke=0;Ke<=161;Ke++)te(me[Ke])}(),ae(65498),ae(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var K=0,ee=0,O=0;b=0,y=7,this.encode.displayName="_encode_";for(var N,k,V,J,se,ke,Ae,Ie,U,ge=L.data,Pe=L.width,oe=L.height,Z=4*Pe,de=0;de<oe;){for(N=0;N<Z;){for(se=Z*de+N,Ae=-1,Ie=0,U=0;U<64;U++)ke=se+(Ie=U>>3)*Z+(Ae=4*(7&U)),de+Ie>=oe&&(ke-=Z*(de+1+Ie-oe)),N+Ae>=Z&&(ke-=N+Ae-Z+4),k=ge[ke++],V=ge[ke++],J=ge[ke++],x[U]=(I[k]+I[V+256|0]+I[J+512|0]>>16)-128,_[U]=(I[k+768|0]+I[V+1024|0]+I[J+1280|0]>>16)-128,w[U]=(I[k+1280|0]+I[V+1536|0]+I[J+1792|0]>>16)-128;K=ye(x,c,K,t,r),ee=ye(_,u,ee,n,i),O=ye(w,u,O,n,i),N+=32}de+=8}if(y>=0){var he=[];he[1]=y+1,he[0]=(1<<y+1)-1,ue(he)}return ae(65497),new Uint8Array(v)},e=e||50,function(){for(var L=String.fromCharCode,G=0;G<256;G++)R[G]=L(G)}(),t=pe(T,D),n=pe(j,z),r=pe(M,C),i=pe(Q,me),function(){for(var L=1,G=2,K=1;K<=15;K++){for(var ee=L;ee<G;ee++)h[32767+ee]=K,d[32767+ee]=[],d[32767+ee][1]=K,d[32767+ee][0]=ee;for(var O=-(G-1);O<=-L;O++)h[32767+O]=K,d[32767+O]=[],d[32767+O][1]=K,d[32767+O][0]=G-1+O;L<<=1,G<<=1}}(),function(){for(var L=0;L<256;L++)I[L]=19595*L,I[L+256|0]=38470*L,I[L+512|0]=7471*L+32768,I[L+768|0]=-11059*L,I[L+1024|0]=-21709*L,I[L+1280|0]=32768*L+8421375,I[L+1536|0]=-27439*L,I[L+1792|0]=-5329*L}(),we(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zo(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function wk(e){function t(D){if(!D)throw Error("assert :P")}function n(D,M,C){for(var j=0;4>j;j++)if(D[M+j]!=C.charCodeAt(j))return!0;return!1}function r(D,M,C,j,z){for(var Q=0;Q<z;Q++)D[M+Q]=C[j+Q]}function i(D,M,C,j){for(var z=0;z<j;z++)D[M+z]=C}function o(D){return new Int32Array(D)}function a(D,M){for(var C=[],j=0;j<D;j++)C.push(new M);return C}function s(D,M){var C=[];return function j(z,Q,me){for(var pe=me[Q],ue=0;ue<pe&&(z.push(me.length>Q+1?[]:new M),!(me.length<Q+1));ue++)j(z[ue],Q+1,me)}(C,0,D),C}var l=function(){var D=this;function M(p,g){for(var A=1<<g-1>>>0;p&A;)A>>>=1;return A?(p&A-1)+A:p}function C(p,g,A,P,$){t(!(P%A));do p[g+(P-=A)]=$;while(0<P)}function j(p,g,A,P,$){if(t(2328>=$),512>=$)var H=o(512);else if((H=o($))==null)return 0;return function(W,Y,X,ne,fe,Ne){var re,ve,Ee=Y,Re=1<<X,Se=o(16),Le=o(16);for(t(fe!=0),t(ne!=null),t(W!=null),t(0<X),ve=0;ve<fe;++ve){if(15<ne[ve])return 0;++Se[ne[ve]]}if(Se[0]==fe)return 0;for(Le[1]=0,re=1;15>re;++re){if(Se[re]>1<<re)return 0;Le[re+1]=Le[re]+Se[re]}for(ve=0;ve<fe;++ve)re=ne[ve],0<ne[ve]&&(Ne[Le[re]++]=ve);if(Le[15]==1)return(ne=new z).g=0,ne.value=Ne[0],C(W,Ee,1,Re,ne),Re;var Me,$e=-1,Be=Re-1,ct=0,Je=1,jt=1,it=1<<X;for(ve=0,re=1,fe=2;re<=X;++re,fe<<=1){if(Je+=jt<<=1,0>(jt-=Se[re]))return 0;for(;0<Se[re];--Se[re])(ne=new z).g=re,ne.value=Ne[ve++],C(W,Ee+ct,fe,it,ne),ct=M(ct,re)}for(re=X+1,fe=2;15>=re;++re,fe<<=1){if(Je+=jt<<=1,0>(jt-=Se[re]))return 0;for(;0<Se[re];--Se[re]){if(ne=new z,(ct&Be)!=$e){for(Ee+=it,Me=1<<($e=re)-X;15>$e&&!(0>=(Me-=Se[$e]));)++$e,Me<<=1;Re+=it=1<<(Me=$e-X),W[Y+($e=ct&Be)].g=Me+X,W[Y+$e].value=Ee-Y-$e}ne.g=re-X,ne.value=Ne[ve++],C(W,Ee+(ct>>X),fe,it,ne),ct=M(ct,re)}}return Je!=2*Le[15]-1?0:Re}(p,g,A,P,$,H)}function z(){this.value=this.g=0}function Q(){this.value=this.g=0}function me(){this.G=a(5,z),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Cc,Q)}function pe(p,g,A,P){t(p!=null),t(g!=null),t(2147483648>P),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=g,p.pa=A,p.Jd=g,p.Yc=A+P,p.Zc=4<=P?A+P-4+1:A,k(p)}function ue(p,g){for(var A=0;0<g--;)A|=J(p,128)<<g;return A}function te(p,g){var A=ue(p,g);return V(p)?-A:A}function ae(p,g,A,P){var $,H=0;for(t(p!=null),t(g!=null),t(4294967288>P),p.Sb=P,p.Ra=0,p.u=0,p.h=0,4<P&&(P=4),$=0;$<P;++$)H+=g[A+$]<<8*$;p.Ra=H,p.bb=P,p.oa=g,p.pa=A}function ye(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Js-8>>>0,++p.bb,p.u-=8;ee(p)&&(p.h=1,p.u=0)}function we(p,g){if(t(0<=g),!p.h&&g<=Gi){var A=K(p)&zi[g];return p.u+=g,ye(p),A}return p.h=1,p.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(p){return p.Ra>>>(p.u&Js-1)>>>0}function ee(p){return t(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Js}function O(p,g){p.u=g,p.h=ee(p)}function N(p){p.u>=ss&&(t(p.u>=ss),ye(p))}function k(p){t(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(t(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function V(p){return ue(p,1)}function J(p,g){var A=p.Ca;0>p.b&&k(p);var P=p.b,$=A*g>>>8,H=(p.I>>>P>$)+0;for(H?(A-=$,p.I-=$+1<<P>>>0):A=$+1,P=A,$=0;256<=P;)$+=8,P>>=8;return P=7^$+Xs[P],p.b-=P,p.Ca=(A<<P)-1,H}function se(p,g,A){p[g+0]=A>>24&255,p[g+1]=A>>16&255,p[g+2]=A>>8&255,p[g+3]=255&A}function ke(p,g){return p[g+0]|p[g+1]<<8}function Ae(p,g){return ke(p,g)|p[g+2]<<16}function Ie(p,g){return ke(p,g)|ke(p,g+2)<<16}function U(p,g){var A=1<<g;return t(p!=null),t(0<g),p.X=o(A),p.X==null?0:(p.Mb=32-g,p.Xa=g,1)}function ge(p,g){t(p!=null),t(g!=null),t(p.Xa==g.Xa),r(g.X,0,p.X,0,1<<g.Xa)}function Pe(){this.X=[],this.Xa=this.Mb=0}function oe(p,g,A,P){t(A!=null),t(P!=null);var $=A[0],H=P[0];return $==0&&($=(p*H+g/2)/g),H==0&&(H=(g*$+p/2)/p),0>=$||0>=H?0:(A[0]=$,P[0]=H,1)}function Z(p,g){return p+(1<<g)-1>>>g}function de(p,g){return((4278255360&p)+(4278255360&g)>>>0&4278255360)+((16711935&p)+(16711935&g)>>>0&16711935)>>>0}function he(p,g){D[g]=function(A,P,$,H,W,Y,X){var ne;for(ne=0;ne<W;++ne){var fe=D[p](Y[X+ne-1],$,H+ne);Y[X+ne]=de(A[P+ne],fe)}}}function Ce(){this.ud=this.hd=this.jd=0}function De(p,g){return((4278124286&(p^g))>>>1)+(p&g)>>>0}function Te(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Ge(p,g){return Te(p+(p-g+.5>>1))}function tt(p,g,A){return Math.abs(g-A)-Math.abs(p-A)}function At(p,g,A,P,$,H,W){for(P=H[W-1],A=0;A<$;++A)H[W+A]=P=de(p[g+A],P)}function kt(p,g,A,P,$){var H;for(H=0;H<A;++H){var W=p[g+H],Y=W>>8&255,X=16711935&(X=(X=16711935&W)+((Y<<16)+Y));P[$+H]=(4278255360&W)+X>>>0}}function Ke(p,g){g.jd=255&p,g.hd=p>>8&255,g.ud=p>>16&255}function _t(p,g,A,P,$,H){var W;for(W=0;W<P;++W){var Y=g[A+W],X=Y>>>8,ne=Y,fe=255&(fe=(fe=Y>>>16)+((p.jd<<24>>24)*(X<<24>>24)>>>5));ne=255&(ne=(ne+=(p.hd<<24>>24)*(X<<24>>24)>>>5)+((p.ud<<24>>24)*(fe<<24>>24)>>>5)),$[H+W]=(4278255360&Y)+(fe<<16)+ne}}function nt(p,g,A,P,$){D[g]=function(H,W,Y,X,ne,fe,Ne,re,ve){for(X=Ne;X<re;++X)for(Ne=0;Ne<ve;++Ne)ne[fe++]=$(Y[P(H[W++])])},D[p]=function(H,W,Y,X,ne,fe,Ne){var re=8>>H.b,ve=H.Ea,Ee=H.K[0],Re=H.w;if(8>re)for(H=(1<<H.b)-1,Re=(1<<re)-1;W<Y;++W){var Se,Le=0;for(Se=0;Se<ve;++Se)Se&H||(Le=P(X[ne++])),fe[Ne++]=$(Ee[Le&Re]),Le>>=re}else D["VP8LMapColor"+A](X,ne,Ee,Re,fe,Ne,W,Y,ve)}}function pn(p,g,A,P,$){for(A=g+A;g<A;){var H=p[g++];P[$++]=H>>16&255,P[$++]=H>>8&255,P[$++]=255&H}}function Ft(p,g,A,P,$){for(A=g+A;g<A;){var H=p[g++];P[$++]=H>>16&255,P[$++]=H>>8&255,P[$++]=255&H,P[$++]=H>>24&255}}function rt(p,g,A,P,$){for(A=g+A;g<A;){var H=(W=p[g++])>>16&240|W>>12&15,W=240&W|W>>28&15;P[$++]=H,P[$++]=W}}function Xe(p,g,A,P,$){for(A=g+A;g<A;){var H=(W=p[g++])>>16&248|W>>13&7,W=W>>5&224|W>>3&31;P[$++]=H,P[$++]=W}}function Yt(p,g,A,P,$){for(A=g+A;g<A;){var H=p[g++];P[$++]=255&H,P[$++]=H>>8&255,P[$++]=H>>16&255}}function dt(p,g,A,P,$,H){if(H==0)for(A=g+A;g<A;)se(P,((H=p[g++])[0]>>24|H[1]>>8&65280|H[2]<<8&16711680|H[3]<<24)>>>0),$+=32;else r(P,$,p,g,A)}function mn(p,g){D[g][0]=D[p+"0"],D[g][1]=D[p+"1"],D[g][2]=D[p+"2"],D[g][3]=D[p+"3"],D[g][4]=D[p+"4"],D[g][5]=D[p+"5"],D[g][6]=D[p+"6"],D[g][7]=D[p+"7"],D[g][8]=D[p+"8"],D[g][9]=D[p+"9"],D[g][10]=D[p+"10"],D[g][11]=D[p+"11"],D[g][12]=D[p+"12"],D[g][13]=D[p+"13"],D[g][14]=D[p+"0"],D[g][15]=D[p+"0"]}function wt(p){return p==q1||p==H1||p==Vm||p==V1}function Ot(){this.eb=[],this.size=this.A=this.fb=0}function Tn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ot,this.f.kb=new Tn,this.sd=null}function gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pc(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function ri(p,g){var A=p.T,P=g.ba.f.RGBA,$=P.eb,H=P.fb+p.ka*P.A,W=Eo[g.ba.S],Y=p.y,X=p.O,ne=p.f,fe=p.N,Ne=p.ea,re=p.W,ve=g.cc,Ee=g.dc,Re=g.Mc,Se=g.Nc,Le=p.ka,Me=p.ka+p.T,$e=p.U,Be=$e+1>>1;for(Le==0?W(Y,X,null,null,ne,fe,Ne,re,ne,fe,Ne,re,$,H,null,null,$e):(W(g.ec,g.fc,Y,X,ve,Ee,Re,Se,ne,fe,Ne,re,$,H-P.A,$,H,$e),++A);Le+2<Me;Le+=2)ve=ne,Ee=fe,Re=Ne,Se=re,fe+=p.Rc,re+=p.Rc,H+=2*P.A,W(Y,(X+=2*p.fa)-p.fa,Y,X,ve,Ee,Re,Se,ne,fe,Ne,re,$,H-P.A,$,H,$e);return X+=p.fa,p.j+Me<p.o?(r(g.ec,g.fc,Y,X,$e),r(g.cc,g.dc,ne,fe,Be),r(g.Mc,g.Nc,Ne,re,Be),A--):1&Me||W(Y,X,null,null,ne,fe,Ne,re,ne,fe,Ne,re,$,H+P.A,null,null,$e),A}function Ka(p,g,A){var P=p.F,$=[p.J];if(P!=null){var H=p.U,W=g.ba.S,Y=W==Hm||W==Vm;g=g.ba.f.RGBA;var X=[0],ne=p.ka;X[0]=p.T,p.Kb&&(ne==0?--X[0]:(--ne,$[0]-=p.width),p.j+p.ka+p.T==p.o&&(X[0]=p.o-p.j-ne));var fe=g.eb;ne=g.fb+ne*g.A,p=WE(P,$[0],p.width,H,X,fe,ne+(Y?0:3),g.A),t(A==X),p&&wt(W)&&Zf(fe,ne,Y,H,X,g.A)}return 0}function va(p){var g=p.ma,A=g.ba.S,P=11>A,$=A==Gm||A==qm||A==Hm||A==G1||A==12||wt(A);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!qf(g.Oa,p,$?11:12))return 0;if($&&wt(A)&&Uf(),p.da)alert("todo:use_scaling");else{if(P){if(g.Ib=pc,p.Kb){if(A=p.U+1>>1,g.memory=o(p.U+2*A),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+p.U,g.Mc=g.cc,g.Nc=g.dc+A,g.Ib=ri,Uf()}}else alert("todo:EmitYUV");$&&(g.Jb=Ka,P&&Wo())}if(P&&!cS){for(p=0;256>p;++p)JI[p]=89858*(p-128)+Km>>Wm,QI[p]=-22014*(p-128)+Km,ZI[p]=-45773*(p-128),XI[p]=113618*(p-128)+Km>>Wm;for(p=eh;p<Y1;++p)g=76283*(p-16)+Km>>Wm,e8[p-eh]=_a(g,255),t8[p-eh]=_a(g+8>>4,15);cS=1}return 1}function vt(p){var g=p.ma,A=p.U,P=p.T;return t(!(1&p.ka)),0>=A||0>=P?0:(A=g.Ib(p,g),g.Jb!=null&&g.Jb(p,g,A),g.Dc+=A,1)}function Ya(p){p.ma.memory=null}function Ja(p,g,A,P){return we(p,8)!=47?0:(g[0]=we(p,14)+1,A[0]=we(p,14)+1,P[0]=we(p,1),we(p,3)!=0?0:!p.h)}function mo(p,g){if(4>p)return p+1;var A=p-2>>1;return(2+(1&p)<<A)+we(g,A)+1}function go(p,g){return 120<g?g-120:1<=(A=((A=DI[g-1])>>4)*p+(8-(15&A)))?A:1;var A}function $n(p,g,A){var P=K(A),$=p[g+=255&P].g-8;return 0<$&&(O(A,A.u+8),P=K(A),g+=p[g].value,g+=P&(1<<$)-1),O(A,A.u+p[g].g),p[g].value}function Lr(p,g,A){return A.g+=p.g,A.value+=p.value<<g>>>0,t(8>=A.g),p.g}function $r(p,g,A){var P=p.xc;return t((g=P==0?0:p.vc[p.md*(A>>P)+(g>>P)])<p.Wb),p.Ya[g]}function mc(p,g,A,P){var $=p.ab,H=p.c*g,W=p.C;g=W+g;var Y=A,X=P;for(P=p.Ta,A=p.Ua;0<$--;){var ne=p.gc[$],fe=W,Ne=g,re=Y,ve=X,Ee=(X=P,Y=A,ne.Ea);switch(t(fe<Ne),t(Ne<=ne.nc),ne.hc){case 2:Zn(re,ve,(Ne-fe)*Ee,X,Y);break;case 0:var Re=fe,Se=Ne,Le=X,Me=Y,$e=(it=ne).Ea;Re==0&&(Vf(re,ve,null,null,1,Le,Me),At(re,ve+1,0,0,$e-1,Le,Me+1),ve+=$e,Me+=$e,++Re);for(var Be=1<<it.b,ct=Be-1,Je=Z($e,it.b),jt=it.K,it=it.w+(Re>>it.b)*Je;Re<Se;){var Kt=jt,Er=it,Bt=1;for(Gu(re,ve,Le,Me-$e,1,Le,Me);Bt<$e;){var ot=(Bt&~ct)+Be;ot>$e&&(ot=$e),(0,Kf[Kt[Er++]>>8&15])(re,ve+ +Bt,Le,Me+Bt-$e,ot-Bt,Le,Me+Bt),Bt=ot}ve+=$e,Me+=$e,++Re&ct||(it+=Je)}Ne!=ne.nc&&r(X,Y-Ee,X,Y+(Ne-fe-1)*Ee,Ee);break;case 1:for(Ee=re,Se=ve,$e=(re=ne.Ea)-(Me=re&~(Le=(ve=1<<ne.b)-1)),Re=Z(re,ne.b),Be=ne.K,ne=ne.w+(fe>>ne.b)*Re;fe<Ne;){for(ct=Be,Je=ne,jt=new Ce,it=Se+Me,Kt=Se+re;Se<it;)Ke(ct[Je++],jt),Yf(jt,Ee,Se,ve,X,Y),Se+=ve,Y+=ve;Se<Kt&&(Ke(ct[Je++],jt),Yf(jt,Ee,Se,$e,X,Y),Se+=$e,Y+=$e),++fe&Le||(ne+=Re)}break;case 3:if(re==X&&ve==Y&&0<ne.b){for(Se=X,re=Ee=Y+(Ne-fe)*Ee-(Me=(Ne-fe)*Z(ne.Ea,ne.b)),ve=X,Le=Y,Re=[],Me=($e=Me)-1;0<=Me;--Me)Re[Me]=ve[Le+Me];for(Me=$e-1;0<=Me;--Me)Se[re+Me]=Re[Me];Fm(ne,fe,Ne,X,Ee,X,Y)}else Fm(ne,fe,Ne,re,ve,X,Y)}Y=P,X=A}X!=A&&r(P,A,Y,X,H)}function Vs(p,g){var A=p.V,P=p.Ba+p.c*p.C,$=g-p.C;if(t(g<=p.l.o),t(16>=$),0<$){var H=p.l,W=p.Ta,Y=p.Ua,X=H.width;if(mc(p,$,A,P),$=Y=[Y],t((A=p.C)<(P=g)),t(H.v<H.va),P>H.o&&(P=H.o),A<H.j){var ne=H.j-A;A=H.j,$[0]+=ne*X}if(A>=P?A=0:($[0]+=4*H.v,H.ka=A-H.j,H.U=H.va-H.v,H.T=P-A,A=1),A){if(Y=Y[0],11>(A=p.ca).S){var fe=A.f.RGBA,Ne=(P=A.S,$=H.U,H=H.T,ne=fe.eb,fe.A),re=H;for(fe=fe.fb+p.Ma*fe.A;0<re--;){var ve=W,Ee=Y,Re=$,Se=ne,Le=fe;switch(P){case zm:Jf(ve,Ee,Re,Se,Le);break;case Gm:Zs(ve,Ee,Re,Se,Le);break;case q1:Zs(ve,Ee,Re,Se,Le),Zf(Se,Le,0,Re,1,0);break;case eS:Pc(ve,Ee,Re,Se,Le);break;case qm:dt(ve,Ee,Re,Se,Le,1);break;case H1:dt(ve,Ee,Re,Se,Le,1),Zf(Se,Le,0,Re,1,0);break;case Hm:dt(ve,Ee,Re,Se,Le,0);break;case Vm:dt(ve,Ee,Re,Se,Le,0),Zf(Se,Le,1,Re,1,0);break;case G1:Qs(ve,Ee,Re,Se,Le);break;case V1:Qs(ve,Ee,Re,Se,Le),VE(Se,Le,Re,1,0);break;case tS:el(ve,Ee,Re,Se,Le);break;default:t(0)}Y+=X,fe+=Ne}p.Ma+=H}else alert("todo:EmitRescaledRowsYUVA");t(p.Ma<=A.height)}}p.C=g,t(p.C<=p.i)}function Go(p){var g;if(0<p.ua)return 0;for(g=0;g<p.Wb;++g){var A=p.Ya[g].G,P=p.Ya[g].H;if(0<A[1][P[1]+0].g||0<A[2][P[2]+0].g||0<A[3][P[3]+0].g)return 0}return 1}function ya(p,g,A,P,$,H){if(p.Z!=0){var W=p.qd,Y=p.rd;for(t(rl[p.Z]!=null);g<A;++g)rl[p.Z](W,Y,P,$,P,$,H),W=P,Y=$,$+=H;p.qd=W,p.rd=Y}}function qo(p,g){var A=p.l.ma,P=A.Z==0||A.Z==1?p.l.j:p.C;if(P=p.C<P?P:p.C,t(g<=p.l.o),g>P){var $=p.l.width,H=A.ca,W=A.tb+$*P,Y=p.V,X=p.Ba+p.c*P,ne=p.gc;t(p.ab==1),t(ne[0].hc==3),Sa(ne[0],P,g,Y,X,H,W),ya(A,P,g,H,W,$)}p.C=p.Ma=g}function Ho(p,g,A,P,$,H,W){var Y=p.$/P,X=p.$%P,ne=p.m,fe=p.s,Ne=A+p.$,re=Ne;$=A+P*$;var ve=A+P*H,Ee=280+fe.ua,Re=p.Pb?Y:16777216,Se=0<fe.ua?fe.Wa:null,Le=fe.wc,Me=Ne<ve?$r(fe,X,Y):null;t(p.C<H),t(ve<=$);var $e=!1;e:for(;;){for(;$e||Ne<ve;){var Be=0;if(Y>=Re){var ct=Ne-A;t((Re=p).Pb),Re.wd=Re.m,Re.xd=ct,0<Re.s.ua&&ge(Re.s.Wa,Re.s.vb),Re=Y+BI}if(X&Le||(Me=$r(fe,X,Y)),t(Me!=null),Me.Qb&&(g[Ne]=Me.qb,$e=!0),!$e)if(N(ne),Me.jc){Be=ne,ct=g;var Je=Ne,jt=Me.pd[K(Be)&Cc-1];t(Me.jc),256>jt.g?(O(Be,Be.u+jt.g),ct[Je]=jt.value,Be=0):(O(Be,Be.u+jt.g-256),t(256<=jt.value),Be=jt.value),Be==0&&($e=!0)}else Be=$n(Me.G[0],Me.H[0],ne);if(ne.h)break;if($e||256>Be){if(!$e)if(Me.nd)g[Ne]=(Me.qb|Be<<8)>>>0;else{if(N(ne),$e=$n(Me.G[1],Me.H[1],ne),N(ne),ct=$n(Me.G[2],Me.H[2],ne),Je=$n(Me.G[3],Me.H[3],ne),ne.h)break;g[Ne]=(Je<<24|$e<<16|Be<<8|ct)>>>0}if($e=!1,++Ne,++X>=P&&(X=0,++Y,W!=null&&Y<=H&&!(Y%16)&&W(p,Y),Se!=null))for(;re<Ne;)Be=g[re++],Se.X[(506832829*Be&4294967295)>>>Se.Mb]=Be}else if(280>Be){if(Be=mo(Be-256,ne),ct=$n(Me.G[4],Me.H[4],ne),N(ne),ct=go(P,ct=mo(ct,ne)),ne.h)break;if(Ne-A<ct||$-Ne<Be)break e;for(Je=0;Je<Be;++Je)g[Ne+Je]=g[Ne+Je-ct];for(Ne+=Be,X+=Be;X>=P;)X-=P,++Y,W!=null&&Y<=H&&!(Y%16)&&W(p,Y);if(t(Ne<=$),X&Le&&(Me=$r(fe,X,Y)),Se!=null)for(;re<Ne;)Be=g[re++],Se.X[(506832829*Be&4294967295)>>>Se.Mb]=Be}else{if(!(Be<Ee))break e;for($e=Be-280,t(Se!=null);re<Ne;)Be=g[re++],Se.X[(506832829*Be&4294967295)>>>Se.Mb]=Be;Be=Ne,t(!($e>>>(ct=Se).Xa)),g[Be]=ct.X[$e],$e=!0}$e||t(ne.h==ee(ne))}if(p.Pb&&ne.h&&Ne<$)t(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&ge(p.s.vb,p.s.Wa);else{if(ne.h)break e;W!=null&&W(p,Y>H?H:Y),p.a=0,p.$=Ne-A}return 1}return p.a=3,0}function vo(p){t(p!=null),p.vc=null,p.yc=null,p.Ya=null;var g=p.Wa;g!=null&&(g.X=null),p.vb=null,t(p!=null)}function gc(){var p=new Nt;return p==null?null:(p.a=0,p.xb=iS,mn("Predictor","VP8LPredictors"),mn("Predictor","VP8LPredictors_C"),mn("PredictorAdd","VP8LPredictorsAdd"),mn("PredictorAdd","VP8LPredictorsAdd_C"),Zn=kt,Yf=_t,Jf=pn,Zs=Ft,Qs=rt,el=Xe,Pc=Yt,D.VP8LMapColor32b=Ea,D.VP8LMapColor8b=Wf,p)}function ba(p,g,A,P,$){var H=1,W=[p],Y=[g],X=P.m,ne=P.s,fe=null,Ne=0;e:for(;;){if(A)for(;H&&we(X,1);){var re=W,ve=Y,Ee=P,Re=1,Se=Ee.m,Le=Ee.gc[Ee.ab],Me=we(Se,2);if(Ee.Oc&1<<Me)H=0;else{switch(Ee.Oc|=1<<Me,Le.hc=Me,Le.Ea=re[0],Le.nc=ve[0],Le.K=[null],++Ee.ab,t(4>=Ee.ab),Me){case 0:case 1:Le.b=we(Se,3)+2,Re=ba(Z(Le.Ea,Le.b),Z(Le.nc,Le.b),0,Ee,Le.K),Le.K=Le.K[0];break;case 3:var $e,Be=we(Se,8)+1,ct=16<Be?0:4<Be?1:2<Be?2:3;if(re[0]=Z(Le.Ea,ct),Le.b=ct,$e=Re=ba(Be,1,0,Ee,Le.K)){var Je,jt=Be,it=Le,Kt=1<<(8>>it.b),Er=o(Kt);if(Er==null)$e=0;else{var Bt=it.K[0],ot=it.w;for(Er[0]=it.K[0][0],Je=1;Je<1*jt;++Je)Er[Je]=de(Bt[ot+Je],Er[Je-1]);for(;Je<4*Kt;++Je)Er[Je]=0;it.K[0]=null,it.K[0]=Er,$e=1}}Re=$e;break;case 2:break;default:t(0)}H=Re}}if(W=W[0],Y=Y[0],H&&we(X,1)&&!(H=1<=(Ne=we(X,4))&&11>=Ne)){P.a=3;break e}var qe;if(qe=H)t:{var er,Mt,Jt,wn=P,Gr=W,vi=Y,Un=Ne,ii=A,yi=wn.m,Sr=wn.s,Zt=[null],an=1,zn=0,sn=jI[Un];n:for(;;){if(ii&&we(yi,1)){var qr=we(yi,3)+2,Yo=Z(Gr,qr),tr=Z(vi,qr),ki=Yo*tr;if(!ba(Yo,tr,0,wn,Zt))break n;for(Zt=Zt[0],Sr.xc=qr,er=0;er<ki;++er){var fn=Zt[er]>>8&65535;Zt[er]=fn,fn>=an&&(an=fn+1)}}if(yi.h)break n;for(Mt=0;5>Mt;++Mt){var Nr=nS[Mt];!Mt&&0<Un&&(Nr+=1<<Un),zn<Nr&&(zn=Nr)}var Hi=a(an*sn,z),bi=an,Vi=a(bi,me);if(Vi==null)var Wi=null;else t(65536>=bi),Wi=Vi;var Ci=o(zn);if(Wi==null||Ci==null||Hi==null){wn.a=1;break n}var Ki=Hi;for(er=Jt=0;er<an;++er){var vn=Wi[er],Yi=vn.G,Jo=vn.H,Rc=0,us=1,Hr=0;for(Mt=0;5>Mt;++Mt){Nr=nS[Mt],Yi[Mt]=Ki,Jo[Mt]=Jt,!Mt&&0<Un&&(Nr+=1<<Un);i:{var Jm,J1=Nr,Xm=wn,th=Ci,i8=Ki,o8=Jt,X1=0,il=Xm.m,a8=we(il,1);if(i(th,0,0,J1),a8){var s8=we(il,1)+1,l8=we(il,1),fS=we(il,l8==0?1:8);th[fS]=1,s8==2&&(th[fS=we(il,8)]=1);var Zm=1}else{var hS=o(19),pS=we(il,4)+4;if(19<pS){Xm.a=3;var Qm=0;break i}for(Jm=0;Jm<pS;++Jm)hS[II[Jm]]=we(il,3);var Z1=void 0,nh=void 0,mS=Xm,c8=hS,eg=J1,gS=th,Q1=0,ol=mS.m,vS=8,yS=a(128,z);r:for(;j(yS,0,7,c8,19);){if(we(ol,1)){var u8=2+2*we(ol,3);if((Z1=2+we(ol,u8))>eg)break r}else Z1=eg;for(nh=0;nh<eg&&Z1--;){N(ol);var bS=yS[0+(127&K(ol))];O(ol,ol.u+bS.g);var Hu=bS.value;if(16>Hu)gS[nh++]=Hu,Hu!=0&&(vS=Hu);else{var d8=Hu==16,_S=Hu-16,f8=OI[_S],wS=we(ol,LI[_S])+f8;if(nh+wS>eg)break r;for(var h8=d8?vS:0;0<wS--;)gS[nh++]=h8}}Q1=1;break r}Q1||(mS.a=3),Zm=Q1}(Zm=Zm&&!il.h)&&(X1=j(i8,o8,8,th,J1)),Zm&&X1!=0?Qm=X1:(Xm.a=3,Qm=0)}if(Qm==0)break n;if(us&&MI[Mt]==1&&(us=Ki[Jt].g==0),Rc+=Ki[Jt].g,Jt+=Qm,3>=Mt){var rh,e2=Ci[0];for(rh=1;rh<Nr;++rh)Ci[rh]>e2&&(e2=Ci[rh]);Hr+=e2}}if(vn.nd=us,vn.Qb=0,us&&(vn.qb=(Yi[3][Jo[3]+0].value<<24|Yi[1][Jo[1]+0].value<<16|Yi[2][Jo[2]+0].value)>>>0,Rc==0&&256>Yi[0][Jo[0]+0].value&&(vn.Qb=1,vn.qb+=Yi[0][Jo[0]+0].value<<8)),vn.jc=!vn.Qb&&6>Hr,vn.jc){var tg,ds=vn;for(tg=0;tg<Cc;++tg){var al=tg,sl=ds.pd[al],ng=ds.G[0][ds.H[0]+al];256<=ng.value?(sl.g=ng.g+256,sl.value=ng.value):(sl.g=0,sl.value=0,al>>=Lr(ng,8,sl),al>>=Lr(ds.G[1][ds.H[1]+al],16,sl),al>>=Lr(ds.G[2][ds.H[2]+al],0,sl),Lr(ds.G[3][ds.H[3]+al],24,sl))}}}Sr.vc=Zt,Sr.Wb=an,Sr.Ya=Wi,Sr.yc=Hi,qe=1;break t}qe=0}if(!(H=qe)){P.a=3;break e}if(0<Ne){if(ne.ua=1<<Ne,!U(ne.Wa,Ne)){P.a=1,H=0;break e}}else ne.ua=0;var t2=P,xS=W,p8=Y,n2=t2.s,r2=n2.xc;if(t2.c=xS,t2.i=p8,n2.md=Z(xS,r2),n2.wc=r2==0?-1:(1<<r2)-1,A){P.xb=HI;break e}if((fe=o(W*Y))==null){P.a=1,H=0;break e}H=(H=Ho(P,fe,0,W,Y,Y,null))&&!X.h;break e}return H?($!=null?$[0]=fe:(t(fe==null),t(A)),P.$=0,A||vo(ne)):vo(ne),H}function vc(p,g){var A=p.c*p.i,P=A+g+16*g;return t(p.c<=g),p.V=o(P),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+A+g,1)}function Ou(p,g){var A=p.C,P=g-A,$=p.V,H=p.Ba+p.c*A;for(t(g<=p.l.o);0<P;){var W=16<P?16:P,Y=p.l.ma,X=p.l.width,ne=X*W,fe=Y.ca,Ne=Y.tb+X*A,re=p.Ta,ve=p.Ua;mc(p,W,$,H),KE(re,ve,fe,Ne,ne),ya(Y,A,A+W,fe,Ne,X),P-=W,$+=W*p.c,A+=W}t(A==g),p.C=p.Ma=g}function Mu(){this.ub=this.yd=this.td=this.Rb=0}function Iu(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function A1(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Tf(){this.Yb=function(){var p=[];return function g(A,P,$){for(var H=$[P],W=0;W<H&&(A.push($.length>P+1?[]:0),!($.length<P+1));W++)g(A[W],P+1,$)}(p,0,[3,11]),p}()}function wm(){this.jb=o(3),this.Wc=s([4,8],Tf),this.Xc=s([4,17],Tf)}function xm(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function yo(){this.ld=this.La=this.dd=this.tc=0}function Rf(){this.Na=this.la=0}function Em(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Lf(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Sm(){this.uc=this.M=this.Nb=0,this.wa=Array(new yo),this.Y=0,this.ya=Array(new Lf),this.aa=0,this.l=new Du}function Nm(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Am(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new Mu,this.Kc=new Iu,this.ed=new xm,this.Qa=new A1,this.Ic=this.$c=this.Aa=0,this.D=new Sm,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,L),this.ia=0,this.pb=a(4,Em),this.Pa=new wm,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Nm),this.Hd=0,this.rb=Array(new Rf),this.sb=0,this.wa=Array(new yo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Lf),this.L=this.aa=0,this.gd=s([4,2],yo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function _a(p,g){return 0>p?0:p>g?g:p}function Du(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function k1(){var p=new Am;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Qf||(Qf=ju)),p}function fr(p,g,A){return p.a==0&&(p.a=g,p.sc=A,p.cb=0),0}function km(p,g,A){return 3<=A&&p[g+0]==157&&p[g+1]==1&&p[g+2]==42}function wa(p,g){if(p==null)return 0;if(p.a=0,p.sc="OK",g==null)return fr(p,2,"null VP8Io passed to VP8GetHeaders()");var A=g.data,P=g.w,$=g.ha;if(4>$)return fr(p,7,"Truncated header.");var H=A[P+0]|A[P+1]<<8|A[P+2]<<16,W=p.Od;if(W.Rb=!(1&H),W.td=H>>1&7,W.yd=H>>4&1,W.ub=H>>5,3<W.td)return fr(p,3,"Incorrect keyframe parameters.");if(!W.yd)return fr(p,4,"Frame not displayable.");P+=3,$-=3;var Y=p.Kc;if(W.Rb){if(7>$)return fr(p,7,"cannot parse picture header");if(!km(A,P,$))return fr(p,3,"Bad code word");Y.c=16383&(A[P+4]<<8|A[P+3]),Y.Td=A[P+4]>>6,Y.i=16383&(A[P+6]<<8|A[P+5]),Y.Ud=A[P+6]>>6,P+=7,$-=7,p.za=Y.c+15>>4,p.Ub=Y.i+15>>4,g.width=Y.c,g.height=Y.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((H=p.Pa).jb,0,255,H.jb.length),t((H=p.Qa)!=null),H.Cb=0,H.Bb=0,H.Fb=1,i(H.Zb,0,0,H.Zb.length),i(H.Lb,0,0,H.Lb)}if(W.ub>$)return fr(p,7,"bad partition length");pe(H=p.m,A,P,W.ub),P+=W.ub,$-=W.ub,W.Rb&&(Y.Ld=V(H),Y.Kd=V(H)),Y=p.Qa;var X,ne=p.Pa;if(t(H!=null),t(Y!=null),Y.Cb=V(H),Y.Cb){if(Y.Bb=V(H),V(H)){for(Y.Fb=V(H),X=0;4>X;++X)Y.Zb[X]=V(H)?te(H,7):0;for(X=0;4>X;++X)Y.Lb[X]=V(H)?te(H,6):0}if(Y.Bb)for(X=0;3>X;++X)ne.jb[X]=V(H)?ue(H,8):255}else Y.Bb=0;if(H.Ka)return fr(p,3,"cannot parse segment header");if((Y=p.ed).zd=V(H),Y.Tb=ue(H,6),Y.wb=ue(H,3),Y.Pc=V(H),Y.Pc&&V(H)){for(ne=0;4>ne;++ne)V(H)&&(Y.vd[ne]=te(H,6));for(ne=0;4>ne;++ne)V(H)&&(Y.od[ne]=te(H,6))}if(p.L=Y.Tb==0?0:Y.zd?1:2,H.Ka)return fr(p,3,"cannot parse filter header");var fe=$;if($=X=P,P=X+fe,Y=fe,p.Xb=(1<<ue(p.m,2))-1,fe<3*(ne=p.Xb))A=7;else{for(X+=3*ne,Y-=3*ne,fe=0;fe<ne;++fe){var Ne=A[$+0]|A[$+1]<<8|A[$+2]<<16;Ne>Y&&(Ne=Y),pe(p.Jc[+fe],A,X,Ne),X+=Ne,Y-=Ne,$+=3}pe(p.Jc[+ne],A,X,Y),A=X<P?0:5}if(A!=0)return fr(p,A,"cannot parse partitions");for(A=ue(X=p.m,7),$=V(X)?te(X,4):0,P=V(X)?te(X,4):0,Y=V(X)?te(X,4):0,ne=V(X)?te(X,4):0,X=V(X)?te(X,4):0,fe=p.Qa,Ne=0;4>Ne;++Ne){if(fe.Cb){var re=fe.Zb[Ne];fe.Fb||(re+=A)}else{if(0<Ne){p.pb[Ne]=p.pb[0];continue}re=A}var ve=p.pb[Ne];ve.Sc[0]=W1[_a(re+$,127)],ve.Sc[1]=K1[_a(re+0,127)],ve.Eb[0]=2*W1[_a(re+P,127)],ve.Eb[1]=101581*K1[_a(re+Y,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=W1[_a(re+ne,117)],ve.Qc[1]=K1[_a(re+X,127)],ve.lc=re+X}if(!W.Rb)return fr(p,4,"Not a key frame.");for(V(H),W=p.Pa,A=0;4>A;++A){for($=0;8>$;++$)for(P=0;3>P;++P)for(Y=0;11>Y;++Y)ne=J(H,GI[A][$][P][Y])?ue(H,8):UI[A][$][P][Y],W.Wc[A][$].Yb[P][Y]=ne;for($=0;17>$;++$)W.Xc[A][$]=W.Wc[A][qI[$]]}return p.kc=V(H),p.kc&&(p.Bd=ue(H,8)),p.cb=1}function ju(p,g,A,P,$,H,W){var Y=g[$].Yb[A];for(A=0;16>$;++$){if(!J(p,Y[A+0]))return $;for(;!J(p,Y[A+1]);)if(Y=g[++$].Yb[0],A=0,$==16)return 16;var X=g[$+1].Yb;if(J(p,Y[A+2])){var ne=p,fe=0;if(J(ne,(re=Y)[(Ne=A)+3]))if(J(ne,re[Ne+6])){for(Y=0,Ne=2*(fe=J(ne,re[Ne+8]))+(re=J(ne,re[Ne+9+fe])),fe=0,re=FI[Ne];re[Y];++Y)fe+=fe+J(ne,re[Y]);fe+=3+(8<<Ne)}else J(ne,re[Ne+7])?(fe=7+2*J(ne,165),fe+=J(ne,145)):fe=5+J(ne,159);else fe=J(ne,re[Ne+4])?3+J(ne,re[Ne+5]):2;Y=X[2]}else fe=1,Y=X[1];X=W+$I[$],0>(ne=p).b&&k(ne);var Ne,re=ne.b,ve=(Ne=ne.Ca>>1)-(ne.I>>re)>>31;--ne.b,ne.Ca+=ve,ne.Ca|=1,ne.I-=(Ne+1&ve)<<re,H[X]=((fe^ve)-ve)*P[(0<$)+0]}return 16}function Cm(p){var g=p.rb[p.sb-1];g.la=0,g.Na=0,i(p.zc,0,0,p.zc.length),p.ja=0}function bo(p,g,A,P,$){$=p[g+A+32*P]+($>>3),p[g+A+32*P]=-256&$?0>$?0:255:$}function _r(p,g,A,P,$,H){bo(p,g,0,A,P+$),bo(p,g,1,A,P+H),bo(p,g,2,A,P-H),bo(p,g,3,A,P-$)}function Xa(p){return(20091*p>>16)+p}function Pm(p,g,A,P){var $,H=0,W=o(16);for($=0;4>$;++$){var Y=p[g+0]+p[g+8],X=p[g+0]-p[g+8],ne=(35468*p[g+4]>>16)-Xa(p[g+12]),fe=Xa(p[g+4])+(35468*p[g+12]>>16);W[H+0]=Y+fe,W[H+1]=X+ne,W[H+2]=X-ne,W[H+3]=Y-fe,H+=4,g++}for($=H=0;4>$;++$)Y=(p=W[H+0]+4)+W[H+8],X=p-W[H+8],ne=(35468*W[H+4]>>16)-Xa(W[H+12]),bo(A,P,0,0,Y+(fe=Xa(W[H+4])+(35468*W[H+12]>>16))),bo(A,P,1,0,X+ne),bo(A,P,2,0,X-ne),bo(A,P,3,0,Y-fe),H++,P+=32}function C1(p,g,A,P){var $=p[g+0]+4,H=35468*p[g+4]>>16,W=Xa(p[g+4]),Y=35468*p[g+1]>>16;_r(A,P,0,$+W,p=Xa(p[g+1]),Y),_r(A,P,1,$+H,p,Y),_r(A,P,2,$-H,p,Y),_r(A,P,3,$-W,p,Y)}function P1(p,g,A,P,$){Pm(p,g,A,P),$&&Pm(p,g+16,A,P+4)}function xa(p,g,A,P){Tc(p,g+0,A,P,1),Tc(p,g+32,A,P+128,1)}function Tm(p,g,A,P){var $;for(p=p[g+0]+4,$=0;4>$;++$)for(g=0;4>g;++g)bo(A,P,g,$,p)}function Rm(p,g,A,P){p[g+0]&&nn(p,g+0,A,P),p[g+16]&&nn(p,g+16,A,P+4),p[g+32]&&nn(p,g+32,A,P+128),p[g+48]&&nn(p,g+48,A,P+128+4)}function Bu(p,g,A,P){var $,H=o(16);for($=0;4>$;++$){var W=p[g+0+$]+p[g+12+$],Y=p[g+4+$]+p[g+8+$],X=p[g+4+$]-p[g+8+$],ne=p[g+0+$]-p[g+12+$];H[0+$]=W+Y,H[8+$]=W-Y,H[4+$]=ne+X,H[12+$]=ne-X}for($=0;4>$;++$)W=(p=H[0+4*$]+3)+H[3+4*$],Y=H[1+4*$]+H[2+4*$],X=H[1+4*$]-H[2+4*$],ne=p-H[3+4*$],A[P+0]=W+Y>>3,A[P+16]=ne+X>>3,A[P+32]=W-Y>>3,A[P+48]=ne-X>>3,P+=64}function yc(p,g,A){var P,$=g-32,H=qi,W=255-p[$-1];for(P=0;P<A;++P){var Y,X=H,ne=W+p[g-1];for(Y=0;Y<A;++Y)p[g+Y]=X[ne+p[$+Y]];g+=32}}function T1(p,g){yc(p,g,4)}function R1(p,g){yc(p,g,8)}function L1(p,g){yc(p,g,16)}function Of(p,g){var A;for(A=0;16>A;++A)r(p,g+32*A,p,g-32,16)}function Lm(p,g){var A;for(A=16;0<A;--A)i(p,g,p[g-1],16),g+=32}function Vo(p,g,A){var P;for(P=0;16>P;++P)i(g,A+32*P,p,16)}function O1(p,g){var A,P=16;for(A=0;16>A;++A)P+=p[g-1+32*A]+p[g+A-32];Vo(P>>5,p,g)}function bc(p,g){var A,P=8;for(A=0;16>A;++A)P+=p[g-1+32*A];Vo(P>>4,p,g)}function Mf(p,g){var A,P=8;for(A=0;16>A;++A)P+=p[g+A-32];Vo(P>>4,p,g)}function M1(p,g){Vo(128,p,g)}function Ct(p,g,A){return p+2*g+A+2>>2}function I1(p,g){var A,P=g-32;for(P=new Uint8Array([Ct(p[P-1],p[P+0],p[P+1]),Ct(p[P+0],p[P+1],p[P+2]),Ct(p[P+1],p[P+2],p[P+3]),Ct(p[P+2],p[P+3],p[P+4])]),A=0;4>A;++A)r(p,g+32*A,P,0,P.length)}function D1(p,g){var A=p[g-1],P=p[g-1+32],$=p[g-1+64],H=p[g-1+96];se(p,g+0,16843009*Ct(p[g-1-32],A,P)),se(p,g+32,16843009*Ct(A,P,$)),se(p,g+64,16843009*Ct(P,$,H)),se(p,g+96,16843009*Ct($,H,H))}function j1(p,g){var A,P=4;for(A=0;4>A;++A)P+=p[g+A-32]+p[g-1+32*A];for(P>>=3,A=0;4>A;++A)i(p,g+32*A,P,4)}function Za(p,g){var A=p[g-1+0],P=p[g-1+32],$=p[g-1+64],H=p[g-1-32],W=p[g+0-32],Y=p[g+1-32],X=p[g+2-32],ne=p[g+3-32];p[g+0+96]=Ct(P,$,p[g-1+96]),p[g+1+96]=p[g+0+64]=Ct(A,P,$),p[g+2+96]=p[g+1+64]=p[g+0+32]=Ct(H,A,P),p[g+3+96]=p[g+2+64]=p[g+1+32]=p[g+0+0]=Ct(W,H,A),p[g+3+64]=p[g+2+32]=p[g+1+0]=Ct(Y,W,H),p[g+3+32]=p[g+2+0]=Ct(X,Y,W),p[g+3+0]=Ct(ne,X,Y)}function Qa(p,g){var A=p[g+1-32],P=p[g+2-32],$=p[g+3-32],H=p[g+4-32],W=p[g+5-32],Y=p[g+6-32],X=p[g+7-32];p[g+0+0]=Ct(p[g+0-32],A,P),p[g+1+0]=p[g+0+32]=Ct(A,P,$),p[g+2+0]=p[g+1+32]=p[g+0+64]=Ct(P,$,H),p[g+3+0]=p[g+2+32]=p[g+1+64]=p[g+0+96]=Ct($,H,W),p[g+3+32]=p[g+2+64]=p[g+1+96]=Ct(H,W,Y),p[g+3+64]=p[g+2+96]=Ct(W,Y,X),p[g+3+96]=Ct(Y,X,X)}function B1(p,g){var A=p[g-1+0],P=p[g-1+32],$=p[g-1+64],H=p[g-1-32],W=p[g+0-32],Y=p[g+1-32],X=p[g+2-32],ne=p[g+3-32];p[g+0+0]=p[g+1+64]=H+W+1>>1,p[g+1+0]=p[g+2+64]=W+Y+1>>1,p[g+2+0]=p[g+3+64]=Y+X+1>>1,p[g+3+0]=X+ne+1>>1,p[g+0+96]=Ct($,P,A),p[g+0+64]=Ct(P,A,H),p[g+0+32]=p[g+1+96]=Ct(A,H,W),p[g+1+32]=p[g+2+96]=Ct(H,W,Y),p[g+2+32]=p[g+3+96]=Ct(W,Y,X),p[g+3+32]=Ct(Y,X,ne)}function F1(p,g){var A=p[g+0-32],P=p[g+1-32],$=p[g+2-32],H=p[g+3-32],W=p[g+4-32],Y=p[g+5-32],X=p[g+6-32],ne=p[g+7-32];p[g+0+0]=A+P+1>>1,p[g+1+0]=p[g+0+64]=P+$+1>>1,p[g+2+0]=p[g+1+64]=$+H+1>>1,p[g+3+0]=p[g+2+64]=H+W+1>>1,p[g+0+32]=Ct(A,P,$),p[g+1+32]=p[g+0+96]=Ct(P,$,H),p[g+2+32]=p[g+1+96]=Ct($,H,W),p[g+3+32]=p[g+2+96]=Ct(H,W,Y),p[g+3+64]=Ct(W,Y,X),p[g+3+96]=Ct(Y,X,ne)}function Fu(p,g){var A=p[g-1+0],P=p[g-1+32],$=p[g-1+64],H=p[g-1+96];p[g+0+0]=A+P+1>>1,p[g+2+0]=p[g+0+32]=P+$+1>>1,p[g+2+32]=p[g+0+64]=$+H+1>>1,p[g+1+0]=Ct(A,P,$),p[g+3+0]=p[g+1+32]=Ct(P,$,H),p[g+3+32]=p[g+1+64]=Ct($,H,H),p[g+3+64]=p[g+2+64]=p[g+0+96]=p[g+1+96]=p[g+2+96]=p[g+3+96]=H}function If(p,g){var A=p[g-1+0],P=p[g-1+32],$=p[g-1+64],H=p[g-1+96],W=p[g-1-32],Y=p[g+0-32],X=p[g+1-32],ne=p[g+2-32];p[g+0+0]=p[g+2+32]=A+W+1>>1,p[g+0+32]=p[g+2+64]=P+A+1>>1,p[g+0+64]=p[g+2+96]=$+P+1>>1,p[g+0+96]=H+$+1>>1,p[g+3+0]=Ct(Y,X,ne),p[g+2+0]=Ct(W,Y,X),p[g+1+0]=p[g+3+32]=Ct(A,W,Y),p[g+1+32]=p[g+3+64]=Ct(P,A,W),p[g+1+64]=p[g+3+96]=Ct($,P,A),p[g+1+96]=Ct(H,$,P)}function _c(p,g){var A;for(A=0;8>A;++A)r(p,g+32*A,p,g-32,8)}function $1(p,g){var A;for(A=0;8>A;++A)i(p,g,p[g-1],8),g+=32}function es(p,g,A){var P;for(P=0;8>P;++P)i(g,A+32*P,p,8)}function U1(p,g){var A,P=8;for(A=0;8>A;++A)P+=p[g+A-32]+p[g-1+32*A];es(P>>4,p,g)}function Df(p,g){var A,P=4;for(A=0;8>A;++A)P+=p[g+A-32];es(P>>3,p,g)}function jf(p,g){var A,P=4;for(A=0;8>A;++A)P+=p[g-1+32*A];es(P>>3,p,g)}function Om(p,g){es(128,p,g)}function ts(p,g,A){var P=p[g-A],$=p[g+0],H=3*($-P)+z1[1020+p[g-2*A]-p[g+A]],W=Um[112+(H+4>>3)];p[g-A]=qi[255+P+Um[112+(H+3>>3)]],p[g+0]=qi[255+$-W]}function Bf(p,g,A,P){var $=p[g+0],H=p[g+A];return xo[255+p[g-2*A]-p[g-A]]>P||xo[255+H-$]>P}function $u(p,g,A,P){return 4*xo[255+p[g-A]-p[g+0]]+xo[255+p[g-2*A]-p[g+A]]<=P}function Ff(p,g,A,P,$){var H=p[g-3*A],W=p[g-2*A],Y=p[g-A],X=p[g+0],ne=p[g+A],fe=p[g+2*A],Ne=p[g+3*A];return 4*xo[255+Y-X]+xo[255+W-ne]>P?0:xo[255+p[g-4*A]-H]<=$&&xo[255+H-W]<=$&&xo[255+W-Y]<=$&&xo[255+Ne-fe]<=$&&xo[255+fe-ne]<=$&&xo[255+ne-X]<=$}function wc(p,g,A,P){var $=2*P+1;for(P=0;16>P;++P)$u(p,g+P,A,$)&&ts(p,g+P,A)}function $f(p,g,A,P){var $=2*P+1;for(P=0;16>P;++P)$u(p,g+P*A,1,$)&&ts(p,g+P*A,1)}function Mm(p,g,A,P){var $;for($=3;0<$;--$)wc(p,g+=4*A,A,P)}function Im(p,g,A,P){var $;for($=3;0<$;--$)$f(p,g+=4,A,P)}function ns(p,g,A,P,$,H,W,Y){for(H=2*H+1;0<$--;){if(Ff(p,g,A,H,W))if(Bf(p,g,A,Y))ts(p,g,A);else{var X=p,ne=g,fe=A,Ne=X[ne-2*fe],re=X[ne-fe],ve=X[ne+0],Ee=X[ne+fe],Re=X[ne+2*fe],Se=27*(Me=z1[1020+3*(ve-re)+z1[1020+Ne-Ee]])+63>>7,Le=18*Me+63>>7,Me=9*Me+63>>7;X[ne-3*fe]=qi[255+X[ne-3*fe]+Me],X[ne-2*fe]=qi[255+Ne+Le],X[ne-fe]=qi[255+re+Se],X[ne+0]=qi[255+ve-Se],X[ne+fe]=qi[255+Ee-Le],X[ne+2*fe]=qi[255+Re-Me]}g+=P}}function rs(p,g,A,P,$,H,W,Y){for(H=2*H+1;0<$--;){if(Ff(p,g,A,H,W))if(Bf(p,g,A,Y))ts(p,g,A);else{var X=p,ne=g,fe=A,Ne=X[ne-fe],re=X[ne+0],ve=X[ne+fe],Ee=Um[112+(4+(Re=3*(re-Ne))>>3)],Re=Um[112+(Re+3>>3)],Se=Ee+1>>1;X[ne-2*fe]=qi[255+X[ne-2*fe]+Se],X[ne-fe]=qi[255+Ne+Re],X[ne+0]=qi[255+re-Ee],X[ne+fe]=qi[255+ve-Se]}g+=P}}function Dm(p,g,A,P,$,H){ns(p,g,A,1,16,P,$,H)}function xc(p,g,A,P,$,H){ns(p,g,1,A,16,P,$,H)}function jm(p,g,A,P,$,H){var W;for(W=3;0<W;--W)rs(p,g+=4*A,A,1,16,P,$,H)}function S(p,g,A,P,$,H){var W;for(W=3;0<W;--W)rs(p,g+=4,1,A,16,P,$,H)}function F(p,g,A,P,$,H,W,Y){ns(p,g,$,1,8,H,W,Y),ns(A,P,$,1,8,H,W,Y)}function ie(p,g,A,P,$,H,W,Y){ns(p,g,1,$,8,H,W,Y),ns(A,P,1,$,8,H,W,Y)}function ce(p,g,A,P,$,H,W,Y){rs(p,g+4*$,$,1,8,H,W,Y),rs(A,P+4*$,$,1,8,H,W,Y)}function xe(p,g,A,P,$,H,W,Y){rs(p,g+4,1,$,8,H,W,Y),rs(A,P+4,1,$,8,H,W,Y)}function Oe(){this.ba=new qt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function je(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function et(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function st(){this.ua=0,this.Wa=new Pe,this.vb=new Pe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new me,this.yc=new z}function Nt(){this.xb=this.a=0,this.l=new Du,this.ca=new qt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new st,this.ab=0,this.gc=a(4,et),this.Oc=0}function It(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Du,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Xt(p,g,A,P,$,H,W){for(p=p==null?0:p[g+0],g=0;g<W;++g)$[H+g]=p+A[P+g]&255,p=$[H+g]}function Mn(p,g,A,P,$,H,W){var Y;if(p==null)Xt(null,null,A,P,$,H,W);else for(Y=0;Y<W;++Y)$[H+Y]=p[g+Y]+A[P+Y]&255}function hr(p,g,A,P,$,H,W){if(p==null)Xt(null,null,A,P,$,H,W);else{var Y,X=p[g+0],ne=X,fe=X;for(Y=0;Y<W;++Y)ne=fe+(X=p[g+Y])-ne,fe=A[P+Y]+(-256&ne?0>ne?0:255:ne)&255,ne=X,$[H+Y]=fe}}function gn(p,g,A,P){var $=g.width,H=g.o;if(t(p!=null&&g!=null),0>A||0>=P||A+P>H)return null;if(!p.Cc){if(p.ga==null){var W;if(p.ga=new It,(W=p.ga==null)||(W=g.width*g.o,t(p.Gb.length==0),p.Gb=o(W),p.Uc=0,p.Gb==null?W=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,W=1),W=!W),!W){W=p.ga;var Y=p.Fa,X=p.P,ne=p.qc,fe=p.mb,Ne=p.nb,re=X+1,ve=ne-1,Ee=W.l;if(t(Y!=null&&fe!=null&&g!=null),rl[0]=null,rl[1]=Xt,rl[2]=Mn,rl[3]=hr,W.ca=fe,W.tb=Ne,W.c=g.width,W.i=g.height,t(0<W.c&&0<W.i),1>=ne)g=0;else if(W.$a=3&Y[X+0],W.Z=Y[X+0]>>2&3,W.Lc=Y[X+0]>>4&3,X=Y[X+0]>>6&3,0>W.$a||1<W.$a||4<=W.Z||1<W.Lc||X)g=0;else if(Ee.put=vt,Ee.ac=va,Ee.bc=Ya,Ee.ma=W,Ee.width=g.width,Ee.height=g.height,Ee.Da=g.Da,Ee.v=g.v,Ee.va=g.va,Ee.j=g.j,Ee.o=g.o,W.$a)e:{t(W.$a==1),g=gc();t:for(;;){if(g==null){g=0;break e}if(t(W!=null),W.mc=g,g.c=W.c,g.i=W.i,g.l=W.l,g.l.ma=W,g.l.width=W.c,g.l.height=W.i,g.a=0,ae(g.m,Y,re,ve),!ba(W.c,W.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&Go(g.s)?(W.ic=1,Y=g.c*g.i,g.Ta=null,g.Ua=0,g.V=o(Y),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(W.ic=0,g=vc(g,W.c)),!g))break t;g=1;break e}W.mc=null,g=0}else g=ve>=W.c*W.i;W=!g}if(W)return null;p.ga.Lc!=1?p.Ga=0:P=H-A}t(p.ga!=null),t(A+P<=H);e:{if(g=(Y=p.ga).c,H=Y.l.o,Y.$a==0){if(re=p.rc,ve=p.Vc,Ee=p.Fa,X=p.P+1+A*g,ne=p.mb,fe=p.nb+A*g,t(X<=p.P+p.qc),Y.Z!=0)for(t(rl[Y.Z]!=null),W=0;W<P;++W)rl[Y.Z](re,ve,Ee,X,ne,fe,g),re=ne,ve=fe,fe+=g,X+=g;else for(W=0;W<P;++W)r(ne,fe,Ee,X,g),re=ne,ve=fe,fe+=g,X+=g;p.rc=re,p.Vc=ve}else{if(t(Y.mc!=null),g=A+P,t((W=Y.mc)!=null),t(g<=W.i),W.C>=g)g=1;else if(Y.ic||Wo(),Y.ic){Y=W.V,re=W.Ba,ve=W.c;var Re=W.i,Se=(Ee=1,X=W.$/ve,ne=W.$%ve,fe=W.m,Ne=W.s,W.$),Le=ve*Re,Me=ve*g,$e=Ne.wc,Be=Se<Me?$r(Ne,ne,X):null;t(Se<=Le),t(g<=Re),t(Go(Ne));t:for(;;){for(;!fe.h&&Se<Me;){if(ne&$e||(Be=$r(Ne,ne,X)),t(Be!=null),N(fe),256>(Re=$n(Be.G[0],Be.H[0],fe)))Y[re+Se]=Re,++Se,++ne>=ve&&(ne=0,++X<=g&&!(X%16)&&qo(W,X));else{if(!(280>Re)){Ee=0;break t}Re=mo(Re-256,fe);var ct,Je=$n(Be.G[4],Be.H[4],fe);if(N(fe),!(Se>=(Je=go(ve,Je=mo(Je,fe)))&&Le-Se>=Re)){Ee=0;break t}for(ct=0;ct<Re;++ct)Y[re+Se+ct]=Y[re+Se+ct-Je];for(Se+=Re,ne+=Re;ne>=ve;)ne-=ve,++X<=g&&!(X%16)&&qo(W,X);Se<Me&&ne&$e&&(Be=$r(Ne,ne,X))}t(fe.h==ee(fe))}qo(W,X>g?g:X);break t}!Ee||fe.h&&Se<Le?(Ee=0,W.a=fe.h?5:3):W.$=Se,g=Ee}else g=Ho(W,W.V,W.Ba,W.c,W.i,g,Ou);if(!g){P=0;break e}}A+P>=H&&(p.Cc=1),P=1}if(!P)return null;if(p.Cc&&((P=p.ga)!=null&&(P.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+A*$}function wr(p,g,A,P,$,H){for(;0<$--;){var W,Y=p,X=g+(A?1:0),ne=p,fe=g+(A?0:3);for(W=0;W<P;++W){var Ne=ne[fe+4*W];Ne!=255&&(Ne*=32897,Y[X+4*W+0]=Y[X+4*W+0]*Ne>>23,Y[X+4*W+1]=Y[X+4*W+1]*Ne>>23,Y[X+4*W+2]=Y[X+4*W+2]*Ne>>23)}g+=H}}function pr(p,g,A,P,$){for(;0<P--;){var H;for(H=0;H<A;++H){var W=p[g+2*H+0],Y=15&(ne=p[g+2*H+1]),X=4369*Y,ne=(240&ne|ne>>4)*X>>16;p[g+2*H+0]=(240&W|W>>4)*X>>16&240|(15&W|W<<4)*X>>16>>4&15,p[g+2*H+1]=240&ne|Y}g+=$}}function Ur(p,g,A,P,$,H,W,Y){var X,ne,fe=255;for(ne=0;ne<$;++ne){for(X=0;X<P;++X){var Ne=p[g+X];H[W+4*X]=Ne,fe&=Ne}g+=A,W+=Y}return fe!=255}function is(p,g,A,P,$){var H;for(H=0;H<$;++H)A[P+H]=p[g+H]>>8}function Wo(){Zf=wr,VE=pr,WE=Ur,KE=is}function os(p,g,A){D[p]=function(P,$,H,W,Y,X,ne,fe,Ne,re,ve,Ee,Re,Se,Le,Me,$e){var Be,ct=$e-1>>1,Je=Y[X+0]|ne[fe+0]<<16,jt=Ne[re+0]|ve[Ee+0]<<16;t(P!=null);var it=3*Je+jt+131074>>2;for(g(P[$+0],255&it,it>>16,Re,Se),H!=null&&(it=3*jt+Je+131074>>2,g(H[W+0],255&it,it>>16,Le,Me)),Be=1;Be<=ct;++Be){var Kt=Y[X+Be]|ne[fe+Be]<<16,Er=Ne[re+Be]|ve[Ee+Be]<<16,Bt=Je+Kt+jt+Er+524296,ot=Bt+2*(Kt+jt)>>3;it=ot+Je>>1,Je=(Bt=Bt+2*(Je+Er)>>3)+Kt>>1,g(P[$+2*Be-1],255&it,it>>16,Re,Se+(2*Be-1)*A),g(P[$+2*Be-0],255&Je,Je>>16,Re,Se+(2*Be-0)*A),H!=null&&(it=Bt+jt>>1,Je=ot+Er>>1,g(H[W+2*Be-1],255&it,it>>16,Le,Me+(2*Be-1)*A),g(H[W+2*Be+0],255&Je,Je>>16,Le,Me+(2*Be+0)*A)),Je=Kt,jt=Er}1&$e||(it=3*Je+jt+131074>>2,g(P[$+$e-1],255&it,it>>16,Re,Se+($e-1)*A),H!=null&&(it=3*jt+Je+131074>>2,g(H[W+$e-1],255&it,it>>16,Le,Me+($e-1)*A)))}}function Uf(){Eo[zm]=VI,Eo[Gm]=oS,Eo[eS]=WI,Eo[qm]=aS,Eo[Hm]=sS,Eo[G1]=lS,Eo[tS]=KI,Eo[q1]=oS,Eo[H1]=aS,Eo[Vm]=sS,Eo[V1]=lS}function Uu(p){return p&-16384?0>p?0:255:p>>YI}function Ws(p,g){return Uu((19077*p>>8)+(26149*g>>8)-14234)}function Ec(p,g,A){return Uu((19077*p>>8)-(6419*g>>8)-(13320*A>>8)+8708)}function Sc(p,g){return Uu((19077*p>>8)+(33050*g>>8)-17685)}function Ks(p,g,A,P,$){P[$+0]=Ws(p,A),P[$+1]=Ec(p,g,A),P[$+2]=Sc(p,g)}function zr(p,g,A,P,$){P[$+0]=Sc(p,g),P[$+1]=Ec(p,g,A),P[$+2]=Ws(p,A)}function Nc(p,g,A,P,$){var H=Ec(p,g,A);g=H<<3&224|Sc(p,g)>>3,P[$+0]=248&Ws(p,A)|H>>5,P[$+1]=g}function Ac(p,g,A,P,$){var H=240&Sc(p,g)|15;P[$+0]=240&Ws(p,A)|Ec(p,g,A)>>4,P[$+1]=H}function zf(p,g,A,P,$){P[$+0]=255,Ks(p,g,A,P,$+1)}function Gf(p,g,A,P,$){zr(p,g,A,P,$),P[$+3]=255}function gi(p,g,A,P,$){Ks(p,g,A,P,$),P[$+3]=255}function as(p,g,A){D[p]=function(P,$,H,W,Y,X,ne,fe,Ne){for(var re=fe+(-2&Ne)*A;fe!=re;)g(P[$+0],H[W+0],Y[X+0],ne,fe),g(P[$+1],H[W+0],Y[X+0],ne,fe+A),$+=2,++W,++X,fe+=2*A;1&Ne&&g(P[$+0],H[W+0],Y[X+0],ne,fe)}}function zu(p,g,A){return A==0?p==0?g==0?6:5:g==0?4:0:A}function Bm(p,g,A,P,$){switch(p>>>30){case 3:Tc(g,A,P,$,0);break;case 2:wo(g,A,P,$);break;case 1:nn(g,A,P,$)}}function _o(p,g){var A,P,$=g.M,H=g.Nb,W=p.oc,Y=p.pc+40,X=p.oc,ne=p.pc+584,fe=p.oc,Ne=p.pc+600;for(A=0;16>A;++A)W[Y+32*A-1]=129;for(A=0;8>A;++A)X[ne+32*A-1]=129,fe[Ne+32*A-1]=129;for(0<$?W[Y-1-32]=X[ne-1-32]=fe[Ne-1-32]=129:(i(W,Y-32-1,127,21),i(X,ne-32-1,127,9),i(fe,Ne-32-1,127,9)),P=0;P<p.za;++P){var re=g.ya[g.aa+P];if(0<P){for(A=-1;16>A;++A)r(W,Y+32*A-4,W,Y+32*A+12,4);for(A=-1;8>A;++A)r(X,ne+32*A-4,X,ne+32*A+4,4),r(fe,Ne+32*A-4,fe,Ne+32*A+4,4)}var ve=p.Gd,Ee=p.Hd+P,Re=re.ad,Se=re.Hc;if(0<$&&(r(W,Y-32,ve[Ee].y,0,16),r(X,ne-32,ve[Ee].f,0,8),r(fe,Ne-32,ve[Ee].ea,0,8)),re.Za){var Le=W,Me=Y-32+16;for(0<$&&(P>=p.za-1?i(Le,Me,ve[Ee].y[15],4):r(Le,Me,ve[Ee+1].y,0,4)),A=0;4>A;A++)Le[Me+128+A]=Le[Me+256+A]=Le[Me+384+A]=Le[Me+0+A];for(A=0;16>A;++A,Se<<=2)Le=W,Me=Y+uS[A],Ko[re.Ob[A]](Le,Me),Bm(Se,Re,16*+A,Le,Me)}else if(Le=zu(P,$,re.Ob[0]),nl[Le](W,Y),Se!=0)for(A=0;16>A;++A,Se<<=2)Bm(Se,Re,16*+A,W,Y+uS[A]);for(A=re.Gc,Le=zu(P,$,re.Dd),cs[Le](X,ne),cs[Le](fe,Ne),Se=Re,Le=X,Me=ne,255&(re=0|A)&&(170&re?Na(Se,256,Le,Me):dn(Se,256,Le,Me)),re=fe,Se=Ne,255&(A>>=8)&&(170&A?Na(Re,320,re,Se):dn(Re,320,re,Se)),$<p.Ub-1&&(r(ve[Ee].y,0,W,Y+480,16),r(ve[Ee].f,0,X,ne+224,8),r(ve[Ee].ea,0,fe,Ne+224,8)),A=8*H*p.B,ve=p.sa,Ee=p.ta+16*P+16*H*p.R,Re=p.qa,re=p.ra+8*P+A,Se=p.Ha,Le=p.Ia+8*P+A,A=0;16>A;++A)r(ve,Ee+A*p.R,W,Y+32*A,16);for(A=0;8>A;++A)r(Re,re+A*p.B,X,ne+32*A,8),r(Se,Le+A*p.B,fe,Ne+32*A,8)}}function kc(p,g,A,P,$,H,W,Y,X){var ne=[0],fe=[0],Ne=0,re=X!=null?X.kd:0,ve=X??new je;if(p==null||12>A)return 7;ve.data=p,ve.w=g,ve.ha=A,g=[g],A=[A],ve.gb=[ve.gb];e:{var Ee=g,Re=A,Se=ve.gb;if(t(p!=null),t(Re!=null),t(Se!=null),Se[0]=0,12<=Re[0]&&!n(p,Ee[0],"RIFF")){if(n(p,Ee[0]+8,"WEBP")){Se=3;break e}var Le=Ie(p,Ee[0]+4);if(12>Le||4294967286<Le){Se=3;break e}if(re&&Le>Re[0]-8){Se=7;break e}Se[0]=Le,Ee[0]+=12,Re[0]-=12}Se=0}if(Se!=0)return Se;for(Le=0<ve.gb[0],A=A[0];;){e:{var Me=p;Re=g,Se=A;var $e=ne,Be=fe,ct=Ee=[0];if((it=Ne=[Ne])[0]=0,8>Se[0])Se=7;else{if(!n(Me,Re[0],"VP8X")){if(Ie(Me,Re[0]+4)!=10){Se=3;break e}if(18>Se[0]){Se=7;break e}var Je=Ie(Me,Re[0]+8),jt=1+Ae(Me,Re[0]+12);if(2147483648<=jt*(Me=1+Ae(Me,Re[0]+15))){Se=3;break e}ct!=null&&(ct[0]=Je),$e!=null&&($e[0]=jt),Be!=null&&(Be[0]=Me),Re[0]+=18,Se[0]-=18,it[0]=1}Se=0}}if(Ne=Ne[0],Ee=Ee[0],Se!=0)return Se;if(Re=!!(2&Ee),!Le&&Ne)return 3;if(H!=null&&(H[0]=!!(16&Ee)),W!=null&&(W[0]=Re),Y!=null&&(Y[0]=0),W=ne[0],Ee=fe[0],Ne&&Re&&X==null){Se=0;break}if(4>A){Se=7;break}if(Le&&Ne||!Le&&!Ne&&!n(p,g[0],"ALPH")){A=[A],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{Je=p,Se=g,Le=A;var it=ve.gb;$e=ve.na,Be=ve.P,ct=ve.Sa,jt=22,t(Je!=null),t(Le!=null),Me=Se[0];var Kt=Le[0];for(t($e!=null),t(ct!=null),$e[0]=null,Be[0]=null,ct[0]=0;;){if(Se[0]=Me,Le[0]=Kt,8>Kt){Se=7;break e}var Er=Ie(Je,Me+4);if(4294967286<Er){Se=3;break e}var Bt=8+Er+1&-2;if(jt+=Bt,0<it&&jt>it){Se=3;break e}if(!n(Je,Me,"VP8 ")||!n(Je,Me,"VP8L")){Se=0;break e}if(Kt[0]<Bt){Se=7;break e}n(Je,Me,"ALPH")||($e[0]=Je,Be[0]=Me+8,ct[0]=Er),Me+=Bt,Kt-=Bt}}if(A=A[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],Se!=0)break}A=[A],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(it=p,Se=g,Le=A,$e=ve.gb[0],Be=ve.Ja,ct=ve.xa,Je=Se[0],Me=!n(it,Je,"VP8 "),jt=!n(it,Je,"VP8L"),t(it!=null),t(Le!=null),t(Be!=null),t(ct!=null),8>Le[0])Se=7;else{if(Me||jt){if(it=Ie(it,Je+4),12<=$e&&it>$e-12){Se=3;break e}if(re&&it>Le[0]-8){Se=7;break e}Be[0]=it,Se[0]+=8,Le[0]-=8,ct[0]=jt}else ct[0]=5<=Le[0]&&it[Je+0]==47&&!(it[Je+4]>>5),Be[0]=Le[0];Se=0}if(A=A[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],g=g[0],Se!=0)break;if(4294967286<ve.Ja)return 3;if(Y==null||Re||(Y[0]=ve.xa?2:1),W=[W],Ee=[Ee],ve.xa){if(5>A){Se=7;break}Y=W,re=Ee,Re=H,p==null||5>A?p=0:5<=A&&p[g+0]==47&&!(p[g+4]>>5)?(Le=[0],it=[0],$e=[0],ae(Be=new G,p,g,A),Ja(Be,Le,it,$e)?(Y!=null&&(Y[0]=Le[0]),re!=null&&(re[0]=it[0]),Re!=null&&(Re[0]=$e[0]),p=1):p=0):p=0}else{if(10>A){Se=7;break}Y=Ee,p==null||10>A||!km(p,g+3,A-3)?p=0:(re=p[g+0]|p[g+1]<<8|p[g+2]<<16,Re=16383&(p[g+7]<<8|p[g+6]),p=16383&(p[g+9]<<8|p[g+8]),1&re||3<(re>>1&7)||!(re>>4&1)||re>>5>=ve.Ja||!Re||!p?p=0:(W&&(W[0]=Re),Y&&(Y[0]=p),p=1))}if(!p||(W=W[0],Ee=Ee[0],Ne&&(ne[0]!=W||fe[0]!=Ee)))return 3;X!=null&&(X[0]=ve,X.offset=g-X.w,t(4294967286>g-X.w),t(X.offset==X.ha-A));break}return Se==0||Se==7&&Ne&&X==null?(H!=null&&(H[0]|=ve.na!=null&&0<ve.na.length),P!=null&&(P[0]=W),$!=null&&($[0]=Ee),0):Se}function qf(p,g,A){var P=g.width,$=g.height,H=0,W=0,Y=P,X=$;if(g.Da=p!=null&&0<p.Da,g.Da&&(Y=p.cd,X=p.bd,H=p.v,W=p.j,11>A||(H&=-2,W&=-2),0>H||0>W||0>=Y||0>=X||H+Y>P||W+X>$))return 0;if(g.v=H,g.j=W,g.va=H+Y,g.o=W+X,g.U=Y,g.T=X,g.da=p!=null&&0<p.da,g.da){if(!oe(Y,X,A=[p.ib],H=[p.hb]))return 0;g.ib=A[0],g.hb=H[0]}return g.ob=p!=null&&p.ob,g.Kb=p==null||!p.Sd,g.da&&(g.ob=g.ib<3*P/4&&g.hb<3*$/4,g.Kb=0),1}function Hf(p){if(p==null)return 2;if(11>p.S){var g=p.f.RGBA;g.fb+=(p.height-1)*g.A,g.A=-g.A}else g=p.f.kb,p=p.height,g.O+=(p-1)*g.fa,g.fa=-g.fa,g.N+=(p-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(p-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(p-1)*g.lb,g.lb=-g.lb);return 0}function Ys(p,g,A,P){if(P==null||0>=p||0>=g)return 2;if(A!=null){if(A.Da){var $=A.cd,H=A.bd,W=-2&A.v,Y=-2&A.j;if(0>W||0>Y||0>=$||0>=H||W+$>p||Y+H>g)return 2;p=$,g=H}if(A.da){if(!oe(p,g,$=[A.ib],H=[A.hb]))return 2;p=$[0],g=H[0]}}P.width=p,P.height=g;e:{var X=P.width,ne=P.height;if(p=P.S,0>=X||0>=ne||!(p>=zm&&13>p))p=2;else{if(0>=P.Rd&&P.sd==null){W=H=$=g=0;var fe=(Y=X*dS[p])*ne;if(11>p||(H=(ne+1)/2*(g=(X+1)/2),p==12&&(W=($=X)*ne)),(ne=o(fe+2*H+W))==null){p=1;break e}P.sd=ne,11>p?((X=P.f.RGBA).eb=ne,X.fb=0,X.A=Y,X.size=fe):((X=P.f.kb).y=ne,X.O=0,X.fa=Y,X.Fd=fe,X.f=ne,X.N=0+fe,X.Ab=g,X.Cd=H,X.ea=ne,X.W=0+fe+H,X.Db=g,X.Ed=H,p==12&&(X.F=ne,X.J=0+fe+2*H),X.Tc=W,X.lb=$)}if(g=1,$=P.S,H=P.width,W=P.height,$>=zm&&13>$)if(11>$)p=P.f.RGBA,g&=(Y=Math.abs(p.A))*(W-1)+H<=p.size,g&=Y>=H*dS[$],g&=p.eb!=null;else{p=P.f.kb,Y=(H+1)/2,fe=(W+1)/2,X=Math.abs(p.fa),ne=Math.abs(p.Ab);var Ne=Math.abs(p.Db),re=Math.abs(p.lb),ve=re*(W-1)+H;g&=X*(W-1)+H<=p.Fd,g&=ne*(fe-1)+Y<=p.Cd,g=(g&=Ne*(fe-1)+Y<=p.Ed)&X>=H&ne>=Y&Ne>=Y,g&=p.y!=null,g&=p.f!=null,g&=p.ea!=null,$==12&&(g&=re>=H,g&=ve<=p.Tc,g&=p.F!=null)}else g=0;p=g?0:2}}return p!=0||A!=null&&A.fd&&(p=Hf(P)),p}var Cc=64,zi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Gi=24,Js=32,ss=8,Xs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];he("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(p){return p},D.Predictor2=function(p,g,A){return g[A+0]},D.Predictor3=function(p,g,A){return g[A+1]},D.Predictor4=function(p,g,A){return g[A-1]},D.Predictor5=function(p,g,A){return De(De(p,g[A+1]),g[A+0])},D.Predictor6=function(p,g,A){return De(p,g[A-1])},D.Predictor7=function(p,g,A){return De(p,g[A+0])},D.Predictor8=function(p,g,A){return De(g[A-1],g[A+0])},D.Predictor9=function(p,g,A){return De(g[A+0],g[A+1])},D.Predictor10=function(p,g,A){return De(De(p,g[A-1]),De(g[A+0],g[A+1]))},D.Predictor11=function(p,g,A){var P=g[A+0];return 0>=tt(P>>24&255,p>>24&255,(g=g[A-1])>>24&255)+tt(P>>16&255,p>>16&255,g>>16&255)+tt(P>>8&255,p>>8&255,g>>8&255)+tt(255&P,255&p,255&g)?P:p},D.Predictor12=function(p,g,A){var P=g[A+0];return(Te((p>>24&255)+(P>>24&255)-((g=g[A-1])>>24&255))<<24|Te((p>>16&255)+(P>>16&255)-(g>>16&255))<<16|Te((p>>8&255)+(P>>8&255)-(g>>8&255))<<8|Te((255&p)+(255&P)-(255&g)))>>>0},D.Predictor13=function(p,g,A){var P=g[A-1];return(Ge((p=De(p,g[A+0]))>>24&255,P>>24&255)<<24|Ge(p>>16&255,P>>16&255)<<16|Ge(p>>8&255,P>>8&255)<<8|Ge(255&p,255&P))>>>0};var Vf=D.PredictorAdd0;D.PredictorAdd1=At,he("Predictor2","PredictorAdd2"),he("Predictor3","PredictorAdd3"),he("Predictor4","PredictorAdd4"),he("Predictor5","PredictorAdd5"),he("Predictor6","PredictorAdd6"),he("Predictor7","PredictorAdd7"),he("Predictor8","PredictorAdd8"),he("Predictor9","PredictorAdd9"),he("Predictor10","PredictorAdd10"),he("Predictor11","PredictorAdd11"),he("Predictor12","PredictorAdd12"),he("Predictor13","PredictorAdd13");var Gu=D.PredictorAdd2;nt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var Zn,Fm=D.ColorIndexInverseTransform,Ea=D.MapARGB,Sa=D.VP8LColorIndexInverseTransformAlpha,Wf=D.MapAlpha,Kf=D.VP8LPredictorsAdd=[];Kf.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var Yf,Jf,Zs,Qs,el,Pc,tl,Tc,wo,Na,nn,dn,Qn,xr,ls,Xf,qu,$m,$E,UE,zE,GE,qE,HE,Zf,VE,WE,KE,YE=o(511),JE=o(2041),XE=o(225),ZE=o(767),QE=0,z1=JE,Um=XE,qi=ZE,xo=YE,zm=0,Gm=1,eS=2,qm=3,Hm=4,G1=5,tS=6,q1=7,H1=8,Vm=9,V1=10,LI=[2,3,7],OI=[3,3,11],nS=[280,256,256,256,40],MI=[0,1,1,1,0],II=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],DI=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],jI=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],BI=8,W1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],K1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Qf=null,FI=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],$I=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],rS=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],UI=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],zI=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],GI=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],qI=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],nl=[],Ko=[],cs=[],HI=1,iS=2,rl=[],Eo=[];os("UpsampleRgbLinePair",Ks,3),os("UpsampleBgrLinePair",zr,3),os("UpsampleRgbaLinePair",gi,4),os("UpsampleBgraLinePair",Gf,4),os("UpsampleArgbLinePair",zf,4),os("UpsampleRgba4444LinePair",Ac,2),os("UpsampleRgb565LinePair",Nc,2);var VI=D.UpsampleRgbLinePair,WI=D.UpsampleBgrLinePair,oS=D.UpsampleRgbaLinePair,aS=D.UpsampleBgraLinePair,sS=D.UpsampleArgbLinePair,lS=D.UpsampleRgba4444LinePair,KI=D.UpsampleRgb565LinePair,Wm=16,Km=1<<Wm-1,eh=-227,Y1=482,YI=6,cS=0,JI=o(256),XI=o(256),ZI=o(256),QI=o(256),e8=o(Y1-eh),t8=o(Y1-eh);as("YuvToRgbRow",Ks,3),as("YuvToBgrRow",zr,3),as("YuvToRgbaRow",gi,4),as("YuvToBgraRow",Gf,4),as("YuvToArgbRow",zf,4),as("YuvToRgba4444Row",Ac,2),as("YuvToRgb565Row",Nc,2);var uS=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ym=[0,2,8],n8=[8,7,6,4,4,2,2,2,1,1,1,1],r8=1;this.WebPDecodeRGBA=function(p,g,A,P,$){var H=Gm,W=new Oe,Y=new qt;W.ba=Y,Y.S=H,Y.width=[Y.width],Y.height=[Y.height];var X=Y.width,ne=Y.height,fe=new gt;if(fe==null||p==null)var Ne=2;else t(fe!=null),Ne=kc(p,g,A,fe.width,fe.height,fe.Pd,fe.Qd,fe.format,null);if(Ne!=0?X=0:(X!=null&&(X[0]=fe.width[0]),ne!=null&&(ne[0]=fe.height[0]),X=1),X){Y.width=Y.width[0],Y.height=Y.height[0],P!=null&&(P[0]=Y.width),$!=null&&($[0]=Y.height);e:{if(P=new Du,($=new je).data=p,$.w=g,$.ha=A,$.kd=1,g=[0],t($!=null),((p=kc($.data,$.w,$.ha,null,null,null,g,null,$))==0||p==7)&&g[0]&&(p=4),(g=p)==0){if(t(W!=null),P.data=$.data,P.w=$.w+$.offset,P.ha=$.ha-$.offset,P.put=vt,P.ac=va,P.bc=Ya,P.ma=W,$.xa){if((p=gc())==null){W=1;break e}if(function(re,ve){var Ee=[0],Re=[0],Se=[0];t:for(;;){if(re==null)return 0;if(ve==null)return re.a=2,0;if(re.l=ve,re.a=0,ae(re.m,ve.data,ve.w,ve.ha),!Ja(re.m,Ee,Re,Se)){re.a=3;break t}if(re.xb=iS,ve.width=Ee[0],ve.height=Re[0],!ba(Ee[0],Re[0],1,re,null))break t;return 1}return t(re.a!=0),0}(p,P)){if(P=(g=Ys(P.width,P.height,W.Oa,W.ba))==0){t:{P=p;n:for(;;){if(P==null){P=0;break t}if(t(P.s.yc!=null),t(P.s.Ya!=null),t(0<P.s.Wb),t((A=P.l)!=null),t(($=A.ma)!=null),P.xb!=0){if(P.ca=$.ba,P.tb=$.tb,t(P.ca!=null),!qf($.Oa,A,qm)){P.a=2;break n}if(!vc(P,A.width)||A.da)break n;if((A.da||wt(P.ca.S))&&Wo(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&Wo()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!U(P.s.vb,P.s.Wa.Xa)){P.a=1;break n}P.xb=0}if(!Ho(P,P.V,P.Ba,P.c,P.i,A.o,Vs))break n;$.Dc=P.Ma,P=1;break t}t(P.a!=0),P=0}P=!P}P&&(g=p.a)}else g=p.a}else{if((p=new k1)==null){W=1;break e}if(p.Fa=$.na,p.P=$.P,p.qc=$.Sa,wa(p,P)){if((g=Ys(P.width,P.height,W.Oa,W.ba))==0){if(p.Aa=0,A=W.Oa,t(($=p)!=null),A!=null){if(0<(X=0>(X=A.Md)?0:100<X?255:255*X/100)){for(ne=fe=0;4>ne;++ne)12>(Ne=$.pb[ne]).lc&&(Ne.ia=X*n8[0>Ne.lc?0:Ne.lc]>>3),fe|=Ne.ia;fe&&(alert("todo:VP8InitRandom"),$.ia=1)}$.Ga=A.Id,100<$.Ga?$.Ga=100:0>$.Ga&&($.Ga=0)}(function(re,ve){if(re==null)return 0;if(ve==null)return fr(re,2,"NULL VP8Io parameter in VP8Decode().");if(!re.cb&&!wa(re,ve))return 0;if(t(re.cb),ve.ac==null||ve.ac(ve)){ve.ob&&(re.L=0);var Ee=Ym[re.L];if(re.L==2?(re.yb=0,re.zb=0):(re.yb=ve.v-Ee>>4,re.zb=ve.j-Ee>>4,0>re.yb&&(re.yb=0),0>re.zb&&(re.zb=0)),re.Va=ve.o+15+Ee>>4,re.Hb=ve.va+15+Ee>>4,re.Hb>re.za&&(re.Hb=re.za),re.Va>re.Ub&&(re.Va=re.Ub),0<re.L){var Re=re.ed;for(Ee=0;4>Ee;++Ee){var Se;if(re.Qa.Cb){var Le=re.Qa.Lb[Ee];re.Qa.Fb||(Le+=Re.Tb)}else Le=Re.Tb;for(Se=0;1>=Se;++Se){var Me=re.gd[Ee][Se],$e=Le;if(Re.Pc&&($e+=Re.vd[0],Se&&($e+=Re.od[0])),0<($e=0>$e?0:63<$e?63:$e)){var Be=$e;0<Re.wb&&(Be=4<Re.wb?Be>>2:Be>>1)>9-Re.wb&&(Be=9-Re.wb),1>Be&&(Be=1),Me.dd=Be,Me.tc=2*$e+Be,Me.ld=40<=$e?2:15<=$e?1:0}else Me.tc=0;Me.La=Se}}}Ee=0}else fr(re,6,"Frame setup failed"),Ee=re.a;if(Ee=Ee==0){if(Ee){re.$c=0,0<re.Aa||(re.Ic=r8);t:{Ee=re.Ic,Re=4*(Be=re.za);var ct=32*Be,Je=Be+1,jt=0<re.L?Be*(0<re.Aa?2:1):0,it=(re.Aa==2?2:1)*Be;if((Me=Re+832+(Se=3*(16*Ee+Ym[re.L])/2*ct)+(Le=re.Fa!=null&&0<re.Fa.length?re.Kc.c*re.Kc.i:0))!=Me)Ee=0;else{if(Me>re.Vb){if(re.Vb=0,re.Ec=o(Me),re.Fc=0,re.Ec==null){Ee=fr(re,1,"no memory during frame initialization.");break t}re.Vb=Me}Me=re.Ec,$e=re.Fc,re.Ac=Me,re.Bc=$e,$e+=Re,re.Gd=a(ct,Nm),re.Hd=0,re.rb=a(Je+1,Rf),re.sb=1,re.wa=jt?a(jt,yo):null,re.Y=0,re.D.Nb=0,re.D.wa=re.wa,re.D.Y=re.Y,0<re.Aa&&(re.D.Y+=Be),t(!0),re.oc=Me,re.pc=$e,$e+=832,re.ya=a(it,Lf),re.aa=0,re.D.ya=re.ya,re.D.aa=re.aa,re.Aa==2&&(re.D.aa+=Be),re.R=16*Be,re.B=8*Be,Be=(ct=Ym[re.L])*re.R,ct=ct/2*re.B,re.sa=Me,re.ta=$e+Be,re.qa=re.sa,re.ra=re.ta+16*Ee*re.R+ct,re.Ha=re.qa,re.Ia=re.ra+8*Ee*re.B+ct,re.$c=0,$e+=Se,re.mb=Le?Me:null,re.nb=Le?$e:null,t($e+Le<=re.Fc+re.Vb),Cm(re),i(re.Ac,re.Bc,0,Re),Ee=1}}if(Ee){if(ve.ka=0,ve.y=re.sa,ve.O=re.ta,ve.f=re.qa,ve.N=re.ra,ve.ea=re.Ha,ve.Vd=re.Ia,ve.fa=re.R,ve.Rc=re.B,ve.F=null,ve.J=0,!QE){for(Ee=-255;255>=Ee;++Ee)YE[255+Ee]=0>Ee?-Ee:Ee;for(Ee=-1020;1020>=Ee;++Ee)JE[1020+Ee]=-128>Ee?-128:127<Ee?127:Ee;for(Ee=-112;112>=Ee;++Ee)XE[112+Ee]=-16>Ee?-16:15<Ee?15:Ee;for(Ee=-255;510>=Ee;++Ee)ZE[255+Ee]=0>Ee?0:255<Ee?255:Ee;QE=1}tl=Bu,Tc=P1,Na=xa,nn=Tm,dn=Rm,wo=C1,Qn=Dm,xr=xc,ls=F,Xf=ie,qu=jm,$m=S,$E=ce,UE=xe,zE=wc,GE=$f,qE=Mm,HE=Im,Ko[0]=j1,Ko[1]=T1,Ko[2]=I1,Ko[3]=D1,Ko[4]=Za,Ko[5]=B1,Ko[6]=Qa,Ko[7]=F1,Ko[8]=If,Ko[9]=Fu,nl[0]=O1,nl[1]=L1,nl[2]=Of,nl[3]=Lm,nl[4]=bc,nl[5]=Mf,nl[6]=M1,cs[0]=U1,cs[1]=R1,cs[2]=_c,cs[3]=$1,cs[4]=jf,cs[5]=Df,cs[6]=Om,Ee=1}else Ee=0}Ee&&(Ee=function(Kt,Er){for(Kt.M=0;Kt.M<Kt.Va;++Kt.M){var Bt,ot=Kt.Jc[Kt.M&Kt.Xb],qe=Kt.m,er=Kt;for(Bt=0;Bt<er.za;++Bt){var Mt=qe,Jt=er,wn=Jt.Ac,Gr=Jt.Bc+4*Bt,vi=Jt.zc,Un=Jt.ya[Jt.aa+Bt];if(Jt.Qa.Bb?Un.$b=J(Mt,Jt.Pa.jb[0])?2+J(Mt,Jt.Pa.jb[2]):J(Mt,Jt.Pa.jb[1]):Un.$b=0,Jt.kc&&(Un.Ad=J(Mt,Jt.Bd)),Un.Za=!J(Mt,145)+0,Un.Za){var ii=Un.Ob,yi=0;for(Jt=0;4>Jt;++Jt){var Sr,Zt=vi[0+Jt];for(Sr=0;4>Sr;++Sr){Zt=zI[wn[Gr+Sr]][Zt];for(var an=rS[J(Mt,Zt[0])];0<an;)an=rS[2*an+J(Mt,Zt[an])];Zt=-an,wn[Gr+Sr]=Zt}r(ii,yi,wn,Gr,4),yi+=4,vi[0+Jt]=Zt}}else Zt=J(Mt,156)?J(Mt,128)?1:3:J(Mt,163)?2:0,Un.Ob[0]=Zt,i(wn,Gr,Zt,4),i(vi,0,Zt,4);Un.Dd=J(Mt,142)?J(Mt,114)?J(Mt,183)?1:3:2:0}if(er.m.Ka)return fr(Kt,7,"Premature end-of-partition0 encountered.");for(;Kt.ja<Kt.za;++Kt.ja){if(er=ot,Mt=(qe=Kt).rb[qe.sb-1],wn=qe.rb[qe.sb+qe.ja],Bt=qe.ya[qe.aa+qe.ja],Gr=qe.kc?Bt.Ad:0)Mt.la=wn.la=0,Bt.Za||(Mt.Na=wn.Na=0),Bt.Hc=0,Bt.Gc=0,Bt.ia=0;else{var zn,sn;if(Mt=wn,wn=er,Gr=qe.Pa.Xc,vi=qe.ya[qe.aa+qe.ja],Un=qe.pb[vi.$b],Jt=vi.ad,ii=0,yi=qe.rb[qe.sb-1],Zt=Sr=0,i(Jt,ii,0,384),vi.Za)var qr=0,Yo=Gr[3];else{an=o(16);var tr=Mt.Na+yi.Na;if(tr=Qf(wn,Gr[1],tr,Un.Eb,0,an,0),Mt.Na=yi.Na=(0<tr)+0,1<tr)tl(an,0,Jt,ii);else{var ki=an[0]+3>>3;for(an=0;256>an;an+=16)Jt[ii+an]=ki}qr=1,Yo=Gr[0]}var fn=15&Mt.la,Nr=15&yi.la;for(an=0;4>an;++an){var Hi=1&Nr;for(ki=sn=0;4>ki;++ki)fn=fn>>1|(Hi=(tr=Qf(wn,Yo,tr=Hi+(1&fn),Un.Sc,qr,Jt,ii))>qr)<<7,sn=sn<<2|(3<tr?3:1<tr?2:Jt[ii+0]!=0),ii+=16;fn>>=4,Nr=Nr>>1|Hi<<7,Sr=(Sr<<8|sn)>>>0}for(Yo=fn,qr=Nr>>4,zn=0;4>zn;zn+=2){for(sn=0,fn=Mt.la>>4+zn,Nr=yi.la>>4+zn,an=0;2>an;++an){for(Hi=1&Nr,ki=0;2>ki;++ki)tr=Hi+(1&fn),fn=fn>>1|(Hi=0<(tr=Qf(wn,Gr[2],tr,Un.Qc,0,Jt,ii)))<<3,sn=sn<<2|(3<tr?3:1<tr?2:Jt[ii+0]!=0),ii+=16;fn>>=2,Nr=Nr>>1|Hi<<5}Zt|=sn<<4*zn,Yo|=fn<<4<<zn,qr|=(240&Nr)<<zn}Mt.la=Yo,yi.la=qr,vi.Hc=Sr,vi.Gc=Zt,vi.ia=43690&Zt?0:Un.ia,Gr=!(Sr|Zt)}if(0<qe.L&&(qe.wa[qe.Y+qe.ja]=qe.gd[Bt.$b][Bt.Za],qe.wa[qe.Y+qe.ja].La|=!Gr),er.Ka)return fr(Kt,7,"Premature end-of-file encountered.")}if(Cm(Kt),qe=Er,er=1,Bt=(ot=Kt).D,Mt=0<ot.L&&ot.M>=ot.zb&&ot.M<=ot.Va,ot.Aa==0)t:{if(Bt.M=ot.M,Bt.uc=Mt,_o(ot,Bt),er=1,Bt=(sn=ot.D).Nb,Mt=(Zt=Ym[ot.L])*ot.R,wn=Zt/2*ot.B,an=16*Bt*ot.R,ki=8*Bt*ot.B,Gr=ot.sa,vi=ot.ta-Mt+an,Un=ot.qa,Jt=ot.ra-wn+ki,ii=ot.Ha,yi=ot.Ia-wn+ki,Nr=(fn=sn.M)==0,Sr=fn>=ot.Va-1,ot.Aa==2&&_o(ot,sn),sn.uc)for(Hi=(tr=ot).D.M,t(tr.D.uc),sn=tr.yb;sn<tr.Hb;++sn){qr=sn,Yo=Hi;var bi=(Vi=(Hr=tr).D).Nb;zn=Hr.R;var Vi=Vi.wa[Vi.Y+qr],Wi=Hr.sa,Ci=Hr.ta+16*bi*zn+16*qr,Ki=Vi.dd,vn=Vi.tc;if(vn!=0)if(t(3<=vn),Hr.L==1)0<qr&&GE(Wi,Ci,zn,vn+4),Vi.La&&HE(Wi,Ci,zn,vn),0<Yo&&zE(Wi,Ci,zn,vn+4),Vi.La&&qE(Wi,Ci,zn,vn);else{var Yi=Hr.B,Jo=Hr.qa,Rc=Hr.ra+8*bi*Yi+8*qr,us=Hr.Ha,Hr=Hr.Ia+8*bi*Yi+8*qr;bi=Vi.ld,0<qr&&(xr(Wi,Ci,zn,vn+4,Ki,bi),Xf(Jo,Rc,us,Hr,Yi,vn+4,Ki,bi)),Vi.La&&($m(Wi,Ci,zn,vn,Ki,bi),UE(Jo,Rc,us,Hr,Yi,vn,Ki,bi)),0<Yo&&(Qn(Wi,Ci,zn,vn+4,Ki,bi),ls(Jo,Rc,us,Hr,Yi,vn+4,Ki,bi)),Vi.La&&(qu(Wi,Ci,zn,vn,Ki,bi),$E(Jo,Rc,us,Hr,Yi,vn,Ki,bi))}}if(ot.ia&&alert("todo:DitherRow"),qe.put!=null){if(sn=16*fn,fn=16*(fn+1),Nr?(qe.y=ot.sa,qe.O=ot.ta+an,qe.f=ot.qa,qe.N=ot.ra+ki,qe.ea=ot.Ha,qe.W=ot.Ia+ki):(sn-=Zt,qe.y=Gr,qe.O=vi,qe.f=Un,qe.N=Jt,qe.ea=ii,qe.W=yi),Sr||(fn-=Zt),fn>qe.o&&(fn=qe.o),qe.F=null,qe.J=null,ot.Fa!=null&&0<ot.Fa.length&&sn<fn&&(qe.J=gn(ot,qe,sn,fn-sn),qe.F=ot.mb,qe.F==null&&qe.F.length==0)){er=fr(ot,3,"Could not decode alpha data.");break t}sn<qe.j&&(Zt=qe.j-sn,sn=qe.j,t(!(1&Zt)),qe.O+=ot.R*Zt,qe.N+=ot.B*(Zt>>1),qe.W+=ot.B*(Zt>>1),qe.F!=null&&(qe.J+=qe.width*Zt)),sn<fn&&(qe.O+=qe.v,qe.N+=qe.v>>1,qe.W+=qe.v>>1,qe.F!=null&&(qe.J+=qe.v),qe.ka=sn-qe.j,qe.U=qe.va-qe.v,qe.T=fn-sn,er=qe.put(qe))}Bt+1!=ot.Ic||Sr||(r(ot.sa,ot.ta-Mt,Gr,vi+16*ot.R,Mt),r(ot.qa,ot.ra-wn,Un,Jt+8*ot.B,wn),r(ot.Ha,ot.Ia-wn,ii,yi+8*ot.B,wn))}if(!er)return fr(Kt,6,"Output aborted.")}return 1}(re,ve)),ve.bc!=null&&ve.bc(ve),Ee&=1}return Ee?(re.cb=0,Ee):0})(p,P)||(g=p.a)}}else g=p.a}g==0&&W.Oa!=null&&W.Oa.fd&&(g=Hf(W.ba))}W=g}H=W!=0?null:11>H?Y.f.RGBA.eb:Y.f.kb.y}else H=null;return H};var dS=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(D,M){for(var C="",j=0;j<4;j++)C+=String.fromCharCode(D[M++]);return C}function u(D,M){return D[M+0]|D[M+1]<<8}function d(D,M){return(D[M+0]|D[M+1]<<8|D[M+2]<<16)>>>0}function h(D,M){return(D[M+0]|D[M+1]<<8|D[M+2]<<16|D[M+3]<<24)>>>0}new l;var f=[0],m=[0],v=[],b=new l,y=e,x=function(D,M){var C={},j=0,z=!1,Q=0,me=0;if(C.frames=[],!function(L,G){for(var K=0;K<4;K++)if(L[G+K]!="RIFF".charCodeAt(K))return!0;return!1}(D,M)){for(h(D,M+=4),M+=8;M<D.length;){var pe=c(D,M),ue=h(D,M+=4);M+=4;var te=ue+(1&ue);switch(pe){case"VP8 ":case"VP8L":C.frames[j]===void 0&&(C.frames[j]={}),(we=C.frames[j]).src_off=z?me:M-8,we.src_size=Q+ue+8,j++,z&&(z=!1,Q=0,me=0);break;case"VP8X":(we=C.header={}).feature_flags=D[M];var ae=M+4;we.canvas_width=1+d(D,ae),ae+=3,we.canvas_height=1+d(D,ae),ae+=3;break;case"ALPH":z=!0,Q=te+8,me=M-8;break;case"ANIM":(we=C.header).bgcolor=h(D,M),ae=M+4,we.loop_count=u(D,ae),ae+=2;break;case"ANMF":var ye,we;(we=C.frames[j]={}).offset_x=2*d(D,M),M+=3,we.offset_y=2*d(D,M),M+=3,we.width=1+d(D,M),M+=3,we.height=1+d(D,M),M+=3,we.duration=d(D,M),M+=3,ye=D[M++],we.dispose=1&ye,we.blend=ye>>1&1}pe!="ANMF"&&(M+=te)}return C}}(y,0);x.response=y,x.rgbaoutput=!0,x.dataurl=!1;var _=x.header?x.header:null,w=x.frames?x.frames:null;if(_){_.loop_counter=_.loop_count,f=[_.canvas_height],m=[_.canvas_width];for(var R=0;R<w.length&&w[R].blend!=0;R++);}var I=w[0],q=b.WebPDecodeRGBA(y,I.src_off,I.src_size,m,f);I.rgba=q,I.imgwidth=m[0],I.imgheight=f[0];for(var T=0;T<m[0]*f[0]*4;T++)v[T]=q[T];return this.width=m,this.height=f,this.data=v,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function dz(){var e,t=this.internal.__metadata__.metadata,n=unescape(encodeURIComponent(t));e=this.internal.__metadata__.rawXml?n:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+e.length+" >>"),this.internal.write("stream"),this.internal.write(e),this.internal.write("endstream"),this.internal.write("endobj")}function fz(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(e){var t,n,r,i,o,a,s,l,c,u=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new a,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new a,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=L;Object.defineProperty(this,"pdf",{get:function(){return G}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(U){K=!!U}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(U){ee=!!U}});var O=0;Object.defineProperty(this,"posX",{get:function(){return O},set:function(U){isNaN(U)||(O=U)}});var N=0;Object.defineProperty(this,"posY",{get:function(){return N},set:function(U){isNaN(U)||(N=U)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(U){var ge;typeof U=="number"?ge=[U,U,U,U]:((ge=new Array(4))[0]=U[0],ge[1]=U.length>=2?U[1]:ge[0],ge[2]=U.length>=3?U[2]:ge[0],ge[3]=U.length>=4?U[3]:ge[1]),c.margin=ge}});var k=!1;Object.defineProperty(this,"autoPaging",{get:function(){return k},set:function(U){k=U}});var V=0;Object.defineProperty(this,"lastBreak",{get:function(){return V},set:function(U){V=U}});var J=[];Object.defineProperty(this,"pageBreaks",{get:function(){return J},set:function(U){J=U}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(U){U instanceof u&&(c=U)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(U){c.path=U}});var se=[];Object.defineProperty(this,"ctxStack",{get:function(){return se},set:function(U){se=U}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(U){var ge;ge=h(U),this.ctx.fillStyle=ge.style,this.ctx.isFillTransparent=ge.a===0,this.ctx.fillOpacity=ge.a,this.pdf.setFillColor(ge.r,ge.g,ge.b,{a:ge.a}),this.pdf.setTextColor(ge.r,ge.g,ge.b,{a:ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(U){var ge=h(U);this.ctx.strokeStyle=ge.style,this.ctx.isStrokeTransparent=ge.a===0,this.ctx.strokeOpacity=ge.a,ge.a===0?this.pdf.setDrawColor(255,255,255):(ge.a,this.pdf.setDrawColor(ge.r,ge.g,ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(U){["butt","round","square"].indexOf(U)!==-1&&(this.ctx.lineCap=U,this.pdf.setLineCap(U))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(U){isNaN(U)||(this.ctx.lineWidth=U,this.pdf.setLineWidth(U))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(U){["bevel","round","miter"].indexOf(U)!==-1&&(this.ctx.lineJoin=U,this.pdf.setLineJoin(U))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(U){isNaN(U)||(this.ctx.miterLimit=U,this.pdf.setMiterLimit(U))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(U){this.ctx.textBaseline=U}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(U){["right","end","center","left","start"].indexOf(U)!==-1&&(this.ctx.textAlign=U)}});var ke=null,Ae=null,Ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ie},set:function(U){ke=null,Ae=null,Ie=U}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(U){var ge;if(this.ctx.font=U,(ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(U))!==null){var Pe=ge[1];ge[2];var oe=ge[3],Z=ge[4];ge[5];var de=ge[6],he=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Z)[2];Z=Math.floor(he==="px"?parseFloat(Z)*this.pdf.internal.scaleFactor:he==="em"?parseFloat(Z)*this.pdf.getFontSize():parseFloat(Z)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Z);var Ce=function(nt){var pn,Ft,rt=[],Xe=nt.trim();if(Xe==="")return ib;if(Xe in lk)return[lk[Xe]];for(;Xe!=="";){switch(Ft=null,pn=(Xe=uk(Xe)).charAt(0)){case'"':case"'":Ft=oz(Xe.substring(1),pn);break;default:Ft=az(Xe)}if(Ft===null||(rt.push(Ft[0]),(Xe=uk(Ft[1]))!==""&&Xe.charAt(0)!==","))return ib;Xe=Xe.replace(/^,/,"")}return rt}(de);if(this.fontFaces){var De=function(nt,pn){var Ft=nt.getFontList(),rt=JSON.stringify(Ft);if(ke===null||Ae!==rt){var Xe=function(Yt){var dt=[];return Object.keys(Yt).forEach(function(mn){Yt[mn].forEach(function(wt){var Ot=null;switch(wt){case"bold":Ot={family:mn,weight:"bold"};break;case"italic":Ot={family:mn,style:"italic"};break;case"bolditalic":Ot={family:mn,weight:"bold",style:"italic"};break;case"":case"normal":Ot={family:mn}}Ot!==null&&(Ot.ref={name:mn,style:wt},dt.push(Ot))})}),dt}(Ft);ke=function(Yt){for(var dt={},mn=0;mn<Yt.length;++mn){var wt=rb(Yt[mn]),Ot=wt.family,Tn=wt.stretch,qt=wt.style,gt=wt.weight;dt[Ot]=dt[Ot]||{},dt[Ot][Tn]=dt[Ot][Tn]||{},dt[Ot][Tn][qt]=dt[Ot][Tn][qt]||{},dt[Ot][Tn][qt][gt]=wt}return dt}(Xe.concat(pn)),Ae=rt}return ke}(this.pdf,this.fontFaces),Te=Ce.map(function(nt){return{family:nt,stretch:"normal",weight:oe,style:Pe}}),Ge=function(nt,pn,Ft){for(var rt=(Ft=Ft||{}).defaultFontFamily||"times",Xe=Object.assign({},iz,Ft.genericFontFamilies||{}),Yt=null,dt=null,mn=0;mn<pn.length;++mn)if(Xe[(Yt=rb(pn[mn])).family]&&(Yt.family=Xe[Yt.family]),nt.hasOwnProperty(Yt.family)){dt=nt[Yt.family];break}if(!(dt=dt||nt[rt]))throw new Error("Could not find a font-family for the rule '"+ck(Yt)+"' and default family '"+rt+"'.");if(dt=function(wt,Ot){if(Ot[wt])return Ot[wt];var Tn=X_[wt],qt=Tn<=X_.normal?-1:1,gt=sk(Ot,m6,Tn,qt);if(!gt)throw new Error("Could not find a matching font-stretch value for "+wt);return gt}(Yt.stretch,dt),dt=function(wt,Ot){if(Ot[wt])return Ot[wt];for(var Tn=p6[wt],qt=0;qt<Tn.length;++qt)if(Ot[Tn[qt]])return Ot[Tn[qt]];throw new Error("Could not find a matching font-style for "+wt)}(Yt.style,dt),!(dt=function(wt,Ot){if(Ot[wt])return Ot[wt];if(wt===400&&Ot[500])return Ot[500];if(wt===500&&Ot[400])return Ot[400];var Tn=rz[wt],qt=sk(Ot,g6,Tn,wt<400?-1:1);if(!qt)throw new Error("Could not find a matching font-weight for value "+wt);return qt}(Yt.weight,dt)))throw new Error("Failed to resolve a font for the rule '"+ck(Yt)+"'.");return dt}(De,Te);this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var tt="";(oe==="bold"||parseInt(oe,10)>=700||Pe==="bold")&&(tt="bold"),Pe==="italic"&&(tt+="italic"),tt.length===0&&(tt="normal");for(var At="",kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ke=0;Ke<Ce.length;Ke++){if(this.pdf.internal.getFont(Ce[Ke],tt,{noFallback:!0,disableWarning:!0})!==void 0){At=Ce[Ke];break}if(tt==="bolditalic"&&this.pdf.internal.getFont(Ce[Ke],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=Ce[Ke],tt="bold";else if(this.pdf.internal.getFont(Ce[Ke],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=Ce[Ke],tt="normal";break}}if(At===""){for(var _t=0;_t<Ce.length;_t++)if(kt[Ce[_t]]){At=kt[Ce[_t]];break}}At=At===""?"Times":At,this.pdf.setFont(At,tt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(U){this.ctx.globalCompositeOperation=U}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(U){this.ctx.globalAlpha=U}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(U){this.ctx.lineDashOffset=U,we.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(U){this.ctx.lineDash=U,we.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(U){this.ctx.ignoreClearRect=!!U}})};d.prototype.setLineDash=function(L){this.lineDash=L},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){w.call(this,"fill",!1)},d.prototype.stroke=function(){w.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(L,G){if(isNaN(L)||isNaN(G))throw hn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new a(L,G));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(L,G)},d.prototype.closePath=function(){var L=new a(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&cn(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){L=new a(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(L.x,L.y)},d.prototype.lineTo=function(L,G){if(isNaN(L)||isNaN(G))throw hn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new a(L,G));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(K.x,K.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},d.prototype.quadraticCurveTo=function(L,G,K,ee){if(isNaN(K)||isNaN(ee)||isNaN(L)||isNaN(G))throw hn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var O=this.ctx.transform.applyToPoint(new a(K,ee)),N=this.ctx.transform.applyToPoint(new a(L,G));this.path.push({type:"qct",x1:N.x,y1:N.y,x:O.x,y:O.y}),this.ctx.lastPoint=new a(O.x,O.y)},d.prototype.bezierCurveTo=function(L,G,K,ee,O,N){if(isNaN(O)||isNaN(N)||isNaN(L)||isNaN(G)||isNaN(K)||isNaN(ee))throw hn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var k=this.ctx.transform.applyToPoint(new a(O,N)),V=this.ctx.transform.applyToPoint(new a(L,G)),J=this.ctx.transform.applyToPoint(new a(K,ee));this.path.push({type:"bct",x1:V.x,y1:V.y,x2:J.x,y2:J.y,x:k.x,y:k.y}),this.ctx.lastPoint=new a(k.x,k.y)},d.prototype.arc=function(L,G,K,ee,O,N){if(isNaN(L)||isNaN(G)||isNaN(K)||isNaN(ee)||isNaN(O))throw hn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(N=!!N,!this.ctx.transform.isIdentity){var k=this.ctx.transform.applyToPoint(new a(L,G));L=k.x,G=k.y;var V=this.ctx.transform.applyToPoint(new a(0,K)),J=this.ctx.transform.applyToPoint(new a(0,0));K=Math.sqrt(Math.pow(V.x-J.x,2)+Math.pow(V.y-J.y,2))}Math.abs(O-ee)>=2*Math.PI&&(ee=0,O=2*Math.PI),this.path.push({type:"arc",x:L,y:G,radius:K,startAngle:ee,endAngle:O,counterclockwise:N})},d.prototype.arcTo=function(L,G,K,ee,O){throw new Error("arcTo not implemented.")},d.prototype.rect=function(L,G,K,ee){if(isNaN(L)||isNaN(G)||isNaN(K)||isNaN(ee))throw hn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,G),this.lineTo(L+K,G),this.lineTo(L+K,G+ee),this.lineTo(L,G+ee),this.lineTo(L,G),this.lineTo(L+K,G),this.lineTo(L,G)},d.prototype.fillRect=function(L,G,K,ee){if(isNaN(L)||isNaN(G)||isNaN(K)||isNaN(ee))throw hn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var O={};this.lineCap!=="butt"&&(O.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(O.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,G,K,ee),this.fill(),O.hasOwnProperty("lineCap")&&(this.lineCap=O.lineCap),O.hasOwnProperty("lineJoin")&&(this.lineJoin=O.lineJoin)}},d.prototype.strokeRect=function(L,G,K,ee){if(isNaN(L)||isNaN(G)||isNaN(K)||isNaN(ee))throw hn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(L,G,K,ee),this.stroke())},d.prototype.clearRect=function(L,G,K,ee){if(isNaN(L)||isNaN(G)||isNaN(K)||isNaN(ee))throw hn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,G,K,ee))},d.prototype.save=function(L){L=typeof L!="boolean"||L;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},d.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(G),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(L){var G,K,ee,O;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))G=0,K=0,ee=0,O=0;else{var N=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(N!==null)G=parseInt(N[1]),K=parseInt(N[2]),ee=parseInt(N[3]),O=1;else if((N=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)G=parseInt(N[1]),K=parseInt(N[2]),ee=parseInt(N[3]),O=parseFloat(N[4]);else{if(O=1,typeof L=="string"&&L.charAt(0)!=="#"){var k=new s6(L);L=k.ok?k.toHex():"#000000"}L.length===4?(G=L.substring(1,2),G+=G,K=L.substring(2,3),K+=K,ee=L.substring(3,4),ee+=ee):(G=L.substring(1,3),K=L.substring(3,5),ee=L.substring(5,7)),G=parseInt(G,16),K=parseInt(K,16),ee=parseInt(ee,16)}}return{r:G,g:K,b:ee,a:O,style:L}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(L,G,K,ee){if(isNaN(G)||isNaN(K)||typeof L!="string")throw hn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!f.call(this)){var O=te(this.ctx.transform.rotation),N=this.ctx.transform.scaleX;j.call(this,{text:L,x:G,y:K,scale:N,angle:O,align:this.textAlign,maxWidth:ee})}},d.prototype.strokeText=function(L,G,K,ee){if(isNaN(G)||isNaN(K)||typeof L!="string")throw hn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){ee=isNaN(ee)?void 0:ee;var O=te(this.ctx.transform.rotation),N=this.ctx.transform.scaleX;j.call(this,{text:L,x:G,y:K,scale:N,renderingMode:"stroke",angle:O,align:this.textAlign,maxWidth:ee})}},d.prototype.measureText=function(L){if(typeof L!="string")throw hn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,K=this.pdf.internal.scaleFactor,ee=G.internal.getFontSize(),O=G.getStringUnitWidth(L)*ee/G.internal.scaleFactor;return new function(N){var k=(N=N||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return k}}),this}({width:O*=Math.round(96*K/72*1e4)/1e4})},d.prototype.scale=function(L,G){if(isNaN(L)||isNaN(G))throw hn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(L,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.rotate=function(L){if(isNaN(L))throw hn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},d.prototype.translate=function(L,G){if(isNaN(L)||isNaN(G))throw hn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,L,G);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.transform=function(L,G,K,ee,O,N){if(isNaN(L)||isNaN(G)||isNaN(K)||isNaN(ee)||isNaN(O)||isNaN(N))throw hn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var k=new l(L,G,K,ee,O,N);this.ctx.transform=this.ctx.transform.multiply(k)},d.prototype.setTransform=function(L,G,K,ee,O,N){L=isNaN(L)?1:L,G=isNaN(G)?0:G,K=isNaN(K)?0:K,ee=isNaN(ee)?1:ee,O=isNaN(O)?0:O,N=isNaN(N)?0:N,this.ctx.transform=new l(L,G,K,ee,O,N)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(L,G,K,ee,O,N,k,V,J){var se=this.pdf.getImageProperties(L),ke=1,Ae=1,Ie=1,U=1;ee!==void 0&&V!==void 0&&(Ie=V/ee,U=J/O,ke=se.width/ee*V/ee,Ae=se.height/O*J/O),N===void 0&&(N=G,k=K,G=0,K=0),ee!==void 0&&V===void 0&&(V=ee,J=O),ee===void 0&&V===void 0&&(V=se.width,J=se.height);var ge=this.ctx.transform.decompose(),Pe=te(ge.rotate.shx),oe=new l,Z=(oe=(oe=(oe=oe.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale)).applyToRectangle(new s(N-G*Ie,k-K*U,ee*ke,O*Ae));if(this.autoPaging){for(var de,he=b.call(this,Z),Ce=[],De=0;De<he.length;De+=1)Ce.indexOf(he[De])===-1&&Ce.push(he[De]);_(Ce);for(var Te=Ce[0],Ge=Ce[Ce.length-1],tt=Te;tt<Ge+1;tt++){this.pdf.setPage(tt);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=tt===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=tt===1?0:Ke+(tt-2)*_t;if(this.ctx.clip_path.length!==0){var pn=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(de,this.posX+this.margin[3],-nt+kt+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=pn}var Ft=JSON.parse(JSON.stringify(Z));Ft=x([Ft],this.posX+this.margin[3],-nt+kt+this.ctx.prevPageLastElemOffset)[0];var rt=(tt>Te||tt<Ge)&&v.call(this);rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,_t,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Ft.x,Ft.y,Ft.w,Ft.h,null,null,Pe),rt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(L,"JPEG",Z.x,Z.y,Z.w,Z.h,null,null,Pe)};var b=function(L,G,K){var ee=[];G=G||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var O=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":ee.push(Math.floor((L.y+O)/K)+1);break;case"arc":ee.push(Math.floor((L.y+O-L.radius)/K)+1),ee.push(Math.floor((L.y+O+L.radius)/K)+1);break;case"qct":var N=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);ee.push(Math.floor((N.y+O)/K)+1),ee.push(Math.floor((N.y+N.h+O)/K)+1);break;case"bct":var k=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);ee.push(Math.floor((k.y+O)/K)+1),ee.push(Math.floor((k.y+k.h+O)/K)+1);break;case"rect":ee.push(Math.floor((L.y+O)/K)+1),ee.push(Math.floor((L.y+L.h+O)/K)+1)}for(var V=0;V<ee.length;V+=1)for(;this.pdf.internal.getNumberOfPages()<ee[V];)y.call(this);return ee},y=function(){var L=this.fillStyle,G=this.strokeStyle,K=this.font,ee=this.lineCap,O=this.lineWidth,N=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=G,this.font=K,this.lineCap=ee,this.lineWidth=O,this.lineJoin=N},x=function(L,G,K){for(var ee=0;ee<L.length;ee++)switch(L[ee].type){case"bct":L[ee].x2+=G,L[ee].y2+=K;case"qct":L[ee].x1+=G,L[ee].y1+=K;default:L[ee].x+=G,L[ee].y+=K}return L},_=function(L){return L.sort(function(G,K){return G-K})},w=function(L,G){var K=this.fillStyle,ee=this.strokeStyle,O=this.lineCap,N=this.lineWidth,k=Math.abs(N*this.ctx.transform.scaleX),V=this.lineJoin;if(this.autoPaging){for(var J,se,ke=JSON.parse(JSON.stringify(this.path)),Ae=JSON.parse(JSON.stringify(this.path)),Ie=[],U=0;U<Ae.length;U++)if(Ae[U].x!==void 0)for(var ge=b.call(this,Ae[U]),Pe=0;Pe<ge.length;Pe+=1)Ie.indexOf(ge[Pe])===-1&&Ie.push(ge[Pe]);for(var oe=0;oe<Ie.length;oe++)for(;this.pdf.internal.getNumberOfPages()<Ie[oe];)y.call(this);_(Ie);for(var Z=Ie[0],de=Ie[Ie.length-1],he=Z;he<de+1;he++){this.pdf.setPage(he),this.fillStyle=K,this.strokeStyle=ee,this.lineCap=O,this.lineWidth=k,this.lineJoin=V;var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],De=he===1?this.posY+this.margin[0]:this.margin[0],Te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=he===1?0:Te+(he-2)*Ge;if(this.ctx.clip_path.length!==0){var At=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(J,this.posX+this.margin[3],-tt+De+this.ctx.prevPageLastElemOffset),R.call(this,L,!0),this.path=At}if(se=JSON.parse(JSON.stringify(ke)),this.path=x(se,this.posX+this.margin[3],-tt+De+this.ctx.prevPageLastElemOffset),G===!1||he===0){var kt=(he>Z||he<de)&&v.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,Ge,null).clip().discardPath()),R.call(this,L,G),kt&&this.pdf.restoreGraphicsState()}this.lineWidth=N}this.path=ke}else this.lineWidth=k,R.call(this,L,G),this.lineWidth=N},R=function(L,G){if((L!=="stroke"||G||!m.call(this))&&(L==="stroke"||G||!f.call(this))){for(var K,ee,O=[],N=this.path,k=0;k<N.length;k++){var V=N[k];switch(V.type){case"begin":O.push({begin:!0});break;case"close":O.push({close:!0});break;case"mt":O.push({start:V,deltas:[],abs:[]});break;case"lt":var J=O.length;if(N[k-1]&&!isNaN(N[k-1].x)&&(K=[V.x-N[k-1].x,V.y-N[k-1].y],J>0)){for(;J>=0;J--)if(O[J-1].close!==!0&&O[J-1].begin!==!0){O[J-1].deltas.push(K),O[J-1].abs.push(V);break}}break;case"bct":K=[V.x1-N[k-1].x,V.y1-N[k-1].y,V.x2-N[k-1].x,V.y2-N[k-1].y,V.x-N[k-1].x,V.y-N[k-1].y],O[O.length-1].deltas.push(K);break;case"qct":var se=N[k-1].x+2/3*(V.x1-N[k-1].x),ke=N[k-1].y+2/3*(V.y1-N[k-1].y),Ae=V.x+2/3*(V.x1-V.x),Ie=V.y+2/3*(V.y1-V.y),U=V.x,ge=V.y;K=[se-N[k-1].x,ke-N[k-1].y,Ae-N[k-1].x,Ie-N[k-1].y,U-N[k-1].x,ge-N[k-1].y],O[O.length-1].deltas.push(K);break;case"arc":O.push({deltas:[],abs:[],arc:!0}),Array.isArray(O[O.length-1].abs)&&O[O.length-1].abs.push(V)}}ee=G?null:L==="stroke"?"stroke":"fill";for(var Pe=!1,oe=0;oe<O.length;oe++)if(O[oe].arc)for(var Z=O[oe].abs,de=0;de<Z.length;de++){var he=Z[de];he.type==="arc"?T.call(this,he.x,he.y,he.radius,he.startAngle,he.endAngle,he.counterclockwise,void 0,G,!Pe):z.call(this,he.x,he.y),Pe=!0}else if(O[oe].close===!0)this.pdf.internal.out("h"),Pe=!1;else if(O[oe].begin!==!0){var Ce=O[oe].start.x,De=O[oe].start.y;Q.call(this,O[oe].deltas,Ce,De),Pe=!0}ee&&D.call(this,ee),G&&M.call(this)}},I=function(L){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-K;case"top":return L+G-K;case"hanging":return L+G-2*K;case"middle":return L+G/2-K;default:return L}},q=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(G,K){this.colorStops.push([G,K])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(L,G,K,ee,O,N,k,V,J){for(var se=pe.call(this,K,ee,O,N),ke=0;ke<se.length;ke++){var Ae=se[ke];ke===0&&(J?C.call(this,Ae.x1+L,Ae.y1+G):z.call(this,Ae.x1+L,Ae.y1+G)),me.call(this,L,G,Ae.x2,Ae.y2,Ae.x3,Ae.y3,Ae.x4,Ae.y4)}V?M.call(this):D.call(this,k)},D=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(L,G){this.pdf.internal.out(n(L)+" "+r(G)+" m")},j=function(L){var G;switch(L.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var K,ee,O,N=this.pdf.getTextDimensions(L.text),k=I.call(this,L.y),V=q.call(this,k)-N.h,J=this.ctx.transform.applyToPoint(new a(L.x,k));if(this.autoPaging){var se=this.ctx.transform.decompose(),ke=new l;ke=(ke=(ke=ke.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var Ae=this.ctx.transform.applyToRectangle(new s(L.x,k,N.w,N.h)),Ie=ke.applyToRectangle(new s(L.x,V,N.w,N.h)),U=b.call(this,Ie),ge=[],Pe=0;Pe<U.length;Pe+=1)ge.indexOf(U[Pe])===-1&&ge.push(U[Pe]);_(ge);for(var oe=ge[0],Z=ge[ge.length-1],de=oe;de<Z+1;de++){this.pdf.setPage(de);var he=de===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],De=this.pdf.internal.pageSize.height-this.margin[2],Te=De-this.margin[0],Ge=this.pdf.internal.pageSize.width-this.margin[1],tt=Ge-this.margin[3],At=de===1?0:Ce+(de-2)*Te;if(this.ctx.clip_path.length!==0){var kt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(K,this.posX+this.margin[3],-1*At+he),R.call(this,"fill",!0),this.path=kt}var Ke=x([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-At+he+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*L.scale),O=this.lineWidth,this.lineWidth=O*L.scale);var _t=this.autoPaging!=="text";if(_t||Ke.y+Ke.h<=De){if(_t||Ke.y>=he&&Ke.x<=Ge){var nt=_t?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Ge-Ke.x)[0],pn=x([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-At+he+this.ctx.prevPageLastElemOffset)[0],Ft=_t&&(de>oe||de<Z)&&v.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Te,null).clip().discardPath()),this.pdf.text(nt,pn.x,pn.y,{angle:L.angle,align:G,renderingMode:L.renderingMode}),Ft&&this.pdf.restoreGraphicsState()}}else Ke.y<De&&(this.ctx.prevPageLastElemOffset+=De-Ke.y);L.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=O)}}else L.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*L.scale),O=this.lineWidth,this.lineWidth=O*L.scale),this.pdf.text(L.text,J.x+this.posX,J.y+this.posY,{angle:L.angle,align:G,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=O)},z=function(L,G,K,ee){K=K||0,ee=ee||0,this.pdf.internal.out(n(L+K)+" "+r(G+ee)+" l")},Q=function(L,G,K){return this.pdf.lines(L,G,K,null,null)},me=function(L,G,K,ee,O,N,k,V){this.pdf.internal.out([t(i(K+L)),t(o(ee+G)),t(i(O+L)),t(o(N+G)),t(i(k+L)),t(o(V+G)),"c"].join(" "))},pe=function(L,G,K,ee){for(var O=2*Math.PI,N=Math.PI/2;G>K;)G-=O;var k=Math.abs(K-G);k<O&&ee&&(k=O-k);for(var V=[],J=ee?-1:1,se=G;k>1e-5;){var ke=se+J*Math.min(k,N);V.push(ue.call(this,L,se,ke)),k-=Math.abs(ke-se),se=ke}return V},ue=function(L,G,K){var ee=(K-G)/2,O=L*Math.cos(ee),N=L*Math.sin(ee),k=O,V=-N,J=k*k+V*V,se=J+k*O+V*N,ke=4/3*(Math.sqrt(2*J*se)-se)/(k*N-V*O),Ae=k-ke*V,Ie=V+ke*k,U=Ae,ge=-Ie,Pe=ee+G,oe=Math.cos(Pe),Z=Math.sin(Pe);return{x1:L*Math.cos(G),y1:L*Math.sin(G),x2:Ae*oe-Ie*Z,y2:Ae*Z+Ie*oe,x3:U*oe-ge*Z,y3:U*Z+ge*oe,x4:L*Math.cos(K),y4:L*Math.sin(K)}},te=function(L){return 180*L/Math.PI},ae=function(L,G,K,ee,O,N){var k=L+.5*(K-L),V=G+.5*(ee-G),J=O+.5*(K-O),se=N+.5*(ee-N),ke=Math.min(L,O,k,J),Ae=Math.max(L,O,k,J),Ie=Math.min(G,N,V,se),U=Math.max(G,N,V,se);return new s(ke,Ie,Ae-ke,U-Ie)},ye=function(L,G,K,ee,O,N,k,V){var J,se,ke,Ae,Ie,U,ge,Pe,oe,Z,de,he,Ce,De,Te=K-L,Ge=ee-G,tt=O-K,At=N-ee,kt=k-O,Ke=V-N;for(se=0;se<41;se++)oe=(ge=(ke=L+(J=se/40)*Te)+J*((Ie=K+J*tt)-ke))+J*(Ie+J*(O+J*kt-Ie)-ge),Z=(Pe=(Ae=G+J*Ge)+J*((U=ee+J*At)-Ae))+J*(U+J*(N+J*Ke-U)-Pe),se==0?(de=oe,he=Z,Ce=oe,De=Z):(de=Math.min(de,oe),he=Math.min(he,Z),Ce=Math.max(Ce,oe),De=Math.max(De,Z));return new s(Math.round(de),Math.round(he),Math.round(Ce-de),Math.round(De-he))},we=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,G,K=(L=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:G}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(ut.API),function(e){var t=function(a){var s,l,c,u,d,h,f,m,v,b;for(l=[],c=0,u=(a+=s="\0\0\0\0".slice(a.length%4||4)).length;u>c;c+=4)(d=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(h=(d=((d=((d=((d=(d-(b=d%85))/85)-(v=d%85))/85)-(m=d%85))/85)-(f=d%85))/85)%85,l.push(h+33,f+33,m+33,v+33,b+33)):l.push(122);return function(y,x){for(var _=x;_>0;_--)y.pop()}(l,s.length),String.fromCharCode.apply(String,l)+"~>"},n=function(a){var s,l,c,u,d,h=String,f="length",m=255,v="charCodeAt",b="slice",y="replace";for(a[b](-2),a=a[b](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),c=[],u=0,d=(a+=s="uuuuu"[b](a[f]%5||5))[f];d>u;u+=5)l=52200625*(a[v](u)-33)+614125*(a[v](u+1)-33)+7225*(a[v](u+2)-33)+85*(a[v](u+3)-33)+(a[v](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(x,_){for(var w=_;w>0;w--)x.pop()}(c,s[f]),h.fromCharCode.apply(h,c)},r=function(a){return a.split("").map(function(s){return("0"+s.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),s.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},o=function(a){for(var s=new Uint8Array(a.length),l=a.length;l--;)s[l]=a.charCodeAt(l);return(s=q_(s)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(a,s){var l=0,c=a||"",u=[];for(typeof(s=s||[])=="string"&&(s=[s]),l=0;l<s.length;l+=1)switch(s[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=o(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(ut.API),function(e){e.loadFile=function(t,n,r){return function(i,o,a){o=o!==!1,a=typeof a=="function"?a:function(){};var s=void 0;try{s=function(l,c,u){var d=new XMLHttpRequest,h=0,f=function(m){var v=m.length,b=[],y=String.fromCharCode;for(h=0;h<v;h+=1)b.push(y(255&m.charCodeAt(h)));return b.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(f(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return f(d.responseText)}(i,o,a)}catch{}return s}(t,n,r)},e.allowFsRead=void 0,e.loadImageFile=e.loadFile}(ut.API),function(e){function t(){return(St.html2canvas?Promise.resolve(St.html2canvas):F2(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function n(){return(St.DOMPurify?Promise.resolve(St.DOMPurify):F2(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var l=cn(s);return l==="undefined"?"undefined":l==="string"||s instanceof String?"string":l==="number"||s instanceof Number?"number":l==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(s,l){var c=document.createElement(s);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},o=function s(l,c){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(s(d,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},a=function s(l){var c=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),c);return(u=u.setProgress(1,s,1,[s])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(s,l){return s.__proto__=l||a.prototype,s},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(s,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s),l){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:s,dompurify:c})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},a.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var m=u[f],v=m.src.find(function(b){return b.format==="truetype"});v&&c.addFont(v.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(s,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(s,l):this.outputPdf(s,l)},a.prototype.outputPdf=function(s,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,l)})},a.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},a.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(s){if(r(s)!=="object")return this;var l=Object.keys(s||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=s[c]};switch(c){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[c]=s[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(s,l){return this.then(function(){var c=s in a.template.prop?this.prop[s]:this.opt[s];return l?l(c):c})},a.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},a.prototype.setPageSize=function(s){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(s=s||ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:l(s.inner.width,s.k),height:l(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},a.prototype.setProgress=function(s,l,c,u){return s!=null&&(this.progress.val=s),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(s,l,c,u){return this.setProgress(s?this.progress.val+s:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(s,l){var c=this;return this.thenCore(s,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,u),h}).then(u,d).then(function(h){return c.updateProgress(1),h})})},a.prototype.thenCore=function(s,l,c){c=c||Promise.prototype.then;var u=this;s&&(s=s.bind(u)),l&&(l=l.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:a.convert(Object.assign({},u),Promise.prototype),h=c.call(d,s,l);return a.convert(h,u.__proto__)},a.prototype.thenExternal=function(s,l){return Promise.prototype.then.call(this,s,l)},a.prototype.thenList=function(s){var l=this;return s.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(s){s&&(s=s.bind(this));var l=Promise.prototype.catch.call(this,s);return a.convert(l,this)},a.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},a.prototype.error=function(s){return this.then(function(){throw new Error(s)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,ut.getPageSize=function(s,l,c){if(cn(s)==="object"){var u=s;s=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",s=(""+(s||"P")).toLowerCase();var d,h=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,v=0,b=0;if(f.hasOwnProperty(h))v=f[h][1]/d,b=f[h][0]/d;else try{v=c[1],b=c[0]}catch{throw new Error("Invalid format: "+c)}if(s==="p"||s==="portrait")s="p",b>v&&(m=b,b=v,v=m);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",v>b&&(m=b,b=v,v=m)}return{width:b,height:v,unit:l,k:d,orientation:s}},e.html=function(s,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(rb):null;var c=new a(l);return l.worker?c:c.from(s).doCallback()}}(ut.API),ut.API.addJS=function(e){var t,n,r=e;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(t+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+r+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){t!==void 0&&n!==void 0&&this.internal.out("/Names <</JavaScript "+t+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),o=0;o<i.length;o++){var a=i[o],s=r.exec(a);if(s!=null){var l=s[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(o=0;o<c;o++){var d=n.internal.newObject();u.push(d);var h=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<u.length;o++)n.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,o){var a={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var a=r.children[o];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])}(ut.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,o,a,s){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),m=d.length,v={width:0,height:0,numcomponents:1},b=4;b<m;b+=2){if(b+=f,t.indexOf(d.charCodeAt(b+1))!==-1){h=256*d.charCodeAt(b+5)+d.charCodeAt(b+6),v={width:256*d.charCodeAt(b+7)+d.charCodeAt(b+8),height:h,numcomponents:d.charCodeAt(b+9)};break}f=256*d.charCodeAt(b+2)+d.charCodeAt(b+3)}return v}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(ut.API),ut.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,o=GU(e,{checkCrc:!0}),a=o.width,s=o.height,l=o.channels,c=o.palette,u=o.depth;i=c&&l===1?function(T){for(var D=T.width,M=T.height,C=T.data,j=T.palette,z=T.depth,Q=!1,me=[],pe=[],ue=void 0,te=!1,ae=0,ye=0;ye<j.length;ye++){var we=gA(j[ye],4),L=we[0],G=we[1],K=we[2],ee=we[3];me.push(L,G,K),ee!=null&&(ee===0?(ae++,pe.length<1&&pe.push(ye)):ee<255&&(te=!0))}if(te||ae>1){Q=!0,pe=void 0;var O=D*M;ue=new Uint8Array(O);for(var N=new DataView(C.buffer),k=0;k<O;k++){var V=ob(N,k,z),J=gA(j[V],4)[3];ue[k]=J}}else ae===0&&(pe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Q?8:void 0,colorBytes:C,alphaBytes:ue,needSMask:Q,palette:me,mask:pe}}(o):l===2||l===4?function(T){for(var D=T.data,M=T.width,C=T.height,j=T.channels,z=T.depth,Q=j===2?"DeviceGray":"DeviceRGB",me=j-1,pe=M*C,ue=me,te=pe*ue,ae=1*pe,ye=Math.ceil(te*z/8),we=Math.ceil(ae*z/8),L=new Uint8Array(ye),G=new Uint8Array(we),K=new DataView(D.buffer),ee=new DataView(L.buffer),O=new DataView(G.buffer),N=!1,k=0;k<pe;k++){for(var V=k*j,J=0;J<ue;J++)bk(ee,ob(K,V+J,z),k*ue+J,z);var se=ob(K,V+ue,z);se<(1<<z)-1&&(N=!0),bk(O,se,1*k,z)}return{colorSpace:Q,colorsPerPixel:me,sMaskBitsPerComponent:N?z:void 0,colorBytes:L,alphaBytes:G,needSMask:N}}(o):function(T){var D=T.data,M=T.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:M,colorsPerPixel:M==="DeviceGray"?1:3,colorBytes:D instanceof Uint16Array?function(C){for(var j=C.length,z=new Uint8Array(2*j),Q=new DataView(z.buffer,z.byteOffset,z.byteLength),me=0;me<j;me++)Q.setUint16(2*me,C[me],!1);return z}(D):D,needSMask:!1}}(o);var d,h,f,m=i,v=m.colorSpace,b=m.colorsPerPixel,y=m.sMaskBitsPerComponent,x=m.colorBytes,_=m.alphaBytes,w=m.needSMask,R=m.palette,I=m.mask,q=null;return r!==ut.API.image_compression.NONE&&typeof q_=="function"?(q=function(T){var D;switch(T){case ut.API.image_compression.FAST:D=11;break;case ut.API.image_compression.MEDIUM:D=13;break;case ut.API.image_compression.SLOW:D=14;break;default:D=12}return D}(r),d=this.decode.FLATE_DECODE,h="/Predictor ".concat(q," /Colors ").concat(b," /BitsPerComponent ").concat(u," /Columns ").concat(a),e=pk(x,Math.ceil(a*b*u/8),b,u,r),w&&(f=pk(_,Math.ceil(a*y/8),1,y,r))):(d=void 0,h=void 0,e=x,w&&(f=_)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:n,data:e,index:t,filter:d,decodeParameters:h,transparency:I,palette:R,sMask:f,predictor:q,width:a,height:s,bitsPerComponent:u,sMaskBitsPerComponent:y,colorSpace:v}}},function(e){e.processGIF89A=function(t,n,r,i){var o=new uz(t),a=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:s},u=new ab(100).encode(c,100);return e.processJPEG.call(this,u,n,r,i)},e.processGIF87A=e.processGIF89A}(ut.API),Zo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zo.prototype.parseBGR=function(){this.pos=this.offset;var e="bit"+this.bitPP,t=this.width*this.height*4;if(t>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(t);try{this[e]()}catch(n){hn.log("bit decode error:"+n)}},Zo.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}n!==0&&(this.pos+=4-n)}},Zo.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,s=o>>4,l=15&o,c=this.palette[s];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Zo.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},Zo.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,s=(o>>5&t)/t*255|0,l=(o>>10&t)/t*255|0,c=o>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=s,this.data[u+2]=a,this.data[u+3]=c}this.pos+=e}},Zo.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,u=i*this.width*4+4*o;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=s,this.data[u+3]=255}this.pos+=e}},Zo.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Zo.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=a}},Zo.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var o=new Zo(t,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new ab(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(ut.API),wk.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var o=new wk(t),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new ab(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(ut.API),ut.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var u=r[c],d=r[c+1],h=r[c+2],f=r[c+3];o[s++]=u,o[s++]=d,o[s++]=h,a[l++]=f}var m=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:m,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ut.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},td=ut.API,Og=td.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=t.doKerning!==!1,h=0,f=e.length,m=0,v=s[0]||l,b=[];for(n=0;n<f;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(h=d&&cn(c[r])==="object"&&!isNaN(parseInt(c[r][m],10))?c[r][m]/u:0,b.push((s[r]||v)/l+h)),m=r;return b},dk=td.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return td.processArabic&&(e=td.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:Og.apply(this,arguments).reduce(function(o,a){return o+a},0)},fk=function(e,t,n,r){for(var i=[],o=0,a=e.length,s=0;o!==a&&s+t[o]<n;)s+=t[o],o++;i.push(e.slice(0,o));var l=o;for(s=0;o!==a;)s+t[o]>r&&(i.push(e.slice(l,o)),s=0,l=o),s+=t[o],o++;return l!==o&&i.push(e.slice(l,o)),i},hk=function(e,t,n){n||(n={});var r,i,o,a,s,l,c,u=[],d=[u],h=n.textIndent||0,f=0,m=0,v=e.split(" "),b=Og.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?v[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),x=[];v.map(function(w){(w=w.split(/\s*\n/)).length>1?x=x.concat(w.map(function(R,I){return(I&&R.length?`
`:"")+R})):x.push(w[0])}),v=x,l=dk.apply(this,[y,n])}for(o=0,a=v.length;o<a;o++){var _=0;if(r=v[o],l&&r[0]==`
`&&(r=r.substr(1),_=1),h+f+(m=(i=Og.apply(this,[r,n])).reduce(function(w,R){return w+R},0))>t||_){if(m>t){for(s=fk.apply(this,[r,i,t-(h+f),t]),u.push(s.shift()),u=[s.pop()];s.length;)d.push([s.shift()]);m=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(w,R){return w+R},0)}else u=[r];d.push(u),h=m+l,f=b}else u.push(r),h+=f+m,f=b}return c=l?function(w,R){return(R?y:"")+w.join(" ")}:function(w){return w.join(" ")},d.map(c)},td.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),h="Unicode";return d.metadata[h]?{widths:d.metadata[h].widths||{0:1},kerning:d.metadata[h].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var s,l,c=[];for(s=0,l=r.length;s<l;s++)c=c.concat(hk.apply(this,[r[s],a,o]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[n[o]]=t[o],i[t[o]]=n[o];var a=function(h){return"0x"+parseInt(h,10).toString(16)},s=e.__fontmetrics__.compress=function(h){var f,m,v,b,y=["{"];for(var x in h){if(f=h[x],isNaN(parseInt(x,10))?m="'"+x+"'":(x=parseInt(x,10),m=(m=a(x).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof f=="number")f<0?(v=a(f).slice(3),b="-"):(v=a(f).slice(2),b=""),v=b+v.slice(0,-1)+i[v.slice(-1)];else{if(cn(f)!=="object")throw new Error("Don't know what to do with value type "+cn(f)+".");v=s(f)}y.push(m+v)}return y.push("}"),y.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,m,v,b,y={},x=1,_=y,w=[],R="",I="",q=h.length-1,T=1;T<q;T+=1)(b=h[T])=="'"?f?(v=f.join(""),f=void 0):f=[]:f?f.push(b):b=="{"?(w.push([_,v]),_={},v=void 0):b=="}"?((m=w.pop())[0][m[1]]=_,v=void 0,_=m[0]):b=="-"?x=-1:v===void 0?r.hasOwnProperty(b)?(R+=r[b],v=parseInt(R,16)*x,x=1,R=""):R+=b:r.hasOwnProperty(b)?(I+=r[b],_[v]=parseInt(I,16)*x,x=1,v=void 0,I=""):I+=b;return y},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var f=h.font,m=d.Unicode[f.postScriptName];m&&(f.metadata.Unicode={},f.metadata.Unicode.widths=m.widths,f.metadata.Unicode.kerning=m.kerning);var v=u.Unicode[f.postScriptName];v&&(f.metadata.Unicode.encoding=v,f.encoding=v.codePages[0])}])}(ut.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(N0(s)),a.metadata=e.API.TTFFont.open(s),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(ut),ut.API.addSvgAsImage=function(e,t,n,r,i,o,a,s){if(isNaN(t)||isNaN(n))throw hn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw hn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(St.canvg?Promise.resolve(St.canvg):F2(()=>import("./index.es-YeV2DtNy.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(c,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(u)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),t,n,r,i,a,s)})},ut.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},ut.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),l=[],c=0,u=0,d=0;function h(m,v){var b,y=!1;for(b=0;b<m.length;b+=1)m[b]===v&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=s.length;for(d=0;d<f;d+=1)n[s[d]].value=n[s[d]].defaultValue,n[s[d]].explicitSet=!1}if(cn(e)==="object"){for(i in e)if(o=e[i],h(s,i)&&o!==void 0){if(n[i].type==="boolean"&&typeof o=="boolean")n[i].value=o;else if(n[i].type==="name"&&h(n[i].valueSet,o))n[i].value=o;else if(n[i].type==="integer"&&Number.isInteger(o))n[i].value=o;else if(n[i].type==="array"){for(c=0;c<o.length;c+=1)if(r=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(u=0;u<o[c].length;u+=1)typeof o[c][u]!="number"&&(r=!1);r===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,v=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?v.push("/"+m+" /"+n[m].value):v.push("/"+m+" "+n[m].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},ut.API.addMetadata=function(e,t){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:e,namespaceUri:t??"http://jspdf.default.namespaceuri/",rawXml:typeof t=="boolean"&&t},this.internal.events.subscribe("putCatalog",fz),this.internal.events.subscribe("postPutResources",dz)),this},function(e){var t=e.API,n=t.pdfEscape16=function(o,a){for(var s,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=o.length;d<h;++d){if(s=a.metadata.characterToGlyph(o.charCodeAt(d)),a.metadata.glyIdsUsed.push(s),a.metadata.toUnicode[s]=o.charCodeAt(d),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(a.metadata.widthOfGlyph(s),10)])),s=="0")return u.join("");s=s.toString(16),u.push(c[4-s.length],s)}return u.join("")},r=function(o){var a,s,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(s=Object.keys(o).sort(function(f,m){return f-m})).length;d<h;d++)a=s[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[a]!==void 0&&o[a]!==null&&typeof o[a].toString=="function"&&(c=("0000"+o[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,c=a.newObject,u=a.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="Identity-H"){for(var d=s.metadata.Unicode.widths,h=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);var v=c();u({data:f,addLength1:!0,objectId:v}),l("endobj");var b=c();u({data:r(s.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+md(s.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var x=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+md(s.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+e.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+md(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,c=a.newObject,u=a.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var d=s.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var m=c();u({data:h,addLength1:!0,objectId:m}),l("endobj");var v=c();u({data:r(s.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=c();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+md(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=c();for(var y=0;y<s.metadata.hmtx.widths.length;y++)s.metadata.hmtx.widths[y]=parseInt(s.metadata.hmtx.widths[y]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+md(s.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]);var i=function(o){var a,s=o.text||"",l=o.x,c=o.y,u=o.options||{},d=o.mutex||{},h=d.pdfEscape,f=d.activeFontKey,m=d.fonts,v=f,b="",y=0,x="",_=m[v].encoding;if(m[v].encoding!=="Identity-H")return{text:s,x:l,y:c,options:u,mutex:d};for(x=s,v=f,Array.isArray(s)&&(x=s[0]),y=0;y<x.length;y+=1)m[v].metadata.hasOwnProperty("cmap")&&(a=m[v].metadata.cmap.unicode.codeMap[x[y].charCodeAt(0)]),a||x[y].charCodeAt(0)<256&&m[v].metadata.hasOwnProperty("Unicode")?b+=x[y]:b+="";var w="";return parseInt(v.slice(1))<14||_==="WinAnsiEncoding"?w=h(b,v).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(w=n(b,m[v])),d.isHex=!0,{text:w,x:l,y:c,options:u,mutex:d}};t.events.push(["postProcessText",function(o){var a=o.text||"",s=[],l={text:a,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?s.push([i(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):s.push(i(Object.assign({},l,{text:a[c]})).text);o.text=s}else o.text=i(Object.assign({},l,{text:a})).text}])}(ut),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ut.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,o,a,s,l,c,u,d=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,_=0;this.__bidiEngine__={};var w=function(C){var j=C.charCodeAt(),z=j>>8,Q=v[z];return Q!==void 0?d[256*Q+(255&j)]:z===252||z===253?"AL":y.test(z)?"L":z===8?"R":"N"},R=function(C){for(var j,z=0;z<C.length;z++){if((j=w(C.charAt(z)))==="L")return!1;if(j==="R")return!0}return!1},I=function(C,j,z,Q){var me,pe,ue,te,ae=j[Q];switch(ae){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"N":case"AN":break;case"EN":x&&(ae="AN");break;case"AL":x=!0,ae="R";break;case"WS":case"BN":ae="N";break;case"CS":Q<1||Q+1>=j.length||(me=z[Q-1])!=="EN"&&me!=="AN"||(pe=j[Q+1])!=="EN"&&pe!=="AN"?ae="N":x&&(pe="AN"),ae=pe===me?pe:"N";break;case"ES":ae=(me=Q>0?z[Q-1]:"B")==="EN"&&Q+1<j.length&&j[Q+1]==="EN"?"EN":"N";break;case"ET":if(Q>0&&z[Q-1]==="EN"){ae="EN";break}if(x){ae="N";break}for(ue=Q+1,te=j.length;ue<te&&j[ue]==="ET";)ue++;ae=ue<te&&j[ue]==="EN"?"EN":"N";break;case"NSM":if(a&&!s){for(te=j.length,ue=Q+1;ue<te&&j[ue]==="NSM";)ue++;if(ue<te){var ye=C[Q],we=ye>=1425&&ye<=2303||ye===64286;if(me=j[ue],we&&(me==="R"||me==="AL")){ae="R";break}}}ae=Q<1||(me=j[Q-1])==="B"?"N":z[Q-1];break;case"B":x=!1,i=!0,ae=_;break;case"S":o=!0,ae="N"}return ae},q=function(C,j,z){var Q=C.split("");return z&&T(Q,z,{hiLevel:_}),Q.reverse(),j&&j.reverse(),Q.join("")},T=function(C,j,z){var Q,me,pe,ue,te,ae=-1,ye=C.length,we=0,L=[],G=_?f:h,K=[];for(x=!1,i=!1,o=!1,me=0;me<ye;me++)K[me]=w(C[me]);for(pe=0;pe<ye;pe++){if(te=we,L[pe]=I(C,K,L,pe),Q=240&(we=G[te][m[L[pe]]]),we&=15,j[pe]=ue=G[we][5],Q>0)if(Q===16){for(me=ae;me<pe;me++)j[me]=1;ae=-1}else ae=-1;if(G[we][6])ae===-1&&(ae=pe);else if(ae>-1){for(me=ae;me<pe;me++)j[me]=ue;ae=-1}K[pe]==="B"&&(j[pe]=0),z.hiLevel|=ue}o&&function(ee,O,N){for(var k=0;k<N;k++)if(ee[k]==="S"){O[k]=_;for(var V=k-1;V>=0&&ee[V]==="WS";V--)O[V]=_}}(K,j,ye)},D=function(C,j,z,Q,me){if(!(me.hiLevel<C)){if(C===1&&_===1&&!i)return j.reverse(),void(z&&z.reverse());for(var pe,ue,te,ae,ye=j.length,we=0;we<ye;){if(Q[we]>=C){for(te=we+1;te<ye&&Q[te]>=C;)te++;for(ae=we,ue=te-1;ae<ue;ae++,ue--)pe=j[ae],j[ae]=j[ue],j[ue]=pe,z&&(pe=z[ae],z[ae]=z[ue],z[ue]=pe);we=te}we++}}},M=function(C,j,z){var Q=C.split(""),me={hiLevel:_};return z||(z=[]),T(Q,z,me),function(pe,ue,te){if(te.hiLevel!==0&&u)for(var ae,ye=0;ye<pe.length;ye++)ue[ye]===1&&(ae=b.indexOf(pe[ye]))>=0&&(pe[ye]=b[ae+1])}(Q,z,me),D(2,Q,j,z,me),D(1,Q,j,z,me),Q.join("")};return this.__bidiEngine__.doBidiReorder=function(C,j,z){if(function(me,pe){if(pe)for(var ue=0;ue<me.length;ue++)pe[ue]=ue;s===void 0&&(s=R(me)),c===void 0&&(c=R(me))}(C,j),a||!l||c)if(a&&l&&s^c)_=s?1:0,C=q(C,j,z);else if(!a&&l&&c)_=s?1:0,C=M(C,j,z),C=q(C,j);else if(!a||s||l||c){if(a&&!l&&s^c)C=q(C,j),s?(_=0,C=M(C,j,z)):(_=1,C=M(C,j,z),C=q(C,j));else if(a&&s&&!l&&c)_=1,C=M(C,j,z),C=q(C,j);else if(!a&&!l&&s^c){var Q=u;s?(_=1,C=M(C,j,z),_=0,u=!1,C=M(C,j,z),u=Q):(_=0,C=M(C,j,z),C=q(C,j),_=1,u=!1,C=M(C,j,z),u=Q,C=q(C,j))}}else _=0,C=M(C,j,z);else _=s?1:0,C=M(C,j,z);return C},this.__bidiEngine__.setOptions=function(C){C&&(a=C.isInputVisual,l=C.isOutputVisual,s=C.isInputRtl,c=C.isOutputRtl,u=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var a=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(a=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?a.push([n.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):a.push([n.doBidiReorder(i[s])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(ut),ut.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Ul(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new kz(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new hz(this.contents),this.head=new mz(this),this.name=new _z(this),this.cmap=new y6(this),this.toUnicode={},this.hhea=new gz(this),this.maxp=new wz(this),this.hmtx=new xz(this),this.post=new yz(this),this.os2=new vz(this),this.loca=new Az(this),this.glyf=new Ez(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,s,l,c;for(c=[],a=0,s=(l=this.bbox).length;a<s;a++)t=l[a],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,o,a,s;for(a=0,o=0,s=(t=""+t).length;0<=s?o<s:o>s;o=0<=s?++o:--o)i=t.charCodeAt(o),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var pa,Ul=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,o,a,s,l;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^a)+256*(255^s)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*o+65536*a+256*s+l},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],o.push(this.writeByte(n));return o},e}(),hz=function(){var e;function t(n){var r,i,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,o,a,s,l,c,u,d,h,f,m,v;for(v in f=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),a=Math.floor(d/l),u=16*f-d,(i=new Ul).writeInt(this.scalarType),i.writeShort(f),i.writeShort(d),i.writeShort(a),i.writeShort(u),o=16*f,c=i.pos+o,s=null,m=[],n)for(h=n[v],i.writeString(v),i.writeInt(e(h)),i.writeInt(c),i.writeInt(h.length),m=m.concat(h),v==="head"&&(s=c),c+=h.length;c%4;)m.push(0),c++;return i.write(m),r=2981146554-e(i.data),i.pos=s+8,i.writeUInt32(r),i.data},e=function(n){var r,i,o,a;for(n=b6.call(n);n.length%4;)n.push(0);for(o=new Ul(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=o.readUInt32();return 4294967295&i},t}(),pz={}.hasOwnProperty,Ga=function(e,t){for(var n in t)pz.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};pa=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var mz=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ga(e,pa),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Ul).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),xk=function(){function e(t,n){var r,i,o,a,s,l,c,u,d,h,f,m,v,b,y,x,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(f=t.readUInt16(),h=f/2,t.pos+=6,o=function(){var w,R;for(R=[],l=w=0;0<=h?w<h:w>h;l=0<=h?++w:--w)R.push(t.readUInt16());return R}(),t.pos+=2,v=function(){var w,R;for(R=[],l=w=0;0<=h?w<h:w>h;l=0<=h?++w:--w)R.push(t.readUInt16());return R}(),c=function(){var w,R;for(R=[],l=w=0;0<=h?w<h:w>h;l=0<=h?++w:--w)R.push(t.readUInt16());return R}(),u=function(){var w,R;for(R=[],l=w=0;0<=h?w<h:w>h;l=0<=h?++w:--w)R.push(t.readUInt16());return R}(),i=(this.length-t.pos+this.offset)/2,s=function(){var w,R;for(R=[],l=w=0;0<=i?w<i:w>i;l=0<=i?++w:--w)R.push(t.readUInt16());return R}(),l=y=0,_=o.length;y<_;l=++y)for(b=o[l],r=x=m=v[l];m<=b?x<=b:x>=b;r=m<=b?++x:--x)u[l]===0?a=r+c[l]:(a=s[u[l]/2+(r-m)-(h-l)]||0)!==0&&(a+=c[l]),this.codeMap[r]=65535&a}t.pos=d}return e.encode=function(t,n){var r,i,o,a,s,l,c,u,d,h,f,m,v,b,y,x,_,w,R,I,q,T,D,M,C,j,z,Q,me,pe,ue,te,ae,ye,we,L,G,K,ee,O,N,k,V,J,se,ke;switch(Q=new Ul,a=Object.keys(t).sort(function(Ae,Ie){return Ae-Ie}),n){case"macroman":for(v=0,b=function(){var Ae=[];for(m=0;m<256;++m)Ae.push(0);return Ae}(),x={0:0},o={},me=0,ae=a.length;me<ae;me++)x[V=t[i=a[me]]]==null&&(x[V]=++v),o[i]={old:t[i],new:x[t[i]]},b[i]=x[t[i]];return Q.writeUInt16(1),Q.writeUInt16(0),Q.writeUInt32(12),Q.writeUInt16(0),Q.writeUInt16(262),Q.writeUInt16(0),Q.write(b),{charMap:o,subtable:Q.data,maxGlyphID:v+1};case"unicode":for(j=[],d=[],_=0,x={},r={},y=c=null,pe=0,ye=a.length;pe<ye;pe++)x[R=t[i=a[pe]]]==null&&(x[R]=++_),r[i]={old:R,new:x[R]},s=x[R]-i,y!=null&&s===c||(y&&d.push(y),j.push(i),c=s),y=i;for(y&&d.push(y),d.push(65535),j.push(65535),M=2*(D=j.length),T=2*Math.pow(Math.log(D)/Math.LN2,2),h=Math.log(T/2)/Math.LN2,q=2*D-T,l=[],I=[],f=[],m=ue=0,we=j.length;ue<we;m=++ue){if(C=j[m],u=d[m],C===65535){l.push(0),I.push(0);break}if(C-(z=r[C].new)>=32768)for(l.push(0),I.push(2*(f.length+D-m)),i=te=C;C<=u?te<=u:te>=u;i=C<=u?++te:--te)f.push(r[i].new);else l.push(z-C),I.push(0)}for(Q.writeUInt16(3),Q.writeUInt16(1),Q.writeUInt32(12),Q.writeUInt16(4),Q.writeUInt16(16+8*D+2*f.length),Q.writeUInt16(0),Q.writeUInt16(M),Q.writeUInt16(T),Q.writeUInt16(h),Q.writeUInt16(q),N=0,L=d.length;N<L;N++)i=d[N],Q.writeUInt16(i);for(Q.writeUInt16(0),k=0,G=j.length;k<G;k++)i=j[k],Q.writeUInt16(i);for(J=0,K=l.length;J<K;J++)s=l[J],Q.writeUInt16(s);for(se=0,ee=I.length;se<ee;se++)w=I[se],Q.writeUInt16(w);for(ke=0,O=f.length;ke<O;ke++)v=f[ke],Q.writeUInt16(v);return{charMap:r,subtable:Q.data,maxGlyphID:_+1}}},e}(),y6=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ga(e,pa),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new xk(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,i;return n==null&&(n="macroman"),r=xk.encode(t,n),(i=new Ul).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},e}(),gz=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ga(e,pa),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),vz=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ga(e,pa),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),yz=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ga(e,pa),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)n=t.readByte(),i.push(this.names.push(t.readString(n)));return i;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=(function(){var a,s,l;for(l=[],o=a=0,s=this.file.maxp.numGlyphs;0<=s?a<s:a>s;o=0<=s?++a:--a)l.push(t.readUInt32());return l}).call(this)}},e}(),bz=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},_z=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ga(e,pa),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,i,o,a,s,l,c,u,d,h;for(t.pos=this.offset,t.readShort(),n=t.readShort(),s=t.readShort(),r=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()});for(l={},o=u=0,d=r.length;u<d;o=++u)i=r[o],t.pos=i.offset,c=t.readString(i.length),a=new bz(c,i),l[h=i.nameID]==null&&(l[h]=[]),l[i.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},e}(),wz=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ga(e,pa),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),xz=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ga(e,pa),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,i,o,a,s,l;for(t.pos=this.offset,this.metrics=[],n=0,s=this.file.hhea.numberOfMetrics;0<=s?n<s:n>s;n=0<=s?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],n=c=0;0<=i?c<i:c>i;n=0<=i?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,d,h;for(h=[],c=0,u=(d=this.metrics).length;c<u;c++)o=d[c],h.push(o.advance);return h}).call(this),r=this.widths[this.widths.length-1],l=[],n=a=0;0<=i?a<i:a>i;n=0<=i?++a:--a)l.push(this.widths.push(r));return l},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),b6=[].slice,Ez=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ga(e,pa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,i,o,a,s,l,c,u,d;return t in this.cache?this.cache[t]:(o=this.file.loca,n=this.file.contents,r=o.indexOf(t),(i=o.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,a=(s=new Ul(n.read(i))).readShort(),c=s.readShort(),d=s.readShort(),l=s.readShort(),u=s.readShort(),this.cache[t]=a===-1?new Nz(s,c,d,l,u):new Sz(s,a,c,d,l,u),this.cache[t]))},e.prototype.encode=function(t,n,r){var i,o,a,s,l;for(a=[],o=[],s=0,l=n.length;s<l;s++)i=t[n[s]],o.push(a.length),i&&(a=a.concat(i.encode(r)));return o.push(a.length),{table:a,offsets:o}},e}(),Sz=function(){function e(t,n,r,i,o,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Nz=function(){function e(t,n,r,i,o){var a,s;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;s=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&s;)a.pos+=1&s?4:2,128&s?a.pos+=8:64&s?a.pos+=4:8&s&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Ul(b6.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),Az=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ga(e,pa),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,a=0;a<r.length;++a)if(r[a]=i,o<n.length&&n[o]==a){++o,r[a]=i;var s=this.offsets[a],l=this.offsets[a+1]-s;l>0&&(i+=l)}for(var c=new Array(4*r.length),u=0;u<r.length;++u)c[4*u+3]=255&r[u],c[4*u+2]=(65280&r[u])>>8,c[4*u+1]=(16711680&r[u])>>16,c[4*u]=(4278190080&r[u])>>24;return c},e}(),kz=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,o;for(n in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)r=o[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,o,a,s,l;for(i={},a=0,s=t.length;a<s;a++)i[o=t[a]]=this.font.glyf.glyphFor(o);for(o in n=[],i)(r=i[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in l=this.glyphsFor(n))r=l[o],i[o]=r;return i},e.prototype.encode=function(t,n){var r,i,o,a,s,l,c,u,d,h,f,m,v,b,y;for(i in r=y6.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),f={0:0},y=r.charMap)f[(l=y[i]).old]=l.new;for(m in h=r.maxGlyphID,a)m in f||(f[m]=h++);return u=function(x){var _,w;for(_ in w={},x)w[x[_]]=_;return w}(f),d=Object.keys(u).sort(function(x,_){return x-_}),v=function(){var x,_,w;for(w=[],x=0,_=d.length;x<_;x++)s=d[x],w.push(u[s]);return w}(),o=this.font.glyf.encode(a,v,f),c=this.font.loca.encode(o.offsets,v),b={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();ut.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,o,a;if(Array.isArray(n))return"["+function(){var s,l,c;for(c=[],s=0,l=n.length;s<l;s++)r=n[s],c.push(t.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in o=["<<"],n)a=n[i],o.push("/"+i+" "+t.convert(a));return o.push(">>"),o.join(`
`)}return""+n},t}();function We(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function Cz(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Pz=Cz(function(e){var t=e.exports=function(n,r){if(r||(r=16),n===void 0&&(n=128),n<=0)return"0";for(var i=Math.log(Math.pow(2,n))/Math.log(r),o=2;i===1/0;o*=2)i=Math.log(Math.pow(2,n/o))/Math.log(r)*o;for(var a=i-Math.floor(i),s="",o=0;o<Math.floor(i);o++){var l=Math.floor(Math.random()*r).toString(r);s=l+s}if(a){var c=Math.pow(r,a),l=Math.floor(Math.random()*c).toString(r);s=l+s}var u=parseInt(s,r);return u!==1/0&&u>=Math.pow(2,n)?t(n,r):s};t.rack=function(n,r,i){var o=function(s){var l=0;do{if(l++>10)if(i)n+=i;else throw new Error("too many ID collisions, use more bits");var c=t(n,r)}while(Object.hasOwnProperty.call(a,c));return a[c]=s,c},a=o.hats={};return o.get=function(s){return o.hats[s]},o.set=function(s,l){return o.hats[s]=l,o},o.bits=n||128,o.base=r||16,o}});function $a(e){if(!(this instanceof $a))return new $a(e);e=e||[128,36,1],this._seed=e.length?Pz.rack(e[0],e[1],e[2]):e}$a.prototype.next=function(e){return this._seed(e||!0)};$a.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};$a.prototype.claim=function(e,t){this._seed.set(e,t||!0)};$a.prototype.assigned=function(e){return this._seed.get(e)||!1};$a.prototype.unclaim=function(e){delete this._seed.hats[e]};$a.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};function Gx(e){return Array.prototype.concat.apply([],e)}const qp=Object.prototype.toString,Tz=Object.prototype.hasOwnProperty;function hu(e){return e===void 0}function Cr(e){return e!==void 0}function kp(e){return e==null}function bt(e){return qp.call(e)==="[object Array]"}function Tr(e){return qp.call(e)==="[object Object]"}function ft(e){return qp.call(e)==="[object Number]"}function ur(e){const t=qp.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function ji(e){return qp.call(e)==="[object String]"}function Rz(e){if(!bt(e))throw new Error("must supply array")}function xi(e,t){return!kp(e)&&Tz.call(e,t)}function Vt(e,t){const n=xy(t);let r;return le(e,function(i,o){if(n(i,o))return r=i,!1}),r}function _6(e,t){const n=xy(t);let r=bt(e)?-1:void 0;return le(e,function(i,o){if(n(i,o))return r=o,!1}),r}function Lt(e,t){const n=xy(t);let r=[];return le(e,function(i,o){n(i,o)&&r.push(i)}),r}function le(e,t){let n,r;if(hu(e))return;const i=bt(e)?Dz:Iz;for(let o in e)if(xi(e,o)&&(n=e[o],r=t(n,i(o)),r===!1))return n}function Lz(e,t){if(hu(e))return[];Rz(e);const n=xy(t);return e.filter(function(r,i){return!n(r,i)})}function Bi(e,t,n){return le(e,function(r,i){n=t(n,r,i)}),n}function xu(e,t){return!!Bi(e,function(n,r,i){return n&&t(r,i)},!0)}function Yl(e,t){return!!Vt(e,t)}function Zr(e,t){let n=[];return le(e,function(r,i){n.push(t(r,i))}),n}function Pv(e){return e&&Object.keys(e)||[]}function Oz(e){return Pv(e).length}function qx(e){return Zr(e,t=>t)}function pf(e,t,n={}){return t=Hx(t),le(e,function(r){let i=t(r)||"_",o=n[i];o||(o=n[i]=[]),o.push(r)}),n}function w6(e,...t){e=Hx(e);let n={};return le(t,i=>pf(i,e,n)),Zr(n,function(i,o){return i[0]})}const Mz=w6;function Ua(e,t){t=Hx(t);let n=[];return le(e,function(r,i){let o=t(r,i),a={d:o,v:r};for(var s=0;s<n.length;s++){let{d:l}=n[s];if(o<l){n.splice(s,0,a);return}}n.push(a)}),Zr(n,r=>r.v)}function la(e){return function(t){return xu(e,function(n,r){return t[r]===n})}}function Hx(e){return ur(e)?e:t=>t[e]}function xy(e){return ur(e)?e:t=>t===e}function Iz(e){return e}function Dz(e){return Number(e)}function x6(e,t){let n,r,i,o;function a(d){let h=Date.now(),f=d?0:o+t-h;if(f>0)return s(f);e.apply(i,r),l()}function s(d){n=setTimeout(a,d)}function l(){n&&clearTimeout(n),n=o=r=i=void 0}function c(){n&&a(!0),l()}function u(...d){o=Date.now(),r=d,i=this,n||s(t)}return u.flush=c,u.cancel=l,u}function fa(e,t){return e.bind(t)}function be(e,...t){return Object.assign(e,...t)}function jz(e,t,n){let r=e;return le(t,function(i,o){if(typeof i!="number"&&typeof i!="string")throw new Error("illegal key type: "+typeof i+". Key should be of type number or string.");if(i==="constructor")throw new Error("illegal key: constructor");if(i==="__proto__")throw new Error("illegal key: __proto__");let a=t[o+1],s=r[i];Cr(a)&&kp(s)&&(s=r[i]=isNaN(+a)?{}:[]),hu(a)?hu(n)?delete r[i]:r[i]=n:r=s}),e}function Ls(e,t){let n={},r=Object(e);return le(t,function(i){i in r&&(n[i]=e[i])}),n}function Io(e,t){let n={},r=Object(e);return le(r,function(i,o){t.indexOf(o)===-1&&(n[o]=i)}),n}function Bz(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}const Fz=Object.prototype.toString,$z=Object.prototype.hasOwnProperty;function Uz(e){return e===void 0}function zz(e){return Fz.call(e)==="[object Array]"}function Gz(e,t){return $z.call(e,t)}function Ek(e,t){let n,r;if(Uz(e))return;const i=zz(e)?Hz:qz;for(let o in e)if(Gz(e,o)&&(n=e[o],r=t(n,i(o)),r===!1))return n}function qz(e){return e}function Hz(e){return Number(e)}function Jr(e,...t){const n=e.style;return Ek(t,function(r){r&&Ek(r,function(i,o){n[o]=i})}),e}function fi(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const Vz=Object.prototype.toString;function On(e){return new zl(e)}function zl(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}zl.prototype.add=function(e){return this.list.add(e),this};zl.prototype.remove=function(e){return Vz.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};zl.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};zl.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};zl.prototype.array=function(){return Array.from(this.list)};zl.prototype.has=zl.prototype.contains=function(e){return this.list.contains(e)};function Ey(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Jl(e,t,n){var r=n?e:e.parentNode;return r&&typeof r.closest=="function"&&r.closest(t)||null}var Tv={},Rv,Z_,Vx;function E6(){Rv=window.addEventListener?"addEventListener":"attachEvent",Z_=window.removeEventListener?"removeEventListener":"detachEvent",Vx=Rv!=="addEventListener"?"on":""}var Wz=Tv.bind=function(e,t,n,r){return Rv||E6(),e[Rv](Vx+t,n,r||!1),n},Kz=Tv.unbind=function(e,t,n,r){return Z_||E6(),e[Z_](Vx+t,n,r||!1),n},Ht=Bz({__proto__:null,bind:Wz,unbind:Kz,default:Tv},[Tv]),S6=["focus","blur"];function Yz(e,t,n,r,i){return S6.indexOf(n)!==-1&&(i=!0),Ht.bind(e,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=Jl(a,t,!0),o.delegateTarget&&r.call(e,o)},i)}function Jz(e,t,n,r){return S6.indexOf(t)!==-1&&(r=!0),Ht.unbind(e,t,n,r)}var Oi={bind:Yz,unbind:Jz},Xz=Zz,N6=!1,Mg;typeof document<"u"&&(Mg=document.createElement("div"),Mg.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',N6=!Mg.getElementsByTagName("link").length,Mg=void 0);var rr={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:N6?[1,"X<div>","</div>"]:[0,"",""]};rr.td=rr.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];rr.option=rr.optgroup=[1,'<select multiple="multiple">',"</select>"];rr.thead=rr.tbody=rr.colgroup=rr.caption=rr.tfoot=[1,"<table>","</table>"];rr.polyline=rr.ellipse=rr.polygon=rr.circle=rr.text=rr.line=rr.path=rr.rect=rr.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function Zz(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if(r=="body"){var l=t.createElement("html");return l.innerHTML=e,l.removeChild(l.lastChild)}var i=Object.prototype.hasOwnProperty.call(rr,r)?rr[r]:rr._default,o=i[0],a=i[1],s=i[2],l=t.createElement("div");for(l.innerHTML=a+e+s;o--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var c=t.createDocumentFragment();l.firstChild;)c.appendChild(l.removeChild(l.firstChild));return c}var _n=Xz;function Sy(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function rn(e,t){return t=t||document,t.querySelector(e)}function Q_(e,t){return t=t||document,t.querySelectorAll(e)}function pu(e){e.parentNode&&e.parentNode.removeChild(e)}function Qz(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function eG(e,t){return t.appendChild(Qz(e,t))}function pt(e,t){return eG(t,e),e}var ew=2,A6={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":ew,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":ew,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function tG(e,t){return A6[t]?e.style[t]:e.getAttributeNS(null,t)}function k6(e,t,n){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=A6[r];i?(i===ew&&typeof n=="number"&&(n=String(n)+"px"),e.style[r]=n):e.setAttributeNS(null,t,n)}function nG(e,t){var n=Object.keys(t),r,i;for(r=0,i;i=n[r];r++)k6(e,i,t[i])}function He(e,t,n){if(typeof t=="string")if(n!==void 0)k6(e,t,n);else return tG(e,t);else nG(e,t);return e}const rG=Object.prototype.toString;function Ut(e){return new Gl(e)}function Gl(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Gl.prototype.add=function(e){return this.list.add(e),this};Gl.prototype.remove=function(e){return rG.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Gl.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Gl.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Gl.prototype.array=function(){return Array.from(this.list)};Gl.prototype.has=Gl.prototype.contains=function(e){return this.list.contains(e)};function Ny(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function C6(e){return e.cloneNode(!0)}var Wx={svg:"http://www.w3.org/2000/svg"},Sk='<svg xmlns="'+Wx.svg+'"';function iG(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Wx.svg)===-1&&(e=Sk+e.substring(4)):(e=Sk+">"+e+"</svg>",t=!0);var n=oG(e);if(!t)return n;for(var r=document.createDocumentFragment(),i=n.firstChild;i.firstChild;)r.appendChild(i.firstChild);return r}function oG(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Qe(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=iG(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Wx.svg,e),t&&He(n,t),n}var sb=null;function P6(){return sb===null&&(sb=Qe("svg")),sb}function Nk(e,t){var n,r,i=Object.keys(t);for(n=0;r=i[n];n++)e[r]=t[r];return e}function aG(e,t,n,r,i,o){var a=P6().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return Nk(a,e);case 6:return Nk(a,{a:e,b:t,c:n,d:r,e:i,f:o})}}function Wh(e){return P6().createSVGTransform()}var Ak=/([&<>]{1})/g,sG=/([&<>\n\r"]{1})/g,lG={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function lb(e,t){function n(r,i){return lG[i]||i}return e.replace(t,n)}function T6(e,t){var n,r,i,o,a;switch(e.nodeType){case 3:t.push(lb(e.textContent,Ak));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(i=e.attributes,n=0,r=i.length;n<r;++n)o=i.item(n),t.push(" ",o.name,'="',lb(o.value,sG),'"');if(e.hasChildNodes()){for(t.push(">"),a=e.childNodes,n=0,r=a.length;n<r;++n)T6(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",lb(e.nodeValue,Ak),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function cG(e){for(var t=e.firstChild,n=[];t;)T6(t,n),t=t.nextSibling;return n.join("")}function kk(e,t){return cG(e)}function cr(e){var t=e.parentNode;return t&&t.removeChild(e),e}function uG(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function dG(e,t){var n,r;for(e.clear(),n=0;r=t[n];n++)e.appendItem(uG(e,r))}function Cp(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),dG(n,t)),n.consolidate()}const fG=/^class[ {]/;function hG(e){return fG.test(e.toString())}function Kx(e){return Array.isArray(e)}function cb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T0(...e){e.length===1&&Kx(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const pG=/constructor\s*[^(]*\(\s*([^)]*)\)/m,mG=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,gG=/\/\*([^*]*)\*\//m;function vG(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(hG(e)?pG:mG);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(r=>{const i=r.match(gG);return(i&&i[1]||r).trim()})||[]}function R6(e,t){const n=t||{get:function(_,w){if(r.push(_),w===!1)return null;throw s(`No provider for "${_}"!`)}},r=[],i=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),a=o.injector=this,s=function(_){const w=r.join(" -> ");return r.length=0,new Error(w?`${_} (Resolving: ${w})`:_)};function l(_,w){if(!i[_]&&_.includes(".")){const R=_.split(".");let I=l(R.shift());for(;R.length;)I=I[R.shift()];return I}if(cb(o,_))return o[_];if(cb(i,_)){if(r.indexOf(_)!==-1)throw r.push(_),s("Cannot resolve circular dependency!");return r.push(_),o[_]=i[_][0](i[_][1]),r.pop(),o[_]}return n.get(_,w)}function c(_,w){if(typeof w>"u"&&(w={}),typeof _!="function")if(Kx(_))_=T0(_.slice());else throw s(`Cannot invoke "${_}". Expected a function!`);const I=(_.$inject||vG(_)).map(q=>cb(w,q)?w[q]:l(q));return{fn:_,dependencies:I}}function u(_){const{fn:w,dependencies:R}=c(_),I=Function.prototype.bind.call(w,null,...R);return new I}function d(_,w,R){const{fn:I,dependencies:q}=c(_,R);return I.apply(w,q)}function h(_){return T0(w=>_.get(w))}function f(_,w){if(w&&w.length){const R=Object.create(null),I=Object.create(null),q=[],T=[],D=[];let M,C,j,z;for(let Q in i)M=i[Q],w.indexOf(Q)!==-1&&(M[2]==="private"?(C=q.indexOf(M[3]),C===-1?(j=M[3].createChild([],w),z=h(j),q.push(M[3]),T.push(j),D.push(z),R[Q]=[z,Q,"private",j]):R[Q]=[D[C],Q,"private",T[C]]):R[Q]=[M[2],M[1]],I[Q]=!0),(M[2]==="factory"||M[2]==="type")&&M[1].$scope&&w.forEach(me=>{M[1].$scope.indexOf(me)!==-1&&(R[Q]=[M[2],M[1]],I[me]=!0)});w.forEach(Q=>{if(!I[Q])throw new Error('No provider for "'+Q+'". Cannot use provider from the parent!')}),_.unshift(R)}return new R6(_,a)}const m={factory:d,type:u,value:function(_){return _}};function v(_,w){const R=_.__init__||[];return function(){R.forEach(I=>{typeof I=="string"?w.get(I):w.invoke(I)})}}function b(_){const w=_.__exports__;if(w){const R=_.__modules__,I=Object.keys(_).reduce((C,j)=>(j!=="__exports__"&&j!=="__modules__"&&j!=="__init__"&&j!=="__depends__"&&(C[j]=_[j]),C),Object.create(null)),q=(R||[]).concat(I),T=f(q),D=T0(function(C){return T.get(C)});w.forEach(function(C){i[C]=[D,C,"private",T]});const M=(_.__init__||[]).slice();return M.unshift(function(){T.init()}),_=Object.assign({},_,{__init__:M}),v(_,T)}return Object.keys(_).forEach(function(R){if(R==="__init__"||R==="__depends__")return;const I=_[R];if(I[2]==="private"){i[R]=I;return}const q=I[0],T=I[1];i[R]=[m[q],yG(q,T),q]}),v(_,a)}function y(_,w){return _.indexOf(w)!==-1||(_=(w.__depends__||[]).reduce(y,_),_.indexOf(w)!==-1)?_:_.concat(w)}function x(_){const w=_.reduce(y,[]).map(b);let R=!1;return function(){R||(R=!0,w.forEach(I=>I()))}}this.get=l,this.invoke=d,this.instantiate=u,this.createChild=f,this.init=x(e)}function yG(e,t){return e!=="value"&&Kx(t)&&(t=T0(t.slice())),t}var bG=1e3;function Ds(e,t){var n=this;t=t||bG,e.on(["render.shape","render.connection"],t,function(r,i){var o=r.type,a=i.element,s=i.gfx,l=i.attrs;if(n.canRender(a))return o==="render.shape"?n.drawShape(s,a,l):n.drawConnection(s,a,l)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(r,i){if(n.canRender(i))return r.type==="render.getShapePath"?n.getShapePath(i):n.getConnectionPath(i)})}Ds.prototype.canRender=function(e){};Ds.prototype.drawShape=function(e,t){};Ds.prototype.drawConnection=function(e,t){};Ds.prototype.getShapePath=function(e){};Ds.prototype.getConnectionPath=function(e){};function Eu(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function _G(e){return["M",e.x,e.y]}function ub(e){return["L",e.x,e.y]}function wG(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function xG(e,t){const n=e.length,r=[_G(e[0])];for(let i=1;i<n;i++){const o=e[i-1],a=e[i],s=e[i+1];if(!s||!t){r.push(ub(a));continue}const l=Math.min(t,tw(a.x-o.x,a.y-o.y),tw(s.x-a.x,s.y-a.y));if(!l){r.push(ub(a));continue}const c=Ig(a,o,l),u=Ig(a,o,l*.5),d=Ig(a,s,l),h=Ig(a,s,l*.5);r.push(ub(c)),r.push(wG(u,h,d))}return r}function Ig(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=tw(r,i),a=n/o;return{x:e.x+r*a,y:e.y+i*a}}function tw(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function Ay(e,t,n){ft(t)&&(n=t,t=null),t||(t={});const r=Qe("path",t);return ft(n)&&(r.dataset.cornerRadius=String(n)),L6(r,e)}function L6(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return He(e,{d:Eu(xG(t,n))}),e}function ky(e){return Lt(e,function(t){return!Vt(e,function(n){return n!==t&&O6(t,n)})})}function O6(e,t){if(t){if(e===t)return t;if(e.parent)return O6(e.parent,t)}}function Ck(e,t,n){var r=!n||e.indexOf(t)===-1;return r&&e.push(t),r}function Su(e,t,n){n=n||0,bt(e)||(e=[e]),le(e,function(r,i){var o=t(r,i,n);bt(o)&&o.length&&Su(o,t,n+1)})}function EG(e,t,n){var r=[],i=[];return Su(e,function(o,a,s){Ck(r,o,t);var l=o.children;if(l&&Ck(i,l,t))return l}),r}function Hp(e,t){return EG(e,!t)}function SG(e,t,n){hu(t)&&(t=!0),Tr(t)&&(n=t,t=!0),n=n||{};var r=mh(n.allShapes),i=mh(n.allConnections),o=mh(n.enclosedElements),a=mh(n.enclosedConnections),s=mh(n.topLevel,t&&pf(e,function(u){return u.id}));function l(u){s[u.source.id]&&s[u.target.id]&&(s[u.id]=[u]),r[u.source.id]&&r[u.target.id]&&(a[u.id]=o[u.id]=u),i[u.id]=u}function c(u){if(o[u.id]=u,u.waypoints)a[u.id]=i[u.id]=u;else return r[u.id]=u,le(u.incoming,l),le(u.outgoing,l),u.children}return Su(e,c),{allShapes:r,allConnections:i,topLevel:s,enclosedConnections:a,enclosedElements:o}}function yr(e,t){t=!!t,bt(e)||(e=[e]);var n,r,i,o;return le(e,function(a){var s=a;a.waypoints&&!t&&(s=yr(a.waypoints,!0));var l=s.x,c=s.y,u=s.height||0,d=s.width||0;(l<n||n===void 0)&&(n=l),(c<r||r===void 0)&&(r=c),(l+d>i||i===void 0)&&(i=l+d),(c+u>o||o===void 0)&&(o=c+u)}),{x:n,y:r,height:o-r,width:i-n}}function NG(e,t){var n={};return le(e,function(r){var i=r;i.waypoints&&(i=yr(i)),!ft(t.y)&&i.x>t.x&&(n[r.id]=r),!ft(t.x)&&i.y>t.y&&(n[r.id]=r),i.x>t.x&&i.y>t.y&&(ft(t.width)&&ft(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y||!ft(t.width)||!ft(t.height))&&(n[r.id]=r)}),n}function M6(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function I6(e){return!!(e&&e.isFrame)}function mh(e,t){return be({},e||{},t||{})}var AG=1;function Xl(e,t){Ds.call(this,e,AG),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}We(Xl,Ds);Xl.prototype.canRender=function(){return!0};Xl.prototype.drawShape=function(t,n,r){var i=Qe("rect");return He(i,{x:0,y:0,width:n.width||0,height:n.height||0}),I6(n)?He(i,be({},this.FRAME_STYLE,r||{})):He(i,be({},this.SHAPE_STYLE,r||{})),pt(t,i),i};Xl.prototype.drawConnection=function(t,n,r){var i=Ay(n.waypoints,be({},this.CONNECTION_STYLE,r||{}));return pt(t,i),i};Xl.prototype.getShapePath=function(t){var n=t.x,r=t.y,i=t.width,o=t.height,a=[["M",n,r],["l",i,0],["l",0,o],["l",-i,0],["z"]];return Eu(a)};Xl.prototype.getConnectionPath=function(t){var n=t.waypoints,r,i,o=[];for(r=0;i=n[r];r++)i=i.original||i,o.push([r===0?"M":"L",i.x,i.y]);return Eu(o)};Xl.$inject=["eventBus","styles"];function kG(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,r,i){var o=this.style(r,i);return be(o,{class:n})},this.style=function(n,r){!bt(n)&&!r&&(r=n,n=[]);var i=Bi(n,function(o,a){return be(o,e[a]||{})},{});return r?be(i,r):i},this.computeStyle=function(n,r,i){return bt(r)||(i=r,r=[]),t.style(r||[],be({},i,n||{}))}}const CG={__init__:["defaultRenderer"],defaultRenderer:["type",Xl],styles:["type",kG]};function Yn(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function dr(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var r=e.indexOf(t);if(r!==-1){if(r===n)return;if(n!==-1)e.splice(r,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Yx(e,t){return!e||!t?-1:e.indexOf(t)}function Vp(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Jx(e,t,n,r){if(typeof r>"u"&&(r=5),!e||!t||!n)return!1;var i=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=Vp(e,t);return Math.abs(i/o)<=r}var PG=2;function xs(e,t){var n=Array.from(arguments).flat();const r={x:"v",y:"h"};for(const[i,o]of Object.entries(r))if(TG(i,n))return o;return!1}function TG(e,t){const n=t[0];return xu(t,function(r){return Math.abs(n[e]-r[e])<=PG})}function Pk(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function nw(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var RG=/,?([a-z]),?/gi,Tk=parseFloat,Gn=Math,dl=Gn.PI,Ra=Gn.min,La=Gn.max,Rk=Gn.pow,Cl=Gn.abs,LG=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,OG=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,Lv=Array.isArray||function(e){return e instanceof Array};function Xx(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Kh(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)Xx(e,n)&&(t[n]=Kh(e[n]));return t}function MG(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function IG(e){function t(){var n=Array.prototype.slice.call(arguments,0),r=n.join(""),i=t.cache=t.cache||{},o=t.count=t.count||[];return Xx(i,r)?(MG(o,r),i[r]):(o.length>=1e3&&delete i[o.shift()],o.push(r),i[r]=e(...arguments),i[r])}return t}function DG(e){if(!e)return null;var t=Yd(e);if(t.arr)return Kh(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return Lv(e)&&Lv(e[0])&&(r=Kh(e)),r.length||String(e).replace(LG,function(i,o,a){var s=[],l=o.toLowerCase();for(a.replace(OG,function(c,u){u&&s.push(+u)}),l=="m"&&s.length>2&&(r.push([o,...s.splice(0,2)]),l="l",o=o=="m"?"l":"L");s.length>=n[l]&&(r.push([o,...s.splice(0,n[l])]),!!n[l]););}),r.toString=Yd.toString,t.arr=Kh(r),r}function Yd(e){var t=Yd.ps=Yd.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)Xx(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function rw(e,t,n,r){return arguments.length===1&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,height:r,x2:e+n,y2:t+r}}function D6(){return this.join(",").replace(RG,"$1")}function Ov(e){var t=Kh(e);return t.toString=D6,t}function Lk(e,t,n,r,i,o,a,s,l){var c=1-l,u=Rk(c,3),d=Rk(c,2),h=l*l,f=h*l,m=u*e+d*3*l*n+c*3*l*l*i+f*a,v=u*t+d*3*l*r+c*3*l*l*o+f*s;return{x:Mv(m),y:Mv(v)}}function Ok(e){var t=UG(...e);return rw(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function fl(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function jG(e,t){return e=rw(e),t=rw(t),fl(t,e.x,e.y)||fl(t,e.x2,e.y)||fl(t,e.x,e.y2)||fl(t,e.x2,e.y2)||fl(e,t.x,t.y)||fl(e,t.x2,t.y)||fl(e,t.x,t.y2)||fl(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function Mk(e,t,n,r,i){var o=-3*t+9*n-9*r+3*i,a=e*o+6*t-12*n+6*r;return e*a-3*t+3*n}function Ik(e,t,n,r,i,o,a,s,l){l==null&&(l=1),l=l>1?1:l<0?0:l;for(var c=l/2,u=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,m=0;m<u;m++){var v=c*d[m]+c,b=Mk(v,e,n,i,a),y=Mk(v,t,r,o,s),x=b*b+y*y;f+=h[m]*Gn.sqrt(x)}return c*f}function BG(e,t,n,r,i,o,a,s){if(!(La(e,n)<Ra(i,a)||Ra(e,n)>La(i,a)||La(t,r)<Ra(o,s)||Ra(t,r)>La(o,s))){var l=(e*r-t*n)*(i-a)-(e-n)*(i*s-o*a),c=(e*r-t*n)*(o-s)-(t-r)*(i*s-o*a),u=(e-n)*(o-s)-(t-r)*(i-a);if(u){var d=Mv(l/u),h=Mv(c/u),f=+d.toFixed(2),m=+h.toFixed(2);if(!(f<+Ra(e,n).toFixed(2)||f>+La(e,n).toFixed(2)||f<+Ra(i,a).toFixed(2)||f>+La(i,a).toFixed(2)||m<+Ra(t,r).toFixed(2)||m>+La(t,r).toFixed(2)||m<+Ra(o,s).toFixed(2)||m>+La(o,s).toFixed(2)))return{x:d,y:h}}}}function Mv(e){return Math.round(e*1e11)/1e11}function FG(e,t,n){var r=Ok(e),i=Ok(t);if(!jG(r,i))return[];for(var o=Ik(...e),a=Ik(...t),s=Dk(e)?1:~~(o/5)||1,l=Dk(t)?1:~~(a/5)||1,c=[],u=[],d={},h=[],f=0;f<s+1;f++){var m=Lk(...e,f/s);c.push({x:m.x,y:m.y,t:f/s})}for(f=0;f<l+1;f++)m=Lk(...t,f/l),u.push({x:m.x,y:m.y,t:f/l});for(f=0;f<s;f++)for(var v=0;v<l;v++){var b=c[f],y=c[f+1],x=u[v],_=u[v+1],w=Cl(y.x-b.x)<.01?"y":"x",R=Cl(_.x-x.x)<.01?"y":"x",I=BG(b.x,b.y,y.x,y.y,x.x,x.y,_.x,_.y),q;if(I){if(q=I.x.toFixed(9)+"#"+I.y.toFixed(9),d[q])continue;d[q]=!0;var T=b.t+Cl((I[w]-b[w])/(y[w]-b[w]))*(y.t-b.t),D=x.t+Cl((I[R]-x[R])/(_[R]-x[R]))*(_.t-x.t);T>=0&&T<=1&&D>=0&&D<=1&&h.push({x:I.x,y:I.y,t1:T,t2:D})}}return h}function j6(e,t,n){e=Bk(e),t=Bk(t);for(var r,i,o,a,s,l,c,u,d,h,f=n?0:[],m=0,v=e.length;m<v;m++){var b=e[m];if(b[0]=="M")r=s=b[1],i=l=b[2];else{b[0]=="C"?(d=[r,i,...b.slice(1)],r=d[6],i=d[7]):(d=[r,i,r,i,s,l,s,l],r=s,i=l);for(var y=0,x=t.length;y<x;y++){var _=t[y];if(_[0]=="M")o=c=_[1],a=u=_[2];else{_[0]=="C"?(h=[o,a,..._.slice(1)],o=h[6],a=h[7]):(h=[o,a,o,a,c,u,c,u],o=c,a=u);var w=FG(d,h);{for(var R=0,I=w.length;R<I;R++)w[R].segment1=m,w[R].segment2=y,w[R].bez1=d,w[R].bez2=h;f=f.concat(w)}}}}}return f}function $G(e){var t=Yd(e);if(t.abs)return Ov(t.abs);if((!Lv(e)||!Lv(e&&e[0]))&&(e=DG(e)),!e||!e.length)return[["M",0,0]];var n=[],r=0,i=0,o=0,a=0,s=0,l;e[0][0]=="M"&&(r=+e[0][1],i=+e[0][2],o=r,a=i,s++,n[0]=["M",r,i]);for(var c,u,d=s,h=e.length;d<h;d++){if(n.push(c=[]),u=e[d],l=u[0],l!=l.toUpperCase())switch(c[0]=l.toUpperCase(),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+u[6]+r,c[7]=+u[7]+i;break;case"V":c[1]=+u[1]+i;break;case"H":c[1]=+u[1]+r;break;case"M":o=+u[1]+r,a=+u[2]+i;default:for(var f=1,m=u.length;f<m;f++)c[f]=+u[f]+(f%2?r:i)}else for(var v=0,b=u.length;v<b;v++)c[v]=u[v];switch(l=l.toUpperCase(),c[0]){case"Z":r=+o,i=+a;break;case"H":r=c[1];break;case"V":i=c[1];break;case"M":o=c[c.length-2],a=c[c.length-1];default:r=c[c.length-2],i=c[c.length-1]}}return n.toString=D6,t.abs=Ov(n),n}function Dk(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function Dg(e,t,n,r){return[e,t,n,r,n,r]}function jk(e,t,n,r,i,o){var a=.3333333333333333,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]}function B6(e,t,n,r,i,o,a,s,l,c){var u=dl*120/180,d=dl/180*(+i||0),h=[],f,m=IG(function(N,k,V){var J=N*Gn.cos(V)-k*Gn.sin(V),se=N*Gn.sin(V)+k*Gn.cos(V);return{x:J,y:se}});if(c)q=c[0],T=c[1],R=c[2],I=c[3];else{f=m(e,t,-d),e=f.x,t=f.y,f=m(s,l,-d),s=f.x,l=f.y;var v=(e-s)/2,b=(t-l)/2,y=v*v/(n*n)+b*b/(r*r);y>1&&(y=Gn.sqrt(y),n=y*n,r=y*r);var x=n*n,_=r*r,w=(o==a?-1:1)*Gn.sqrt(Cl((x*_-x*b*b-_*v*v)/(x*b*b+_*v*v))),R=w*n*b/r+(e+s)/2,I=w*-r*v/n+(t+l)/2,q=Gn.asin(((t-I)/r).toFixed(9)),T=Gn.asin(((l-I)/r).toFixed(9));q=e<R?dl-q:q,T=s<R?dl-T:T,q<0&&(q=dl*2+q),T<0&&(T=dl*2+T),a&&q>T&&(q=q-dl*2),!a&&T>q&&(T=T-dl*2)}var D=T-q;if(Cl(D)>u){var M=T,C=s,j=l;T=q+u*(a&&T>q?1:-1),s=R+n*Gn.cos(T),l=I+r*Gn.sin(T),h=B6(s,l,n,r,i,0,a,C,j,[T,M,R,I])}D=T-q;var z=Gn.cos(q),Q=Gn.sin(q),me=Gn.cos(T),pe=Gn.sin(T),ue=Gn.tan(D/4),te=4/3*n*ue,ae=4/3*r*ue,ye=[e,t],we=[e+te*Q,t-ae*z],L=[s+te*pe,l-ae*me],G=[s,l];if(we[0]=2*ye[0]-we[0],we[1]=2*ye[1]-we[1],c)return[we,L,G].concat(h);h=[we,L,G].concat(h).join().split(",");for(var K=[],ee=0,O=h.length;ee<O;ee++)K[ee]=ee%2?m(h[ee-1],h[ee],d).y:m(h[ee],h[ee+1],d).x;return K}function UG(e,t,n,r,i,o,a,s){for(var l=[],c=[[],[]],u,d,h,f,m,v,b,y,x=0;x<2;++x){if(x==0?(d=6*e-12*n+6*i,u=-3*e+9*n-9*i+3*a,h=3*n-3*e):(d=6*t-12*r+6*o,u=-3*t+9*r-9*o+3*s,h=3*r-3*t),Cl(u)<1e-12){if(Cl(d)<1e-12)continue;f=-h/d,0<f&&f<1&&l.push(f);continue}b=d*d-4*h*u,y=Gn.sqrt(b),!(b<0)&&(m=(-d+y)/(2*u),0<m&&m<1&&l.push(m),v=(-d-y)/(2*u),0<v&&v<1&&l.push(v))}for(var _=l.length,w=_,R;_--;)f=l[_],R=1-f,c[0][_]=R*R*R*e+3*R*R*f*n+3*R*f*f*i+f*f*f*a,c[1][_]=R*R*R*t+3*R*R*f*r+3*R*f*f*o+f*f*f*s;return c[0][w]=e,c[1][w]=t,c[0][w+1]=a,c[1][w+1]=s,c[0].length=c[1].length=w+2,{x0:Ra(...c[0]),y0:Ra(...c[1]),x1:La(...c[0]),y1:La(...c[1])}}function Bk(e){var t=Yd(e);if(t.curve)return Ov(t.curve);for(var n=$G(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=function(f,m,v){var b,y;if(!f)return["C",m.x,m.y,m.x,m.y,m.x,m.y];switch(!(f[0]in{T:1,Q:1})&&(m.qx=m.qy=null),f[0]){case"M":m.X=f[1],m.Y=f[2];break;case"A":f=["C",...B6(m.x,m.y,...f.slice(1))];break;case"S":v=="C"||v=="S"?(b=m.x*2-m.bx,y=m.y*2-m.by):(b=m.x,y=m.y),f=["C",b,y,...f.slice(1)];break;case"T":v=="Q"||v=="T"?(m.qx=m.x*2-m.qx,m.qy=m.y*2-m.qy):(m.qx=m.x,m.qy=m.y),f=["C",...jk(m.x,m.y,m.qx,m.qy,f[1],f[2])];break;case"Q":m.qx=f[1],m.qy=f[2],f=["C",...jk(m.x,m.y,f[1],f[2],f[3],f[4])];break;case"L":f=["C",...Dg(m.x,m.y,f[1],f[2])];break;case"H":f=["C",...Dg(m.x,m.y,f[1],m.y)];break;case"V":f=["C",...Dg(m.x,m.y,m.x,f[1])];break;case"Z":f=["C",...Dg(m.x,m.y,m.X,m.Y)];break}return f},o=function(f,m){if(f[m].length>7){f[m].shift();for(var v=f[m];v.length;)a[m]="A",f.splice(m++,0,["C",...v.splice(0,6)]);f.splice(m,1),u=n.length}},a=[],s="",l="",c=0,u=n.length;c<u;c++){n[c]&&(s=n[c][0]),s!="C"&&(a[c]=s,c&&(l=a[c-1])),n[c]=i(n[c],r,l),a[c]!="A"&&s=="C"&&(a[c]="C"),o(n,c);var d=n[c],h=d.length;r.x=d[h-2],r.y=d[h-1],r.bx=Tk(d[h-4])||r.x,r.by=Tk(d[h-3])||r.y}return t.curve=Ov(n),n}function on(e){return Tr(e)&&xi(e,"waypoints")}function Gt(e){return Tr(e)&&xi(e,"labelTarget")}function F6(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Ns(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function at(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Cy(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function zG(e){return Ns({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function GG(e){for(var t=e.waypoints,n=t.reduce(function(c,u,d){var h=t[d-1];if(h){var f=c[c.length-1],m=f&&f.endLength||0,v=VG(h,u);c.push({start:h,end:u,startLength:m,endLength:m+v,length:v})}return c},[]),r=n.reduce(function(c,u){return c+u.length},0),i=r/2,o=0,a=n[o];a.endLength<i;)a=n[++o];var s=(i-a.startLength)/a.length,l={x:a.start.x+(a.end.x-a.start.x)*s,y:a.start.y+(a.end.y-a.start.y)*s};return l}function ht(e){return on(e)?GG(e):zG(e)}function ti(e,t,n){n=n||0,Tr(n)||(n={x:n,y:n});var r=at(e),i=at(t),o=r.bottom+n.y<=i.top,a=r.left-n.x>=i.right,s=r.top-n.y>=i.bottom,l=r.right+n.x<=i.left,c=o?"top":s?"bottom":null,u=l?"left":a?"right":null;return u&&c?c+"-"+u:u||c||"intersect"}function iw(e,t,n){var r=qG(e,t);return r.length===1||r.length===2&&Vp(r[0],r[1])<1?Ns(r[0]):r.length>1?(r=Ua(r,function(i){var o=Math.floor(i.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,i.segment2+"#"+o}),Ns(r[n?0:r.length-1])):null}function qG(e,t){return j6(e,t)}function HG(e){e=e.slice();for(var t=0,n,r,i;e[t];)n=e[t],r=e[t-1],i=e[t+1],Vp(n,i)===0||Jx(r,i,n)?e.splice(t,1):t++;return e}function VG(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function R0(e,t){return Math.round(e*t)/t}function Fk(e){return ft(e)?e+"px":e}function WG(e){for(;e.parent;)e=e.parent;return e}function KG(e){e=be({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Jr(n,{position:"relative",overflow:"hidden",width:Fk(e.width),height:Fk(e.height)}),t.appendChild(n),n}function $6(e,t,n){const r=Qe("g");Ut(r).add(t);const i=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(r,e.childNodes[i]||null),r}const YG="base",U6=0,JG=1,XG={shape:["x","y","width","height"],connection:["waypoints"]};function Et(e,t,n,r){this._eventBus=t,this._elementRegistry=r,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}Et.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];Et.prototype._init=function(e){const t=this._eventBus,n=this._container=KG(e),r=this._svg=Qe("svg");He(r,{width:"100%",height:"100%"}),pt(n,r);const i=this._viewport=$6(r,"viewport");e.deferUpdate&&(this._viewboxChanged=x6(fa(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:r,viewport:i})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};Et.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};Et.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=M6(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};Et.prototype.getDefaultLayer=function(){return this.getLayer(YG,U6)};Et.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};Et.prototype._getChildIndex=function(e){return Bi(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};Et.prototype._createLayer=function(e,t){typeof t>"u"&&(t=JG);const n=this._getChildIndex(t);return{group:$6(this._viewport,"layer-"+e,n),index:t,visible:!0}};Et.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,r=t.group,i=t.index;if(t.visible)return r;const o=this._getChildIndex(i);return n.insertBefore(r,n.childNodes[o]||null),t.visible=!0,r};Et.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(cr(n),t.visible=!1),n};Et.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],cr(t.group))};Et.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};Et.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(WG(e))||{}).rootElement:void 0};Et.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};Et.prototype._findPlaneForRoot=function(e){return Vt(this._planes,function(t){return t.rootElement===e})};Et.prototype.getContainer=function(){return this._container};Et.prototype._updateMarker=function(e,t,n){let r;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,r=this._elementRegistry._elements[e.id],r&&(le([r.gfx,r.secondaryGfx],function(i){i&&(n?(e.markers.add(t),Ut(i).add(t)):(e.markers.delete(t),Ut(i).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:r.gfx,marker:t,add:!!n}))};Et.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};Et.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};Et.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};Et.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};Et.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};Et.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const r=this.getLayer(n,U6);return this.hideLayer(n),this._addRoot(e,r),this._planes.push({rootElement:e,layer:r}),e};Et.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};Et.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};Et.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};Et.prototype._addRoot=function(e,t){const n=this._elementRegistry,r=this._eventBus;r.fire("root.add",{element:e}),n.add(e,t),r.fire("root.added",{element:e,gfx:t})};Et.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};Et.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=XG[e];if(!xu(n,function(i){return typeof t[i]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};Et.prototype._setParent=function(e,t,n){dr(t.children,e,n),e.parent=t};Et.prototype._addElement=function(e,t,n,r){n=n||this.getRootElement();const i=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),i.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,r);const a=o.create(e,t,r);return this._elementRegistry.add(t,a),o.update(e,t,a),i.fire(e+".added",{element:t,gfx:a}),t};Et.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};Et.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};Et.prototype._removeElement=function(e,t){const n=this._elementRegistry,r=this._graphicsFactory,i=this._eventBus;if(e=n.get(e.id||e),!!e)return i.fire(t+".remove",{element:e}),r.remove(e),Yn(e.parent&&e.parent.children,e),e.parent=null,i.fire(t+".removed",{element:e}),n.remove(e),e};Et.prototype.removeShape=function(e){return this._removeElement(e,"shape")};Et.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};Et.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};Et.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};Et.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};Et.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let r,i,o,a,s,l,c;if(e)this._changeViewbox(function(){s=Math.min(n.width/e.width,n.height/e.height);const u=this._svg.createSVGMatrix().scale(s).translate(-e.x,-e.y);Cp(t,u)});else return o=this._rootElement?this.getActiveLayer():null,r=o&&o.getBBox()||{},a=Cp(t),i=a?a.matrix:aG(),s=R0(i.a,1e3),l=R0(-i.e||0,1e3),c=R0(-i.f||0,1e3),e=this._cachedViewbox={x:l?l/s:0,y:c?c/s:0,width:n.width/s,height:n.height/s,scale:s,inner:{width:r.width||0,height:r.height||0,x:r.x||0,y:r.y||0},outer:n},e;return e};Et.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=be({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),z6(t,n)}),{x:n.e,y:n.f}};Et.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const r=this.findRoot(e);if(r!==this.getRootElement()&&this.setRootElement(r),r===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const i=yr(e),o=at(i),a=this.viewbox(),s=this.zoom();let l,c;a.y+=t.top/s,a.x+=t.left/s,a.width-=(t.right+t.left)/s,a.height-=(t.bottom+t.top)/s;const u=at(a);if(!(i.width<a.width&&i.height<a.height))l=i.x-a.x,c=i.y-a.y;else{const h=Math.max(0,o.right-u.right),f=Math.min(0,o.left-u.left),m=Math.max(0,o.bottom-u.bottom),v=Math.min(0,o.top-u.top);l=h||f,c=m||v}this.scroll({dx:-l*s,dy:-c*s})};Et.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,r;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),r=this._setZoom(e,t)}),R0(r.a,1e3)};function z6(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Et.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,r=t.inner;let i,o;return r.x>=0&&r.y>=0&&r.x+r.width<=n.width&&r.y+r.height<=n.height&&!e?o={x:0,y:0,width:Math.max(r.width+r.x,n.width),height:Math.max(r.height+r.y,n.height)}:(i=Math.min(1,n.width/r.width,n.height/r.height),o={x:r.x+(e?r.width/2-n.width/i/2:0),y:r.y+(e?r.height/2-n.height/i/2:0),width:n.width/i,height:n.height/i}),this.viewbox(o),this.viewbox(!1).scale};Et.prototype._setZoom=function(e,t){const n=this._svg,r=this._viewport,i=n.createSVGMatrix(),o=n.createSVGPoint();let a,s,l,c,u;l=r.getCTM();const d=l.a;return t?(a=be(o,t),s=a.matrixTransform(l.inverse()),c=i.translate(s.x,s.y).scale(1/d*e).translate(-s.x,-s.y),u=l.multiply(c)):u=i.scale(e),z6(this._viewport,u),u};Et.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};Et.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,a=n.height*t.scale;return{x:r,y:i,width:o,height:a}};Et.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Jd="data-element-id";function co(e){this._elements={},this._eventBus=e}co.$inject=["eventBus"];co.prototype.add=function(e,t,n){var r=e.id;this._validateId(r),He(t,Jd,r),n&&He(n,Jd,r),this._elements[r]={element:e,gfx:t,secondaryGfx:n}};co.prototype.remove=function(e){var t=this._elements,n=e.id||e,r=n&&t[n];r&&(He(r.gfx,Jd,""),r.secondaryGfx&&He(r.secondaryGfx,Jd,""),delete t[n])};co.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),r=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,r)};co.prototype.updateGraphics=function(e,t,n){var r=e.id||e,i=this._elements[r];return n?i.secondaryGfx=t:i.gfx=t,t&&He(t,Jd,r),t};co.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&He(e,Jd);var n=this._elements[t];return n&&n.element};co.prototype.filter=function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(n)}),t};co.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i],a=o.element,s=o.gfx;if(e(a,s))return a}};co.prototype.getAll=function(){return this.filter(function(e){return e})};co.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var r=t[n],i=r.element,o=r.gfx;return e(i,o)})};co.prototype.getGraphics=function(e,t){var n=e.id||e,r=this._elements[n];return r&&(t?r.secondaryGfx:r.gfx)};co.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function ZG(e,t,n,r){var i=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var a=this.indexOf(o);return a!==-1&&(this.splice(a,1),t.unset(o,i,r)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,a){var s=this.indexOf(o);if(typeof a>"u"){if(s!==-1)return;a=this.length}s!==-1&&this.splice(s,1),this.splice(a,0,o),s===-1&&t.set(o,i,r)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function QG(e){return e.__refs_collection===!0}function eq(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function G6(e,t,n){var r=ZG(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:r}),r.length&&r.forEach(function(i){e.set(i,t.inverse,n)})}function tq(e,t,n){var r=t.inverse,i=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return i},set:function(o){if(o!==i){var a=i;i=null,a&&e.unset(a,r,n),i=o,e.set(i,r,n)}}})}function Do(e,t){if(!(this instanceof Do))return new Do(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Do.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?G6(this,t,e):tq(this,t,e)};Do.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return QG(n)||G6(this,t,e),n};Do.prototype.ensureBound=function(e,t){eq(e,t)||this.bind(e,t)};Do.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};Do.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Zx=new Do({name:"children",enumerable:!0,collection:!0},{name:"parent"}),q6=new Do({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),$k=new Do({name:"attachers",collection:!0},{name:"host"}),H6=new Do({name:"outgoing",collection:!0},{name:"source"}),V6=new Do({name:"incoming",collection:!0},{name:"target"});function mf(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Zx.bind(this,"parent"),q6.bind(this,"labels"),H6.bind(this,"outgoing"),V6.bind(this,"incoming")}function Wp(){mf.call(this),Zx.bind(this,"children"),$k.bind(this,"host"),$k.bind(this,"attachers")}We(Wp,mf);function W6(){mf.call(this),Zx.bind(this,"children")}We(W6,Wp);function K6(){Wp.call(this),q6.bind(this,"labelTarget")}We(K6,Wp);function Y6(){mf.call(this),H6.bind(this,"source"),V6.bind(this,"target")}We(Y6,mf);var nq={connection:Y6,shape:Wp,label:K6,root:W6};function rq(e,t){var n=nq[e];if(!n)throw new Error("unknown type: <"+e+">");return be(new n,t)}function iq(e){return e instanceof mf}function js(){this._uid=12}js.prototype.createRoot=function(e){return this.create("root",e)};js.prototype.createLabel=function(e){return this.create("label",e)};js.prototype.createShape=function(e){return this.create("shape",e)};js.prototype.createConnection=function(e){return this.create("connection",e)};js.prototype.create=function(e,t){return t=be({},t||{}),t.id||(t.id=e+"_"+this._uid++),rq(e,t)};var Iv="__fn",J6=1e3,oq=Array.prototype.slice;function $i(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}$i.prototype.on=function(e,t,n,r){if(e=bt(e)?e:[e],ur(t)&&(r=n,n=t,t=J6),!ft(t))throw new Error("priority must be a number");var i=n;r&&(i=fa(n,r),i[Iv]=n[Iv]||n);var o=this;e.forEach(function(a){o._addListener(a,{priority:t,callback:i,next:null})})};$i.prototype.once=function(e,t,n,r){var i=this;if(ur(t)&&(r=n,n=t,t=J6),!ft(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var a=n.apply(r,arguments);return i.off(e,o),a}o[Iv]=n,this.on(e,t,o)};$i.prototype.off=function(e,t){e=bt(e)?e:[e];var n=this;e.forEach(function(r){n._removeListener(r,t)})};$i.prototype.createEvent=function(e){var t=new Kp;return t.init(e),t};$i.prototype.fire=function(e,t){var n,r,i,o;if(o=oq.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(r=this._listeners[e],!!r){t instanceof Kp?n=t:n=this.createEvent(t),o[0]=n;var a=n.type;e!==a&&(n.type=e);try{i=this._invokeListeners(n,o,r)}finally{e!==a&&(n.type=a)}return i===void 0&&n.defaultPrevented&&(i=!1),i}};$i.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};$i.prototype._destroy=function(){this._listeners={}};$i.prototype._invokeListeners=function(e,t,n){for(var r;n&&!e.cancelBubble;)r=this._invokeListener(e,t,n),n=n.next;return r};$i.prototype._invokeListener=function(e,t,n){var r;if(n.callback.__isTomb)return r;try{r=aq(n.callback,t),r!==void 0&&(e.returnValue=r,e.stopPropagation()),r===!1&&e.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener",i),i}return r};$i.prototype._addListener=function(e,t){var n=this._getListeners(e),r;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,r?r.next=t:this._setListeners(e,t);return}r=n,n=n.next}r.next=t};$i.prototype._getListeners=function(e){return this._listeners[e]};$i.prototype._setListeners=function(e,t){this._listeners[e]=t};$i.prototype._removeListener=function(e,t){var n=this._getListeners(e),r,i,o;if(!t){this._setListeners(e,null);return}for(;n;)r=n.next,o=n.callback,(o===t||o[Iv]===t)&&(i?i.next=r:this._setListeners(e,r)),i=n,n=r};function Kp(){}Kp.prototype.stopPropagation=function(){this.cancelBubble=!0};Kp.prototype.preventDefault=function(){this.defaultPrevented=!0};Kp.prototype.init=function(e){be(this,e||{})};function aq(e,t){return e.apply(null,t)}function ou(e){return e.childNodes[0]}function sq(e){return e.parentNode.childNodes[1]}function L0(e,t,n,r,i){var o=Wh();o.setTranslate(t,n);var a=Wh();a.setRotate(r||0,0,0);var s=Wh();s.setScale(1,1),Cp(e,[o,a,s])}function Dr(e,t,n){var r=Wh();r.setTranslate(t,n),Cp(e,r)}function X6(e,t){var n=Wh();n.setRotate(t,0,0),Cp(e,n)}function uo(e,t){this._eventBus=e,this._elementRegistry=t}uo.$inject=["eventBus","elementRegistry"];uo.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=sq(t),n||(n=Qe("g"),Ut(n).add("djs-children"),pt(t.parentNode,n))):n=t,n};uo.prototype._clear=function(e){var t=ou(e);return Ey(t),t};uo.prototype._createContainer=function(e,t,n,r){var i=Qe("g");Ut(i).add("djs-group"),typeof n<"u"?Z6(i,t,t.childNodes[n]):pt(t,i);var o=Qe("g");Ut(o).add("djs-element"),Ut(o).add("djs-"+e),r&&Ut(o).add("djs-frame"),pt(i,o);var a=Qe("g");return Ut(a).add("djs-visual"),pt(o,a),o};uo.prototype.create=function(e,t,n){var r=this._getChildrenContainer(t.parent);return this._createContainer(e,r,n,I6(t))};uo.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,r;r=Bi(e,function(i,o){return o.parent&&(i[o.parent.id]=o.parent),i},{}),le(r,function(i){var o=i.children;if(o){var a=t._getChildrenContainer(i);le(o.slice().reverse(),function(s){var l=n.getGraphics(s);Z6(l.parentNode,a)})}})};uo.prototype.drawShape=function(e,t,n={}){var r=this._eventBus;return r.fire("render.shape",{gfx:e,element:t,attrs:n})};uo.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};uo.prototype.drawConnection=function(e,t,n={}){var r=this._eventBus;return r.fire("render.connection",{gfx:e,element:t,attrs:n})};uo.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};uo.prototype.update=function(e,t,n){if(t.parent){var r=this._clear(n);if(e==="shape")this.drawShape(r,t),Dr(n,t.x,t.y);else if(e==="connection")this.drawConnection(r,t);else throw new Error("unknown type: "+e);t.hidden?He(n,"display","none"):He(n,"display","block")}};uo.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);cr(t.parentNode)};function Z6(e,t,n){var r=n||t.firstChild;e!==r&&t.insertBefore(e,r)}const lq={__depends__:[CG],__init__:["canvas"],canvas:["type",Et],elementRegistry:["type",co],elementFactory:["type",js],eventBus:["type",$i],graphicsFactory:["type",uo]};function cq(e){var t=new R6(e);return t.init(),t}function uq(e){e=e||{};var t={config:["value",e]},n=[t,lq].concat(e.modules||[]);return cq(n)}function Zl(e,t){this._injector=t||uq(e),this.get("eventBus").fire("diagram.init")}Zl.prototype.get=function(e,t){return this._injector.get(e,t)};Zl.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};Zl.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Zl.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Qx(){}Qx.prototype.get=function(e){return this.$model.properties.get(this,e)};Qx.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function Q6(e,t){this.model=e,this.properties=t}Q6.prototype.createType=function(e){var t=this.model,n=this.properties,r=Object.create(Qx.prototype);le(e.properties,function(a){!a.isMany&&a.default!==void 0&&(r[a.name]=a.default)}),n.defineModel(r,t),n.defineDescriptor(r,e);var i=e.ns.name;function o(a){n.define(this,"$type",{value:i,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),le(a,fa(function(s,l){this.set(l,s)},this))}return o.prototype=r,o.hasType=r.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var dq={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},eL={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function e5(e,t){var n=eL[e];return n?n(t):t}function ow(e){return!!dq[e]}function tL(e){return!!eL[e]}function hi(e,t){var n=e.split(/:/),r,i;if(n.length===1)r=e,i=t;else if(n.length===2)r=n[1],i=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(i?i+":":"")+r,{name:e,prefix:i,localName:r}}function fo(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}fo.prototype.build=function(){return Ls(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};fo.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var r=this.properties;t!==void 0?r.splice(t,0,e):r.push(e)};fo.prototype.replaceProperty=function(e,t,n){var r=e.ns,i=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=i.indexOf(e);if(s===-1)throw new Error("property <"+r.name+"> not found in property list");i.splice(s,1),this.addProperty(t,n?void 0:s,a),o[r.name]=o[r.localName]=t};fo.prototype.redefineProperty=function(e,t,n){var r=e.ns.prefix,i=t.split("#"),o=hi(i[0],r),a=hi(i[1],o.prefix).name,s=this.propertiesByName[a];if(s)this.replaceProperty(s,e,n);else throw new Error("refined property <"+a+"> not found");delete e.redefines};fo.prototype.addNamedProperty=function(e,t){var n=e.ns,r=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),r[n.name]=r[n.localName]=e};fo.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};fo.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};fo.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};fo.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};fo.prototype.assertNotDefined=function(e,t){var n=e.name,r=this.propertiesByName[n];if(r)throw new Error("property <"+n+"> already defined; override of <"+r.definedBy.ns.name+"#"+r.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};fo.prototype.hasProperty=function(e){return this.propertiesByName[e]};fo.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,r=this.allTypes,i=e.name;i in n||(le(e.properties,fa(function(o){o=be({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var a=o.replaces,s=o.redefines;a||s?this.redefineProperty(o,a||s,a):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),r.push(e),n[i]=e)};function Ql(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,le(e,fa(this.registerPackage,this))}Ql.prototype.getPackage=function(e){return this.packageMap[e]};Ql.prototype.getPackages=function(){return this.packages};Ql.prototype.registerPackage=function(e){e=be({},e);var t=this.packageMap;Uk(t,e,"prefix"),Uk(t,e,"uri"),le(e.types,fa(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};Ql.prototype.registerType=function(e,t){e=be({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:be(e.meta||{})});var n=hi(e.name,t.prefix),r=n.name,i={};le(e.properties,fa(function(o){var a=hi(o.name,n.prefix),s=a.name;ow(o.type)||(o.type=hi(o.type,a.prefix).name),be(o,{ns:a,name:s}),i[s]=o},this)),be(e,{ns:n,name:r,propertiesByName:i}),le(e.extends,fa(function(o){var a=hi(o,n.prefix),s=this.typeMap[a.name];s.traits=s.traits||[],s.traits.push(r)},this)),this.definePackage(e,t),this.typeMap[r]=e};Ql.prototype.mapTypes=function(e,t,n){var r=ow(e.name)?{name:e.name}:this.typeMap[e.name],i=this;function o(l,c){var u=hi(l,ow(l)?"":e.prefix);i.mapTypes(u,t,c)}function a(l){return o(l,!0)}function s(l){return o(l,!1)}if(!r)throw new Error("unknown type <"+e.name+">");le(r.superClass,n?a:s),t(r,!n),le(r.traits,a)};Ql.prototype.getEffectiveDescriptor=function(e){var t=hi(e),n=new fo(t);this.mapTypes(t,function(i,o){n.addTrait(i,o)});var r=n.build();return this.definePackage(r,r.allTypes[r.allTypes.length-1].$pkg),r};Ql.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function Uk(e,t,n){var r=t[n];if(r in e)throw new Error("package with "+n+" <"+r+"> already defined")}function Nu(e){this.model=e}Nu.prototype.set=function(e,t,n){if(!ji(t)||!t.length)throw new TypeError("property name must be a non-empty string");var r=this.getProperty(e,t),i=r&&r.name;fq(n)?r?delete e[i]:delete e.$attrs[aw(t)]:r?i in e?e[i]=n:nL(e,r,n):e.$attrs[aw(t)]=n};Nu.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[aw(t)];var r=n.name;return!e[r]&&n.isMany&&nL(e,n,[]),e[r]};Nu.prototype.define=function(e,t,n){if(!n.writable){var r=n.value;n=be({},n,{get:function(){return r}}),delete n.value}Object.defineProperty(e,t,n)};Nu.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Nu.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Nu.prototype.getProperty=function(e,t){var n=this.model,r=n.getPropertyDescriptor(e,t);if(r)return r;if(t.includes(":"))return null;const i=n.config.strict;if(typeof i<"u"){const o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(i)throw o;typeof console<"u"&&console.warn(o)}return null};function fq(e){return typeof e>"u"}function nL(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function aw(e){return e.replace(/^:/,"")}function jo(e,t={}){this.properties=new Nu(this),this.factory=new Q6(this,this.properties),this.registry=new Ql(e,this.properties),this.typeCache={},this.config=t}jo.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};jo.prototype.getType=function(e){var t=this.typeCache,n=ji(e)?e:e.ns.name,r=t[n];return r||(e=this.registry.getEffectiveDescriptor(n),r=t[n]=this.factory.createType(e)),r};jo.prototype.createAny=function(e,t,n){var r=hi(e),i={$type:e,$instanceOf:function(a){return a===this.$type},get:function(a){return this[a]},set:function(a,s){jz(this,[a],s)}},o={name:e,isGeneric:!0,ns:{prefix:r.prefix,localName:r.localName,uri:t}};return this.properties.defineDescriptor(i,o),this.properties.defineModel(i,this),this.properties.define(i,"get",{enumerable:!1,writable:!0}),this.properties.define(i,"set",{enumerable:!1,writable:!0}),this.properties.define(i,"$parent",{enumerable:!1,writable:!0}),this.properties.define(i,"$instanceOf",{enumerable:!1,writable:!0}),le(n,function(a,s){Tr(a)&&a.value!==void 0?i[a.name]=a.value:i[s]=a}),i};jo.prototype.getPackage=function(e){return this.registry.getPackage(e)};jo.prototype.getPackages=function(){return this.registry.getPackages()};jo.prototype.getElementDescriptor=function(e){return e.$descriptor};jo.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};jo.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};jo.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var zk=String.fromCharCode,hq=Object.prototype.hasOwnProperty,pq=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Yh={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Yh).forEach(function(e){Yh[e.toUpperCase()]=Yh[e]});function mq(e,t,n,r){return r?hq.call(Yh,r)?Yh[r]:"&"+r+";":zk(t||parseInt(n,16))}function Mc(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(pq,mq):e}var gq="http://www.w3.org/2001/XMLSchema-instance",vq="xsi",Gk="xsi:type",qk="non-whitespace outside of root node";function nd(e){return new Error(e)}function Hk(e){return"missing namespace for prefix <"+e+">"}function jg(e){return{get:e,enumerable:!0}}function yq(e){var t={},n;for(n in e)t[n]=e[n];return t}function sw(e){return e+"$uri"}function bq(e){var t={},n,r;for(n in e)r=e[n],t[r]=r,t[sw(r)]=n;return t}function Vk(){return{line:0,column:0}}function _q(e){throw e}function rL(e){if(!this)return new rL(e);var t=e&&e.proxy,n,r,i,o,a=_q,s,l,c,u,d=Vk,h=!1,f=!1,m=null,v=!1,b;function y(w){w instanceof Error||(w=nd(w)),m=w,a(w,d)}function x(w){s&&(w instanceof Error||(w=nd(w)),s(w,d))}this.on=function(w,R){if(typeof R!="function")throw nd("required args <name, cb>");switch(w){case"openTag":r=R;break;case"text":n=R;break;case"closeTag":i=R;break;case"error":a=R;break;case"warn":s=R;break;case"cdata":o=R;break;case"attention":u=R;break;case"question":c=R;break;case"comment":l=R;break;default:throw nd("unsupported event: "+w)}return this},this.ns=function(w){if(typeof w>"u"&&(w={}),typeof w!="object")throw nd("required args <nsMap={}>");var R={},I;for(I in w)R[I]=w[I];return R[gq]=vq,f=!0,b=R,this},this.parse=function(w){if(typeof w!="string")throw nd("required args <xml=string>");return m=null,_(w),d=Vk,v=!1,m},this.stop=function(){v=!0};function _(w){var R=f?[]:null,I=f?bq(b):null,q,T=[],D=0,M=!1,C=!1,j=0,z=0,Q,me,pe,ue,te,ae,ye,we,L,G="",K=0,ee;function O(){if(ee!==null)return ee;var k,V,J,se=f&&I.xmlns,ke=f&&h?[]:null,Ae=K,Ie=G,U=Ie.length,ge,Pe,oe,Z,de,he={},Ce={},De,Te,Ge;e:for(;Ae<U;Ae++)if(De=!1,Te=Ie.charCodeAt(Ae),!(Te===32||Te<14&&Te>8)){for((Te<65||Te>122||Te>90&&Te<97)&&Te!==95&&Te!==58&&(x("illegal first char attribute name"),De=!0),Ge=Ae+1;Ge<U;Ge++)if(Te=Ie.charCodeAt(Ge),!(Te>96&&Te<123||Te>64&&Te<91||Te>47&&Te<59||Te===46||Te===45||Te===95)){if(Te===32||Te<14&&Te>8){x("missing attribute value"),Ae=Ge;continue e}if(Te===61)break;x("illegal attribute name char"),De=!0}if(de=Ie.substring(Ae,Ge),de==="xmlns:xmlns"&&(x("illegal declaration of xmlns"),De=!0),Te=Ie.charCodeAt(Ge+1),Te===34)Ge=Ie.indexOf('"',Ae=Ge+2),Ge===-1&&(Ge=Ie.indexOf("'",Ae),Ge!==-1&&(x("attribute value quote missmatch"),De=!0));else if(Te===39)Ge=Ie.indexOf("'",Ae=Ge+2),Ge===-1&&(Ge=Ie.indexOf('"',Ae),Ge!==-1&&(x("attribute value quote missmatch"),De=!0));else for(x("missing attribute value quotes"),De=!0,Ge=Ge+1;Ge<U&&(Te=Ie.charCodeAt(Ge+1),!(Te===32||Te<14&&Te>8));Ge++);for(Ge===-1&&(x("missing closing quotes"),Ge=U,De=!0),De||(oe=Ie.substring(Ae,Ge)),Ae=Ge;Ge+1<U&&(Te=Ie.charCodeAt(Ge+1),!(Te===32||Te<14&&Te>8));Ge++)Ae===Ge&&(x("illegal character after attribute end"),De=!0);if(Ae=Ge+1,De)continue e;if(de in Ce){x("attribute <"+de+"> already defined");continue}if(Ce[de]=!0,!f){he[de]=oe;continue}if(h){if(Pe=de==="xmlns"?"xmlns":de.charCodeAt(0)===120&&de.substr(0,6)==="xmlns:"?de.substr(6):null,Pe!==null){if(k=Mc(oe),V=sw(Pe),Z=b[k],!Z){if(Pe==="xmlns"||V in I&&I[V]!==k)do Z="ns"+D++;while(typeof I[Z]<"u");else Z=Pe;b[k]=Z}I[Pe]!==Z&&(ge||(I=yq(I),ge=!0),I[Pe]=Z,Pe==="xmlns"&&(I[sw(Z)]=k,se=Z),I[V]=k),he[de]=oe;continue}ke.push(de,oe);continue}if(Te=de.indexOf(":"),Te===-1){he[de]=oe;continue}if(!(J=I[de.substring(0,Te)])){x(Hk(de.substring(0,Te)));continue}de=se===J?de.substr(Te+1):J+de.substr(Te),de===Gk&&(Te=oe.indexOf(":"),Te!==-1?(J=oe.substring(0,Te),J=I[J]||J,oe=J+oe.substring(Te)):oe=se+":"+oe),he[de]=oe}if(h)for(Ae=0,U=ke.length;Ae<U;Ae++){if(de=ke[Ae++],oe=ke[Ae],Te=de.indexOf(":"),Te!==-1){if(!(J=I[de.substring(0,Te)])){x(Hk(de.substring(0,Te)));continue}de=se===J?de.substr(Te+1):J+de.substr(Te),de===Gk&&(Te=oe.indexOf(":"),Te!==-1?(J=oe.substring(0,Te),J=I[J]||J,oe=J+oe.substring(Te)):oe=se+":"+oe)}he[de]=oe}return ee=he}function N(){for(var k=/(\r\n|\r|\n)/g,V=0,J=0,se=0,ke=z,Ae,Ie;j>=se&&(Ae=k.exec(w),!(!Ae||(ke=Ae[0].length+Ae.index,ke>j)));)V+=1,se=ke;return j==-1?(J=ke,Ie=w.substring(z)):z===0?Ie=w.substring(z,j):(J=j-se,Ie=z==-1?w.substring(j):w.substring(j,z+1)),{data:Ie,line:V,column:J}}for(d=N,t&&(L=Object.create({},{name:jg(function(){return ye}),originalName:jg(function(){return we}),attrs:jg(O),ns:jg(function(){return I})}));z!==-1;){if(w.charCodeAt(z)===60?j=z:j=w.indexOf("<",z),j===-1){if(T.length)return y("unexpected end of file");if(z===0)return y("missing start tag");z<w.length&&w.substring(z).trim()&&x(qk);return}if(z!==j){if(T.length){if(n&&(n(w.substring(z,j),Mc,d),v))return}else if(w.substring(z,j).trim()&&(x(qk),v))return}if(ue=w.charCodeAt(j+1),ue===33){if(pe=w.charCodeAt(j+2),pe===91&&w.substr(j+3,6)==="CDATA["){if(z=w.indexOf("]]>",j),z===-1)return y("unclosed cdata");if(o&&(o(w.substring(j+9,z),d),v))return;z+=3;continue}if(pe===45&&w.charCodeAt(j+3)===45){if(z=w.indexOf("-->",j),z===-1)return y("unclosed comment");if(l&&(l(w.substring(j+4,z),Mc,d),v))return;z+=3;continue}}if(ue===63){if(z=w.indexOf("?>",j),z===-1)return y("unclosed question");if(c&&(c(w.substring(j,z+2),d),v))return;z+=2;continue}for(Q=j+1;;Q++){if(te=w.charCodeAt(Q),isNaN(te))return z=-1,y("unclosed tag");if(te===34)pe=w.indexOf('"',Q+1),Q=pe!==-1?pe:Q;else if(te===39)pe=w.indexOf("'",Q+1),Q=pe!==-1?pe:Q;else if(te===62){z=Q;break}}if(ue===33){if(u&&(u(w.substring(j,z+1),Mc,d),v))return;z+=1;continue}if(ee={},ue===47){if(M=!1,C=!0,!T.length)return y("missing open tag");if(Q=ye=T.pop(),pe=j+2+Q.length,w.substring(j+2,pe)!==Q)return y("closing tag mismatch");for(;pe<z;pe++)if(ue=w.charCodeAt(pe),!(ue===32||ue>8&&ue<14))return y("close tag")}else{if(w.charCodeAt(z-1)===47?(Q=ye=w.substring(j+1,z-1),M=!0,C=!0):(Q=ye=w.substring(j+1,z),M=!0,C=!1),!(ue>96&&ue<123||ue>64&&ue<91||ue===95||ue===58))return y("illegal first char nodeName");for(pe=1,me=Q.length;pe<me;pe++)if(ue=Q.charCodeAt(pe),!(ue>96&&ue<123||ue>64&&ue<91||ue>47&&ue<59||ue===45||ue===95||ue==46)){if(ue===32||ue<14&&ue>8){ye=Q.substring(0,pe),ee=null;break}return y("invalid nodeName")}C||T.push(ye)}if(f){if(q=I,M&&(C||R.push(q),ee===null&&(h=Q.indexOf("xmlns",pe)!==-1)&&(K=pe,G=Q,O(),h=!1)),we=ye,ue=ye.indexOf(":"),ue!==-1){if(ae=I[ye.substring(0,ue)],!ae)return y("missing namespace on <"+we+">");ye=ye.substr(ue+1)}else ae=I.xmlns;ae&&(ye=ae+":"+ye)}if(M&&(K=pe,G=Q,r&&(t?r(L,Mc,C,d):r(ye,O,Mc,C,d),v)))return;if(C){if(i&&(i(t?L:ye,Mc,M,d),v))return;f&&(M?I=q:I=R.pop())}z+=1}}}function iL(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var wq={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Py="xsi:type";function oL(e){return e.xml&&e.xml.serialize}function aL(e){return oL(e)===Py}function xq(e){return oL(e)==="property"}function Eq(e){return e.charAt(0).toUpperCase()+e.slice(1)}function sL(e,t){return iL(t)?e.prefix+":"+Eq(e.localName):e.name}function Sq(e,t){var n=e.name,r=e.localName,i=t.xml&&t.xml.typePrefix;return i&&r.indexOf(i)===0?e.prefix+":"+r.slice(i.length):n}function Nq(e,t){var n=hi(e),r=t.getPackage(n.prefix);return Sq(n,r)}function ql(e){return new Error(e)}function As(e){return e.$descriptor}function Aq(e){be(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw ql("expected element");var n=this.elementsById,r=As(t),i=r.idProperty,o;if(i&&(o=t.get(i.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw ql("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Yp(){}Yp.prototype.handleEnd=function(){};Yp.prototype.handleText=function(){};Yp.prototype.handleNode=function(){};function t5(){}t5.prototype=Object.create(Yp.prototype);t5.prototype.handleNode=function(){return this};function gf(){}gf.prototype=Object.create(Yp.prototype);gf.prototype.handleText=function(e){this.body=(this.body||"")+e};function Jp(e,t){this.property=e,this.context=t}Jp.prototype=Object.create(gf.prototype);Jp.prototype.handleNode=function(e){if(this.element)throw ql("expected no sub nodes");return this.element=this.createReference(e),this};Jp.prototype.handleEnd=function(){this.element.id=this.body};Jp.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function n5(e,t){this.element=t,this.propertyDesc=e}n5.prototype=Object.create(gf.prototype);n5.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=e5(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function Ty(){}Ty.prototype=Object.create(gf.prototype);Ty.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function mi(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}mi.prototype=Object.create(Ty.prototype);mi.prototype.addReference=function(e){this.context.addReference(e)};mi.prototype.handleText=function(e){var t=this.element,n=As(t),r=n.bodyProperty;if(!r)throw ql("unexpected body text <"+e+">");gf.prototype.handleText.call(this,e)};mi.prototype.handleEnd=function(){var e=this.body,t=this.element,n=As(t),r=n.bodyProperty;r&&e!==void 0&&(e=e5(r.type,e),t.set(r.name,e))};mi.prototype.createElement=function(e){var t=e.attributes,n=this.type,r=As(n),i=this.context,o=new n({}),a=this.model,s;return le(t,function(l,c){var u=r.propertiesByName[c],d;u&&u.isReference?u.isMany?(d=l.split(" "),le(d,function(h){i.addReference({element:o,property:u.ns.name,id:h})})):i.addReference({element:o,property:u.ns.name,id:l}):(u?l=e5(u.type,l):c!=="xmlns"&&(s=hi(c,r.ns.prefix),a.getPackage(s.prefix)&&i.addWarning({message:"unknown attribute <"+c+">",element:o,property:c,value:l})),o.set(c,l))}),o};mi.prototype.getPropertyForNode=function(e){var t=e.name,n=hi(t),r=this.type,i=this.model,o=As(r),a=n.name,s=o.propertiesByName[a],l,c;if(s&&!s.isAttr)return aL(s)&&(l=e.attributes[Py],l)?(l=Nq(l,i),c=i.getType(l),be({},s,{effectiveType:As(c).name})):s;var u=i.getPackage(n.prefix);if(u){if(l=sL(n,u),c=i.getType(l),s=Vt(o.properties,function(d){return!d.isVirtual&&!d.isReference&&!d.isAttribute&&c.hasType(d.type)}),s)return be({},s,{effectiveType:As(c).name})}else if(s=Vt(o.properties,function(d){return!d.isReference&&!d.isAttribute&&d.type==="Element"}),s)return s;throw ql("unrecognized element <"+n.name+">")};mi.prototype.toString=function(){return"ElementDescriptor["+As(this.type).name+"]"};mi.prototype.valueHandler=function(e,t){return new n5(e,t)};mi.prototype.referenceHandler=function(e){return new Jp(e,this.context)};mi.prototype.handler=function(e){return e==="Element"?new Xd(this.model,e,this.context):new mi(this.model,e,this.context)};mi.prototype.handleChild=function(e){var t,n,r,i;if(t=this.getPropertyForNode(e),r=this.element,n=t.effectiveType||t.type,tL(n))return this.valueHandler(t,r);t.isReference?i=this.referenceHandler(t).handleNode(e):i=this.handler(n).handleNode(e);var o=i.element;return o!==void 0&&(t.isMany?r.get(t.name).push(o):r.set(t.name,o),t.isReference?(be(o,{element:r}),this.context.addReference(o)):o.$parent=r),i};function r5(e,t,n){mi.call(this,e,t,n)}r5.prototype=Object.create(mi.prototype);r5.prototype.createElement=function(e){var t=e.name,n=hi(t),r=this.model,i=this.type,o=r.getPackage(n.prefix),a=o&&sL(n,o)||t;if(!i.hasType(a))throw ql("unexpected element <"+e.originalName+">");return mi.prototype.createElement.call(this,e)};function Xd(e,t,n){this.model=e,this.context=n}Xd.prototype=Object.create(Ty.prototype);Xd.prototype.createElement=function(e){var t=e.name,n=hi(t),r=n.prefix,i=e.ns[r+"$uri"],o=e.attributes;return this.model.createAny(t,i,o)};Xd.prototype.handleChild=function(e){var t=new Xd(this.model,"Element",this.context).handleNode(e),n=this.element,r=t.element,i;return r!==void 0&&(i=n.$children=n.$children||[],i.push(r),r.$parent=n),t};Xd.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function i5(e){e instanceof jo&&(e={model:e}),be(this,{lax:!1},e)}i5.prototype.fromXML=function(e,t,n){var r=t.rootHandler;t instanceof mi?(r=t,t={}):typeof t=="string"?(r=this.handler(t),t={}):typeof r=="string"&&(r=this.handler(r));var i=this.model,o=this.lax,a=new Aq(be({},t,{rootHandler:r})),s=new rL({proxy:!0}),l=kq();r.context=a,l.push(r);function c(R,I,q){var T=I(),D=T.line,M=T.column,C=T.data;C.charAt(0)==="<"&&C.indexOf(" ")!==-1&&(C=C.slice(0,C.indexOf(" "))+">");var j="unparsable content "+(C?C+" ":"")+`detected
	line: `+D+`
	column: `+M+`
	nested error: `+R.message;if(q)return a.addWarning({message:j,error:R}),!0;throw ql(j)}function u(R,I){return c(R,I,!0)}function d(){var R=a.elementsById,I=a.references,q,T;for(q=0;T=I[q];q++){var D=T.element,M=R[T.id],C=As(D).propertiesByName[T.property];if(M||a.addWarning({message:"unresolved reference <"+T.id+">",element:T.element,property:T.property,value:T.id}),C.isMany){var j=D.get(C.name),z=j.indexOf(T);z===-1&&(z=j.length),M?j[z]=M:j.splice(z,1)}else D.set(C.name,M)}}function h(){l.pop().handleEnd()}var f=/^<\?xml /i,m=/ encoding="([^"]+)"/i,v=/^utf-8$/i;function b(R){if(f.test(R)){var I=m.exec(R),q=I&&I[1];!q||v.test(q)||a.addWarning({message:"unsupported document encoding <"+q+">, falling back to UTF-8"})}}function y(R,I){var q=l.peek();try{l.push(q.handleNode(R))}catch(T){c(T,I,o)&&l.push(new t5)}}function x(R,I){try{l.peek().handleText(R)}catch(q){u(q,I)}}function _(R,I){R.trim()&&x(R,I)}var w=i.getPackages().reduce(function(R,I){return R[I.uri]=I.prefix,R},{"http://www.w3.org/XML/1998/namespace":"xml"});return s.ns(w).on("openTag",function(R,I,q,T){var D=R.attrs||{},M=Object.keys(D).reduce(function(j,z){var Q=I(D[z]);return j[z]=Q,j},{}),C={name:R.name,originalName:R.originalName,attributes:M,ns:R.ns};y(C,T)}).on("question",b).on("closeTag",h).on("cdata",x).on("text",function(R,I,q){_(I(R),q)}).on("error",c).on("warn",u),new Promise(function(R,I){var q;try{s.parse(e),d()}catch(j){q=j}var T=r.element;!q&&!T&&(q=ql("failed to parse document as <"+r.type.$descriptor.name+">"));var D=a.warnings,M=a.references,C=a.elementsById;return q?(q.warnings=D,I(q)):R({rootElement:T,elementsById:C,references:M,warnings:D})})};i5.prototype.handler=function(e){return new r5(this.model,e)};function kq(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var Cq=`<?xml version="1.0" encoding="UTF-8"?>
`,Pq=/<|>|'|"|&|\n\r|\n/g,lL=/<|>|&/g;function Tq(e){var t={},n={},r={},i=[],o=[];this.byUri=function(a){return n[a]||e&&e.byUri(a)},this.add=function(a,s){n[a.uri]=a,s?i.push(a):o.push(a),this.mapPrefix(a.prefix,a.uri)},this.uriByPrefix=function(a){return t[a||"xmlns"]},this.mapPrefix=function(a,s){t[a||"xmlns"]=s},this.getNSKey=function(a){return a.prefix!==void 0?a.uri+"|"+a.prefix:a.uri},this.logUsed=function(a){var s=a.uri,l=this.getNSKey(a);r[l]=this.byUri(s),e&&e.logUsed(a)},this.getUsed=function(a){function s(u){var d=l.getNSKey(u);return r[d]}var l=this,c=[].concat(i,o);return c.filter(s)}}function Rq(e){return e.charAt(0).toLowerCase()+e.slice(1)}function Lq(e,t){return iL(t)?Rq(e):e}function cL(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function uL(e){return ji(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Oq(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function Mq(e,t){return t.isGeneric?be({localName:t.ns.localName},e):be({localName:Lq(t.ns.localName,t.$pkg)},e)}function Iq(e,t){return be({localName:t.ns.localName},e)}function Dq(e){var t=e.$descriptor;return Lt(t.properties,function(n){var r=n.name;if(n.isVirtual||!xi(e,r))return!1;var i=e[r];return i===n.default||i===null?!1:n.isMany?i.length:!0})}var jq={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Bq={"<":"lt",">":"gt","&":"amp"};function dL(e,t,n){return e=ji(e)?e:""+e,e.replace(t,function(r){return"&"+n[r]+";"})}function Fq(e){return dL(e,Pq,jq)}function $q(e){return dL(e,lL,Bq)}function Uq(e){return Lt(e,function(t){return t.isAttr})}function zq(e){return Lt(e,function(t){return!t.isAttr})}function o5(e){this.tagName=e}o5.prototype.build=function(e){return this.element=e,this};o5.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function mu(){}mu.prototype.serializeValue=mu.prototype.serializeTo=function(e){e.append(this.escape?$q(this.value):this.value)};mu.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(lL)!==-1&&(this.escape=!0),this};function a5(e){this.tagName=e}cL(a5,mu);a5.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function An(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}An.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,r,i,o=t.isGeneric;return o?r=this.parseGeneric(e):r=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o||(i=Dq(e),this.parseAttributes(Uq(i)),this.parseContainments(zq(i))),this.parseGenericAttributes(e,r),this};An.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Mq(t,e)};An.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Iq(t,e)};An.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};An.prototype.nsAttributeName=function(e){var t;if(ji(e)?t=hi(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:be({localName:t.localName},n)};An.prototype.parseGeneric=function(e){var t=this,n=this.body,r=[];return le(e,function(i,o){var a;o==="$body"?n.push(new mu().build({type:"String"},i)):o==="$children"?le(i,function(s){n.push(new An(t).build(s))}):o.indexOf("$")!==0&&(a=t.parseNsAttribute(e,o,i),a&&r.push({name:o,value:i}))}),r};An.prototype.parseNsAttribute=function(e,t,n){var r=e.$model,i=hi(t),o;if(i.prefix==="xmlns"&&(o={prefix:i.localName,uri:n}),!i.prefix&&i.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(o,!0,!0);else{var a=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(a)}};An.prototype.parseNsAttributes=function(e,t){var n=this,r=e.$attrs,i=[];return le(r,function(o,a){var s=n.parseNsAttribute(e,a,o);s&&i.push(s)}),i};An.prototype.parseGenericAttributes=function(e,t){var n=this;le(t,function(r){if(r.name!==Py)try{n.addAttribute(n.nsAttributeName(r.name),r.value)}catch(i){console.warn("missing namespace information for ",r.name,"=",r.value,"on",e,i)}})};An.prototype.parseContainments=function(e){var t=this,n=this.body,r=this.element;le(e,function(i){var o=r.get(i.name),a=i.isReference,s=i.isMany;if(s||(o=[o]),i.isBody)n.push(new mu().build(i,o[0]));else if(tL(i.type))le(o,function(u){n.push(new a5(t.addTagName(t.nsPropertyTagName(i))).build(i,u))});else if(a)le(o,function(u){n.push(new o5(t.addTagName(t.nsPropertyTagName(i))).build(u))});else{var l=aL(i),c=xq(i);le(o,function(u){var d;l?d=new Ry(t,i):c?d=new An(t,i):d=new An(t),n.push(d.build(u))})}})};An.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,r;return t||(r=n&&n.getNamespaces(),e||!r?this.namespaces=t=new Tq(r):t=r),t};An.prototype.logNamespace=function(e,t,n){var r=this.getNamespaces(n),i=e.uri,o=e.prefix,a=r.byUri(i);return(!a||n)&&r.add(e,t),r.mapPrefix(o,i),e};An.prototype.logNamespaceUsed=function(e,t){var n=this.element,r=n.$model,i=this.getNamespaces(t),o=e.prefix,a=e.uri,s,l,c;if(!o&&!a)return{localName:e.localName};if(c=wq[o]||r&&(r.getPackage(o)||{}).uri,a=a||c||i.uriByPrefix(o),!a)throw new Error("no namespace uri given for prefix <"+o+">");if(e=i.byUri(a),!e){for(s=o,l=1;i.uriByPrefix(s);)s=o+"_"+l++;e=this.logNamespace({prefix:s,uri:a},c===a)}return o&&i.mapPrefix(o,a),e};An.prototype.parseAttributes=function(e){var t=this,n=this.element;le(e,function(r){var i=n.get(r.name);if(r.isReference)if(!r.isMany)i=i.id;else{var o=[];le(i,function(a){o.push(a.id)}),i=o.join(" ")}t.addAttribute(t.nsAttributeName(r),i)})};An.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),uL(e)};An.prototype.addAttribute=function(e,t){var n=this.attrs;ji(t)&&(t=Fq(t));var r=_6(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),i={name:e,value:t};r!==-1?n.splice(r,1,i):n.push(i)};An.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=Oq(n).concat(t)),le(t,function(r){e.append(" ").append(uL(r.name)).append('="').append(r.value).append('"')})};An.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==mu;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),le(this.body,function(r){r.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function Ry(e,t){An.call(this,e,t)}cL(Ry,An);Ry.prototype.parseNsAttributes=function(e){var t=An.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var r=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var i=e.$model.getPackage(r.uri),o=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Py),(r.prefix?r.prefix+":":"")+o+n.ns.localName),t};Ry.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function Gq(){this.value="",this.write=function(e){this.value+=e}}function qq(e,t){var n=[""];this.append=function(r){return e.write(r),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Hq(e){e=be({format:!1,preamble:!0},e||{});function t(n,r){var i=r||new Gq,o=new qq(i,e.format);if(e.preamble&&o.append(Cq),new An().build(n).serializeTo(o),!r)return i.value}return{toXML:t}}function Ly(e,t){jo.call(this,e,t)}Ly.prototype=Object.create(jo.prototype);Ly.prototype.fromXML=function(e,t,n){ji(t)||(n=t,t="bpmn:Definitions");var r=new i5(be({model:this,lax:!0},n)),i=r.handler(t);return r.fromXML(e,i)};Ly.prototype.toXML=function(e,t){var n=new Hq(t);return new Promise(function(r,i){try{var o=n.toXML(e);return r({xml:o})}catch(a){return i(a)}})};var Vq="BPMN20",Wq="http://www.omg.org/spec/BPMN/20100524/MODEL",Kq="bpmn",Yq=[],Jq=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],Xq=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],Zq={tagAlias:"lowerCase",typePrefix:"t"},Qq={name:Vq,uri:Wq,prefix:Kq,associations:Yq,types:Jq,enumerations:Xq,xml:Zq},eH="BPMNDI",tH="http://www.omg.org/spec/BPMN/20100524/DI",nH="bpmndi",rH=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],iH=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],oH=[],aH={name:eH,uri:tH,prefix:nH,types:rH,enumerations:iH,associations:oH},sH="DC",lH="http://www.omg.org/spec/DD/20100524/DC",cH="dc",uH=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],dH=[],fH={name:sH,uri:lH,prefix:cH,types:uH,associations:dH},hH="DI",pH="http://www.omg.org/spec/DD/20100524/DI",mH="di",gH=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],vH=[],yH={tagAlias:"lowerCase"},bH={name:hH,uri:pH,prefix:mH,types:gH,associations:vH,xml:yH},_H="bpmn.io colors for BPMN",wH="http://bpmn.io/schema/bpmn/biocolor/1.0",xH="bioc",EH=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],SH=[],NH=[],AH={name:_H,uri:wH,prefix:xH,types:EH,enumerations:SH,associations:NH},kH="BPMN in Color",CH="http://www.omg.org/spec/BPMN/non-normative/color/1.0",PH="color",TH=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],RH=[],LH=[],OH={name:kH,uri:CH,prefix:PH,types:TH,enumerations:RH,associations:LH},MH={bpmn:Qq,bpmndi:aH,dc:fH,di:bH,bioc:AH,color:OH};function IH(e,t){var n=be({},MH,e);return new Ly(n,t)}function Yr(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var DH="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function fL(e){xi(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(DH)}})}function _i(e,t){return e.$instanceOf(t)}function jH(e){return Vt(e.rootElements,function(t){return _i(t,"bpmn:Process")||_i(t,"bpmn:Collaboration")})}function BH(e){var t={},n=[],r={};function i(L,G){return function(K){L(K,G)}}function o(L){t[L.id]=L}function a(L){return t[L.id]}function s(L,G){var K=L.gfx;if(K)throw new Error(`already rendered ${Yr(L)}`);return e.element(L,r[L.id],G)}function l(L,G){return e.root(L,r[L.id],G)}function c(L,G){try{var K=r[L.id]&&s(L,G);return o(L),K}catch(ee){u(ee.message,{element:L,error:ee}),console.error(`failed to import ${Yr(L)}`,ee)}}function u(L,G){e.error(L,G)}var d=this.registerDi=function(G){var K=G.bpmnElement;K?r[K.id]?u(`multiple DI elements defined for ${Yr(K)}`,{element:K}):(r[K.id]=G,fL(K)):u(`no bpmnElement referenced in ${Yr(G)}`,{element:G})};function h(L){f(L.plane)}function f(L){d(L),le(L.planeElement,m)}function m(L){d(L)}this.handleDefinitions=function(G,K){var ee=G.diagrams;if(K&&ee.indexOf(K)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!K&&ee&&ee.length&&(K=ee[0]),!K)throw new Error("no diagram to display");r={},h(K);var O=K.plane;if(!O)throw new Error(`no plane for ${Yr(K)}`);var N=O.bpmnElement;if(!N)if(N=jH(G),N)u(`correcting missing bpmnElement on ${Yr(O)} to ${Yr(N)}`),O.bpmnElement=N,d(O);else throw new Error("no process or collaboration to display");var k=l(N,O);if(_i(N,"bpmn:Process")||_i(N,"bpmn:SubProcess"))b(N,k);else if(_i(N,"bpmn:Collaboration"))ye(N,k),y(G.rootElements,k);else throw new Error(`unsupported bpmnElement for ${Yr(O)}: ${Yr(N)}`);v(n)};var v=this.handleDeferred=function(){for(var G;n.length;)G=n.shift(),G()};function b(L,G){ue(L,G),D(L.ioSpecification,G),T(L.artifacts,G),o(L)}function y(L,G){var K=Lt(L,function(ee){return!a(ee)&&_i(ee,"bpmn:Process")&&ee.laneSets});K.forEach(i(b,G))}function x(L,G){c(L,G)}function _(L,G){le(L,i(x,G))}function w(L,G){c(L,G)}function R(L,G){c(L,G)}function I(L,G){c(L,G)}function q(L,G){c(L,G)}function T(L,G){le(L,function(K){_i(K,"bpmn:Association")?n.push(function(){q(K,G)}):q(K,G)})}function D(L,G){L&&(le(L.dataInputs,i(R,G)),le(L.dataOutputs,i(I,G)))}var M=this.handleSubProcess=function(G,K){ue(G,K),T(G.artifacts,K)};function C(L,G){var K=c(L,G);_i(L,"bpmn:SubProcess")&&M(L,K||G),_i(L,"bpmn:Activity")&&D(L.ioSpecification,G),n.push(function(){le(L.dataInputAssociations,i(w,G)),le(L.dataOutputAssociations,i(w,G))})}function j(L,G){c(L,G)}function z(L,G){c(L,G)}function Q(L,G){n.push(function(){var K=c(L,G);L.childLaneSet&&me(L.childLaneSet,K||G),we(L)})}function me(L,G){le(L.lanes,i(Q,G))}function pe(L,G){le(L,i(me,G))}function ue(L,G){te(L.flowElements,G),L.laneSets&&pe(L.laneSets,G)}function te(L,G){le(L,function(K){_i(K,"bpmn:SequenceFlow")?n.push(function(){j(K,G)}):_i(K,"bpmn:BoundaryEvent")?n.unshift(function(){C(K,G)}):_i(K,"bpmn:FlowNode")?C(K,G):_i(K,"bpmn:DataObject")||(_i(K,"bpmn:DataStoreReference")||_i(K,"bpmn:DataObjectReference")?z(K,G):u(`unrecognized flowElement ${Yr(K)} in context ${Yr(G&&G.businessObject)}`,{element:K,context:G}))})}function ae(L,G){var K=c(L,G),ee=L.processRef;ee&&b(ee,K||G)}function ye(L,G){le(L.participants,i(ae,G)),T(L.artifacts,G),n.push(function(){_(L.messageFlows,G)})}function we(L){le(L.flowNodeRef,function(G){var K=G.get("lanes");K&&K.push(L)})}}function B(e,t){var n=Ue(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Pt(e,t){return Yl(t,function(n){return B(e,n)})}function Ue(e){return e&&e.businessObject||e}function zt(e){return e&&e.di}function FH(e,t,n){var r,i,o,a,s=[];function l(c,u){var d={root:function(v,b){return r.add(v,b)},element:function(v,b,y){return r.add(v,b,y)},error:function(v,b){s.push({message:v,context:b})}},h=new BH(d);u=u||c.diagrams&&c.diagrams[0];var f=$H(c,u);if(!f)throw new Error("no diagram to display");le(f,function(v){h.handleDefinitions(c,v)});var m=u.plane.bpmnElement.id;o.setRootElement(o.findRoot(m+"_plane")||o.findRoot(m))}return new Promise(function(c,u){try{return r=e.get("bpmnImporter"),i=e.get("eventBus"),o=e.get("canvas"),i.fire("import.render.start",{definitions:t}),l(t,n),i.fire("import.render.complete",{error:a,warnings:s}),c({warnings:s})}catch(d){return d.warnings=s,u(d)}})}function $H(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,r=n;!B(n,"bpmn:Process")&&!B(n,"bpmn:Collaboration")&&(r=UH(n));var i;B(r,"bpmn:Collaboration")?i=r:i=Vt(e.rootElements,function(c){if(B(c,"bpmn:Collaboration"))return Vt(c.participants,function(u){return u.processRef===r})});var o=[r];i&&(o=Zr(i.participants,function(c){return c.processRef}),o.push(i));var a=hL(o),s=[t],l=[n];return le(e.diagrams,function(c){if(c.plane){var u=c.plane.bpmnElement;a.indexOf(u)!==-1&&l.indexOf(u)===-1&&(s.push(c),l.push(u))}}),s}}function hL(e){var t=[];return le(e,function(n){n&&(t.push(n),t=t.concat(hL(n.flowElements)))}),t}function UH(e){for(var t=e;t;){if(B(t,"bpmn:Process"))return t;t=t.$parent}}var zH='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',pL=zH,mL={verticalAlign:"middle"},gL={color:"#404040"},GH={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},qH={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},HH={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},VH='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+pL+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Oa;function WH(){Oa=_n(VH),Jr(Oa,GH),Jr(rn("svg",Oa),mL),Jr(rn(".backdrop",Oa),qH),Jr(rn(".notice",Oa),HH),Jr(rn(".link",Oa),gL,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function KH(){Oa||(WH(),Oi.bind(Oa,".backdrop","click",function(e){document.body.removeChild(Oa)})),document.body.appendChild(Oa)}function kn(e){e=be({},JH,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),ZH(this._container),this._init(this._container,this._moddle,e)}We(kn,Zl);kn.prototype.importXML=async function(t,n){const r=this;function i(a){return r.get("eventBus").createEvent(a)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let a;try{a=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(h){throw this._emit("import.parse.complete",{error:h}),h}let s=a.rootElement;const l=a.references,c=a.warnings,u=a.elementsById;o=o.concat(c),s=this._emit("import.parse.complete",i({error:null,definitions:s,elementsById:u,references:l,warnings:o}))||s;const d=await this.importDefinitions(s,n);return o=o.concat(d.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(a){let s=a;throw o=o.concat(s.warnings||[]),O0(s,o),s=YH(s),this._emit("import.done",{error:s,warnings:s.warnings}),s}};kn.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};kn.prototype.open=async function(t){const n=this._definitions;let r=t;if(!n){const o=new Error("no XML imported");throw O0(o,[]),o}if(typeof t=="string"&&(r=XH(n,t),!r)){const o=new Error("BPMNDiagram <"+t+"> not found");throw O0(o,[]),o}try{this.clear()}catch(o){throw O0(o,[]),o}const{warnings:i}=await FH(this,n,r);return{warnings:i}};kn.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,r,i;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,i=(await this._moddle.toXML(n,t)).xml,i=this._emit("saveXML.serialized",{xml:i})||i}catch(a){r=a}const o=r?{error:r}:{xml:i};if(this._emit("saveXML.done",o),r)throw r;return o};kn.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const r=this.get("canvas"),i=r.getActiveLayer(),o=rn(":scope > defs",r._svg),a=kk(i),s=o?"<defs>"+kk(o)+"</defs>":"",l=i.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+l.width+'" height="'+l.height+'" viewBox="'+l.x+" "+l.y+" "+l.width+" "+l.height+'" version="1.1">'+s+a+"</svg>"}catch(r){n=r}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};kn.prototype._setDefinitions=function(e){this._definitions=e};kn.prototype.getModules=function(){return this._modules};kn.prototype.clear=function(){this.getDefinitions()&&Zl.prototype.clear.call(this)};kn.prototype.destroy=function(){Zl.prototype.destroy.call(this),pu(this._container)};kn.prototype.on=function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)};kn.prototype.off=function(e,t){this.get("eventBus").off(e,t)};kn.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=rn(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};kn.prototype.getDefinitions=function(){return this._definitions};kn.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};kn.prototype._init=function(e,t,n){const r=n.modules||this.getModules(n),i=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],a=[].concat(o,r,i),s=be(Io(n,["additionalModules"]),{canvas:be({},n.canvas,{container:e}),modules:a});Zl.call(this,s),n&&n.container&&this.attachTo(n.container)};kn.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};kn.prototype._createContainer=function(e){const t=_n('<div class="bjs-container"></div>');return Jr(t,{width:Wk(e.width),height:Wk(e.height),position:e.position}),t};kn.prototype._createModdle=function(e){const t=be({},this._moddleExtensions,e.moddleExtensions);return new IH(t)};kn.prototype._modules=[];function O0(e,t){return e.warnings=t,e}function YH(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const JH={width:"100%",height:"100%",position:"relative"};function Wk(e){return e+(ft(e)?"px":"")}function XH(e,t){return t&&Vt(e.diagrams,function(n){return n.id===t})||null}function ZH(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+pL+"</a>",r=_n(n);Jr(rn("svg",r),mL),Jr(r,gL,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(r),Ht.bind(r,"click",function(i){KH(),i.preventDefault()})}function Xp(e){kn.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}We(Xp,kn);Xp.prototype._createModdle=function(e){var t=kn.prototype._createModdle.call(this,e);return t.ids=new $a([32,36,1]),t};Xp.prototype._collectIds=function(e,t){var n=e.$model,r=n.ids,i;r.clear();for(i in t)r.claim(i,t[i])};function Dt(e,t){return B(e,"bpmn:CallActivity")?!1:B(e,"bpmn:SubProcess")?(t=t||zt(e),t&&B(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):B(e,"bpmn:Participant")?!!Ue(e).processRef:!0}function br(e){if(!(!B(e,"bpmn:Participant")&&!B(e,"bpmn:Lane"))){var t=zt(e).isHorizontal;return t===void 0?!0:t}}function QH(e){return e&&Ue(e).isInterrupting!==!1}function Qr(e){return e&&!!Ue(e).triggeredByEvent}function vf(e,t){var n=Ue(e).eventDefinitions;return Yl(n,function(r){return B(r,t)})}function eV(e){return vf(e,"bpmn:ErrorEventDefinition")}function tV(e){return vf(e,"bpmn:EscalationEventDefinition")}function nV(e){return vf(e,"bpmn:CompensateEventDefinition")}var Pp={width:90,height:20},Kk=15;function gu(e){return B(e,"bpmn:Event")||B(e,"bpmn:Gateway")||B(e,"bpmn:DataStoreReference")||B(e,"bpmn:DataObjectReference")||B(e,"bpmn:DataInput")||B(e,"bpmn:DataOutput")||B(e,"bpmn:SequenceFlow")||B(e,"bpmn:MessageFlow")||B(e,"bpmn:Group")}function Oy(e){return Gt(e.label)}function rV(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)],i=iV(e),o=Math.atan((r.y-n.y)/(r.x-n.x)),a=i.x,s=i.y;return Math.abs(o)<Math.PI/2?s-=Kk:a+=Kk,{x:a,y:s}}function iV(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)];return{x:n.x+(r.x-n.x)/2,y:n.y+(r.y-n.y)/2}}function s5(e){return e.waypoints?rV(e.waypoints):B(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+Pp.height/2}:{x:e.x+e.width/2,y:e.y+e.height+Pp.height/2}}function oV(e,t){var n,r,i,o=e.label;return o&&o.bounds?(i=o.bounds,r={width:Math.max(Pp.width,i.width),height:i.height},n={x:i.x+i.width/2,y:i.y+i.height/2}):(n=s5(t),r=Pp),be({x:n.x-r.width/2,y:n.y-r.height/2},r)}function vL(e){if(B(e,"bpmn:FlowElement")||B(e,"bpmn:Participant")||B(e,"bpmn:Lane")||B(e,"bpmn:SequenceFlow")||B(e,"bpmn:MessageFlow")||B(e,"bpmn:DataInput")||B(e,"bpmn:DataOutput"))return"name";if(B(e,"bpmn:TextAnnotation"))return"text";if(B(e,"bpmn:Group"))return"categoryValueRef"}function aV(e){var t=e.categoryValueRef;return t&&t.value||""}function io(e){var t=e.businessObject,n=vL(t);if(n)return n==="categoryValueRef"?aV(t):t[n]||""}function sV(e,t){var n=e.businessObject,r=vL(n);return r&&(r==="categoryValueRef"?n.categoryValueRef.value=t:n[r]=t),e}var lw="hsl(225, 10%, 15%)",lV="white";function Ca(e,t){return Yl(e.eventDefinitions,function(n){return n.$type===t})}function cV(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function uV(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function Tt(e,t,n){var r=zt(e);return n||r.get("color:background-color")||r.get("bioc:fill")||t||lV}function Ve(e,t,n){var r=zt(e);return n||r.get("color:border-color")||r.get("bioc:stroke")||t||lw}function gh(e,t,n,r){var i=zt(e),o=i.get("label");return r||o&&o.get("color:color")||t||Ve(e,n)}function dV(e){var t=e.x+e.width/2,n=e.y+e.height/2,r=e.width/2,i=[["M",t,n],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]];return Eu(i)}function fV(e,t){var n=e.x,r=e.y,i=e.width,o=e.height,a=[["M",n+t,r],["l",i-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-i,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-o],["a",t,t,0,0,1,t,-t],["z"]];return Eu(a)}function hV(e){var t=e.width,n=e.height,r=e.x,i=e.y,o=t/2,a=n/2,s=[["M",r+o,i],["l",o,a],["l",-o,a],["l",-o,-a],["z"]];return Eu(s)}function pV(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=[["M",t,n],["l",r,0],["l",0,i],["l",-r,0],["z"]];return Eu(o)}function vh(e,t={}){return{width:So(e,t),height:Ti(e,t)}}function So(e,t={}){return xi(t,"width")?t.width:e.width}function Ti(e,t={}){return xi(t,"height")?t.height:e.height}var mV=new $a,gV=10,Bg=3,vV=1.5,M0=10,rd=.95,yV=1,bV=.25;function Au(e,t,n,r,i,o,a){Ds.call(this,t,a);var s=e&&e.defaultFillColor,l=e&&e.defaultStrokeColor,c=e&&e.defaultLabelColor;function u(O){return n.computeStyle(O,{strokeLinecap:"round",strokeLinejoin:"round",stroke:lw,strokeWidth:2,fill:"white"})}function d(O){return n.computeStyle(O,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:lw,strokeWidth:2})}function h(O,N){var{ref:k={x:0,y:0},scale:V=1,element:J,parentGfx:se=i._svg}=N,ke=Qe("marker",{id:O,viewBox:"0 0 20 20",refX:k.x,refY:k.y,markerWidth:20*V,markerHeight:20*V,orient:"auto"});pt(ke,J);var Ae=rn(":scope > defs",se);Ae||(Ae=Qe("defs"),pt(se,Ae)),pt(Ae,ke)}function f(O,N,k,V){var J=mV.nextPrefixed("marker-");return m(O,J,N,k,V),"url(#"+J+")"}function m(O,N,k,V,J){if(k==="sequenceflow-end"){var se=Qe("path",{d:"M 1 5 L 11 10 L 1 15 Z",...u({fill:J,stroke:J,strokeWidth:1})});h(N,{element:se,ref:{x:11,y:10},scale:.5,parentGfx:O})}if(k==="messageflow-start"){var ke=Qe("circle",{cx:6,cy:6,r:3.5,...u({fill:V,stroke:J,strokeWidth:1,strokeDasharray:[1e4,1]})});h(N,{element:ke,ref:{x:6,y:6},parentGfx:O})}if(k==="messageflow-end"){var Ae=Qe("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...u({fill:V,stroke:J,strokeWidth:1,strokeDasharray:[1e4,1]})});h(N,{element:Ae,ref:{x:8.5,y:5},parentGfx:O})}if(k==="association-start"){var Ie=Qe("path",{d:"M 11 5 L 1 10 L 11 15",...d({fill:"none",stroke:J,strokeWidth:1.5,strokeDasharray:[1e4,1]})});h(N,{element:Ie,ref:{x:1,y:10},scale:.5,parentGfx:O})}if(k==="association-end"){var U=Qe("path",{d:"M 1 5 L 11 10 L 1 15",...d({fill:"none",stroke:J,strokeWidth:1.5,strokeDasharray:[1e4,1]})});h(N,{element:U,ref:{x:11,y:10},scale:.5,parentGfx:O})}if(k==="conditional-flow-marker"){var ge=Qe("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...u({fill:V,stroke:J})});h(N,{element:ge,ref:{x:-1,y:10},scale:.5,parentGfx:O})}if(k==="conditional-default-flow-marker"){var Pe=Qe("path",{d:"M 6 4 L 10 16",...u({stroke:J,fill:"none"})});h(N,{element:Pe,ref:{x:0,y:10},scale:.5,parentGfx:O})}}function v(O,N,k,V,J={}){Tr(V)&&(J=V,V=0),V=V||0,J=u(J);var se=N/2,ke=k/2,Ae=Qe("circle",{cx:se,cy:ke,r:Math.round((N+k)/4-V),...J});return pt(O,Ae),Ae}function b(O,N,k,V,J,se){Tr(J)&&(se=J,J=0),J=J||0,se=u(se);var ke=Qe("rect",{x:J,y:J,width:N-J*2,height:k-J*2,rx:V,ry:V,...se});return pt(O,ke),ke}function y(O,N,k,V){var J=N/2,se=k/2,ke=[{x:J,y:0},{x:N,y:se},{x:J,y:k},{x:0,y:se}],Ae=ke.map(function(U){return U.x+","+U.y}).join(" ");V=u(V);var Ie=Qe("polygon",{...V,points:Ae});return pt(O,Ie),Ie}function x(O,N,k,V){k=d(k);var J=Ay(N,k,V);return pt(O,J),J}function _(O,N,k){return x(O,N,k,5)}function w(O,N,k){k=d(k);var V=Qe("path",{...k,d:N});return pt(O,V),V}function R(O,N,k,V){return w(N,k,be({"data-marker":O},V))}function I(O){return ee[O]}function q(O){return function(N,k,V){return I(O)(N,k,V)}}var T={"bpmn:MessageEventDefinition":function(O,N,k={},V){var J=r.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:N.width,containerHeight:N.height,position:{mx:.235,my:.315}}),se=V?Ve(N,l,k.stroke):Tt(N,s,k.fill),ke=V?Tt(N,s,k.fill):Ve(N,l,k.stroke),Ae=w(O,J,{fill:se,stroke:ke,strokeWidth:1});return Ae},"bpmn:TimerEventDefinition":function(O,N,k={}){var V=v(O,N.width,N.height,.2*N.height,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:2}),J=r.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.5}});w(O,J,{stroke:Ve(N,l,k.stroke),strokeWidth:2});for(var se=0;se<12;se++){var ke=r.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.5}}),Ae=N.width/2,Ie=N.height/2;w(O,ke,{strokeWidth:1,stroke:Ve(N,l,k.stroke),transform:"rotate("+se*30+","+Ie+","+Ae+")"})}return V},"bpmn:EscalationEventDefinition":function(O,N,k={},V){var J=r.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.2}}),se=V?Ve(N,l,k.stroke):Tt(N,s,k.fill);return w(O,J,{fill:se,stroke:Ve(N,l,k.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(O,N,k={}){var V=r.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.222}});return w(O,V,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(O,N,k={},V){var J=r.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.57,my:.263}}),se=V?Ve(N,l,k.stroke):Tt(N,s,k.fill);return w(O,J,{fill:se,stroke:Ve(N,l,k.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(O,N,k={},V){var J=r.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:N.width,containerHeight:N.height,position:{mx:.2,my:.722}}),se=V?Ve(N,l,k.stroke):Tt(N,s,k.fill);return w(O,J,{fill:se,stroke:Ve(N,l,k.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(O,N,k={},V){var J=r.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.638,my:-.055}}),se=V?Ve(N,l,k.stroke):"none",ke=w(O,J,{fill:se,stroke:Ve(N,l,k.stroke),strokeWidth:1});return X6(ke,45),ke},"bpmn:CompensateEventDefinition":function(O,N,k={},V){var J=r.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.22,my:.5}}),se=V?Ve(N,l,k.stroke):Tt(N,s,k.fill);return w(O,J,{fill:se,stroke:Ve(N,l,k.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(O,N,k={},V){var J=r.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.2}}),se=V?Ve(N,l,k.stroke):Tt(N,s,k.fill);return w(O,J,{strokeWidth:1,fill:se,stroke:Ve(N,l,k.stroke)})},"bpmn:MultipleEventDefinition":function(O,N,k={},V){var J=r.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:N.width,containerHeight:N.height,position:{mx:.222,my:.36}}),se=V?Ve(N,l,k.stroke):Tt(N,s,k.fill);return w(O,J,{fill:se,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(O,N,k={}){var V=r.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:N.width,containerHeight:N.height,position:{mx:.458,my:.194}});return w(O,V,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(O,N,k={}){var V=v(O,N.width,N.height,8,{fill:Ve(N,l,k.stroke),stroke:Ve(N,l,k.stroke),strokeWidth:4});return V}};function D(O,N,k={}){var V=Ue(O),J=cV(V);return V.get("eventDefinitions")&&V.get("eventDefinitions").length>1?V.get("parallelMultiple")?T["bpmn:ParallelMultipleEventDefinition"](N,O,k,J):T["bpmn:MultipleEventDefinition"](N,O,k,J):Ca(V,"bpmn:MessageEventDefinition")?T["bpmn:MessageEventDefinition"](N,O,k,J):Ca(V,"bpmn:TimerEventDefinition")?T["bpmn:TimerEventDefinition"](N,O,k,J):Ca(V,"bpmn:ConditionalEventDefinition")?T["bpmn:ConditionalEventDefinition"](N,O,k,J):Ca(V,"bpmn:SignalEventDefinition")?T["bpmn:SignalEventDefinition"](N,O,k,J):Ca(V,"bpmn:EscalationEventDefinition")?T["bpmn:EscalationEventDefinition"](N,O,k,J):Ca(V,"bpmn:LinkEventDefinition")?T["bpmn:LinkEventDefinition"](N,O,k,J):Ca(V,"bpmn:ErrorEventDefinition")?T["bpmn:ErrorEventDefinition"](N,O,k,J):Ca(V,"bpmn:CancelEventDefinition")?T["bpmn:CancelEventDefinition"](N,O,k,J):Ca(V,"bpmn:CompensateEventDefinition")?T["bpmn:CompensateEventDefinition"](N,O,k,J):Ca(V,"bpmn:TerminateEventDefinition")?T["bpmn:TerminateEventDefinition"](N,O,k,J):null}var M={ParticipantMultiplicityMarker:function(O,N,k={}){var V=So(N,k),J=Ti(N,k),se=r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:J,position:{mx:(V/2-6)/V,my:(J-15)/J}});R("participant-multiplicity",O,se,{strokeWidth:2,fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke)})},SubProcessMarker:function(O,N,k={}){var V=b(O,14,14,0,{strokeWidth:1,fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke)});Dr(V,N.width/2-7.5,N.height-20);var J=r.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2-7.5)/N.width,my:(N.height-20)/N.height}});R("sub-process",O,J,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke)})},ParallelMarker:function(O,N,k){var V=So(N,k),J=Ti(N,k),se=r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:J,position:{mx:(V/2+k.parallel)/V,my:(J-20)/J}});R("parallel",O,se,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke)})},SequentialMarker:function(O,N,k){var V=r.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2+k.seq)/N.width,my:(N.height-19)/N.height}});R("sequential",O,V,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke)})},CompensationMarker:function(O,N,k){var V=r.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2+k.compensation)/N.width,my:(N.height-13)/N.height}});R("compensation",O,V,{strokeWidth:1,fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke)})},LoopMarker:function(O,N,k){var V=So(N,k),J=Ti(N,k),se=r.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:J,position:{mx:(V/2+k.loop)/V,my:(J-7)/J}});R("loop",O,se,{strokeWidth:1.5,fill:"none",stroke:Ve(N,l,k.stroke),strokeMiterlimit:.5})},AdhocMarker:function(O,N,k){var V=So(N,k),J=Ti(N,k),se=r.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:J,position:{mx:(V/2+k.adhoc)/V,my:(J-15)/J}});R("adhoc",O,se,{strokeWidth:1,fill:Ve(N,l,k.stroke),stroke:Ve(N,l,k.stroke)})}};function C(O,N,k,V){M[O](N,k,V)}function j(O,N,k,V={}){V={fill:V.fill,stroke:V.stroke,width:So(N,V),height:Ti(N,V)};var J=Ue(N),se=k&&k.includes("SubProcessMarker");se?V={...V,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:V={...V,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},le(k,function(Ie){C(Ie,O,N,V)}),J.get("isForCompensation")&&C("CompensationMarker",O,N,V),B(J,"bpmn:AdHocSubProcess")&&C("AdhocMarker",O,N,V);var ke=J.get("loopCharacteristics"),Ae=ke&&ke.get("isSequential");ke&&(Ae===void 0&&C("LoopMarker",O,N,V),Ae===!1&&C("ParallelMarker",O,N,V),Ae===!0&&C("SequentialMarker",O,N,V))}function z(O,N,k={}){k=be({size:{width:100}},k);var V=o.createText(N||"",k);return Ut(V).add("djs-label"),pt(O,V),V}function Q(O,N,k,V={}){var J=Ue(N),se=vh({x:N.x,y:N.y,width:N.width,height:N.height},V);return z(O,J.name,{align:k,box:se,padding:7,style:{fill:gh(N,c,l,V.stroke)}})}function me(O,N,k={}){var V={width:90,height:30,x:N.width/2+N.x,y:N.height/2+N.y};return z(O,io(N),{box:V,fitBox:!0,style:be({},o.getExternalStyle(),{fill:gh(N,c,l,k.stroke)})})}function pe(O,N,k,V={}){var J=br(k),se=z(O,N,{box:{height:30,width:J?Ti(k,V):So(k,V)},align:"center-middle",style:{fill:gh(k,c,l,V.stroke)}});if(J){var ke=-1*Ti(k,V);L0(se,0,-ke,270)}}function ue(O,N,k={}){var{width:V,height:J}=vh(N,k);return b(O,V,J,M0,{...k,fill:Tt(N,s,k.fill),fillOpacity:rd,stroke:Ve(N,l,k.stroke)})}function te(O,N,k={}){var V=Ue(N),J=Tt(N,s,k.fill),se=Ve(N,l,k.stroke);return(V.get("associationDirection")==="One"||V.get("associationDirection")==="Both")&&(k.markerEnd=f(O,"association-end",J,se)),V.get("associationDirection")==="Both"&&(k.markerStart=f(O,"association-start",J,se)),k=$t(k,["markerStart","markerEnd"]),_(O,N.waypoints,{...k,stroke:se,strokeDasharray:"0, 5"})}function ae(O,N,k={}){var V=Tt(N,s,k.fill),J=Ve(N,l,k.stroke),se=r.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.474,my:.296}}),ke=w(O,se,{fill:V,fillOpacity:rd,stroke:J}),Ae=Ue(N);if(uV(Ae)){var Ie=r.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.33,my:(N.height-18)/N.height}});w(O,Ie,{strokeWidth:2,fill:V,stroke:J})}return ke}function ye(O,N,k={}){return v(O,N.width,N.height,{fillOpacity:rd,...k,fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke)})}function we(O,N,k={}){return y(O,N.width,N.height,{fill:Tt(N,s,k.fill),fillOpacity:rd,stroke:Ve(N,l,k.stroke)})}function L(O,N,k={}){var V=b(O,So(N,k),Ti(N,k),0,{fill:Tt(N,s,k.fill),fillOpacity:k.fillOpacity||rd,stroke:Ve(N,l,k.stroke),strokeWidth:1.5}),J=Ue(N);if(B(J,"bpmn:Lane")){var se=J.get("name");pe(O,se,N,k)}return V}function G(O,N,k={}){var V=ue(O,N,k);Qr(N)&&He(V,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var J=Dt(N);return Q(O,N,J?"center-top":"center-middle",k),J?j(O,N,void 0,k):j(O,N,["SubProcessMarker"],k),V}function K(O,N,k={}){var V=ue(O,N,k);return Q(O,N,"center-middle",k),j(O,N,void 0,k),V}var ee=this.handlers={"bpmn:AdHocSubProcess":function(O,N,k={}){return Dt(N)?k=$t(k,["fill","stroke","width","height"]):k=$t(k,["fill","stroke"]),G(O,N,k)},"bpmn:Association":function(O,N,k={}){return k=$t(k,["fill","stroke"]),te(O,N,k)},"bpmn:BoundaryEvent":function(O,N,k={}){var{renderIcon:V=!0}=k;k=$t(k,["fill","stroke"]);var J=Ue(N),se=J.get("cancelActivity");k={strokeWidth:1.5,fill:Tt(N,s,k.fill),fillOpacity:yV,stroke:Ve(N,l,k.stroke)},se||(k.strokeDasharray="6");var ke=ye(O,N,k);return v(O,N.width,N.height,Bg,{...k,fill:"none"}),V&&D(N,O,k),ke},"bpmn:BusinessRuleTask":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=K(O,N,k),J=r.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),se=w(O,J);He(se,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:1});var ke=r.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),Ae=w(O,ke);return He(Ae,{fill:Ve(N,l,k.stroke),stroke:Ve(N,l,k.stroke),strokeWidth:1}),V},"bpmn:CallActivity":function(O,N,k={}){return k=$t(k,["fill","stroke"]),G(O,N,{strokeWidth:5,...k})},"bpmn:ComplexGateway":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=we(O,N,k),J=r.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:N.width,containerHeight:N.height,position:{mx:.46,my:.26}});return w(O,J,{fill:Ve(N,l,k.stroke),stroke:Ve(N,l,k.stroke),strokeWidth:1}),V},"bpmn:DataInput":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=r.getRawPath("DATA_ARROW"),J=ae(O,N,k);return w(O,V,{fill:"none",stroke:Ve(N,l,k.stroke),strokeWidth:1}),J},"bpmn:DataInputAssociation":function(O,N,k={}){return k=$t(k,["fill","stroke"]),te(O,N,{...k,markerEnd:f(O,"association-end",Tt(N,s,k.fill),Ve(N,l,k.stroke))})},"bpmn:DataObject":function(O,N,k={}){return k=$t(k,["fill","stroke"]),ae(O,N,k)},"bpmn:DataObjectReference":q("bpmn:DataObject"),"bpmn:DataOutput":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=r.getRawPath("DATA_ARROW"),J=ae(O,N,k);return w(O,V,{strokeWidth:1,fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke)}),J},"bpmn:DataOutputAssociation":function(O,N,k={}){return k=$t(k,["fill","stroke"]),te(O,N,{...k,markerEnd:f(O,"association-end",Tt(N,s,k.fill),Ve(N,l,k.stroke))})},"bpmn:DataStoreReference":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=r.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:0,my:.133}});return w(O,V,{fill:Tt(N,s,k.fill),fillOpacity:rd,stroke:Ve(N,l,k.stroke),strokeWidth:2})},"bpmn:EndEvent":function(O,N,k={}){var{renderIcon:V=!0}=k;k=$t(k,["fill","stroke"]);var J=ye(O,N,{...k,strokeWidth:4});return V&&D(N,O,k),J},"bpmn:EventBasedGateway":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=Ue(N),J=we(O,N,k);v(O,N.width,N.height,N.height*.2,{fill:Tt(N,"none",k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:1});var se=V.get("eventGatewayType"),ke=!!V.get("instantiate");function Ae(){var U=r.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:N.width,containerHeight:N.height,position:{mx:.36,my:.44}});w(O,U,{fill:"none",stroke:Ve(N,l,k.stroke),strokeWidth:2})}if(se==="Parallel"){var Ie=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:N.width,containerHeight:N.height,position:{mx:.474,my:.296}});w(O,Ie,{fill:"none",stroke:Ve(N,l,k.stroke),strokeWidth:1})}else se==="Exclusive"&&(ke||v(O,N.width,N.height,N.height*.26,{fill:"none",stroke:Ve(N,l,k.stroke),strokeWidth:1}),Ae());return J},"bpmn:ExclusiveGateway":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=we(O,N,k),J=r.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:N.width,containerHeight:N.height,position:{mx:.32,my:.3}}),se=zt(N);return se.get("isMarkerVisible")&&w(O,J,{fill:Ve(N,l,k.stroke),stroke:Ve(N,l,k.stroke),strokeWidth:1}),V},"bpmn:Gateway":function(O,N,k={}){return k=$t(k,["fill","stroke"]),we(O,N,k)},"bpmn:Group":function(O,N,k={}){return k=$t(k,["fill","stroke","width","height"]),b(O,N.width,N.height,M0,{stroke:Ve(N,l,k.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:So(N,k),height:Ti(N,k)})},"bpmn:InclusiveGateway":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=we(O,N,k);return v(O,N.width,N.height,N.height*.24,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:2.5}),V},"bpmn:IntermediateEvent":function(O,N,k={}){var{renderIcon:V=!0}=k;k=$t(k,["fill","stroke"]);var J=ye(O,N,{...k,strokeWidth:1.5});return v(O,N.width,N.height,Bg,{fill:"none",stroke:Ve(N,l,k.stroke),strokeWidth:1.5}),V&&D(N,O,k),J},"bpmn:IntermediateCatchEvent":q("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":q("bpmn:IntermediateEvent"),"bpmn:Lane":function(O,N,k={}){return k=$t(k,["fill","stroke","width","height"]),L(O,N,{...k,fillOpacity:bV})},"bpmn:ManualTask":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=K(O,N,k),J=r.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return w(O,J,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:.5}),V},"bpmn:MessageFlow":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=Ue(N),J=zt(N),se=Tt(N,s,k.fill),ke=Ve(N,l,k.stroke),Ae=_(O,N.waypoints,{markerEnd:f(O,"messageflow-end",se,ke),markerStart:f(O,"messageflow-start",se,ke),stroke:ke,strokeDasharray:"10, 11",strokeWidth:1.5});if(V.get("messageRef")){var Ie=Ae.getPointAtLength(Ae.getTotalLength()/2),U=r.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:Ie.x,y:Ie.y}}),ge={strokeWidth:1};J.get("messageVisibleKind")==="initiating"?(ge.fill=se,ge.stroke=ke):(ge.fill=ke,ge.stroke=se);var Pe=w(O,U,ge),oe=V.get("messageRef"),Z=oe.get("name"),de=z(O,Z,{align:"center-top",fitBox:!0,style:{fill:ke}}),he=Pe.getBBox(),Ce=de.getBBox(),De=Ie.x-Ce.width/2,Te=Ie.y+he.height/2+gV;L0(de,De,Te,0)}return Ae},"bpmn:ParallelGateway":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=we(O,N,k),J=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:N.width,containerHeight:N.height,position:{mx:.46,my:.2}});return w(O,J,{fill:Ve(N,l,k.stroke),stroke:Ve(N,l,k.stroke),strokeWidth:1}),V},"bpmn:Participant":function(O,N,k={}){k=$t(k,["fill","stroke","width","height"]);var V=L(O,N,k),J=Dt(N),se=br(N),ke=Ue(N),Ae=ke.get("name");if(J){var Ie=se?[{x:30,y:0},{x:30,y:Ti(N,k)}]:[{x:0,y:30},{x:So(N,k),y:30}];x(O,Ie,{stroke:Ve(N,l,k.stroke),strokeWidth:vV}),pe(O,Ae,N,k)}else{var U=vh(N,k);se||(U.height=So(N,k),U.width=Ti(N,k));var ge=z(O,Ae,{box:U,align:"center-middle",style:{fill:gh(N,c,l,k.stroke)}});if(!se){var Pe=-1*Ti(N,k);L0(ge,0,-Pe,270)}}return ke.get("participantMultiplicity")&&C("ParticipantMultiplicityMarker",O,N,k),V},"bpmn:ReceiveTask":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=Ue(N),J=K(O,N,k),se;return V.get("instantiate")?(v(O,28,28,20*.22,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:1}),se=r.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):se=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),w(O,se,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:1}),J},"bpmn:ScriptTask":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=K(O,N,k),J=r.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return w(O,J,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:1}),V},"bpmn:SendTask":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=K(O,N,k),J=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return w(O,J,{fill:Ve(N,l,k.stroke),stroke:Tt(N,s,k.fill),strokeWidth:1}),V},"bpmn:SequenceFlow":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=Tt(N,s,k.fill),J=Ve(N,l,k.stroke),se=_(O,N.waypoints,{markerEnd:f(O,"sequenceflow-end",V,J),stroke:J}),ke=Ue(N),{source:Ae}=N;if(Ae){var Ie=Ue(Ae);ke.get("conditionExpression")&&B(Ie,"bpmn:Activity")&&He(se,{markerStart:f(O,"conditional-flow-marker",V,J)}),Ie.get("default")&&(B(Ie,"bpmn:Gateway")||B(Ie,"bpmn:Activity"))&&Ie.get("default")===ke&&He(se,{markerStart:f(O,"conditional-default-flow-marker",V,J)})}return se},"bpmn:ServiceTask":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=K(O,N,k);v(O,10,10,{fill:Tt(N,s,k.fill),stroke:"none",transform:"translate(6, 6)"});var J=r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});w(O,J,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:1}),v(O,10,10,{fill:Tt(N,s,k.fill),stroke:"none",transform:"translate(11, 10)"});var se=r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return w(O,se,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:1}),V},"bpmn:StartEvent":function(O,N,k={}){var{renderIcon:V=!0}=k;k=$t(k,["fill","stroke"]);var J=Ue(N);J.get("isInterrupting")||(k={...k,strokeDasharray:"6"});var se=ye(O,N,k);return V&&D(N,O,k),se},"bpmn:SubProcess":function(O,N,k={}){return Dt(N)?k=$t(k,["fill","stroke","width","height"]):k=$t(k,["fill","stroke"]),G(O,N,k)},"bpmn:Task":function(O,N,k={}){return k=$t(k,["fill","stroke"]),K(O,N,k)},"bpmn:TextAnnotation":function(O,N,k={}){k=$t(k,["fill","stroke","width","height"]);var{width:V,height:J}=vh(N,k),se=b(O,V,J,0,0,{fill:"none",stroke:"none"}),ke=r.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:V,containerHeight:J,position:{mx:0,my:0}});w(O,ke,{stroke:Ve(N,l,k.stroke)});var Ae=Ue(N),Ie=Ae.get("text")||"";return z(O,Ie,{align:"left-top",box:vh(N,k),padding:7,style:{fill:gh(N,c,l,k.stroke)}}),se},"bpmn:Transaction":function(O,N,k={}){Dt(N)?k=$t(k,["fill","stroke","width","height"]):k=$t(k,["fill","stroke"]);var V=G(O,N,{strokeWidth:1.5,...k}),J=n.style(["no-fill","no-events"],{stroke:Ve(N,l,k.stroke),strokeWidth:1.5}),se=Dt(N);return se||(k={}),b(O,So(N,k),Ti(N,k),M0-Bg,Bg,J),V},"bpmn:UserTask":function(O,N,k={}){k=$t(k,["fill","stroke"]);var V=K(O,N,k),J=15,se=12,ke=r.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:J,y:se}});w(O,ke,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:.5});var Ae=r.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:J,y:se}});w(O,Ae,{fill:Tt(N,s,k.fill),stroke:Ve(N,l,k.stroke),strokeWidth:.5});var Ie=r.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:J,y:se}});return w(O,Ie,{fill:Ve(N,l,k.stroke),stroke:Ve(N,l,k.stroke),strokeWidth:.5}),V},label:function(O,N,k={}){return me(O,N,k)}};this._drawPath=w,this._renderer=I}We(Au,Ds);Au.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Au.prototype.canRender=function(e){return B(e,"bpmn:BaseElement")};Au.prototype.drawShape=function(e,t,n={}){var{type:r}=t,i=this._renderer(r);return i(e,t,n)};Au.prototype.drawConnection=function(e,t,n={}){var{type:r}=t,i=this._renderer(r);return i(e,t,n)};Au.prototype.getShapePath=function(e){return B(e,"bpmn:Event")?dV(e):B(e,"bpmn:Activity")?fV(e,M0):B(e,"bpmn:Gateway")?hV(e):pV(e)};function $t(e,t=[]){return t.reduce((n,r)=>(e[r]&&(n[r]=e[r]),n),{})}var _V=0,wV={width:150,height:50};function xV(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function EV(e){return Tr(e)?be({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function SV(e,t){t.textContent=e;var n;try{var r,i=e==="";return t.textContent=i?"dummy":e,n=t.getBBox(),r={width:n.width+n.x*2,height:n.height},i&&(r.width=0),r}catch{return{width:0,height:0}}}function NV(e,t,n){for(var r=e.shift(),i=r,o;;){if(o=SV(i,n),o.width=i?o.width:0,i===" "||i===""||o.width<Math.round(t)||i.length<2)return AV(e,i,r,o);i=CV(i,o.width,t)}}function AV(e,t,n,r){if(t.length<n.length){var i=n.slice(t.length).trim();e.unshift(i)}return{width:r.width,height:r.height,text:t}}var Yk="";function kV(e,t){var n=e.split(/(\s|-|\u00AD)/g),r,i=[],o=0;if(n.length>1)for(;r=n.shift();)if(r.length+o<t)i.push(r),o+=r.length;else{(r==="-"||r===Yk)&&i.pop();break}var a=i[i.length-1];return a&&a===Yk&&(i[i.length-1]="-"),i.join("")}function CV(e,t,n){var r=Math.max(e.length*(n/t),1),i=kV(e,r);return i||(i=e.slice(0,Math.max(Math.round(r-1),1))),i}function PV(){var e=document.getElementById("helper-svg");return e||(e=Qe("svg"),He(e,{id:"helper-svg"}),Jr(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function My(e){this._config=be({},{size:wV,padding:_V,style:{},align:"center-top"},e||{})}My.prototype.createText=function(e,t){return this.layoutText(e,t).element};My.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};My.prototype.layoutText=function(e,t){var n=be({},this._config.size,t.box),r=be({},this._config.style,t.style),i=xV(t.align||this._config.align),o=EV(t.padding!==void 0?t.padding:this._config.padding),a=t.fitBox||!1,s=TV(r),l=e.split(/\u00AD?\r?\n/),c=[],u=n.width-o.left-o.right,d=Qe("text");He(d,{x:0,y:0}),He(d,r);var h=PV();for(pt(h,d);l.length;)c.push(NV(l,u,d));i.vertical==="middle"&&(o.top=o.bottom=0);var f=Bi(c,function(x,_,w){return x+(s||_.height)},0)+o.top+o.bottom,m=Bi(c,function(x,_,w){return _.width>x?_.width:x},0),v=o.top;i.vertical==="middle"&&(v+=(n.height-f)/2),v-=(s||c[0].height)/4;var b=Qe("text");He(b,r),le(c,function(x){var _;switch(v+=s||x.height,i.horizontal){case"left":_=o.left;break;case"right":_=(a?m:u)-o.right-x.width;break;default:_=Math.max(((a?m:u)-x.width)/2+o.left,0)}var w=Qe("tspan");He(w,{x:_,y:v}),w.textContent=x.text,pt(b,w)}),cr(d);var y={width:m,height:f};return{dimensions:y,element:b}};function TV(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var RV=12,LV=1.2,OV=30;function yL(e){var t=be({fontFamily:"Arial, sans-serif",fontSize:RV,fontWeight:"normal",lineHeight:LV},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,r=be({},t,{fontSize:n},e&&e.externalStyle||{}),i=new My({style:t});this.getExternalLabelBounds=function(o,a){var s=i.getDimensions(a,{box:{width:90,height:30},style:r});return{x:Math.round(o.x+o.width/2-s.width/2),y:Math.round(o.y),width:Math.ceil(s.width),height:Math.ceil(s.height)}},this.getTextAnnotationBounds=function(o,a){var s=i.getDimensions(a,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(OV,Math.round(s.height))}},this.createText=function(o,a){return i.createText(o,a||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return r}}yL.$inject=["config.textRenderer"];function MV(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var r=this.pathMap[t],i,o;n.abspos?(i=n.abspos.x,o=n.abspos.y):(i=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var a={};if(n.position){for(var s=n.containerHeight/r.height*n.yScaleFactor,l=n.containerWidth/r.width*n.xScaleFactor,c=0;c<r.heightElements.length;c++)a["y"+c]=r.heightElements[c]*s;for(var u=0;u<r.widthElements.length;u++)a["x"+u]=r.widthElements[u]*l}var d=BV(r.d,{mx:i,my:o,e:a});return d}}var IV=/\{([^{}]+)\}/g,DV=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function jV(e,t,n){var r=n;return t.replace(DV,function(i,o,a,s,l){o=o||s,r&&(o in r&&(r=r[o]),typeof r=="function"&&l&&(r=r()))}),r=(r==null||r==n?e:r)+"",r}function BV(e,t){return String(e).replace(IV,function(n,r){return jV(n,r,t)})}const FV={__init__:["bpmnRenderer"],bpmnRenderer:["type",Au],textRenderer:["type",yL],pathMap:["type",MV]};function $V(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,r){return t[r]||"{"+r+"}"})}const Iy={translate:["value",$V]};function I0(e,t,n){return be({id:e.id,type:e.$type,businessObject:e,di:t},n)}function UV(e,t,n){var r=e.waypoint;return!r||r.length<2?[ht(t),ht(n)]:r.map(function(i){return{x:i.x,y:i.y}})}function bL(e,t,n){return new Error(`element ${Yr(t)} referenced by ${Yr(e)}#${n} not yet drawn`)}function Bs(e,t,n,r,i){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=r,this._textRenderer=i}Bs.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];Bs.prototype.add=function(e,t,n){var r,i,o;if(B(t,"bpmndi:BPMNPlane")){var a=B(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};r=this._elementFactory.createRoot(I0(e,t,a)),this._canvas.addRootElement(r)}else if(B(t,"bpmndi:BPMNShape")){var s=!Dt(e,t),l=GV(e);i=n&&(n.hidden||n.collapsed);var c=t.bounds;r=this._elementFactory.createShape(I0(e,t,{collapsed:s,hidden:i,x:Math.round(c.x),y:Math.round(c.y),width:Math.round(c.width),height:Math.round(c.height),isFrame:l})),B(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,r),B(e,"bpmn:Lane")&&(o=0),B(e,"bpmn:DataStoreReference")&&(zV(n,ht(c))||(n=this._canvas.findRoot(n))),this._canvas.addShape(r,n,o)}else if(B(t,"bpmndi:BPMNEdge")){var u=this._getSource(e),d=this._getTarget(e);i=n&&(n.hidden||n.collapsed),r=this._elementFactory.createConnection(I0(e,t,{hidden:i,source:u,target:d,waypoints:UV(t,u,d)})),B(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(r,n,o)}else throw new Error(`unknown di ${Yr(t)} for element ${Yr(e)}`);return gu(e)&&io(r)&&this.addLabel(e,t,r),this._eventBus.fire("bpmnElement.added",{element:r}),r};Bs.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${Yr(e)}#attachedToRef`);var r=this._elementRegistry.get(n.id),i=r&&r.attachers;if(!r)throw bL(e,n,"attachedToRef");t.host=r,i||(r.attachers=i=[]),i.indexOf(t)===-1&&i.push(t)};Bs.prototype.addLabel=function(e,t,n){var r,i,o;return r=oV(t,n),i=io(n),i&&(r=this._textRenderer.getExternalLabelBounds(r,i)),o=this._elementFactory.createLabel(I0(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!io(n),x:Math.round(r.x),y:Math.round(r.y),width:Math.round(r.width),height:Math.round(r.height)})),this._canvas.addShape(o,n.parent)};Bs.prototype._getConnectedElement=function(e,t){var n,r,i=e.$type;if(r=e[t+"Ref"],t==="source"&&i==="bpmn:DataInputAssociation"&&(r=r&&r[0]),(t==="source"&&i==="bpmn:DataOutputAssociation"||t==="target"&&i==="bpmn:DataInputAssociation")&&(r=e.$parent),n=r&&this._getElement(r),n)return n;throw r?bL(e,r,t+"Ref"):new Error(`${Yr(e)}#${t} Ref not specified`)};Bs.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};Bs.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};Bs.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function zV(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function GV(e){return B(e,"bpmn:Group")}const qV={__depends__:[Iy],bpmnImporter:["type",Bs]},HV={__depends__:[FV,qV]};function Zp(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Zp.prototype.next=function(){return this._prefix+ ++this._counter};var VV=new Zp("ov"),WV=500;function Rr(e,t,n,r){this._eventBus=t,this._canvas=n,this._elementRegistry=r,this._ids=VV,this._overlayDefaults=be({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=KV(n.getContainer()),this._init()}Rr.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Rr.prototype.get=function(e){if(ji(e)&&(e={id:e}),ji(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?Lt(t.overlays,la({type:e.type})):t.overlays.slice():[]}else return e.type?Lt(this._overlays,la({type:e.type})):e.id?this._overlays[e.id]:null};Rr.prototype.add=function(e,t,n){if(Tr(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var r=this._ids.next();return n=be({},this._overlayDefaults,n,{id:r,type:t,element:e,html:n.html}),this._addOverlay(n),r};Rr.prototype.remove=function(e){var t=this.get(e)||[];bt(t)||(t=[t]);var n=this;le(t,function(r){var i=n._getOverlayContainer(r.element,!0);if(r&&(pu(r.html),pu(r.htmlContainer),delete r.htmlContainer,delete r.element,delete n._overlays[r.id]),i){var o=i.overlays.indexOf(r);o!==-1&&i.overlays.splice(o,1)}})};Rr.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Rr.prototype.show=function(){Dy(this._overlayRoot)};Rr.prototype.hide=function(){Dy(this._overlayRoot,!1)};Rr.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Ey(this._overlayRoot)};Rr.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,r=t.x,i=t.y;if(t.waypoints){var o=yr(t);r=o.x,i=o.y}_L(n,r,i),fi(e.html,"data-container-id",t.id)};Rr.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,r=e.element,i=t.left,o=t.top;if(t.right!==void 0){var a;r.waypoints?a=yr(r).width:a=r.width,i=t.right*-1+a}if(t.bottom!==void 0){var s;r.waypoints?s=yr(r).height:s=r.height,o=t.bottom*-1+s}_L(n,i||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Rr.prototype._createOverlayContainer=function(e){var t=_n('<div class="djs-overlays" />');Jr(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};Rr.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";wL(this._overlayRoot,n)};Rr.prototype._getOverlayContainer=function(e,t){var n=Vt(this._overlayContainers,function(r){return r.element===e});return!n&&!t?this._createOverlayContainer(e):n};Rr.prototype._addOverlay=function(e){var t=e.id,n=e.element,r=e.html,i,o;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),ji(r)&&(r=_n(r)),o=this._getOverlayContainer(n),i=_n('<div class="djs-overlay" data-overlay-id="'+t+'">'),Jr(i,{position:"absolute"}),i.appendChild(r),e.type&&On(i).add("djs-overlay-"+e.type);var a=this._canvas.findRoot(n),s=this._canvas.getRootElement();Dy(i,a===s),e.htmlContainer=i,o.overlays.push(e),o.html.appendChild(i),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Rr.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,r=this._canvas.findRoot(e.element),i=n&&n.minZoom,o=n&&n.maxZoom,a=e.htmlContainer,s=this._canvas.getRootElement(),l=!0;(r!==s||n&&(Cr(i)&&i>t.scale||Cr(o)&&o<t.scale))&&(l=!1),Dy(a,l),this._updateOverlayScale(e,t)};Rr.prototype._updateOverlayScale=function(e,t){var n=e.scale,r,i,o=e.htmlContainer,a,s="";n!==!0&&(n===!1?(r=1,i=1):(r=n.min,i=n.max),Cr(r)&&t.scale<r&&(a=(1/t.scale||1)*r),Cr(i)&&t.scale>i&&(a=(1/t.scale||1)*i)),Cr(a)&&(s="scale("+a+","+a+")"),wL(o,s)};Rr.prototype._updateOverlaysVisibilty=function(e){var t=this;le(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};Rr.prototype._init=function(){var e=this._eventBus,t=this;function n(r){t._updateRoot(r),t._updateOverlaysVisibilty(r),t.show()}e.on("canvas.viewbox.changing",function(r){t.hide()}),e.on("canvas.viewbox.changed",function(r){n(r.viewbox)}),e.on(["shape.remove","connection.remove"],function(r){var i=r.element,o=t.get({element:i});le(o,function(l){t.remove(l.id)});var a=t._getOverlayContainer(i);if(a){pu(a.html);var s=t._overlayContainers.indexOf(a);s!==-1&&t._overlayContainers.splice(s,1)}}),e.on("element.changed",WV,function(r){var i=r.element,o=t._getOverlayContainer(i,!0);o&&(le(o.overlays,function(a){t._updateOverlay(a)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(r){var i=t._getOverlayContainer(r.element,!0);i&&On(i.html)[r.add?"add":"remove"](r.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function KV(e){var t=_n('<div class="djs-overlay-container" />');return Jr(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function _L(e,t,n){Jr(e,{left:t+"px",top:n+"px"})}function Dy(e,t){e.style.display=t===!1?"none":""}function wL(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const jy={__init__:["overlays"],overlays:["type",Rr]};function xL(e,t,n,r){e.on("element.changed",function(i){var o=i.element;(o.parent||o===t.getRootElement())&&(i.gfx=n.getGraphics(o)),i.gfx&&e.fire(M6(o)+".changed",i)}),e.on("elements.changed",function(i){var o=i.elements;o.forEach(function(a){e.fire("element.changed",{element:a})}),r.updateContainments(o)}),e.on("shape.changed",function(i){r.update("shape",i.element,i.gfx)}),e.on("connection.changed",function(i){r.update("connection",i.element,i.gfx)})}xL.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const l5={__init__:["changeSupport"],changeSupport:["type",xL]};var YV=1e3;function Fe(e){this._eventBus=e}Fe.$inject=["eventBus"];function JV(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}Fe.prototype.on=function(e,t,n,r,i,o){if((ur(t)||ft(t))&&(o=i,i=r,r=n,n=t,t=null),ur(n)&&(o=i,i=r,r=n,n=YV),Tr(i)&&(o=i,i=!1),!ur(r))throw new Error("handlerFn must be a function");bt(e)||(e=[e]);var a=this._eventBus;le(e,function(s){var l=["commandStack",s,t].filter(function(c){return c}).join(".");a.on(l,n,i?JV(r,o):r,o)})};Fe.prototype.canExecute=Fs("canExecute");Fe.prototype.preExecute=Fs("preExecute");Fe.prototype.preExecuted=Fs("preExecuted");Fe.prototype.execute=Fs("execute");Fe.prototype.executed=Fs("executed");Fe.prototype.postExecute=Fs("postExecute");Fe.prototype.postExecuted=Fs("postExecuted");Fe.prototype.revert=Fs("revert");Fe.prototype.reverted=Fs("reverted");function Fs(e){return function(n,r,i,o,a){(ur(n)||ft(n))&&(a=o,o=i,i=r,r=n,n=null),this.on(n,e,r,i,o,a)}}function c5(e,t){t.invoke(Fe,this),this.executed(function(n){var r=n.context;r.rootElement?e.setRootElement(r.rootElement):r.rootElement=e.getRootElement()}),this.revert(function(n){var r=n.context;r.rootElement&&e.setRootElement(r.rootElement)})}We(c5,Fe);c5.$inject=["canvas","injector"];const XV={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",c5]};function Tp(e){return CSS.escape(e)}var ZV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function cw(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return ZV[t]})}var EL="_plane";function Jk(e){var t=e.id;return QV(t)}function bs(e){var t=e.id;return B(e,"bpmn:SubProcess")?SL(t):t}function Ic(e){return SL(e)}function D0(e){var t=zt(e);return B(t,"bpmndi:BPMNPlane")}function SL(e){return e+EL}function QV(e){return e.replace(new RegExp(EL+"$"),"")}var eW="bjs-breadcrumbs-shown";function NL(e,t,n){var r=_n('<ul class="bjs-breadcrumbs"></ul>'),i=n.getContainer(),o=On(i);i.appendChild(r);var a=[];e.on("element.changed",function(l){var c=l.element,u=Ue(c),d=Vt(a,function(h){return h===u});d&&s()});function s(l){l&&(a=tW(l));var c=a.flatMap(function(d){var h=n.findRoot(bs(d))||n.findRoot(d.id);if(!h&&B(d,"bpmn:Process")){var f=t.find(function(b){var y=Ue(b);return y&&y.get("processRef")===d});h=f&&n.findRoot(f.id)}if(!h)return[];var m=cw(d.name||d.id),v=_n('<li><span class="bjs-crumb"><a title="'+m+'">'+m+"</a></span></li>");return v.addEventListener("click",function(){n.setRootElement(h)}),v});r.innerHTML="";var u=c.length>1;o.toggle(eW,u),c.forEach(function(d){r.appendChild(d)})}e.on("root.set",function(l){s(l.element)})}NL.$inject=["eventBus","elementRegistry","canvas"];function tW(e){for(var t=Ue(e),n=[],r=t;r;r=r.$parent)(B(r,"bpmn:SubProcess")||B(r,"bpmn:Process"))&&n.push(r);return n.reverse()}function AL(e,t){var n=null,r=new nW;e.on("root.set",function(i){var o=i.element,a=t.viewbox(),s=r.get(o);if(r.set(n,{x:a.x,y:a.y,zoom:a.scale}),n=o,!(!B(o,"bpmn:SubProcess")&&!s)){s=s||{x:0,y:0,zoom:1};var l=(a.x-s.x)*a.scale,c=(a.y-s.y)*a.scale;(l!==0||c!==0)&&t.scroll({dx:l,dy:c}),s.zoom!==a.scale&&t.zoom(s.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){r.clear(),n=null})}AL.$inject=["eventBus","canvas"];function nW(){this._entries=[],this.set=function(e,t){var n=!1;for(var r in this._entries)if(this._entries[r][0]===e){this._entries[r][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var Xk={x:180,y:160};function ku(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(r,i){n._handleImport(i.definitions)})}ku.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(r){!r.plane||!r.plane.bpmnElement||(t._processToDiagramMap[r.plane.bpmnElement.id]=r)});var n=e.diagrams.filter(r=>r.plane).flatMap(r=>t._createNewDiagrams(r.plane));n.forEach(function(r){t._movePlaneElementsToOrigin(r.plane)})}};ku.prototype._createNewDiagrams=function(e){var t=this,n=[],r=[];e.get("planeElement").forEach(function(o){var a=o.bpmnElement;if(a){var s=a.$parent;B(a,"bpmn:SubProcess")&&!o.isExpanded&&n.push(a),iW(a,e)&&r.push({diElement:o,parent:s})}});var i=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var a=t._createDiagram(o);t._processToDiagramMap[o.id]=a,i.push(a)}}),r.forEach(function(o){for(var a=o.diElement,s=o.parent;s&&n.indexOf(s)===-1;)s=s.$parent;if(s){var l=t._processToDiagramMap[s.id];t._moveToDiPlane(a,l.plane)}}),i};ku.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=rW(e),r={x:n.x-Xk.x,y:n.y-Xk.y};t.forEach(function(i){i.waypoint?i.waypoint.forEach(function(o){o.x=o.x-r.x,o.y=o.y-r.y}):i.bounds&&(i.bounds.x=i.bounds.x-r.x,i.bounds.y=i.bounds.y-r.y)})};ku.prototype._moveToDiPlane=function(e,t){var n=kL(e),r=n.plane.get("planeElement");r.splice(r.indexOf(e),1),t.get("planeElement").push(e)};ku.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};ku.$inject=["eventBus","moddle"];function kL(e){return B(e,"bpmndi:BPMNDiagram")?e:kL(e.$parent)}function rW(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var r=at(n.bounds);t.top=Math.min(r.top,t.top),t.left=Math.min(r.left,t.left)}}),Cy(t)}function iW(e,t){var n=e.$parent;return!(!B(n,"bpmn:SubProcess")||n===t.bpmnElement||Pt(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Fg=250,oW='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',aW="bjs-drilldown-empty";function ec(e,t,n,r,i){Fe.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=r,this._translate=i;var o=this;this.executed("shape.toggleCollapse",Fg,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.reverted("shape.toggleCollapse",Fg,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.executed(["shape.create","shape.move","shape.delete"],Fg,function(a){var s=a.oldParent,l=a.newParent||a.parent,c=a.shape;o._canDrillDown(c)&&o._addOverlay(c),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(l),o._updateDrilldownOverlay(c)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Fg,function(a){var s=a.oldParent,l=a.newParent||a.parent,c=a.shape;o._canDrillDown(c)&&o._addOverlay(c),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(l),o._updateDrilldownOverlay(c)},!0),t.on("import.render.complete",function(){n.filter(function(a){return o._canDrillDown(a)}).map(function(a){o._addOverlay(a)})})}We(ec,Fe);ec.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};ec.prototype._canDrillDown=function(e){var t=this._canvas;return B(e,"bpmn:SubProcess")&&t.findRoot(bs(e))};ec.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=Ue(e),r=t.get({element:n.id,type:"drilldown"})[0];if(r){var i=n&&n.get("flowElements")&&n.get("flowElements").length;On(r.html).toggle(aW,!i)}};ec.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,r=Ue(e),i=n.get({element:e,type:"drilldown"});i.length&&this._removeOverlay(e);var o=_n('<button type="button" class="bjs-drilldown">'+oW+"</button>"),a=r.get("name")||r.get("id"),s=this._translate("Open {element}",{element:a});o.setAttribute("title",s),o.addEventListener("click",function(){t.setRootElement(t.findRoot(bs(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)};ec.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};ec.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const sW={__depends__:[jy,l5,XV],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",NL],drilldownCentering:["type",AL],drilldownOverlayBehavior:["type",ec],subprocessCompatibility:["type",ku]};var lW=500,cW=1e3;function Cu(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),r=this;function i(o){var a=Qe("rect");return He(a,be({x:0,y:0,rx:4,width:100,height:100},n)),a}e.on(["shape.added","shape.changed"],lW,function(o){var a=o.element,s=o.gfx,l=rn(".djs-outline",s);l||(l=r.getOutline(a)||i(),pt(s,l)),r.updateShapeOutline(l,a)}),e.on(["connection.added","connection.changed"],function(o){var a=o.element,s=o.gfx,l=rn(".djs-outline",s);l||(l=i(),pt(s,l)),r.updateConnectionOutline(l,a)})}Cu.prototype.updateShapeOutline=function(e,t){var n=!1,r=this._getProviders();r.length&&le(r,function(i){n=n||i.updateOutline(t,e)}),n||He(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};Cu.prototype.updateConnectionOutline=function(e,t){var n=yr(t);He(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};Cu.prototype.registerProvider=function(e,t){t||(t=e,e=cW),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};Cu.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Cu.prototype.getOutline=function(e){var t,n=this._getProviders();return le(n,function(r){ur(r.getOutline)&&(t=t||r.getOutline(e))}),t};Cu.$inject=["eventBus","styles","elementRegistry"];const u5={__init__:["outline"],outline:["type",Cu]},uW="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",dW="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",fW={width:36,height:50},hW={width:50,height:50};function Zk(e,t,n){return Qe("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const _l=5;function By(e,t){this._styles=t,e.registerProvider(this)}By.$inject=["outline","styles"];By.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!Gt(e))return B(e,"bpmn:Gateway")?(n=Qe("rect"),be(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),He(n,be({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):Pt(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=Qe("rect"),He(n,be({x:-_l,y:-_l,rx:14,width:e.width+_l*2,height:e.height+_l*2},t))):B(e,"bpmn:EndEvent")?(n=Qe("circle"),He(n,be({cx:e.width/2,cy:e.height/2,r:e.width/2+_l+1},t))):B(e,"bpmn:Event")?(n=Qe("circle"),He(n,be({cx:e.width/2,cy:e.height/2,r:e.width/2+_l},t))):B(e,"bpmn:DataObjectReference")&&Qk(e,"bpmn:DataObjectReference")?n=Zk(uW,{x:-6,y:-6},t):B(e,"bpmn:DataStoreReference")&&Qk(e,"bpmn:DataStoreReference")&&(n=Zk(dW,{x:-6,y:-6},t)),n};By.prototype.updateOutline=function(e,t){if(!Gt(e))return Pt(e,["bpmn:SubProcess","bpmn:Group"])?(He(t,{width:e.width+_l*2,height:e.height+_l*2}),!0):!!Pt(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function Qk(e,t){var n;return t==="bpmn:DataObjectReference"?n=fW:t==="bpmn:DataStoreReference"&&(n=hW),e.width===n.width&&e.height===n.height}const pW={__depends__:[u5],__init__:["outlineProvider"],outlineProvider:["type",By]};function e3(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function yf(e){return e.originalEvent||e.srcEvent}function db(e){e3(e),e3(yf(e))}function vu(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function CL(){return/mac/i.test(navigator.platform)}function PL(e,t){return(yf(e)||e).button===t}function tc(e){return PL(e,0)}function mW(e){return PL(e,1)}function Rp(e){var t=yf(e)||e;return tc(e)?CL()?t.metaKey:t.ctrlKey:!1}function Dv(e){var t=yf(e)||e;return tc(e)&&t.shiftKey}function gW(e){return!0}function $g(e){return tc(e)||mW(e)}var t3=500;function TL(e,t,n){var r=this;function i(T,D,M){if(!s(T,D)){var C,j,z;M?j=t.getGraphics(M):(C=D.delegateTarget||D.target,C&&(j=C,M=t.get(j))),!(!j||!M)&&(z=e.fire(T,{element:M,gfx:j,originalEvent:D}),z===!1&&(D.stopPropagation(),D.preventDefault()))}}var o={};function a(T){return o[T]}function s(T,D){var M=c[T]||tc;return!M(D)}var l={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},c={"element.contextmenu":gW,"element.mousedown":$g,"element.mouseup":$g,"element.click":$g,"element.dblclick":$g};function u(T,D,M){var C=l[T];if(!C)throw new Error("unmapped DOM event name <"+T+">");return i(C,D,M)}var d="svg, .djs-element";function h(T,D,M,C){var j=o[M]=function(z){i(M,z)};C&&(c[M]=C),j.$delegate=Oi.bind(T,d,D,j)}function f(T,D,M){var C=a(M);C&&Oi.unbind(T,D,C.$delegate)}function m(T){le(l,function(D,M){h(T,M,D)})}function v(T){le(l,function(D,M){f(T,M,D)})}e.on("canvas.destroy",function(T){v(T.svg)}),e.on("canvas.init",function(T){m(T.svg)}),e.on(["shape.added","connection.added"],function(T){var D=T.element,M=T.gfx;e.fire("interactionEvents.createHit",{element:D,gfx:M})}),e.on(["shape.changed","connection.changed"],t3,function(T){var D=T.element,M=T.gfx;e.fire("interactionEvents.updateHit",{element:D,gfx:M})}),e.on("interactionEvents.createHit",t3,function(T){var D=T.element,M=T.gfx;r.createDefaultHit(D,M)}),e.on("interactionEvents.updateHit",function(T){var D=T.element,M=T.gfx;r.updateDefaultHit(D,M)});var b=R("djs-hit djs-hit-stroke"),y=R("djs-hit djs-hit-click-stroke"),x=R("djs-hit djs-hit-all"),_=R("djs-hit djs-hit-no-move"),w={all:x,"click-stroke":y,stroke:b,"no-move":_};function R(T,D){return D=be({stroke:"white",strokeWidth:15},D||{}),n.cls(T,["no-fill","no-border"],D)}function I(T,D){var M=w[D];if(!M)throw new Error("invalid hit type <"+D+">");return He(T,M),T}function q(T,D){pt(T,D)}this.removeHits=function(T){var D=Q_(".djs-hit",T);le(D,cr)},this.createDefaultHit=function(T,D){var M=T.waypoints,C=T.isFrame,j;return M?this.createWaypointsHit(D,M):(j=C?"stroke":"all",this.createBoxHit(D,j,{width:T.width,height:T.height}))},this.createWaypointsHit=function(T,D){var M=Ay(D);return I(M,"stroke"),q(T,M),M},this.createBoxHit=function(T,D,M){M=be({x:0,y:0},M);var C=Qe("rect");return I(C,D),He(C,M),q(T,C),C},this.updateDefaultHit=function(T,D){var M=rn(".djs-hit",D);if(M)return T.waypoints?L6(M,T.waypoints):He(M,{width:T.width,height:T.height}),M},this.fire=i,this.triggerMouseEvent=u,this.mouseHandler=a,this.registerEvent=h,this.unregisterEvent=f}TL.$inject=["eventBus","elementRegistry","styles"];const d5={__init__:["interactionEvents"],interactionEvents:["type",TL]};function bf(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(r){var i=r.element;n.deselect(i)}),e.on(["diagram.clear","root.set"],function(r){n.select(null)})}bf.$inject=["eventBus","canvas"];bf.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var r=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:t})}};bf.prototype.get=function(){return this._selectedElements};bf.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};bf.prototype.select=function(e,t){var n=this._selectedElements,r=n.slice();bt(e)||(e=e?[e]:[]);var i=this._canvas,o=i.getRootElement();e=e.filter(function(a){var s=i.findRoot(a);return o===s}),t?le(e,function(a){n.indexOf(a)===-1&&n.push(a)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:n})};var n3="hover",r3="selected",Ug=6;function f5(e,t,n){this._canvas=e;var r=this;this._multiSelectionBox=null;function i(a,s){e.addMarker(a,s)}function o(a,s){e.removeMarker(a,s)}t.on("element.hover",function(a){i(a.element,n3)}),t.on("element.out",function(a){o(a.element,n3)}),t.on("selection.changed",function(a){function s(d){o(d,r3)}function l(d){i(d,r3)}var c=a.oldSelection,u=a.newSelection;le(c,function(d){u.indexOf(d)===-1&&s(d)}),le(u,function(d){c.indexOf(d)===-1&&l(d)}),r._updateSelectionOutline(u)}),t.on("element.changed",function(a){n.isSelected(a.element)&&r._updateSelectionOutline(n.get())})}f5.$inject=["canvas","eventBus","selection"];f5.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Ny(t);var n=e.length>1,r=this._canvas.getContainer();if(Ut(r)[n?"add":"remove"]("djs-multi-select"),!!n){var i=vW(yr(e)),o=Qe("rect");He(o,be({rx:3},i)),Ut(o).add("djs-selection-outline"),pt(t,o)}};function vW(e){return{x:e.x-Ug,y:e.y-Ug,width:e.width+Ug*2,height:e.height+Ug*2}}function RL(e,t,n,r){e.on("create.end",500,function(i){var o=i.context,a=o.canExecute,s=o.elements,l=o.hints||{},c=l.autoSelect;if(a){if(c===!1)return;bt(c)?t.select(c):t.select(s.filter(yW))}}),e.on("connect.end",500,function(i){var o=i.context,a=o.connection;a&&t.select(a)}),e.on("shape.move.end",500,function(i){var o=i.previousSelection||[],a=r.get(i.context.shape.id),s=Vt(o,function(l){return a.id===l.id});s||t.select(a)}),e.on("element.click",function(i){if(tc(i)){var o=i.element;o===n.getRootElement()&&(o=null);var a=t.isSelected(o),s=t.get().length>1,l=Dv(i);if(a&&s)return l?t.deselect(o):t.select(o);a?t.deselect(o):t.select(o,l)}})}RL.$inject=["eventBus","selection","canvas","elementRegistry"];function yW(e){return!e.hidden}const qa={__init__:["selectionVisuals","selectionBehavior"],__depends__:[d5,u5],selection:["type",bf],selectionVisuals:["type",f5],selectionBehavior:["type",RL]};function nc(e){kn.call(this,e)}We(nc,kn);nc.prototype._modules=[HV,sW,pW,jy,qa,Iy];nc.prototype._moddleExtensions={};var bW=["c","C"],_W=["v","V"],wW=["y","Y"],LL=["z","Z"];function xW(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function oo(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function gr(e,t){return e=bt(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function h5(e){return e.shiftKey}function EW(e){return oo(e)&&gr(bW,e)}function SW(e){return oo(e)&&gr(_W,e)}function NW(e){return oo(e)&&!h5(e)&&gr(LL,e)}function AW(e){return oo(e)&&(gr(wW,e)||gr(LL,e)&&h5(e))}var Fy="keyboard.keydown",kW="keyboard.keyup",i3="input-handle-modified-keys",CW=1e3;function Br(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}Br.$inject=["config.keyboard","eventBus"];Br.prototype._keydownHandler=function(e){this._keyHandler(e,Fy)};Br.prototype._keyupHandler=function(e){this._keyHandler(e,kW)};Br.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var r={keyEvent:e};n=this._eventBus.fire(t||Fy,r),n&&e.preventDefault()}};Br.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:(PW(e.target)||TW(e.target)&&gr([" ","Enter"],e))&&this._isModifiedKeyIgnored(e)};Br.prototype._isModifiedKeyIgnored=function(e){if(!oo(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1};Br.prototype._getAllowedModifiers=function(e){var t=Jl(e,"["+i3+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(i3).split(",")};Br.prototype.bind=function(e){this.unbind(),this._node=e,Ht.bind(e,"keydown",this._keydownHandler),Ht.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Br.prototype.getBinding=function(){return this._node};Br.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),Ht.unbind(e,"keydown",this._keydownHandler),Ht.unbind(e,"keyup",this._keyupHandler)),this._node=null};Br.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Br.prototype.addListener=function(e,t,n){ur(e)&&(n=t,t=e,e=CW),this._eventBus.on(n||Fy,e,t)};Br.prototype.removeListener=function(e,t){this._eventBus.off(t||Fy,e)};Br.prototype.hasModifier=xW;Br.prototype.isCmd=oo;Br.prototype.isShift=h5;Br.prototype.isKey=gr;function PW(e){return e&&(Sy(e,"input, textarea")||e.contentEditable==="true")}function TW(e){return e&&Sy(e,"button, input[type=submit], input[type=button], a[href], [aria-role=button]")}var RW=500;function _f(e,t){var n=this;e.on("editorActions.init",RW,function(r){var i=r.editorActions;n.registerBindings(t,i)})}_f.$inject=["eventBus","keyboard"];_f.prototype.registerBindings=function(e,t){function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("undo",function(r){var i=r.keyEvent;if(NW(i))return t.trigger("undo"),!0}),n("redo",function(r){var i=r.keyEvent;if(AW(i))return t.trigger("redo"),!0}),n("copy",function(r){var i=r.keyEvent;if(EW(i))return t.trigger("copy"),!0}),n("paste",function(r){var i=r.keyEvent;if(SW(i))return t.trigger("paste"),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(gr(["+","Add","="],i)&&oo(i))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(r){var i=r.keyEvent;if(gr(["-","Subtract"],i)&&oo(i))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(r){var i=r.keyEvent;if(gr("0",i)&&oo(i))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(r){var i=r.keyEvent;if(gr(["Backspace","Delete","Del"],i))return t.trigger("removeSelection"),!0})};const p5={__init__:["keyboard","keyboardBindings"],keyboard:["type",Br],keyboardBindings:["type",_f]};var LW={moveSpeed:50,moveSpeedAccelerated:200};function OL(e,t,n){var r=this;this._config=be({},LW,e||{}),t.addListener(i);function i(o){var a=o.keyEvent,s=r._config;if(t.isCmd(a)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],a)){var l=t.isShift(a)?s.moveSpeedAccelerated:s.moveSpeed,c;switch(a.key){case"ArrowLeft":case"Left":c="left";break;case"ArrowUp":case"Up":c="up";break;case"ArrowRight":case"Right":c="right";break;case"ArrowDown":case"Down":c="down";break}return r.moveCanvas({speed:l,direction:c}),!0}}this.moveCanvas=function(o){var a=0,s=0,l=o.speed,c=l/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":a=c;break;case"up":s=c;break;case"right":a=-c;break;case"down":s=-c;break}n.scroll({dx:a,dy:s})}}OL.$inject=["config.keyboardMove","keyboard","canvas"];const ML={__depends__:[p5],__init__:["keyboardMove"],keyboardMove:["type",OL]};var OW=/^djs-cursor-.*$/;function $y(e){var t=On(document.body);t.removeMatching(OW),e&&t.add("djs-cursor-"+e)}function IL(){$y(null)}var MW=5e3;function DL(e,t){t=t||"element.click";function n(){return!1}return e.once(t,MW,n),function(){e.off(t,n)}}function Jh(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function ca(e,t){return{x:e.x-t.x,y:e.y-t.y}}var IW=15;function jL(e,t){var n;e.on("element.mousedown",500,function(a){return o(a.originalEvent)});function r(a){var s=n.start,l=n.button,c=vu(a),u=ca(c,s);if(!n.dragging&&DW(u)>IW&&(n.dragging=!0,l===0&&DL(e),$y("grab")),n.dragging){var d=n.last||n.start;u=ca(c,d),t.scroll({dx:u.x,dy:u.y}),n.last=c}a.preventDefault()}function i(a){Ht.unbind(document,"mousemove",r),Ht.unbind(document,"mouseup",i),n=null,IL()}function o(a){if(!Jl(a.target,".djs-draggable")){var s=a.button;if(!(s>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:s,start:vu(a)},Ht.bind(document,"mousemove",r),Ht.bind(document,"mouseup",i),!0}}this.isActive=function(){return!!n}}jL.$inject=["eventBus","canvas"];function DW(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const BL={__init__:["moveCanvas"],moveCanvas:["type",jL]};function uw(e){return Math.log(e)/Math.log(10)}function FL(e,t){var n=uw(e.min),r=uw(e.max),i=Math.abs(n)+Math.abs(r);return i/t}function jW(e,t){return Math.max(e.min,Math.min(e.max,t))}var BW=Math.sign||function(e){return e>=0?1:-1},m5={min:.2,max:4},$L=10,FW=.1,$W=.75;function Ha(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=fa(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||$W;var r=this;t.on("canvas.init",function(i){r._init(e.enabled!==!1)})}Ha.$inject=["config.zoomScroll","eventBus","canvas"];Ha.prototype.scroll=function(t){this._canvas.scroll(t)};Ha.prototype.reset=function(){this._canvas.zoom("fit-viewport")};Ha.prototype.zoom=function(t,n){var r=FL(m5,$L*2);this._totalDelta+=t,Math.abs(this._totalDelta)>FW&&(this._zoom(t,n,r),this._totalDelta=0)};Ha.prototype._handleWheel=function(t){if(!Jl(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var r=t.ctrlKey||CL()&&t.metaKey,i=t.shiftKey,o=-1*this._scale,a;if(r?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,r){var s=n.getBoundingClientRect(),l={x:t.clientX-s.left,y:t.clientY-s.top};a=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*BW(t.deltaY)*o,this.zoom(a,l)}else i?a={dx:o*t.deltaY,dy:0}:a={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(a)}};Ha.prototype.stepZoom=function(t,n){var r=FL(m5,$L);this._zoom(t,n,r)};Ha.prototype._zoom=function(e,t,n){var r=this._canvas,i=e>0?1:-1,o=uw(r.zoom()),a=Math.round(o/n)*n;a+=n*i;var s=Math.pow(10,a);r.zoom(jW(m5,s),t)};Ha.prototype.toggle=function(t){var n=this._container,r=this._handleWheel,i=this._enabled;return typeof t>"u"&&(t=!i),i!==t&&Ht[t?"bind":"unbind"](n,"wheel",r,!1),this._enabled=t,t};Ha.prototype._init=function(e){this.toggle(e)};const UL={__init__:["zoomScroll"],zoomScroll:["type",Ha]};function Lp(e){nc.call(this,e)}We(Lp,nc);Lp.prototype._navigationModules=[ML,BL,UL];Lp.prototype._modules=[].concat(nc.prototype._modules,Lp.prototype._navigationModules);function fb(e){return e&&e[e.length-1]}function o3(e){return e.y}function a3(e){return e.x}var UW={left:a3,center:a3,right:function(e){return e.x+e.width},top:o3,middle:o3,bottom:function(e){return e.y+e.height}};function wf(e,t){this._modeling=e,this._rules=t}wf.$inject=["modeling","rules"];wf.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",r="width";return t.indexOf(e)!==-1&&(n="y",r="height"),{axis:n,dimension:r}};wf.prototype._isType=function(e,t){return t.indexOf(e)!==-1};wf.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),r=n.axis,i=n.dimension,o={},a={},s=!1,l,c,u;function d(h,f){return Math.round((h[r]+f[r]+f[i])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][r];else if(this._isType(e,["right","bottom"]))u=fb(t),o[e]=u[r]+u[i];else if(this._isType(e,["center","middle"])){if(le(t,function(h){var f=h[r]+Math.round(h[i]/2);a[f]?a[f].elements.push(h):a[f]={elements:[h],center:f}}),l=Ua(a,function(h){return h.elements.length>1&&(s=!0),h.elements.length}),s)return o[e]=fb(l).center,o;c=t[0],t=Ua(t,function(h){return h[r]+h[i]}),u=fb(t),o[e]=d(c,u)}return o};wf.prototype.trigger=function(e,t){var n=this._modeling,r,i=Lt(e,function(l){return!(l.waypoints||l.host||l.labelTarget)});if(r=this._rules.allowed("elements.align",{elements:i}),bt(r)&&(i=r),!(i.length<2||!r)){var o=UW[t],a=Ua(i,o),s=this._alignmentPosition(t,a);n.alignElements(a,s)}};const zW={__init__:["alignElements"],alignElements:["type",wf]},GW=new Zp;function xf(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}xf.$inject=["eventBus"];xf.prototype.schedule=function(e,t=GW.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};xf.prototype._schedule=function(e,t){const{promise:n,resolve:r,reject:i}=qW();return{executionId:requestAnimationFrame(()=>{try{r(e())}catch(a){i(a)}}),promise:n}};xf.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};xf.prototype._cancel=function(e){cancelAnimationFrame(e.executionId)};function qW(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}const HW={scheduler:["type",xf]};var VW="djs-element-hidden",zg=".entry",WW=1e3,s3=8,KW=300;function Xn(e,t,n,r){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=r,this._current=null,this._init()}Xn.$inject=["canvas","elementRegistry","eventBus","scheduler"];Xn.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,r=n.length?n.length===1?n[0]:n:null;r?e.open(r,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,r=e._current;if(r){var i=r.target,o=bt(i)?i:[i],a=o.filter(function(l){return n.includes(l)});if(a.length){e.close();var s=o.filter(function(l){return e._elementRegistry.get(l.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,r=e._current,i=bt(r.target)?r.target:[r.target];i.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};Xn.prototype._createContainer=function(){var e=_n('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};Xn.prototype.registerProvider=function(e,t){t||(t=e,e=WW),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};Xn.prototype.getEntries=function(e){var t=this._getProviders(),n=bt(e)?"getMultiElementContextPadEntries":"getContextPadEntries",r={};return le(t,function(i){if(ur(i[n])){var o=i[n](e);ur(o)?r=o(r):le(o,function(a,s){r[s]=a})}}),r};Xn.prototype.trigger=function(e,t,n){var r=this,i,o,a=t.delegateTarget||t.target;if(!a)return t.preventDefault();if(i=fi(a,"data-action"),o=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){r._mouseout=r.triggerEntry(i,"hover",o,n)},KW);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(i,e,o,n)};Xn.prototype.triggerEntry=function(e,t,n,r){if(this.isShown()){var i=this._current.target,o=this._current.entries,a=o[e];if(a){var s=a.action;if(this._eventBus.fire("contextPad.trigger",{entry:a,event:n})!==!1){if(ur(s)){if(t==="click")return s(n,i,r)}else if(s[t])return s[t](n,i,r);n.preventDefault()}}}};Xn.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};Xn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Xn.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),r;le(t,function(i,o){var a=i.group||"default",s=_n(i.html||'<div class="entry" draggable="true"></div>'),l;fi(s,"data-action",o),l=rn("[data-group="+Tp(a)+"]",n),l||(l=_n('<div class="group"></div>'),fi(l,"data-group",a),n.appendChild(l)),l.appendChild(s),i.className&&YW(s,i.className),i.title&&fi(s,"title",i.title),i.imageUrl&&(r=_n("<img>"),fi(r,"src",i.imageUrl),r.style.width="100%",r.style.height="100%",s.appendChild(r))}),On(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};Xn.prototype._createHtml=function(e){var t=this,n=_n('<div class="djs-context-pad"></div>');return Oi.bind(n,zg,"click",function(r){t.trigger("click",r)}),Oi.bind(n,zg,"dragstart",function(r){t.trigger("dragstart",r)}),Oi.bind(n,zg,"mouseover",function(r){t.trigger("mouseover",r)}),Oi.bind(n,zg,"mouseout",function(r){t.trigger("mouseout",r)}),Ht.bind(n,"mousedown",function(r){r.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};Xn.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&XW(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};Xn.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};Xn.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return bt(e)!==bt(n)?!1:bt(e)?e.length===n.length&&xu(e,function(r){return n.includes(r)}):n===e};Xn.prototype.isShown=function(){return this.isOpen()&&On(this._current.html).has("open")};Xn.prototype.show=function(){this.isOpen()&&(On(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};Xn.prototype.hide=function(){this.isOpen()&&(On(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};Xn.prototype._getPosition=function(e){if(!bt(e)&&on(e)){var t=this._canvas.viewbox(),n=JW(e),r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale;return{left:r+s3*this._canvas.zoom(),top:i}}var o=this._canvas.getContainer(),a=o.getBoundingClientRect(),s=this._getTargetBounds(e);return{left:s.right-a.left+s3*this._canvas.zoom(),top:s.top-a.top}};Xn.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(r){r in n&&(t.style[r]=n[r]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};Xn.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,r=bt(n)?n:[n],i=r.some(function(o){return t._canvas.hasMarker(o,VW)});i?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};Xn.prototype._getTargetBounds=function(e){var t=this,n=bt(e)?e:[e],r=n.map(function(i){return t._canvas.getGraphics(i)});return r.reduce(function(i,o){const a=o.getBoundingClientRect();return i.top=Math.min(i.top,a.top),i.right=Math.max(i.right,a.right),i.bottom=Math.max(i.bottom,a.bottom),i.left=Math.min(i.left,a.left),i.x=i.left,i.y=i.top,i.width=i.right-i.left,i.height=i.bottom-i.top,i},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function YW(e,t){var n=On(e);t=bt(t)?t:t.split(/\s+/g),t.forEach(function(r){n.add(r)})}function JW(e){return e.waypoints[e.waypoints.length-1]}function XW(e,t){return e=bt(e)?e:[e],t=bt(t)?t:[t],e.length===t.length&&xu(e,function(n){return t.includes(n)})}const zL={__depends__:[d5,HW,jy],contextPad:["type",Xn]};var Uy,Nn,GL,Yc,l3,qL,HL,VL,g5,dw,fw,Op={},WL=[],ZW=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,zy=Array.isArray;function Es(e,t){for(var n in t)e[n]=t[n];return e}function v5(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function KL(e,t,n){var r,i,o,a={};for(o in t)o=="key"?r=t[o]:o=="ref"?i=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?Uy.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return j0(e,a,r,i,null)}function j0(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++GL,__i:-1,__u:0};return i==null&&Nn.vnode!=null&&Nn.vnode(o),o}function Gy(e){return e.children}function B0(e,t){this.props=e,this.context=t}function Zd(e,t){if(t==null)return e.__?Zd(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Zd(e):null}function YL(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return YL(e)}}function c3(e){(!e.__d&&(e.__d=!0)&&Yc.push(e)&&!jv.__r++||l3!=Nn.debounceRendering)&&((l3=Nn.debounceRendering)||qL)(jv)}function jv(){for(var e,t,n,r,i,o,a,s=1;Yc.length;)Yc.length>s&&Yc.sort(HL),e=Yc.shift(),s=Yc.length,e.__d&&(n=void 0,r=void 0,i=(r=(t=e).__v).__e,o=[],a=[],t.__P&&((n=Es({},r)).__v=r.__v+1,Nn.vnode&&Nn.vnode(n),y5(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,o,i??Zd(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,ZL(o,n,a),r.__e=r.__=null,n.__e!=i&&YL(n)));jv.__r=0}function JL(e,t,n,r,i,o,a,s,l,c,u){var d,h,f,m,v,b,y,x=r&&r.__k||WL,_=t.length;for(l=QW(n,t,x,l,_),d=0;d<_;d++)(f=n.__k[d])!=null&&(h=f.__i==-1?Op:x[f.__i]||Op,f.__i=d,b=y5(e,f,h,i,o,a,s,l,c,u),m=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&b5(h.ref,null,f),u.push(f.ref,f.__c||m,f)),v==null&&m!=null&&(v=m),(y=!!(4&f.__u))||h.__k===f.__k?l=XL(f,l,e,y):typeof f.type=="function"&&b!==void 0?l=b:m&&(l=m.nextSibling),f.__u&=-7);return n.__e=v,l}function QW(e,t,n,r,i){var o,a,s,l,c,u=n.length,d=u,h=0;for(e.__k=new Array(i),o=0;o<i;o++)(a=t[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[o]=j0(null,a,null,null,null):zy(a)?a=e.__k[o]=j0(Gy,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=e.__k[o]=j0(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[o]=a,l=o+h,a.__=e,a.__b=e.__b+1,s=null,(c=a.__i=eK(a,n,l,d))!=-1&&(d--,(s=n[c])&&(s.__u|=2)),s==null||s.__v==null?(c==-1&&(i>u?h--:i<u&&h++),typeof a.type!="function"&&(a.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,a.__u|=4))):e.__k[o]=null;if(d)for(o=0;o<u;o++)(s=n[o])!=null&&!(2&s.__u)&&(s.__e==r&&(r=Zd(s)),eO(s,s));return r}function XL(e,t,n,r){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=XL(i[o],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=Zd(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function eK(e,t,n,r){var i,o,a,s=e.key,l=e.type,c=t[n],u=c!=null&&(2&c.__u)==0;if(c===null&&s==null||u&&s==c.key&&l==c.type)return n;if(r>(u?1:0)){for(i=n-1,o=n+1;i>=0||o<t.length;)if((c=t[a=i>=0?i--:o++])!=null&&!(2&c.__u)&&s==c.key&&l==c.type)return a}return-1}function u3(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||ZW.test(t)?n:n+"px"}function Gg(e,t,n,r,i){var o,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||u3(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||u3(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(VL,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=g5,e.addEventListener(t,o?fw:dw,o)):e.removeEventListener(t,o?fw:dw,o);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function d3(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=g5++;else if(t.t<n.u)return;return n(Nn.event?Nn.event(t):t)}}}function y5(e,t,n,r,i,o,a,s,l,c){var u,d,h,f,m,v,b,y,x,_,w,R,I,q,T,D,M,C=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=t.__e=n.__e]),(u=Nn.__b)&&u(t);e:if(typeof C=="function")try{if(y=t.props,x="prototype"in C&&C.prototype.render,_=(u=C.contextType)&&r[u.__c],w=u?_?_.props.value:u.__:r,n.__c?b=(d=t.__c=n.__c).__=d.__E:(x?t.__c=d=new C(y,w):(t.__c=d=new B0(y,w),d.constructor=C,d.render=nK),_&&_.sub(d),d.state||(d.state={}),d.__n=r,h=d.__d=!0,d.__h=[],d._sb=[]),x&&d.__s==null&&(d.__s=d.state),x&&C.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Es({},d.__s)),Es(d.__s,C.getDerivedStateFromProps(y,d.__s))),f=d.props,m=d.state,d.__v=t,h)x&&C.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),x&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(x&&C.getDerivedStateFromProps==null&&y!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(y,w),t.__v==n.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(y,d.__s,w)===!1){for(t.__v!=n.__v&&(d.props=y,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(j){j&&(j.__=t)}),R=0;R<d._sb.length;R++)d.__h.push(d._sb[R]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(y,d.__s,w),x&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,m,v)})}if(d.context=w,d.props=y,d.__P=e,d.__e=!1,I=Nn.__r,q=0,x){for(d.state=d.__s,d.__d=!1,I&&I(t),u=d.render(d.props,d.state,d.context),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[]}else do d.__d=!1,I&&I(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++q<25);d.state=d.__s,d.getChildContext!=null&&(r=Es(Es({},r),d.getChildContext())),x&&!h&&d.getSnapshotBeforeUpdate!=null&&(v=d.getSnapshotBeforeUpdate(f,m)),D=u,u!=null&&u.type===Gy&&u.key==null&&(D=QL(u.props.children)),s=JL(e,zy(D)?D:[D],t,n,r,i,o,a,s,l,c),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),b&&(d.__E=d.__=null)}catch(j){if(t.__v=null,l||o!=null)if(j.then){for(t.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else{for(M=o.length;M--;)v5(o[M]);hw(t)}else t.__e=n.__e,t.__k=n.__k,j.then||hw(t);Nn.__e(j,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=tK(n.__e,t,n,r,i,o,a,l,c);return(u=Nn.diffed)&&u(t),128&t.__u?void 0:s}function hw(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(hw)}function ZL(e,t,n){for(var r=0;r<n.length;r++)b5(n[r],n[++r],n[++r]);Nn.__c&&Nn.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){Nn.__e(o,i.__v)}})}function QL(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:zy(e)?e.map(QL):Es({},e)}function tK(e,t,n,r,i,o,a,s,l){var c,u,d,h,f,m,v,b=n.props||Op,y=t.props,x=t.type;if(x=="svg"?i="http://www.w3.org/2000/svg":x=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((f=o[c])&&"setAttribute"in f==!!x&&(x?f.localName==x:f.nodeType==3)){e=f,o[c]=null;break}}if(e==null){if(x==null)return document.createTextNode(y);e=document.createElementNS(i,x,y.is&&y),s&&(Nn.__m&&Nn.__m(t,o),s=!1),o=null}if(x==null)b===y||s&&e.data==y||(e.data=y);else{if(o=o&&Uy.call(e.childNodes),!s&&o!=null)for(b={},c=0;c<e.attributes.length;c++)b[(f=e.attributes[c]).name]=f.value;for(c in b)if(f=b[c],c!="children"){if(c=="dangerouslySetInnerHTML")d=f;else if(!(c in y)){if(c=="value"&&"defaultValue"in y||c=="checked"&&"defaultChecked"in y)continue;Gg(e,c,null,f,i)}}for(c in y)f=y[c],c=="children"?h=f:c=="dangerouslySetInnerHTML"?u=f:c=="value"?m=f:c=="checked"?v=f:s&&typeof f!="function"||b[c]===f||Gg(e,c,f,b[c],i);if(u)s||d&&(u.__html==d.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),JL(t.type=="template"?e.content:e,zy(h)?h:[h],t,n,r,x=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:n.__k&&Zd(n,0),s,l),o!=null)for(c=o.length;c--;)v5(o[c]);s||(c="value",x=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[c]||x=="progress"&&!m||x=="option"&&m!=b[c])&&Gg(e,c,m,b[c],i),c="checked",v!=null&&v!=e[c]&&Gg(e,c,v,b[c],i))}return e}function b5(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){Nn.__e(i,n)}}function eO(e,t,n){var r,i;if(Nn.unmount&&Nn.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||b5(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){Nn.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&eO(r[i],t,n||typeof e.type!="function");n||v5(e.__e),e.__c=e.__=e.__e=void 0}function nK(e,t,n){return this.constructor(e,n)}function tO(e,t,n){var r,i,o,a;t==document&&(t=document.documentElement),Nn.__&&Nn.__(e,t),i=(r=!1)?null:t.__k,o=[],a=[],y5(t,e=t.__k=KL(Gy,null,[e]),i||Op,Op,t.namespaceURI,i?null:t.firstChild?Uy.call(t.childNodes):null,o,i?i.__e:t.firstChild,r,a),ZL(o,e,a)}Uy=WL.slice,Nn={__e:function(e,t,n,r){for(var i,o,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(s){e=s}throw e}},GL=0,B0.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Es({},this.state),typeof e=="function"&&(e=e(Es({},n),this.props)),e&&Es(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),c3(this))},B0.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),c3(this))},B0.prototype.render=Gy,Yc=[],qL=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,HL=function(e,t){return e.__v.__b-t.__v.__b},jv.__r=0,VL=/(PointerCapture)$|Capture$/i,g5=0,dw=d3(!1),fw=d3(!0);var nO=function(e,t,n,r){var i;t[0]=0;for(var o=1;o<t.length;o++){var a=t[o++],s=t[o]?(t[0]|=a?1:2,n[t[o++]]):t[++o];a===3?r[0]=s:a===4?r[1]=Object.assign(r[1]||{},s):a===5?(r[1]=r[1]||{})[t[++o]]=s:a===6?r[1][t[++o]]+=s+"":a?(i=e.apply(s,nO(e,s,n,["",null])),r.push(i),s[0]?t[0]|=2:(t[o-2]=0,t[o]=i)):r.push(s)}return r},f3=new Map;function rK(e){var t=f3.get(this);return t||(t=new Map,f3.set(this,t)),(t=nO(this,t.get(e)||(t.set(e,t=function(n){for(var r,i,o=1,a="",s="",l=[0],c=function(h){o===1&&(h||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,h,a):o===3&&(h||a)?(l.push(3,h,a),o=2):o===2&&a==="..."&&h?l.push(4,h,0):o===2&&a&&!h?l.push(5,0,!0,a):o>=5&&((a||!h&&o===5)&&(l.push(o,0,a,i),o=6),h&&(l.push(o,h,0,i),o=6)),a=""},u=0;u<n.length;u++){u&&(o===1&&c(),c(u));for(var d=0;d<n[u].length;d++)r=n[u][d],o===1?r==="<"?(c(),l=[l],o=3):a+=r:o===4?a==="--"&&r===">"?(o=1,a=""):a=r+a[0]:s?r===s?s="":a+=r:r==='"'||r==="'"?s=r:r===">"?(c(),o=1):o&&(r==="="?(o=5,i=a,a=""):r==="/"&&(o<5||n[u][d+1]===">")?(c(),o===3&&(l=l[0]),o=l,(l=l[0]).push(2,0,o),o=0):r===" "||r==="	"||r===`
`||r==="\r"?(c(),o=2):a+=r),o===3&&a==="!--"&&(o=4,l=l[0])}return c(),l}(e)),t),arguments,[])).length>1?t:t[0]}var Dn=rK.bind(KL),Qd,Wn,hb,h3,Mp=0,rO=[],nr=Nn,p3=nr.__b,m3=nr.__r,g3=nr.diffed,v3=nr.__c,y3=nr.unmount,b3=nr.__;function qy(e,t){nr.__h&&nr.__h(Wn,e,Mp||t),Mp=0;var n=Wn.__H||(Wn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function pb(e){return Mp=1,iK(oO,e)}function iK(e,t,n){var r=qy(Qd++,2);if(r.t=e,!r.__c&&(r.__=[oO(void 0,t),function(s){var l=r.__N?r.__N[0]:r.__[0],c=r.t(l,s);l!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=Wn,!Wn.__f)){var i=function(s,l,c){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!o||o.call(this,s,l,c);var d=r.__c.props!==s;return u.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(d=!0)}}),o&&o.call(this,s,l,c)||d};Wn.__f=!0;var o=Wn.shouldComponentUpdate,a=Wn.componentWillUpdate;Wn.componentWillUpdate=function(s,l,c){if(this.__e){var u=o;o=void 0,i(s,l,c),o=u}a&&a.call(this,s,l,c)},Wn.shouldComponentUpdate=i}return r.__N||r.__}function pw(e,t){var n=qy(Qd++,3);!nr.__s&&_5(n.__H,t)&&(n.__=e,n.u=t,Wn.__H.__h.push(n))}function mw(e,t){var n=qy(Qd++,4);!nr.__s&&_5(n.__H,t)&&(n.__=e,n.u=t,Wn.__h.push(n))}function iO(e){return Mp=5,ef(function(){return{current:e}},[])}function ef(e,t){var n=qy(Qd++,7);return _5(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function yh(e,t){return Mp=8,ef(function(){return e},t)}function oK(){for(var e;e=rO.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(F0),e.__H.__h.forEach(gw),e.__H.__h=[]}catch(t){e.__H.__h=[],nr.__e(t,e.__v)}}nr.__b=function(e){Wn=null,p3&&p3(e)},nr.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),b3&&b3(e,t)},nr.__r=function(e){m3&&m3(e),Qd=0;var t=(Wn=e.__c).__H;t&&(hb===Wn?(t.__h=[],Wn.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(F0),t.__h.forEach(gw),t.__h=[],Qd=0)),hb=Wn},nr.diffed=function(e){g3&&g3(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(rO.push(t)!==1&&h3===nr.requestAnimationFrame||((h3=nr.requestAnimationFrame)||aK)(oK)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),hb=Wn=null},nr.__c=function(e,t){t.some(function(n){try{n.__h.forEach(F0),n.__h=n.__h.filter(function(r){return!r.__||gw(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],nr.__e(r,n.__v)}}),v3&&v3(e,t)},nr.unmount=function(e){y3&&y3(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{F0(r)}catch(i){t=i}}),n.__H=void 0,t&&nr.__e(t,n.__v))};var _3=typeof requestAnimationFrame=="function";function aK(e){var t,n=function(){clearTimeout(r),_3&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);_3&&(t=requestAnimationFrame(n))}function F0(e){var t=Wn,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),Wn=t}function gw(e){var t=Wn;e.__c=e.__(),Wn=t}function _5(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function oO(e,t){return typeof t=="function"?t(e):t}function aO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=aO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Bv(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=aO(e))&&(r&&(r+=" "),r+=t);return r}function sK(e){const{headerEntries:t,onSelect:n,selectedEntry:r,setSelectedEntry:i,title:o}=e,a=ef(()=>lK(t),[t]);return Dn`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${o}>${o}</h3>
      ${a.map(s=>Dn`
        <ul key=${s.id} class="djs-popup-header-group" data-header-group=${s.id}>

          ${s.entries.map(l=>Dn`
            <li key=${l.id}>
              <${l.action?"button":"span"}
                class=${cK(l,l===r)}
                onClick=${c=>l.action&&n(c,l)}
                title=${l.title||l.label}
                data-id=${l.id}
                onMouseEnter=${()=>l.action&&i(l)}
                onMouseLeave=${()=>l.action&&i(null)}
                onFocus=${()=>l.action&&i(l)}
                onBlur=${()=>l.action&&i(null)}
              >
                ${l.imageUrl&&Dn`<img class="djs-popup-entry-icon" src=${l.imageUrl} alt="" />`||l.imageHtml&&Dn`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:l.imageHtml}} />`}
                ${l.label?Dn`
                  <span class="djs-popup-label">${l.label}</span>
                `:null}
              </${l.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function lK(e){return e.reduce((t,n)=>{const r=n.group||"default",i=t.find(o=>o.id===r);return i?i.entries.push(n):t.push({id:r,entries:[n]}),t},[])}function cK(e,t){return Bv("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function uK(e){const{entry:t,selected:n,onMouseEnter:r,onMouseLeave:i,onAction:o}=e;return Dn`
    <li
      class=${Bv("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${r}
      onBlur=${i}
      onMouseEnter=${r}
      onMouseLeave=${i}
      onDragStart=${a=>o(a,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Bv("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&Dn`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&Dn`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?Dn`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&Dn`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&Dn`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${a=>a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function dK(e){const{selectedEntry:t,setSelectedEntry:n,entries:r,...i}=e,o=iO(),a=ef(()=>fK(r),[r]);return mw(()=>{const s=o.current;if(!s)return;const l=s.querySelector(".selected");l&&hK(l)},[t]),Dn`
    <div class="djs-popup-results" ref=${o}>
      ${a.map(s=>Dn`
        ${s.name&&Dn`
          <div key=${s.id} class="entry-header" title=${s.name}>
            ${s.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${s.id}>
          ${s.entries.map(l=>Dn`
            <${uK}
              key=${l.id}
              entry=${l}
              selected=${l===t}
              onMouseEnter=${()=>n(l)}
              onMouseLeave=${()=>n(null)}
              ...${i}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function fK(e){const t=[],n=o=>t.find(a=>o.id===a.id),r=o=>!!n(o),i=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{const a=o.group?i(o.group):{id:"default"};r(a)?n(a).entries.push(o):t.push({...a,entries:[o]})}),t}function hK(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function pK(e){const{onClose:t,onSelect:n,className:r,headerEntries:i,position:o,title:a,width:s,scale:l,search:c,emptyPlaceholder:u,entries:d,onOpened:h,onClosed:f}=e,m=ef(()=>Cr(c)?d.length>5:!1,[c,d]),[v,b]=pb(""),y=yh((C,j)=>{if(!m)return C;const z=Q=>{if(!j)return(Q.rank||0)>=0;if(Q.searchable===!1)return!1;const me=[Q.description||"",Q.label||"",Q.search||""].map(pe=>pe.toLowerCase());return j.toLowerCase().split(/\s/g).every(pe=>me.some(ue=>ue.includes(pe)))};return C.filter(z)},[m]),[x,_]=pb(y(d,v)),[w,R]=pb(x[0]),I=yh(C=>{(!w||!C.includes(w))&&R(C[0]),_(C)},[w,_,R]);pw(()=>{I(y(d,v))},[v,d]);const q=yh(C=>{let z=x.indexOf(w)+C;z<0&&(z=x.length-1),z>=x.length&&(z=0),R(x[z])},[x,w,R]),T=yh(C=>{if(C.key==="Enter"&&w)return n(C,w);if(C.key==="ArrowUp")return q(-1),C.preventDefault();if(C.key==="ArrowDown")return q(1),C.preventDefault()},[n,w,q]),D=yh(C=>{Sy(C.target,"input")&&b(()=>C.target.value)},[b]);pw(()=>(h(),()=>{f()}),[]);const M=ef(()=>a||i.length>0,[a,i]);return Dn`
    <${w3}
      onClose=${t}
      onKeyup=${D}
      onKeydown=${T}
      className=${r}
      position=${o}
      width=${s}
      scale=${l}
    >
      ${M&&Dn`
        <${sK}
          headerEntries=${i}
          onSelect=${n}
          selectedEntry=${w}
          setSelectedEntry=${R}
          title=${a}
        />
      `}
      ${d.length>0&&Dn`
        <div class="djs-popup-body">

          ${m&&Dn`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${a}" />
          </div>
          `}

          <${dK}
            entries=${x}
            selectedEntry=${w}
            setSelectedEntry=${R}
            onAction=${n}
          />
        </div>
      `}
    ${u&&x.length===0&&Dn`
      <div class="djs-popup-no-results">${ur(u)?u(v):u}</div>
    `}
    </${w3}>
  `}function w3(e){const{onClose:t,onKeydown:n,onKeyup:r,className:i,children:o,position:a}=e,s=iO();return mw(()=>{if(typeof a!="function")return;const l=s.current,c=a(l);l.style.left=`${c.x}px`,l.style.top=`${c.y}px`},[s.current,a]),mw(()=>{const l=s.current;if(!l)return;(l.querySelector("input")||l).focus()},[]),pw(()=>{const l=u=>{if(u.key==="Escape")return u.preventDefault(),t()},c=u=>{if(!Jl(u.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",l),document.body.addEventListener("click",c),()=>{document.documentElement.removeEventListener("keydown",l),document.body.removeEventListener("click",c)}},[]),Dn`
    <div
      class=${Bv("djs-popup",i)}
      style=${mK(e)}
      onKeydown=${n}
      onKeyup=${r}
      ref=${s}
      tabIndex="-1"
    >
      ${o}
    </div>
  `}function mK(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var gK="data-id",sO=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],vK=1e3;function Cn(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var r=Cr(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:r},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",i=>{const o=this.isOpen()&&this._current.target;i.element===o&&this.refresh()})}Cn.$inject=["config.popupMenu","eventBus","canvas"];Cn.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:r,emptyPlaceholder:i,options:o}=this._current,a=Object.entries(n).map(([h,f])=>({id:h,...f})),s=Object.entries(r).map(([h,f])=>({id:h,...f})),l=e&&(h=>this._ensureVisible(h,e)),c=this._updateScale(this._current.container);tO(Dn`
      <${pK}
        onClose=${h=>this.close(h)}
        onSelect=${(h,f,m)=>this.trigger(h,f,m)}
        position=${l}
        className=${t}
        entries=${a}
        headerEntries=${s}
        emptyPlaceholder=${i}
        scale=${c}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...o}}
      />
    `,this._current.container)};Cn.prototype.open=function(e,t,n,r){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:i,headerEntries:o,emptyPlaceholder:a}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:i,headerEntries:o,emptyPlaceholder:a,container:this._createContainer({provider:t}),options:r},this._emit("open"),this._bindAutoClose(),this._render()};Cn.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:r,emptyPlaceholder:i}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:r,emptyPlaceholder:i},this._emit("refresh"),this._render()};Cn.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const r=this._getEntries(e,n),i=this._getHeaderEntries(e,n),o=this._getEmptyPlaceholder(n);return{entries:r,headerEntries:i,emptyPlaceholder:o,empty:!(Object.keys(r).length||Object.keys(i).length)}};Cn.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)};Cn.prototype.reset=function(){const e=this._current.container;tO(null,e),pu(e)};Cn.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};Cn.prototype._onOpened=function(){this._emit("opened")};Cn.prototype._onClosed=function(){this._emit("closed")};Cn.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const r=_n(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(r),r};Cn.prototype._bindAutoClose=function(){this._eventBus.once(sO,this.close,this)};Cn.prototype._unbindAutoClose=function(){this._eventBus.off(sO,this.close,this)};Cn.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,r,i=e;return t!==!0&&(t===!1?(n=1,r=1):(n=t.min,r=t.max),Cr(n)&&e<n&&(i=n),Cr(r)&&e>r&&(i=r)),i};Cn.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect(),i={},o=t.x,a=t.y;return t.x+r.width>n.width&&(i.x=!0),t.y+r.height>n.height&&(i.y=!0),i.x&&i.y?(o=t.x-r.width,a=t.y-r.height):i.x?(o=t.x-r.width,a=t.y):i.y&&t.y<r.height?(o=t.x,a=10):i.y&&(o=t.x,a=t.y-r.height),t.y<n.top&&(a=t.y+r.height),{x:o,y:a}};Cn.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};Cn.prototype.registerProvider=function(e,t,n){n||(n=t,t=vK),this._eventBus.on("popupMenu.getProviders."+e,t,function(r){r.providers.push(n)})};Cn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};Cn.prototype._getEntries=function(e,t){var n={};return le(t,function(r){if(!r.getPopupMenuEntries){le(r.getEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=Io(o,["id"])});return}var i=r.getPopupMenuEntries(e);ur(i)?n=i(n):le(i,function(o,a){n[a]=o})}),n};Cn.prototype._getHeaderEntries=function(e,t){var n={};return le(t,function(r){if(!r.getPopupMenuHeaderEntries){if(!r.getHeaderEntries)return;le(r.getHeaderEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=Io(o,["id"])});return}var i=r.getPopupMenuHeaderEntries(e);ur(i)?n=i(n):le(i,function(o,a){n[a]=o})}),n};Cn.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>ur(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};Cn.prototype.isOpen=function(){return!!this._current};Cn.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let i=Jl(e.delegateTarget||e.target,".entry",!0),o=fi(i,gK);t={id:o,...this._getEntry(o)}}const r=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(ur(r)){if(n==="click")return r(e,t)}else if(r[n])return r[n](e,t)}};Cn.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const w5={__init__:["popupMenu"],popupMenu:["type",Cn]};var lO={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},yK=900;function Ef(e,t,n,r){e.registerProvider(yK,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=r}Ef.$inject=["contextPad","popupMenu","translate","canvas"];Ef.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&be(t,this._getEntries(e)),t};Ef.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};Ef.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${lO.align}</div>`,action:{click:function(t,n){var r=e._getMenuPosition(n);be(r,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",r)}}}}};Ef.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,r=n.getBoundingClientRect(),i={x:r.left,y:r.bottom+t};return i};var bK=["left","center","right","top","middle","bottom"];function Qp(e,t,n,r){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",this)}Qp.$inject=["popupMenu","alignElements","translate","rules"];Qp.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&be(t,this._getEntries(e)),t};Qp.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};Qp.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,r=this._popupMenu,i={};return le(bK,function(o){i["align-elements-"+o]={group:"align",title:n("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:lO[o],action:function(){t.trigger(e,o),r.close()}}}),i};function Bo(e){Fe.call(this,e),this.init()}Bo.$inject=["eventBus"];We(Bo,Fe);Bo.prototype.addRule=function(e,t,n){var r=this;typeof e=="string"&&(e=[e]),e.forEach(function(i){r.canExecute(i,t,function(o,a,s){return n(o)},!0)})};Bo.prototype.init=function(){};function Hy(e){Bo.call(this,e)}Hy.$inject=["eventBus"];We(Hy,Bo);Hy.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=Lt(t,function(r){return!(r.waypoints||r.host||r.labelTarget)});return n=ky(n),n.length<2?!1:n})};const _K={__depends__:[zW,zL,w5],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",Ef],alignElementsMenuProvider:["type",Qp],bpmnAlignElements:["type",Hy]};var wK=10,cO=50,xK=250;function x5(e,t,n,r){for(var i;i=EK(e,n,t);)n=r(t,n,i);return n}function E5(e){return function(t,n,r){var i={x:n.x,y:n.y};return["x","y"].forEach(function(o){var a=e[o];if(a){var s=o==="x"?"width":"height",l=a.margin,c=a.minDistance;l<0?i[o]=Math.min(r[o]+l-t[s]/2,n[o]-c+l):i[o]=Math.max(r[o]+r[s]+l+t[s]/2,n[o]+c+l)}}),i}}function EK(e,t,n){var r={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},i=NK(e);return Vt(i,function(o){if(o===n)return!1;var a=ti(o,r,wK);return a==="intersect"})}function SK(e,t){t||(t={});function n(m){return m.source===e?1:-1}var r=t.defaultDistance||cO,i=t.direction||"e",o=t.filter,a=t.getWeight||n,s=t.maxDistance||xK,l=t.reference||"start";o||(o=CK);function c(m,v){return i==="n"?l==="start"?at(m).top-at(v).bottom:l==="center"?at(m).top-ht(v).y:at(m).top-at(v).top:i==="w"?l==="start"?at(m).left-at(v).right:l==="center"?at(m).left-ht(v).x:at(m).left-at(v).left:i==="s"?l==="start"?at(v).top-at(m).bottom:l==="center"?ht(v).y-at(m).bottom:at(v).bottom-at(m).bottom:l==="start"?at(v).left-at(m).right:l==="center"?ht(v).x-at(m).right:at(v).right-at(m).right}var u=e.incoming.filter(o).map(function(m){var v=a(m),b=v<0?c(m.source,e):c(e,m.source);return{id:m.source.id,distance:b,weight:v}}),d=e.outgoing.filter(o).map(function(m){var v=a(m),b=v>0?c(e,m.target):c(m.target,e);return{id:m.target.id,distance:b,weight:v}}),h=u.concat(d).reduce(function(m,v){return m[v.id+"__weight_"+v.weight]=v,m},{}),f=Bi(h,function(m,v){var b=v.distance,y=v.weight;return b<0||b>s||(m[String(b)]||(m[String(b)]=0),m[String(b)]+=1*y,(!m.distance||m[m.distance]<m[String(b)])&&(m.distance=b)),m},{});return f.distance||r}function NK(e){var t=mb(e);return e.host&&(t=t.concat(mb(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,r){return n.concat(mb(r))},[]))),t}function mb(e){return kK(e).concat(AK(e))}function AK(e){return e.incoming.map(function(t){return t.source})}function kK(e){return e.outgoing.map(function(t){return t.target})}function CK(){return!0}var PK=100;function uO(e,t,n){e.on("autoPlace",PK,function(r){var i=r.shape,o=r.source;return TK(o,i)}),e.on("autoPlace.end",function(r){n.scrollToElement(r.shape)}),this.append=function(r,i,o){e.fire("autoPlace.start",{source:r,shape:i});var a=e.fire("autoPlace",{source:r,shape:i}),s=t.appendShape(r,i,a,r.parent,o);return e.fire("autoPlace.end",{source:r,shape:s}),s}}uO.$inject=["eventBus","modeling","canvas"];function TK(e,t,n){n||(n={});var r=n.defaultDistance||cO,i=ht(e),o=at(e);return{x:o.right+r+t.width/2,y:i.y}}function dO(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}dO.$inject=["eventBus","selection"];const RK={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",uO],autoPlaceSelectionBehavior:["type",dO]};function tf(e,t){for(ji(t)&&(t=[t]);e=e.parent;)if(Pt(e,t))return e;return null}function fO(e,t){var n=tf(e,"bpmn:Process");if(n)return!0;var r=["bpmn:Participant","bpmn:Lane"];if(n=tf(e,r),n)return br(n);if(Pt(e,r))return br(e);var i;for(i=Ue(e);i&&!B(i,"bpmn:Process");i=i.$parent);if(!t)return!0;var o=t.find(function(a){var s=Ue(a);return s&&s.get("processRef")===i});return o?br(o):!0}function hO(e,t,n){var r=fO(e,n);if(B(t,"bpmn:TextAnnotation"))return OK(e,t,r);if(Pt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return MK(e,t,r);if(B(t,"bpmn:FlowNode"))return LK(e,t,r)}function LK(e,t,n){var r=at(e),i=ht(e),o=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},a=SK(e,{filter:function(f){return B(f,"bpmn:SequenceFlow")},direction:o.directionHint}),s=30,l=o.minDistance,c=o.baseOrientation;B(e,"bpmn:BoundaryEvent")&&(c=ti(e,e.host,-25),c.indexOf(o.boundaryOrientation)!==-1&&(s*=-1));var u=n?{x:r.right+a+t.width/2,y:i.y+x3(c,l,o)}:{x:i.x+x3(c,l,o),y:r.bottom+a+t.height/2},d={margin:s,minDistance:l},h=n?{y:d}:{x:d};return x5(e,t,u,E5(h))}function x3(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function OK(e,t,n){var r=at(e),i=n?{x:r.right+t.width/2,y:r.top-50-t.height/2}:{x:r.right+50+t.width/2,y:r.bottom+t.height/2};on(e)&&(i=ht(e),n?(i.x+=100,i.y-=50):(i.x+=100,i.y+=50));var o={margin:n?-30:30,minDistance:20},a=n?{y:o}:{x:o};return x5(e,t,i,E5(a))}function MK(e,t,n){var r=at(e),i=n?{x:r.right-10+t.width/2,y:r.bottom+40+t.width/2}:{x:r.left-40-t.width/2,y:r.bottom-10+t.height/2},o={margin:30,minDistance:30},a=n?{x:o}:{y:o};return x5(e,t,i,E5(a))}function pO(e,t){e.on("autoPlace",function(n){var r=n.shape,i=n.source;return hO(i,r,t)})}pO.$inject=["eventBus","elementRegistry"];const S5={__depends__:[RK],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",pO]};function $s(e,t,n,r){Fe.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=r;var i=this;this.postExecuted(["shape.create"],function(o){var a=o.context,s=a.hints||{},l=a.shape,c=a.parent||a.newParent;s.autoResize!==!1&&i._expand([l],c)}),this.postExecuted(["elements.move"],function(o){var a=o.context,s=Gx(qx(a.closure.topLevel)),l=a.hints,c=l?l.autoResize:!0;if(c!==!1){var u=pf(s,function(d){return d.parent.id});le(u,function(d,h){bt(c)&&(d=d.filter(function(f){return Vt(c,la({id:f.id}))})),i._expand(d,h)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var a=o.context,s=a.hints,l=a.shape;s&&s.autoResize===!1||l.collapsed||i._expand(l.children||[],l)}),this.postExecuted(["shape.resize"],function(o){var a=o.context,s=a.hints,l=a.shape,c=l.parent;s&&s.autoResize===!1||c&&i._expand([l],c)})}$s.$inject=["eventBus","elementRegistry","modeling","rules"];We($s,Fe);$s.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),r=this.getPadding(t),i=at(yr(e)),o=at(t),a={};return i.top-o.top<r.top&&(a.top=i.top-n.top),i.left-o.left<r.left&&(a.left=i.left-n.left),o.right-i.right<r.right&&(a.right=i.right+n.right),o.bottom-i.bottom<r.bottom&&(a.bottom=i.bottom+n.bottom),Cy(be({},o,a))};$s.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var r=this._getOptimalBounds(e,t);if(IK(r,t)){var i=DK(Ls(t,["x","y","width","height"]),r);this.resize(t,r,{autoResize:i});var o=t.parent;o&&this._expand([t],o)}}};$s.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};$s.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};$s.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function IK(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function DK(e,t){var n="";return e=at(e),t=at(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function Vy(e){e.invoke($s,this)}Vy.$inject=["injector"];We(Vy,$s);Vy.prototype.resize=function(e,t,n){B(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function em(e){Bo.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}em.$inject=["eventBus"];We(em,Bo);em.prototype.canResize=function(e,t){return!1};function Wy(e,t){em.call(this,e),this._modeling=t}We(Wy,em);Wy.$inject=["eventBus","modeling"];Wy.prototype.canResize=function(e,t){if(B(t.di,"bpmndi:BPMNPlane")||!B(t,"bpmn:Participant")&&!B(t,"bpmn:Lane")&&!B(t,"bpmn:SubProcess"))return!1;var n=!0;return le(e,function(r){if(B(r,"bpmn:Lane")||Gt(r)){n=!1;return}}),n};const jK={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Vy],bpmnAutoResizeProvider:["type",Wy]};var E3=1500;function mO(e,t,n){var r=this,i=n.get("dragging",!1);function o(a){if(!a.hover){var s=a.originalEvent,l=r._findTargetGfx(s),c=l&&e.get(l);l&&c&&(a.stopPropagation(),i.hover({element:c,gfx:l}),i.move(s))}}i&&t.on("drag.start",function(a){t.once("drag.move",E3,function(s){o(s)})}),function(){var a,s;t.on("element.hover",function(l){a=l.gfx,s=l.element}),t.on("element.hover",E3,function(l){s&&t.fire("element.out",{element:s,gfx:a})}),t.on("element.out",function(){a=null,s=null})}(),this._findTargetGfx=function(a){var s,l;if(a instanceof MouseEvent)return s=vu(a),l=document.elementFromPoint(s.x,s.y),BK(l)}}mO.$inject=["elementRegistry","eventBus","injector"];function BK(e){return Jl(e,"svg, .djs-element",!0)}const FK={__init__:["hoverFix"],hoverFix:["type",mO]};var id=Math.round,S3="djs-drag-active";function Dc(e){e.preventDefault()}function $K(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function UK(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function gO(e,t,n,r){var i={threshold:5,trapClick:!0},o;function a(_){var w=t.viewbox(),R=t._container.getBoundingClientRect();return{x:w.x+(_.x-R.left)/w.scale,y:w.y+(_.y-R.top)/w.scale}}function s(_,w){w=w||o;var R=e.createEvent(be({},w.payload,w.data,{isTouch:w.isTouch}));return e.fire("drag."+_,R)===!1?!1:e.fire(w.prefix+"."+_,R)}function l(_){var w=_.filter(function(R){return r.get(R.id)});w.length&&n.select(w)}function c(_,w){var R=o.payload,I=o.displacement,q=o.globalStart,T=vu(_),D=ca(T,q),M=o.localStart,C=a(T),j=ca(C,M);if(!o.active&&(w||UK(D)>o.threshold)){if(be(R,{x:id(M.x+I.x),y:id(M.y+I.y),dx:0,dy:0},{originalEvent:_}),s("start")===!1)return b();o.active=!0,o.keepSelection||(R.previousSelection=n.get(),n.select(null)),o.cursor&&$y(o.cursor),t.addMarker(t.getRootElement(),S3)}db(_),o.active&&(be(R,{x:id(C.x+I.x),y:id(C.y+I.y),dx:id(j.x),dy:id(j.y)},{originalEvent:_}),s("move"))}function u(_){var w,R=!0;o.active&&(_&&(o.payload.originalEvent=_,db(_)),R=s("end")),R===!1&&s("rejected"),w=y(R!==!0),s("ended",w)}function d(_){gr("Escape",_)&&(Dc(_),b())}function h(_){var w;o.active&&(w=DL(e),setTimeout(w,400),Dc(_)),u(_)}function f(_){c(_)}function m(_){var w=o.payload;w.hoverGfx=_.gfx,w.hover=_.element,s("hover")}function v(_){s("out");var w=o.payload;w.hoverGfx=null,w.hover=null}function b(_){var w;if(o){var R=o.active;R&&s("cancel"),w=y(_),R&&s("canceled",w)}}function y(_){var w,R;s("cleanup"),IL(),o.trapClick?R=h:R=u,Ht.unbind(document,"mousemove",c),Ht.unbind(document,"dragstart",Dc),Ht.unbind(document,"selectstart",Dc),Ht.unbind(document,"mousedown",R,!0),Ht.unbind(document,"mouseup",R,!0),Ht.unbind(document,"keyup",d),Ht.unbind(document,"touchstart",f,!0),Ht.unbind(document,"touchcancel",b,!0),Ht.unbind(document,"touchmove",c,!0),Ht.unbind(document,"touchend",u,!0),e.off("element.hover",m),e.off("element.out",v),t.removeMarker(t.getRootElement(),S3);var I=o.payload.previousSelection;return _!==!1&&I&&!n.get().length&&l(I),w=o,o=null,w}function x(_,w,R,I){o&&b(!1),typeof w=="string"&&(I=R,R=w,w=null),I=be({},i,I||{});var q=I.data||{},T,D,M,C,j;I.trapClick?C=h:C=u,_?(T=yf(_)||_,D=vu(_),db(_),T.type==="dragstart"&&Dc(T)):(T=null,D={x:0,y:0}),M=a(D),w||(w=M),j=$K(T),o=be({prefix:R,data:q,payload:{},globalStart:D,displacement:ca(w,M),localStart:M,isTouch:j},I),I.manual||(j?(Ht.bind(document,"touchstart",f,!0),Ht.bind(document,"touchcancel",b,!0),Ht.bind(document,"touchmove",c,!0),Ht.bind(document,"touchend",u,!0)):(Ht.bind(document,"mousemove",c),Ht.bind(document,"dragstart",Dc),Ht.bind(document,"selectstart",Dc),Ht.bind(document,"mousedown",C,!0),Ht.bind(document,"mouseup",C,!0)),Ht.bind(document,"keyup",d),e.on("element.hover",m),e.on("element.out",v)),s("init"),I.autoActivate&&c(_,!0)}e.on("diagram.destroy",b),this.init=x,this.move=c,this.hover=m,this.out=v,this.end=u,this.cancel=b,this.context=function(){return o},this.setOptions=function(_){be(i,_)}}gO.$inject=["eventBus","canvas","selection","elementRegistry"];const Us={__depends__:[FK,qa],dragging:["type",gO]};function Sf(e,t,n){this._canvas=n,this._opts=be({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var r=this;t.on("drag.move",function(i){var o=r._toBorderPoint(i);r.startScroll(o)}),t.on(["drag.cleanup"],function(){r.stopScroll()})}Sf.$inject=["config.autoScroll","eventBus","canvas"];Sf.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,r=this,i=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,i.width-e.x,i.height-e.y];this.stopScroll();for(var a=0,s=0,l=0;l<4;l++)zK(o[l],n.scrollThresholdOut[l],n.scrollThresholdIn[l])&&(l===0?a=n.scrollStep:l==1?s=n.scrollStep:l==2?a=-n.scrollStep:l==3&&(s=-n.scrollStep));(a!==0||s!==0)&&(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){r.startScroll(e)},n.scrollRepeatTimeout))};function zK(e,t,n){return t<e&&e<n}Sf.prototype.stopScroll=function(){clearTimeout(this._scrolling)};Sf.prototype.setOptions=function(e){this._opts=be({},this._opts,e)};Sf.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=vu(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const GK={__depends__:[Us],__init__:["autoScroll"],autoScroll:["type",Sf]};function N5(e){this._commandStack=e.get("commandStack",!1)}N5.$inject=["injector"];N5.prototype.allowed=function(e,t){var n=!0,r=this._commandStack;return r&&(n=r.canExecute(e,t)),n===void 0?!0:n};const Va={__init__:["rules"],rules:["type",N5]};var qg=Math.round,qK=Math.max;function HK(e,t){var n=e.x,r=e.y;return[["M",n,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function VK(e){var t=[];return e.forEach(function(n,r){t.push([r===0?"M":"L",n.x,n.y])}),t}var vO=10;function WK(e,t){var n,r;for(n=0;r=e[n];n++)if(Vp(r,t)<=vO)return{point:e[n],bendpoint:!0,index:n};return null}function KK(e,t){var n=j6(HK(t,vO),VK(e)),r=n[0],i=n[n.length-1],o;return r?r!==i?r.segment2!==i.segment2?(o=qK(r.segment2,i.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:qg(r.x+i.x)/2,y:qg(r.y+i.y)/2},index:r.segment2}:{point:{x:qg(r.x),y:qg(r.y)},index:r.segment2}:null}function vw(e,t){return WK(e,t)||KK(e,t)}function yO(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function N3(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function YK(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function JK(e,t,n){var r=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],i=r[0].n*t[0]+r[1].n*t[1],o=r[0].lambda*t[0]+r[1].lambda*t[1];return-i/o}function A5(e,t){var n=t[0],r=t[1],i={x:r.x-n.x,y:r.y-n.y},o=JK([n.x,n.y],[i.x,i.y],[e.x,e.y]);return{x:n.x+o*i.x,y:n.y+o*i.y}}function bO(e,t){var n=A5(e,t),r={x:n.x-e.x,y:n.y-e.y};return yO(r)}function Fv(e,t){return yO({x:e.x-t.x,y:e.y-t.y})}var _O="djs-bendpoint",wO="djs-segment-dragger";function XK(e,t){var n=vu(t),r=e._container.getBoundingClientRect(),i;i={x:r.left,y:r.top};var o=e.viewbox();return{x:o.x+(n.x-i.x)/o.scale,y:o.y+(n.y-i.y)/o.scale}}function yw(e,t,n){var r=XK(e,n),i=vw(t,r);return i}function bw(e,t){var n=Qe("g");Ut(n).add(_O),pt(e,n);var r=Qe("circle");He(r,{cx:0,cy:0,r:4}),Ut(r).add("djs-visual"),pt(n,r);var i=Qe("circle");return He(i,{cx:0,cy:0,r:10}),Ut(i).add("djs-hit"),pt(n,i),t&&Ut(n).add(t),n}function ZK(e,t,n,r){var i=Qe("g");pt(e,i);var o=18,a=6,s=11,l=eY(t,n,r),c=a+s,u=Qe("rect");He(u,{x:-o/2,y:-a/2,width:o,height:a}),Ut(u).add("djs-visual"),pt(i,u);var d=Qe("rect");return He(d,{x:-l/2,y:-c/2,width:l,height:c}),Ut(d).add("djs-hit"),pt(i,d),X6(i,r==="v"?90:0),i}function xO(e,t,n){var r=Qe("g"),i=nw(t,n),o=xs(t,n);return pt(e,r),ZK(r,t,n,o),Ut(r).add(wO),Ut(r).add(o==="h"?"horizontal":"vertical"),Dr(r,i.x,i.y),r}function _w(e){return Math.abs(Math.round(e*2/3))}function QK(e,t){var n=tY(e,t);return A5(e,n)}function eY(e,t,n){var r=t.x-e.x,i=t.y-e.y;return _w(n==="h"?r:i)}function tY(e,t){for(var n=t.waypoints,r=1/0,i,o=0;o<n.length-1;o++){var a=n[o],s=n[o+1],l=bO(e,[a,s]);l<r&&(r=l,i=o)}return[n[i],n[i+1]]}function EO(e,t,n,r,i){function o(_,w,R){var I=_.index,q=_.point,T,D,M,C,j,z;return I<=0||_.bendpoint?!1:(T=w[I-1],D=w[I],M=nw(T,D),C=xs(T,D),j=Math.abs(q.x-M.x),z=Math.abs(q.y-M.y),C&&j<=R&&z<=R)}function a(_,w){var R=_.waypoints,I,q,T,D;return w.index<=0||w.bendpoint||(I={start:R[w.index-1],end:R[w.index]},q=xs(I.start,I.end),!q)?null:(q==="h"?T=I.end.x-I.start.x:T=I.end.y-I.start.y,D=_w(T)/2,D)}function s(_,w){var R=w.waypoints,I=yw(t,R,_),q;if(I)return q=a(w,I),o(I,R,q)?i.start(_,w,I.index):r.start(_,w,I.index,!I.bendpoint),!0}function l(_,w,R){Ht.bind(_,w,function(I){n.triggerMouseEvent(w,I,R),I.stopPropagation()})}function c(_,w){var R=t.getLayer("overlays"),I=rn('.djs-bendpoints[data-element-id="'+Tp(_.id)+'"]',R);return!I&&w&&(I=Qe("g"),He(I,{"data-element-id":_.id}),Ut(I).add("djs-bendpoints"),pt(R,I),l(I,"mousedown",_),l(I,"click",_),l(I,"dblclick",_)),I}function u(_,w){return rn('.djs-segment-dragger[data-segment-idx="'+_+'"]',w)}function d(_,w){w.waypoints.forEach(function(R,I){var q=bw(_);pt(_,q),Dr(q,R.x,R.y)}),bw(_,"floating")}function h(_,w){for(var R=w.waypoints,I,q,T,D=1;D<R.length;D++)I=R[D-1],q=R[D],xs(I,q)&&(T=xO(_,I,q),He(T,{"data-segment-idx":D}),l(T,"mousemove",w))}function f(_){le(Q_("."+_O,_),function(w){cr(w)})}function m(_){le(Q_("."+wO,_),function(w){cr(w)})}function v(_){var w=c(_);return w||(w=c(_,!0),d(w,_),h(w,_)),w}function b(_){var w=c(_);w&&(m(w),f(w),h(w,_),d(w,_))}function y(_,w){var R=rn(".floating",_),I=w.point;R&&Dr(R,I.x,I.y)}function x(_,w,R){var I=u(w.index,_),q=R[w.index-1],T=R[w.index],D=w.point,M=nw(q,T),C=xs(q,T),j,z;I&&(j=nY(I),z={x:D.x-M.x,y:D.y-M.y},C==="v"&&(z={x:z.y,y:z.x}),Dr(j,z.x,z.y))}e.on("connection.changed",function(_){b(_.element)}),e.on("connection.remove",function(_){var w=c(_.element);w&&cr(w)}),e.on("element.marker.update",function(_){var w=_.element,R;w.waypoints&&(R=v(w),_.add?Ut(R).add(_.marker):Ut(R).remove(_.marker))}),e.on("element.mousemove",function(_){var w=_.element,R=w.waypoints,I,q;if(R){if(I=c(w,!0),q=yw(t,R,_.originalEvent),!q)return;y(I,q),q.bendpoint||x(I,q,R)}}),e.on("element.mousedown",function(_){if(tc(_)){var w=_.originalEvent,R=_.element;if(R.waypoints)return s(w,R)}}),e.on("selection.changed",function(_){var w=_.newSelection,R=w[0];R&&R.waypoints&&v(R)}),e.on("element.hover",function(_){var w=_.element;w.waypoints&&(v(w),n.registerEvent(_.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(_){n.unregisterEvent(_.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(_){var w=_.element,R=_.newId;if(w.waypoints){var I=c(w);I&&He(I,{"data-element-id":R})}}),this.addHandles=v,this.updateHandles=b,this.getBendpointsContainer=c,this.getSegmentDragger=u}EO.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function nY(e){return rn(".djs-visual",e)}var A3=Math.round,zc="reconnectStart",Gc="reconnectEnd",bh="updateWaypoints";function k5(e,t,n,r,i,o){this._injector=e,this.start=function(a,s,l,c){var u=n.getGraphics(s),d=s.source,h=s.target,f=s.waypoints,m;!c&&l===0?m=zc:!c&&l===f.length-1?m=Gc:m=bh;var v=m===bh?"connection.updateWaypoints":"connection.reconnect",b=i.allowed(v,{connection:s,source:d,target:h});b===!1&&(b=i.allowed(v,{connection:s,source:h,target:d})),b!==!1&&r.init(a,"bendpoint.move",{data:{connection:s,connectionGfx:u,context:{allowed:b,bendpointIndex:l,connection:s,source:d,target:h,insert:c,type:m}}})},t.on("bendpoint.move.hover",function(a){var s=a.context,l=s.connection,c=l.source,u=l.target,d=a.hover,h=s.type;s.hover=d;var f;if(d){var m=h===bh?"connection.updateWaypoints":"connection.reconnect";if(f=s.allowed=i.allowed(m,{connection:l,source:h===zc?d:c,target:h===Gc?d:u}),f){s.source=h===zc?d:c,s.target=h===Gc?d:u;return}f===!1&&(f=s.allowed=i.allowed(m,{connection:l,source:h===Gc?d:u,target:h===zc?d:c})),f&&(s.source=h===Gc?d:u,s.target=h===zc?d:c)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var s=a.context,l=s.type;s.hover=null,s.source=null,s.target=null,l!==bh&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(a){var s=a.context,l=s.allowed,c=s.bendpointIndex,u=s.connection,d=s.insert,h=u.waypoints.slice(),f=s.source,m=s.target,v=s.type,b=s.hints||{},y={x:A3(a.x),y:A3(a.y)};if(!l)return!1;v===bh?(d?h.splice(c,0,y):h[c]=y,b.bendpointMove={insert:d,bendpointIndex:c},h=this.cropWaypoints(u,h),o.updateWaypoints(u,HG(h),b)):(v===zc?(b.docking="source",$v(s)&&(b.docking="target",b.newWaypoints=h.reverse())):v===Gc&&(b.docking="target",$v(s)&&(b.docking="source",b.newWaypoints=h.reverse())),o.reconnect(u,f,m,y,b))},this)}k5.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];k5.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var r=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=r,t};function $v(e){var t=e.hover,n=e.source,r=e.target,i=e.type;if(i===zc)return t&&r&&t===r&&n!==r;if(i===Gc)return t&&n&&t===n&&n!==r}var rY="reconnectStart",iY="reconnectEnd",k3="updateWaypoints",_h="connect-ok",Hg="connect-not-ok",C3="connect-hover",P3="djs-updating",T3="djs-dragging",R3=1100;function SO(e,t,n,r){this._injector=t;var i=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var a=o.context,s=a.bendpointIndex,l=a.connection,c=a.insert,u=l.waypoints,d=u.slice();a.waypoints=u,c&&d.splice(s,0,{x:o.x,y:o.y}),l.waypoints=d;var h=a.draggerGfx=bw(r.getLayer("overlays"));Ut(h).add("djs-dragging"),r.addMarker(l,T3),r.addMarker(l,P3)}),n.on("bendpoint.move.hover",function(o){var a=o.context,s=a.allowed,l=a.hover,c=a.type;if(l){if(r.addMarker(l,C3),c===k3)return;s?(r.removeMarker(l,Hg),r.addMarker(l,_h)):s===!1&&(r.removeMarker(l,_h),r.addMarker(l,Hg))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],R3,function(o){var a=o.context,s=a.hover,l=a.target;s&&(r.removeMarker(s,C3),r.removeMarker(s,l?_h:Hg))}),n.on("bendpoint.move.move",function(o){var a=o.context,s=a.allowed,l=a.bendpointIndex,c=a.draggerGfx,u=a.hover,d=a.type,h=a.connection,f=h.source,m=h.target,v=h.waypoints.slice(),b={x:o.x,y:o.y},y=a.hints||{},x={};i&&(y.connectionStart&&(x.connectionStart=y.connectionStart),y.connectionEnd&&(x.connectionEnd=y.connectionEnd),d===rY?$v(a)?(x.connectionEnd=x.connectionEnd||b,x.source=m,x.target=u||f,v=v.reverse()):(x.connectionStart=x.connectionStart||b,x.source=u||f,x.target=m):d===iY?$v(a)?(x.connectionStart=x.connectionStart||b,x.source=u||m,x.target=f,v=v.reverse()):(x.connectionEnd=x.connectionEnd||b,x.source=f,x.target=u||m):(x.noCropping=!0,x.noLayout=!0,v[l]=b),d===k3&&(v=e.cropWaypoints(h,v)),x.waypoints=v,i.drawPreview(a,s,x)),Dr(c,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],R3,function(o){var a=o.context,s=a.connection,l=a.draggerGfx,c=a.hover,u=a.target,d=a.waypoints;s.waypoints=d,cr(l),r.removeMarker(s,P3),r.removeMarker(s,T3),c&&(r.removeMarker(c,_h),r.removeMarker(c,u?_h:Hg)),i&&i.cleanUp(a)})}SO.$inject=["bendpointMove","injector","eventBus","canvas"];var L3="connect-hover",O3="djs-updating";function M3(e,t,n){return C5(e,t,e[t]+n)}function C5(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function oY(e,t,n,r){var i=Math.max(t[r],n[r]),o=Math.min(t[r],n[r]),a=20,s=Math.min(Math.max(o+a,e[r]),i-a);return C5(t,r,s)}function NO(e){return e==="x"?"y":"x"}function I3(e,t,n){var r,i;return e.original?e.original:(r=ht(t),i=NO(n),C5(e,i,r[i]))}function AO(e,t,n,r,i,o){var a=e.get("connectionDocking",!1);this.start=function(d,h,f){var m,v=n.getGraphics(h),b=f-1,y=f,x=h.waypoints,_=x[b],w=x[y],R=yw(n,x,d),I,q,T;I=xs(_,w),I&&(q=I==="v"?"x":"y",b===0&&(_=I3(_,h.source,q)),y===x.length-1&&(w=I3(w,h.target,q)),R?T=R.point:T={x:(_.x+w.x)/2,y:(_.y+w.y)/2},m={connection:h,segmentStartIndex:b,segmentEndIndex:y,segmentStart:_,segmentEnd:w,axis:q,dragPosition:T},r.init(d,T,"connectionSegment.move",{cursor:q==="x"?"resize-ew":"resize-ns",data:{connection:h,connectionGfx:v,context:m}}))};function s(d,h){if(!a)return h;var f=d.waypoints,m;return d.waypoints=h,m=a.getCroppedWaypoints(d),d.waypoints=f,m}function l(d){i.update("connection",d.connection,d.connectionGfx)}function c(d,h,f){var m=d.newWaypoints,v=d.segmentStartIndex+h,b=m[v],y=d.segmentEndIndex+h,x=m[y],_=NO(d.axis),w=oY(f,b,x,_);Dr(d.draggerGfx,w.x,w.y)}function u(d,h){var f=0,m=d.filter(function(v,b){return Jx(d[b-1],d[b+1],v)?(f=b<=h?f-1:f,!1):!0});return{waypoints:m,segmentOffset:f}}t.on("connectionSegment.move.start",function(d){var h=d.context,f=d.connection,m=n.getLayer("overlays");h.originalWaypoints=f.waypoints.slice(),h.draggerGfx=xO(m,h.segmentStart,h.segmentEnd),Ut(h.draggerGfx).add("djs-dragging"),n.addMarker(f,O3)}),t.on("connectionSegment.move.move",function(d){var h=d.context,f=h.connection,m=h.segmentStartIndex,v=h.segmentEndIndex,b=h.segmentStart,y=h.segmentEnd,x=h.axis,_=h.originalWaypoints.slice(),w=M3(b,x,d["d"+x]),R=M3(y,x,d["d"+x]),I=_.length,q=0;_[m]=w,_[v]=R;var T,D;m<2&&(T=ti(f.source,w),m===1?T==="intersect"&&(_.shift(),_[0]=w,q--):T!=="intersect"&&(_.unshift(b),q++)),v>I-3&&(D=ti(f.target,R),v===I-2?D==="intersect"&&(_.pop(),_[_.length-1]=R):D!=="intersect"&&_.push(y)),h.newWaypoints=f.waypoints=s(f,_),c(h,q,d),h.newSegmentStartIndex=m+q,l(d)}),t.on("connectionSegment.move.hover",function(d){d.context.hover=d.hover,n.addMarker(d.hover,L3)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(d){var h=d.context.hover;h&&n.removeMarker(h,L3)}),t.on("connectionSegment.move.cleanup",function(d){var h=d.context,f=h.connection;h.draggerGfx&&cr(h.draggerGfx),n.removeMarker(f,O3)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(d){var h=d.context,f=h.connection;f.waypoints=h.originalWaypoints,l(d)}),t.on("connectionSegment.move.end",function(d){var h=d.context,f=h.connection,m=h.newWaypoints,v=h.newSegmentStartIndex;m=m.map(function(R){return{original:R.original,x:Math.round(R.x),y:Math.round(R.y)}});var b=u(m,v),y=b.waypoints,x=s(f,y),_=b.segmentOffset,w={segmentMove:{segmentStartIndex:h.segmentStartIndex,newSegmentStartIndex:v+_}};o.updateWaypoints(f,x,w)})}AO.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var aY=Math.abs,D3=Math.round;function sY(e,t,n){n=n===void 0?10:n;var r,i;for(r=0;r<t.length;r++)if(i=t[r],aY(i-e)<=n)return i}function kO(e){return{x:e.x,y:e.y}}function CO(e){return{x:e.x+e.width,y:e.y+e.height}}function To(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:D3(e.x+e.width/2),y:D3(e.y+e.height/2)}}function nf(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function Kn(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var r,i=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,r=n-i,e[t]+=r,e["d"+t]+=r),i}function PO(e){return e.children||[]}var lY=Math.abs,j3=Math.round,gb=10;function TO(e){function t(o,a){if(bt(o)){for(var s=o.length;s--;)if(lY(o[s]-a)<=gb)return o[s]}else{o=+o;var l=a%o;if(l<gb)return a-l;if(l>o-gb)return a-l+o}return a}function n(o,a){if(o.waypoints)return QK(a,o);if(o.width)return{x:j3(o.width/2+o.x),y:j3(o.height/2+o.y)}}function r(o){var a=o.context,s=a.snapPoints,l=a.connection,c=l.waypoints,u=a.segmentStart,d=a.segmentStartIndex,h=a.segmentEnd,f=a.segmentEndIndex,m=a.axis;if(s)return s;var v=[c[d-1],u,h,c[f+1]];return d<2&&v.unshift(n(l.source,o)),f>c.length-3&&v.unshift(n(l.target,o)),a.snapPoints=s={horizontal:[],vertical:[]},le(v,function(b){b&&(b=b.original||b,m==="y"&&s.horizontal.push(b.y),m==="x"&&s.vertical.push(b.x))}),s}e.on("connectionSegment.move.move",1500,function(o){var a=r(o),s=o.x,l=o.y,c,u;if(a){c=t(a.vertical,s),u=t(a.horizontal,l);var d=s-c,h=l-u;be(o,{dx:o.dx-d,dy:o.dy-h,x:c,y:u}),(d||a.vertical.indexOf(s)!==-1)&&Kn(o,"x",c),(h||a.horizontal.indexOf(l)!==-1)&&Kn(o,"y",u)}});function i(o){var a=o.snapPoints,s=o.connection.waypoints,l=o.bendpointIndex;if(a)return a;var c=[s[l-1],s[l+1]];return o.snapPoints=a={horizontal:[],vertical:[]},le(c,function(u){u&&(u=u.original||u,a.horizontal.push(u.y),a.vertical.push(u.x))}),a}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var a=o.context,s=a.hover,l=s&&n(s,o);!on(s)||!l||!l.x||!l.y||(Kn(o,"x",l.x),Kn(o,"y",l.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var a=o.context,s=i(a),l=a.hover,c=l&&n(l,o),u=o.x,d=o.y,h,f;if(s){h=t(c?s.vertical.concat([c.x]):s.vertical,u),f=t(c?s.horizontal.concat([c.y]):s.horizontal,d);var m=u-h,v=d-f;be(o,{dx:o.dx-m,dy:o.dy-v,x:o.x-m,y:o.y-v}),(m||s.vertical.indexOf(u)!==-1)&&Kn(o,"x",h),(v||s.horizontal.indexOf(d)!==-1)&&Kn(o,"y",f)}})}TO.$inject=["eventBus"];const cY={__depends__:[Us,Va],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",EO],bendpointMove:["type",k5],bendpointMovePreview:["type",SO],connectionSegmentMove:["type",AO],bendpointSnapping:["type",TO]};function RO(e,t,n,r){function i(a,s){return r.allowed("connection.create",{source:a,target:s})}function o(a,s){return i(s,a)}e.on("connect.hover",function(a){var s=a.context,l=s.start,c=a.hover,u;if(s.hover=c,u=s.canExecute=i(l,c),!kp(u)){if(u!==!1){s.source=l,s.target=c;return}u=s.canExecute=o(l,c),!kp(u)&&u!==!1&&(s.source=c,s.target=l)}}),e.on(["connect.out","connect.cleanup"],function(a){var s=a.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(a){var s=a.context,l=s.canExecute,c=s.connectionStart,u={x:a.x,y:a.y},d=s.source,h=s.target;if(!l)return!1;var f=null,m={connectionStart:ww(s)?u:c,connectionEnd:ww(s)?c:u};Tr(l)&&(f=l),s.connection=n.connect(d,h,f,m)}),this.start=function(a,s,l,c){Tr(l)||(c=l,l=ht(s)),t.init(a,"connect",{autoActivate:c,data:{shape:s,context:{start:s,connectionStart:l}}})}}RO.$inject=["eventBus","dragging","modeling","rules"];function ww(e){var t=e.hover,n=e.source,r=e.target;return t&&n&&t===n&&n!==r}var uY=1100,dY=900,B3="connect-ok",F3="connect-not-ok";function LO(e,t,n){var r=e.get("connectionPreview",!1);r&&t.on("connect.move",function(i){var o=i.context,a=o.canExecute,s=o.hover,l=o.source,c=o.start,u=o.startPosition,d=o.target,h=o.connectionStart||u,f=o.connectionEnd||{x:i.x,y:i.y},m=h,v=f;ww(o)&&(m=f,v=h),r.drawPreview(o,a,{source:l||c,target:d||s,connectionStart:m,connectionEnd:v})}),t.on("connect.hover",dY,function(i){var o=i.context,a=i.hover,s=o.canExecute;s!==null&&n.addMarker(a,s?B3:F3)}),t.on(["connect.out","connect.cleanup"],uY,function(i){var o=i.hover;o&&(n.removeMarker(o,B3),n.removeMarker(o,F3))}),r&&t.on("connect.cleanup",function(i){r.cleanUp(i.context)})}LO.$inject=["injector","eventBus","canvas"];const P5={__depends__:[qa,Va,Us],__init__:["connectPreview"],connect:["type",RO],connectPreview:["type",LO]};var fY="djs-dragger";function zs(e,t,n,r){this._canvas=t,this._graphicsFactory=n,this._elementFactory=r,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}zs.$inject=["injector","canvas","graphicsFactory","elementFactory"];zs.prototype.drawPreview=function(e,t,n){n=n||{};var r=e.connectionPreviewGfx,i=e.getConnection,o=n.source,a=n.target,s=n.waypoints,l=n.connectionStart,c=n.connectionEnd,u=n.noLayout,d=n.noCropping,h=n.noNoop,f,m=this;if(r||(r=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Ny(r),i||(i=e.getConnection=hY(function(v,b,y){return m.getConnection(v,b,y)})),t&&(f=i(t,o,a)),!f){!h&&this.drawNoopPreview(r,n);return}f.waypoints=s||[],this._layouter&&!u&&(f.waypoints=this._layouter.layoutConnection(f,{source:o,target:a,connectionStart:l,connectionEnd:c,waypoints:n.waypoints||f.waypoints})),(!f.waypoints||!f.waypoints.length)&&(f.waypoints=[o?ht(o):l,a?ht(a):c]),this._connectionDocking&&(o||a)&&!d&&(f.waypoints=this._connectionDocking.getCroppedWaypoints(f,o,a)),this._graphicsFactory.drawConnection(r,f,{stroke:"var(--element-dragger-color)"})};zs.prototype.drawNoopPreview=function(e,t){var n=t.source,r=t.target,i=t.connectionStart||ht(n),o=t.connectionEnd||ht(r),a=this.cropWaypoints(i,o,n,r),s=this.createNoopConnection(a[0],a[1]);pt(e,s)};zs.prototype.cropWaypoints=function(e,t,n,r){var i=this._graphicsFactory,o=n&&i.getShapePath(n),a=r&&i.getShapePath(r),s=i.getConnectionPath({waypoints:[e,t]});return e=n&&iw(o,s,!0)||e,t=r&&iw(a,s,!1)||t,[e,t]};zs.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&cr(e.connectionPreviewGfx)};zs.prototype.getConnection=function(e){var t=pY(e);return this._elementFactory.createConnection(t)};zs.prototype.createConnectionPreviewGfx=function(){var e=Qe("g");return He(e,{pointerEvents:"none"}),Ut(e).add(fY),pt(this._canvas.getActiveLayer(),e),e};zs.prototype.createNoopConnection=function(e,t){return Ay([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function hY(e){var t={};return function(n){var r=JSON.stringify(n),i=t[r];return i||(i=t[r]=e.apply(null,arguments)),i}}function pY(e){return Tr(e)?e:{}}const mY={__init__:["connectionPreview"],connectionPreview:["type",zs]},gY=new Zp("ps");var vY=["marker-start","marker-mid","marker-end"],yY=["circle","ellipse","line","path","polygon","polyline","path","rect"];function rc(e,t,n,r){this._elementRegistry=e,this._canvas=n,this._styles=r}rc.$inject=["elementRegistry","eventBus","canvas","styles"];rc.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};rc.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};rc.prototype.addDragger=function(e,t,n,r="djs-dragger"){n=n||this.getGfx(e);var i=C6(n),o=n.getBoundingClientRect();return this._cloneMarkers(ou(i),r),He(i,this._styles.cls(r,[],{x:o.top,y:o.left})),pt(t,i),He(i,"data-preview-support-element-id",e.id),i};rc.prototype.addFrame=function(e,t){var n=Qe("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return pt(t,n),He(n,"data-preview-support-element-id",e.id),n};rc.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var r=this;if(e.childNodes)for(var i=0;i<e.childNodes.length;i++)r._cloneMarkers(e.childNodes[i],t,n);xY(e)&&vY.forEach(function(o){if(He(e,o)){var a=bY(e,o,r._canvas.getContainer());a&&r._cloneMarker(n,e,a,o,t)}})};rc.prototype._cloneMarker=function(e,t,n,r,i="djs-dragger"){var o=[n.id,i,gY.next()].join("-"),a=rn("marker#"+n.id,e);e=e||this._canvas._svg;var s=a||C6(n);s.id=o,Ut(s).add(i);var l=rn(":scope > defs",e);l||(l=Qe("defs"),pt(e,l)),pt(l,s);var c=wY(s.id);He(t,r,c)};function bY(e,t,n){var r=_Y(He(e,t));return rn("marker#"+r,n||document)}function _Y(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function wY(e){return"url(#"+e+")"}function xY(e){return yY.indexOf(e.nodeName)!==-1}const Nf={__init__:["previewSupport"],previewSupport:["type",rc]},Vg="complex-preview";class OO{constructor(t,n,r){this._canvas=t,this._graphicsFactory=n,this._previewSupport=r,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:r=[],removed:i=[],resized:o=[]}=t,a=this._canvas.getLayer(Vg);n.filter(s=>!EY(s)).forEach(s=>{let l;on(s)?(l=this._graphicsFactory._createContainer("connection",Qe("g")),this._graphicsFactory.drawConnection(ou(l),s)):(l=this._graphicsFactory._createContainer("shape",Qe("g")),this._graphicsFactory.drawShape(ou(l),s),Dr(l,s.x,s.y)),this._previewSupport.addDragger(s,a,l)}),r.forEach(({element:s,delta:l})=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"]);const c=this._previewSupport.addDragger(s,a);on(s)?Dr(c,l.x,l.y):Dr(c,s.x+l.x,s.y+l.y)}),i.forEach(s=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"])}),o.forEach(({shape:s,bounds:l})=>{this._canvas.addMarker(s,"djs-hidden"),this._markers.push([s,"djs-hidden"]),this._previewSupport.addDragger(s,a,void 0,"djs-dragging");const c=this._graphicsFactory._createContainer("shape",Qe("g"));this._graphicsFactory.drawShape(ou(c),s,{width:l.width,height:l.height}),Dr(c,l.x,l.y),this._previewSupport.addDragger(s,a,c)})}cleanUp(){Ny(this._canvas.getLayer(Vg)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(Vg)}hide(){this._canvas.hideLayer(Vg)}}OO.$inject=["canvas","graphicsFactory","previewSupport"];function EY(e){return e.hidden}const SY={__depends__:[Nf],__init__:["complexPreview"],complexPreview:["type",OO]};var T5=["top","bottom","left","right"],Wg=10;function R5(e,t){Fe.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(i){var o=i.context,a=o.connection,s=a.source,l=a.target,c=o.hints||{};c.createElementsBehavior!==!1&&(n(s),n(l))}),this.postExecuted(["label.create"],function(i){var o=i.context,a=o.shape,s=o.hints||{};s.createElementsBehavior!==!1&&n(a.labelTarget)}),this.postExecuted(["elements.create"],function(i){var o=i.context,a=o.elements,s=o.hints||{};s.createElementsBehavior!==!1&&a.forEach(function(l){n(l)})});function n(i){if(Oy(i)){var o=kY(i);o&&r(i,o)}}function r(i,o){var a=ht(i),s=i.label,l=ht(s);if(s.parent){var c=at(i),u;switch(o){case"top":u={x:a.x,y:c.top-Wg-s.height/2};break;case"left":u={x:c.left-Wg-s.width/2,y:a.y};break;case"bottom":u={x:a.x,y:c.bottom+Wg+s.height/2};break;case"right":u={x:c.right+Wg+s.width/2,y:a.y};break}var d=ca(u,l);t.moveShape(s,d)}}}We(R5,Fe);R5.$inject=["eventBus","modeling"];function NY(e){var t=e.host,n=ht(e),r=ti(n,t),i;r.indexOf("-")>=0?i=r.split("-"):i=[r];var o=T5.filter(function(a){return i.indexOf(a)===-1});return o}function AY(e){var t=ht(e),n=[].concat(e.incoming.map(function(r){return r.waypoints[r.waypoints.length-2]}),e.outgoing.map(function(r){return r.waypoints[1]})).map(function(r){return MO(t,r)});return n}function kY(e){var t=ht(e.label),n=ht(e),r=MO(n,t);if(CY(r)){var i=AY(e);if(e.host){var o=NY(e);i=i.concat(o)}var a=T5.filter(function(s){return i.indexOf(s)===-1});if(a.indexOf(r)===-1)return a[0]}}function MO(e,t){return ti(t,e,5)}function CY(e){return T5.indexOf(e)!==-1}function L5(e){Fe.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,r=t.shape;t.position||(B(r,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-r.height/2}:t.position={x:n.x+n.width+80+r.width/2,y:n.y+n.height/2})},!0)}We(L5,Fe);L5.$inject=["eventBus"];function O5(e,t){e.invoke(Fe,this),this.postExecute("shape.move",function(n){var r=n.newParent,i=n.shape,o=Lt(i.incoming.concat(i.outgoing),function(a){return B(a,"bpmn:Association")});le(o,function(a){t.moveConnection(a,{x:0,y:0},r)})},!0)}We(O5,Fe);O5.$inject=["injector","modeling"];var $3=500;function Ky(e,t){t.invoke(Fe,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",$3,function(r){var i=r.elements;i=i.filter(function(o){var a=o.host;return U3(o,a)}),i.length===1&&i.map(function(o){return i.indexOf(o)}).forEach(function(o){var a=i[o];r.elements[o]=n._replaceShape(i[o],a)})},!0),this.preExecute("elements.move",$3,function(r){var i=r.shapes,o=r.newHost;if(i.length===1){var a=i[0];U3(a,o)&&(r.shapes=[n._replaceShape(a,o)])}},!0)}Ky.$inject=["bpmnReplace","injector"];We(Ky,Fe);Ky.prototype._replaceShape=function(e,t){var n=PY(e),r={type:"bpmn:BoundaryEvent",host:t};return n&&(r.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,r,{layoutConnection:!1})};function PY(e){var t=Ue(e),n=t.eventDefinitions;return n&&n[0]}function U3(e,t){return!Gt(e)&&Pt(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function M5(e,t){Fe.call(this,e);function n(r){return Lt(r.attachers,function(i){return B(i,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(r){var i=r.context.source,o=r.context.target,a=n(o);B(i,"bpmn:EventBasedGateway")&&B(o,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)}),this.postExecute("connection.reconnect",function(r){var i=r.context.oldSource,o=r.context.newSource;B(i,"bpmn:Gateway")&&B(o,"bpmn:EventBasedGateway")&&le(o.outgoing,function(a){var s=a.target,l=n(s);B(s,"bpmn:ReceiveTask")&&l.length>0&&t.removeElements(l)})})}M5.$inject=["eventBus","modeling"];We(M5,Fe);function I5(e,t,n){Fe.call(this,e),this.preExecute("shape.replace",s,!0),this.postExecuted("shape.replace",l,!0),this.preExecute("connection.create",i,!0),this.postExecuted("connection.delete",r,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",a,!0);function r(b){const y=b.source,x=b.target;od(y)&&wh(x)&&u(x)}function i(b){const y=b.connection,x=b.source,_=b.target;od(x)&&Kg(_)&&(c(_),h(x,[y]))}function o(b){const y=b.newTarget,x=b.oldSource,_=b.oldTarget;if(_!==y){const w=x;wh(_)&&u(_),od(w)&&Kg(y)&&c(y)}}function a(b){const{element:y}=b;wh(y)?(d(y),f(y)):Kg(y)&&m(y)}function s(b){const{newData:y,oldShape:x}=b;if(od(b.oldShape)&&y.eventDefinitionType!=="bpmn:CompensateEventDefinition"||y.type!=="bpmn:BoundaryEvent"){const _=x.outgoing.find(({target:w})=>wh(w));_&&_.target&&(b._connectionTarget=_.target)}else if(!od(b.oldShape)&&y.eventDefinitionType==="bpmn:CompensateEventDefinition"&&y.type==="bpmn:BoundaryEvent"){const _=x.outgoing.find(({target:w})=>Kg(w));_&&_.target&&(b._connectionTarget=_.target),v(x)}}function l(b){const{_connectionTarget:y,newShape:x}=b;y&&t.connect(x,y)}function c(b){t.updateProperties(b,{isForCompensation:!0})}function u(b){t.updateProperties(b,{isForCompensation:void 0})}function d(b){for(const y of b.incoming)n.canConnect(y.source,b)||t.removeConnection(y);for(const y of b.outgoing)n.canConnect(b,y.target)||t.removeConnection(y)}function h(b,y){b.outgoing.filter(w=>B(w,"bpmn:Association")).filter(w=>wh(w.target)&&!y.includes(w)).forEach(w=>t.removeConnection(w))}function f(b){const y=b.attachers.slice();y.length&&t.removeElements(y)}function m(b){const y=b.incoming.filter(x=>od(x.source));t.removeElements(y)}function v(b){const y=b.outgoing.filter(x=>B(x,"bpmn:SequenceFlow"));t.removeElements(y)}}We(I5,Fe);I5.$inject=["eventBus","modeling","bpmnRules"];function wh(e){const t=Ue(e);return t&&t.get("isForCompensation")}function od(e){return e&&B(e,"bpmn:BoundaryEvent")&&vf(e,"bpmn:CompensateEventDefinition")}function Kg(e){return e&&B(e,"bpmn:Activity")&&!Qr(e)}function D5(e){e.invoke(Fe,this),this.preExecute("shape.create",1500,function(t){var n=t.context,r=n.parent,i=n.shape;B(r,"bpmn:Lane")&&!B(i,"bpmn:Lane")&&(n.parent=tf(r,"bpmn:Participant"))})}D5.$inject=["injector"];We(D5,Fe);function j5(e,t){Fe.call(this,e),this.preExecute("shape.create",function(n){var r=n.context,i=r.shape;if(B(i,"bpmn:DataObjectReference")&&i.type!=="label"){var o=t.create("bpmn:DataObject");i.businessObject.dataObjectRef=o}})}j5.$inject=["eventBus","bpmnFactory"];We(j5,Fe);var xw=20,Ew=20,IO=30,Yg=2e3;function B5(e,t,n){Fe.call(this,t),t.on(["create.start","shape.move.start"],Yg,function(i){var o=i.context,a=o.shape,s=e.getRootElement();if(!(!B(a,"bpmn:Participant")||!B(s,"bpmn:Process")||!s.children.length)){var l=s.children.filter(function(d){return!B(d,"bpmn:Group")&&!Gt(d)&&!on(d)});if(l.length){var c=yr(l),u=TY(a,c);be(a,u),o.createConstraints=RY(a,c)}}}),t.on("create.start",Yg,function(i){var o=i.context,a=o.shape,s=e.getRootElement(),l=e.getGraphics(s);function c(u){u.element=s,u.gfx=l}B(a,"bpmn:Participant")&&B(s,"bpmn:Process")&&(t.on("element.hover",Yg,c),t.once("create.cleanup",function(){t.off("element.hover",c)}))});function r(){var i=e.getRootElement();return B(i,"bpmn:Collaboration")?i:n.makeCollaboration()}this.preExecute("elements.create",Yg,function(i){var o=i.elements,a=i.parent,s=LY(o),l;s&&B(a,"bpmn:Process")&&(i.parent=r(),l=i.hints=i.hints||{},l.participant=s,l.process=a,l.processRef=Ue(s).get("processRef"))},!0),this.preExecute("shape.create",function(i){var o=i.parent,a=i.shape;B(a,"bpmn:Participant")&&B(o,"bpmn:Process")&&(i.parent=r(),i.process=o,i.processRef=Ue(a).get("processRef"))},!0),this.execute("shape.create",function(i){var o=i.hints||{},a=i.process||o.process,s=i.shape,l=o.participant;a&&(!l||s===l)&&Ue(s).set("processRef",Ue(a))},!0),this.revert("shape.create",function(i){var o=i.hints||{},a=i.process||o.process,s=i.processRef||o.processRef,l=i.shape,c=o.participant;a&&(!c||l===c)&&Ue(l).set("processRef",s)},!0),this.postExecute("shape.create",function(i){var o=i.hints||{},a=i.process||i.hints.process,s=i.shape,l=o.participant;if(a){var c=a.children.slice();l?s===l&&n.moveElements(c,{x:0,y:0},l):n.moveElements(c,{x:0,y:0},s)}},!0)}B5.$inject=["canvas","eventBus","modeling"];We(B5,Fe);function TY(e,t){t={width:t.width+xw*2+IO,height:t.height+Ew*2};var n=Math.max(e.width,t.width),r=Math.max(e.height,t.height);return{x:-n/2,y:-r/2,width:n,height:r}}function RY(e,t){return t=at(t),{bottom:t.top+e.height/2-Ew,left:t.right-e.width/2+xw,top:t.bottom-e.height/2+Ew,right:t.left+e.width/2-xw-IO}}function LY(e){return Vt(e,function(t){return B(t,"bpmn:Participant")})}var z3="__targetRef_placeholder";function F5(e,t){Fe.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],G3(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],G3(o));function n(a,s,l){var c=a.get("dataInputAssociations");return Vt(c,function(u){return u!==l&&u.targetRef===s})}function r(a,s){var l=a.get("properties"),c=Vt(l,function(u){return u.name===z3});return!c&&s&&(c=t.create("bpmn:Property",{name:z3}),dr(l,c)),c}function i(a,s){var l=r(a);l&&(n(a,l,s)||Yn(a.get("properties"),l))}function o(a){var s=a.context,l=s.connection,c=l.businessObject,u=l.target,d=u&&u.businessObject,h=s.newTarget,f=h&&h.businessObject,m=s.oldTarget||s.target,v=m&&m.businessObject,b=l.businessObject,y;v&&v!==d&&i(v,c),f&&f!==d&&i(f,c),d?(y=r(d,!0),b.targetRef=y):b.targetRef=null}}F5.$inject=["eventBus","bpmnFactory"];We(F5,Fe);function G3(e){return function(t){var n=t.context,r=n.connection;if(B(r,"bpmn:DataInputAssociation"))return e(t)}}function Yy(e){this._bpmnUpdater=e}Yy.$inject=["bpmnUpdater"];Yy.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.newSemanticParent,i=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};Yy.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,r=e.oldSemanticParent,i=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,r),this._bpmnUpdater.updateDiParent(n,i),[]};function $5(e,t,n,r){Fe.call(this,r),t.registerHandler("dataStore.updateContainment",Yy);function i(){return n.filter(function(s){return B(s,"bpmn:Participant")&&Ue(s).processRef})[0]}function o(s){return s.children.filter(function(l){return B(l,"bpmn:DataStoreReference")&&!l.labelTarget})}function a(s,l){var c=s.businessObject||s;if(l=l||i(),l){var u=l.businessObject||l;t.execute("dataStore.updateContainment",{dataStoreBo:c,dataStoreDi:zt(s),newSemanticParent:u.processRef||u,newDiParent:zt(l)})}}this.preExecute("shape.create",function(s){var l=s.context,c=l.shape;B(c,"bpmn:DataStoreReference")&&c.type!=="label"&&(l.hints||(l.hints={}),l.hints.autoResize=!1)}),this.preExecute("elements.move",function(s){var l=s.context,c=l.shapes,u=c.filter(function(d){return B(d,"bpmn:DataStoreReference")});u.length&&(l.hints||(l.hints={}),l.hints.autoResize=c.filter(function(d){return!B(d,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(s){var l=s.context,c=l.shape,u=c.parent;B(c,"bpmn:DataStoreReference")&&c.type!=="label"&&B(u,"bpmn:Collaboration")&&a(c)}),this.postExecute("shape.move",function(s){var l=s.context,c=l.shape,u=l.oldParent,d=c.parent;if(!B(u,"bpmn:Collaboration")&&B(c,"bpmn:DataStoreReference")&&c.type!=="label"&&B(d,"bpmn:Collaboration")){var h=B(u,"bpmn:Participant")?u:MY(u,"bpmn:Participant");a(c,h)}}),this.postExecute("shape.delete",function(s){var l=s.context,c=l.shape,u=e.getRootElement();Pt(c,["bpmn:Participant","bpmn:SubProcess"])&&B(u,"bpmn:Collaboration")&&o(u).filter(function(d){return OY(d,c)}).forEach(function(d){a(d)})}),this.postExecute("canvas.updateRoot",function(s){var l=s.context,c=l.oldRoot,u=l.newRoot,d=o(c);d.forEach(function(h){B(u,"bpmn:Process")&&a(h,u)})})}$5.$inject=["canvas","commandStack","elementRegistry","eventBus"];We($5,Fe);function OY(e,t){for(var n=e.businessObject||e,r=t.businessObject||t;n.$parent;){if(n.$parent===r.processRef||r)return!0;n=n.$parent}return!1}function MY(e,t){for(;e.parent;){if(B(e.parent,t))return e.parent;e=e.parent}}var Uv=Math.max,zv=Math.min,IY=20;function DO(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function DY(e,t,n){var r=n.x,i=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+i,o.height=e.height-i):t.indexOf("s")!==-1&&(o.height=e.height+i),t.indexOf("e")!==-1?o.width=e.width+r:t.indexOf("w")!==-1&&(o.x=e.x+r,o.width=e.width-r),o}function jY(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function Jg(e,t,n){var r=t[e],i=n.min&&n.min[e],o=n.max&&n.max[e];return ft(i)&&(r=(/top|left/.test(e)?zv:Uv)(r,i)),ft(o)&&(r=(/top|left/.test(e)?Uv:zv)(r,o)),r}function BY(e,t){if(!t)return e;var n=at(e);return Cy({top:Jg("top",n,t),right:Jg("right",n,t),bottom:Jg("bottom",n,t),left:Jg("left",n,t)})}function FY(e,t,n,r){var i=at(t),o={top:/n/.test(e)?i.bottom-n.height:i.top,left:/w/.test(e)?i.right-n.width:i.left,bottom:/s/.test(e)?i.top+n.height:i.bottom,right:/e/.test(e)?i.left+n.width:i.right},a=r?at(r):o,s={top:zv(o.top,a.top),left:zv(o.left,a.left),bottom:Uv(o.bottom,a.bottom),right:Uv(o.right,a.right)};return Cy(s)}function xh(e,t){return typeof e<"u"?e:IY}function $Y(e,t){var n,r,i,o;return typeof t=="object"?(n=xh(t.left),r=xh(t.right),i=xh(t.top),o=xh(t.bottom)):n=r=i=o=xh(t),{x:e.x-n,y:e.y-i,width:e.width+n+r,height:e.height+i+o}}function UY(e){return!(e.waypoints||e.type==="label")}function jO(e,t){var n;if(e.length===void 0?n=Lt(e.children,UY):n=e,n.length)return $Y(yr(n),t)}var hl=Math.abs;function zY(e,t){return DO(at(t),at(e))}var GY=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],No=30;function Jy(e,t){return t=t||[],e.children.filter(function(n){B(n,"bpmn:Lane")&&(Jy(n,t),t.push(n))}),t}function ic(e){return e.children.filter(function(t){return B(t,"bpmn:Lane")})}function Co(e){return tf(e,GY)||e}function qY(e,t){var n=Co(e),r=B(n,"bpmn:Process")?[]:[n],i=Jy(n,r),o=at(e),a=at(t),s=zY(e,t),l=[],c=br(e);return i.forEach(function(u){if(u!==e){var d=c?0:s.top,h=c?s.right:0,f=c?0:s.bottom,m=c?s.left:0,v=at(u);s.top&&(hl(v.bottom-o.top)<10&&(f=a.top-v.bottom),hl(v.top-o.top)<5&&(d=a.top-v.top)),s.left&&(hl(v.right-o.left)<10&&(h=a.left-v.right),hl(v.left-o.left)<5&&(m=a.left-v.left)),s.bottom&&(hl(v.top-o.bottom)<10&&(d=a.bottom-v.top),hl(v.bottom-o.bottom)<5&&(f=a.bottom-v.bottom)),s.right&&(hl(v.left-o.right)<10&&(m=a.right-v.left),hl(v.right-o.right)<5&&(h=a.right-v.right)),(d||h||f||m)&&l.push({shape:u,newBounds:jY(u,{top:d,right:h,bottom:f,left:m})})}}),l}var HY=500;function U5(e,t){Fe.call(this,e);function n(r,i){var o=br(r),a=ic(i),s=[],l=[],c=[],u=[];if(Su(a,function(b){return o?b.y>r.y?l.push(b):s.push(b):b.x>r.x?u.push(b):c.push(b),b.children}),!!a.length){var d;o?l.length&&s.length?d=r.height/2:d=r.height:u.length&&c.length?d=r.width/2:d=r.width;var h,f,m,v;s.length&&(h=t.calculateAdjustments(s,"y",d,r.y-10),t.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:d},"s")),l.length&&(f=t.calculateAdjustments(l,"y",-d,r.y+r.height+10),t.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:-d},"n")),c.length&&(m=t.calculateAdjustments(c,"x",d,r.x-10),t.makeSpace(m.movingShapes,m.resizingShapes,{x:d,y:0},"e")),u.length&&(v=t.calculateAdjustments(u,"x",-d,r.x+r.width+10),t.makeSpace(v.movingShapes,v.resizingShapes,{x:-d,y:0},"w"))}}this.postExecuted("shape.delete",HY,function(r){var i=r.context,o=i.hints,a=i.shape,s=i.oldParent;B(a,"bpmn:Lane")&&(o&&o.nested||n(a,s))})}U5.$inject=["eventBus","spaceTool"];We(U5,Fe);var q3=500;function Xy(e,t){t.invoke(Fe,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",q3,function(r){var i=r.elements;i.filter(function(o){var a=o.host;return H3(o,a)}).map(function(o){return i.indexOf(o)}).forEach(function(o){r.elements[o]=n._replaceShape(i[o])})},!0),this.preExecute("elements.move",q3,function(r){var i=r.shapes,o=r.newHost;i.forEach(function(a,s){var l=a.host;H3(a,WY(i,l)?l:o)&&(i[s]=n._replaceShape(a))})},!0)}Xy.$inject=["bpmnReplace","injector"];We(Xy,Fe);Xy.prototype._replaceShape=function(e){var t=VY(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function VY(e){var t=Ue(e),n=t.eventDefinitions;return n&&n[0]}function H3(e,t){return!Gt(e)&&B(e,"bpmn:BoundaryEvent")&&!t}function WY(e,t){return e.indexOf(t)!==-1}function z5(e,t,n){Fe.call(this,e);function r(i,o,a){var s=o.waypoints,l,c,u,d,h,f,m,v=i.outgoing.slice(),b=i.incoming.slice(),y;ft(a.width)?y=ht(a):y=a;var x=vw(s,y);if(x){if(l=s.slice(0,x.index),c=s.slice(x.index+(x.bendpoint?1:0)),!l.length||!c.length)return;u=x.bendpoint?s[x.index]:y,(l.length===1||!V3(i,l[l.length-1]))&&l.push(W3(u)),(c.length===1||!V3(i,c[0]))&&c.unshift(W3(u))}d=o.source,h=o.target,t.canConnect(d,i,o)&&(n.reconnectEnd(o,i,l||y),f=o),t.canConnect(i,h,o)&&(f?m=n.connect(i,h,{type:o.type,waypoints:c}):(n.reconnectStart(o,i,c||y),m=o));var _=[].concat(f&&Lt(b,function(w){return w.source===f.source})||[],m&&Lt(v,function(w){return w.target===m.target})||[]);_.length&&n.removeElements(_)}this.preExecute("elements.move",function(i){var o=i.newParent,a=i.shapes,s=i.delta,l=a[0];if(!(!l||!o)){o&&o.waypoints&&(i.newParent=o=o.parent);var c=ht(l),u={x:c.x+s.x,y:c.y+s.y},d=Vt(o.children,function(h){var f=t.canInsert(a,h);return f&&vw(h.waypoints,u)});d&&(i.targetFlow=d,i.position=u)}},!0),this.postExecuted("elements.move",function(i){var o=i.shapes,a=i.targetFlow,s=i.position;a&&r(o[0],a,s)},!0),this.preExecute("shape.create",function(i){var o=i.parent,a=i.shape;t.canInsert(a,o)&&(i.targetFlow=o,i.parent=o.parent)},!0),this.postExecuted("shape.create",function(i){var o=i.shape,a=i.targetFlow,s=i.position;a&&r(o,a,s)},!0)}We(z5,Fe);z5.$inject=["eventBus","bpmnRules","modeling"];function V3(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function W3(e){return be({},e)}function G5(e,t){Fe.call(this,e),this.preExecuted("connection.create",function(n){var r=n.context,i=r.connection,o=r.source,a=r.target,s=r.hints;if(!(s&&s.createElementsBehavior===!1)&&ad(i)){var l=[];B(o,"bpmn:EventBasedGateway")?l=a.incoming.filter(c=>c!==i&&ad(c)):l=a.incoming.filter(c=>c!==i&&ad(c)&&B(c.source,"bpmn:EventBasedGateway")),l.forEach(function(c){t.removeConnection(c)})}}),this.preExecuted("shape.replace",function(n){var r=n.context,i=r.newShape;if(B(i,"bpmn:EventBasedGateway")){var o=i.outgoing.filter(ad).reduce(function(a,s){return a.includes(s.target)?a:a.concat(s.target)},[]);o.forEach(function(a){a.incoming.filter(ad).forEach(function(s){const l=a.incoming.filter(ad).filter(function(c){return c.source===i});(s.source!==i||l.length>1)&&t.removeConnection(s)})})}})}G5.$inject=["eventBus","modeling"];We(G5,Fe);function ad(e){return B(e,"bpmn:SequenceFlow")}var Xg=1500,K3=2e3;function BO(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],Xg,function(r){var i=r.context,o=i.shape||r.shape,a=r.hover;B(a,"bpmn:Lane")&&!Pt(o,["bpmn:Lane","bpmn:Participant"])&&(r.hover=Co(a),r.hoverGfx=e.getGraphics(r.hover));var s=n.getRootElement();a!==s&&(o.labelTarget||Pt(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(r.hover=s,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Xg,function(r){var i=r.hover;B(i,"bpmn:Lane")&&(r.hover=Co(i)||i,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["bendpoint.move.hover"],Xg,function(r){var i=r.context,o=r.hover,a=i.type;B(o,"bpmn:Lane")&&/reconnect/.test(a)&&(r.hover=Co(o)||o,r.hoverGfx=e.getGraphics(r.hover))}),t.on(["connect.start"],Xg,function(r){var i=r.context,o=i.start;B(o,"bpmn:Lane")&&(i.start=Co(o)||o)}),t.on("shape.move.start",K3,function(r){var i=r.shape;B(i,"bpmn:Lane")&&(r.shape=Co(i)||i)}),t.on("spaceTool.move",K3,function(r){var i=r.hover;i&&B(i,"bpmn:Lane")&&(r.hover=Co(i))})}BO.$inject=["elementRegistry","eventBus","canvas"];function KY(e){return e.create("bpmn:Category")}function YY(e){return e.create("bpmn:CategoryValue")}function JY(e,t,n){return dr(t.get("categoryValue"),e),e.$parent=t,dr(n.get("rootElements"),t),t.$parent=n,e}function XY(e){var t=e.$parent;return t&&(Yn(t.get("categoryValue"),e),e.$parent=null),e}function ZY(e){var t=e.$parent;return t&&(Yn(t.get("rootElements"),e),e.$parent=null),e}var Y3=770;function q5(e,t,n,r,i,o){i.invoke(Fe,this);function a(){return n.filter(function(m){return B(m,"bpmn:Group")})}function s(m,v){return m.some(function(b){var y=Ue(b),x=y.categoryValueRef&&y.categoryValueRef.$parent;return x===v})}function l(m,v){return m.some(function(b){var y=Ue(b);return y.categoryValueRef===v})}function c(m,v,b){var y=a().filter(function(x){return x.businessObject!==b});v&&!s(y,v)&&ZY(v),m&&!l(y,m)&&XY(m)}function u(m,v){return JY(m,v,t.getDefinitions())}function d(m,v){var b=Ue(m),y=b.categoryValueRef;y||(y=b.categoryValueRef=v.categoryValue=v.categoryValue||YY(e));var x=y.$parent;x||(x=y.$parent=v.category=v.category||KY(e)),u(y,x,t.getDefinitions())}function h(m,v){var b=v.category,y=v.categoryValue,x=Ue(m);y?(x.categoryValueRef=null,c(y,b,x)):c(null,x.categoryValueRef.$parent,x)}this.execute("label.create",function(m){var v=m.context,b=v.labelTarget;B(b,"bpmn:Group")&&d(b,v)}),this.revert("label.create",function(m){var v=m.context,b=v.labelTarget;B(b,"bpmn:Group")&&h(b,v)}),this.execute("shape.delete",function(m){var v=m.context,b=v.shape,y=Ue(b);if(!(!B(b,"bpmn:Group")||b.labelTarget)){var x=v.categoryValue=y.categoryValueRef,_;x&&(_=v.category=x.$parent,c(x,_,y),y.categoryValueRef=null)}}),this.reverted("shape.delete",function(m){var v=m.context,b=v.shape;if(!(!B(b,"bpmn:Group")||b.labelTarget)){var y=v.category,x=v.categoryValue,_=Ue(b);x&&(_.categoryValueRef=x,u(x,y))}}),this.execute("shape.create",function(m){var v=m.context,b=v.shape;!B(b,"bpmn:Group")||b.labelTarget||Ue(b).categoryValueRef&&d(b,v)}),this.reverted("shape.create",function(m){var v=m.context,b=v.shape;!B(b,"bpmn:Group")||b.labelTarget||Ue(b).categoryValueRef&&h(b,v)});function f(m,v){var b=e.create(m.$type);return o.copyElement(m,b,null,v)}r.on("copyPaste.copyElement",Y3,function(m){var v=m.descriptor,b=m.element;if(!(!B(b,"bpmn:Group")||b.labelTarget)){var y=Ue(b);if(y.categoryValueRef){var x=y.categoryValueRef;v.categoryValue=f(x,!0),x.$parent&&(v.category=f(x.$parent,!0))}}}),r.on("copyPaste.pasteElement",Y3,function(m){var v=m.descriptor,b=v.businessObject,y=v.categoryValue,x=v.category;y&&(y=b.categoryValueRef=f(y)),x&&(y.$parent=f(x)),delete v.category,delete v.categoryValue})}q5.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];We(q5,Fe);function Sw(e,t,n,r){var i,o,a,s,l;return i=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y),i==0?null:(o=e.y-n.y,a=e.x-n.x,l=(r.x-n.x)*o-(r.y-n.y)*a,s=l/i,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function FO(e){function t(r,i,o){var a={x:o.x,y:o.y-50},s={x:o.x-50,y:o.y},l=Sw(r,i,o,a),c=Sw(r,i,o,s),u;l&&c?J3(l,o)>J3(c,o)?u=c:u=l:u=l||c,r.original=u}function n(r){var i=r.waypoints;t(i[0],i[1],ht(r.source)),t(i[i.length-1],i[i.length-2],ht(r.target))}e.on("bpmnElement.added",function(r){var i=r.element;i.waypoints&&n(i)})}FO.$inject=["eventBus"];function J3(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function H5(e){Fe.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var r=n.context.shape,i=Ue(r),o=zt(r);if(Pt(i,t)){var a=o.get("isHorizontal");a===void 0&&(a=!0),o.set("isHorizontal",a)}})}H5.$inject=["eventBus"];We(H5,Fe);var $O=Math.sqrt,UO=Math.min,QY=Math.max,X3=Math.abs;function Z3(e){return Math.pow(e,2)}function Eh(e,t){return $O(Z3(e.x-t.x)+Z3(e.y-t.y))}function eJ(e,t){var n=0,r,i,o,a,s,l,c,u,d,h,f;for(n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],e4(r,i)?c=[r]:(o=Eh(e,r),a=Eh(e,i),l=UO(o,a),c=tJ(r,i,e,l)),c.length<1)throw new Error("expected between [1, 2] circle -> line intersections");c.length===1&&(u={type:"bendpoint",position:c[0],segmentIndex:n,bendpointIndex:e4(r,c[0])?n:n+1}),c.length===2&&(s=rJ(c[0],c[1]),u={type:"segment",position:s,segmentIndex:n,relativeLocation:Eh(r,s)/Eh(r,i)}),d=Eh(u.position,e),(!f||h>d)&&(f=u,h=d)}return f}function tJ(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,l=i*i+o*o,c=i*a+o*s,u=a*a+s*s-r*r,d=c/l,h=u/l,f=d*d-h;if(f<0&&f>-1e-6&&(f=0),f<0)return[];var m=$O(f),v=-d+m,b=-d-m,y={x:e.x-i*v,y:e.y-o*v};if(f===0)return[y];var x={x:e.x-i*b,y:e.y-o*b};return[y,x].filter(function(_){return nJ(_,e,t)})}function nJ(e,t,n){return Q3(e.x,t.x,n.x)&&Q3(e.y,t.y,n.y)}function Q3(e,t,n){return e>=UO(t,n)-Gv&&e<=QY(t,n)+Gv}function rJ(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var Gv=.1;function e4(e,t){return X3(e.x-t.x)<=Gv&&X3(e.y-t.y)<=Gv}function iJ(e,t,n,r){var i=n.segmentIndex,o=t.length-e.length;if(r.segmentMove){var a=r.segmentMove.segmentStartIndex,s=r.segmentMove.newSegmentStartIndex;return i===a?s:i>=s?i+o<s?s:i+o:i}if(r.bendpointMove){var l=r.bendpointMove.insert,c=r.bendpointMove.bendpointIndex,u;if(o===0)return i;if(i>=c&&(u=l?i+1:i-1),i<c&&(u=i,l&&n.type!=="bendpoint"&&c-1===i)){var d=GO(t,c);d<n.relativeLocation&&u++}return u}return o===0?i:r.connectionStart&&i===0?0:r.connectionEnd&&i===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function zO(e,t,n,r){var i=0,o=0,a={point:e,delta:{x:0,y:0}},s=eJ(e,n),l=s.segmentIndex,c=iJ(n,t,s,r);if(c<0||c>t.length-2||c===null)return a;var u=t4(n,l),d=t4(t,c),h=s.position,f=aJ(u,h),m=oJ(u,d);if(s.type==="bendpoint"){var v=t.length-n.length,b=s.bendpointIndex,y=n[b];if(t.indexOf(y)!==-1)return a;if(v===0){var x=t[b];return i=x.x-s.position.x,o=x.y-s.position.y,{delta:{x:i,y:o},point:{x:e.x+i,y:e.y+o}}}v<0&&b!==0&&b<n.length-1&&(f=GO(n,b))}var _={x:(d[1].x-d[0].x)*f+d[0].x,y:(d[1].y-d[0].y)*f+d[0].y},w=YK({x:e.x-h.x,y:e.y-h.y},m);return i=_.x+w.x-e.x,o=_.y+w.y-e.y,{point:Ns(_),delta:Ns({x:i,y:o})}}function GO(e,t){var n=Fv(e[t-1],e[t]),r=Fv(e[t],e[t+1]),i=n/(n+r);return i}function oJ(e,t){var n=N3(e),r=N3(t);return r-n}function t4(e,t){return[e[t],e[t+1]]}function aJ(e,t){var n=Fv(e[0],e[1]),r=Fv(e[0],t);return n===0?0:r/n}function sJ(e,t,n,r){var i=ht(e);return zO(i,t,n,r).delta}function tm(e,t,n){var r=Jh(t),i=Jh(n),o=ca(e,r),a={x:o.x*(n.width/t.width),y:o.y*(n.height/t.height)};return Ns({x:i.x+a.x,y:i.y+a.y})}function n4(e,t,n){var r=Jh(e),i=Jh(t),o=Jh(n),a=ca(e,r),s=ca(r,i),l=lJ(r,t,n);if(l)return l;var c={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},u={x:o.x+c.x,y:o.y+c.y};return Ns({x:u.x+a.x-e.x,y:u.y+a.y-e.y})}function lJ(e,t,n){var r=at(t),i=at(n);if(cJ(r,i))return null;var o=ti(t,e),a,s,l;if(o==="top")a={x:0,y:i.bottom-r.bottom};else if(o==="bottom")a={x:0,y:i.top-r.top};else if(o==="right")a={x:i.left-r.left,y:0};else if(o==="left")a={x:i.right-r.right,y:0};else return null;return s={x:e.x+a.x,y:e.y+a.y},l=ti(n,s),l!==o?null:a}function cJ(e,t){return uJ(e,t)||dJ(e,t)}function uJ(e,t){return e.right!==t.right&&e.left!==t.left}function dJ(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var r4="name",i4="text";function V5(e,t,n,r){Fe.call(this,e),this.postExecute("element.updateProperties",i),this.postExecute("element.updateModdleProperties",a=>{Ue(a.context.element)===a.context.moddleElement&&i(a)});function i(a){var s=a.context,l=s.element,c=s.properties;if(r4 in c&&t.updateLabel(l,c[r4]),i4 in c&&B(l,"bpmn:TextAnnotation")){var u=r.getTextAnnotationBounds({x:l.x,y:l.y,width:l.width,height:l.height},c[i4]||"");t.updateLabel(l,c.text,u)}}this.postExecute(["shape.create","connection.create"],function(a){var s=a.context,l=s.hints||{};if(l.createElementsBehavior!==!1){var c=s.shape||s.connection;Gt(c)||!gu(c)||io(c)&&t.updateLabel(c,io(c))}}),this.postExecute("shape.delete",function(a){var s=a.context,l=s.labelTarget,c=s.hints||{};l&&c.unsetLabel!==!1&&t.updateLabel(l,null,null,{removeShape:!1})});function o(a){var s=a.context,l=s.connection,c=l.label,u=be({},s.hints),d=s.newWaypoints||l.waypoints,h=s.oldWaypoints;return typeof u.startChanged>"u"&&(u.startChanged=!!u.connectionStart),typeof u.endChanged>"u"&&(u.endChanged=!!u.connectionEnd),sJ(c,d,h,u)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var s=a.context,l=s.hints||{};if(l.labelBehavior!==!1){var c=s.connection,u=c.label,d;!u||!u.parent||(d=o(a),t.moveShape(u,d))}}),this.postExecute(["shape.replace"],function(a){var s=a.context,l=s.newShape,c=s.oldShape,u=Ue(l);u&&gu(u)&&c.label&&l.label&&(l.label.x=c.label.x,l.label.y=c.label.y)}),this.postExecute("shape.resize",function(a){var s=a.context,l=s.shape,c=s.newBounds,u=s.oldBounds;if(Oy(l)){var d=l.label,h=ht(d),f=pJ(u),m=hJ(h,f),v=fJ(m,u,c);t.moveShape(d,v)}})}We(V5,Fe);V5.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function fJ(e,t,n){var r=tm(e,t,n);return Ns(ca(r,e))}function hJ(e,t){if(t.length){var n=mJ(e,t);return A5(e,n)}}function pJ(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function mJ(e,t){var n=t.map(function(i){return{line:i,distance:bO(e,i)}}),r=Ua(n,"distance");return r[0].line}function gJ(e,t,n,r){return zO(e,t,n,r).point}function W5(e,t){Fe.call(this,e);function n(r,i){var o=r.context,a=o.connection,s=be({},o.hints),l=o.newWaypoints||a.waypoints,c=o.oldWaypoints;return typeof s.startChanged>"u"&&(s.startChanged=!!s.connectionStart),typeof s.endChanged>"u"&&(s.endChanged=!!s.connectionEnd),gJ(i,l,c,s)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(r){var i=r.context,o=i.connection,a=o.outgoing,s=o.incoming;s.forEach(function(l){var c=l.waypoints[l.waypoints.length-1],u=n(r,c),d=[].concat(l.waypoints.slice(0,-1),[u]);t.updateWaypoints(l,d)}),a.forEach(function(l){var c=l.waypoints[0],u=n(r,c),d=[].concat([u],l.waypoints.slice(1));t.updateWaypoints(l,d)})}),this.postExecute(["connection.move"],function(r){var i=r.context,o=i.connection,a=o.outgoing,s=o.incoming,l=i.delta;s.forEach(function(c){var u=c.waypoints[c.waypoints.length-1],d={x:u.x+l.x,y:u.y+l.y},h=[].concat(c.waypoints.slice(0,-1),[d]);t.updateWaypoints(c,h)}),a.forEach(function(c){var u=c.waypoints[0],d={x:u.x+l.x,y:u.y+l.y},h=[].concat([d],c.waypoints.slice(1));t.updateWaypoints(c,h)})})}We(W5,Fe);W5.$inject=["eventBus","modeling"];function Zy(e,t,n){var r=e1(e),i=HO(r,t),o=r[0];return i.length?i[i.length-1]:tm(o.original||o,n,t)}function Qy(e,t,n){var r=e1(e),i=HO(r,t),o=r[r.length-1];return i.length?i[0]:tm(o.original||o,n,t)}function K5(e,t,n){var r=e1(e),i=qO(t,n),o=r[0];return tm(o.original||o,i,t)}function Y5(e,t,n){var r=e1(e),i=qO(t,n),o=r[r.length-1];return tm(o.original||o,i,t)}function qO(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function e1(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function HO(e,t){var n=Zr(e,yJ);return Lt(n,function(r){return vJ(r,t)})}function vJ(e,t){return ti(t,e,1)==="intersect"}function yJ(e){return e.original||e}function J5(e,t){Fe.call(this,e),this.postExecute("shape.replace",function(n){var r=n.oldShape,i=n.newShape;if(bJ(r,i)){var o=_J(r);o.incoming.forEach(function(a){var s=Qy(a,i,r);t.reconnectEnd(a,i,s)}),o.outgoing.forEach(function(a){var s=Zy(a,i,r);t.reconnectStart(a,i,s)})}},!0)}J5.$inject=["eventBus","modeling"];We(J5,Fe);function bJ(e,t){return B(e,"bpmn:Participant")&&Dt(e)&&B(t,"bpmn:Participant")&&!Dt(t)}function _J(e){var t=Hp([e],!1),n=[],r=[];return t.forEach(function(i){i!==e&&(i.incoming.forEach(function(o){B(o,"bpmn:MessageFlow")&&n.push(o)}),i.outgoing.forEach(function(o){B(o,"bpmn:MessageFlow")&&r.push(o)}))},[]),{incoming:n,outgoing:r}}const wJ=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function VO(e){const t=Ue(e);if(!B(t,"bpmn:BoundaryEvent")&&!(B(t,"bpmn:StartEvent")&&Qr(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:wJ.some(r=>B(n[0],r))}function WO(e){return B(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function X5(e,t){e.invoke(Fe,this),this.postExecuted("shape.replace",function(n){const r=n.context.oldShape,i=n.context.newShape,o=n.context.hints;if(!VO(i))return;const a=WO(i);if(o.targetElement&&o.targetElement[a]!==void 0)return;const l=Ue(r).get(a),c=Ue(i).get(a);l!==c&&t.updateProperties(i,{[a]:l})})}X5.$inject=["injector","modeling"];We(X5,Fe);function Z5(e,t){Fe.call(this,e),this.preExecute("shape.resize",function(n){var r=n.shape,i=zt(r),o=i&&i.get("label"),a=o&&o.get("bounds");a&&t.updateModdleProperties(r,o,{bounds:void 0})},!0)}We(Z5,Fe);Z5.$inject=["eventBus","modeling"];function Q5(e,t,n){Fe.call(this,e),this.preExecute("shape.delete",function(r){var i=r.context.shape;if(!(i.incoming.length!==1||i.outgoing.length!==1)){var o=i.incoming[0],a=i.outgoing[0];if(!(!B(o,"bpmn:SequenceFlow")||!B(a,"bpmn:SequenceFlow"))&&t.canConnect(o.source,a.target,o)){var s=xJ(o.waypoints,a.waypoints);n.reconnectEnd(o,a.target,s)}}})}We(Q5,Fe);Q5.$inject=["eventBus","bpmnRules","modeling"];function sd(e){return e.original||e}function xJ(e,t){var n=Sw(sd(e[e.length-2]),sd(e[e.length-1]),sd(t[1]),sd(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[sd(e[0]),sd(t[t.length-1])]}function eE(e,t){Fe.call(this,e),this.preExecute("shape.delete",function(n){var r=n.shape,i=r.parent;B(r,"bpmn:Participant")&&(n.collaborationRoot=i)},!0),this.postExecute("shape.delete",function(n){var r=n.collaborationRoot;if(r&&!r.businessObject.participants.length){var i=t.makeProcess(),o=r.children.slice();t.moveElements(o,{x:0,y:0},i)}},!0)}eE.$inject=["eventBus","modeling"];We(eE,Fe);function tE(e,t,n,r){Fe.call(this,e);var i=r.get("dragging",!1);function o(l){var c=l.source,u=l.target,d=l.parent;if(d){var h,f;B(l,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(c,u)||(f=!0),n.canConnectMessageFlow(c,u)&&(h="bpmn:MessageFlow")),B(l,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(c,u)||(f=!0),n.canConnectSequenceFlow(c,u)&&(h="bpmn:SequenceFlow")),f&&t.removeConnection(l),h&&t.connect(c,u,{type:h,waypoints:l.waypoints.slice()})}}function a(l){var c=l.context,u=c.connection,d=c.newSource||u.source,h=c.newTarget||u.target,f,m;f=n.canConnect(d,h),!(!f||f.type===u.type)&&(m=t.connect(d,h,{type:f.type,associationDirection:f.associationDirection,waypoints:u.waypoints.slice()}),u.parent&&t.removeConnection(u),c.connection=m,i&&s(u,m))}function s(l,c){var u=i.context(),d=u&&u.payload.previousSelection,h;!d||!d.length||(h=d.indexOf(l),h!==-1&&d.splice(h,1,c))}this.postExecuted("elements.move",function(l){var c=l.closure,u=c.allConnections;le(u,o)},!0),this.preExecute("connection.reconnect",a),this.postExecuted("element.updateProperties",function(l){var c=l.context,u=c.properties,d=c.element,h=d.businessObject,f;u.default&&(f=Vt(d.outgoing,la({id:d.businessObject.default.id})),f&&t.updateProperties(f,{conditionExpression:void 0})),u.conditionExpression&&h.sourceRef.default===h&&t.updateProperties(d.source,{default:void 0})})}We(tE,Fe);tE.$inject=["eventBus","modeling","bpmnRules","injector"];function t1(e,t,n,r,i,o){r.invoke(Fe,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(a){var s=a.context,l=s.parent,c=s.elements,u=Bi(c,function(d,h){var f=t.canReplace([h],h.host||h.parent||l);return f?d.concat(f.replacements):d},[]);u.length&&this._replaceElements(c,u)},this),this.postExecuted(["elements.move"],500,function(a){var s=a.context,l=s.newParent,c=s.newHost,u=[];le(s.closure.topLevel,function(h){Qr(h)?u=u.concat(h.children):u=u.concat(h)}),u.length===1&&c&&(l=c);var d=t.canReplace(u,l);d&&this._replaceElements(u,d.replacements,c)},this),this.postExecute(["shape.replace"],1500,function(a){var s=a.context,l=s.oldShape,c=s.newShape,u=l.attachers,d;u&&u.length&&(d=t.canReplace(u,c),this._replaceElements(u,d.replacements))},this),this.postExecuted(["shape.replace"],1500,function(a){var s=a.context,l=s.oldShape,c=s.newShape;i.unclaimId(l.businessObject.id,l.businessObject),i.updateProperties(c,{id:l.id})})}We(t1,Fe);t1.prototype._replaceElements=function(e,t){var n=this._elementRegistry,r=this._bpmnReplace,i=this._selection;le(t,function(o){var a={type:o.newElementType},s=n.get(o.oldElementId),l=e.indexOf(s);e[l]=r.replaceElement(s,a,{select:!1})}),t&&i.select(e)};t1.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var EJ=1500,SJ={width:140,height:120},nE={width:300,height:60},rE={width:60,height:300},$0={width:300,height:150},U0={width:150,height:300},KO={width:140,height:120},YO={width:50,height:30};function JO(e){e.on("resize.start",EJ,function(t){var n=t.context,r=n.shape,i=n.direction,o=n.balanced;(B(r,"bpmn:Lane")||B(r,"bpmn:Participant"))&&(n.resizeConstraints=PJ(r,i,o)),B(r,"bpmn:SubProcess")&&Dt(r)&&(n.minDimensions=KO),B(r,"bpmn:TextAnnotation")&&(n.minDimensions=YO)})}JO.$inject=["eventBus"];var pl=Math.abs,NJ=Math.min,AJ=Math.max;function XO(e,t,n,r){var i=e[t];e[t]=i===void 0?n:r(n,i)}function ld(e,t,n){return XO(e,t,n,NJ)}function cd(e,t,n){return XO(e,t,n,AJ)}var kJ={top:20,left:50,right:20,bottom:20},CJ={top:50,left:20,right:20,bottom:20};function PJ(e,t,n){var r=Co(e),i=!0,o=!0,a=Jy(r,[r]),s=at(e),l={},c={},u=br(e),d=u?nE:rE;/n/.test(t)?c.top=s.bottom-d.height:/e/.test(t)?c.right=s.left+d.width:/s/.test(t)?c.bottom=s.top+d.height:/w/.test(t)&&(c.left=s.right-d.width),a.forEach(function(m){var v=at(m);u?(v.top<s.top-10&&(i=!1),v.bottom>s.bottom+10&&(o=!1)):(v.left<s.left-10&&(i=!1),v.right>s.right+10&&(o=!1)),/n/.test(t)&&(n&&pl(s.top-v.bottom)<10&&cd(l,"top",v.top+d.height),pl(s.top-v.top)<5&&ld(c,"top",v.bottom-d.height)),/e/.test(t)&&(n&&pl(s.right-v.left)<10&&ld(l,"right",v.right-d.width),pl(s.right-v.right)<5&&cd(c,"right",v.left+d.width)),/s/.test(t)&&(n&&pl(s.bottom-v.top)<10&&ld(l,"bottom",v.bottom-d.height),pl(s.bottom-v.bottom)<5&&cd(c,"bottom",v.top+d.height)),/w/.test(t)&&(n&&pl(s.left-v.right)<10&&cd(l,"left",v.left+d.width),pl(s.left-v.left)<5&&ld(c,"left",v.right-d.width))});var h=r.children.filter(function(m){return!m.hidden&&!m.waypoints&&(B(m,"bpmn:FlowElement")||B(m,"bpmn:Artifact"))}),f=u?kJ:CJ;return h.forEach(function(m){var v=at(m);/n/.test(t)&&(!u||i)&&ld(c,"top",v.top-f.top),/e/.test(t)&&(u||o)&&cd(c,"right",v.right+f.right),/s/.test(t)&&(!u||o)&&cd(c,"bottom",v.bottom+f.bottom),/w/.test(t)&&(u||i)&&ld(c,"left",v.left-f.left)}),{min:c,max:l}}var o4=1001;function ZO(e,t){e.on("resize.start",o4+500,function(n){var r=n.context,i=r.shape;(B(i,"bpmn:Lane")||B(i,"bpmn:Participant"))&&(r.balanced=!Rp(n))}),e.on("resize.end",o4,function(n){var r=n.context,i=r.shape,o=r.canExecute,a=r.newBounds;if(B(i,"bpmn:Lane")||B(i,"bpmn:Participant"))return o&&(a=F6(a),t.resizeLane(i,a,r.balanced)),!1})}ZO.$inject=["eventBus","modeling"];var TJ=500;function iE(e,t,n,r,i){n.invoke(Fe,this);function o(u){return Pt(u,["bpmn:ReceiveTask","bpmn:SendTask"])||RJ(u,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(u){var d=e.getDefinitions(),h=d.get("rootElements");return!!Vt(h,la({id:u.id}))}function s(u){if(B(u,"bpmn:ErrorEventDefinition"))return"errorRef";if(B(u,"bpmn:EscalationEventDefinition"))return"escalationRef";if(B(u,"bpmn:MessageEventDefinition"))return"messageRef";if(B(u,"bpmn:SignalEventDefinition"))return"signalRef"}function l(u){if(Pt(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.get("messageRef");var d=u.get("eventDefinitions"),h=d[0];return h.get(s(h))}function c(u,d){if(Pt(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.set("messageRef",d);var h=u.get("eventDefinitions"),f=h[0];return f.set(s(f),d)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var d=u.shape||u.element;if(o(d)){var h=Ue(d),f=l(h),m;f&&!a(f)&&(m=e.getDefinitions().get("rootElements"),dr(m,f),u.addedRootElement=f)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var d=u.addedRootElement;if(d){var h=e.getDefinitions().get("rootElements");Yn(h,d)}},!0),t.on("copyPaste.copyElement",function(u){var d=u.descriptor,h=u.element;if(!(h.labelTarget||!o(h))){var f=Ue(h),m=l(f);m&&(d.referencedRootElement=m)}}),t.on("copyPaste.pasteElement",TJ,function(u){var d=u.descriptor,h=d.businessObject,f=d.referencedRootElement;f&&(a(f)||(f=r.copyElement(f,i.create(f.$type))),c(h,f),delete d.referencedRootElement)})}iE.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];We(iE,Fe);function RJ(e,t){return bt(t)||(t=[t]),Yl(t,function(n){return vf(e,n)})}var QO=Math.max;function eM(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,r=t.axis,i=t.start,o={};return le(n,function(a){var s=a.id;B(a,"bpmn:Participant")&&(o[s]=OJ(a,r,i)),B(a,"bpmn:Lane")&&(o[s]=br(a)?nE:rE),B(a,"bpmn:SubProcess")&&Dt(a)&&(o[s]=KO),B(a,"bpmn:TextAnnotation")&&(o[s]=YO),B(a,"bpmn:Group")&&(o[s]=SJ)}),o})}eM.$inject=["eventBus"];function LJ(e){return e==="x"}function OJ(e,t,n){var r=br(e);if(!DJ(e))return r?$0:U0;var i=LJ(t),o={};return i?r?o=$0:o={width:IJ(e,n,i),height:U0.height}:r?o={width:$0.width,height:MJ(e,n,i)}:o=U0,o}function MJ(e,t,n){var r;return r=jJ(e,t,n),QO($0.height,r)}function IJ(e,t,n){var r;return r=BJ(e,t,n),QO(U0.width,r)}function DJ(e){return!!ic(e).length}function jJ(e,t,n){var r=ic(e),i;return i=oE(r,t,n),e.height-i.height+nE.height}function BJ(e,t,n){var r=ic(e),i;return i=oE(r,t,n),e.width-i.width+rE.width}function oE(e,t,n){var r,i,o;for(r=0;r<e.length;r++)if(i=e[r],!n&&t>=i.y&&t<=i.y+i.height||n&&t>=i.x&&t<=i.x+i.width)return o=ic(i),o.length?oE(o,t,n):i}var a4=400,FJ=600,s4={x:180,y:160};function oc(e,t,n,r,i,o,a){Fe.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=r,this._bpmnFactory=i,this._bpmnjs=o,this._elementRegistry=a;var s=this;function l(d){return B(d,"bpmn:SubProcess")&&!Dt(d)}function c(d){var h=d.shape,f=d.newRootElement,m=Ue(h);f=s._addDiagram(f||m),d.newRootElement=e.addRootElement(f)}function u(d){var h=d.shape,f=Ue(h);s._removeDiagram(f);var m=d.newRootElement=a.get(bs(f));e.removeRootElement(m)}this.executed("shape.create",function(d){var h=d.shape;l(h)&&c(d)},!0),this.postExecuted("shape.create",function(d){var h=d.shape,f=d.newRootElement;!f||!h.children||(s._showRecursively(h.children),s._moveChildrenToShape(h,f))},!0),this.reverted("shape.create",function(d){var h=d.shape;l(h)&&u(d)},!0),this.preExecuted("shape.delete",function(d){var h=d.shape;if(l(h)){var f=a.get(bs(h));f&&n.removeElements(f.children.slice())}},!0),this.executed("shape.delete",function(d){var h=d.shape;l(h)&&u(d)},!0),this.reverted("shape.delete",function(d){var h=d.shape;l(h)&&c(d)},!0),this.preExecuted("shape.replace",function(d){var h=d.oldShape,f=d.newShape;!l(h)||!l(f)||(d.oldRoot=e.removeRootElement(bs(h)))},!0),this.postExecuted("shape.replace",function(d){var h=d.newShape,f=d.oldRoot,m=e.findRoot(bs(h));if(!(!f||!m)){var v=f.children;n.moveElements(v,{x:0,y:0},m)}},!0),this.executed("element.updateProperties",function(d){var h=d.element;if(B(h,"bpmn:SubProcess")){var f=d.properties,m=d.oldProperties,v=m.id,b=f.id;if(v!==b){if(D0(h)){a.updateId(h,Ic(b)),a.updateId(v,b);return}var y=a.get(Ic(v));y&&a.updateId(Ic(v),Ic(b))}}},!0),this.reverted("element.updateProperties",function(d){var h=d.element;if(B(h,"bpmn:SubProcess")){var f=d.properties,m=d.oldProperties,v=m.id,b=f.id;if(v!==b){if(D0(h)){a.updateId(h,Ic(v)),a.updateId(b,v);return}var y=a.get(Ic(b));y&&a.updateId(y,Ic(v))}}},!0),t.on("element.changed",function(d){var h=d.element;if(D0(h)){var f=h,m=a.get(Jk(f));!m||m===f||t.fire("element.changed",{element:m})}}),this.executed("shape.toggleCollapse",a4,function(d){var h=d.shape;B(h,"bpmn:SubProcess")&&(Dt(h)?u(d):(c(d),s._showRecursively(h.children)))},!0),this.reverted("shape.toggleCollapse",a4,function(d){var h=d.shape;B(h,"bpmn:SubProcess")&&(Dt(h)?u(d):(c(d),s._showRecursively(h.children)))},!0),this.postExecuted("shape.toggleCollapse",FJ,function(d){var h=d.shape;if(B(h,"bpmn:SubProcess")){var f=d.newRootElement;f&&(Dt(h)?s._moveChildrenToShape(f,h):s._moveChildrenToShape(h,f))}},!0),t.on("copyPaste.createTree",function(d){var h=d.element,f=d.children;if(l(h)){var m=bs(h),v=a.get(m);v&&f.push.apply(f,v.children)}}),t.on("copyPaste.copyElement",function(d){var h=d.descriptor,f=d.element,m=d.elements,v=f.parent,b=B(zt(v),"bpmndi:BPMNPlane");if(b){var y=Jk(v),x=Vt(m,function(_){return _.id===y});x&&(h.parent=x.id)}}),t.on("copyPaste.pasteElement",function(d){var h=d.descriptor;h.parent&&(l(h.parent)||h.parent.hidden)&&(h.hidden=!0)})}We(oc,Fe);oc.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,r=e.children,i;if(r){r=r.concat(r.reduce(function(c,u){return u.label&&u.label.parent!==e?c.concat(u.label):c},[]));var o=r.filter(function(c){return!c.hidden});if(!o.length){n.moveElements(r,{x:0,y:0},t,{autoResize:!1});return}var a=yr(o);if(!t.x)i={x:s4.x-a.x,y:s4.y-a.y};else{var s=ht(t),l=ht(a);i={x:s.x-l.x,y:s.y-l.y}}n.moveElements(r,i,t,{autoResize:!1})}};oc.prototype._showRecursively=function(e,t){var n=this,r=[];return e.forEach(function(i){i.hidden=!!t,r=r.concat(i),i.children&&(r=r.concat(n._showRecursively(i.children,i.collapsed||t)))}),r};oc.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};oc.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,r=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),i=t.create("bpmndi:BPMNDiagram",{plane:r});r.$parent=i;var o=n.createRoot({id:bs(e),type:e.$type,di:r,businessObject:e,collapsed:!0});return o};oc.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,r=Vt(n,function(i){return i.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(r),1),r};oc.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function aE(e,t){e.invoke(Fe,this),this.postExecuted("shape.replace",function(n){var r=n.context.oldShape,i=n.context.newShape;if(!(!B(i,"bpmn:SubProcess")||!(B(r,"bpmn:Task")||B(r,"bpmn:CallActivity"))||!Dt(i))){var o=$J(i);t.createShape({type:"bpmn:StartEvent"},o,i)}})}aE.$inject=["injector","modeling"];We(aE,Fe);function $J(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function sE(e){Fe.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;B(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&B(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}We(sE,Fe);sE.$inject=["eventBus"];function lE(e,t){Fe.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var r=n.shape;if(Dt(r))return;var i=Hp(r);i.forEach(function(a){var s=a.incoming.slice(),l=a.outgoing.slice();le(s,function(c){o(c,!0)}),le(l,function(c){o(c,!1)})});function o(a,s){i.indexOf(a.source)!==-1&&i.indexOf(a.target)!==-1||(s?t.reconnectEnd(a,r,ht(r)):t.reconnectStart(a,r,ht(r)))}},!0)}We(lE,Fe);lE.$inject=["eventBus","modeling"];var vb=500;function cE(e,t,n){Fe.call(this,e);function r(a){a.length&&a.forEach(function(s){s.type==="label"&&!s.businessObject.name&&(s.hidden=!0)})}function i(a,s){var l=a.children,c=s,u,d;return u=UJ(l).concat([a]),d=jO(u),d?(c.width=Math.max(d.width,c.width),c.height=Math.max(d.height,c.height),c.x=d.x+(d.width-c.width)/2,c.y=d.y+(d.height-c.height)/2):(c.x=a.x+(a.width-c.width)/2,c.y=a.y+(a.height-c.height)/2),c}function o(a,s){return{x:a.x+(a.width-s.width)/2,y:a.y+(a.height-s.height)/2,width:s.width,height:s.height}}this.executed(["shape.toggleCollapse"],vb,function(a){var s=a.context,l=s.shape;B(l,"bpmn:SubProcess")&&(l.collapsed?zt(l).isExpanded=!1:(r(l.children),zt(l).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],vb,function(a){var s=a.context,l=s.shape;l.collapsed?zt(l).isExpanded=!1:zt(l).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],vb,function(a){var s=a.context.shape,l=t.getDefaultSize(s),c;s.collapsed?c=o(s,l):c=i(s,l),n.resizeShape(s,c,null,{autoResize:s.collapsed?!1:"nwse"})})}We(cE,Fe);cE.$inject=["eventBus","elementFactory","modeling"];function UJ(e){return e.filter(function(t){return!t.hidden})}function uE(e,t,n,r){t.invoke(Fe,this),this.preExecute("shape.delete",function(i){var o=i.context,a=o.shape,s=a.businessObject;Gt(a)||(B(a,"bpmn:Participant")&&Dt(a)&&n.ids.unclaim(s.processRef.id),r.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(i){var o=i.context,a=o.connection,s=a.businessObject;r.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var i=e.getRootElement(),o=i.businessObject;B(i,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}We(uE,Fe);uE.$inject=["canvas","injector","moddle","modeling"];function dE(e,t){Fe.call(this,e),this.preExecute("connection.delete",function(n){var r=n.context,i=r.connection,o=i.source;zJ(i,o)&&t.updateProperties(o,{default:null})})}We(dE,Fe);dE.$inject=["eventBus","modeling"];function zJ(e,t){if(!B(e,"bpmn:SequenceFlow"))return!1;var n=Ue(t),r=Ue(e);return n.get("default")===r}var GJ=500,qJ=5e3;function fE(e,t){Fe.call(this,e);var n;function r(){return n=n||new HJ,n.enter(),n}function i(){if(!n)throw new Error("out of bounds release");return n}function o(){if(!n)throw new Error("out of bounds release");var s=n.leave();return s&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),s}var a=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(a,qJ,function(s){r()}),this.postExecuted(a,GJ,function(s){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(s){var l=s.context,c=l.shape,u=i();c.labelTarget||(B(c,"bpmn:Lane")&&u.addLane(c),B(c,"bpmn:FlowNode")&&u.addFlowNode(c))})}fE.$inject=["eventBus","modeling"];We(fE,Fe);function HJ(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function hE(e,t){Fe.call(this,e),this.postExecuted("elements.create",function(n){const r=n.context,i=r.elements;for(const o of i)VJ(o)&&!KJ(o)&&t.updateProperties(o,{isForCompensation:void 0})})}We(hE,Fe);hE.$inject=["eventBus","modeling"];function VJ(e){const t=Ue(e);return t&&t.isForCompensation}function WJ(e){return e&&B(e,"bpmn:BoundaryEvent")&&vf(e,"bpmn:CompensateEventDefinition")}function KJ(e){return e.incoming.filter(n=>WJ(n.source)).length>0}const YJ={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",R5],appendBehavior:["type",L5],associationBehavior:["type",O5],attachEventBehavior:["type",Ky],boundaryEventBehavior:["type",M5],compensateBoundaryEventBehaviour:["type",I5],createBehavior:["type",D5],createDataObjectBehavior:["type",j5],createParticipantBehavior:["type",B5],dataInputAssociationBehavior:["type",F5],dataStoreBehavior:["type",$5],deleteLaneBehavior:["type",U5],detachEventBehavior:["type",Xy],dropOnFlowBehavior:["type",z5],eventBasedGatewayBehavior:["type",G5],fixHoverBehavior:["type",BO],groupBehavior:["type",q5],importDockingFix:["type",FO],isHorizontalFix:["type",H5],labelBehavior:["type",V5],layoutConnectionBehavior:["type",W5],messageFlowBehavior:["type",J5],nonInterruptingBehavior:["type",X5],removeElementBehavior:["type",Q5],removeEmbeddedLabelBoundsBehavior:["type",Z5],removeParticipantBehavior:["type",eE],replaceConnectionBehavior:["type",tE],replaceElementBehaviour:["type",t1],resizeBehavior:["type",JO],resizeLaneBehavior:["type",ZO],rootElementReferenceBehavior:["type",iE],spaceToolBehavior:["type",eM],subProcessPlaneBehavior:["type",oc],subProcessStartEventBehavior:["type",aE],textAnnotationBehavior:["type",sE],toggleCollapseConnectionBehaviour:["type",lE],toggleElementCollapseBehaviour:["type",cE],unclaimIdBehavior:["type",uE],unsetDefaultFlowBehavior:["type",dE],updateFlowNodeRefsBehavior:["type",fE],setCompensationActivityAfterPasteBehavior:["type",hE]};function tM(e,t){var n=ti(e,t,-15);return n!=="intersect"?n:null}function Fr(e){Bo.call(this,e)}We(Fr,Bo);Fr.$inject=["eventBus"];Fr.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return JJ(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,r=e.hints||{},i=r.targetParent,o=r.targetAttach;if(o)return!1;i&&(n.parent=i);try{return z0(t,n)}finally{i&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,r=e.target;return z0(n,r,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return uM(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,r=e.target;return on(r)&&!qv(t,r)?!1:xu(t,function(i){return on(i)?z0(i.source,i.target,i):i.host?Xh(i,i.host,null,n):Cw(i,r,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,r=e.position;return Xh(n,t,null,r)||lM(n,t,r)||cM(n,t)||qv(n,t)}),this.addRule("shape.create",function(e){return Cw(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return Xh(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return mM(n,t)})};Fr.prototype.canConnectMessageFlow=hM;Fr.prototype.canConnectSequenceFlow=pM;Fr.prototype.canConnectDataAssociation=mE;Fr.prototype.canConnectAssociation=dM;Fr.prototype.canConnectCompensationAssociation=fM;Fr.prototype.canMove=cM;Fr.prototype.canAttach=Xh;Fr.prototype.canReplace=lM;Fr.prototype.canDrop=rf;Fr.prototype.canInsert=qv;Fr.prototype.canCreate=Cw;Fr.prototype.canConnect=z0;Fr.prototype.canResize=uM;Fr.prototype.canCopy=mM;function JJ(e){return Nw(e)?null:Pt(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Nw(e){return!e||Gt(e)}function XJ(e,t){return e===t}function l4(e){do{if(B(e,"bpmn:Process"))return Ue(e);if(B(e,"bpmn:Participant"))return Ue(e).processRef||Ue(e)}while(e=e.parent)}function Aw(e){return B(e,"bpmn:TextAnnotation")}function pE(e){return B(e,"bpmn:Group")&&!e.labelTarget}function nM(e){return B(e,"bpmn:BoundaryEvent")&&Da(e,"bpmn:CompensateEventDefinition")}function n1(e){return Ue(e).isForCompensation}function ZJ(e,t){var n=l4(e),r=l4(t);return n===r}function QJ(e){return B(e,"bpmn:InteractionNode")&&!B(e,"bpmn:BoundaryEvent")&&(!B(e,"bpmn:Event")||B(e,"bpmn:ThrowEvent")&&iM(e,"bpmn:MessageEventDefinition"))}function eX(e){return B(e,"bpmn:InteractionNode")&&!n1(e)&&(!B(e,"bpmn:Event")||B(e,"bpmn:CatchEvent")&&iM(e,"bpmn:MessageEventDefinition"))&&!(B(e,"bpmn:BoundaryEvent")&&!Da(e,"bpmn:MessageEventDefinition"))}function c4(e){for(var t=e;t=t.parent;){if(B(t,"bpmn:FlowElementsContainer"))return Ue(t);if(B(t,"bpmn:Participant"))return Ue(t).processRef}return null}function rM(e,t){var n=c4(e),r=c4(t);return n===r}function Da(e,t){var n=Ue(e);return!!Vt(n.eventDefinitions||[],function(r){return B(r,t)})}function iM(e,t){var n=Ue(e);return(n.eventDefinitions||[]).every(function(r){return B(r,t)})}function tX(e){return B(e,"bpmn:FlowNode")&&!B(e,"bpmn:EndEvent")&&!Qr(e)&&!(B(e,"bpmn:IntermediateThrowEvent")&&Da(e,"bpmn:LinkEventDefinition"))&&!nM(e)&&!n1(e)}function nX(e){return B(e,"bpmn:FlowNode")&&!B(e,"bpmn:StartEvent")&&!B(e,"bpmn:BoundaryEvent")&&!Qr(e)&&!(B(e,"bpmn:IntermediateCatchEvent")&&Da(e,"bpmn:LinkEventDefinition"))&&!n1(e)}function rX(e){return B(e,"bpmn:ReceiveTask")||B(e,"bpmn:IntermediateCatchEvent")&&(Da(e,"bpmn:MessageEventDefinition")||Da(e,"bpmn:TimerEventDefinition")||Da(e,"bpmn:ConditionalEventDefinition")||Da(e,"bpmn:SignalEventDefinition"))}function iX(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function kw(e,t){var n=iX(t);return n.indexOf(e)!==-1}function z0(e,t,n){if(Nw(e)||Nw(t))return null;if(!B(n,"bpmn:DataAssociation")){if(hM(e,t))return{type:"bpmn:MessageFlow"};if(pM(e,t))return{type:"bpmn:SequenceFlow"}}var r=mE(e,t);return r||(fM(e,t)?{type:"bpmn:Association",associationDirection:"One"}:dM(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function rf(e,t){return Gt(e)||pE(e)?!0:B(t,"bpmn:Participant")&&!Dt(t)?!1:B(e,"bpmn:Participant")?B(t,"bpmn:Process")||B(t,"bpmn:Collaboration"):Pt(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:B(e,"bpmn:Lane")?B(t,"bpmn:Participant")||B(t,"bpmn:Lane"):B(e,"bpmn:BoundaryEvent")&&!oX(e)?!1:B(e,"bpmn:FlowElement")&&!B(e,"bpmn:DataStoreReference")?B(t,"bpmn:FlowElementsContainer")?Dt(t):Pt(t,["bpmn:Participant","bpmn:Lane"]):B(e,"bpmn:DataStoreReference")&&B(t,"bpmn:Collaboration")?Yl(Ue(t).get("participants"),function(n){return!!n.get("processRef")}):Pt(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?Pt(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):B(e,"bpmn:MessageFlow")?B(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function oX(e){return Ue(e).cancelActivity&&(oM(e)||aM(e))}function aX(e){return!Gt(e)&&B(e,"bpmn:BoundaryEvent")}function sX(e){return B(e,"bpmn:Lane")}function lX(e){return aX(e)||B(e,"bpmn:IntermediateThrowEvent")&&oM(e)?!0:B(e,"bpmn:IntermediateCatchEvent")&&aM(e)}function oM(e){var t=Ue(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function aM(e){return sM(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function sM(e,t){return t.some(function(n){return Da(e,n)})}function cX(e){return B(e,"bpmn:ReceiveTask")&&Vt(e.incoming,function(t){return B(t.source,"bpmn:EventBasedGateway")})}function Xh(e,t,n,r){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var i=e[0];return Gt(i)||!lX(i)||Qr(t)||!B(t,"bpmn:Activity")||n1(t)||r&&!tM(r,t)||cX(t)?!1:"attach"}function lM(e,t,n){if(!t)return!1;var r={replacements:[]};return le(e,function(i){Qr(t)||B(i,"bpmn:StartEvent")&&i.type!=="label"&&rf(i,t)&&(QH(i)||r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),(eV(i)||tV(i)||nV(i))&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"}),sM(i,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&B(t,"bpmn:SubProcess")&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:StartEvent"})),B(t,"bpmn:Transaction")||Da(i,"bpmn:CancelEventDefinition")&&i.type!=="label"&&(B(i,"bpmn:EndEvent")&&rf(i,t)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:EndEvent"}),B(i,"bpmn:BoundaryEvent")&&Xh(i,t,null,n)&&r.replacements.push({oldElementId:i.id,newElementType:"bpmn:BoundaryEvent"}))}),r.replacements.length?r:!1}function cM(e,t){return Yl(e,sX)?!1:t?e.every(function(n){return rf(n,t)}):!0}function Cw(e,t,n,r){return t?Gt(e)||pE(e)?!0:XJ(n,t)||n&&kw(n,t)?!1:rf(e,t)||qv(e,t):!1}function uM(e,t){return B(e,"bpmn:SubProcess")?Dt(e)&&(!t||t.width>=100&&t.height>=80):!!(B(e,"bpmn:Lane")||B(e,"bpmn:Participant")||Aw(e)||pE(e))}function uX(e,t){var n=Aw(e),r=Aw(t);return(n||r)&&n!==r}function dM(e,t){return kw(t,e)||kw(e,t)?!1:uX(e,t)?!0:!!mE(e,t)}function fM(e,t){return rM(e,t)&&nM(e)&&B(t,"bpmn:Activity")&&!fX(t,e)&&!Qr(t)}function hM(e,t){return u4(e)&&!u4(t)?!1:QJ(e)&&eX(t)&&!ZJ(e,t)}function pM(e,t){return tX(e)&&nX(t)&&rM(e,t)&&!(B(e,"bpmn:EventBasedGateway")&&!rX(t))}function mE(e,t){return Pt(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Pt(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:Pt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Pt(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function qv(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:Pt(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Gt(t)&&B(e,"bpmn:FlowNode")&&!B(e,"bpmn:BoundaryEvent")&&rf(e,t.parent)}function dX(e,t){return e&&t&&e.indexOf(t)!==-1}function mM(e,t){return Gt(t)?!0:!(B(t,"bpmn:Lane")&&!dX(e,t.parent))}function u4(e){return tf(e,"bpmn:Process")||tf(e,"bpmn:Collaboration")}function fX(e,t){return e.attachers.includes(t)}const hX={__depends__:[Va],__init__:["bpmnRules"],bpmnRules:["type",Fr]};var pX=2e3;function gM(e,t){e.on("saveXML.start",pX,n);function n(){var r=t.getRootElements();le(r,function(i){var o=zt(i),a,s;a=Hp([i],!1),a=Lt(a,function(l){return l!==i&&!l.labelTarget}),s=Zr(a,zt),o.set("planeElement",s)})}}gM.$inject=["eventBus","canvas"];const mX={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",gM]};function r1(e){Fe.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var r=n.context,i=r.shape||r.connection,o=r.parent,a=t.getOrdering(i,o);a&&(a.parent!==void 0&&(r.parent=a.parent),r.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(n){var r=n.context,i=r.shape||r.connection,o=r.newParent||i.parent,a=t.getOrdering(i,o);a&&(a.parent!==void 0&&(r.newParent=a.parent),r.newParentIndex=a.index)})}r1.prototype.getOrdering=function(e,t){return null};We(r1,Fe);function gE(e,t){r1.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(a){if(a.labelTarget)return{level:10};var s=Vt(n,function(l){return Pt(a,[l.type])});return s&&s.order||{level:1}}function i(a){var s=a.order;if(s||(a.order=s=r(a)),!s)throw new Error(`no order for <${a.id}>`);return s}function o(a,s,l){for(var c=s;c&&!Pt(c,l);)c=c.parent;if(!c)throw new Error(`no parent for <${a.id}> in <${s&&s.id}>`);return c}this.getOrdering=function(a,s){if(a.labelTarget||B(a,"bpmn:TextAnnotation"))return{parent:t.findRoot(s)||t.getRootElement(),index:-1};var l=i(a);l.containers&&(s=o(a,s,l.containers));var c=s.children.indexOf(a),u=_6(s.children,function(d){return!a.labelTarget&&d.labelTarget?!1:l.level<i(d).level});return u!==-1&&c!==-1&&c<u&&(u-=1),{index:u,parent:s}}}gE.$inject=["eventBus","canvas"];We(gE,r1);const gX={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",gE]};function nm(){}nm.prototype.get=function(){return this._data};nm.prototype.set=function(e){this._data=e};nm.prototype.clear=function(){var e=this._data;return delete this._data,e};nm.prototype.isEmpty=function(){return!this._data};const vX={clipboard:["type",nm]};var yX="drop-ok",d4="drop-not-ok",f4="attach-ok",h4="new-parent",p4="create",bX=2e3;function vM(e,t,n,r,i){function o(l,c,u,d,h){if(!c)return!1;l=Lt(l,function(x){var _=x.labelTarget;return!x.parent&&!(Gt(x)&&l.indexOf(_)!==-1)});var f=Vt(l,function(x){return!on(x)}),m=!1,v=!1,b=!1;g4(l)&&(m=i.allowed("shape.attach",{position:u,shape:f,target:c})),m||(g4(l)?b=i.allowed("shape.create",{position:u,shape:f,source:d,target:c}):b=i.allowed("elements.create",{elements:l,position:u,target:c}));var y=h.connectionTarget;return b||m?(f&&d&&(v=i.allowed("connection.create",{source:y===d?f:d,target:y===d?d:f,hints:{targetParent:c,targetAttach:m}})),{attach:m,connect:v}):b===null||m===null?null:!1}function a(l,c){[f4,yX,d4,h4].forEach(function(u){u===c?e.addMarker(l,u):e.removeMarker(l,u)})}n.on(["create.move","create.hover"],function(l){var c=l.context,u=c.elements,d=l.hover,h=c.source,f=c.hints||{};if(!d){c.canExecute=!1,c.target=null;return}m4(l);var m={x:l.x,y:l.y},v=c.canExecute=d&&o(u,d,m,h,f);d&&v!==null&&(c.target=d,v&&v.attach?a(d,f4):a(d,v?h4:d4))}),n.on(["create.end","create.out","create.cleanup"],function(l){var c=l.hover;c&&a(c,null)}),n.on("create.end",function(l){var c=l.context,u=c.source,d=c.shape,h=c.elements,f=c.target,m=c.canExecute,v=m&&m.attach,b=m&&m.connect,y=c.hints||{};if(m===!1||!f)return!1;m4(l);var x={x:l.x,y:l.y};b?d=r.appendShape(u,d,x,f,{attach:v,connection:b===!0?{}:b,connectionTarget:y.connectionTarget}):(h=r.createElements(h,x,f,be({},y,{attach:v})),d=Vt(h,function(_){return!on(_)})),be(c,{elements:h,shape:d}),be(l,{elements:h,shape:d})});function s(){var l=t.context();l&&l.prefix===p4&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],bX,function(){n.off("elements.changed",s)})}),this.start=function(l,c,u){bt(c)||(c=[c]);var d=Vt(c,function(m){return!on(m)});if(d){u=be({elements:c,hints:{},shape:d},u||{}),le(c,function(m){ft(m.x)||(m.x=0),ft(m.y)||(m.y=0)});var h=Lt(c,function(m){return!m.hidden}),f=yr(h);le(c,function(m){on(m)&&(m.waypoints=Zr(m.waypoints,function(v){return{x:v.x-f.x-f.width/2,y:v.y-f.y-f.height/2}})),be(m,{x:m.x-f.x-f.width/2,y:m.y-f.y-f.height/2})}),t.init(l,p4,{cursor:"grabbing",autoActivate:!0,data:{shape:d,elements:c,context:u}})}}}vM.$inject=["canvas","dragging","eventBus","modeling","rules"];function m4(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function g4(e){return e&&e.length===1&&!on(e[0])}var _X=750;function yM(e,t,n,r,i){function o(a){var s=Qe("g");He(s,i.cls("djs-drag-group",["no-events"]));var l=Qe("g");return a.forEach(function(c){var u;c.hidden||(c.waypoints?(u=n._createContainer("connection",l),n.drawConnection(ou(u),c)):(u=n._createContainer("shape",l),n.drawShape(ou(u),c),Dr(u,c.x,c.y)),r.addDragger(c,s,u))}),s}t.on("create.move",_X,function(a){var s=a.hover,l=a.context,c=l.elements,u=l.dragGroup;u||(u=l.dragGroup=o(c));var d;s?(u.parentNode||(d=e.getActiveLayer(),pt(d,u)),Dr(u,a.x,a.y)):cr(u)}),t.on("create.cleanup",function(a){var s=a.context,l=s.dragGroup;l&&cr(l)})}yM.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const i1={__depends__:[Us,Nf,Va,qa],__init__:["create","createPreview"],create:["type",vM],createPreview:["type",yM]};function vE(e){var t=this;this._lastMoveEvent=null;function n(r){t._lastMoveEvent=r}e.on("canvas.init",function(r){var i=t._svg=r.svg;i.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}vE.$inject=["eventBus"];vE.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||wX(0,0)};function wX(e,t){var n=document.createEvent("MouseEvent"),r=e,i=t,o=e,a=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,r,i,o,a,!1,!1,!1,!1,0,null),n}const rm={__init__:["mouse"],mouse:["type",vE]};function ma(e,t,n,r,i,o,a,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=r,this._eventBus=i,this._modeling=o,this._mouse=a,this._rules=s,i.on("copyPaste.copyElement",function(l){var c=l.descriptor,u=l.element,d=l.elements;c.priority=1,c.id=u.id;var h=Vt(d,function(f){return f===u.parent});h&&(c.parent=u.parent.id),xX(u)&&(c.priority=2,c.host=u.host.id),on(u)&&(c.priority=3,c.source=u.source.id,c.target=u.target.id,c.waypoints=EX(u)),Gt(u)&&(c.priority=4,c.labelTarget=u.labelTarget.id),le(["x","y","width","height"],function(f){ft(u[f])&&(c[f]=u[f])}),c.hidden=u.hidden,c.collapsed=u.collapsed}),i.on("copyPaste.pasteElements",function(l){var c=l.hints;be(c,{createElementsBehavior:!1})})}ma.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];ma.prototype.copy=function(e){var t,n;return bt(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(bt(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};ma.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var r=this._createElements(t);if(e&&e.element&&e.point)return this._paste(r,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),r,{hints:n||{}})}};ma.prototype._paste=function(e,t,n,r){le(e,function(o){ft(o.x)||(o.x=0),ft(o.y)||(o.y=0)});var i=yr(e);return le(e,function(o){on(o)&&(o.waypoints=Zr(o.waypoints,function(a){return{x:a.x-i.x-i.width/2,y:a.y-i.y-i.height/2}})),be(o,{x:o.x-i.x-i.width/2,y:o.y-i.y-i.height/2})}),this._modeling.createElements(e,n,t,be({},r))};ma.prototype._createElements=function(e){var t=this,n=this._eventBus,r={},i=[];return le(e,function(o,a){o=Ua(o,"priority"),le(o,function(s){var l=be({},Io(s,["priority"]));r[s.parent]?l.parent=r[s.parent]:delete l.parent,n.fire("copyPaste.pasteElement",{cache:r,descriptor:l});var c;if(on(l)){l.source=r[s.source],l.target=r[s.target],c=r[s.id]=t.createConnection(l),i.push(c);return}if(Gt(l)){l.labelTarget=r[l.labelTarget],c=r[s.id]=t.createLabel(l),i.push(c);return}l.host&&(l.host=r[l.host]),c=r[s.id]=t.createShape(l),i.push(c)})}),i};ma.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(Io(e,["id"]));return t};ma.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(Io(e,["id"]));return t};ma.prototype.createShape=function(e){var t=this._elementFactory.createShape(Io(e,["id"]));return t};ma.prototype.hasRelations=function(e,t){var n,r,i;return!(on(e)&&(r=Vt(t,la({id:e.source.id})),i=Vt(t,la({id:e.target.id})),!r||!i)||Gt(e)&&(n=Vt(t,la({id:e.labelTarget.id})),!n))};ma.prototype.createTree=function(e){var t=this._rules,n=this,r={},i=[],o=ky(e);function a(c,u){return t.allowed("element.copy",{element:c,elements:u})}function s(c,u){var d=Vt(i,function(h){return c===h.element});if(!d){i.push({element:c,depth:u});return}d.depth<u&&(i=l(d,i),i.push({element:d.element,depth:u}))}function l(c,u){var d=u.indexOf(c);return d!==-1&&u.splice(d,1),u}return Su(o,function(c,u,d){if(Gt(c))return;le(c.labels,function(m){s(m,d)});function h(m){m&&m.length&&le(m,function(v){le(v.labels,function(b){s(b,d)}),s(v,d)})}le([c.attachers,c.incoming,c.outgoing],h),s(c,d);var f=[];return c.children&&(f=c.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:c,children:f}),f}),e=Zr(i,function(c){return c.element}),i=Zr(i,function(c){return c.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:c.descriptor,element:c.element,elements:e}),c}),i=Ua(i,function(c){return c.descriptor.priority}),e=Zr(i,function(c){return c.element}),le(i,function(c){var u=c.depth;if(!n.hasRelations(c.element,e)){y4(c.element,e);return}if(!a(c.element,e)){y4(c.element,e);return}r[u]||(r[u]=[]),r[u].push(c.descriptor)}),r};function xX(e){return!!e.host}function EX(e){return Zr(e.waypoints,function(t){return t=v4(t),t.original&&(t.original=v4(t.original)),t})}function v4(e){return be({},e)}function y4(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const SX={__depends__:[vX,i1,rm,Va],__init__:["copyPaste"],copyPaste:["type",ma]};function yb(e,t,n){bt(n)||(n=[n]),le(n,function(r){hu(e[r])||(t[r]=e[r])})}var bb=750;function bM(e,t,n){function r(l,c){var u=e.create(l.$type);return n.copyElement(l,u,null,c)}t.on("copyPaste.copyElement",bb,function(l){var c=l.descriptor,u=l.element,d=Ue(u);if(Gt(u))return c;var h=c.businessObject=r(d,!0),f=c.di=r(zt(u),!0);f.bpmnElement=h,yb(h,c,"name"),yb(f,c,"isExpanded"),d.default&&(c.default=d.default.id)});var i="-bpmn-js-refs";function o(l){return l[i]=l[i]||{}}function a(l,c){l[i]=c}function s(l,c,u){var d=Ue(l);return l.default&&(u[l.default]={element:d,property:"default"}),l.host&&(Ue(l).attachedToRef=Ue(c[l.host])),Io(u,Bi(u,function(h,f,m){var v=f.element,b=f.property;return m===l.id&&(v.set(b,d),h.push(l.id)),h},[]))}t.on("copyPaste.pasteElement",function(l){var c=l.cache,u=l.descriptor,d=u.businessObject,h=u.di;if(Gt(u)){u.businessObject=Ue(c[u.labelTarget]),u.di=zt(c[u.labelTarget]);return}d=u.businessObject=r(d),h=u.di=r(h),h.bpmnElement=d,yb(u,d,["isExpanded","name"]),u.type=d.$type}),t.on("copyPaste.copyElement",bb,function(l){var c=l.descriptor,u=l.element;if(B(u,"bpmn:Participant")){var d=Ue(u);d.processRef&&(c.processRef=r(d.processRef,!0))}}),t.on("copyPaste.pasteElement",function(l){var c=l.descriptor,u=c.processRef;u&&(c.processRef=r(u))}),t.on("copyPaste.pasteElement",bb,function(l){var c=l.cache,u=l.descriptor;a(c,s(u,c,o(c)))})}bM.$inject=["bpmnFactory","eventBus","moddleCopy"];var NX=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function im(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(r){var i=r.propertyNames;if(!(!i||!i.length))return Ua(i,function(o){return o==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(r){var i=r.parent,o=Tr(i)&&i.$descriptor,a=r.propertyName;if(a&&NX.indexOf(a)!==-1||a&&o&&!Vt(o.properties,la({name:a})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(r){var i=r.property;if(AX(i,"bpmn:ExtensionElements")&&(!i.values||!i.values.length))return!1})}im.$inject=["eventBus","bpmnFactory","moddle"];im.prototype.copyElement=function(e,t,n,r=!1){var i=this;n&&!bt(n)&&(n=[n]),n=n||Pw(e.$descriptor);var o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:r});return o===!1||(bt(o)&&(n=o),le(n,function(a){var s;xi(e,a)&&(s=e.get(a));var l=i.copyProperty(s,t,a,r);if(Cr(l)){var c=i._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:l,propertyName:a});c!==!1&&t.set(a,l)}})),t};im.prototype.copyProperty=function(e,t,n,r=!1){var i=this,o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:r});if(o!==!1){if(o)return Tr(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;var a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?e&&this._copyId(e,t,r):bt(e)?Bi(e,function(s,l){return o=i.copyProperty(l,t,n,r),o?s.concat(o):s},[]):Tr(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=i._bpmnFactory.create(e.$type),o.$parent=t,o=i.copyElement(e,o,null,r),o):e}};im.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function Pw(e,t){return Bi(e.properties,function(n,r){return t&&r.default?n:n.concat(r.name)},[])}function AX(e,t){return e&&ur(e.$instanceOf)&&e.$instanceOf(t)}const _M={__depends__:[SX],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",bM],moddleCopy:["type",im]};var b4=Math.round;function yE(e,t){this._modeling=e,this._eventBus=t}yE.$inject=["modeling","eventBus"];yE.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var r=this._modeling,i=this._eventBus;i.fire("replace.start",{element:e,attrs:t,hints:n});var o=t.width||e.width,a=t.height||e.height,s=t.x||e.x,l=t.y||e.y,c=b4(s+o/2),u=b4(l+a/2),d=r.replaceShape(e,be({},t,{x:c,y:u,width:o,height:a}),n);return i.fire("replace.end",{element:e,newElement:d,hints:n}),d};function wM(e,t){t.on("replace.end",500,function(n){const{newElement:r,hints:i={}}=n;i.select!==!1&&e.select(r)})}wM.$inject=["selection","eventBus"];const kX={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",wM],replace:["type",yE]};function CX(e,t,n){bt(n)||(n=[n]),le(n,function(r){hu(e[r])||(t[r]=e[r])})}var PX=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function TX(e,t){var n=e&&xi(e,"collapsed")?e.collapsed:!Dt(e),r;return t&&(xi(t,"collapsed")||xi(t,"isExpanded"))?r=xi(t,"collapsed")?t.collapsed:!t.isExpanded:r=n,n!==r}function xM(e,t,n,r,i,o){function a(s,l,c){c=c||{};var u=l.type,d=s.businessObject;if(Zg(d)&&u==="bpmn:SubProcess"&&TX(s,l))return r.toggleCollapse(s),s;var h=e.create(u),f={type:u,businessObject:h};f.di={},u==="bpmn:ExclusiveGateway"&&(f.di.isMarkerVisible=!0),CX(s.di,f.di,["fill","stroke","background-color","border-color","color"]);var m=Pw(d.$descriptor),v=Pw(h.$descriptor,!0),b=RX(m,v);be(h,Ls(l,PX));var y=Lt(b,function(w){return w==="eventDefinitions"?_4(s,l.eventDefinitionType):w==="loopCharacteristics"?!Qr(h):xi(h,w)||w==="processRef"&&l.isExpanded===!1||w==="triggeredByEvent"?!1:w==="isForCompensation"?!Qr(h):!0});if(h=n.copyElement(d,h,y),l.eventDefinitionType&&(_4(h,l.eventDefinitionType)||(f.eventDefinitionType=l.eventDefinitionType,f.eventDefinitionAttrs=l.eventDefinitionAttrs)),B(d,"bpmn:Activity")){if(Zg(d))f.isExpanded=Dt(s);else if(l&&xi(l,"isExpanded")){f.isExpanded=l.isExpanded;var x=t.getDefaultSize(h,{isExpanded:f.isExpanded});f.width=x.width,f.height=x.height,f.x=s.x-(f.width-s.width)/2,f.y=s.y-(f.height-s.height)/2}Dt(s)&&!B(d,"bpmn:Task")&&f.isExpanded&&(f.width=s.width,f.height=s.height)}if(Zg(d)&&!Zg(h)&&(c.moveChildren=!1),B(d,"bpmn:Participant")){l.isExpanded===!0?h.processRef=e.create("bpmn:Process"):c.moveChildren=!1;var _=br(s);zt(s).isHorizontal||(zt(f).isHorizontal=_),f.width=_?s.width:t.getDefaultSize(f).width,f.height=_?t.getDefaultSize(f).height:s.height}return o.allowed("shape.resize",{shape:h})||(f.height=t.getDefaultSize(f).height,f.width=t.getDefaultSize(f).width),h.name=d.name,Pt(d,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&Pt(h,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(h.default=d.default),l.host&&!B(d,"bpmn:BoundaryEvent")&&B(h,"bpmn:BoundaryEvent")&&(f.host=l.host),(f.type==="bpmn:DataStoreReference"||f.type==="bpmn:DataObjectReference")&&(f.x=s.x+(s.width-f.width)/2),i.replaceElement(s,f,{...c,targetElement:l})}this.replaceElement=a}xM.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function Zg(e){return B(e,"bpmn:SubProcess")}function _4(e,t){var n=Ue(e);return t&&n.get("eventDefinitions").some(function(r){return B(r,t)})}function RX(e,t){return e.filter(function(n){return t.includes(n)})}const EM={__depends__:[_M,kX,qa],bpmnReplace:["type",xM]};var LX=250;function Pu(e){this._eventBus=e,this._tools=[],this._active=null}Pu.$inject=["eventBus"];Pu.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};Pu.prototype.isActive=function(e){return e&&this._active===e};Pu.prototype.length=function(e){return this._tools.length};Pu.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};Pu.prototype.bindEvents=function(e,t){var n=this._eventBus,r=[];n.on(t.tool+".init",function(i){var o=i.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),le(t,function(i){r.push(i+".ended"),r.push(i+".canceled")}),n.on(r,LX,function(i){this._active&&(OX(i)||this.setActive(null))},this)};function OX(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Jl(t,'.group[data-group="tools"]')}const o1={__depends__:[Us],__init__:["toolManager"],toolManager:["type",Pu]};function MX(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function IX(e,t){var n=[];return le(e.concat(t),function(r){var i=r.incoming,o=r.outgoing;le(i.concat(o),function(a){var s=a.source,l=a.target;(Sh(e,s)||Sh(e,l)||Sh(t,s)||Sh(t,l))&&(Sh(n,a)||n.push(a))})}),n}function Sh(e,t){return e.indexOf(t)!==-1}function DX(e,t,n){var r=e.x,i=e.y,o=e.width,a=e.height,s=n.x,l=n.y;switch(t){case"n":return{x:r,y:i+l,width:o,height:a-l};case"s":return{x:r,y:i,width:o,height:a+l};case"w":return{x:r+s,y:i,width:o-s,height:a};case"e":return{x:r,y:i,width:o+s,height:a};default:throw new Error("unknown direction: "+t)}}var _b=Math.abs,jX=Math.round,ps={x:"width",y:"height"},SM="crosshair",ml={n:"top",w:"left",s:"bottom",e:"right"},BX=1500,Qg={n:"s",w:"e",s:"n",e:"w"},e0=20;function Fo(e,t,n,r,i,o,a){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=r,this._rules=i,this._toolManager=o,this._mouse=a;var s=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(l){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(l.originalEvent)})}),n.on("spaceTool.move",BX,function(l){var c=l.context,u=c.initialized;u||(u=c.initialized=s.init(l,c)),u&&x4(l)}),n.on("spaceTool.end",function(l){var c=l.context,u=c.axis,d=c.direction,h=c.movingShapes,f=c.resizingShapes,m=c.start;if(c.initialized){x4(l);var v={x:0,y:0};v[u]=jX(l["d"+u]),s.makeSpace(h,f,v,d,m),n.once("spaceTool.ended",function(b){s.activateSelection(b.originalEvent,!0,!0)})}})}Fo.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];Fo.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:SM,data:{context:{reactivate:n}},trapClick:!1})};Fo.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:SM,data:{context:{}}})};Fo.prototype.makeSpace=function(e,t,n,r,i){return this._modeling.createSpace(e,t,n,r,i)};Fo.prototype.init=function(e,t){var n=_b(e.dx)>_b(e.dy)?"x":"y",r=e["d"+n],i=e[n]-r;if(_b(r)<5)return!1;r<0&&(r*=-1),Rp(e)&&(r*=-1);var o=MX(n,r),a=this._canvas.getRootElement();!Dv(e)&&e.hover&&(a=e.hover);var s=[...Hp(a,!0),...a.attachers||[]],l=this.calculateAdjustments(s,n,r,i),c=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:l.resizingShapes,start:i}),u=FX(l,n,o,i,c);return be(t,l,{axis:n,direction:o,spaceToolConstraints:u,start:i}),$y("resize-"+(n==="x"?"ew":"ns")),!0};Fo.prototype.calculateAdjustments=function(e,t,n,r){var i=this._rules,o=[],a=[],s=[],l=[];function c(h){o.includes(h)||o.push(h);var f=h.label;f&&!o.includes(f)&&o.push(f)}function u(h){a.includes(h)||a.push(h)}le(e,function(h){if(!(!h.parent||Gt(h))){if(on(h)){l.push(h);return}var f=h[t],m=f+h[ps[t]];if($X(h)&&(n>0&&ht(h)[t]>r||n<0&&ht(h)[t]<r)){s.push(h);return}if(n>0&&f>r||n<0&&m<r){c(h);return}if(f<r&&m>r&&i.allowed("shape.resize",{shape:h})){u(h);return}}}),le(o,function(h){var f=h.attachers;f&&le(f,function(m){c(m)})});var d=o.concat(a);return le(s,function(h){var f=h.host;eu(d,f)&&c(h)}),d=o.concat(a),le(l,function(h){var f=h.source,m=h.target,v=h.label;eu(d,f)&&eu(d,m)&&v&&c(v)}),{movingShapes:o,resizingShapes:a}};Fo.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Fo.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function w4(e){return{top:e.top-e0,right:e.right+e0,bottom:e.bottom+e0,left:e.left-e0}}function x4(e){var t=e.context,n=t.spaceToolConstraints;if(n){var r,i;ft(n.left)&&(r=Math.max(e.x,n.left),e.dx=e.dx+r-e.x,e.x=r),ft(n.right)&&(r=Math.min(e.x,n.right),e.dx=e.dx+r-e.x,e.x=r),ft(n.top)&&(i=Math.max(e.y,n.top),e.dy=e.dy+i-e.y,e.y=i),ft(n.bottom)&&(i=Math.min(e.y,n.bottom),e.dy=e.dy+i-e.y,e.y=i)}}function FX(e,t,n,r,i){var o=e.movingShapes,a=e.resizingShapes;if(a.length){var s={},l,c;return le(a,function(u){var d=u.attachers,h=u.children,f=at(u),m=Lt(h,function(M){return!on(M)&&!Gt(M)&&!eu(o,M)&&!eu(a,M)}),v=Lt(h,function(M){return!on(M)&&!Gt(M)&&eu(o,M)}),b,y,x,_=[],w=[],R,I,q,T;m.length&&(y=w4(at(yr(m))),b=r-f[ml[n]]+y[ml[n]],n==="n"?s.bottom=c=ft(c)?Math.min(c,b):b:n==="w"?s.right=c=ft(c)?Math.min(c,b):b:n==="s"?s.top=l=ft(l)?Math.max(l,b):b:n==="e"&&(s.left=l=ft(l)?Math.max(l,b):b)),v.length&&(x=w4(at(yr(v))),b=r-x[ml[Qg[n]]]+f[ml[Qg[n]]],n==="n"?s.bottom=c=ft(c)?Math.min(c,b):b:n==="w"?s.right=c=ft(c)?Math.min(c,b):b:n==="s"?s.top=l=ft(l)?Math.max(l,b):b:n==="e"&&(s.left=l=ft(l)?Math.max(l,b):b)),d&&d.length&&(d.forEach(function(M){eu(o,M)?_.push(M):w.push(M)}),_.length&&(R=at(yr(_.map(ht))),I=f[ml[Qg[n]]]-(R[ml[Qg[n]]]-r)),w.length&&(q=at(yr(w.map(ht))),T=q[ml[n]]-(f[ml[n]]-r)),n==="n"?(b=Math.min(I||1/0,T||1/0),s.bottom=c=ft(c)?Math.min(c,b):b):n==="w"?(b=Math.min(I||1/0,T||1/0),s.right=c=ft(c)?Math.min(c,b):b):n==="s"?(b=Math.max(I||-1/0,T||-1/0),s.top=l=ft(l)?Math.max(l,b):b):n==="e"&&(b=Math.max(I||-1/0,T||-1/0),s.left=l=ft(l)?Math.max(l,b):b));var D=i&&i[u.id];D&&(n==="n"?(b=r+u[ps[t]]-D[ps[t]],s.bottom=c=ft(c)?Math.min(c,b):b):n==="w"?(b=r+u[ps[t]]-D[ps[t]],s.right=c=ft(c)?Math.min(c,b):b):n==="s"?(b=r-u[ps[t]]+D[ps[t]],s.top=l=ft(l)?Math.max(l,b):b):n==="e"&&(b=r-u[ps[t]]+D[ps[t]],s.left=l=ft(l)?Math.max(l,b):b))}),s}}function eu(e,t){return e.indexOf(t)!==-1}function $X(e){return!!e.host}var wb="djs-dragging",E4="djs-resizing",UX=250,t0=Math.max;function NM(e,t,n,r,i){function o(a,s){le(a,function(l){i.addDragger(l,s),n.addMarker(l,wb)})}e.on("spaceTool.selection.start",function(a){var s=n.getLayer("space"),l=a.context,c={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},u=Qe("g");He(u,r.cls("djs-crosshair-group",["no-events"])),pt(s,u);var d=Qe("path");He(d,"d",c.x),Ut(d).add("djs-crosshair"),pt(u,d);var h=Qe("path");He(h,"d",c.y),Ut(h).add("djs-crosshair"),pt(u,h),l.crosshairGroup=u}),e.on("spaceTool.selection.move",function(a){var s=a.context.crosshairGroup;Dr(s,a.x,a.y)}),e.on("spaceTool.selection.cleanup",function(a){var s=a.context,l=s.crosshairGroup;l&&cr(l)}),e.on("spaceTool.move",UX,function(a){var s=a.context,l=s.line,c=s.axis,u=s.movingShapes,d=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var h=n.getLayer("space");l=Qe("path"),He(l,"d","M0,0 L0,0"),Ut(l).add("djs-crosshair"),pt(h,l),s.line=l;var f=Qe("g");He(f,r.cls("djs-drag-group",["no-events"])),pt(n.getActiveLayer(),f),o(u,f);var m=s.movingConnections=t.filter(function(w){var R=!1;le(u,function(D){le(D.outgoing,function(M){w===M&&(R=!0)})});var I=!1;le(u,function(D){le(D.incoming,function(M){w===M&&(I=!0)})});var q=!1;le(d,function(D){le(D.outgoing,function(M){w===M&&(q=!0)})});var T=!1;return le(d,function(D){le(D.incoming,function(M){w===M&&(T=!0)})}),on(w)&&(R||q)&&(I||T)});o(m,f),s.dragGroup=f}if(!s.frameGroup){var v=Qe("g");He(v,r.cls("djs-frame-group",["no-events"])),pt(n.getActiveLayer(),v);var b=[];le(d,function(w){var R=i.addFrame(w,v),I=R.getBBox();b.push({element:R,initialBounds:I}),n.addMarker(w,E4)}),s.frameGroup=v,s.frames=b}var y={x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y};He(l,{d:y[c]});var x={x:"y",y:"x"},_={x:a.dx,y:a.dy};_[x[s.axis]]=0,Dr(s.dragGroup,_.x,_.y),le(s.frames,function(w){var R=w.element,I=w.initialBounds,q,T;s.direction==="e"?He(R,{width:t0(I.width+_.x,5)}):(q=t0(I.width-_.x,5),He(R,{width:q,x:I.x+I.width-q})),s.direction==="s"?He(R,{height:t0(I.height+_.y,5)}):(T=t0(I.height-_.y,5),He(R,{height:T,y:I.y+I.height-T}))})}}),e.on("spaceTool.cleanup",function(a){var s=a.context,l=s.movingShapes,c=s.movingConnections,u=s.resizingShapes,d=s.line,h=s.dragGroup,f=s.frameGroup;le(l,function(m){n.removeMarker(m,wb)}),le(c,function(m){n.removeMarker(m,wb)}),h&&(cr(d),cr(h)),le(u,function(m){n.removeMarker(m,E4)}),f&&cr(f)})}NM.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const zX={__init__:["spaceToolPreview"],__depends__:[Us,Va,o1,Nf,rm],spaceTool:["type",Fo],spaceToolPreview:["type",NM]};function a1(e){e.invoke(Fo,this)}a1.$inject=["injector"];We(a1,Fo);a1.prototype.calculateAdjustments=function(e,t,n,r){var i=Fo.prototype.calculateAdjustments.call(this,e,t,n,r);return i.resizingShapes=i.resizingShapes.filter(function(o){return!(B(o,"bpmn:TextAnnotation")||GX(o)&&(t==="y"&&br(o)||t==="x"&&!br(o)))}),i};function GX(e){return B(e,"bpmn:Participant")&&!Ue(e).processRef}const AM={__depends__:[zX],spaceTool:["type",a1]};function Pn(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Pn.$inject=["eventBus","injector"];Pn.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};Pn.prototype.canExecute=function(e,t){const n={command:e,context:t},r=this._getHandler(e);let i=this._fire(e,"canExecute",n);if(i===void 0){if(!r)return!1;r.canExecute&&(i=r.canExecute(t))}return i};Pn.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};Pn.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Pn.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Pn.prototype.register=function(e,t){this._setHandler(e,t)};Pn.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};Pn.prototype.canUndo=function(){return!!this._getUndoAction()};Pn.prototype.canRedo=function(){return!!this._getRedoAction()};Pn.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Pn.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Pn.prototype._internalUndo=function(e){const t=e.command,n=e.context,r=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),r.revert&&this._markDirty(r.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};Pn.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const r=t?[e+"."+t,t]:[e];let i;n=this._eventBus.createEvent(n);for(const o of r)if(i=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return i};Pn.prototype._createId=function(){return this._uid++};Pn.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};Pn.prototype._internalExecute=function(e,t){const n=e.command,r=e.context,i=this._getHandler(n);if(!i)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),i.preExecute&&i.preExecute(r),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),i.execute&&this._markDirty(i.execute(r)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),i.postExecute&&i.postExecute(r),this._fire(n,"postExecuted",e)),this._popAction()};Pn.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,r=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=r&&r.id||this._createId()),n.push(e)};Pn.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,r=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:w6("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};Pn.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=bt(e)?e:[e],t.dirty=t.dirty.concat(e))};Pn.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};Pn.prototype._revertedAction=function(e){this._stackIdx--};Pn.prototype._getHandler=function(e){return this._handlerMap[e]};Pn.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const qX={commandStack:["type",Pn]};function Bl(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var HX=250,S4=1400;function bE(e,t,n){Fe.call(this,t);var r=e.get("movePreview",!1);t.on("shape.move.start",S4,function(i){var o=i.context,a=o.shapes,s=o.validatedShapes;o.shapes=N4(a),o.validatedShapes=N4(s)}),r&&t.on("shape.move.start",HX,function(i){var o=i.context,a=o.shapes,s=[];le(a,function(l){le(l.labels,function(c){!c.hidden&&o.shapes.indexOf(c)===-1&&s.push(c),l.labelTarget&&s.push(l)})}),le(s,function(l){r.makeDraggable(o,l,!0)})}),this.preExecuted("elements.move",S4,function(i){var o=i.context,a=o.closure,s=a.enclosedElements,l=[];le(s,function(c){le(c.labels,function(u){s[u.id]||l.push(u)})}),a.addAll(l)}),this.preExecute(["connection.delete","shape.delete"],function(i){var o=i.context,a=o.connection||o.shape;Bl(a.labels,function(s){n.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(i){var o=i.context,a=o.shape,s=a.labelTarget;s&&(o.labelTargetIndex=Yx(s.labels,a),o.labelTarget=s,a.labelTarget=null)}),this.revert("shape.delete",function(i){var o=i.context,a=o.shape,s=o.labelTarget,l=o.labelTargetIndex;s&&(dr(s.labels,a,l),a.labelTarget=s)})}We(bE,Fe);bE.$inject=["injector","eventBus","modeling"];function N4(e){return Lt(e,function(t){return e.indexOf(t.labelTarget)===-1})}const VX={__init__:["labelSupport"],labelSupport:["type",bE]};var WX=251,A4=1401,k4="attach-ok";function _E(e,t,n,r,i){Fe.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",A4,function(a){var s=a.context,l=s.shapes,c=s.validatedShapes;s.shapes=KX(l),s.validatedShapes=YX(c)}),o&&t.on("shape.move.start",WX,function(a){var s=a.context,l=s.shapes,c=Tw(l);le(c,function(u){o.makeDraggable(s,u,!0),le(u.labels,function(d){o.makeDraggable(s,d,!0)})})}),o&&t.on("shape.move.start",function(a){var s=a.context,l=s.shapes;if(l.length===1){var c=l[0],u=c.host;u&&(n.addMarker(u,k4),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(u,k4)}))}}),this.preExecuted("elements.move",A4,function(a){var s=a.context,l=s.closure,c=s.shapes,u=Tw(c);le(u,function(d){l.add(d,l.topLevel[d.host.id])})}),this.postExecuted("elements.move",function(a){var s=a.context,l=s.shapes,c=s.newHost,u;c&&l.length!==1||(c?u=l:u=Lt(l,function(d){var h=d.host;return JX(d)&&!XX(l,h)}),le(u,function(d){i.updateAttachment(d,c)}))}),this.postExecuted("elements.move",function(a){var s=a.context.shapes;le(s,function(l){le(l.attachers,function(c){le(c.outgoing.slice(),function(u){var d=r.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});d||i.removeConnection(u)}),le(c.incoming.slice(),function(u){var d=r.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});d||i.removeConnection(u)})})})}),this.postExecute("shape.create",function(a){var s=a.context,l=s.shape,c=s.host;c&&i.updateAttachment(l,c)}),this.postExecute("shape.replace",function(a){var s=a.context,l=s.oldShape,c=s.newShape;Bl(l.attachers,function(u){var d=r.allowed("elements.move",{target:c,shapes:[u]});d==="attach"?i.updateAttachment(u,c):i.removeShape(u)}),c.attachers.length&&le(c.attachers,function(u){var d=n4(u,l,c);i.moveShape(u,d,u.parent)})}),this.postExecute("shape.resize",function(a){var s=a.context,l=s.shape,c=s.oldBounds,u=s.newBounds,d=l.attachers,h=s.hints||{};h.attachSupport!==!1&&le(d,function(f){var m=n4(f,c,u);i.moveShape(f,m,f.parent),le(f.labels,function(v){i.moveShape(v,m,v.parent)})})}),this.preExecute("shape.delete",function(a){var s=a.context.shape;Bl(s.attachers,function(l){i.removeShape(l)}),s.host&&i.updateAttachment(s,null)})}We(_E,Fe);_E.$inject=["injector","eventBus","canvas","rules","modeling"];function Tw(e){return Gx(Zr(e,function(t){return t.attachers||[]}))}function KX(e){var t=Tw(e);return Mz("id",e,t)}function YX(e){var t=pf(e,"id");return Lt(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function JX(e){return!!e.host}function XX(e,t){return e.indexOf(t)!==-1}const ZX={__depends__:[Va],__init__:["attachSupport"],attachSupport:["type",_E]};function $o(e){this._model=e}$o.$inject=["moddle"];$o.prototype._needsId=function(e){return Pt(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};$o.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;B(e,"bpmn:Activity")?t="Activity":B(e,"bpmn:Event")?t="Event":B(e,"bpmn:Gateway")?t="Gateway":Pt(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};$o.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};$o.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};$o.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",be({bpmnElement:e,bounds:this.createDiBounds()},t))};$o.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};$o.prototype.createDiWaypoints=function(e){var t=this;return Zr(e,function(n){return t.createDiWaypoint(n)})};$o.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Ls(e,["x","y"]))};$o.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",be({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};$o.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",be({bpmnElement:e},t))};function Ui(e,t,n){Fe.call(this,e),this._bpmnFactory=t;var r=this;function i(f){var m=f.context,v=m.hints||{},b;!m.cropped&&v.createElementsBehavior!==!1&&(b=m.connection,b.waypoints=n.getCroppedWaypoints(b),m.cropped=!0)}this.executed(["connection.layout","connection.create"],i),this.reverted(["connection.layout"],function(f){delete f.context.cropped});function o(f){var m=f.context;r.updateParent(m.shape||m.connection,m.oldParent)}function a(f){var m=f.context,v=m.shape||m.connection,b=m.parent||m.newParent;r.updateParent(v,b)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Pi(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Pi(a));function s(f){var m=f.context,v=m.oldRoot,b=v.children;le(b,function(y){B(y,"bpmn:BaseElement")&&r.updateParent(y)})}this.executed(["canvas.updateRoot"],s),this.reverted(["canvas.updateRoot"],s);function l(f){var m=f.context.shape;B(m,"bpmn:BaseElement")&&r.updateBounds(m)}this.executed(["shape.move","shape.create","shape.resize"],Pi(function(f){f.context.shape.type!=="label"&&l(f)})),this.reverted(["shape.move","shape.create","shape.resize"],Pi(function(f){f.context.shape.type!=="label"&&l(f)})),e.on("shape.changed",function(f){f.element.type==="label"&&l({context:{shape:f.element}})});function c(f){r.updateConnection(f.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],Pi(c)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],Pi(c));function u(f){r.updateConnectionWaypoints(f.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],Pi(u)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],Pi(u)),this.executed("connection.reconnect",Pi(function(f){var m=f.context,v=m.connection,b=m.oldSource,y=m.newSource,x=Ue(v),_=Ue(b),w=Ue(y);x.conditionExpression&&!Pt(w,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(m.oldConditionExpression=x.conditionExpression,delete x.conditionExpression),b!==y&&_.default===x&&(m.oldDefault=_.default,delete _.default)})),this.reverted("connection.reconnect",Pi(function(f){var m=f.context,v=m.connection,b=m.oldSource,y=m.newSource,x=Ue(v),_=Ue(b),w=Ue(y);m.oldConditionExpression&&(x.conditionExpression=m.oldConditionExpression),m.oldDefault&&(_.default=m.oldDefault,delete w.default)}));function d(f){r.updateAttachment(f.context)}this.executed(["element.updateAttachment"],Pi(d)),this.reverted(["element.updateAttachment"],Pi(d)),this.executed("element.updateLabel",Pi(h)),this.reverted("element.updateLabel",Pi(h));function h(f){const{element:m}=f.context,v=io(m),b=zt(m),y=b&&b.get("label");gu(m)||D0(m)||(v&&!y?b.set("label",t.create("bpmndi:BPMNLabel")):!v&&y&&b.set("label",void 0))}}We(Ui,Fe);Ui.$inject=["eventBus","bpmnFactory","connectionDocking"];Ui.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,r=t.host;n.attachedToRef=r&&r.businessObject};Ui.prototype.updateParent=function(e,t){if(!Gt(e)&&!(B(e,"bpmn:DataStoreReference")&&e.parent&&B(e.parent,"bpmn:Collaboration"))){var n=e.parent,r=e.businessObject,i=zt(e),o=n&&n.businessObject,a=zt(n);B(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(r,o,t&&t.businessObject),B(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),B(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(r,o),B(e,"bpmn:DataObjectReference")&&r.dataObjectRef&&this.updateSemanticParent(r.dataObjectRef,o),this.updateDiParent(i,a)}};Ui.prototype.updateBounds=function(e){var t=zt(e),n=eZ(e);if(n){var r=ca(n,t.get("bounds"));be(n,{x:e.x+r.x,y:e.y+r.y})}var i=Gt(e)?this._getLabel(t):t,o=i.bounds;o||(o=this._bpmnFactory.createDiBounds(),i.set("bounds",o)),be(o,{x:e.x,y:e.y,width:e.width,height:e.height})};Ui.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var r,i;B(n,"bpmn:Lane")&&(r=n.get("flowNodeRef"),Yn(r,e)),B(t,"bpmn:Lane")&&(i=t.get("flowNodeRef"),dr(i,e))}};Ui.prototype.updateDiConnection=function(e,t,n){var r=zt(e),i=zt(t),o=zt(n);r.sourceElement&&r.sourceElement.bpmnElement!==Ue(t)&&(r.sourceElement=t&&i),r.targetElement&&r.targetElement.bpmnElement!==Ue(n)&&(r.targetElement=n&&o)};Ui.prototype.updateDiParent=function(e,t){if(t&&!B(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(Yn(n,e),e.$parent=null)}};function QX(e){for(;e&&!B(e,"bpmn:Definitions");)e=e.$parent;return e}Ui.prototype.getLaneSet=function(e){var t,n;return B(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(B(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};Ui.prototype.updateSemanticParent=function(e,t,n){var r;if(e.$parent!==t&&!((B(e,"bpmn:DataInput")||B(e,"bpmn:DataOutput"))&&(B(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(B(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),r="lanes";else if(B(e,"bpmn:FlowElement")){if(t){if(B(t,"bpmn:Participant"))t=t.processRef;else if(B(t,"bpmn:Lane"))do t=t.$parent.$parent;while(B(t,"bpmn:Lane"))}r="flowElements"}else if(B(e,"bpmn:Artifact")){for(;t&&!B(t,"bpmn:Process")&&!B(t,"bpmn:SubProcess")&&!B(t,"bpmn:Collaboration");)if(B(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;r="artifacts"}else if(B(e,"bpmn:MessageFlow"))r="messageFlows";else if(B(e,"bpmn:Participant")){r="participants";var i=e.processRef,o;i&&(o=QX(e.$parent||t),e.$parent&&(Yn(o.get("rootElements"),i),i.$parent=null),t&&(dr(o.get("rootElements"),i),i.$parent=o))}else B(e,"bpmn:DataOutputAssociation")?r="dataOutputAssociations":B(e,"bpmn:DataInputAssociation")&&(r="dataInputAssociations");if(!r)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var a;if(e.$parent&&(a=e.$parent.get(r),Yn(a,e)),t?(a=t.get(r),a.push(e),e.$parent=t):e.$parent=null,n){var s=n.get(r);Yn(a,e),t&&(s||(s=[],t.set(r,s)),s.push(e))}}};Ui.prototype.updateConnectionWaypoints=function(e){var t=zt(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};Ui.prototype.updateConnection=function(e){var t=e.connection,n=Ue(t),r=t.source,i=Ue(r),o=t.target,a=Ue(t.target),s;if(B(n,"bpmn:DataAssociation"))B(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=i,s=e.parent||e.newParent||a,this.updateSemanticParent(n,a,s)):B(n,"bpmn:DataOutputAssociation")&&(s=e.parent||e.newParent||i,this.updateSemanticParent(n,i,s),n.targetRef=a);else{var l=B(n,"bpmn:SequenceFlow");n.sourceRef!==i&&(l&&(Yn(n.sourceRef&&n.sourceRef.get("outgoing"),n),i&&i.get("outgoing")&&i.get("outgoing").push(n)),n.sourceRef=i),n.targetRef!==a&&(l&&(Yn(n.targetRef&&n.targetRef.get("incoming"),n),a&&a.get("incoming")&&a.get("incoming").push(n)),n.targetRef=a)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,r,o)};Ui.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function Pi(e){return function(t){var n=t.context,r=n.shape||n.connection||n.element;B(r,"bpmn:BaseElement")&&e(t)}}function eZ(e){if(B(e,"bpmn:Activity")){var t=zt(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function ac(e,t){js.call(this),this._bpmnFactory=e,this._moddle=t}We(ac,js);ac.$inject=["bpmnFactory","moddle"];ac.prototype._baseCreate=js.prototype.create;ac.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,be({type:"label",di:n},Pp,t))}return this.createElement(e,t)};ac.prototype.createElement=function(e,t){t=be({},t||{});var n,r=t.businessObject,i=t.di;if(!r){if(!t.type)throw new Error("no shape type specified");r=this._bpmnFactory.create(t.type),fL(r)}if(!nZ(i)){var o=be({},i||{},{id:r.id+"_di"});e==="root"?i=this._bpmnFactory.createDiPlane(r,o):e==="connection"?i=this._bpmnFactory.createDiEdge(r,o):i=this._bpmnFactory.createDiShape(r,o)}B(r,"bpmn:Group")&&(t=be({isFrame:!0},t)),t=tZ(r,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=Rw(i,t,"isExpanded")),Pt(r,["bpmn:Lane","bpmn:Participant"])&&(t=Rw(i,t,"isHorizontal")),B(r,"bpmn:SubProcess")&&(t.collapsed=!Dt(r,i)),B(r,"bpmn:ExclusiveGateway")&&(xi(i,"isMarkerVisible")?i.isMarkerVisible===void 0&&(i.isMarkerVisible=!1):i.isMarkerVisible=!0),Cr(t.triggeredByEvent)&&(r.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Cr(t.cancelActivity)&&(r.cancelActivity=t.cancelActivity,delete t.cancelActivity);var a,s;return t.eventDefinitionType&&(a=r.get("eventDefinitions")||[],s=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(s.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(s),s.$parent=r,r.eventDefinitions=a,delete t.eventDefinitionType),n=this.getDefaultSize(r,i),t=be({id:r.id},n,t,{businessObject:r,di:i}),this._baseCreate(e,t)};ac.prototype.getDefaultSize=function(e,t){var n=Ue(e);if(t=t||zt(e),B(n,"bpmn:SubProcess"))return Dt(n,t)?{width:350,height:200}:{width:100,height:80};if(B(n,"bpmn:Task"))return{width:100,height:80};if(B(n,"bpmn:Gateway"))return{width:50,height:50};if(B(n,"bpmn:Event"))return{width:36,height:36};if(B(n,"bpmn:Participant")){var r=t.isHorizontal===void 0||t.isHorizontal===!0;return Dt(n,t)?r?{width:600,height:250}:{width:250,height:600}:r?{width:400,height:60}:{width:60,height:400}}return B(n,"bpmn:Lane")?{width:400,height:100}:B(n,"bpmn:DataObjectReference")?{width:36,height:50}:B(n,"bpmn:DataStoreReference")?{width:50,height:50}:B(n,"bpmn:TextAnnotation")?{width:100,height:30}:B(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};ac.prototype.createParticipantShape=function(e){return Tr(e)||(e={isExpanded:e}),e=be({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function tZ(e,t,n){return le(n,function(r){t=Rw(e,t,r)}),t}function Rw(e,t,n){return t[n]===void 0?t:(e[n]=t[n],Io(t,[n]))}function nZ(e){return Pt(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function s1(e,t){this._modeling=e,this._canvas=t}s1.$inject=["modeling","canvas"];s1.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,r=e.alignment;le(n,function(i){var o={x:0,y:0};Cr(r.left)?o.x=r.left-i.x:Cr(r.right)?o.x=r.right-i.width-i.x:Cr(r.center)?o.x=r.center-Math.round(i.width/2)-i.x:Cr(r.top)?o.y=r.top-i.y:Cr(r.bottom)?o.y=r.bottom-i.height-i.y:Cr(r.middle)&&(o.y=r.middle-Math.round(i.height/2)-i.y),t.moveElements([i],o,i.parent)})};s1.prototype.postExecute=function(e){};function l1(e){this._modeling=e}l1.$inject=["modeling"];l1.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,r=e.shape,i=e.hints||{};r=e.shape=this._modeling.createShape(r,e.position,n,{attach:i.attach}),e.shape=r};l1.prototype.postExecute=function(e){var t=e.hints||{};rZ(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function rZ(e,t){return Yl(e.outgoing,function(n){return n.target===t})}function c1(e,t){this._canvas=e,this._layouter=t}c1.$inject=["canvas","layouter"];c1.prototype.execute=function(e){var t=e.connection,n=e.source,r=e.target,i=e.parent,o=e.parentIndex,a=e.hints;if(!n||!r)throw new Error("source and target required");if(!i)throw new Error("parent required");return t.source=n,t.target=r,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,i,o),t};c1.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var n0=Math.round;function wE(e){this._modeling=e}wE.$inject=["modeling"];wE.prototype.preExecute=function(e){var t=e.elements,n=e.parent,r=e.parentIndex,i=e.position,o=e.hints,a=this._modeling;le(t,function(d){ft(d.x)||(d.x=0),ft(d.y)||(d.y=0)});var s=Lt(t,function(d){return!d.hidden}),l=yr(s);le(t,function(d){on(d)&&(d.waypoints=Zr(d.waypoints,function(h){return{x:n0(h.x-l.x-l.width/2+i.x),y:n0(h.y-l.y-l.height/2+i.y)}})),be(d,{x:n0(d.x-l.x-l.width/2+i.x),y:n0(d.y-l.y-l.height/2+i.y)})});var c=ky(t),u={};le(t,function(d){if(on(d)){u[d.id]=ft(r)?a.createConnection(u[d.source.id],u[d.target.id],r,d,d.parent||n,o):a.createConnection(u[d.source.id],u[d.target.id],d,d.parent||n,o);return}var h=be({},o);c.indexOf(d)===-1&&(h.autoResize=!1),Gt(d)&&(h=Io(h,["attach"])),u[d.id]=ft(r)?a.createShape(d,Ls(d,["x","y","width","height"]),d.parent||n,r,h):a.createShape(d,Ls(d,["x","y","width","height"]),d.parent||n,h)}),e.elements=qx(u)};var C4=Math.round;function sc(e){this._canvas=e}sc.$inject=["canvas"];sc.prototype.execute=function(e){var t=e.shape,n=e.position,r=e.parent,i=e.parentIndex;if(!r)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?be(t,n):be(t,{x:n.x-C4(t.width/2),y:n.y-C4(t.height/2)}),this._canvas.addShape(t,r,i),t};sc.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function om(e){sc.call(this,e)}We(om,sc);om.$inject=["canvas"];var iZ=sc.prototype.execute;om.prototype.execute=function(e){var t=e.shape;return aZ(t),t.labelTarget=e.labelTarget,iZ.call(this,e)};var oZ=sc.prototype.revert;om.prototype.revert=function(e){return e.shape.labelTarget=null,oZ.call(this,e)};function aZ(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function am(e,t){this._canvas=e,this._modeling=t}am.$inject=["canvas","modeling"];am.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;Bl(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),Bl(n.outgoing,function(r){t.removeConnection(r,{nested:!0})})};am.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Yx(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};am.prototype.revert=function(e){var t=e.connection,n=e.parent,r=e.parentIndex;return t.source=e.source,t.target=e.target,dr(n.children,t,r),this._canvas.addConnection(t,n),t};function xE(e,t){this._modeling=e,this._elementRegistry=t}xE.$inject=["modeling","elementRegistry"];xE.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,r=e.elements;le(r,function(i){n.get(i.id)&&(i.waypoints?t.removeConnection(i):t.removeShape(i))})};function sm(e,t){this._canvas=e,this._modeling=t}sm.$inject=["canvas","modeling"];sm.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Bl(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),Bl(n.outgoing,function(r){t.removeConnection(r,{nested:!0})}),Bl(n.children,function(r){on(r)?t.removeConnection(r,{nested:!0}):t.removeShape(r,{nested:!0})})};sm.prototype.execute=function(e){var t=this._canvas,n=e.shape,r=n.parent;return e.oldParent=r,e.oldParentIndex=Yx(r.children,n),t.removeShape(n),n};sm.prototype.revert=function(e){var t=this._canvas,n=e.shape,r=e.oldParent,i=e.oldParentIndex;return dr(r.children,n,i),t.addShape(n,r),n};function u1(e){this._modeling=e}u1.$inject=["modeling"];var P4={x:"y",y:"x"};u1.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,r=e.axis,i=e.dimension;function o(b,y){b.range.min=Math.min(y[r],b.range.min),b.range.max=Math.max(y[r]+y[i],b.range.max)}function a(b){return b[r]+b[i]/2}function s(b){return b.length-1}function l(b){return b.max-b.min}function c(b,y){var x={y:0};x[r]=b-a(y),x[r]&&(x[P4[r]]=0,t.moveElements([y],x,y.parent))}var u=n[0],d=s(n),h=n[d],f,m,v=0;le(n,function(b,y){var x,_,w;if(b.elements.length<2){y&&y!==n.length-1&&(o(b,b.elements[0]),v+=l(b.range));return}x=Ua(b.elements,r),_=x[0],y===d&&(_=x[s(x)]),w=a(_),b.range=null,le(x,function(R){if(c(w,R),b.range===null){b.range={min:R[r],max:R[r]+R[i]};return}o(b,R)}),y&&y!==n.length-1&&(v+=l(b.range))}),m=Math.abs(h.range.min-u.range.max),f=Math.round((m-v)/(n.length-1)),!(f<n.length-1)&&le(n,function(b,y){var x={},_;b===u||b===h||(_=n[y-1],b.range.max=0,le(b.elements,function(w,R){x[P4[r]]=0,x[r]=_.range.max-w[r]+f,b.range.min!==w[r]&&(x[r]+=w[r]-b.range.min),x[r]&&t.moveElements([w],x,w.parent),b.range.max=Math.max(w[r]+w[i],R?b.range.max:0)}))})};u1.prototype.postExecute=function(e){};function d1(e,t){this._layouter=e,this._canvas=t}d1.$inject=["layouter","canvas"];d1.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return be(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};d1.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function EE(){}EE.prototype.execute=function(e){var t=e.connection,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=Yn(o.children,t),dr(r.children,t,i),t.parent=r,le(t.waypoints,function(a){a.x+=n.x,a.y+=n.y,a.original&&(a.original.x+=n.x,a.original.y+=n.y)}),t};EE.prototype.revert=function(e){var t=e.connection,n=t.parent,r=e.oldParent,i=e.oldParentIndex,o=e.delta;return Yn(n.children,t),dr(r.children,t,i),t.parent=r,le(t.waypoints,function(a){a.x-=o.x,a.y-=o.y,a.original&&(a.original.x-=o.x,a.original.y-=o.y)}),t};function SE(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}SE.prototype.add=function(e,t){return this.addAll([e],t)};SE.prototype.addAll=function(e,t){var n=SG(e,!!t,this);return be(this,n),this};function lm(e){this._modeling=e}lm.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};lm.prototype.moveClosure=function(e,t,n,r,i){var o=this._modeling,a=e.allShapes,s=e.allConnections,l=e.enclosedConnections,c=e.topLevel,u=!1;i&&i.parent===n&&(u=!0),le(a,function(d){o.moveShape(d,t,c[d.id]&&!u&&n,{recurse:!1,layout:!1})}),le(s,function(d){var h=!!a[d.source.id],f=!!a[d.target.id];l[d.id]&&h&&f?o.moveConnection(d,t,c[d.id]&&!u&&n):o.layoutConnection(d,{connectionStart:h&&K5(d,d.source,t),connectionEnd:f&&Y5(d,d.target,t)})})};lm.prototype.getClosure=function(e){return new SE().addAll(e,!0)};function f1(e){this._helper=new lm(e)}f1.$inject=["modeling"];f1.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};f1.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function Tu(e){this._modeling=e,this._helper=new lm(e)}Tu.$inject=["modeling"];Tu.prototype.execute=function(e){var t=e.shape,n=e.delta,r=e.newParent||t.parent,i=e.newParentIndex,o=t.parent;return e.oldBounds=Ls(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=Yn(o.children,t),dr(r.children,t,i),be(t,{parent:r,x:t.x+n.x,y:t.y+n.y}),t};Tu.prototype.postExecute=function(e){var t=e.shape,n=e.delta,r=e.hints,i=this._modeling;r.layout!==!1&&(le(t.incoming,function(o){i.layoutConnection(o,{connectionEnd:Y5(o,t,n)})}),le(t.outgoing,function(o){i.layoutConnection(o,{connectionStart:K5(o,t,n)})})),r.recurse!==!1&&this.moveChildren(e)};Tu.prototype.revert=function(e){var t=e.shape,n=e.oldParent,r=e.oldParentIndex,i=e.delta;return dr(n.children,t,r),be(t,{parent:n,x:t.x-i.x,y:t.y-i.y}),t};Tu.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};Tu.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function cm(e){this._modeling=e}cm.$inject=["modeling"];cm.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,r=e.connection,i=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return bt(i)&&(e.oldWaypoints=r.waypoints,r.waypoints=i),t&&(e.oldSource=r.source,r.source=t),n&&(e.oldTarget=r.target,r.target=n),r};cm.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,r=e.newTarget,i=e.dockingOrPoints,o=e.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(n&&(!r||o.docking==="source")&&(a.connectionStart=a.connectionStart||T4(bt(i)?i[0]:i)),r&&(!n||o.docking==="target")&&(a.connectionEnd=a.connectionEnd||T4(bt(i)?i[i.length-1]:i)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,a))};cm.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,r=e.oldWaypoints,i=e.connection;return t&&(i.source=t),n&&(i.target=n),r&&(i.waypoints=r),i};function T4(e){return e.original||e}function Gs(e,t){this._modeling=e,this._rules=t}Gs.$inject=["modeling","rules"];Gs.prototype.preExecute=function(e){var t=this,n=this._modeling,r=this._rules,i=e.oldShape,o=e.newData,a=e.hints||{},s;function l(m,v,b){return r.allowed("connection.reconnect",{connection:b,source:m,target:v})}var c={x:o.x,y:o.y},u={x:i.x,y:i.y,width:i.width,height:i.height};s=e.newShape=e.newShape||t.createShape(o,c,i.parent,a),i.host&&n.updateAttachment(s,i.host);var d;a.moveChildren!==!1&&(d=i.children.slice(),n.moveElements(d,{x:0,y:0},s,a));var h=i.incoming.slice(),f=i.outgoing.slice();le(h,function(m){var v=m.source,b=l(v,s,m);b&&t.reconnectEnd(m,s,Qy(m,s,u),a)}),le(f,function(m){var v=m.target,b=l(s,v,m);b&&t.reconnectStart(m,s,Zy(m,s,u),a)})};Gs.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};Gs.prototype.execute=function(e){};Gs.prototype.revert=function(e){};Gs.prototype.createShape=function(e,t,n,r){return this._modeling.createShape(e,t,n,r)};Gs.prototype.reconnectStart=function(e,t,n,r){this._modeling.reconnectStart(e,t,n,r)};Gs.prototype.reconnectEnd=function(e,t,n,r){this._modeling.reconnectEnd(e,t,n,r)};function um(e){this._modeling=e}um.$inject=["modeling"];um.prototype.execute=function(e){var t=e.shape,n=e.newBounds,r=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(r&&(n.width<r.width||n.height<r.height))throw new Error("width and height cannot be less than minimum height and width");if(!r&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},be(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};um.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,r=e.oldBounds,i=e.hints||{};i.layout!==!1&&(le(n.incoming,function(o){t.layoutConnection(o,{connectionEnd:Qy(o,n,r)})}),le(n.outgoing,function(o){t.layoutConnection(o,{connectionStart:Zy(o,n,r)})}))};um.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return be(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function lc(e){this._modeling=e}lc.$inject=["modeling"];lc.prototype.preExecute=function(e){var t=e.delta,n=e.direction,r=e.movingShapes,i=e.resizingShapes,o=e.start,a={};this.moveShapes(r,t),le(i,function(s){a[s.id]=lZ(s)}),this.resizeShapes(i,t,n),this.updateConnectionWaypoints(IX(r,i),t,n,o,r,i,a)};lc.prototype.execute=function(){};lc.prototype.revert=function(){};lc.prototype.moveShapes=function(e,t){var n=this;le(e,function(r){n._modeling.moveShape(r,t,null,{autoResize:!1,layout:!1,recurse:!1})})};lc.prototype.resizeShapes=function(e,t,n){var r=this;le(e,function(i){var o=DX(i,n,t);r._modeling.resizeShape(i,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})};lc.prototype.updateConnectionWaypoints=function(e,t,n,r,i,o,a){var s=this,l=i.concat(o);le(e,function(c){var u=c.source,d=c.target,h=sZ(c),f=kM(n),m={};gl(l,u)&&gl(l,d)?(h=Zr(h,function(v){return L4(v,r,n)&&(v[f]=v[f]+t[f]),v.original&&L4(v.original,r,n)&&(v.original[f]=v.original[f]+t[f]),v}),s._modeling.updateWaypoints(c,h,{labelBehavior:!1})):(gl(l,u)||gl(l,d))&&(gl(i,u)?m.connectionStart=K5(c,u,t):gl(i,d)?m.connectionEnd=Y5(c,d,t):gl(o,u)?m.connectionStart=Zy(c,u,a[u.id]):gl(o,d)&&(m.connectionEnd=Qy(c,d,a[d.id])),s._modeling.layoutConnection(c,m))})};function R4(e){return be({},e)}function sZ(e){return Zr(e.waypoints,function(t){return t=R4(t),t.original&&(t.original=R4(t.original)),t})}function kM(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function L4(e,t,n){var r=kM(n);if(/e|s/.test(n))return e[r]>t;if(/n|w/.test(n))return e[r]<t}function gl(e,t){return e.indexOf(t)!==-1}function lZ(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function h1(e){this._modeling=e}h1.$inject=["modeling"];h1.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=CM(n),t.collapsed=!t.collapsed;var r=PM(n,t.collapsed);return[t].concat(r)};h1.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,r=t.children,i=TM(r,n);return t.collapsed=!t.collapsed,[t].concat(i)};function CM(e){var t={};return le(e,function(n){t[n.id]=n.hidden,n.children&&(t=be({},t,CM(n.children)))}),t}function PM(e,t){var n=[];return le(e,function(r){r.hidden=t,n=n.concat(r),r.children&&(n=n.concat(PM(r.children,r.collapsed||t)))}),n}function TM(e,t){var n=[];return le(e,function(r){r.hidden=t[r.id],n=n.concat(r),r.children&&(n=n.concat(TM(r.children,t)))}),n}function p1(e){this._modeling=e}p1.$inject=["modeling"];p1.prototype.execute=function(e){var t=e.shape,n=e.newHost,r=t.host;return e.oldHost=r,e.attacherIdx=RM(r,t),LM(n,t),t.host=n,t};p1.prototype.revert=function(e){var t=e.shape,n=e.newHost,r=e.oldHost,i=e.attacherIdx;return t.host=r,RM(n,t),LM(r,t,i),t};function RM(e,t){return Yn(e&&e.attachers,t)}function LM(e,t,n){if(e){var r=e.attachers;r||(e.attachers=r=[]),dr(r,t,n)}}function NE(){}NE.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};NE.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function en(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var r=this;e.on("diagram.init",function(){r.registerHandlers(n)})}en.$inject=["eventBus","elementFactory","commandStack"];en.prototype.getHandlers=function(){return{"shape.append":l1,"shape.create":sc,"shape.delete":sm,"shape.move":Tu,"shape.resize":um,"shape.replace":Gs,"shape.toggleCollapse":h1,spaceTool:lc,"label.create":om,"connection.create":c1,"connection.delete":am,"connection.move":EE,"connection.layout":d1,"connection.updateWaypoints":NE,"connection.reconnect":cm,"elements.create":wE,"elements.move":f1,"elements.delete":xE,"elements.distribute":u1,"elements.align":s1,"element.updateAttachment":p1}};en.prototype.registerHandlers=function(e){le(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};en.prototype.moveShape=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=null);var o={shape:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("shape.move",o)};en.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};en.prototype.moveElements=function(e,t,n,r){r=r||{};var i=r.attach,o=n,a;i===!0?(a=n,o=n.parent):i===!1&&(a=null);var s={shapes:e,delta:t,newParent:o,newHost:a,hints:r};this._commandStack.execute("elements.move",s)};en.prototype.moveConnection=function(e,t,n,r,i){typeof r=="object"&&(i=r,r=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:r,hints:i||{}};this._commandStack.execute("connection.move",o)};en.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};en.prototype.createConnection=function(e,t,n,r,i,o){typeof n=="object"&&(o=i,i=r,r=n,n=void 0),r=this._create("connection",r);var a={source:e,target:t,parent:i,parentIndex:n,connection:r,hints:o};return this._commandStack.execute("connection.create",a),a.connection};en.prototype.createShape=function(e,t,n,r,i){typeof r!="number"&&(i=r,r=void 0),i=i||{};var o=i.attach,a,s;e=this._create("shape",e),o?(a=n.parent,s=n):a=n;var l={position:t,shape:e,parent:a,parentIndex:r,host:s,hints:i};return this._commandStack.execute("shape.create",l),l.shape};en.prototype.createElements=function(e,t,n,r,i){bt(e)||(e=[e]),typeof r!="number"&&(i=r,r=void 0),i=i||{};var o={position:t,elements:e,parent:n,parentIndex:r,hints:i};return this._commandStack.execute("elements.create",o),o.elements};en.prototype.createLabel=function(e,t,n,r){n=this._create("label",n);var i={labelTarget:e,position:t,parent:r||e.parent,shape:n};return this._commandStack.execute("label.create",i),i.shape};en.prototype.appendShape=function(e,t,n,r,i){i=i||{},t=this._create("shape",t);var o={source:e,position:n,target:r,shape:t,connection:i.connection,connectionParent:i.connectionParent,hints:i};return this._commandStack.execute("shape.append",o),o.shape};en.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};en.prototype.distributeElements=function(e,t,n){var r={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",r)};en.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};en.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};en.prototype.replaceShape=function(e,t,n){var r={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",r),r.newShape};en.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};en.prototype.resizeShape=function(e,t,n,r){var i={shape:e,newBounds:t,minBounds:n,hints:r};this._commandStack.execute("shape.resize",i)};en.prototype.createSpace=function(e,t,n,r,i){var o={delta:n,direction:r,movingShapes:e,resizingShapes:t,start:i};this._commandStack.execute("spaceTool",o)};en.prototype.updateWaypoints=function(e,t,n){var r={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",r)};en.prototype.reconnect=function(e,t,n,r,i){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:r,hints:i||{}};this._commandStack.execute("connection.reconnect",o)};en.prototype.reconnectStart=function(e,t,n,r){r||(r={}),this.reconnect(e,t,e.target,n,be(r,{docking:"source"}))};en.prototype.reconnectEnd=function(e,t,n,r){r||(r={}),this.reconnect(e,e.source,t,n,be(r,{docking:"target"}))};en.prototype.connect=function(e,t,n,r){return this.createConnection(e,t,n||{},e.parent,r)};en.prototype._create=function(e,t){return iq(t)?t:this._elementFactory.create(e,t)};en.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function dm(e){this._elementRegistry=e}dm.$inject=["elementRegistry"];dm.prototype.execute=function(e){var t=e.element,n=e.moddleElement,r=e.properties;if(!n)throw new Error("<moddleElement> required");var i=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||cZ(n,Pv(r));return OM(n,r),e.oldProperties=o,e.changed=i,i};dm.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,r=e.changed;return OM(n,t),r};dm.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return B(e,"bpmn:DataObject")?uZ(e,t):[]};function cZ(e,t){return Bi(t,function(n,r){return n[r]=e.get(r),n},{})}function OM(e,t){le(t,function(n,r){e.set(r,n)})}function uZ(e,t){return t.filter(function(n){return B(n,"bpmn:DataObjectReference")&&Ue(n).dataObjectRef===e})}var Nh="default",ks="id",MM="di",dZ={width:0,height:0};function fm(e,t,n,r){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=r}fm.$inject=["elementRegistry","moddle","modeling","textRenderer"];fm.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var r=this._elementRegistry,i=this._moddle.ids,o=t.businessObject,a=gZ(e.properties),s=e.oldProperties||fZ(t,a);return IM(a,o)&&(i.unclaim(o[ks]),r.updateId(t,a[ks]),i.claim(a[ks],o)),Nh in a&&(a[Nh]&&n.push(r.get(a[Nh].id)),o[Nh]&&n.push(r.get(o[Nh].id))),DM(t,a),e.oldProperties=s,e.changed=n,n};fm.prototype.postExecute=function(e){var t=e.element,n=t.label,r=n&&Ue(n).name;if(r){var i=this._textRenderer.getExternalLabelBounds(n,r);this._modeling.resizeShape(n,i,dZ)}};fm.prototype.revert=function(e){var t=e.element,n=e.properties,r=e.oldProperties,i=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return DM(t,r),IM(n,i)&&(a.unclaim(n[ks]),o.updateId(t,r[ks]),a.claim(r[ks],i)),e.changed};function IM(e,t){return ks in e&&e[ks]!==t[ks]}function fZ(e,t){var n=Pv(t),r=e.businessObject,i=zt(e);return Bi(n,function(o,a){return a!==MM?o[a]=r.get(a):o[a]=hZ(i,Pv(t.di)),o},{})}function hZ(e,t){return Bi(t,function(n,r){return n[r]=e&&e.get(r),n},{})}function DM(e,t){var n=e.businessObject,r=zt(e);le(t,function(i,o){o!==MM?n.set(o,i):r&&pZ(r,i)})}function pZ(e,t){le(t,function(n,r){e.set(r,n)})}var mZ=["default"];function gZ(e){var t=be({},e);return mZ.forEach(function(n){n in e&&(t[n]=Ue(t[n]))}),t}function m1(e,t){this._canvas=e,this._modeling=t}m1.$inject=["canvas","modeling"];m1.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=t.getRootElement(),o=i.businessObject,a=o.$parent,s=zt(i);return t.setRootElement(n),t.removeRootElement(i),dr(a.rootElements,r),r.$parent=a,Yn(a.rootElements,o),o.$parent=null,i.di=null,s.bpmnElement=r,n.di=s,e.oldRoot=i,[]};m1.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,i=e.oldRoot,o=i.businessObject,a=r.$parent,s=zt(n);return t.setRootElement(i),t.removeRootElement(n),Yn(a.rootElements,r),r.$parent=null,dr(a.rootElements,o),o.$parent=a,n.di=null,s.bpmnElement=o,i.di=s,[]};function AE(e,t){this._modeling=e,this._spaceTool=t}AE.$inject=["modeling","spaceTool"];AE.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,r=e.shape,i=e.location,o=Co(r),a=o===r,s=a?r:r.parent,l=ic(s),c=br(r);if(c?i==="left"?i="top":i==="right"&&(i="bottom"):i==="top"?i="left":i==="bottom"&&(i="right"),!l.length){var u=c?{x:r.x+No,y:r.y,width:r.width-No,height:r.height}:{x:r.x,y:r.y+No,width:r.width,height:r.height-No};n.createShape({type:"bpmn:Lane",isHorizontal:c},u,s)}var d=[];Su(o,function(w){return d.push(w),w.label&&d.push(w.label),w===r?[]:Lt(w.children,function(R){return R!==r})});var h,f,m,v,b;i==="top"?(h=-120,f=r.y,m=f+10,v="n",b="y"):i==="left"?(h=-120,f=r.x,m=f+10,v="w",b="x"):i==="bottom"?(h=120,f=r.y+r.height,m=f-10,v="s",b="y"):i==="right"&&(h=120,f=r.x+r.width,m=f-10,v="e",b="x");var y=t.calculateAdjustments(d,b,h,m),x=c?{x:0,y:h}:{x:h,y:0};t.makeSpace(y.movingShapes,y.resizingShapes,x,v,m);var _=c?{x:r.x+(a?No:0),y:f-(i==="top"?120:0),width:r.width-(a?No:0),height:120}:{x:f-(i==="left"?120:0),y:r.y+(a?No:0),width:120,height:r.height-(a?No:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:c},_,s)};function kE(e){this._modeling=e}kE.$inject=["modeling"];kE.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,r=e.count,i=ic(n),o=i.length;if(o>r)throw new Error(`more than <${r}> child lanes`);var a=br(n),s=a?n.height:n.width,l=Math.round(s/r),c,u,d,h;for(h=0;h<r;h++)h===r-1?c=s-l*h:c=l,u=a?{x:n.x+No,y:n.y+h*l,width:n.width-No,height:c}:{x:n.x+h*l,y:n.y+No,width:c,height:n.height-No},h<o?t.resizeShape(i[h],u):(d={type:"bpmn:Lane",isHorizontal:a},t.createShape(d,u,n))};function hm(e,t){this._modeling=e,this._spaceTool=t}hm.$inject=["modeling","spaceTool"];hm.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,r=e.balanced;r!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};hm.prototype.resizeBalanced=function(e,t){var n=this._modeling,r=qY(e,t);n.resizeShape(e,t),r.forEach(function(i){n.resizeShape(i.shape,i.newBounds)})};hm.prototype.resizeSpace=function(e,t){var n=this._spaceTool,r=at(e),i=at(t),o=DO(i,r),a=Co(e),s=[],l=[];Su(a,function(m){return s.push(m),(B(m,"bpmn:Lane")||B(m,"bpmn:Participant"))&&l.push(m),m.children});var c,u,d,h,f;(o.bottom||o.top)&&(c=o.bottom||o.top,u=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),d=o.bottom?"s":"n",h=o.top>0||o.bottom<0?-c:c,f=n.calculateAdjustments(s,"y",h,u),n.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:c},d)),(o.left||o.right)&&(c=o.right||o.left,u=e.x+(o.right?e.width:0)+(o.right?-10:100),d=o.right?"e":"w",h=o.left>0||o.right<0?-c:c,f=n.calculateAdjustments(l,"x",h,u),n.makeSpace(f.movingShapes,f.resizingShapes,{x:c,y:0},d))};var Ip="flowNodeRef",CE="lanes";function pm(e){this._elementRegistry=e}pm.$inject=["elementRegistry"];pm.prototype._computeUpdates=function(e,t){var n=[],r=[],i={},o=[];function a(u,d){var h=at(d),f={x:u.x+u.width/2,y:u.y+u.height/2};return f.x>h.left&&f.x<h.right&&f.y>h.top&&f.y<h.bottom}function s(u){n.indexOf(u)===-1&&(o.push(u),n.push(u))}function l(u){var d=Co(u);return i[d.id]||(i[d.id]=Jy(d)),i[d.id]}function c(u){if(!u.parent)return[];var d=l(u);return d.filter(function(h){return a(u,h)}).map(function(h){return h.businessObject})}return t.forEach(function(u){var d=Co(u);if(!(!d||n.indexOf(d)!==-1)){var h=d.children.filter(function(f){return B(f,"bpmn:FlowNode")});h.forEach(s),n.push(d)}}),e.forEach(s),o.forEach(function(u){var d=u.businessObject,h=d.get(CE),f=h.slice(),m=c(u);r.push({flowNode:d,remove:f,add:m})}),t.forEach(function(u){var d=u.businessObject;u.parent||d.get(Ip).forEach(function(h){r.push({flowNode:h,remove:[d],add:[]})})}),r};pm.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var r=n.flowNode,i=r.get(CE);n.remove.forEach(function(o){Yn(i,o),Yn(o.get(Ip),r)}),n.add.forEach(function(o){dr(i,o),dr(o.get(Ip),r)})}),[]};pm.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var r=n.flowNode,i=r.get(CE);n.add.forEach(function(o){Yn(i,o),Yn(o.get(Ip),r)}),n.remove.forEach(function(o){dr(i,o),dr(o.get(Ip),r)})}),[]};function g1(e){this._moddle=e}g1.$inject=["moddle"];g1.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.claim(n,r):t.unclaim(n),[]};g1.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,r=e.element,i=e.claiming;return i?t.unclaim(n):t.claim(n,r),[]};var vZ={fill:void 0,stroke:void 0};function PE(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(ji(t)){var n=yZ(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}PE.$inject=["commandStack"];PE.prototype.postExecute=function(e){var t=e.elements,n=e.colors||vZ,r=this,i={};"fill"in n&&be(i,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&be(i,{"border-color":this._normalizeColor(n.stroke)}),le(t,function(o){var a=on(o)?Ls(i,["border-color"]):i,s=zt(o);if(bZ(a),Gt(o))r._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:s.label,properties:{color:i["border-color"]}});else{if(!Pt(s,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;r._commandStack.execute("element.updateProperties",{element:o,properties:{di:a}})}})};function yZ(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function bZ(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var _Z={width:0,height:0};function jM(e,t,n){function r(l,c){var u=l.label||l,d=l.labelTarget||l;return sV(u,c),[u,d]}function i(l){var c=l.element,u=c.businessObject,d=l.newLabel;if(!Gt(c)&&gu(c)&&!Oy(c)&&!O4(d)){var h=7,f=s5(c);f={x:f.x,y:f.y+h},e.createLabel(c,f,{id:u.id+"_label",businessObject:u,di:c.di})}}function o(l){return l.oldLabel=io(l.element),r(l.element,l.newLabel)}function a(l){return r(l.element,l.oldLabel)}function s(l){var c=l.element,u=c.label||c,d=l.newLabel,h=l.newBounds,f=l.hints||{};if(!(!Gt(u)&&!B(u,"bpmn:TextAnnotation"))){if(Gt(u)&&O4(d)){f.removeShape!==!1&&e.removeShape(u,{unsetLabel:!1});return}var m=io(c);typeof h>"u"&&(h=t.getExternalLabelBounds(u,m)),h&&e.resizeShape(u,h,_Z)}}this.preExecute=i,this.execute=o,this.revert=a,this.postExecute=s}jM.$inject=["modeling","textRenderer","bpmnFactory"];function O4(e){return!e||!e.trim()}function ni(e,t,n,r){en.call(this,e,t,n),this._bpmnRules=r}We(ni,en);ni.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];ni.prototype.getHandlers=function(){var e=en.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=dm,e["element.updateProperties"]=fm,e["canvas.updateRoot"]=m1,e["lane.add"]=AE,e["lane.resize"]=hm,e["lane.split"]=kE,e["lane.updateRefs"]=pm,e["id.updateClaim"]=g1,e["element.setColor"]=PE,e["element.updateLabel"]=jM,e};ni.prototype.updateLabel=function(e,t,n,r){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:r||{}})};ni.prototype.connect=function(e,t,n,r){var i=this._bpmnRules;if(n||(n=i.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,r)};ni.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};ni.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};ni.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};ni.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};ni.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};ni.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};ni.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};ni.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};ni.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};ni.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};ni.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function BM(){}BM.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||ht(t.source||e.source),t.connectionEnd||ht(t.target||e.target)]};var r0=20,wZ=5,Hv=Math.round,M4=20,xZ={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function EZ(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function SZ(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function FM(e,t,n){var r=ti(t,e,wZ),i=n.split(":")[0],o=Hv((t.x-e.x)/2+e.x),a=Hv((t.y-e.y)/2+e.y),s,l,c=SZ(i,r),u=/h|r|l/.test(i),d=!1,h=!1;return c?(s=u?{x:o,y:e.y}:{x:e.x,y:a},l=u?"h:h":"v:v"):(d=EZ(r,i),l=u?"h:v":"v:h",d?u?(h=a===e.y,s={x:e.x+r0*(/l/.test(i)?-1:1),y:h?a+r0:a}):(h=o===e.x,s={x:h?o+r0:o,y:e.y+r0*(/t/.test(i)?-1:1)}):s={x:o,y:a}),{waypoints:TE(e,s,l).concat(s),directions:l,turnNextDirections:h}}function NZ(e,t,n){return FM(e,t,n)}function AZ(e,t,n){var r=FM(t,e,I4(n));return{waypoints:r.waypoints.slice().reverse(),directions:I4(r.directions),turnNextDirections:r.turnNextDirections}}function kZ(e,t){var n=e.directions.split(":")[1],r=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(r=r=="h"?"v":"h");var i=n+":"+r,o=TE(e.waypoints[e.waypoints.length-1],t.waypoints[0],i);return{waypoints:o,directions:i}}function I4(e){return e.split(":").reverse().join(":")}function CZ(e,t,n){var r=Hv((t.x-e.x)/2+e.x),i=Hv((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:r,y:e.y},{x:r,y:t.y}];if(n==="v:v")return[{x:e.x,y:i},{x:t.x,y:i}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function TE(e,t,n){if(n=n||"h:h",!jZ(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if($M(n)){var r=NZ(e,t,n),i=AZ(e,t,n),o=kZ(r,i);return[].concat(r.waypoints,o.waypoints,i.waypoints)}return CZ(e,t,n)}function PZ(e,t,n){var r=TE(e,t,n);return r.unshift(e),r.push(t),UM(r)}function TZ(e,t,n,r,i){var o=i&&i.preferredLayouts||[],a=Lz(o,"straight")[0]||"h:h",s=xZ[a]||0,l=ti(e,t,s),c=DZ(l,a);n=n||ht(e),r=r||ht(t);var u=c.split(":"),d=j4(n,e,u[0],BZ(l)),h=j4(r,t,u[1],l);return PZ(d,h,c)}function RZ(e,t,n,r,i,o){bt(n)&&(i=n,o=r,n=ht(e),r=ht(t)),o=be({preferredLayouts:[]},o),i=i||[];var a=o.preferredLayouts,s=a.indexOf("straight")!==-1,l;return l=s&&OZ(e,t,n,r,o),l||(l=o.connectionEnd&&IZ(t,e,r,i),l)||(l=o.connectionStart&&MZ(e,t,n,i),l)?l:!o.connectionStart&&!o.connectionEnd&&i&&i.length?i:TZ(e,t,n,r,o)}function LZ(e,t,n){return e>=t&&e<=n}function D4(e,t,n){var r={x:"width",y:"height"};return LZ(t[e],n[e],n[e]+n[r[e]])}function OZ(e,t,n,r,i){var o={},a,s;return s=ti(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(a="x"),/left|right/.test(s)&&(a="y"),i.preserveDocking==="target"?D4(a,r,e)?(o[a]=r[a],[{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}},{x:r.x,y:r.y}]):null:D4(a,n,t)?(o[a]=n[a],[{x:n.x,y:n.y},{x:o.x!==void 0?o.x:r.x,y:o.y!==void 0?o.y:r.y,original:{x:o.x!==void 0?o.x:r.x,y:o.y!==void 0?o.y:r.y}}]):null):null}function MZ(e,t,n,r){return RE(e,t,n,r)}function IZ(e,t,n,r){var i=r.slice().reverse();return i=RE(e,t,n,i),i?i.reverse():null}function RE(e,t,n,r){function i(u){return u.length<3?!0:u.length>4?!1:!!Vt(u,function(d,h){var f=u[h-1];return f&&Vp(d,f)<3})}function o(u,d,h){var f=xs(d,u);switch(f){case"v":return{x:h.x,y:u.y};case"h":return{x:u.x,y:h.y}}return{x:u.x,y:u.y}}function a(u,d,h){var f;for(f=u.length-2;f!==0;f--)if(Pk(u[f],d,M4)||Pk(u[f],h,M4))return u.slice(f);return u}if(i(r))return null;var s=r[0],l=r.slice(),c;return l[0]=n,l[1]=o(l[1],s,n),c=a(l,e,t),c!==l&&(l=RE(e,t,n,c)),l&&xs(l)?null:l}function DZ(e,t){if($M(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function jZ(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function $M(e){return e&&/t|r|b|l/.test(e)}function BZ(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function j4(e,t,n,r){if(n==="h"&&(n=/left/.test(r)?"l":"r"),n==="v"&&(n=/top/.test(r)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function UM(e){return e.reduce(function(t,n,r){var i=t[t.length-1],o=e[r+1];return Jx(i,o,n,0)||t.push(n),t},[])}var FZ=-10,$Z=40,UZ={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},zZ={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},LE={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Oh={top:"t",right:"r",bottom:"b",left:"l"};function v1(e){this._elementRegistry=e}We(v1,BM);v1.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,r=t.target||e.target,i=t.waypoints||e.waypoints,o=t.connectionStart,a=t.connectionEnd,s=this._elementRegistry,l,c;if(o||(o=B4(i&&i[0],n)),a||(a=B4(i&&i[i.length-1],r)),(B(e,"bpmn:Association")||B(e,"bpmn:DataAssociation"))&&i&&!F4(n,r))return[].concat([o],i.slice(1,-1),[a]);var u=fO(n,s)?UZ:zZ;return B(e,"bpmn:MessageFlow")?l=qZ(n,r,u):(B(e,"bpmn:SequenceFlow")||F4(n,r))&&(n===r?l={preferredLayouts:JZ(n,e,u)}:B(n,"bpmn:BoundaryEvent")?l={preferredLayouts:XZ(n,r,a,u)}:Dp(n)||Dp(r)?l={preferredLayouts:u.subProcess,preserveDocking:VZ(n)}:B(n,"bpmn:Gateway")?l={preferredLayouts:u.fromGateway}:B(r,"bpmn:Gateway")?l={preferredLayouts:u.toGateway}:l={preferredLayouts:u.default}),l&&(l=be(l,t),c=UM(RZ(n,r,o,a,i,l))),c||[o,a]};function GZ(e){var t=e.host;return ti(ht(e),t,FZ)}function qZ(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:HZ(e,t)}}function HZ(e,t){return B(t,"bpmn:Participant")?"source":B(e,"bpmn:Participant")?"target":Dp(t)?"source":Dp(e)||B(t,"bpmn:Event")?"target":B(e,"bpmn:Event")?"source":null}function VZ(e){return Dp(e)?"target":"source"}function B4(e,t){return e?e.original||e:ht(t)}function F4(e,t){return B(t,"bpmn:Activity")&&B(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function Dp(e){return B(e,"bpmn:SubProcess")&&Dt(e)}function tu(e,t){return e===t}function WZ(e,t){return t.indexOf(e)!==-1}function of(e){var t=/right|left/.exec(e);return t&&t[0]}function af(e){var t=/top|bottom/.exec(e);return t&&t[0]}function $4(e,t){return LE[e]===t}function KZ(e,t){var n=of(e),r=LE[n];return t.indexOf(r)!==-1}function YZ(e,t){var n=af(e),r=LE[n];return t.indexOf(r)!==-1}function zM(e){return e==="right"||e==="left"}function JZ(e,t,n){var r=t.waypoints,i=r&&r.length&&ti(r[0],e);return i==="top"?n.loop.fromTop:i==="right"?n.loop.fromRight:i==="left"?n.loop.fromLeft:n.loop.fromBottom}function XZ(e,t,n,r){var i=ht(e),o=ht(t),a=GZ(e),s,l,c=tu(e.host,t),u=WZ(a,["top","right","bottom","left"]),d=ti(o,i,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return c?ZZ(a,u,e,t,n,r):(s=QZ(a,d,u,r.isHorizontal),l=eQ(a,d,u,r.isHorizontal),[s+":"+l])}function ZZ(e,t,n,r,i,o){var a=t?e:o.isHorizontal?af(e):of(e),s=Oh[a],l;return t?zM(e)?l=U4("y",n,r,i)?"h":o.boundaryLoop.alternateHorizontalSide:l=U4("x",n,r,i)?"v":o.boundaryLoop.alternateVerticalSide:l=o.boundaryLoop.default,[s+":"+l]}function U4(e,t,n,r){var i=$Z;return!(xb(e,r,n,i)||xb(e,r,{x:n.x+n.width,y:n.y+n.height},i)||xb(e,r,ht(t),i))}function xb(e,t,n,r){return Math.abs(t[e]-n[e])<r}function QZ(e,t,n,r){if(n)return Oh[e];var i=af(e),o=of(e),a=af(t),s=of(t);if(r){if(tu(i,a)||$4(o,s))return Oh[i]}else if(tu(o,s)||$4(i,a))return Oh[o];return Oh[r?o:i]}function eQ(e,t,n,r){return n?zM(e)?KZ(e,t)||tu(e,t)?"h":"v":YZ(e,t)||tu(e,t)?"v":"h":r?tu(af(e),af(t))?"h":"v":tu(of(e),of(t))?"v":"h"}v1.$inject=["elementRegistry"];function z4(e){return be({original:e.point.original||e.point},e.actual)}function cc(e,t){this._elementRegistry=e,this._graphicsFactory=t}cc.$inject=["elementRegistry","graphicsFactory"];cc.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var r=this.getDockingPoint(e,t,!0),i=this.getDockingPoint(e,n),o=e.waypoints.slice(r.idx+1,i.idx);return o.unshift(z4(r)),o.push(z4(i)),o};cc.prototype.getDockingPoint=function(e,t,n){var r=e.waypoints,i,o,a;return i=n?0:r.length-1,o=r[i],a=this._getIntersection(t,e,n),{point:o,actual:a||o,idx:i}};cc.prototype._getIntersection=function(e,t,n){var r=this._getShapePath(e),i=this._getConnectionPath(t);return iw(r,i,n)};cc.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};cc.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};cc.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const GM={__init__:["modeling","bpmnUpdater"],__depends__:[YJ,hX,mX,gX,EM,qX,VX,ZX,qa,l5,AM],bpmnFactory:["type",$o],bpmnUpdater:["type",Ui],elementFactory:["type",ac],modeling:["type",ni],layouter:["type",v1],connectionDocking:["type",cc]},G4=Math.round;function y1(e,t,n,r,i,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=r,this._layouter=i,this._rules=o}y1.prototype.create=function(e,t,n){const r=this._complexPreview,i=this._connectionDocking,o=this._elementFactory,a=this._eventBus,s=this._layouter,l=this._rules,c=o.createShape(be({type:t},n)),u=a.fire("autoPlace",{source:e,shape:c});if(!u)return;be(c,{x:u.x-G4(c.width/2),y:u.y-G4(c.height/2)});const d=l.allowed("connection.create",{source:e,target:c,hints:{targetParent:e.parent}});let h=null;d&&(h=o.createConnection(d),h.waypoints=s.layoutConnection(h,{source:e,target:c}),h.waypoints=i.getCroppedWaypoints(h,e,c)),r.create({created:[c,h].filter(f=>!kp(f))})};y1.prototype.cleanUp=function(){this._complexPreview.cleanUp()};y1.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const tQ={__depends__:[S5,SY,GM],__init__:["appendPreview"],appendPreview:["type",y1]},b1=Object.prototype.toString,nQ=Object.prototype.hasOwnProperty;function rQ(e){return e===void 0}function iQ(e){return e==null}function qM(e){return b1.call(e)==="[object Array]"}function oQ(e){return b1.call(e)==="[object Object]"}function Vv(e){return b1.call(e)==="[object Number]"}function G0(e){const t=b1.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function aQ(e,t){return!iQ(e)&&nQ.call(e,t)}function q0(e,t){let n,r;if(rQ(e))return;const i=qM(e)?lQ:sQ;for(let o in e)if(aQ(e,o)&&(n=e[o],r=t(n,i(o)),r===!1))return n}function sQ(e){return e}function lQ(e){return Number(e)}function q4(e,...t){return Object.assign(e,...t)}function cQ(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}function uQ(e,t,n){var r=n?e:e.parentNode;return r&&typeof r.closest=="function"&&r.closest(t)||null}function dQ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i0={},H4;function fQ(){if(H4)return i0;H4=1;var e,t,n;function r(){e=window.addEventListener?"addEventListener":"attachEvent",t=window.removeEventListener?"removeEventListener":"detachEvent",n=e!=="addEventListener"?"on":""}return i0.bind=function(i,o,a,s){return e||r(),i[e](n+o,a,s||!1),a},i0.unbind=function(i,o,a,s){return t||r(),i[t](n+o,a,s||!1),a},i0}var HM=fQ(),hQ=dQ(HM),VM=cQ({__proto__:null,default:hQ},[HM]),WM=["focus","blur"];function pQ(e,t,n,r,i){return WM.indexOf(n)!==-1&&(i=!0),VM.bind(e,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=uQ(a,t,!0),o.delegateTarget&&r.call(e,o)},i)}function mQ(e,t,n,r){return WM.indexOf(t)!==-1&&(r=!0),VM.unbind(e,t,n,r)}var V4={bind:pQ,unbind:mQ};function gQ(e,t){return t=t||document,t.querySelector(e)}function vQ(e,t){return t=t||document,t.querySelectorAll(e)}function yQ(e){return e.originalEvent||e.srcEvent}function KM(e,t){return(yQ(e)||e).button===t}function YM(e){return KM(e,0)}function bQ(e){return KM(e,1)}function _Q(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function wQ(e,t){return t.appendChild(_Q(e,t))}function xQ(e,t){return wQ(t,e),e}var Lw=2,JM={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Lw,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Lw,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function EQ(e,t){return JM[t]?e.style[t]:e.getAttributeNS(null,t)}function SQ(e,t,n){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=JM[r];i?(i===Lw&&typeof n=="number"&&(n=String(n)+"px"),e.style[r]=n):e.setAttributeNS(null,t,n)}function NQ(e,t){var n=Object.keys(t),r,i;for(r=0,i;i=n[r];r++)SQ(e,i,t[i])}function Zh(e,t,n){return typeof t=="string"?EQ(e,t):(NQ(e,t),e)}var OE={svg:"http://www.w3.org/2000/svg"},W4='<svg xmlns="'+OE.svg+'"';function AQ(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(OE.svg)===-1&&(e=W4+e.substring(4)):(e=W4+">"+e+"</svg>",t=!0);var n=kQ(e);if(!t)return n;for(var r=document.createDocumentFragment(),i=n.firstChild;i.firstChild;)r.appendChild(i.firstChild);return r}function kQ(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function XM(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=AQ(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(OE.svg,e),t&&Zh(n,t),n}function CQ(e){var t=e.parentNode;return t&&t.removeChild(e),e}function PQ(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function TQ(e){return["M",e.x,e.y]}function Eb(e){return["L",e.x,e.y]}function RQ(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function LQ(e,t){const n=e.length,r=[TQ(e[0])];for(let i=1;i<n;i++){const o=e[i-1],a=e[i],s=e[i+1];if(!s||!t){r.push(Eb(a));continue}const l=Math.min(t,Ow(a.x-o.x,a.y-o.y),Ow(s.x-a.x,s.y-a.y));if(!l){r.push(Eb(a));continue}const c=o0(a,o,l),u=o0(a,o,l*.5),d=o0(a,s,l),h=o0(a,s,l*.5);r.push(Eb(c)),r.push(RQ(u,h,d))}return r}function o0(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=Ow(r,i),a=n/o;return{x:e.x+r*a,y:e.y+i*a}}function Ow(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function OQ(e,t,n){Vv(t)&&(n=t,t=null),t||(t={});const r=XM("path",t);return Vv(n)&&(r.dataset.cornerRadius=String(n)),ZM(r,e)}function ZM(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return Zh(e,{d:PQ(LQ(t,n))}),e}function MQ(e){return!0}function a0(e){return YM(e)||bQ(e)}var K4=500;function QM(e,t,n){var r=this;function i(T,D,M){if(!s(T,D)){var C,j,z;M?j=t.getGraphics(M):(C=D.delegateTarget||D.target,C&&(j=C,M=t.get(j))),!(!j||!M)&&(z=e.fire(T,{element:M,gfx:j,originalEvent:D}),z===!1&&(D.stopPropagation(),D.preventDefault()))}}var o={};function a(T){return o[T]}function s(T,D){var M=c[T]||YM;return!M(D)}var l={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},c={"element.contextmenu":MQ,"element.mousedown":a0,"element.mouseup":a0,"element.click":a0,"element.dblclick":a0};function u(T,D,M){var C=l[T];if(!C)throw new Error("unmapped DOM event name <"+T+">");return i(C,D,M)}var d="svg, .djs-element";function h(T,D,M,C){var j=o[M]=function(z){i(M,z)};C&&(c[M]=C),j.$delegate=V4.bind(T,d,D,j)}function f(T,D,M){var C=a(M);C&&V4.unbind(T,D,C.$delegate)}function m(T){q0(l,function(D,M){h(T,M,D)})}function v(T){q0(l,function(D,M){f(T,M,D)})}e.on("canvas.destroy",function(T){v(T.svg)}),e.on("canvas.init",function(T){m(T.svg)}),e.on(["shape.added","connection.added"],function(T){var D=T.element,M=T.gfx;e.fire("interactionEvents.createHit",{element:D,gfx:M})}),e.on(["shape.changed","connection.changed"],K4,function(T){var D=T.element,M=T.gfx;e.fire("interactionEvents.updateHit",{element:D,gfx:M})}),e.on("interactionEvents.createHit",K4,function(T){var D=T.element,M=T.gfx;r.createDefaultHit(D,M)}),e.on("interactionEvents.updateHit",function(T){var D=T.element,M=T.gfx;r.updateDefaultHit(D,M)});var b=R("djs-hit djs-hit-stroke"),y=R("djs-hit djs-hit-click-stroke"),x=R("djs-hit djs-hit-all"),_=R("djs-hit djs-hit-no-move"),w={all:x,"click-stroke":y,stroke:b,"no-move":_};function R(T,D){return D=q4({stroke:"white",strokeWidth:15},D||{}),n.cls(T,["no-fill","no-border"],D)}function I(T,D){var M=w[D];if(!M)throw new Error("invalid hit type <"+D+">");return Zh(T,M),T}function q(T,D){xQ(T,D)}this.removeHits=function(T){var D=vQ(".djs-hit",T);q0(D,CQ)},this.createDefaultHit=function(T,D){var M=T.waypoints,C=T.isFrame,j;return M?this.createWaypointsHit(D,M):(j=C?"stroke":"all",this.createBoxHit(D,j,{width:T.width,height:T.height}))},this.createWaypointsHit=function(T,D){var M=OQ(D);return I(M,"stroke"),q(T,M),M},this.createBoxHit=function(T,D,M){M=q4({x:0,y:0},M);var C=XM("rect");return I(C,D),Zh(C,M),q(T,C),C},this.updateDefaultHit=function(T,D){var M=gQ(".djs-hit",D);if(M)return T.waypoints?ZM(M,T.waypoints):Zh(M,{width:T.width,height:T.height}),M},this.fire=i,this.triggerMouseEvent=u,this.mouseHandler=a,this.registerEvent=h,this.unregisterEvent=f}QM.$inject=["eventBus","elementRegistry","styles"];const IQ={__init__:["interactionEvents"],interactionEvents:["type",QM]},eI=Object.prototype.toString,DQ=Object.prototype.hasOwnProperty;function jQ(e){return e===void 0}function BQ(e){return e==null}function FQ(e){return eI.call(e)==="[object Array]"}function $Q(e){const t=eI.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function UQ(e,t){return!BQ(e)&&DQ.call(e,t)}function zQ(e,t){const n=GQ(t);let r;return tI(e,function(i,o){if(n(i,o))return r=i,!1}),r}function tI(e,t){let n,r;if(jQ(e))return;const i=FQ(e)?HQ:qQ;for(let o in e)if(UQ(e,o)&&(n=e[o],r=t(n,i(o)),r===!1))return n}function GQ(e){return $Q(e)?e:t=>t===e}function qQ(e){return e}function HQ(e){return Number(e)}function Wv(e,t){return e.bind(t)}function H0(e,...t){return Object.assign(e,...t)}function Y4(e,t){let n={},r=Object(e);return tI(t,function(i){i in r&&(n[i]=e[i])}),n}const ir={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};ir.td=ir.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];ir.option=ir.optgroup=[1,'<select multiple="multiple">',"</select>"];ir.thead=ir.tbody=ir.colgroup=ir.caption=ir.tfoot=[1,"<table>","</table>"];ir.polyline=ir.ellipse=ir.polygon=ir.circle=ir.text=ir.line=ir.path=ir.rect=ir.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function VQ(e,t=globalThis.document){var c;if(typeof e!="string")throw new TypeError("String expected");const n=/^<!--(.*?)-->$/s.exec(e);if(n)return t.createComment(n[1]);const r=(c=/<([\w:]+)/.exec(e))==null?void 0:c[1];if(!r)return t.createTextNode(e);if(e=e.trim(),r==="body"){const u=t.createElement("html");u.innerHTML=e;const{lastChild:d}=u;return d.remove(),d}let[i,o,a]=Object.hasOwn(ir,r)?ir[r]:ir._default,s=t.createElement("div");for(s.innerHTML=o+e+a;i--;)s=s.lastChild;if(s.firstChild===s.lastChild){const{firstChild:u}=s;return u.remove(),u}const l=t.createDocumentFragment();return l.append(...s.childNodes),l}var WQ=VQ;const nI=GC(WQ);function KQ(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}function YQ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s0={},J4;function JQ(){if(J4)return s0;J4=1;var e,t,n;function r(){e=window.addEventListener?"addEventListener":"attachEvent",t=window.removeEventListener?"removeEventListener":"detachEvent",n=e!=="addEventListener"?"on":""}return s0.bind=function(i,o,a,s){return e||r(),i[e](n+o,a,s||!1),a},s0.unbind=function(i,o,a,s){return t||r(),i[t](n+o,a,s||!1),a},s0}var rI=JQ(),XQ=YQ(rI),eo=KQ({__proto__:null,default:XQ},[rI]);function ZQ(e,t){return t=t||document,t.querySelector(e)}function Mw(e){e.parentNode&&e.parentNode.removeChild(e)}var X4=Math.min,Z4=Math.max;function Sb(e){e.preventDefault()}function Qh(e){e.stopPropagation()}function QQ(e){return e.nodeType===Node.TEXT_NODE}function eee(e){return[].slice.call(e)}function ga(e){this.container=e.container,this.parent=nI('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=ZQ("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=Wv(this.autoResize,this),this.handlePaste=Wv(this.handlePaste,this)}ga.prototype.create=function(e,t,n,r){var i=this,o=this.parent,a=this.content,s=this.container;r=this.options=r||{},t=this.style=t||{};var l=Y4(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);H0(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},l);var c=Y4(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return H0(a.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},c),r.centerVertically&&H0(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},c),a.innerText=n,eo.bind(a,"keydown",this.keyHandler),eo.bind(a,"mousedown",Qh),eo.bind(a,"paste",i.handlePaste),r.autoResize&&eo.bind(a,"input",this.autoResize),r.resizable&&this.resizable(t),s.appendChild(o),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),o};ga.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var r;if(e.clipboardData?r=e.clipboardData.getData("text/plain"):r=window.clipboardData.getData("Text"),this.insertText(r),t.autoResize){var i=this.autoResize(n);i&&this.resizeHandler(i)}};ga.prototype.insertText=function(e){e=tee(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};ga.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,r=t.endContainer,i=t.startOffset,o=t.endOffset,a=t.commonAncestorContainer,s=eee(a.childNodes),l,c;if(QQ(a)){var u=n.textContent;n.textContent=u.substring(0,i)+e+u.substring(o),l=n,c=i+e.length}else if(n===this.content&&r===this.content){var d=document.createTextNode(e);this.content.insertBefore(d,s[i]),l=d,c=d.textContent.length}else{var h=s.indexOf(n),f=s.indexOf(r);s.forEach(function(m,v){v===h?m.textContent=n.textContent.substring(0,i)+e+r.textContent.substring(o):v>h&&v<=f&&Mw(m)}),l=n,c=i+e.length}l&&c!==void 0&&setTimeout(function(){self.setSelection(l,c)})};ga.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var r=e.getBoundingClientRect(),i=t.scrollHeight;e.style.height=i+"px",this.resizeHandler({width:r.width,height:r.height,dx:0,dy:i-r.height})}};ga.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,r=parseInt(this.style.minWidth)||0,i=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=nI('<div class="djs-direct-editing-resize-handle"></div>');var s,l,c,u,d=function(m){Sb(m),Qh(m),s=m.clientX,l=m.clientY;var v=t.getBoundingClientRect();c=v.width,u=v.height,eo.bind(document,"mousemove",h),eo.bind(document,"mouseup",f)},h=function(m){Sb(m),Qh(m);var v=X4(Z4(c+m.clientX-s,r),o),b=X4(Z4(u+m.clientY-l,i),a);t.style.width=v+"px",t.style.height=b+"px",e.resizeHandler({width:c,height:u,dx:m.clientX-s,dy:m.clientY-l})},f=function(m){Sb(m),Qh(m),eo.unbind(document,"mousemove",h,!1),eo.unbind(document,"mouseup",f,!1)};eo.bind(n,"mousedown",d)}H0(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};ga.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),eo.unbind(t,"keydown",this.keyHandler),eo.unbind(t,"mousedown",Qh),eo.unbind(t,"input",this.autoResize),eo.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Mw(n)),Mw(e)};ga.prototype.getValue=function(){return this.content.innerText.trim()};ga.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};ga.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)};function tee(e){return e.replace(/\r\n|\r|\n/g,`
`)}function Uo(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new ga({container:t.getContainer(),keyHandler:Wv(this._handleKey,this),resizeHandler:Wv(this._handleResize,this)})}Uo.$inject=["eventBus","canvas"];Uo.prototype.registerProvider=function(e){this._providers.push(e)};Uo.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};Uo.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};Uo.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};Uo.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};Uo.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,r=this.$textbox.getBoundingClientRect(),i=this.getValue(),o=e.context.text;(i!==o||r.height!==n.height||r.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,i,e.context.text,{x:r.left-t.left,y:r.top-t.top,width:r.width,height:r.height})),this._fire("complete"),this.close()}};Uo.prototype.getValue=function(){return this._textbox.getValue()};Uo.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};Uo.prototype._handleResize=function(e){this._fire("resize",e)};Uo.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=zQ(this._providers,function(r){return(t=r.activate(e))?r:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const iI={__depends__:[IQ],__init__:["directEditing"],directEditing:["type",Uo]};function Q4(e){return function(t){var n=t.target,r=Ue(e),i=r.eventDefinitions&&r.eventDefinitions[0],o=r.$type===n.type,a=(i&&i.$type)===n.eventDefinitionType,s=!!n.triggeredByEvent==!!r.triggeredByEvent,l=n.isExpanded===void 0||n.isExpanded===Dt(e);return!o||!a||!s||!l}}var nee=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],ree=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],iee=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],oee=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],aee=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],see=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],oI=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],lee=oI,eC=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],cee=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],uee=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],dee=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],fee=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],hee=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],pee=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];const tC={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function ho(e,t,n,r,i,o,a,s){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=r,this._bpmnReplace=i,this._rules=o,this._translate=a,this._moddleCopy=s,this._register()}ho.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];ho.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};ho.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,r=[];if(bt(e)||!n.allowed("shape.replace",{element:e}))return{};var i=Q4(e);return B(t,"bpmn:DataObjectReference")?this._createEntries(e,cee):B(t,"bpmn:DataStoreReference")&&!B(e.parent,"bpmn:Collaboration")?this._createEntries(e,uee):B(t,"bpmn:StartEvent")&&!B(t.$parent,"bpmn:SubProcess")?(r=Lt(nee,i),this._createEntries(e,r)):B(t,"bpmn:Participant")?(r=Lt(pee,function(o){return Dt(e)!==o.target.isExpanded}),this._createEntries(e,r)):B(t,"bpmn:StartEvent")&&Qr(t.$parent)?(r=Lt(fee,function(o){var a=o.target,s=a.isInterrupting!==!1,l=t.isInterrupting===s;return i(o)||!i(o)&&!l}),this._createEntries(e,r)):B(t,"bpmn:StartEvent")&&!Qr(t.$parent)&&B(t.$parent,"bpmn:SubProcess")?(r=Lt(ree,i),this._createEntries(e,r)):B(t,"bpmn:EndEvent")?(r=Lt(oee,function(o){var a=o.target;return a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!B(t.$parent,"bpmn:Transaction")?!1:i(o)}),this._createEntries(e,r)):B(t,"bpmn:BoundaryEvent")?(r=Lt(dee,function(o){var a=o.target;if(a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!B(t.attachedToRef,"bpmn:Transaction"))return!1;var s=a.cancelActivity!==!1,l=t.cancelActivity==s;return i(o)||!i(o)&&!l}),this._createEntries(e,r)):B(t,"bpmn:IntermediateCatchEvent")||B(t,"bpmn:IntermediateThrowEvent")?(r=Lt(iee,i),this._createEntries(e,r)):B(t,"bpmn:Gateway")?(r=Lt(aee,i),this._createEntries(e,r)):B(t,"bpmn:Transaction")?(r=Lt(oI,i),this._createEntries(e,r)):Qr(t)&&Dt(e)?(r=Lt(lee,i),this._createEntries(e,r)):B(t,"bpmn:SubProcess")&&Dt(e)?(r=Lt(see,i),this._createEntries(e,r)):B(t,"bpmn:AdHocSubProcess")&&!Dt(e)?(r=Lt(eC,function(o){var a=o.target,s=a.type==="bpmn:SubProcess",l=a.isExpanded===!0;return Q4(a)&&(!s||l)}),this._createEntries(e,r)):B(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,hee):B(t,"bpmn:FlowNode")?(r=Lt(eC,i),B(t,"bpmn:SubProcess")&&!Dt(e)&&(r=Lt(r,function(o){return o.label!=="Sub-process (collapsed)"})),this._createEntries(e,r)):{}};ho.prototype.getPopupMenuHeaderEntries=function(e){var t={};return B(e,"bpmn:Activity")&&!Qr(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),B(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),B(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),B(e,"bpmn:SubProcess")&&!B(e,"bpmn:Transaction")&&!Qr(e)&&(t={...t,...this._getAdHocHeaderEntries(e)}),VO(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};ho.prototype._createEntries=function(e,t){var n={},r=this;return le(t,function(i){n[i.actionName]=r._createEntry(i,e)}),n};ho.prototype._createSequenceFlowEntries=function(e,t){var n=Ue(e),r={},i=this._modeling,o=this._moddle,a=this;return le(t,function(s){switch(s.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(B(n.sourceRef,"bpmn:ExclusiveGateway")||B(n.sourceRef,"bpmn:InclusiveGateway")||B(n.sourceRef,"bpmn:ComplexGateway")||B(n.sourceRef,"bpmn:Activity"))&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&B(n.sourceRef,"bpmn:Activity")&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){var l=o.create("bpmn:FormalExpression",{body:""});i.updateProperties(e,{conditionExpression:l})})});break;default:B(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e,{conditionExpression:void 0})})}),(B(n.sourceRef,"bpmn:ExclusiveGateway")||B(n.sourceRef,"bpmn:InclusiveGateway")||B(n.sourceRef,"bpmn:ComplexGateway")||B(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(r={...r,[s.actionName]:a._createEntry(s,e,function(){i.updateProperties(e.source,{default:void 0})})})}}),r};ho.prototype._createEntry=function(e,t,n){var r=this._translate,i=this._bpmnReplace.replaceElement,o=function(){return i(t,e.target)},a=e.label;return a&&typeof a=="function"&&(a=a(t)),n=n||o,{label:r(a),className:e.className,action:n}};ho.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function r(c,u){if(u.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}const d=e.businessObject.get("loopCharacteristics"),h=t._moddle.create(u.options.loopCharacteristics);d&&t._moddleCopy.copyElement(d,h),h.set("isSequential",u.options.isSequential),t._modeling.updateProperties(e,{loopCharacteristics:h})}var i=Ue(e),o=i.loopCharacteristics,a,s,l;return o&&(a=o.isSequential,s=o.isSequential===void 0,l=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:l,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:a,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:s,action:r,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};ho.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,r=e.businessObject.dataObjectRef;if(!r)return{};function i(a,s){t._modeling.updateModdleProperties(e,r,{isCollection:!s.active})}var o=r.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:i}}};ho.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,r=this._translate;function i(a,s){var l=s.active,c;l||(c=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:c})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:r("Participant multiplicity"),active:!!o,action:i}}};ho.prototype._getAdHocHeaderEntries=function(e){var t=this._translate,n=Ue(e),r=B(n,"bpmn:AdHocSubProcess"),i=this._bpmnReplace.replaceElement;return{"toggle-adhoc":{className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:r,action:function(o,a){return r?i(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):i(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}}};ho.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=Ue(e),r=this,i=WO(e),o=B(e,"bpmn:BoundaryEvent")?tC["intermediate-event-non-interrupting"]:tC["start-event-non-interrupting"],a=!n[i];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:a,action:function(){r._modeling.updateProperties(e,{[i]:!!a})}}}};const mee={__depends__:[w5,EM,S5],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",ho]};function mm(e,t,n,r,i,o,a,s,l,c,u,d,h){e=e||{},r.registerProvider(this),this._contextPad=r,this._modeling=i,this._elementFactory=o,this._connect=a,this._create=s,this._popupMenu=l,this._canvas=c,this._rules=u,this._translate=d,this._eventBus=n,this._appendPreview=h,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(f){var m=f.context,v=m.shape;if(!(!Rp(f)||!r.isOpen(v))){var b=r.getEntries(v);b.replace&&b.replace.action.click(f,v)}}),n.on("contextPad.close",function(){h.cleanUp()})}mm.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];mm.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&be(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(r,i){t.removeElements(i.slice())}}}}),n};mm.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return bt(t)?xu(e,n=>t.includes(n)):t};mm.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,r=this._elementFactory,i=this._connect,o=this._create,a=this._popupMenu,s=this._autoPlace,l=this._translate,c=this._appendPreview,u={};if(e.type==="label")return this._isDeleteAllowed([e])&&be(u,m()),u;var d=e.businessObject;function h(_,w){i.start(_,w)}function f(_,w){n.removeElements([w])}function m(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:l("Delete"),action:{click:f}}}}function v(_){var w=5,R=t.getPad(_).html,I=R.getBoundingClientRect(),q={x:I.left,y:I.bottom+w};return q}function b(_,w,R,I){function q(M,C){var j=r.createShape(be({type:_},I));o.start(M,j,{source:C})}var T=s?function(M,C){var j=r.createShape(be({type:_},I));s.append(C,j)}:q,D=s?function(M,C){return c.create(C,_,I),()=>{c.cleanUp()}}:null;return{group:"model",className:w,title:R,action:{dragstart:q,click:T,hover:D}}}function y(_){return function(w,R){n.splitLane(R,_),t.open(R,!0)}}if(Pt(d,["bpmn:Lane","bpmn:Participant"])&&Dt(e)){var x=ic(e);be(u,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:l("Add lane above"),action:{click:function(_,w){n.addLane(w,"top")}}}}),x.length<2&&((br(e)?e.height>=120:e.width>=120)&&be(u,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:l("Divide into two lanes"),action:{click:y(2)}}}),(br(e)?e.height>=180:e.width>=180)&&be(u,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:l("Divide into three lanes"),action:{click:y(3)}}})),be(u,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:l("Add lane below"),action:{click:function(_,w){n.addLane(w,"bottom")}}}})}return B(d,"bpmn:FlowNode")&&(B(d,"bpmn:EventBasedGateway")?be(u,{"append.receive-task":b("bpmn:ReceiveTask","bpmn-icon-receive-task",l("Append receive task")),"append.message-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",l("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",l("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",l("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",l("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):nC(d,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?be(u,{"append.compensation-activity":b("bpmn:Task","bpmn-icon-task",l("Append compensation activity"),{isForCompensation:!0})}):!B(d,"bpmn:EndEvent")&&!d.isForCompensation&&!nC(d,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!Qr(d)&&be(u,{"append.end-event":b("bpmn:EndEvent","bpmn-icon-end-event-none",l("Append end event")),"append.gateway":b("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",l("Append gateway")),"append.append-task":b("bpmn:Task","bpmn-icon-task",l("Append task")),"append.intermediate-event":b("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",l("Append intermediate/boundary event"))})),a.isEmpty(e,"bpmn-replace")||be(u,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:l("Change element"),action:{click:function(_,w){var R=be(v(w),{cursor:{x:_.x,y:_.y}});a.open(w,"bpmn-replace",R,{title:l("Change element"),width:300,search:!0})}}}}),B(d,"bpmn:SequenceFlow")&&be(u,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),Pt(d,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&be(u,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect to other element"),action:{click:h,dragstart:h}}}),B(d,"bpmn:TextAnnotation")&&be(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using association"),action:{click:h,dragstart:h}}}),Pt(d,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&be(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using data input association"),action:{click:h,dragstart:h}}}),B(d,"bpmn:Group")&&be(u,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),this._isDeleteAllowed([e])&&be(u,m()),u};function nC(e,t,n){var r=e.$instanceOf(t),i=!1,o=e.eventDefinitions||[];return le(o,function(a){a.$type===n&&(i=!0)}),r&&i}const gee={__depends__:[tQ,iI,zL,qa,P5,i1,mee],__init__:["contextPadProvider"],contextPadProvider:["type",mm]};var vee={horizontal:["x","width"],vertical:["y","height"]},rC=5;function qs(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var r=t.allowed("elements.distribute",{elements:n});return bt(r)?r:r?n:[]})}qs.$inject=["modeling","rules"];qs.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};qs.prototype.trigger=function(e,t){var n=this._modeling,r,i;if(!(e.length<3)&&(this._setOrientation(t),i=this._filterElements(e),r=this._createGroups(i),!(r.length<=2)))return n.distributeElements(r,this._axis,this._dimension),r};qs.prototype._filterElements=function(e){var t=this._filters,n=this._axis,r=this._dimension,i=[].concat(e);return t.length?(le(t,function(o){i=o(i,n,r)}),i):e};qs.prototype._createGroups=function(e){var t=[],n=this,r=this._axis,i=this._dimension;if(!r)throw new Error('must have a defined "axis" and "dimension"');var o=Ua(e,r);return le(o,function(a,s){var l=n._findRange(a,r,i),c,u=t[t.length-1];u&&n._hasIntersection(u.range,l)?t[t.length-1].elements.push(a):(c={range:l,elements:[a]},t.push(c))}),t};qs.prototype._setOrientation=function(e){var t=vee[e];this._axis=t[0],this._dimension=t[1]};qs.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};qs.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+rC,max:t+n-rC}};const yee={__init__:["distributeElements"],distributeElements:["type",qs]};function _1(e){Bo.call(this,e)}_1.$inject=["eventBus"];We(_1,Bo);_1.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=Lt(t,function(n){var r=Pt(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||r)}),t=ky(t),t.length<3?!1:t})};var iC={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},bee=900;function gm(e,t,n,r){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=r,e.registerProvider("align-elements",bee,this)}gm.$inject=["popupMenu","distributeElements","translate","rules"];gm.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&be(t,this._getEntries(e)),t};gm.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};gm.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,r=this._popupMenu,i={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:iC.horizontal,action:function(o,a){t.trigger(e,"horizontal"),r.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:iC.vertical,action:function(o,a){t.trigger(e,"vertical"),r.close()}}};return i};const _ee={__depends__:[w5,yee],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",_1],distributeElementsMenuProvider:["type",gm]};var aI="is not a registered action",wee="is already registered";function zo(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}zo.$inject=["eventBus","injector"];zo.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),r=e.get("selection",!1),i=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),l=e.get("keyboardMove",!1),c=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&r&&this.register("copy",function(){var u=r.get();if(u.length)return o.copy(u)}),o&&this.register("paste",function(){o.paste()}),i&&this.register("stepZoom",function(u){i.stepZoom(u.value)}),a&&this.register("zoom",function(u){a.zoom(u.value)}),n&&r&&s&&this.register("removeSelection",function(){var u=r.get();if(u.length){var d=s.allowed("elements.delete",{elements:u}),h;d!==!1&&(bt(d)?h=d:h=u,h.length&&n.removeElements(h.slice()))}}),l&&this.register("moveCanvas",function(u){l.moveCanvas(u)}),c&&this.register("moveSelection",function(u){c.moveSelection(u.direction,u.accelerated)})};zo.prototype.trigger=function(e,t){if(!this._actions[e])throw ME(e,aI);return this._actions[e](t)};zo.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);le(e,function(r,i){n._registerAction(i,r)})};zo.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw ME(e,wee);this._actions[e]=t};zo.prototype.unregister=function(e){if(!this.isRegistered(e))throw ME(e,aI);this._actions[e]=void 0};zo.prototype.getActions=function(){return Object.keys(this._actions)};zo.prototype.isRegistered=function(e){return!!this._actions[e]};function ME(e,t){return new Error(e+" "+t)}const xee={__init__:["editorActions"],editorActions:["type",zo]};function w1(e){e.invoke(zo,this)}We(w1,zo);w1.$inject=["injector"];w1.prototype._registerDefaultActions=function(e){zo.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),r=e.get("selection",!1),i=e.get("spaceTool",!1),o=e.get("lassoTool",!1),a=e.get("handTool",!1),s=e.get("globalConnect",!1),l=e.get("distributeElements",!1),c=e.get("alignElements",!1),u=e.get("directEditing",!1),d=e.get("searchPad",!1),h=e.get("modeling",!1),f=e.get("contextPad",!1);t&&n&&r&&this._registerAction("selectElements",function(){var m=t.getRootElement(),v=n.filter(function(b){return b!==m});return r.select(v),v}),i&&this._registerAction("spaceTool",function(){i.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),r&&l&&this._registerAction("distributeElements",function(m){var v=r.get(),b=m.type;v.length&&l.trigger(v,b)}),r&&c&&this._registerAction("alignElements",function(m){var v=r.get(),b=[],y=m.type;v.length&&(b=Lt(v,function(x){return!B(x,"bpmn:Lane")}),c.trigger(b,y))}),r&&h&&this._registerAction("setColor",function(m){var v=r.get();v.length&&h.setColor(v,m)}),r&&u&&this._registerAction("directEditing",function(){var m=r.get();m.length&&u.activate(m[0])}),d&&this._registerAction("find",function(){d.toggle()}),t&&h&&this._registerAction("moveToOrigin",function(){var m=t.getRootElement(),v,b;B(m,"bpmn:Collaboration")?b=n.filter(function(y){return B(y.parent,"bpmn:Collaboration")}):b=n.filter(function(y){return y!==m&&!B(y.parent,"bpmn:SubProcess")}),v=yr(b),h.moveElements(b,{x:-v.x,y:-v.y},m)}),r&&f&&this._registerAction("replaceElement",function(m){f.triggerEntry("replace","click",m)})};const Eee={__depends__:[xee],editorActions:["type",w1]};function sI(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,r=t.shape;Pt(r,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}sI.$inject=["eventBus"];var V0=10;function Nb(e,t,n){return n||(n="round"),Math[n](e/t)*t}var See=1200,Nee=800;function uc(e,t,n){var r=!n||n.active!==!1;this._eventBus=t;var i=this;t.on("diagram.init",Nee,function(){i.setActive(r)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],See,function(o){var a=o.originalEvent;if(!(!i.active||a&&oo(a))){var s=o.context,l=s.gridSnappingContext;l||(l=s.gridSnappingContext={}),["x","y"].forEach(function(c){var u={},d=kee(o,c,e);d&&(u.offset=d);var h=Aee(o,c);h&&be(u,h),nf(o,c)||i.snapEvent(o,c,u)})}})}uc.prototype.snapEvent=function(e,t,n){var r=this.snapValue(e[t],n);Kn(e,t,r)};uc.prototype.getGridSpacing=function(){return V0};uc.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=Nb(e,V0);var r,i;return t&&t.min&&(r=t.min,ft(r)&&(r=Nb(r+n,V0,"ceil"),e=Math.max(e,r))),t&&t.max&&(i=t.max,ft(i)&&(i=Nb(i+n,V0,"floor"),e=Math.min(e,i))),e-=n,e};uc.prototype.isActive=function(){return this.active};uc.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};uc.prototype.toggleActive=function(){this.setActive(!this.active)};uc.$inject=["elementRegistry","eventBus","config.gridSnapping"];function Aee(e,t){var n=e.context,r=n.createConstraints,i=n.resizeConstraints||{},o=n.gridSnappingContext,a=o.snapConstraints;if(a&&a[t])return a[t];a||(a=o.snapConstraints={}),a[t]||(a[t]={});var s=n.direction;r&&(W0(t)?(a.x.min=r.left,a.x.max=r.right):(a.y.min=r.top,a.y.max=r.bottom));var l=i.min,c=i.max;return l&&(W0(t)?aC(s)?a.x.max=l.left:a.x.min=l.right:oC(s)?a.y.max=l.top:a.y.min=l.bottom),c&&(W0(t)?aC(s)?a.x.min=c.left:a.x.max=c.right:oC(s)?a.y.min=c.top:a.y.max=c.bottom),a[t]}function kee(e,t,n){var r=e.context,i=e.shape,o=r.gridSnappingContext,a=o.snapLocation,s=o.snapOffset;return s&&ft(s[t])||(s||(s=o.snapOffset={}),ft(s[t])||(s[t]=0),!i)||(n.get(i.id)||(W0(t)?s[t]+=i[t]+i.width/2:s[t]+=i[t]+i.height/2),!a)||(t==="x"?/left/.test(a)?s[t]-=i.width/2:/right/.test(a)&&(s[t]+=i.width/2):/top/.test(a)?s[t]-=i.height/2:/bottom/.test(a)&&(s[t]+=i.height/2)),s[t]}function W0(e){return e==="x"}function oC(e){return e.indexOf("n")!==-1}function aC(e){return e.indexOf("w")!==-1}function Ru(e,t){Fe.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(r){var i=r.context,o=i.hints||{},a=o.autoResize;if(a){var s=i.shape,l=i.newBounds;ji(a)?i.newBounds=n.snapComplex(l,a):i.newBounds=n.snapSimple(s,l)}})}Ru.$inject=["eventBus","gridSnapping","modeling"];We(Ru,Fe);Ru.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Ru.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Ru.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,r=/w/.test(t),i=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),i&&(r?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),be(e,o),e};Ru.prototype.snapVertically=function(e,t){var n=this._gridSnapping,r=/n/.test(t),i=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),r&&(i?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),be(e,o),e};var Cee=2e3;function lI(e,t){e.on(["spaceTool.move","spaceTool.end"],Cee,function(n){var r=n.context;if(r.initialized){var i=r.axis,o;i==="x"?(o=t.snapValue(n.dx),n.x=n.x+o-n.dx,n.dx=o):(o=t.snapValue(n.dy),n.y=n.y+o-n.dy,n.dy=o)}})}lI.$inject=["eventBus","gridSnapping"];const Pee={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Ru],gridSnappingSpaceToolBehavior:["type",lI]},Tee={__depends__:[Pee],__init__:["gridSnapping"],gridSnapping:["type",uc]};var Ree=2e3;function cI(e,t,n){e.on("autoPlace",Ree,function(r){var i=r.source,o=ht(i),a=r.shape,s=hO(i,a,n);return["x","y"].forEach(function(l){var c={};s[l]!==o[l]&&(s[l]>o[l]?c.min=s[l]:c.max=s[l],B(a,"bpmn:TextAnnotation")&&(Lee(l)?c.offset=-a.width/2:c.offset=-a.height/2),s[l]=t.snapValue(s[l],c))}),s})}cI.$inject=["eventBus","gridSnapping","elementRegistry"];function Lee(e){return e==="x"}var Oee=1750;function uI(e,t,n){t.on(["create.start","shape.move.start"],Oee,function(r){var i=r.context,o=i.shape,a=e.getRootElement();if(!(!B(o,"bpmn:Participant")||!B(a,"bpmn:Process")||!a.children.length)){var s=i.createConstraints;s&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))}})}uI.$inject=["canvas","eventBus","gridSnapping"];var Mee=3e3;function x1(e,t,n){Fe.call(this,e),this._gridSnapping=t;var r=this;this.postExecuted(["connection.create","connection.layout"],Mee,function(i){var o=i.context,a=o.connection,s=o.hints||{},l=a.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||Iee(l)&&n.updateWaypoints(a,r.snapMiddleSegments(l))})}x1.$inject=["eventBus","gridSnapping","modeling"];We(x1,Fe);x1.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var r=1;r<e.length-2;r++)n=Bee(t,e[r],e[r+1]),e[r]=n[0],e[r+1]=n[1];return e};function Iee(e){return e.length>3}function Dee(e){return e==="h"}function jee(e){return e==="v"}function Bee(e,t,n){var r=xs(t,n),i={};return Dee(r)&&(i.y=e.snapValue(t.y)),jee(r)&&(i.x=e.snapValue(t.x)),("x"in i||"y"in i)&&(t=be({},t,i),n=be({},n,i)),[t,n]}const Fee={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",cI],gridSnappingParticipantBehavior:["type",uI],gridSnappingLayoutConnectionBehavior:["type",x1]},$ee={__depends__:[Tee,Fee],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",sI]};var Uee=30,dI=30;function vm(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(r){var i=r.element,o=r.gfx;if(B(i,"bpmn:Lane"))return n._createParticipantHit(i,o);if(B(i,"bpmn:Participant"))return Dt(i)?n._createParticipantHit(i,o):n._createDefaultHit(i,o);if(B(i,"bpmn:SubProcess"))return Dt(i)?n._createSubProcessHit(i,o):n._createDefaultHit(i,o)})}vm.$inject=["eventBus","interactionEvents"];vm.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};vm.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=br(e)?{width:Uee,height:e.height}:{width:e.width,height:dI};return this._interactionEvents.createBoxHit(t,"all",n),!0};vm.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:dI}),!0};const zee={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",vm]};function E1(e){e.invoke(_f,this)}We(E1,_f);E1.$inject=["injector"];E1.prototype.registerBindings=function(e,t){_f.prototype.registerBindings.call(this,e,t);function n(r,i){t.isRegistered(r)&&e.addListener(i)}n("selectElements",function(r){var i=r.keyEvent;if(e.isKey(["a","A"],i)&&e.isCmd(i))return t.trigger("selectElements"),!0}),n("find",function(r){var i=r.keyEvent;if(e.isKey(["f","F"],i)&&e.isCmd(i))return t.trigger("find"),!0}),n("spaceTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["s","S"],i))return t.trigger("spaceTool"),!0}),n("lassoTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["l","L"],i))return t.trigger("lassoTool"),!0}),n("handTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["h","H"],i))return t.trigger("handTool"),!0}),n("globalConnectTool",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["c","C"],i))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["e","E"],i))return t.trigger("directEditing"),!0}),n("replaceElement",function(r){var i=r.keyEvent;if(!e.hasModifier(i)&&e.isKey(["r","R"],i))return t.trigger("replaceElement",i),!0})};const Gee={__depends__:[p5],__init__:["keyboardBindings"],keyboardBindings:["type",E1]};var qee={moveSpeed:1,moveSpeedAccelerated:10},Hee=1500,sC="left",lC="up",cC="right",uC="down",Vee={ArrowLeft:sC,Left:sC,ArrowUp:lC,Up:lC,ArrowRight:cC,Right:cC,ArrowDown:uC,Down:uC},Wee={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function fI(e,t,n,r,i){var o=this;this._config=be({},qee,e||{}),t.addListener(Hee,function(a){var s=a.keyEvent,l=Vee[s.key];if(l&&!t.isCmd(s)){var c=t.isShift(s);return o.moveSelection(l,c),!0}}),this.moveSelection=function(a,s){var l=i.get();if(l.length){var c=this._config[s?"moveSpeedAccelerated":"moveSpeed"],u=Wee[a](c),d=r.allowed("elements.move",{shapes:l});d&&n.moveElements(l,u)}}}fI.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const Kee={__depends__:[p5,qa],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",fI]};var dC=10;function ym(e,t,n,r){this._dragging=r,this._rules=t;var i=this;function o(l,c){var u=l.shape,d=l.direction,h=l.resizeConstraints,f;l.delta=c,f=DY(u,d,c),l.newBounds=BY(f,h),l.canExecute=i.canResize(l)}function a(l){var c=l.resizeConstraints,u=l.minBounds;c===void 0&&(u===void 0&&(u=i.computeMinResizeBox(l)),l.resizeConstraints={min:at(u)})}function s(l){var c=l.shape,u=l.canExecute,d=l.newBounds;if(u){if(d=F6(d),!Yee(c,d))return;n.resizeShape(c,d)}}e.on("resize.start",function(l){a(l.context)}),e.on("resize.move",function(l){var c={x:l.dx,y:l.dy};o(l.context,c)}),e.on("resize.end",function(l){s(l.context)})}ym.prototype.canResize=function(e){var t=this._rules,n=Ls(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};ym.prototype.activate=function(e,t,n){var r=this._dragging,i,o;if(typeof n=="string"&&(n={direction:n}),i=be({shape:t},n),o=i.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(e,hI(t,o),"resize",{autoActivate:!0,cursor:Jee(o),data:{shape:t,context:i}})};ym.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,r,i;return r=e.minDimensions||{width:dC,height:dC},i=jO(t,e.childrenBoxPadding),FY(n,t,r,i)};ym.$inject=["eventBus","rules","modeling","dragging"];function Yee(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function hI(e,t){var n=ht(e),r=at(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function Jee(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var fC="djs-resizing",hC="resize-not-ok",Xee=500;function pI(e,t,n){function r(o){var a=o.shape,s=o.newBounds,l=o.frame;l||(l=o.frame=n.addFrame(a,t.getActiveLayer()),t.addMarker(a,fC)),s.width>5&&He(l,{x:s.x,width:s.width}),s.height>5&&He(l,{y:s.y,height:s.height}),o.canExecute?Ut(l).remove(hC):Ut(l).add(hC)}function i(o){var a=o.shape,s=o.frame;s&&cr(o.frame),t.removeMarker(a,fC)}e.on("resize.move",Xee,function(o){r(o.context)}),e.on("resize.cleanup",function(o){i(o.context)})}pI.$inject=["eventBus","canvas","previewSupport"];var l0=-6,c0=8,u0=20,Ah="djs-resizer",Zee=["n","w","s","e","nw","ne","se","sw"];function dc(e,t,n,r){this._resize=r,this._canvas=t;var i=this;e.on("selection.changed",function(o){var a=o.newSelection;i.removeResizers(),a.length===1&&le(a,fa(i.addResizer,i))}),e.on("shape.changed",function(o){var a=o.element;n.isSelected(a)&&(i.removeResizers(),i.addResizer(a))})}dc.prototype.makeDraggable=function(e,t,n){var r=this._resize;function i(o){tc(o)&&r.activate(o,e,n)}Ht.bind(t,"mousedown",i),Ht.bind(t,"touchstart",i)};dc.prototype._createResizer=function(e,t,n,r){var i=this._getResizersParent(),o=Qee(r),a=Qe("g");Ut(a).add(Ah),Ut(a).add(Ah+"-"+e.id),Ut(a).add(Ah+"-"+r),pt(i,a);var s=Qe("rect");He(s,{x:-c0/2+o.x,y:-c0/2+o.y,width:c0,height:c0}),Ut(s).add(Ah+"-visual"),pt(a,s);var l=Qe("rect");return He(l,{x:-u0/2+o.x,y:-u0/2+o.y,width:u0,height:u0}),Ut(l).add(Ah+"-hit"),pt(a,l),L0(a,t,n),a};dc.prototype.createResizer=function(e,t){var n=hI(e,t),r=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,r,t)};dc.prototype.addResizer=function(e){var t=this;on(e)||!this._resize.canResize({shape:e})||le(Zee,function(n){t.createResizer(e,n)})};dc.prototype.removeResizers=function(){var e=this._getResizersParent();Ny(e)};dc.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};dc.$inject=["eventBus","canvas","selection","resize"];function Qee(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-l0:e.indexOf("w")!==-1&&(t.x=l0),e.indexOf("s")!==-1?t.y=-l0:e.indexOf("n")!==-1&&(t.y=l0),t}const mI={__depends__:[Va,Us,Nf],__init__:["resize","resizePreview","resizeHandles"],resize:["type",ym],resizePreview:["type",pI],resizeHandles:["type",dc]};var ete=2e3;function bm(e,t,n,r,i,o,a){this._bpmnFactory=t,this._canvas=n,this._modeling=i,this._textRenderer=a,r.registerProvider(this),e.on("element.dblclick",function(l){s(l.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){r.isActive()&&r.complete()}),e.on(["shape.remove","connection.remove"],ete,function(l){r.isActive(l.element)&&r.cancel()}),e.on(["commandStack.changed"],function(l){r.isActive()&&r.cancel()}),e.on("directEditing.activate",function(l){o.removeResizers()}),e.on("create.end",500,function(l){var c=l.context,u=c.shape,d=l.context.canExecute,h=l.isTouch;h||d&&(c.hints&&c.hints.createElementsBehavior===!1||s(u))}),e.on("autoPlace.end",500,function(l){s(l.shape)});function s(l,c){(c||Pt(l,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||IE(l))&&r.activate(l)}}bm.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];bm.prototype.activate=function(e){var t=io(e);if(t!==void 0){var n={text:t},r=this.getEditingBBox(e);be(n,r);var i={},o=n.style||{};return be(o,{backgroundColor:null,border:null}),(Pt(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||IE(e))&&be(i,{centerVertically:!0}),gu(e)&&(be(i,{autoResize:!0}),be(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),B(e,"bpmn:TextAnnotation")&&(be(i,{resizable:!0,autoResize:!0}),be(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),be(n,{options:i,style:o}),n}};bm.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,r=t.getAbsoluteBBox(n),i={x:r.x+r.width/2,y:r.y+r.height/2},o={x:r.x,y:r.y},a=t.zoom(),s=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),c=l.fontSize*a,u=l.lineHeight,d=s.fontSize*a,h=s.lineHeight,f={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(B(e,"bpmn:Lane")||rte(e)){var m=br(e),v=m?{width:r.height,height:30*a,x:r.x-r.height/2+15*a,y:i.y-30*a/2}:{width:r.width,height:30*a};be(o,v),be(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:m?"rotate(-90deg)":null})}if(nte(e)){var b=br(e),y=b?{width:r.width,height:r.height}:{width:r.height,height:r.width,x:i.x-r.height/2,y:i.y-r.width/2};be(o,y),be(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:b?null:"rotate(-90deg)"})}(Pt(e,["bpmn:Task","bpmn:CallActivity"])||IE(e))&&(be(o,{width:r.width,height:r.height}),be(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"})),tte(e)&&(be(o,{width:r.width,x:r.x}),be(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"}));var x=90*a,_=7*a,w=4*a;if(n.labelTarget&&(be(o,{width:x,height:r.height+_+w,x:i.x-x/2,y:r.y-_}),be(f,{fontSize:c+"px",lineHeight:u,paddingTop:_+"px",paddingBottom:w+"px"})),gu(n)&&!Oy(n)&&!Gt(n)){var R=s5(e),I=t.getAbsoluteBBox({x:R.x,y:R.y,width:0,height:0}),q=c+_+w;be(o,{width:x,height:q,x:I.x-x/2,y:I.y-q/2}),be(f,{fontSize:c+"px",lineHeight:u,paddingTop:_+"px",paddingBottom:w+"px"})}return B(e,"bpmn:TextAnnotation")&&(be(o,{width:r.width,height:r.height,minWidth:30*a,minHeight:10*a}),be(f,{textAlign:"left",paddingTop:5*a+"px",paddingBottom:7*a+"px",paddingLeft:7*a+"px",paddingRight:5*a+"px",fontSize:d+"px",lineHeight:h})),{bounds:o,style:f}};bm.prototype.update=function(e,t,n,r){var i,o;B(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),i={x:e.x,y:e.y,width:e.width/o.width*r.width,height:e.height/o.height*r.height}),ite(t)&&(t=null),this._modeling.updateLabel(e,t,i)};function IE(e){return B(e,"bpmn:SubProcess")&&!Dt(e)}function tte(e){return B(e,"bpmn:SubProcess")&&Dt(e)}function nte(e){return B(e,"bpmn:Participant")&&!Dt(e)}function rte(e){return B(e,"bpmn:Participant")&&Dt(e)}function ite(e){return!e||!e.trim()}var pC="djs-element-hidden",mC="djs-label-hidden";function gI(e,t,n){var r=this,i=t.getDefaultLayer(),o,a,s;e.on("directEditing.activate",function(l){var c=l.active;if(o=c.element.label||c.element,B(o,"bpmn:TextAnnotation")){a=t.getAbsoluteBBox(o),s=Qe("g");var u=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),d=r.path=Qe("path");He(d,{d:u,strokeWidth:2,stroke:ote(o)}),pt(s,d),pt(i,s),Dr(s,o.x,o.y)}B(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,pC):(B(o,"bpmn:Task")||B(o,"bpmn:CallActivity")||B(o,"bpmn:SubProcess")||B(o,"bpmn:Participant")||B(o,"bpmn:Lane"))&&t.addMarker(o,mC)}),e.on("directEditing.resize",function(l){if(B(o,"bpmn:TextAnnotation")){var c=l.height,u=l.dy,d=Math.max(o.height/a.height*(c+u),0),h=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:d,position:{mx:0,my:0}});He(r.path,{d:h})}}),e.on(["directEditing.complete","directEditing.cancel"],function(l){var c=l.active;c&&(t.removeMarker(c.element.label||c.element,pC),t.removeMarker(o,mC)),o=void 0,a=void 0,s&&(cr(s),s=void 0)})}gI.$inject=["eventBus","canvas","pathMap"];function ote(e,t){var n=zt(e);return n.get("stroke")||t||"black"}const ate={__depends__:[l5,mI,iI],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",bm],labelEditingPreview:["type",gI]};var ste=new Zp("tt");function lte(e){var t=_n('<div class="djs-tooltip-container" />');return Jr(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function cte(e,t,n){Jr(e,{left:t+"px",top:n+"px"})}function DE(e,t){e.style.display=t===!1?"none":""}var vI="djs-tooltip",Ab="."+vI;function Ai(e,t){this._eventBus=e,this._canvas=t,this._ids=ste,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=lte(t.getContainer());var n=this;Oi.bind(this._tooltipRoot,Ab,"mousedown",function(r){r.stopPropagation()}),Oi.bind(this._tooltipRoot,Ab,"mouseover",function(r){n.trigger("mouseover",r)}),Oi.bind(this._tooltipRoot,Ab,"mouseout",function(r){n.trigger("mouseout",r)}),this._init()}Ai.$inject=["eventBus","canvas"];Ai.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=be({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};Ai.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,r=this.get(fi(n,"data-tooltip-id"));r&&(e==="mouseover"&&r.timeout&&this.clearTimeout(r),e==="mouseout"&&r.timeout&&(r.timeout=1e3,this.setTimeout(r)))};Ai.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};Ai.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};Ai.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};Ai.prototype.remove=function(e){var t=this.get(e);t&&(pu(t.html),pu(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};Ai.prototype.show=function(){DE(this._tooltipRoot)};Ai.prototype.hide=function(){DE(this._tooltipRoot,!1)};Ai.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,r="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=r,this._tooltipRoot.style["-ms-transform"]=r};Ai.prototype._addTooltip=function(e){var t=e.id,n=e.html,r,i=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),ji(n)&&(n=_n(n)),r=_n('<div data-tooltip-id="'+t+'" class="'+vI+'">'),Jr(r,{position:"absolute"}),r.appendChild(n),e.type&&On(r).add("djs-tooltip-"+e.type),e.className&&On(r).add(e.className),e.htmlContainer=r,i.appendChild(r),this._tooltips[t]=e,this._updateTooltip(e)};Ai.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;cte(n,t.x,t.y)};Ai.prototype._updateTooltipVisibilty=function(e){le(this._tooltips,function(t){var n=t.show,r=t.htmlContainer,i=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(i=!1),DE(r,i))})};Ai.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const ute={__init__:["tooltips"],tooltips:["type",Ai]};var dte="flow elements must be children of pools/participants";function yI(e,t,n){function r(i,o,a){t.add({position:{x:i.x+5,y:i.y+5},type:"error",timeout:2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(i){var o=i.context,a=o.shape,s=o.target;B(s,"bpmn:Collaboration")&&B(a,"bpmn:FlowNode")&&r(i,n(dte))})}yI.$inject=["eventBus","tooltips","translate"];const fte={__depends__:[ute],__init__:["modelingFeedback"],modelingFeedback:["type",yI]};var hte=500,pte=1250,mte=1500,Kv=Math.round;function gte(e){return{x:e.x+Kv(e.width/2),y:e.y+Kv(e.height/2)}}function bI(e,t,n,r,i){function o(s,l,c,u){return i.allowed("elements.move",{shapes:s,delta:l,position:c,target:u})}e.on("shape.move.start",mte,function(s){var l=s.context,c=s.shape,u=r.get().slice();u.indexOf(c)===-1&&(u=[c]),u=vte(u),be(l,{shapes:u,validatedShapes:u,shape:c})}),e.on("shape.move.start",pte,function(s){var l=s.context,c=l.validatedShapes,u;if(u=l.canExecute=o(c),!u)return!1}),e.on("shape.move.move",hte,function(s){var l=s.context,c=l.validatedShapes,u=s.hover,d={x:s.dx,y:s.dy},h={x:s.x,y:s.y},f;if(f=o(c,d,h,u),l.delta=d,l.canExecute=f,f===null){l.target=null;return}l.target=u}),e.on("shape.move.end",function(s){var l=s.context,c=l.delta,u=l.canExecute,d=u==="attach",h=l.shapes;if(u===!1)return!1;c.x=Kv(c.x),c.y=Kv(c.y),!(c.x===0&&c.y===0)&&n.moveElements(h,c,l.target,{primaryShape:l.shape,attach:d})}),e.on("element.mousedown",function(s){if(tc(s)){var l=yf(s);if(!l)throw new Error("must supply DOM mousedown event");return a(l,s.element)}});function a(s,l,c,u){if(Tr(c)&&(u=c,c=!1),!(l.waypoints||!l.parent)&&!Ut(s.target).has("djs-hit-no-move")){var d=gte(l);return t.init(s,d,"shape.move",{cursor:"grabbing",autoActivate:c,data:{shape:l,context:u||{}}}),!0}}this.start=a}bI.$inject=["eventBus","dragging","modeling","selection","rules"];function vte(e){var t=pf(e,"id");return Lt(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var gC=499,kb="djs-dragging",vC="drop-ok",yC="drop-not-ok",bC="new-parent",_C="attach-ok";function _I(e,t,n,r){function i(l){var c=o(l),u=yte(c);return u}function o(l){var c=Hp(l,!0),u=c.flatMap(f=>(f.incoming||[]).concat(f.outgoing||[])),d=c.concat(u),h=[...new Set(d)];return h}function a(l,c){[_C,vC,yC,bC].forEach(function(u){u===c?t.addMarker(l,u):t.removeMarker(l,u)})}function s(l,c,u){r.addDragger(c,l.dragGroup),u&&t.addMarker(c,kb),l.allDraggedElements?l.allDraggedElements.push(c):l.allDraggedElements=[c]}e.on("shape.move.start",gC,function(l){var c=l.context,u=c.shapes,d=c.allDraggedElements,h=i(u);if(!c.dragGroup){var f=Qe("g");He(f,n.cls("djs-drag-group",["no-events"]));var m=t.getActiveLayer();pt(m,f),c.dragGroup=f}h.forEach(function(v){r.addDragger(v,c.dragGroup)}),d?d=Gx([d,o(u)]):d=o(u),le(d,function(v){t.addMarker(v,kb)}),c.allDraggedElements=d,c.differentParents=bte(u)}),e.on("shape.move.move",gC,function(l){var c=l.context,u=c.dragGroup,d=c.target,h=c.shape.parent,f=c.canExecute;d&&(f==="attach"?a(d,_C):c.canExecute&&h&&d.id!==h.id?a(d,bC):a(d,c.canExecute?vC:yC)),Dr(u,l.dx,l.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(l){var c=l.context,u=c.target;u&&a(u,null)}),e.on("shape.move.cleanup",function(l){var c=l.context,u=c.allDraggedElements,d=c.dragGroup;le(u,function(h){t.removeMarker(h,kb)}),d&&cr(d)}),this.makeDraggable=s}_I.$inject=["eventBus","canvas","styles","previewSupport"];function yte(e){var t=Lt(e,function(n){return on(n)?Vt(e,la({id:n.source.id}))&&Vt(e,la({id:n.target.id})):!0});return t}function bte(e){return Oz(pf(e,function(t){return t.parent&&t.parent.id}))!==1}const _te={__depends__:[d5,qa,u5,Va,Us,Nf],__init__:["move","movePreview"],move:["type",bI],movePreview:["type",_I]};var wI=".djs-palette-toggle",xI=".entry",wte=wI+", "+xI,Iw="djs-palette-",xte="shown",Dw="open",wC="two-column",Ete=1e3;function Jn(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(r){var i=r.tool;n.updateToolHighlight(i)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}Jn.$inject=["eventBus","canvas"];Jn.prototype.registerProvider=function(e,t){t||(t=e,e=Ete),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};Jn.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(Nte,{})};Jn.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};Jn.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),r=this._container=_n(Jn.HTML_MARKUP);n.appendChild(r),On(n).add(Iw+xte),Oi.bind(r,wte,"click",function(i){var o=i.delegateTarget;if(Sy(o,wI))return e.toggle();e.trigger("click",i)}),Ht.bind(r,"mousedown",function(i){i.stopPropagation()}),Oi.bind(r,xI,"dragstart",function(i){e.trigger("dragstart",i)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:r})};Jn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};Jn.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,r=this._eventBus,i,o=On(n),a=On(t);"twoColumn"in e?i=e.twoColumn:i=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(wC,i),a.toggle(Iw+wC,i),"open"in e&&(o.toggle(Dw,e.open),a.toggle(Iw+Dw,e.open)),r.fire("palette.changed",{twoColumn:i,open:this.isOpen()})};Jn.prototype._update=function(){var e=rn(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Ey(e),le(t,function(n,r){var i=n.group||"default",o=rn("[data-group="+Tp(i)+"]",e);o||(o=_n('<div class="group"></div>'),fi(o,"data-group",i),e.appendChild(o));var a=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=_n(a);if(o.appendChild(s),!n.separator&&(fi(s,"data-action",r),n.title&&fi(s,"title",n.title),n.className&&Ste(s,n.className),n.imageUrl)){var l=_n("<img>");fi(l,"src",n.imageUrl),s.appendChild(l)}}),this.open()};Jn.prototype.trigger=function(e,t,n){var r,i,o=t.delegateTarget||t.target;return o?(r=fi(o,"data-action"),i=t.originalEvent||t,this.triggerEntry(r,e,i,n)):t.preventDefault()};Jn.prototype.triggerEntry=function(e,t,n,r){var i=this._entries,o,a;if(o=i[e],!!o&&(a=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(ur(a)){if(t==="click")return a(n,r)}else if(a[t])return a[t](n,r);n.preventDefault()}};Jn.prototype._layoutChanged=function(){this._toggleState({})};Jn.prototype._needsCollapse=function(e,t){var n=50,r=Object.keys(t).length*46;return e<r+n};Jn.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};Jn.prototype.open=function(){this._toggleState({open:!0})};Jn.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Jn.prototype.isActiveTool=function(e){return e&&this._activeTool===e};Jn.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=rn(".djs-palette-entries",this._container),this._toolsContainer=rn("[data-group=tools]",t)),n=this._toolsContainer,le(n.children,function(r){var i=r.getAttribute("data-action");if(i){var o=On(r);i=i.replace("-tool",""),o.contains("entry")&&i===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};Jn.prototype.isOpen=function(){return On(this._container).has(Dw)};Jn.prototype._getParentContainer=function(){return this._canvas.getContainer()};Jn.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function Ste(e,t){var n=On(e),r=bt(t)?t:t.split(/\s+/g);r.forEach(function(i){n.add(i)})}function Nte(e,t){var n=t.getPaletteEntries();return ur(n)?n(e):(le(n,function(r,i){e[i]=r}),e)}const Ate={__init__:["palette"],palette:["type",Jn]};var EI="crosshair";function Lu(e,t,n,r,i,o,a){this._selection=i,this._dragging=n,this._mouse=a;var s=this,l={create:function(c){var u=t.getActiveLayer(),d;d=c.frame=Qe("rect"),He(d,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),pt(u,d)},update:function(c){var u=c.frame,d=c.bbox;He(u,{x:d.x,y:d.y,width:d.width,height:d.height})},remove:function(c){c.frame&&cr(c.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(c){var u=c.originalEvent.target;!c.hover&&!(u instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(c.originalEvent,!0)})}),e.on("lasso.end",0,function(c){var u=c.context,d=Cb(c),h=r.filter(function(m){return m}),f=Dv(c);s.select(h,d,f?u.selection:[])}),e.on("lasso.start",function(c){var u=c.context;u.bbox=Cb(c),l.create(u),u.selection=i.get()}),e.on("lasso.move",function(c){var u=c.context;u.bbox=Cb(c),l.update(u)}),e.on("lasso.cleanup",function(c){var u=c.context;l.remove(u)}),e.on("element.mousedown",1500,function(c){if(Dv(c))return s.activateLasso(c.originalEvent),!0})}Lu.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];Lu.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:EI,data:{context:{}}})};Lu.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:EI,data:{context:{}},keepSelection:!0})};Lu.prototype.select=function(e,t,n=[]){var r=NG(e,t);this._selection.select([...n,...qx(r)])};Lu.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Lu.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function Cb(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},r;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?r={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?r={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?r={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?r={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:r={x:n.x,y:n.y,width:0,height:0},r}const kte={__depends__:[o1,rm],__init__:["lassoTool"],lassoTool:["type",Lu]};var Pb=1500,SI="grab";function Af(e,t,n,r,i,o){this._dragging=n,this._mouse=o;var a=this,s=r.get("keyboard",!1);i.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",Pb,function(l){if(Rp(l))return a.activateMove(l.originalEvent,!0),!1}),s&&s.addListener(Pb,function(l){if(!(!xC(l.keyEvent)||a.isActive())){var c=a._mouse.getLastMoveEvent();a.activateMove(c,!!c)}},"keyboard.keydown"),s&&s.addListener(Pb,function(l){!xC(l.keyEvent)||!a.isActive()||a.toggle()},"keyboard.keyup"),e.on("hand.end",function(l){var c=l.originalEvent.target;if(!l.hover&&!(c instanceof SVGElement))return!1;e.once("hand.ended",function(){a.activateMove(l.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(l){var c=t.viewbox().scale;t.scroll({dx:l.dx*c,dy:l.dy*c})}),e.on("hand.move.end",function(l){var c=l.context,u=c.reactivate;return!Rp(l)&&u&&e.once("hand.move.ended",function(d){a.activateHand(d.originalEvent,!0,!0)}),!1})}Af.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];Af.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:SI,data:{context:n||{}}})};Af.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:SI,data:{context:{reactivate:n}}})};Af.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};Af.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function xC(e){return gr("Space",e)}const Cte={__depends__:[o1,rm],__init__:["handTool"],handTool:["type",Af]};var EC="connect-ok",SC="connect-not-ok";function kf(e,t,n,r,i,o,a){var s=this;this._dragging=t,this._rules=o,this._mouse=a,i.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(l){var c=l.context,u=l.hover,d=c.canStartConnect=s.canStartConnect(u);d!==null&&(c.startTarget=u,r.addMarker(u,d?EC:SC))}),e.on(["global-connect.out","global-connect.cleanup"],function(l){var c=l.context.startTarget,u=l.context.canStartConnect;c&&r.removeMarker(c,u?EC:SC)}),e.on(["global-connect.ended"],function(l){var c=l.context,u=c.startTarget,d={x:l.x,y:l.y},h=s.canStartConnect(u);if(h)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,u,d)}),!1})}kf.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];kf.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};kf.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};kf.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};kf.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const Pte={__depends__:[P5,Va,Us,o1,rm],globalConnect:["type",kf]};function jE(e,t,n,r,i,o,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=r,this._lassoTool=i,this._handTool=o,this._globalConnect=a,this._translate=s,e.registerProvider(this)}jE.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];jE.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,r=this._spaceTool,i=this._lassoTool,o=this._handTool,a=this._globalConnect,s=this._translate;function l(d,h,f,m,v){function b(y){var x=n.createShape(be({type:d},v));t.start(y,x)}return{group:h,className:f,title:m,action:{dragstart:b,click:b}}}function c(d){var h=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),f=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:h});t.start(d,[h,f],{hints:{autoSelect:[h]}})}function u(d){t.start(d,n.createParticipantShape())}return be(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate hand tool"),action:{click:function(d){o.activateHand(d)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate lasso tool"),action:{click:function(d){i.activateSelection(d)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate create/remove space tool"),action:{click:function(d){r.activateSelection(d)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate global connect tool"),action:{click:function(d){a.start(d)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create start event")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create intermediate/boundary event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create end event")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",s("Create gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",s("Create task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create data object reference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:s("Create expanded sub-process"),action:{dragstart:c,click:c}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create pool/participant"),action:{dragstart:u,click:u}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",s("Create group"))}),e};const Tte={__depends__:[Ate,i1,AM,kte,Cte,Pte,Iy],__init__:["paletteProvider"],paletteProvider:["type",jE]};var Rte=250;function BE(e,t,n,r,i){Fe.call(this,e);function o(s){var l=s.canExecute.replacements;le(l,function(c){var u=c.oldElementId,d={type:c.newElementType};if(!s.visualReplacements[u]){var h=t.get(u);be(d,{x:h.x,y:h.y});var f=n.createShape(d);r.addShape(f,h.parent);var m=rn('[data-element-id="'+Tp(h.id)+'"]',s.dragGroup);m&&He(m,{display:"none"});var v=i.addDragger(f,s.dragGroup);s.visualReplacements[u]=v,r.removeShape(f)}})}function a(s){var l=s.visualReplacements;le(l,function(c,u){var d=rn('[data-element-id="'+Tp(u)+'"]',s.dragGroup);d&&He(d,{display:"inline"}),c.remove(),l[u]&&delete l[u]})}e.on("shape.move.move",Rte,function(s){var l=s.context,c=l.canExecute;l.visualReplacements||(l.visualReplacements={}),c&&c.replacements?o(l):a(l)})}BE.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];We(BE,Fe);const Lte={__depends__:[Nf],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",BE]};var Ote=1250,Tb=40,Mte=20,Ite=10,NC=20,NI=["x","y"],Dte=Math.abs;function AI(e){e.on(["connect.hover","connect.move","connect.end"],Ote,function(t){var n=t.context,r=n.canExecute,i=n.start,o=n.hover,a=n.source,s=n.target;t.originalEvent&&oo(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),r&&o&&jte(t,o,Ute(o)),o&&$te(r,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=To(i),Pt(o,["bpmn:Event","bpmn:Gateway"])&&AC(t,To(o)),Pt(o,["bpmn:Task","bpmn:SubProcess"])&&Bte(t,o),B(a,"bpmn:BoundaryEvent")&&s===a.host&&Fte(t)):kI(r,"bpmn:MessageFlow")?(B(i,"bpmn:Event")&&(n.connectionStart=To(i)),B(o,"bpmn:Event")&&AC(t,To(o))):n.connectionStart=n.initialConnectionStart)})}AI.$inject=["eventBus"];function jte(e,t,n){NI.forEach(function(r){var i=CI(r,t);e[r]<t[r]+n?Kn(e,r,t[r]+n):e[r]>t[r]+i-n&&Kn(e,r,t[r]+i-n)})}function Bte(e,t){var n=To(t);NI.forEach(function(r){zte(e,t,r)&&Kn(e,r,n[r])})}function Fte(e){var t=e.context,n=t.source,r=t.target;if(!Gte(t)){var i=To(n),o=ti(i,r,-10),a=[];/top|bottom/.test(o)&&a.push("x"),/left|right/.test(o)&&a.push("y"),a.forEach(function(s){var l=e[s],c;Dte(l-i[s])<Tb&&(l>i[s]?c=i[s]+Tb:c=i[s]-Tb,Kn(e,s,c))})}}function AC(e,t){Kn(e,"x",t.x),Kn(e,"y",t.y)}function kI(e,t){return e&&e.type===t}function $te(e,t){return Yl(t,function(n){return kI(e,n)})}function CI(e,t){return e==="x"?t.width:t.height}function Ute(e){return B(e,"bpmn:Task")?Ite:Mte}function zte(e,t,n){return e[n]>t[n]+NC&&e[n]<t[n]+CI(n,t)-NC}function Gte(e){var t=e.hover,n=e.source;return t&&n&&t===n}function fc(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}fc.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};fc.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};fc.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};fc.prototype.getSnapLocations=function(){return this._snapLocations};fc.prototype.setSnapLocations=function(e){this._snapLocations=e};fc.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new S1,n.initDefaults(this._defaultSnaps)),n};function S1(){this._snapValues={}}S1.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};S1.prototype.snap=function(e,t,n,r){var i=this._snapValues[t];return i&&sY(e[n],i[n],r)};S1.prototype.initDefaults=function(e){var t=this;le(e||{},function(n,r){le(n,function(i){t.add(r,i)})})};var qte=1250;function Wa(e,t,n){var r=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(i){r.initSnap(i)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],qte,function(i){var o=i.context,a=o.shape,s=o.snapContext,l=o.target;if(!(i.originalEvent&&oo(i.originalEvent))&&!(nf(i)||!l)){var c=s.pointsForTarget(l);c.initialized||(c=r.addSnapTargetPoints(c,a,l),c.initialized=!0),n.snap(i,c)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}Wa.$inject=["elementRegistry","eventBus","snapping"];Wa.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,r=n.shape,i=n.snapContext;i||(i=n.snapContext=new fc);var o;t.get(r.id)?o=To(r,e):o={x:e.x+To(r).x,y:e.y+To(r).y};var a={x:o.x-r.width/2,y:o.y-r.height/2},s={x:o.x+r.width/2,y:o.y+r.height/2};return i.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),Gt(r)||(i.setSnapOrigin("top-left",{x:a.x-e.x,y:a.y-e.y}),i.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),i};Wa.prototype.addSnapTargetPoints=function(e,t,n){var r=this.getSnapTargets(t,n);return le(r,function(i){if(Gt(i)){Gt(t)&&e.add("mid",To(i));return}if(on(i)){if(i.waypoints.length<3)return;var o=i.waypoints.slice(1,-1);le(o,function(a){e.add("mid",a)});return}e.add("mid",To(i))}),!ft(t.x)||!ft(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",To(t)),e};Wa.prototype.getSnapTargets=function(e,t){return PO(t).filter(function(n){return!Hte(n)})};function Hte(e){return!!e.hidden}var kC=1500;function Cf(e,t){t.invoke(Wa,this),e.on(["create.move","create.end"],kC,Yte),e.on(["create.move","create.end","shape.move.move","shape.move.end"],kC,function(n){var r=n.context,i=r.canExecute,o=r.target,a=i&&(i==="attach"||i.attach);a&&!nf(n)&&Vte(n,o)})}We(Cf,Wa);Cf.$inject=["eventBus","injector"];Cf.prototype.initSnap=function(e){var t=Wa.prototype.initSnap.call(this,e),n=e.shape,r=!!this._elementRegistry.get(n.id);return le(n.outgoing,function(i){var o=i.waypoints[0];o=o.original||o,t.setSnapOrigin(i.id+"-docking",PC(o,r,e))}),le(n.incoming,function(i){var o=i.waypoints[i.waypoints.length-1];o=o.original||o,t.setSnapOrigin(i.id+"-docking",PC(o,r,e))}),B(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};Cf.prototype.addSnapTargetPoints=function(e,t,n){Wa.prototype.addSnapTargetPoints.call(this,e,t,n);var r=this.getSnapTargets(t,n);le(r,function(o){(Kte(o)||Wte([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",kO(o)),e.add("bottom-right",CO(o)))});var i=this._elementRegistry;return le(t.incoming,function(o){if(i.get(t.id)){CC(r,o.source)||e.add("mid",ht(o.source));var a=o.waypoints[0];e.add(o.id+"-docking",a.original||a)}}),le(t.outgoing,function(o){if(i.get(t.id)){CC(r,o.target)||e.add("mid",ht(o.target));var a=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",a.original||a)}}),B(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};Cf.prototype.getSnapTargets=function(e,t){return Wa.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!B(n,"bpmn:Lane")})};function Vte(e,t){var n=at(t),r=tM(e,t),i=e.context,o=i.shape,a;o.parent?a={x:0,y:0}:a=ht(o),/top/.test(r)?Kn(e,"y",n.top-a.y):/bottom/.test(r)&&Kn(e,"y",n.bottom-a.y),/left/.test(r)?Kn(e,"x",n.left-a.x):/right/.test(r)&&Kn(e,"x",n.right-a.x)}function Wte(e,t){return e.every(function(n){return B(n,t)})}function Kte(e){return B(e,"bpmn:SubProcess")&&Dt(e)?!0:B(e,"bpmn:Participant")}function Yte(e){var t=e.context,n=t.createConstraints;if(n){var r=n.top,i=n.right,o=n.bottom,a=n.left;(a&&a>=e.x||i&&i<=e.x)&&Kn(e,"x",e.x),(r&&r>=e.y||o&&o<=e.y)&&Kn(e,"y",e.y)}}function CC(e,t){return e.indexOf(t)!==-1}function PC(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var Jte=1250;function _m(e,t){var n=this;e.on(["resize.start"],function(r){n.initSnap(r)}),e.on(["resize.move","resize.end"],Jte,function(r){var i=r.context,o=i.shape,a=o.parent,s=i.direction,l=i.snapContext;if(!(r.originalEvent&&oo(r.originalEvent))&&!nf(r)){var c=l.pointsForTarget(a);c.initialized||(c=n.addSnapTargetPoints(c,o,a,s),c.initialized=!0),Qte(s)&&Kn(r,"x",r.x),ene(s)&&Kn(r,"y",r.y),t.snap(r,c)}}),e.on(["resize.cleanup"],function(){t.hide()})}_m.prototype.initSnap=function(e){var t=e.context,n=t.shape,r=t.direction,i=t.snapContext;i||(i=t.snapContext=new fc);var o=PI(n,r);return i.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),i};_m.prototype.addSnapTargetPoints=function(e,t,n,r){var i=this.getSnapTargets(t,n);return le(i,function(o){e.add("corner",CO(o)),e.add("corner",kO(o))}),e.add("corner",PI(t,r)),e};_m.$inject=["eventBus","snapping"];_m.prototype.getSnapTargets=function(e,t){return PO(t).filter(function(n){return!Xte(n,e)&&!on(n)&&!Zte(n)&&!Gt(n)})};function PI(e,t){var n=ht(e),r=at(e),i={x:n.x,y:n.y};return t.indexOf("n")!==-1?i.y=r.top:t.indexOf("s")!==-1&&(i.y=r.bottom),t.indexOf("e")!==-1?i.x=r.right:t.indexOf("w")!==-1&&(i.x=r.left),i}function Xte(e,t){return e.host===t}function Zte(e){return!!e.hidden}function Qte(e){return e==="n"||e==="s"}function ene(e){return e==="e"||e==="w"}var tne=7,nne=1e3;function hc(e){this._canvas=e,this._asyncHide=x6(fa(this.hide,this),nne)}hc.$inject=["canvas"];hc.prototype.snap=function(e,t){var n=e.context,r=n.snapContext,i=r.getSnapLocations(),o={x:nf(e,"x"),y:nf(e,"y")};le(i,function(a){var s=r.getSnapOrigin(a),l={x:e.x+s.x,y:e.y+s.y};if(le(["x","y"],function(c){var u;o[c]||(u=t.snap(l,a,c,tne),u!==void 0&&(o[c]={value:u,originValue:u-s[c]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),le(["x","y"],function(a){var s=o[a];Tr(s)&&Kn(e,a,s.originValue)})};hc.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=Qe("path");return He(n,{d:"M0,0 L0,0"}),Ut(n).add("djs-snap-line"),pt(t,n),{update:function(r){ft(r)?e==="horizontal"?He(n,{d:"M-100000,"+r+" L+100000,"+r,display:""}):He(n,{d:"M "+r+",-100000 L "+r+", +100000",display:""}):He(n,{display:"none"})}}};hc.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};hc.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};hc.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};hc.prototype.hide=function(){le(this._snapLines,function(e){e.update()})};const rne={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",Wa],resizeSnapping:["type",_m],snapping:["type",hc]},ine={__depends__:[rne],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",AI],createMoveSnapping:["type",Cf]};var TI=300;function mt(e,t,n,r){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=r,this._container=this._getBoxHtml(),this._searchInput=rn(mt.INPUT_SELECTOR,this._container),this._resultsContainer=rn(mt.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}mt.$inject=["canvas","eventBus","selection","translate"];mt.prototype._bindEvents=function(){var e=this;function t(n,r,i,o){e._eventMaps.push({el:n,type:i,listener:Oi.bind(n,r,i,o)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,mt.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,mt.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,mt.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,mt.INPUT_SELECTOR,"keydown",function(n){gr("ArrowUp",n)&&n.preventDefault(),gr("ArrowDown",n)&&n.preventDefault()}),t(this._container,mt.INPUT_SELECTOR,"keyup",function(n){if(gr("Escape",n))return e.close();if(gr("Enter",n)){var r=e._getCurrentResult();return r?e._select(r):e.close(!1)}if(gr("ArrowUp",n))return e._scrollToDirection(!0);if(gr("ArrowDown",n))return e._scrollToDirection();gr(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};mt.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){Oi.unbind(e.el,e.type,e.listener)})};mt.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n=n.filter(function(i){return!t._canvas.getRootElements().includes(i.element)}),!n.length){this._clearMarkers(),this._selection.select(null);return}n.forEach(function(i){var o=i.element.id,a=t._createResultNode(i,o);t._results[o]={element:i.element,node:a}});var r=rn(mt.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(r),this._preselect(r)}};mt.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};mt.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,r=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<r&&(this._resultsContainer.scrollTop=r)}};mt.prototype._clearResults=function(){Ey(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};mt.prototype._clearMarkers=function(){for(var e in this._results)this._canvas.removeMarker(this._results[e].element,"djs-search-preselected")};mt.prototype._getCurrentResult=function(){return rn(mt.RESULT_SELECTED_SELECTOR,this._resultsContainer)};mt.prototype._createResultNode=function(e,t){var n=_n(mt.RESULT_HTML);return e.primaryTokens.length>0&&TC(n,e.primaryTokens,mt.RESULT_PRIMARY_HTML),TC(n,e.secondaryTokens,mt.RESULT_SECONDARY_HTML),fi(n,mt.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};mt.prototype.registerProvider=function(e){this._searchProvider=e};mt.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._bindEvents(),this._open=!0,On(this._canvas.getContainer()).add("djs-search-open"),On(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};mt.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,On(this._canvas.getContainer()).remove("djs-search-open"),On(this._container).remove("open"),this._clearMarkers(),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"))};mt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};mt.prototype.isOpen=function(){return this._open};mt.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){this._clearMarkers(),t&&On(t).remove(mt.RESULT_SELECTED_CLASS);var n=fi(e,mt.RESULT_ID_ATTRIBUTE),r=this._results[n].element;On(e).add(mt.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(r,{top:TI}),this._selection.select(r),this._canvas.addMarker(r,"djs-search-preselected"),this._eventBus.fire("searchPad.preselected",r)}};mt.prototype._select=function(e){var t=fi(e,mt.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:TI}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};mt.prototype._getBoxHtml=function(){const e=_n(mt.BOX_HTML),t=rn(mt.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function TC(e,t,n){var r=one(t),i=_n(n);i.innerHTML=r,e.appendChild(i)}function one(e){var t="";return e.forEach(function(n){n.matched?t+='<b class="'+mt.RESULT_HIGHLIGHT_CLASS+'">'+cw(n.matched)+"</b>":t+=cw(n.normal)}),t!==""?t:null}mt.CONTAINER_SELECTOR=".djs-search-container";mt.INPUT_SELECTOR=".djs-search-input input";mt.RESULTS_CONTAINER_SELECTOR=".djs-search-results";mt.RESULT_SELECTOR=".djs-search-result";mt.RESULT_SELECTED_CLASS="djs-search-result-selected";mt.RESULT_SELECTED_SELECTOR="."+mt.RESULT_SELECTED_CLASS;mt.RESULT_ID_ATTRIBUTE="data-result-id";mt.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";mt.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;mt.RESULT_HTML='<div class="djs-search-result"></div>';mt.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';mt.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const ane={__depends__:[Iy,jy,qa],searchPad:["type",mt]};function FE(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}FE.$inject=["elementRegistry","searchPad","canvas"];FE.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(r){return!Gt(r)&&!t.includes(r)});return n.reduce(function(r,i){var o=io(i),a=OC(o,e),s=OC(i.id,e);return Yv(a)||Yv(s)?[...r,{primaryTokens:a,secondaryTokens:s,element:i}]:r},[]).sort(function(r,i){return RC(r.primaryTokens,i.primaryTokens)||RC(r.secondaryTokens,i.secondaryTokens)||LC(io(r.element),io(i.element))||LC(r.element.id,i.element.id)}).map(function(r){return{element:r.element,primaryTokens:r.primaryTokens.map(function(i){return Io(i,["index"])}),secondaryTokens:r.secondaryTokens.map(function(i){return Io(i,["index"])})}})};function jw(e){return"matched"in e}function Yv(e){return e.find(jw)}function RC(e,t){const n=Yv(e),r=Yv(t);if(n&&!r)return-1;if(!n&&r)return 1;if(!n&&!r)return 0;const i=e.find(jw),o=t.find(jw);return i.index<o.index?-1:i.index>o.index?1:0}function LC(e="",t=""){return e.localeCompare(t)}function OC(e,t){var n=[],r=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var i=e.indexOf(t);return i>-1?(i!==0&&n.push({normal:r.slice(0,i),index:0}),n.push({matched:r.slice(i,i+t.length),index:i}),t.length+i<e.length&&n.push({normal:r.slice(i+t.length),index:i+t.length})):n.push({normal:r,index:0}),n}const sne={__depends__:[ane],__init__:["bpmnSearch"],bpmnSearch:["type",FE]};var lne='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Fa(e){Xp.call(this,e)}We(Fa,Xp);Fa.Viewer=nc;Fa.NavigatedViewer=Lp;Fa.prototype.createDiagram=function(){return this.importXML(lne)};Fa.prototype._interactionModules=[ML,BL,UL];Fa.prototype._modelingModules=[_K,S5,GK,jK,cY,P5,mY,gee,_M,i1,_ee,Eee,$ee,zee,Gee,Kee,ate,GM,fte,_te,Tte,Lte,mI,ine,sne];Fa.prototype._modules=[].concat(nc.prototype._modules,Fa.prototype._interactionModules,Fa.prototype._modelingModules);const MC={"Activate the hand tool":"Ativar ferramenta de mo","Activate hand tool":"Ativar ferramenta de mo","Hand tool":"Ferramenta de mo","Activate the lasso tool":"Ativar ferramenta de lao","Activate lasso tool":"Ativar ferramenta de lao","Lasso tool":"Ferramenta de lao","Activate the create/remove space tool":"Ativar ferramenta de criar/remover espao","Activate create/remove space tool":"Ativar ferramenta de criar/remover espao","Create/remove space tool":"Ferramenta de criar/remover espao","Space tool":"Ferramenta de espao","Activate the global connect tool":"Ativar ferramenta de conexo global","Activate global connect tool":"Ativar ferramenta de conexo global","Global connect tool":"Ferramenta de conexo global","Connect tool":"Ferramenta de conexo","Create StartEvent":"Criar Evento de Incio","Create EndEvent":"Criar Evento de Fim","Create Task":"Criar Tarefa","Create Gateway":"Criar Gateway","Create Intermediate/Boundary Event":"Criar Evento Intermedirio","Create Pool/Participant":"Criar Pool/Participante","Create DataObjectReference":"Criar Objeto de Dados","Create DataStoreReference":"Criar Armazm de Dados","Create Group":"Criar Grupo","Create expanded SubProcess":"Criar Sub-Processo expandido","Create CallActivity":"Criar Atividade de Chamada","Append Task":"Adicionar Tarefa","Append EndEvent":"Adicionar Evento de Fim","Append Gateway":"Adicionar Gateway","Append Intermediate/Boundary Event":"Adicionar Evento Intermedirio","Append TextAnnotation":"Adicionar Anotao","Connect using Sequence/MessageFlow or Association":"Conectar usando Fluxo de Sequncia/Mensagem","Connect using DataInputAssociation":"Conectar usando Associao de Entrada","Change type":"Alterar tipo",Delete:"Excluir",Remove:"Remover",Task:"Tarefa","Send Task":"Tarefa de Envio","Receive Task":"Tarefa de Recebimento","User Task":"Tarefa de Usurio","Manual Task":"Tarefa Manual","Business Rule Task":"Tarefa de Regra de Negcio","Service Task":"Tarefa de Servio","Script Task":"Tarefa de Script","Call Activity":"Atividade de Chamada","Sub Process (collapsed)":"Sub-Processo (recolhido)","Sub Process (expanded)":"Sub-Processo (expandido)","Exclusive Gateway":"Gateway Exclusivo","Parallel Gateway":"Gateway Paralelo","Inclusive Gateway":"Gateway Inclusivo","Complex Gateway":"Gateway Complexo","Event based Gateway":"Gateway baseado em Evento","Start Event":"Evento de Incio","Intermediate Throw Event":"Evento Intermedirio de Envio","End Event":"Evento de Fim","Message Start Event":"Evento de Incio por Mensagem","Timer Start Event":"Evento de Incio por Temporizador","Conditional Start Event":"Evento de Incio Condicional","Signal Start Event":"Evento de Incio por Sinal","Message Intermediate Catch Event":"Evento Intermedirio de Captura de Mensagem","Message Intermediate Throw Event":"Evento Intermedirio de Envio de Mensagem","Timer Intermediate Catch Event":"Evento Intermedirio de Temporizador","Escalation Intermediate Throw Event":"Evento Intermedirio de Escalao","Conditional Intermediate Catch Event":"Evento Intermedirio Condicional","Link Intermediate Catch Event":"Evento Intermedirio de Link (Captura)","Link Intermediate Throw Event":"Evento Intermedirio de Link (Envio)","Compensation Intermediate Throw Event":"Evento Intermedirio de Compensao","Signal Intermediate Catch Event":"Evento Intermedirio de Captura de Sinal","Signal Intermediate Throw Event":"Evento Intermedirio de Envio de Sinal","Message End Event":"Evento de Fim por Mensagem","Escalation End Event":"Evento de Fim por Escalao","Error End Event":"Evento de Fim por Erro","Cancel End Event":"Evento de Fim por Cancelamento","Compensation End Event":"Evento de Fim por Compensao","Signal End Event":"Evento de Fim por Sinal","Terminate End Event":"Evento de Fim por Terminao","Message Boundary Event":"Evento de Limite por Mensagem","Timer Boundary Event":"Evento de Limite por Temporizador","Escalation Boundary Event":"Evento de Limite por Escalao","Conditional Boundary Event":"Evento de Limite Condicional","Error Boundary Event":"Evento de Limite por Erro","Cancel Boundary Event":"Evento de Limite por Cancelamento","Signal Boundary Event":"Evento de Limite por Sinal","Compensation Boundary Event":"Evento de Limite por Compensao","Non-interrupting Message Boundary Event":"Evento de Limite por Mensagem (No-interruptivo)","Non-interrupting Timer Boundary Event":"Evento de Limite por Temporizador (No-interruptivo)","Non-interrupting Escalation Boundary Event":"Evento de Limite por Escalao (No-interruptivo)","Non-interrupting Conditional Boundary Event":"Evento de Limite Condicional (No-interruptivo)","Non-interrupting Signal Boundary Event":"Evento de Limite por Sinal (No-interruptivo)",Participant:"Participante",Pool:"Pool",Lane:"Raia","Data Object":"Objeto de Dados","Data Store":"Armazm de Dados","Text Annotation":"Anotao de Texto",Group:"Grupo","Sequence Flow":"Fluxo de Sequncia","Message Flow":"Fluxo de Mensagem",Association:"Associao","Data Association":"Associao de Dados","Append {type}":"Adicionar {type}","Add Lane above":"Adicionar Raia acima","Add Lane below":"Adicionar Raia abaixo","Divide into two Lanes":"Dividir em duas Raias","Divide into three Lanes":"Dividir em trs Raias","element name":"nome do elemento","no parent for {element} in {parent}":"sem pai para {element} em {parent}","no shape type specified":"tipo de forma no especificado","flow elements must be children of pools/participants":"elementos de fluxo devem ser filhos de pools/participantes","no process or collaboration to display":"nenhum processo ou colaborao para exibir","element {element} referenced by {referenced}#{property} not yet drawn":"elemento {element} referenciado por {referenced}#{property} ainda no desenhado","out of bounds release":"liberao fora dos limites","more than {count} child lanes":"mais de {count} raias filhas"};function Bw(e,t){return t=t||{},(MC[e]||e).replace(/{([^}]+)}/g,function(r,i){const o=t[i];return o!==void 0?MC[o]||o:"{"+i+"}"})}const cne={translate:["value",Bw]};var une=1e3;function po(e){this._eventBus=e}po.$inject=["eventBus"];function dne(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}po.prototype.on=function(e,t,n,r,i,o){if((G0(t)||Vv(t))&&(o=i,i=r,r=n,n=t,t=null),G0(n)&&(o=i,i=r,r=n,n=une),oQ(i)&&(o=i,i=!1),!G0(r))throw new Error("handlerFn must be a function");qM(e)||(e=[e]);var a=this._eventBus;q0(e,function(s){var l=["commandStack",s,t].filter(function(c){return c}).join(".");a.on(l,n,i?dne(r,o):r,o)})};po.prototype.canExecute=Hs("canExecute");po.prototype.preExecute=Hs("preExecute");po.prototype.preExecuted=Hs("preExecuted");po.prototype.execute=Hs("execute");po.prototype.executed=Hs("executed");po.prototype.postExecute=Hs("postExecute");po.prototype.postExecuted=Hs("postExecuted");po.prototype.revert=Hs("revert");po.prototype.reverted=Hs("reverted");function Hs(e){return function(n,r,i,o,a){(G0(n)||Vv(n))&&(a=o,o=i,i=r,r=n,n=null),this.on(n,e,r,i,o,a)}}function Pf(e){po.call(this,e),this.init()}Pf.$inject=["eventBus"];We(Pf,po);Pf.prototype.addRule=function(e,t,n){var r=this;typeof e=="string"&&(e=[e]),e.forEach(function(i){r.canExecute(i,t,function(o,a,s){return n(o)},!0)})};Pf.prototype.init=function(){};function N1(e){Pf.call(this,e)}We(N1,Pf);N1.$inject=["eventBus"];N1.prototype.init=function(){this.addRule("shape.resize",1500,function(e){const t=e.shape;if(t&&t.type==="bpmn:Task"){const n=t.businessObject;if(n&&n.name&&n.name.startsWith("__IMAGE__:"))return{minBounds:{width:50,height:50}}}})};const fne={__init__:["customResizeProvider"],customResizeProvider:["type",N1]};function hne(e,t,n,r){const i=e.x,o=e.y,a=t.x,s=t.y,l=n.x,c=n.y,u=r.x,d=r.y,h=(i-a)*(c-d)-(o-s)*(l-u);if(Math.abs(h)<1e-4)return null;const f=((i-l)*(c-d)-(o-c)*(l-u))/h,m=-((i-a)*(o-c)-(o-s)*(i-l))/h;return f>.01&&f<.99&&m>.01&&m<.99?{x:i+f*(a-i),y:o+f*(s-o)}:null}function pne(e,t){const n=[],r=e.waypoints;return!r||r.length<2||(t.forEach(i=>{if(i!==e&&!(!i.waypoints||i.waypoints.length<2))for(let o=0;o<r.length-1;o++){const a=r[o],s=r[o+1];for(let l=0;l<i.waypoints.length-1;l++){const c=i.waypoints[l],u=i.waypoints[l+1],d=hne(a,s,c,u);d&&n.push({point:d,segmentIndex:o})}}}),n.sort((i,o)=>{if(i.segmentIndex!==o.segmentIndex)return i.segmentIndex-o.segmentIndex;const a=r[i.segmentIndex],s=r[o.segmentIndex],l=Math.hypot(i.point.x-a.x,i.point.y-a.y),c=Math.hypot(o.point.x-s.x,o.point.y-s.y);return l-c})),n}function mne(e,t,n=8){if(!e||e.length<2)return"";if(!t||t.length===0){let o=`M ${e[0].x} ${e[0].y}`;for(let a=1;a<e.length;a++)o+=` L ${e[a].x} ${e[a].y}`;return o}let r=`M ${e[0].x} ${e[0].y}`,i=0;for(let o=0;o<e.length-1;o++){const a=e[o],s=e[o+1],l=[];for(;i<t.length&&t[i].segmentIndex===o;)l.push(t[i].point),i++;if(l.length===0)r+=` L ${s.x} ${s.y}`;else{const c=s.x-a.x,u=s.y-a.y,d=Math.hypot(c,u),h=c/d,f=u/d;l.forEach(m=>{const v={x:m.x-h*n,y:m.y-f*n},b={x:m.x+h*n,y:m.y+f*n};r+=` L ${v.x} ${v.y}`,r+=` A ${n} ${n} 0 0 1 ${b.x} ${b.y}`}),r+=` L ${s.x} ${s.y}`}}return r}function RI(e,t,n){const r=()=>{const i=t.filter(o=>o.waypoints);i.forEach(o=>{const a=pne(o,i);if(a.length>0){const s=n.getGraphics(o);if(s){const l=s.querySelector("path.djs-visual");if(l){const c=mne(o.waypoints,a);l.setAttribute("d",c)}}}})};e.on("connection.changed",r),e.on("connection.added",r),e.on("shape.move.end",r),e.on("commandStack.changed",r),e.on("import.done",()=>{setTimeout(r,100)})}RI.$inject=["eventBus","elementRegistry","canvas"];const gne={__init__:["connectionCrossings"],connectionCrossings:["type",RI]},vne=`<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0"
  xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color/1.0"
  id="Definitions_MapaGuerra_v5"
  targetNamespace="http://fyness.com/bpmn/mapaguerra">

  <bpmn2:collaboration id="Collaboration_MapaGuerra">
    <bpmn2:participant id="Participant_MapaGuerra" name="MAPA DE GUERRA FYNESS - 4 Raias Mestras" processRef="Process_MapaGuerra" />
  </bpmn2:collaboration>

  <bpmn2:process id="Process_MapaGuerra" isExecutable="false">

    <!-- ==================== DEFINICAO DAS 5 RAIAS ==================== -->
    <bpmn2:laneSet id="LaneSet_MapaGuerra">

      <!-- RAIA 1: OUTBOUND (SNIPER) -->
      <bpmn2:lane id="Lane_Outbound" name="RAIA 1: OUTBOUND - O Sniper (Lead Frio/EPP - 7d Trial)" bioc:stroke="#ff6b6b" bioc:fill="#ffe0e0">
        <bpmn2:flowNodeRef>Start_Outbound</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_MineracaoCNPJ</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_EmailAbertura</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_LigacaoManha</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_AtendeuManha</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_AgendaTarde</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_LigacaoTarde</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_AtendeuTarde</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_FlashDemo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_AceitouTrial_Out</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_LiberaTrial7d_Out</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D1_Valor_Out</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D3_Video_Out</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D5_Relatorio_Out</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D7_Fechamento_Out</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_Conversao_Out</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>LinkThrow_Out_Checkout</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_GrupoNurturing_Out</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>End_Bloqueio_Out</bpmn2:flowNodeRef>
      </bpmn2:lane>

      <!-- RAIA 2: BASE DE EDUCACAO (COMUNIDADE) -->
      <bpmn2:lane id="Lane_Alunos" name="RAIA 2: ALUNOS - A Comunidade (Lead Quente/Fa - 30d Trial)" bioc:stroke="#51cf66" bioc:fill="#e0ffe0">
        <bpmn2:flowNodeRef>Start_Alunos</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_AulaGestao</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_LinkVIP30d</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D0_Onboarding_Alu</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D1_D14_Automacao</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D15_Checkin</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D25_OfertaAnual</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D30_Fechamento_Alu</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_Conversao_Alu</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>LinkThrow_Alu_Checkout</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_GrupoNurturing_Alu</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>End_Bloqueio_Alu</bpmn2:flowNodeRef>
      </bpmn2:lane>

      <!-- RAIA 3: GOOGLE ADS (URGENCIA) -->
      <bpmn2:lane id="Lane_Google" name="RAIA 3: GOOGLE ADS - A Urgencia (Lead Morno/Pressa - 7d Trial)" bioc:stroke="#4dabf7" bioc:fill="#e0f0ff">
        <bpmn2:flowNodeRef>Start_Google</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_LP_Google</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_TipoConversao_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_SelfService_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_WhatsApp_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_SpeedToLead_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_PitchDor_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_LiberaTrial7d_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D1_Followup_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D3_Pressao_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D5_Urgencia_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D7_Fechamento_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_Conversao_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>LinkThrow_Goo_Checkout</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_GrupoNurturing_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>End_Bloqueio_Goo</bpmn2:flowNodeRef>
      </bpmn2:lane>

      <!-- RAIA 4: META ADS & SEO (AUTORIDADE) -->
      <bpmn2:lane id="Lane_Meta" name="RAIA 4: META/SEO - A Autoridade (Lead Morno/Dor - 7d Trial)" bioc:stroke="#9775fa" bioc:fill="#f0e0ff">
        <bpmn2:flowNodeRef>Start_Meta</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_IscaDigital</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_ContatoConsultivo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_EducacaoVideos</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_ConviteTrial_Meta</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_LiberaTrial7d_Meta</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D1_ProvaSocial_Meta</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D4_Case_Meta</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D7_Fechamento_Meta</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D10_UltimaChance_Meta</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_Conversao_Meta</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>LinkThrow_Meta_Checkout</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_GrupoNurturing_Meta</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>End_Bloqueio_Meta</bpmn2:flowNodeRef>
      </bpmn2:lane>

      <!-- NUCLEO: RECUPERACAO & BLINDAGEM -->
      <bpmn2:lane id="Lane_Nucleo" name="NUCLEO: RECUPERACAO e BLINDAGEM - Gateway Financeiro Asaas" bioc:stroke="#868e96" bioc:fill="#f0f0f0">
        <bpmn2:flowNodeRef>Gateway_Checkout</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>LinkCatch_From_Out</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>LinkCatch_From_Alu</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>LinkCatch_From_Goo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>LinkCatch_From_Meta</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_PagamentoSucesso</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_Split30</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_OnboardingPago</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_FalhaSaldo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_OfertaSemestral</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_AbandonoCarrinho</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_OfertaTrimestral</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_Guardiao48h</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_ResgateManual</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>End_ClienteAtivo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>End_Churn</bpmn2:flowNodeRef>
      </bpmn2:lane>

    </bpmn2:laneSet>

    <!-- ==================== RAIA 1: OUTBOUND (SNIPER) ==================== -->

    <bpmn2:startEvent id="Start_Outbound" name="Mineracao de Dados">
      <bpmn2:documentation>GATILHO RAIA 1 - OUTBOUND (SNIPER)
Foco: Donos de ME/EPP que NAO conhecem a Fyness.
Lead: FRIO
Prazo Trial: 7 DIAS

Mineracao de listas de CNPJ recem-desenquadrados (MEI->ME).</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Out_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:serviceTask id="Task_MineracaoCNPJ" name="Extracao Lista CNPJ (MEI->ME/EPP)">
      <bpmn2:documentation>MINERACAO DE DADOS:
- CNPJs que mudaram de MEI para ME nos ultimos 6 meses
- EPPs de nichos especificos (servicos, comercio)
- Faturamento estimado: R$81k - R$4.8M/ano

Dados coletados: CNPJ, Nome, WhatsApp, LinkedIn</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_2</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_EmailAbertura" name="TOQUE 1: E-mail de Abertura (Quebra-gelo)">
      <bpmn2:documentation>TOQUE 1 - EMAIL DE ABERTURA:
Assunto: "[Nome], sua ME esta crescendo - posso ajudar?"

Conteudo: Quebra-gelo consultivo, sem vender.
Foco em mostrar que entende a dor da transicao MEI->ME.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_3</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:userTask id="Task_LigacaoManha" name="TOQUE 2: Ligacao (Manha)">
      <bpmn2:documentation>TOQUE 2 - LIGACAO MANHA:
Horario: 9h-12h
Objetivo: Contato direto com decisor.

Script: "Oi [Nome], tudo bem? Sou da Fyness, vi que sua empresa
cresceu recentemente. Como esta sendo organizar as financas?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_4</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_AtendeuManha" name="Atendeu?">
      <bpmn2:incoming>Flow_Out_4</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_5_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Out_5_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:task id="Task_AgendaTarde" name="Agenda Retorno (Tarde)">
      <bpmn2:documentation>NAO ATENDEU DE MANHA:
Agendar nova tentativa para periodo da tarde (14h-18h).</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_5_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_6</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:userTask id="Task_LigacaoTarde" name="TOQUE 3: Ligacao (Tarde)">
      <bpmn2:documentation>TOQUE 3 - LIGACAO TARDE:
Horario: 14h-18h
Segunda tentativa de contato direto.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_6</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_7</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_AtendeuTarde" name="Atendeu?">
      <bpmn2:incoming>Flow_Out_7</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_8_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Out_8_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:userTask id="Task_FlashDemo" name="FLASH DEMO (Audio Zap + Prova na Linha)">
      <bpmn2:documentation>FLASH DEMO - O MOMENTO MAGICO:
Quando atender (manha ou tarde):

1. Envia audio no WhatsApp NA HORA mostrando a IA
2. Prova o valor na linha: "Deixa eu te mostrar algo em 2 min"
3. Compartilha tela ou envia video curto

Objetivo: Gerar o "UAU" instantaneo.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_5_Sim</bpmn2:incoming>
      <bpmn2:incoming>Flow_Out_8_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_9</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_AceitouTrial_Out" name="Aceitou Trial?">
      <bpmn2:incoming>Flow_Out_9</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_10_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Out_10_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:serviceTask id="Task_LiberaTrial7d_Out" name="Libera Trial 7 Dias">
      <bpmn2:documentation>LIBERACAO DO TRIAL - 7 DIAS:
- Cria conta no sistema
- Envia credenciais via WhatsApp
- Inicia sequencia de acompanhamento D1-D7</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_10_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_11</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_D1_Valor_Out" name="D1: Mensagem de Valor">
      <bpmn2:documentation>DIA 1 - MENSAGEM DE VALOR:
"Oi [Nome]! Como foi o primeiro dia? Ja mandou algum audio pra IA?
Qualquer duvida, me chama!"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_11</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_12</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D3_Video_Out" name="D3: Video de Relatorio">
      <bpmn2:documentation>DIA 3 - VIDEO DE RELATORIO:
Envia video curto mostrando como gerar relatorios automaticos.
"Olha que legal esse relatorio que a IA monta pra voce!"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_12</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_13</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D5_Relatorio_Out" name="D5: Relatorio Personalizado">
      <bpmn2:documentation>DIA 5 - RELATORIO PERSONALIZADO:
Envia print/PDF do dashboard do lead com os dados reais dele.
"[Nome], olha como esta ficando sua visao financeira!"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_13</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_14</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:userTask id="Task_D7_Fechamento_Out" name="D7: Ligacao de Fechamento + Oferta Anual">
      <bpmn2:documentation>DIA 7 - GATILHO DE REATIVACAO:
Ligacao de fechamento obrigatoria.

Pitch: "Seus 7 dias acabam hoje! Vi que voce usou bastante.
Quer garantir o Plano Anual com desconto especial?"

Oferta: Plano Anual R$1.497 (equivale a R$124/mes)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_14</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_15</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_Conversao_Out" name="Converteu?">
      <bpmn2:incoming>Flow_Out_15</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_Checkout</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Out_Descarte</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    
    <bpmn2:serviceTask id="Task_GrupoNurturing_Out" name="Adicionar em Grupo WhatsApp (Promoes Outbound)">
      <bpmn2:documentation>NURTURING - GRUPO WHATSAPP:
Lead que no converteu no trial  adicionado em grupo de WhatsApp para:
- Receber promoes especiais
- Contedo educacional sobre gesto financeira
- Ofertas de reativao
CONSIDERADO PERDIDO: Apenas se bloquear/sair do grupo</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_ToNurturing</bpmn2:incoming>
      <bpmn2:incoming>Flow_Out_8_Nao</bpmn2:incoming>
      <bpmn2:incoming>Flow_Out_10_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Out_Bloqueio</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sequenceFlow id="Flow_Out_Bloqueio" sourceRef="Task_GrupoNurturing_Out" targetRef="End_Bloqueio_Out" />
    <bpmn2:endEvent id="End_Bloqueio_Out" name="Bloqueou/Saiu do Grupo">
      <bpmn2:documentation>Lead nao converteu apos Trial de 7 dias.
Mover para lista de reativacao futura (30-60 dias).</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_Bloqueio</bpmn2:incoming>
      <bpmn2:incoming>Flow_Out_8_Nao</bpmn2:incoming>
      <bpmn2:incoming>Flow_Out_10_Nao</bpmn2:incoming>
    </bpmn2:endEvent>

    <!-- Sequence Flows - RAIA 1 -->
    <bpmn2:sequenceFlow id="Flow_Out_1" sourceRef="Start_Outbound" targetRef="Task_MineracaoCNPJ" />
    <bpmn2:sequenceFlow id="Flow_Out_2" sourceRef="Task_MineracaoCNPJ" targetRef="Task_EmailAbertura" />
    <bpmn2:sequenceFlow id="Flow_Out_3" sourceRef="Task_EmailAbertura" targetRef="Task_LigacaoManha" />
    <bpmn2:sequenceFlow id="Flow_Out_4" sourceRef="Task_LigacaoManha" targetRef="Gateway_AtendeuManha" />
    <bpmn2:sequenceFlow id="Flow_Out_5_Sim" name="Sim" sourceRef="Gateway_AtendeuManha" targetRef="Task_FlashDemo" />
    <bpmn2:sequenceFlow id="Flow_Out_5_Nao" name="Nao" sourceRef="Gateway_AtendeuManha" targetRef="Task_AgendaTarde" />
    <bpmn2:sequenceFlow id="Flow_Out_6" sourceRef="Task_AgendaTarde" targetRef="Task_LigacaoTarde" />
    <bpmn2:sequenceFlow id="Flow_Out_7" sourceRef="Task_LigacaoTarde" targetRef="Gateway_AtendeuTarde" />
    <bpmn2:sequenceFlow id="Flow_Out_8_Sim" name="Sim" sourceRef="Gateway_AtendeuTarde" targetRef="Task_FlashDemo" />
    <bpmn2:sequenceFlow id="Flow_Out_8_Nao" name="Nao" sourceRef="Gateway_AtendeuTarde" targetRef="Task_GrupoNurturing_Out" />
    <bpmn2:sequenceFlow id="Flow_Out_9" sourceRef="Task_FlashDemo" targetRef="Gateway_AceitouTrial_Out" />
    <bpmn2:sequenceFlow id="Flow_Out_10_Sim" name="Sim" sourceRef="Gateway_AceitouTrial_Out" targetRef="Task_LiberaTrial7d_Out" />
    <bpmn2:sequenceFlow id="Flow_Out_10_Nao" name="Nao" sourceRef="Gateway_AceitouTrial_Out" targetRef="Task_GrupoNurturing_Out" />
    <bpmn2:sequenceFlow id="Flow_Out_11" sourceRef="Task_LiberaTrial7d_Out" targetRef="Task_D1_Valor_Out" />
    <bpmn2:sequenceFlow id="Flow_Out_12" sourceRef="Task_D1_Valor_Out" targetRef="Task_D3_Video_Out" />
    <bpmn2:sequenceFlow id="Flow_Out_13" sourceRef="Task_D3_Video_Out" targetRef="Task_D5_Relatorio_Out" />
    <bpmn2:sequenceFlow id="Flow_Out_14" sourceRef="Task_D5_Relatorio_Out" targetRef="Task_D7_Fechamento_Out" />
    <bpmn2:sequenceFlow id="Flow_Out_15" sourceRef="Task_D7_Fechamento_Out" targetRef="Gateway_Conversao_Out" />
    <bpmn2:sequenceFlow id="Flow_Out_Checkout" name="Sim - Para Checkout" sourceRef="Gateway_Conversao_Out" targetRef="LinkThrow_Out_Checkout" />
    <bpmn2:sequenceFlow id="Flow_Out_Descarte" name="Nao" sourceRef="Gateway_Conversao_Out" targetRef="Task_GrupoNurturing_Out" />

    <!-- ==================== RAIA 2: ALUNOS (COMUNIDADE) ==================== -->

    <bpmn2:startEvent id="Start_Alunos" name="Aula de Gestao Financeira">
      <bpmn2:documentation>GATILHO RAIA 2 - ALUNOS (COMUNIDADE)
Foco: Quem JA e aluno e confia na metodologia.
Lead: QUENTE
Prazo Trial: 30 DIAS

Gatilho: Aula de Gestao Financeira dentro da plataforma do curso.</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Alu_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:task id="Task_AulaGestao" name="Aula: Gestao Financeira com IA">
      <bpmn2:documentation>AULA DENTRO DO CURSO:
Conteudo educativo sobre gestao financeira.
No final da aula: CTA para o Trial VIP de 30 dias.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Alu_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Alu_2</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:serviceTask id="Task_LinkVIP30d" name="Link VIP: 30 Dias Trial Gratis">
      <bpmn2:documentation>DIFERENCIAL DE ALUNO:
Link exclusivo para 30 dias de Trial (vs 7 dias padrao).
"Como voce e meu aluno, quero te dar 30 dias pra testar de verdade!"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Alu_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Alu_3</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_D0_Onboarding_Alu" name="D0: Onboarding via Zap (Primeiro Lancamento)">
      <bpmn2:documentation>DIA 0 - ONBOARDING:
Tutorial rapido de "Primeiro Lancamento" via WhatsApp.
Video de 2 min + passo a passo em texto.

"Bora fazer seu primeiro lancamento? Segue o passo a passo!"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Alu_3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Alu_4</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:serviceTask id="Task_D1_D14_Automacao" name="D1-D14: Automacoes Semanais (Uso IA vs Aula)">
      <bpmn2:documentation>DIAS 1-14 - MONITORAMENTO:
Automacoes semanais comparando:
- O que o aluno esta usando na IA
- O que foi ensinado na aula

Mensagens tipo:
"Vi que voce ainda nao categorizou despesas. Lembra da aula X?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Alu_4</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Alu_5</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:userTask id="Task_D15_Checkin" name="D15: Check-in de Sucesso (Ligacao Consultoria)">
      <bpmn2:documentation>DIA 15 - CHECK-IN DE SUCESSO:
Ligacao de Consultoria obrigatoria.

O vendedor/tutor analisa os DADOS REAIS do aluno e valida progresso.
"Oi [Nome], olhei seu dashboard e vi que voce ja tem X lancamentos.
Como esta sendo a experiencia? Posso te ajudar em algo?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Alu_5</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Alu_6</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:sendTask id="Task_D25_OfertaAnual" name="D25: Oferta Upgrade Anual (Bonus Aluno)">
      <bpmn2:documentation>DIA 25 - CONVERSAO ANTECIPADA:
Oferta de upgrade para Plano Anual com BONUS EXCLUSIVO de aluno.

"[Nome], como voce e aluno, tenho uma condicao especial:
Plano Anual R$1.497 + 2 meses gratis de consultoria!"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Alu_6</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Alu_7</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:userTask id="Task_D30_Fechamento_Alu" name="D30: Fechamento Final (Bloqueio ou Conversao)">
      <bpmn2:documentation>DIA 30 - FECHAMENTO FINAL:
Ligacao definitiva. Duas opcoes:

A) CONVERTE: Vai para checkout
B) NAO CONVERTE: Bloqueio de acesso imediato

"Seus 30 dias acabam hoje. Vamos garantir seu acesso?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Alu_7</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Alu_8</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_Conversao_Alu" name="Converteu?">
      <bpmn2:incoming>Flow_Alu_8</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Alu_Checkout</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Alu_Bloqueio</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    
    <bpmn2:serviceTask id="Task_GrupoNurturing_Alu" name="Adicionar em Grupo Comunidade (Educao Continuada)">
      <bpmn2:documentation>NURTURING - GRUPO COMUNIDADE:
Aluno que no converteu continua no grupo da comunidade para:
- Aulas mensais gratuitas
- Networking com outros empreendedores
- Ofertas exclusivas de reativao
CONSIDERADO PERDIDO: Apenas se bloquear/sair do grupo</bpmn2:documentation>
      <bpmn2:incoming>Flow_Alu_ToNurturing</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Alu_Bloqueio_Final</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sequenceFlow id="Flow_Alu_Bloqueio_Final" sourceRef="Task_GrupoNurturing_Alu" targetRef="End_Bloqueio_Alu" />
    <bpmn2:endEvent id="End_Bloqueio_Alu" name="Bloqueou/Saiu da Comunidade">
      <bpmn2:documentation>Aluno nao converteu apos 30 dias.
Bloqueio de acesso + mover para lista de reativacao.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Alu_Bloqueio_Final</bpmn2:incoming>
    </bpmn2:endEvent>

    <!-- Sequence Flows - RAIA 2 -->
    <bpmn2:sequenceFlow id="Flow_Alu_1" sourceRef="Start_Alunos" targetRef="Task_AulaGestao" />
    <bpmn2:sequenceFlow id="Flow_Alu_2" sourceRef="Task_AulaGestao" targetRef="Task_LinkVIP30d" />
    <bpmn2:sequenceFlow id="Flow_Alu_3" sourceRef="Task_LinkVIP30d" targetRef="Task_D0_Onboarding_Alu" />
    <bpmn2:sequenceFlow id="Flow_Alu_4" sourceRef="Task_D0_Onboarding_Alu" targetRef="Task_D1_D14_Automacao" />
    <bpmn2:sequenceFlow id="Flow_Alu_5" sourceRef="Task_D1_D14_Automacao" targetRef="Task_D15_Checkin" />
    <bpmn2:sequenceFlow id="Flow_Alu_6" sourceRef="Task_D15_Checkin" targetRef="Task_D25_OfertaAnual" />
    <bpmn2:sequenceFlow id="Flow_Alu_7" sourceRef="Task_D25_OfertaAnual" targetRef="Task_D30_Fechamento_Alu" />
    <bpmn2:sequenceFlow id="Flow_Alu_8" sourceRef="Task_D30_Fechamento_Alu" targetRef="Gateway_Conversao_Alu" />
    <bpmn2:sequenceFlow id="Flow_Alu_Checkout" name="Sim - Para Checkout" sourceRef="Gateway_Conversao_Alu" targetRef="LinkThrow_Alu_Checkout" />
    <bpmn2:sequenceFlow id="Flow_Alu_Bloqueio" name="Nao" sourceRef="Gateway_Conversao_Alu" targetRef="Task_GrupoNurturing_Alu" />

    <!-- ==================== RAIA 3: GOOGLE ADS (URGENCIA) ==================== -->

    <bpmn2:startEvent id="Start_Google" name="Clique Anuncio Google">
      <bpmn2:documentation>GATILHO RAIA 3 - GOOGLE ADS (URGENCIA)
Foco: Lead que buscou por "Contabilidade", "Gestao" ou "IA Financeira".
Lead: MORNO (com PRESSA)
Prazo Trial: 7 DIAS

Gatilho: Clique no anuncio de busca.</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Goo_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:task id="Task_LP_Google" name="Landing Page Alta Conversao">
      <bpmn2:documentation>LANDING PAGE - GOOGLE ADS:
Foco: Velocidade e Preco.

Headline: "Organize as financas da sua empresa em 5 min/dia com IA"

DUAS OPCOES DE CTA:
A) "ASSINAR AGORA" - Self-Service (vai direto pro checkout)
B) "FALAR COM ESPECIALISTA" - WhatsApp</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_2</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:exclusiveGateway id="Gateway_TipoConversao_Goo" name="Tipo de Conversao?">
      <bpmn2:incoming>Flow_Goo_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_SelfService</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Goo_Assistida</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:serviceTask id="Task_SelfService_Goo" name="OPCAO A: Self-Service (Checkout Direto)">
      <bpmn2:documentation>CONVERSAO SELF-SERVICE:
Lead clica em "Assinar Agora" e vai DIRETO para o Checkout.
Pula toda a jornada de trial - vai direto pro Nucleo Financeiro.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_SelfService</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Direct_Checkout</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_WhatsApp_Goo" name="OPCAO B: WhatsApp (Venda Assistida)">
      <bpmn2:documentation>CONVERSAO ASSISTIDA:
Lead clica no botao de WhatsApp.
Mensagem pre-preenchida: "Oi! Vim do Google, quero conhecer o Fyness!"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Assistida</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_3</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:serviceTask id="Task_SpeedToLead_Goo" name="Speed to Lead: Zap Auto (Min 0) + Ligacao 5min">
      <bpmn2:documentation>SPEED TO LEAD - ACAO COMERCIAL:
- Minuto 0: Zap automatico de boas-vindas
- Menos de 5 min: Ligacao do vendedor

"Oi [Nome]! Vi que voce veio do Google. Posso te mostrar
o Fyness funcionando em 2 minutos?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_4</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:userTask id="Task_PitchDor_Goo" name="Pitch Direto na Dor da Burocracia">
      <bpmn2:documentation>PITCH - FOCO NA DOR:
"Voce ta cansado de planilha, ne? Deixa eu te mostrar como
a IA resolve isso em segundos."

Foco: Burocracia, tempo perdido, desorganizacao.
Objetivo: Liberar Trial de 7 dias.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_4</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_5</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:serviceTask id="Task_LiberaTrial7d_Goo" name="Libera Trial 7 Dias">
      <bpmn2:documentation>LIBERACAO DO TRIAL - 7 DIAS:
- Cria conta no sistema
- Envia credenciais via WhatsApp
- Inicia cadencia AGRESSIVA de fechamento</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_5</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_6</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_D1_Followup_Goo" name="D1: Follow-up Agressivo">
      <bpmn2:documentation>DIA 1 - FOLLOW-UP:
"E ai [Nome], ja testou? Manda um audio pra IA agora
e me conta o que achou!"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_6</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_7</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D3_Pressao_Goo" name="D3: Pressao (Metade do Trial)">
      <bpmn2:documentation>DIA 3 - PRESSAO:
"Metade do seu trial ja foi! Vi que voce ainda nao explorou
os relatorios. Quer que eu te mostre ao vivo?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_7</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_8</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D5_Urgencia_Goo" name="D5: Urgencia (2 dias restantes)">
      <bpmn2:documentation>DIA 5 - URGENCIA:
"[Nome], faltam so 2 dias pro seu trial acabar!
Quer garantir o desconto do Plano Anual antes de expirar?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_8</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_9</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:userTask id="Task_D7_Fechamento_Goo" name="D7: Ligacao de Fechamento">
      <bpmn2:documentation>DIA 7 - FECHAMENTO:
Ligacao obrigatoria. Tom de urgencia.

"Seu trial acaba HOJE! Vi que voce usou bastante.
Vamos fechar o Anual com 40% de desconto?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_9</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_10</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_Conversao_Goo" name="Converteu?">
      <bpmn2:incoming>Flow_Goo_10</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Checkout</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Goo_Perdido</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    
    <bpmn2:serviceTask id="Task_GrupoNurturing_Goo" name="Adicionar em Lista de Promoes (Google Ads Retargeting)">
      <bpmn2:documentation>NURTURING - LISTA PROMOES:
Lead Google que no converteu vai para lista de:
- Remarketing via Google Ads
- E-mails com promoes especiais
- WhatsApp com ofertas relmpago
CONSIDERADO PERDIDO: Apenas se descadastrar/bloquear</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_ToNurturing</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Bloqueio</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sequenceFlow id="Flow_Goo_Bloqueio" sourceRef="Task_GrupoNurturing_Goo" targetRef="End_Bloqueio_Goo" />
    <bpmn2:endEvent id="End_Bloqueio_Goo" name="Descadastrou/Bloqueou">
      <bpmn2:documentation>Lead Google nao converteu.
Alto custo de aquisicao - priorizar reativacao em 15 dias.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Bloqueio</bpmn2:incoming>
    </bpmn2:endEvent>

    <!-- Sequence Flows - RAIA 3 -->
    <bpmn2:sequenceFlow id="Flow_Goo_1" sourceRef="Start_Google" targetRef="Task_LP_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_2" sourceRef="Task_LP_Google" targetRef="Gateway_TipoConversao_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_SelfService" name="Self-Service" sourceRef="Gateway_TipoConversao_Goo" targetRef="Task_SelfService_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_Assistida" name="WhatsApp" sourceRef="Gateway_TipoConversao_Goo" targetRef="Task_WhatsApp_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_Direct_Checkout" sourceRef="Task_SelfService_Goo" targetRef="Gateway_Checkout" />
    <bpmn2:sequenceFlow id="Flow_Goo_3" sourceRef="Task_WhatsApp_Goo" targetRef="Task_SpeedToLead_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_4" sourceRef="Task_SpeedToLead_Goo" targetRef="Task_PitchDor_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_5" sourceRef="Task_PitchDor_Goo" targetRef="Task_LiberaTrial7d_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_6" sourceRef="Task_LiberaTrial7d_Goo" targetRef="Task_D1_Followup_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_7" sourceRef="Task_D1_Followup_Goo" targetRef="Task_D3_Pressao_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_8" sourceRef="Task_D3_Pressao_Goo" targetRef="Task_D5_Urgencia_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_9" sourceRef="Task_D5_Urgencia_Goo" targetRef="Task_D7_Fechamento_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_10" sourceRef="Task_D7_Fechamento_Goo" targetRef="Gateway_Conversao_Goo" />
    <bpmn2:sequenceFlow id="Flow_Goo_Checkout" name="Sim - Para Checkout" sourceRef="Gateway_Conversao_Goo" targetRef="LinkThrow_Goo_Checkout" />
    <bpmn2:sequenceFlow id="Flow_Goo_Perdido" name="Nao" sourceRef="Gateway_Conversao_Goo" targetRef="Task_GrupoNurturing_Goo" />

    <!-- ==================== RAIA 4: META/SEO (AUTORIDADE) ==================== -->

    <bpmn2:startEvent id="Start_Meta" name="Clique Anuncio Meta/SEO">
      <bpmn2:documentation>GATILHO RAIA 4 - META/SEO (AUTORIDADE)
Foco: Leads de Reels, YouTube e Anuncios de Dor no Instagram.
Lead: MORNO (com DOR)
Prazo Trial: 7-10 DIAS

Gatilho: Clique no anuncio de "Dor" ou link na bio.</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Meta_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:task id="Task_IscaDigital" name="Isca Digital (Checklist/Guia)">
      <bpmn2:documentation>FILTRO DE QUALIFICACAO:
Pagina de Isca Digital para capturar contato.

Ofertas:
- "Checklist: 10 erros financeiros que quebram MEs"
- "Guia: Como sair do vermelho em 30 dias"

Formulario: Nome, WhatsApp, Porte da Empresa</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_2</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:userTask id="Task_ContatoConsultivo" name="Contato Consultivo via WhatsApp">
      <bpmn2:documentation>ABORDAGEM CONSULTIVA:
"Oi [Nome]! Vi que voce baixou o guia [X].
Voce ja esta sentindo essa dor na sua empresa?"

Tom: Consultor, nao vendedor. Ouvir primeiro.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_3</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:sendTask id="Task_EducacaoVideos" name="Educacao: Videos Curtos (Produto = Heroi)">
      <bpmn2:documentation>EDUCACAO - PROVA DE VALOR:
Envio de videos curtos mostrando a FACILIDADE.
O produto e o heroi, nao o vendedor.

Videos:
- "Olha como e facil lancar uma despesa"
- "Em 30 segundos a IA categorizou tudo"
- "Seu relatorio pronto em 1 clique"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_4</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:userTask id="Task_ConviteTrial_Meta" name="Convite: Trial 7 Dias">
      <bpmn2:documentation>TESTE DIRIGIDO:
"Quer testar isso na sua empresa? Te libero 7 dias gratis
pra voce ver funcionando com seus dados reais."</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_4</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_5</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:serviceTask id="Task_LiberaTrial7d_Meta" name="Libera Trial 7 Dias">
      <bpmn2:documentation>LIBERACAO DO TRIAL - 7 DIAS:
- Cria conta no sistema
- Envia credenciais via WhatsApp
- Inicia cadencia de 7-10 dias baseada em PROVAS SOCIAIS</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_5</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_6</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_D1_ProvaSocial_Meta" name="D1: Prova Social (Depoimento)">
      <bpmn2:documentation>DIA 1 - PROVA SOCIAL:
Envia depoimento de cliente similar.
"Olha o que o [Cliente] falou depois de 1 semana usando..."</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_6</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_7</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D4_Case_Meta" name="D4: Case de Sucesso">
      <bpmn2:documentation>DIA 4 - CASE DE SUCESSO:
Envia case completo de empresa similar.
"Essa ME economizou 15h/mes com o Fyness. Quer ver como?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_7</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_8</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:userTask id="Task_D7_Fechamento_Meta" name="D7: Ligacao de Fechamento">
      <bpmn2:documentation>DIA 7 - FECHAMENTO:
Ligacao consultiva focada em RESULTADOS.

"[Nome], como foi a experiencia? Vi que voce ja lancou X despesas.
Quer continuar tendo essa clareza financeira?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_8</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_9</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:sendTask id="Task_D10_UltimaChance_Meta" name="D10: Ultima Chance (Bonus Exclusivo)">
      <bpmn2:documentation>DIA 10 - ULTIMA CHANCE:
Extensao de 3 dias para leads que precisam de mais tempo.
Oferta com bonus exclusivo.

"Te dou mais 3 dias + bonus de consultoria se fechar hoje!"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_9</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_10</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:exclusiveGateway id="Gateway_Conversao_Meta" name="Converteu?">
      <bpmn2:incoming>Flow_Meta_10</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_Checkout</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Meta_Perdido</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    
    <bpmn2:serviceTask id="Task_GrupoNurturing_Meta" name="Adicionar em Grupo Educacional (Meta Ads + Contedo)">
      <bpmn2:documentation>NURTURING - GRUPO EDUCACIONAL:
Lead Meta que no converteu continua recebendo:
- Contedo educacional via Instagram/Facebook
- Lives mensais sobre gesto
- Ofertas de cursos e ferramentas
CONSIDERADO PERDIDO: Apenas se bloquear/deixar de seguir</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_ToNurturing</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_Bloqueio</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sequenceFlow id="Flow_Meta_Bloqueio" sourceRef="Task_GrupoNurturing_Meta" targetRef="End_Bloqueio_Meta" />
    <bpmn2:endEvent id="End_Bloqueio_Meta" name="Bloqueou/Parou de Seguir">
      <bpmn2:documentation>Lead Meta/SEO nao converteu.
Mover para lista de remarketing e nutrio por email.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_Bloqueio</bpmn2:incoming>
    </bpmn2:endEvent>

    <!-- Sequence Flows - RAIA 4 -->
    <bpmn2:sequenceFlow id="Flow_Meta_1" sourceRef="Start_Meta" targetRef="Task_IscaDigital" />
    <bpmn2:sequenceFlow id="Flow_Meta_2" sourceRef="Task_IscaDigital" targetRef="Task_ContatoConsultivo" />
    <bpmn2:sequenceFlow id="Flow_Meta_3" sourceRef="Task_ContatoConsultivo" targetRef="Task_EducacaoVideos" />
    <bpmn2:sequenceFlow id="Flow_Meta_4" sourceRef="Task_EducacaoVideos" targetRef="Task_ConviteTrial_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_5" sourceRef="Task_ConviteTrial_Meta" targetRef="Task_LiberaTrial7d_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_6" sourceRef="Task_LiberaTrial7d_Meta" targetRef="Task_D1_ProvaSocial_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_7" sourceRef="Task_D1_ProvaSocial_Meta" targetRef="Task_D4_Case_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_8" sourceRef="Task_D4_Case_Meta" targetRef="Task_D7_Fechamento_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_9" sourceRef="Task_D7_Fechamento_Meta" targetRef="Task_D10_UltimaChance_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_10" sourceRef="Task_D10_UltimaChance_Meta" targetRef="Gateway_Conversao_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Checkout" name="Sim - Para Checkout" sourceRef="Gateway_Conversao_Meta" targetRef="LinkThrow_Meta_Checkout" />
    <bpmn2:sequenceFlow id="Flow_Meta_Perdido" name="Nao" sourceRef="Gateway_Conversao_Meta" targetRef="Task_GrupoNurturing_Meta" />

    <!-- ==================== NUCLEO: RECUPERACAO & BLINDAGEM ==================== -->

    
    <!-- ========== LINK THROW EVENTS (sadas das raias principais) ========== -->
    <bpmn2:intermediateThrowEvent id="LinkThrow_Out_Checkout" name=" Checkout">
      <bpmn2:incoming>Flow_Out_Checkout</bpmn2:incoming>
      <bpmn2:linkEventDefinition name="Link_To_Checkout_Out" />
    </bpmn2:intermediateThrowEvent>

    <bpmn2:intermediateThrowEvent id="LinkThrow_Alu_Checkout" name=" Checkout">
      <bpmn2:incoming>Flow_Alu_Checkout</bpmn2:incoming>
      <bpmn2:linkEventDefinition name="Link_To_Checkout_Alu" />
    </bpmn2:intermediateThrowEvent>

    <bpmn2:intermediateThrowEvent id="LinkThrow_Goo_Checkout" name=" Checkout">
      <bpmn2:incoming>Flow_Goo_Checkout</bpmn2:incoming>
      <bpmn2:linkEventDefinition name="Link_To_Checkout_Goo" />
    </bpmn2:intermediateThrowEvent>

    <bpmn2:intermediateThrowEvent id="LinkThrow_Meta_Checkout" name=" Checkout">
      <bpmn2:incoming>Flow_Meta_Checkout</bpmn2:incoming>
      <bpmn2:linkEventDefinition name="Link_To_Checkout_Meta" />
    </bpmn2:intermediateThrowEvent>

    <!-- ========== LINK CATCH EVENTS (entradas no Ncleo) ========== -->
    <bpmn2:intermediateCatchEvent id="LinkCatch_From_Out" name=" Outbound">
      <bpmn2:outgoing>Flow_LinkCatch_Out</bpmn2:outgoing>
      <bpmn2:linkEventDefinition name="Link_To_Checkout_Out" />
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateCatchEvent id="LinkCatch_From_Alu" name=" Educao">
      <bpmn2:outgoing>Flow_LinkCatch_Alu</bpmn2:outgoing>
      <bpmn2:linkEventDefinition name="Link_To_Checkout_Alu" />
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateCatchEvent id="LinkCatch_From_Goo" name=" Google">
      <bpmn2:outgoing>Flow_LinkCatch_Goo</bpmn2:outgoing>
      <bpmn2:linkEventDefinition name="Link_To_Checkout_Goo" />
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateCatchEvent id="LinkCatch_From_Meta" name=" Meta">
      <bpmn2:outgoing>Flow_LinkCatch_Meta</bpmn2:outgoing>
      <bpmn2:linkEventDefinition name="Link_To_Checkout_Meta" />
    </bpmn2:intermediateCatchEvent>

    <!-- Flows from LinkCatch to Gateway_Checkout -->
    <bpmn2:sequenceFlow id="Flow_LinkCatch_Out" sourceRef="LinkCatch_From_Out" targetRef="Gateway_Checkout" />
    <bpmn2:sequenceFlow id="Flow_LinkCatch_Alu" sourceRef="LinkCatch_From_Alu" targetRef="Gateway_Checkout" />
    <bpmn2:sequenceFlow id="Flow_LinkCatch_Goo" sourceRef="LinkCatch_From_Goo" targetRef="Gateway_Checkout" />
    <bpmn2:sequenceFlow id="Flow_LinkCatch_Meta" sourceRef="LinkCatch_From_Meta" targetRef="Gateway_Checkout" />

    <bpmn2:exclusiveGateway id="Gateway_Checkout" name="Gateway Checkout (Asaas)">
      <bpmn2:documentation>NUCLEO COMUM - GATEWAY FINANCEIRO
Todas as 4 raias convergem aqui no momento do Checkout.
Integracao com Asaas para processamento de pagamento.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Out_Checkout</bpmn2:incoming>
      <bpmn2:incoming>Flow_Alu_Checkout</bpmn2:incoming>
      <bpmn2:incoming>Flow_Goo_Checkout</bpmn2:incoming>
      <bpmn2:incoming>Flow_Goo_Direct_Checkout</bpmn2:incoming>
      <bpmn2:incoming>Flow_Meta_Checkout</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Nuc_Sucesso</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Nuc_FalhaSaldo</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Nuc_Abandono</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:serviceTask id="Task_PagamentoSucesso" name="Pagamento SUCESSO">
      <bpmn2:documentation>PAGAMENTO APROVADO:
Webhook Asaas confirma pagamento.
Inicia fluxo de cliente pago.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Nuc_Sucesso</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Nuc_1</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:serviceTask id="Task_Split30" name="Split 30% Automatico (Parceiro)">
      <bpmn2:documentation>SPLIT DE COMISSAO:
Se lead veio de parceiro, 30% vai automaticamente para ele.
Asaas faz o split no momento do pagamento.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Nuc_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Nuc_2</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:task id="Task_OnboardingPago" name="Onboarding Cliente Pago">
      <bpmn2:documentation>ONBOARDING DE CLIENTE PAGO:
- Boas-vindas personalizadas
- Acesso completo liberado
- Agendamento de call de sucesso (opcional)
- Entrada no grupo VIP de clientes</bpmn2:documentation>
      <bpmn2:incoming>Flow_Nuc_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Nuc_Ativo</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:serviceTask id="Task_FalhaSaldo" name="FALHA: Saldo Insuficiente">
      <bpmn2:documentation>ERRO DE PAGAMENTO - SALDO INSUFICIENTE:
Cartao recusado por falta de limite/saldo.
Gatilho: Webhook Asaas "insufficient_funds"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Nuc_FalhaSaldo</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Nuc_3</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_OfertaSemestral" name="Automacao 5min: Oferta Semestral R$997">
      <bpmn2:documentation>RECUPERACAO - SALDO INSUFICIENTE:
Automacao dispara em 5 MINUTOS.

Mensagem: "Vi que deu problema no pagamento. Que tal o Plano
Semestral por R$997? Parcela menor, mesmo beneficio!"

Link direto para checkout do plano semestral.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Nuc_3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Nuc_Retry</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:task id="Task_AbandonoCarrinho" name="ABANDONO: Carrinho Abandonado">
      <bpmn2:documentation>ABANDONO DE CARRINHO:
Lead chegou no checkout mas nao finalizou.
Gatilho: 15 minutos sem completar pagamento.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Nuc_Abandono</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Nuc_4</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:userTask id="Task_OfertaTrimestral" name="Vendedor Liga 15min: Oferta Trimestral R$561">
      <bpmn2:documentation>RECUPERACAO - ABANDONO:
Alerta para vendedor ligar em 15 MINUTOS.

Pitch: "Oi [Nome], vi que voce quase fechou! Aconteceu algo?
Posso te oferecer o Trimestral por R$561 pra voce comecar menor."

Objetivo: Fechar na ligacao com plano de entrada.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Nuc_4</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Nuc_Retry2</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:boundaryEvent id="Task_Guardiao48h" name="O GUARDIAO: Inatividade 48h" attachedToRef="Task_OnboardingPago">
      <bpmn2:documentation>O GUARDIAO DA RETENCAO:
Monitora TODOS os leads (Trial ou Pago).
Se ficar 48h sem mandar audio para a IA, dispara alerta.</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Nuc_Guardiao</bpmn2:outgoing>
      <bpmn2:timerEventDefinition>
        <bpmn2:timeDuration>PT48H</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:boundaryEvent>

    <bpmn2:userTask id="Task_ResgateManual" name="Tarefa de Resgate Manual (Ligacao/Audio)">
      <bpmn2:documentation>RESGATE MANUAL:
Sistema gera tarefa para vendedor.
Acao: Ligacao ou Audio personalizado no WhatsApp.

"Oi [Nome], percebi que voce nao usou o Fyness nos ultimos dias.
Esta tudo bem? Posso te ajudar com algo?"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Nuc_Guardiao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Nuc_Resgate</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:endEvent id="End_ClienteAtivo" name="Cliente Ativo">
      <bpmn2:documentation>SUCESSO: Cliente ativo e pagante.
Monitoramento continuo pelo Guardiao 48h.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Nuc_Ativo</bpmn2:incoming>
      <bpmn2:incoming>Flow_Nuc_Retry</bpmn2:incoming>
      <bpmn2:incoming>Flow_Nuc_Retry2</bpmn2:incoming>
      <bpmn2:incoming>Flow_Nuc_Resgate</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:endEvent id="End_Churn" name="Churn">
      <bpmn2:documentation>CHURN: Cliente perdido.
Mover para lista de reativacao futura.</bpmn2:documentation>
    </bpmn2:endEvent>

    <!-- Sequence Flows - NUCLEO -->
    <bpmn2:sequenceFlow id="Flow_Nuc_Sucesso" name="Sucesso" sourceRef="Gateway_Checkout" targetRef="Task_PagamentoSucesso" />
    <bpmn2:sequenceFlow id="Flow_Nuc_FalhaSaldo" name="Falha Saldo" sourceRef="Gateway_Checkout" targetRef="Task_FalhaSaldo" />
    <bpmn2:sequenceFlow id="Flow_Nuc_Abandono" name="Abandono" sourceRef="Gateway_Checkout" targetRef="Task_AbandonoCarrinho" />
    <bpmn2:sequenceFlow id="Flow_Nuc_1" sourceRef="Task_PagamentoSucesso" targetRef="Task_Split30" />
    <bpmn2:sequenceFlow id="Flow_Nuc_2" sourceRef="Task_Split30" targetRef="Task_OnboardingPago" />
    <bpmn2:sequenceFlow id="Flow_Nuc_Ativo" sourceRef="Task_OnboardingPago" targetRef="End_ClienteAtivo" />
    <bpmn2:sequenceFlow id="Flow_Nuc_3" sourceRef="Task_FalhaSaldo" targetRef="Task_OfertaSemestral" />
    <bpmn2:sequenceFlow id="Flow_Nuc_Retry" sourceRef="Task_OfertaSemestral" targetRef="End_ClienteAtivo" />
    <bpmn2:sequenceFlow id="Flow_Nuc_4" sourceRef="Task_AbandonoCarrinho" targetRef="Task_OfertaTrimestral" />
    <bpmn2:sequenceFlow id="Flow_Nuc_Retry2" sourceRef="Task_OfertaTrimestral" targetRef="End_ClienteAtivo" />
    <bpmn2:sequenceFlow id="Flow_Nuc_Guardiao" sourceRef="Task_Guardiao48h" targetRef="Task_ResgateManual" />
    <bpmn2:sequenceFlow id="Flow_Nuc_Resgate" sourceRef="Task_ResgateManual" targetRef="End_ClienteAtivo" />

  </bpmn2:process>

  <!-- ==================== DIAGRAMA VISUAL ==================== -->
  <bpmndi:BPMNDiagram id="BPMNDiagram_MapaGuerra">
    <bpmndi:BPMNPlane id="BPMNPlane_MapaGuerra" bpmnElement="Collaboration_MapaGuerra">

      <!-- Participant -->
      <bpmndi:BPMNShape id="Shape_Participant" bpmnElement="Participant_MapaGuerra" isHorizontal="true">
        <dc:Bounds x="120" y="60" width="2400" height="1200" />
      </bpmndi:BPMNShape>

      <!-- RAIA 1: OUTBOUND -->
      <bpmndi:BPMNShape id="Shape_Lane_Outbound" bpmnElement="Lane_Outbound" isHorizontal="true">
        <dc:Bounds x="150" y="60" width="2370" height="220" />
      </bpmndi:BPMNShape>

      <!-- RAIA 2: ALUNOS -->
      <bpmndi:BPMNShape id="Shape_Lane_Alunos" bpmnElement="Lane_Alunos" isHorizontal="true">
        <dc:Bounds x="150" y="280" width="2370" height="200" />
      </bpmndi:BPMNShape>

      <!-- RAIA 3: GOOGLE -->
      <bpmndi:BPMNShape id="Shape_Lane_Google" bpmnElement="Lane_Google" isHorizontal="true">
        <dc:Bounds x="150" y="480" width="2370" height="220" />
      </bpmndi:BPMNShape>

      <!-- RAIA 4: META -->
      <bpmndi:BPMNShape id="Shape_Lane_Meta" bpmnElement="Lane_Meta" isHorizontal="true">
        <dc:Bounds x="150" y="700" width="2370" height="200" />
      </bpmndi:BPMNShape>

      <!-- NUCLEO -->
      <bpmndi:BPMNShape id="Shape_Lane_Nucleo" bpmnElement="Lane_Nucleo" isHorizontal="true">
        <dc:Bounds x="150" y="900" width="2370" height="360" />
      </bpmndi:BPMNShape>

      <!-- ===== SHAPES RAIA 1: OUTBOUND ===== -->
      <bpmndi:BPMNShape id="Shape_Start_Outbound" bpmnElement="Start_Outbound">
        <dc:Bounds x="200" y="152" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_MineracaoCNPJ" bpmnElement="Task_MineracaoCNPJ">
        <dc:Bounds x="270" y="130" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_EmailAbertura" bpmnElement="Task_EmailAbertura">
        <dc:Bounds x="400" y="130" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_LigacaoManha" bpmnElement="Task_LigacaoManha">
        <dc:Bounds x="530" y="130" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_AtendeuManha" bpmnElement="Gateway_AtendeuManha" isMarkerVisible="true">
        <dc:Bounds x="660" y="145" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_AgendaTarde" bpmnElement="Task_AgendaTarde">
        <dc:Bounds x="740" y="80" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_LigacaoTarde" bpmnElement="Task_LigacaoTarde">
        <dc:Bounds x="870" y="80" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_AtendeuTarde" bpmnElement="Gateway_AtendeuTarde" isMarkerVisible="true">
        <dc:Bounds x="1000" y="85" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_FlashDemo" bpmnElement="Task_FlashDemo">
        <dc:Bounds x="1080" y="130" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_AceitouTrial_Out" bpmnElement="Gateway_AceitouTrial_Out" isMarkerVisible="true">
        <dc:Bounds x="1230" y="145" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_LiberaTrial7d_Out" bpmnElement="Task_LiberaTrial7d_Out">
        <dc:Bounds x="1310" y="130" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D1_Valor_Out" bpmnElement="Task_D1_Valor_Out">
        <dc:Bounds x="1440" y="130" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D3_Video_Out" bpmnElement="Task_D3_Video_Out">
        <dc:Bounds x="1570" y="130" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D5_Relatorio_Out" bpmnElement="Task_D5_Relatorio_Out">
        <dc:Bounds x="1700" y="130" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D7_Fechamento_Out" bpmnElement="Task_D7_Fechamento_Out">
        <dc:Bounds x="1830" y="130" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Conversao_Out" bpmnElement="Gateway_Conversao_Out" isMarkerVisible="true">
        <dc:Bounds x="1980" y="145" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Bloqueio_Out" bpmnElement="End_Bloqueio_Out">
        <dc:Bounds x="2420" y="142" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- ===== SHAPES RAIA 2: ALUNOS ===== -->
      <bpmndi:BPMNShape id="Shape_Start_Alunos" bpmnElement="Start_Alunos">
        <dc:Bounds x="200" y="362" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_AulaGestao" bpmnElement="Task_AulaGestao">
        <dc:Bounds x="270" y="340" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_LinkVIP30d" bpmnElement="Task_LinkVIP30d">
        <dc:Bounds x="400" y="340" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D0_Onboarding_Alu" bpmnElement="Task_D0_Onboarding_Alu">
        <dc:Bounds x="530" y="340" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D1_D14_Automacao" bpmnElement="Task_D1_D14_Automacao">
        <dc:Bounds x="680" y="340" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D15_Checkin" bpmnElement="Task_D15_Checkin">
        <dc:Bounds x="830" y="340" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D25_OfertaAnual" bpmnElement="Task_D25_OfertaAnual">
        <dc:Bounds x="980" y="340" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D30_Fechamento_Alu" bpmnElement="Task_D30_Fechamento_Alu">
        <dc:Bounds x="1130" y="340" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Conversao_Alu" bpmnElement="Gateway_Conversao_Alu" isMarkerVisible="true">
        <dc:Bounds x="1280" y="355" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Bloqueio_Alu" bpmnElement="End_Bloqueio_Alu">
        <dc:Bounds x="1620" y="352" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- ===== SHAPES RAIA 3: GOOGLE ===== -->
      <bpmndi:BPMNShape id="Shape_Start_Google" bpmnElement="Start_Google">
        <dc:Bounds x="200" y="572" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_LP_Google" bpmnElement="Task_LP_Google">
        <dc:Bounds x="270" y="550" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_TipoConversao_Goo" bpmnElement="Gateway_TipoConversao_Goo" isMarkerVisible="true">
        <dc:Bounds x="400" y="565" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_SelfService_Goo" bpmnElement="Task_SelfService_Goo">
        <dc:Bounds x="480" y="490" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_WhatsApp_Goo" bpmnElement="Task_WhatsApp_Goo">
        <dc:Bounds x="480" y="620" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_SpeedToLead_Goo" bpmnElement="Task_SpeedToLead_Goo">
        <dc:Bounds x="610" y="620" width="120" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_PitchDor_Goo" bpmnElement="Task_PitchDor_Goo">
        <dc:Bounds x="760" y="620" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_LiberaTrial7d_Goo" bpmnElement="Task_LiberaTrial7d_Goo">
        <dc:Bounds x="890" y="550" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D1_Followup_Goo" bpmnElement="Task_D1_Followup_Goo">
        <dc:Bounds x="1020" y="550" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D3_Pressao_Goo" bpmnElement="Task_D3_Pressao_Goo">
        <dc:Bounds x="1150" y="550" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D5_Urgencia_Goo" bpmnElement="Task_D5_Urgencia_Goo">
        <dc:Bounds x="1280" y="550" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D7_Fechamento_Goo" bpmnElement="Task_D7_Fechamento_Goo">
        <dc:Bounds x="1410" y="550" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Conversao_Goo" bpmnElement="Gateway_Conversao_Goo" isMarkerVisible="true">
        <dc:Bounds x="1540" y="565" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Bloqueio_Goo" bpmnElement="End_Bloqueio_Goo">
        <dc:Bounds x="1880" y="562" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- ===== SHAPES RAIA 4: META ===== -->
      <bpmndi:BPMNShape id="Shape_Start_Meta" bpmnElement="Start_Meta">
        <dc:Bounds x="200" y="782" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_IscaDigital" bpmnElement="Task_IscaDigital">
        <dc:Bounds x="270" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_ContatoConsultivo" bpmnElement="Task_ContatoConsultivo">
        <dc:Bounds x="400" y="760" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_EducacaoVideos" bpmnElement="Task_EducacaoVideos">
        <dc:Bounds x="550" y="760" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_ConviteTrial_Meta" bpmnElement="Task_ConviteTrial_Meta">
        <dc:Bounds x="700" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_LiberaTrial7d_Meta" bpmnElement="Task_LiberaTrial7d_Meta">
        <dc:Bounds x="830" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D1_ProvaSocial_Meta" bpmnElement="Task_D1_ProvaSocial_Meta">
        <dc:Bounds x="960" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D4_Case_Meta" bpmnElement="Task_D4_Case_Meta">
        <dc:Bounds x="1090" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D7_Fechamento_Meta" bpmnElement="Task_D7_Fechamento_Meta">
        <dc:Bounds x="1220" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D10_UltimaChance_Meta" bpmnElement="Task_D10_UltimaChance_Meta">
        <dc:Bounds x="1350" y="760" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Conversao_Meta" bpmnElement="Gateway_Conversao_Meta" isMarkerVisible="true">
        <dc:Bounds x="1500" y="775" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Bloqueio_Meta" bpmnElement="End_Bloqueio_Meta">
        <dc:Bounds x="1840" y="772" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- ===== SHAPES NUCLEO ===== -->
      <bpmndi:BPMNShape id="Shape_Gateway_Checkout" bpmnElement="Gateway_Checkout" isMarkerVisible="true">
        <dc:Bounds x="400" y="1055" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_PagamentoSucesso" bpmnElement="Task_PagamentoSucesso">
        <dc:Bounds x="520" y="940" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Split30" bpmnElement="Task_Split30">
        <dc:Bounds x="660" y="940" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_OnboardingPago" bpmnElement="Task_OnboardingPago">
        <dc:Bounds x="820" y="940" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_FalhaSaldo" bpmnElement="Task_FalhaSaldo">
        <dc:Bounds x="520" y="1040" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_OfertaSemestral" bpmnElement="Task_OfertaSemestral">
        <dc:Bounds x="660" y="1040" width="140" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_AbandonoCarrinho" bpmnElement="Task_AbandonoCarrinho">
        <dc:Bounds x="520" y="1140" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_OfertaTrimestral" bpmnElement="Task_OfertaTrimestral">
        <dc:Bounds x="660" y="1140" width="140" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Guardiao48h" bpmnElement="Task_Guardiao48h">
        <dc:Bounds x="922" y="1002" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_ResgateManual" bpmnElement="Task_ResgateManual">
        <dc:Bounds x="1000" y="1040" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_ClienteAtivo" bpmnElement="End_ClienteAtivo">
        <dc:Bounds x="1200" y="962" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Churn" bpmnElement="End_Churn">
        <dc:Bounds x="1200" y="1162" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- ===== EDGES RAIA 1 ===== -->
      <bpmndi:BPMNEdge id="Edge_Flow_Out_1" bpmnElement="Flow_Out_1">
        <di:waypoint x="236" y="170" />
        <di:waypoint x="270" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_2" bpmnElement="Flow_Out_2">
        <di:waypoint x="370" y="170" />
        <di:waypoint x="400" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_3" bpmnElement="Flow_Out_3">
        <di:waypoint x="500" y="170" />
        <di:waypoint x="530" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_4" bpmnElement="Flow_Out_4">
        <di:waypoint x="630" y="170" />
        <di:waypoint x="660" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_5_Sim" bpmnElement="Flow_Out_5_Sim">
        <di:waypoint x="710" y="170" />
        <di:waypoint x="1080" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_5_Nao" bpmnElement="Flow_Out_5_Nao">
        <di:waypoint x="685" y="145" />
        <di:waypoint x="685" y="110" />
        <di:waypoint x="740" y="110" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_6" bpmnElement="Flow_Out_6">
        <di:waypoint x="840" y="110" />
        <di:waypoint x="870" y="110" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_7" bpmnElement="Flow_Out_7">
        <di:waypoint x="970" y="110" />
        <di:waypoint x="1000" y="110" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_8_Sim" bpmnElement="Flow_Out_8_Sim">
        <di:waypoint x="1025" y="135" />
        <di:waypoint x="1025" y="170" />
        <di:waypoint x="1080" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_8_Nao" bpmnElement="Flow_Out_8_Nao">
        <di:waypoint x="1050" y="110" />
        <di:waypoint x="2118" y="110" />
        <di:waypoint x="2118" y="100" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_9" bpmnElement="Flow_Out_9">
        <di:waypoint x="1200" y="170" />
        <di:waypoint x="1230" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_10_Sim" bpmnElement="Flow_Out_10_Sim">
        <di:waypoint x="1280" y="170" />
        <di:waypoint x="1310" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_10_Nao" bpmnElement="Flow_Out_10_Nao">
        <di:waypoint x="1255" y="145" />
        <di:waypoint x="1255" y="100" />
        <di:waypoint x="2100" y="100" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_11" bpmnElement="Flow_Out_11">
        <di:waypoint x="1410" y="170" />
        <di:waypoint x="1440" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_12" bpmnElement="Flow_Out_12">
        <di:waypoint x="1540" y="170" />
        <di:waypoint x="1570" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_13" bpmnElement="Flow_Out_13">
        <di:waypoint x="1670" y="170" />
        <di:waypoint x="1700" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_14" bpmnElement="Flow_Out_14">
        <di:waypoint x="1800" y="170" />
        <di:waypoint x="1830" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_15" bpmnElement="Flow_Out_15">
        <di:waypoint x="1950" y="170" />
        <di:waypoint x="1980" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_Checkout" bpmnElement="Flow_Out_Checkout">
        <di:waypoint x="2005" y="195" />
        <di:waypoint x="2005" y="1080" />
        <di:waypoint x="450" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Out_Descarte" bpmnElement="Flow_Out_Descarte">
        <di:waypoint x="2030" y="170" />
        <di:waypoint x="2065" y="170" />
        <di:waypoint x="2065" y="100" />
        <di:waypoint x="2100" y="100" />
      </bpmndi:BPMNEdge>

      <!-- ===== EDGES RAIA 2 ===== -->
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_1" bpmnElement="Flow_Alu_1">
        <di:waypoint x="236" y="380" />
        <di:waypoint x="270" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_2" bpmnElement="Flow_Alu_2">
        <di:waypoint x="370" y="380" />
        <di:waypoint x="400" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_3" bpmnElement="Flow_Alu_3">
        <di:waypoint x="500" y="380" />
        <di:waypoint x="530" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_4" bpmnElement="Flow_Alu_4">
        <di:waypoint x="650" y="380" />
        <di:waypoint x="680" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_5" bpmnElement="Flow_Alu_5">
        <di:waypoint x="800" y="380" />
        <di:waypoint x="830" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_6" bpmnElement="Flow_Alu_6">
        <di:waypoint x="950" y="380" />
        <di:waypoint x="980" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_7" bpmnElement="Flow_Alu_7">
        <di:waypoint x="1100" y="380" />
        <di:waypoint x="1130" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_8" bpmnElement="Flow_Alu_8">
        <di:waypoint x="1250" y="380" />
        <di:waypoint x="1280" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_Checkout" bpmnElement="Flow_Alu_Checkout">
        <di:waypoint x="1305" y="405" />
        <di:waypoint x="1305" y="1080" />
        <di:waypoint x="450" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_Bloqueio" bpmnElement="Flow_Alu_Bloqueio">
        <di:waypoint x="1330" y="380" />
        <di:waypoint x="1355" y="380" />
        <di:waypoint x="1355" y="318" />
        <di:waypoint x="1380" y="318" />
      </bpmndi:BPMNEdge>

      <!-- ===== EDGES RAIA 3 ===== -->
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_1" bpmnElement="Flow_Goo_1">
        <di:waypoint x="236" y="590" />
        <di:waypoint x="270" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_2" bpmnElement="Flow_Goo_2">
        <di:waypoint x="370" y="590" />
        <di:waypoint x="400" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_SelfService" bpmnElement="Flow_Goo_SelfService">
        <di:waypoint x="425" y="565" />
        <di:waypoint x="425" y="520" />
        <di:waypoint x="480" y="520" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_Assistida" bpmnElement="Flow_Goo_Assistida">
        <di:waypoint x="425" y="615" />
        <di:waypoint x="425" y="650" />
        <di:waypoint x="480" y="650" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_Direct_Checkout" bpmnElement="Flow_Goo_Direct_Checkout">
        <di:waypoint x="530" y="490" />
        <di:waypoint x="530" y="450" />
        <di:waypoint x="300" y="450" />
        <di:waypoint x="300" y="1080" />
        <di:waypoint x="400" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_3" bpmnElement="Flow_Goo_3">
        <di:waypoint x="580" y="650" />
        <di:waypoint x="610" y="650" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_4" bpmnElement="Flow_Goo_4">
        <di:waypoint x="730" y="650" />
        <di:waypoint x="760" y="650" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_5" bpmnElement="Flow_Goo_5">
        <di:waypoint x="860" y="650" />
        <di:waypoint x="875" y="650" />
        <di:waypoint x="875" y="590" />
        <di:waypoint x="890" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_6" bpmnElement="Flow_Goo_6">
        <di:waypoint x="990" y="590" />
        <di:waypoint x="1020" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_7" bpmnElement="Flow_Goo_7">
        <di:waypoint x="1120" y="590" />
        <di:waypoint x="1150" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_8" bpmnElement="Flow_Goo_8">
        <di:waypoint x="1250" y="590" />
        <di:waypoint x="1280" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_9" bpmnElement="Flow_Goo_9">
        <di:waypoint x="1380" y="590" />
        <di:waypoint x="1410" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_10" bpmnElement="Flow_Goo_10">
        <di:waypoint x="1510" y="590" />
        <di:waypoint x="1540" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_Checkout" bpmnElement="Flow_Goo_Checkout">
        <di:waypoint x="1565" y="615" />
        <di:waypoint x="1565" y="1080" />
        <di:waypoint x="450" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_Perdido" bpmnElement="Flow_Goo_Perdido">
        <di:waypoint x="1590" y="590" />
        <di:waypoint x="1615" y="590" />
        <di:waypoint x="1615" y="510" />
        <di:waypoint x="1640" y="510" />
      </bpmndi:BPMNEdge>

      <!-- ===== EDGES RAIA 4 ===== -->
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_1" bpmnElement="Flow_Meta_1">
        <di:waypoint x="236" y="800" />
        <di:waypoint x="270" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_2" bpmnElement="Flow_Meta_2">
        <di:waypoint x="370" y="800" />
        <di:waypoint x="400" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_3" bpmnElement="Flow_Meta_3">
        <di:waypoint x="520" y="800" />
        <di:waypoint x="550" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_4" bpmnElement="Flow_Meta_4">
        <di:waypoint x="670" y="800" />
        <di:waypoint x="700" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_5" bpmnElement="Flow_Meta_5">
        <di:waypoint x="800" y="800" />
        <di:waypoint x="830" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_6" bpmnElement="Flow_Meta_6">
        <di:waypoint x="930" y="800" />
        <di:waypoint x="960" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_7" bpmnElement="Flow_Meta_7">
        <di:waypoint x="1060" y="800" />
        <di:waypoint x="1090" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_8" bpmnElement="Flow_Meta_8">
        <di:waypoint x="1190" y="800" />
        <di:waypoint x="1220" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_9" bpmnElement="Flow_Meta_9">
        <di:waypoint x="1320" y="800" />
        <di:waypoint x="1350" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_10" bpmnElement="Flow_Meta_10">
        <di:waypoint x="1470" y="800" />
        <di:waypoint x="1500" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Checkout" bpmnElement="Flow_Meta_Checkout">
        <di:waypoint x="1525" y="825" />
        <di:waypoint x="1525" y="1080" />
        <di:waypoint x="450" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Perdido" bpmnElement="Flow_Meta_Perdido">
        <di:waypoint x="1550" y="800" />
        <di:waypoint x="1575" y="800" />
        <di:waypoint x="1575" y="730" />
        <di:waypoint x="1600" y="730" />
      </bpmndi:BPMNEdge>

      <!-- ===== EDGES NUCLEO ===== -->
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_Sucesso" bpmnElement="Flow_Nuc_Sucesso">
        <di:waypoint x="425" y="1055" />
        <di:waypoint x="425" y="980" />
        <di:waypoint x="520" y="980" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_FalhaSaldo" bpmnElement="Flow_Nuc_FalhaSaldo">
        <di:waypoint x="450" y="1080" />
        <di:waypoint x="520" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_Abandono" bpmnElement="Flow_Nuc_Abandono">
        <di:waypoint x="425" y="1105" />
        <di:waypoint x="425" y="1180" />
        <di:waypoint x="520" y="1180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_1" bpmnElement="Flow_Nuc_1">
        <di:waypoint x="620" y="980" />
        <di:waypoint x="660" y="980" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_2" bpmnElement="Flow_Nuc_2">
        <di:waypoint x="780" y="980" />
        <di:waypoint x="820" y="980" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_Ativo" bpmnElement="Flow_Nuc_Ativo">
        <di:waypoint x="940" y="980" />
        <di:waypoint x="1200" y="980" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_3" bpmnElement="Flow_Nuc_3">
        <di:waypoint x="620" y="1080" />
        <di:waypoint x="660" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_Retry" bpmnElement="Flow_Nuc_Retry">
        <di:waypoint x="800" y="1080" />
        <di:waypoint x="1218" y="1080" />
        <di:waypoint x="1218" y="998" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_4" bpmnElement="Flow_Nuc_4">
        <di:waypoint x="620" y="1180" />
        <di:waypoint x="660" y="1180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_Retry2" bpmnElement="Flow_Nuc_Retry2">
        <di:waypoint x="800" y="1180" />
        <di:waypoint x="1218" y="1180" />
        <di:waypoint x="1218" y="998" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_Guardiao" bpmnElement="Flow_Nuc_Guardiao">
        <di:waypoint x="958" y="1020" />
        <di:waypoint x="979" y="1020" />
        <di:waypoint x="979" y="1080" />
        <di:waypoint x="1000" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Nuc_Resgate" bpmnElement="Flow_Nuc_Resgate">
        <di:waypoint x="1120" y="1080" />
        <di:waypoint x="1160" y="1080" />
        <di:waypoint x="1160" y="980" />
        <di:waypoint x="1200" y="980" />
      </bpmndi:BPMNEdge>

    
      <!-- Link Throw Events Shapes -->
      <bpmndi:BPMNShape id="Shape_LinkThrow_Out_Checkout" bpmnElement="LinkThrow_Out_Checkout">
        <dc:Bounds x="2100" y="152" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_LinkThrow_Alu_Checkout" bpmnElement="LinkThrow_Alu_Checkout">
        <dc:Bounds x="1400" y="362" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_LinkThrow_Goo_Checkout" bpmnElement="LinkThrow_Goo_Checkout">
        <dc:Bounds x="1660" y="572" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_LinkThrow_Meta_Checkout" bpmnElement="LinkThrow_Meta_Checkout">
        <dc:Bounds x="1620" y="782" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- Link Catch Events Shapes -->
      <bpmndi:BPMNShape id="Shape_LinkCatch_From_Out" bpmnElement="LinkCatch_From_Out">
        <dc:Bounds x="100" y="1062" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_LinkCatch_From_Alu" bpmnElement="LinkCatch_From_Alu">
        <dc:Bounds x="180" y="1062" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_LinkCatch_From_Goo" bpmnElement="LinkCatch_From_Goo">
        <dc:Bounds x="260" y="1062" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_LinkCatch_From_Meta" bpmnElement="LinkCatch_From_Meta">
        <dc:Bounds x="340" y="1062" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- Edges from LinkCatch to Gateway_Checkout -->
      <bpmndi:BPMNEdge id="Edge_Flow_LinkCatch_Out" bpmnElement="Flow_LinkCatch_Out">
        <di:waypoint x="136" y="1080" />
        <di:waypoint x="425" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_LinkCatch_Alu" bpmnElement="Flow_LinkCatch_Alu">
        <di:waypoint x="216" y="1080" />
        <di:waypoint x="425" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_LinkCatch_Goo" bpmnElement="Flow_LinkCatch_Goo">
        <di:waypoint x="296" y="1080" />
        <di:waypoint x="425" y="1080" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_LinkCatch_Meta" bpmnElement="Flow_LinkCatch_Meta">
        <di:waypoint x="376" y="1080" />
        <di:waypoint x="425" y="1080" />
      </bpmndi:BPMNEdge>

    
      <!-- Nurturing Tasks Shapes -->
      <bpmndi:BPMNShape id="Shape_Task_GrupoNurturing_Out" bpmnElement="Task_GrupoNurturing_Out">
        <dc:Bounds x="2250" y="120" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_GrupoNurturing_Alu" bpmnElement="Task_GrupoNurturing_Alu">
        <dc:Bounds x="1450" y="330" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_GrupoNurturing_Goo" bpmnElement="Task_GrupoNurturing_Goo">
        <dc:Bounds x="1710" y="540" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_GrupoNurturing_Meta" bpmnElement="Task_GrupoNurturing_Meta">
        <dc:Bounds x="1670" y="750" width="100" height="80" />
      </bpmndi:BPMNShape>

      <!-- Edges para nurturing flows -->
      <bpmndi:BPMNEdge id="Edge_Flow_Out_Bloqueio" bpmnElement="Flow_Out_Bloqueio">
        <di:waypoint x="2350" y="160" />
        <di:waypoint x="2420" y="160" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Alu_Bloqueio_Final" bpmnElement="Flow_Alu_Bloqueio_Final">
        <di:waypoint x="1550" y="370" />
        <di:waypoint x="1620" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Goo_Bloqueio" bpmnElement="Flow_Goo_Bloqueio">
        <di:waypoint x="1810" y="580" />
        <di:waypoint x="1880" y="580" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Bloqueio" bpmnElement="Flow_Meta_Bloqueio">
        <di:waypoint x="1770" y="790" />
        <di:waypoint x="1840" y="790" />
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</bpmn2:definitions>`,yne=vne,IC=`<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"
                   xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
                   xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
                   xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
                   id="Definitions_Indicacoes"
                   targetNamespace="http://fyness.com/bpmn/indicacoes">

  <bpmn2:collaboration id="Collaboration_Indicacoes">
    <bpmn2:participant id="Participant_Indicacoes" name="INDICACOES - O FUNIL DA CONFIANCA" processRef="Process_Indicacoes" />
  </bpmn2:collaboration>

  <bpmn2:process id="Process_Indicacoes" name="Fluxo de Indicacoes" isExecutable="false">

    <bpmn2:laneSet id="LaneSet_Indicacoes">
      <bpmn2:lane id="Lane_Indicacoes" name="INDICACOES - Funil da Confianca (7d Trial + Bonus Parceiro)">
        <!-- GATEWAY DE ENTRADA -->
        <bpmn2:flowNodeRef>Start_Indicacao</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_TipoEntrada</bpmn2:flowNodeRef>
        <!-- CENARIO A: ATIVO (Parceiro entrega contato) -->
        <bpmn2:flowNodeRef>Task_TagIndicacao</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_ContatoAtivo</bpmn2:flowNodeRef>
        <!-- CENARIO B: PASSIVO (Lead te procura) -->
        <bpmn2:flowNodeRef>Task_TagPassivo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_ContatoPassivo</bpmn2:flowNodeRef>
        <!-- MERGE E LIGACAO -->
        <bpmn2:flowNodeRef>Gateway_MergeContato</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_LigacaoParceiro</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_Atendeu</bpmn2:flowNodeRef>
        <!-- PATH NAO ATENDEU - CADENCIA DO PARCEIRO -->
        <bpmn2:flowNodeRef>Task_D1_ParceiroPerguntou</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D3_VideoBastidor</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D5_BonusExpirando</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D7_Despedida</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_Respondeu</bpmn2:flowNodeRef>
        <!-- FLASH DEMO -->
        <bpmn2:flowNodeRef>Task_FlashDemo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_QuerTrial</bpmn2:flowNodeRef>
        <!-- TRIAL 7 DIAS COM GUARDIAO -->
        <bpmn2:flowNodeRef>Task_AtivarTrial</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_Guardiao_Ind</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_AlertaInativo</bpmn2:flowNodeRef>
        <!-- VITRINE BINARIA D7 -->
        <bpmn2:flowNodeRef>Task_OfertaAnual</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_FechouAnual</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_OfertaSemestral</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_FechouSemestral</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_OfertaTrimestral</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_FechouTrimestral</bpmn2:flowNodeRef>
        <!-- POS-CONVERSAO -->
        <bpmn2:flowNodeRef>Task_NotificaParceiro</bpmn2:flowNodeRef>
        <!-- FINALIZACOES -->
        <bpmn2:flowNodeRef>End_Checkout_Ind</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>End_Perdido_Ind</bpmn2:flowNodeRef>
      </bpmn2:lane>
    </bpmn2:laneSet>

    <!-- ==================== GATEWAY DE ENTRADA ==================== -->

    <bpmn2:startEvent id="Start_Indicacao" name="Lead Indicado">
      <bpmn2:documentation>ENTRADA DO LEAD INDICADO:
O lead entra por um de dois caminhos:
- Cenario A: Parceiro te entrega o contato (ATIVO)
- Cenario B: Lead te procura dizendo que conhece o parceiro (PASSIVO)</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Ind_Start</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:exclusiveGateway id="Gateway_TipoEntrada" name="Como Chegou?">
      <bpmn2:documentation>GATEWAY DE ENTRADA:

CENARIO A - ATIVO:
Parceiro te manda o Zap do lead.
Voce precisa dar o "Oi" inicial com autoridade emprestada.

CENARIO B - PASSIVO:
Lead clica no link ou te chama dizendo "O [Parceiro] me falou de voce".
Tratamento VIP imediato.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Start</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Ativo</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Passivo</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <!-- ==================== CENARIO A: ATIVO (Parceiro entrega contato) ==================== -->

    <bpmn2:serviceTask id="Task_TagIndicacao" name="Tag [INDICACAO: PARCEIRO]">
      <bpmn2:documentation>TAGUEAMENTO DO LEAD:
- Tag: [INDICACAO: NOME_DO_PARCEIRO]
- Origem: ATIVO (parceiro entregou)
- Medir qual parceiro traz os melhores clientes</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Ativo</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_2A</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_ContatoAtivo" name="Oi Inicial (Autoridade Emprestada)">
      <bpmn2:documentation>PRIMEIRO CONTATO - CENARIO ATIVO:

SCRIPT WHATSAPP:
"Oi [Lead], aqui e o [Vendedor] da Fyness!

O [Parceiro] me passou seu contato e pediu MUITO
pra eu falar contigo. Ele ta usando o sistema
na [Empresa dele] e quis que voce visse tambem.

Posso te ligar rapidinho pra te mostrar o que ele viu?"

OBJETIVO: Usar autoridade do parceiro para abrir conversa</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_2A</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_3A</bpmn2:outgoing>
    </bpmn2:sendTask>

    <!-- ==================== CENARIO B: PASSIVO (Lead te procura) ==================== -->

    <bpmn2:serviceTask id="Task_TagPassivo" name="Tag [INDICACAO: PARCEIRO]">
      <bpmn2:documentation>TAGUEAMENTO DO LEAD:
- Tag: [INDICACAO: NOME_DO_PARCEIRO]
- Origem: PASSIVO (lead veio sozinho)
- Identificar qual parceiro indicou</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Passivo</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_2B</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_ContatoPassivo" name="Resposta VIP Imediata">
      <bpmn2:documentation>PRIMEIRO CONTATO - CENARIO PASSIVO:

SCRIPT WHATSAPP:
"[Lead]! Que bom que voce veio!

O [Parceiro] ja tinha me falado de voce,
tava te esperando! Ele me contou que voce
tambem ta na correria com a gestao da [Empresa].

Deixa eu te mostrar rapidinho o que ele viu
e curtiu tanto. Posso te ligar agora?"

OBJETIVO: Tratamento VIP, valorizar que veio por indicacao</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_2B</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_3B</bpmn2:outgoing>
    </bpmn2:sendTask>

    <!-- ==================== MERGE E LIGACAO ==================== -->

    <bpmn2:exclusiveGateway id="Gateway_MergeContato" name="Merge">
      <bpmn2:incoming>Flow_Ind_3A</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_3B</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_4</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:userTask id="Task_LigacaoParceiro" name="Ligacao (Cita Parceiro no 1o Segundo)">
      <bpmn2:documentation>LIGACAO COM AUTORIDADE EMPRESTADA:

ABRIR A LIGACAO CITANDO O PARCEIRO NO 1o SEGUNDO!

SCRIPT:
"[Lead]! Aqui e o [Vendedor], o [PARCEIRO] me cobrou
pra te ligar! Ele ficou empolgado com o que a gente
fez pra academia dele e insistiu que eu te mostrasse."

"Ele comentou que voce sofre com [DOR ESPECIFICA].
Deixa eu te mostrar em 2 minutinhos o que ele viu
aqui no Zap... e voce me diz se faz sentido pra voce."

OBJETIVO: Quebrar o gelo usando confianca do parceiro</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_4</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_5</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_Atendeu" name="Atendeu?">
      <bpmn2:documentation>DECISAO: Lead atendeu a ligacao?

SIM -> Flash Demo imediata
NAO -> Cadencia do Parceiro (D1 a D7)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_5</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Atendeu</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_NaoAtendeu</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <!-- ==================== PATH NAO ATENDEU - CADENCIA DO PARCEIRO ==================== -->

    <bpmn2:sendTask id="Task_D1_ParceiroPerguntou" name="D+1: [Parceiro] Perguntou se Ja Mostrei">
      <bpmn2:documentation>CADENCIA D+1 - PRESSAO SOCIAL POSITIVA:

WHATSAPP:
"Fala [Lead], o [Parceiro] me perguntou se eu ja
tinha te mostrado o sistema. Ta na correria?

Me da um toque quando tiver 5 minutinhos
que te mostro rapidinho!"

OBJETIVO: Usar nome do parceiro como alavanca (sem ser chato)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_NaoAtendeu</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_6</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D3_VideoBastidor" name="D+3: Video de Bastidor">
      <bpmn2:documentation>CADENCIA D+3 - VIDEO DE BASTIDOR:

WHATSAPP + VIDEO CURTO:
"[Lead], gravei esse video rapidinho mostrando
um resultado foda que a gente fez essa semana.

O [Parceiro] ja viu e curtiu demais.
Da uma olhada quando puder!"

[ANEXAR VIDEO DE 30-60 SEG MOSTRANDO RESULTADO]

OBJETIVO: Prova social em video, resultado real</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_6</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_7</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D5_BonusExpirando" name="D+5: Bonus do Parceiro Expirando">
      <bpmn2:documentation>CADENCIA D+5 - URGENCIA DO BONUS:

WHATSAPP:
"[Lead], nao quero que voce perca o bonus
que o [Parceiro] conseguiu pra voce!

Ele me pediu pra garantir que voce testasse
antes de expirar. Conseguiu dar uma olhada?"

OBJETIVO: Criar urgencia usando o nome do parceiro</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_7</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_8</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D7_Despedida" name="D+7: Mensagem de Despedida">
      <bpmn2:documentation>CADENCIA D+7 - DESPEDIDA ELEGANTE:

WHATSAPP:
"[Lead], vou liberar o link pro bonus expirar.

Nao quero te encher, mas se precisar de mim
no futuro, o contato e este. O [Parceiro]
sabe me achar tambem!

Sucesso ai na [Empresa]! Abraco"

OBJETIVO: Fechar ciclo com elegancia, nao queimar ponte</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_8</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_9</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:exclusiveGateway id="Gateway_Respondeu" name="Respondeu na Cadencia?">
      <bpmn2:documentation>DECISAO: Lead respondeu durante a cadencia D1-D7?

SIM -> Flash Demo
NAO -> Lead Perdido (mas nao descartado)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_9</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Respondeu</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_NaoRespondeu</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <!-- ==================== FLASH DEMO ==================== -->

    <bpmn2:userTask id="Task_FlashDemo" name="Flash Demo (IA Processando Gasto Real)">
      <bpmn2:documentation>FLASH DEMO COM PROVA DE VALOR:

SCRIPT DE ABERTURA:
"O [Parceiro] me disse que voce queria ver isso...
Deixa eu te mostrar a IA processando um gasto real."

DURANTE A DEMO:
- Mostrar IA categorizando despesa em tempo real
- Usar exemplo similar ao do parceiro
- "Isso aqui o [Parceiro] usa todo dia..."

FECHAMENTO:
"Faz sentido pra [Empresa]? Quer testar 7 dias
com o bonus que o [Parceiro] conseguiu pra voce?"

OBJETIVO: Prova de valor INSTANTANEA</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Atendeu</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Respondeu</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_10</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_QuerTrial" name="Quer Trial?">
      <bpmn2:incoming>Flow_Ind_10</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Trial_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Trial_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <!-- ==================== TRIAL 7 DIAS COM GUARDIAO ==================== -->

    <bpmn2:serviceTask id="Task_AtivarTrial" name="Ativar Trial 7 Dias">
      <bpmn2:documentation>ATIVACAO DO TRIAL:
- Liberar acesso completo por 7 dias
- Tag: [TRIAL_INDICACAO: PARCEIRO]
- Configurar Guardiao para monitorar uso
- Agendar cadencia de fechamento D7

OBJETIVO: Fazer o lead "sentir o gosto" da organizacao</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Trial_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_11</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:serviceTask id="Task_Guardiao_Ind" name="Guardiao: Monitorar Uso no Trial">
      <bpmn2:documentation>GUARDIAO DO TRIAL INDICACAO:

MONITORAR:
- Login diario
- Funcionalidades usadas
- Tempo na plataforma
- Dados cadastrados

REGRA DE ALERTA:
Se nao logar em 48h -> Dispara alerta de inatividade

OBJETIVO: Nao deixar o lead esfriar durante o trial</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_11</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_12</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Inativo</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_AlertaInativo" name="Alerta: Ta Conseguindo Acessar?">
      <bpmn2:documentation>ALERTA DE INATIVIDADE (48H SEM LOGIN):

WHATSAPP:
"[Lead], vi que voce nao conseguiu entrar ainda.
Ta conseguindo acessar?

O [Parceiro] me pediu pra garantir que voce
testasse direitinho. Quer que eu te ajude?"

OBJETIVO: Reengajar lead inativo antes de esfriar</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Inativo</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_VoltaGuardiao</bpmn2:outgoing>
    </bpmn2:sendTask>

    <!-- ==================== VITRINE BINARIA D7 ==================== -->

    <bpmn2:userTask id="Task_OfertaAnual" name="D7: Oferta Anual R$1.497 + Bonus Parceiro">
      <bpmn2:documentation>VITRINE BINARIA - OFERTA PRINCIPAL:

LIGACAO D7:
"[Lead], seu trial termina hoje! Antes de falar
de planos, me conta: o que voce mais curtiu?"

[OUVIR E VALIDAR]

OFERTA PRINCIPAL:
"Como voce veio pela indicacao do [Parceiro],
tenho uma condicao especial:

PLANO ANUAL: R$ 1.497 (12x R$ 124,75)
+ BONUS DO PARCEIRO: 1 mes extra gratis!
+ Consultoria de setup inclusa

O [Parceiro] fechou esse mesmo plano.
Faz sentido pra voce?"

OBJETIVO: Fechar no plano de maior valor</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_12</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_VoltaGuardiao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_13</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_FechouAnual" name="Fechou Anual?">
      <bpmn2:incoming>Flow_Ind_13</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Anual_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Anual_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:userTask id="Task_OfertaSemestral" name="Recuperacao: Semestral R$997">
      <bpmn2:documentation>VITRINE BINARIA - RECUPERACAO:

SE RESISTIR AO ANUAL:
"Entendo! Olha, se o anual pesa agora,
tenho o SEMESTRAL por R$ 997 (6x R$ 166).

Voce ainda ganha o bonus do [Parceiro]
e pode fazer upgrade depois se quiser.

O que acha?"

OBJETIVO: Oferecer alternativa sem perder a venda</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Anual_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_14</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_FechouSemestral" name="Fechou Semestral?">
      <bpmn2:incoming>Flow_Ind_14</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Semestral_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Semestral_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:userTask id="Task_OfertaTrimestral" name="Downsell Final: Trimestral R$561">
      <bpmn2:documentation>VITRINE BINARIA - DOWNSELL FINAL:

ULTIMA TENTATIVA (VENDEDOR):
"[Lead], ultima opcao que consigo fazer:
TRIMESTRAL por R$ 561 (3x R$ 187).

E o minimo pra voce comecar a organizar
a [Empresa] e sentir o resultado.

Depois voce decide se quer continuar.
Topa testar por 3 meses?"

OBJETIVO: Nao perder o lead, converter no minimo</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Semestral_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_15</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_FechouTrimestral" name="Fechou Trimestral?">
      <bpmn2:incoming>Flow_Ind_15</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Trimestral_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Trimestral_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <!-- ==================== POS-CONVERSAO ==================== -->

    <bpmn2:sendTask id="Task_NotificaParceiro" name="Notifica Parceiro: Indicado Fechou!">
      <bpmn2:documentation>NOTIFICACAO AO PARCEIRO:

WHATSAPP PARA O PARCEIRO:
"[Parceiro], boa noticia!

O [Lead] que voce indicou FECHOU com a gente!
Muito obrigado pela indicacao, voce e demais!

Sua comissao de 30% ja ta garantida no sistema.
Valeu mesmo! Manda mais que a gente cuida!"

OBJETIVO:
- Agradecer e fortalecer relacionamento
- Lembrar da comissao (30% split automatico)
- Incentivar mais indicacoes</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Anual_Sim</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Semestral_Sim</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Trimestral_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Checkout</bpmn2:outgoing>
    </bpmn2:sendTask>

    <!-- ==================== FINALIZACOES ==================== -->

    <bpmn2:endEvent id="End_Checkout_Ind" name="Vai pro Checkout">
      <bpmn2:documentation>LEAD CONVERTIDO - VAI PRO CHECKOUT:
- Direcionar para Gateway Checkout (Centro)
- Split 30% automatico para o parceiro via Asaas
- Onboarding de cliente pago</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Checkout</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:endEvent id="End_Perdido_Ind" name="Lead Nao Converteu">
      <bpmn2:documentation>LEAD NAO CONVERTEU:

IMPORTANTE: Nao descartar completamente!
- Manter em lista de remarketing
- Notificar parceiro com cuidado
- Deixar porta aberta

MSG PARA PARCEIRO:
"[Parceiro], o [Lead] decidiu esperar um pouco.
Valeu pela indicacao! Se ele mudar de ideia,
a gente atende na hora."</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_NaoRespondeu</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Trial_Nao</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Trimestral_Nao</bpmn2:incoming>
    </bpmn2:endEvent>

    <!-- ==================== SEQUENCE FLOWS ==================== -->

    <!-- Gateway de Entrada -->
    <bpmn2:sequenceFlow id="Flow_Ind_Start" sourceRef="Start_Indicacao" targetRef="Gateway_TipoEntrada" />
    <bpmn2:sequenceFlow id="Flow_Ind_Ativo" name="Ativo (Parceiro Entregou)" sourceRef="Gateway_TipoEntrada" targetRef="Task_TagIndicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Passivo" name="Passivo (Lead Veio)" sourceRef="Gateway_TipoEntrada" targetRef="Task_TagPassivo" />

    <!-- Cenario A -->
    <bpmn2:sequenceFlow id="Flow_Ind_2A" sourceRef="Task_TagIndicacao" targetRef="Task_ContatoAtivo" />
    <bpmn2:sequenceFlow id="Flow_Ind_3A" sourceRef="Task_ContatoAtivo" targetRef="Gateway_MergeContato" />

    <!-- Cenario B -->
    <bpmn2:sequenceFlow id="Flow_Ind_2B" sourceRef="Task_TagPassivo" targetRef="Task_ContatoPassivo" />
    <bpmn2:sequenceFlow id="Flow_Ind_3B" sourceRef="Task_ContatoPassivo" targetRef="Gateway_MergeContato" />

    <!-- Merge e Ligacao -->
    <bpmn2:sequenceFlow id="Flow_Ind_4" sourceRef="Gateway_MergeContato" targetRef="Task_LigacaoParceiro" />
    <bpmn2:sequenceFlow id="Flow_Ind_5" sourceRef="Task_LigacaoParceiro" targetRef="Gateway_Atendeu" />
    <bpmn2:sequenceFlow id="Flow_Ind_Atendeu" name="Sim" sourceRef="Gateway_Atendeu" targetRef="Task_FlashDemo" />
    <bpmn2:sequenceFlow id="Flow_Ind_NaoAtendeu" name="Nao" sourceRef="Gateway_Atendeu" targetRef="Task_D1_ParceiroPerguntou" />

    <!-- Cadencia do Parceiro -->
    <bpmn2:sequenceFlow id="Flow_Ind_6" sourceRef="Task_D1_ParceiroPerguntou" targetRef="Task_D3_VideoBastidor" />
    <bpmn2:sequenceFlow id="Flow_Ind_7" sourceRef="Task_D3_VideoBastidor" targetRef="Task_D5_BonusExpirando" />
    <bpmn2:sequenceFlow id="Flow_Ind_8" sourceRef="Task_D5_BonusExpirando" targetRef="Task_D7_Despedida" />
    <bpmn2:sequenceFlow id="Flow_Ind_9" sourceRef="Task_D7_Despedida" targetRef="Gateway_Respondeu" />
    <bpmn2:sequenceFlow id="Flow_Ind_Respondeu" name="Sim" sourceRef="Gateway_Respondeu" targetRef="Task_FlashDemo" />
    <bpmn2:sequenceFlow id="Flow_Ind_NaoRespondeu" name="Nao" sourceRef="Gateway_Respondeu" targetRef="End_Perdido_Ind" />

    <!-- Flash Demo -->
    <bpmn2:sequenceFlow id="Flow_Ind_10" sourceRef="Task_FlashDemo" targetRef="Gateway_QuerTrial" />
    <bpmn2:sequenceFlow id="Flow_Ind_Trial_Sim" name="Sim" sourceRef="Gateway_QuerTrial" targetRef="Task_AtivarTrial" />
    <bpmn2:sequenceFlow id="Flow_Ind_Trial_Nao" name="Nao" sourceRef="Gateway_QuerTrial" targetRef="End_Perdido_Ind" />

    <!-- Trial com Guardiao -->
    <bpmn2:sequenceFlow id="Flow_Ind_11" sourceRef="Task_AtivarTrial" targetRef="Task_Guardiao_Ind" />
    <bpmn2:sequenceFlow id="Flow_Ind_12" name="Usando" sourceRef="Task_Guardiao_Ind" targetRef="Task_OfertaAnual" />
    <bpmn2:sequenceFlow id="Flow_Ind_Inativo" name="48h Sem Login" sourceRef="Task_Guardiao_Ind" targetRef="Task_AlertaInativo" />
    <bpmn2:sequenceFlow id="Flow_Ind_VoltaGuardiao" sourceRef="Task_AlertaInativo" targetRef="Task_OfertaAnual" />

    <!-- Vitrine Binaria -->
    <bpmn2:sequenceFlow id="Flow_Ind_13" sourceRef="Task_OfertaAnual" targetRef="Gateway_FechouAnual" />
    <bpmn2:sequenceFlow id="Flow_Ind_Anual_Sim" name="Sim" sourceRef="Gateway_FechouAnual" targetRef="Task_NotificaParceiro" />
    <bpmn2:sequenceFlow id="Flow_Ind_Anual_Nao" name="Nao" sourceRef="Gateway_FechouAnual" targetRef="Task_OfertaSemestral" />
    <bpmn2:sequenceFlow id="Flow_Ind_14" sourceRef="Task_OfertaSemestral" targetRef="Gateway_FechouSemestral" />
    <bpmn2:sequenceFlow id="Flow_Ind_Semestral_Sim" name="Sim" sourceRef="Gateway_FechouSemestral" targetRef="Task_NotificaParceiro" />
    <bpmn2:sequenceFlow id="Flow_Ind_Semestral_Nao" name="Nao" sourceRef="Gateway_FechouSemestral" targetRef="Task_OfertaTrimestral" />
    <bpmn2:sequenceFlow id="Flow_Ind_15" sourceRef="Task_OfertaTrimestral" targetRef="Gateway_FechouTrimestral" />
    <bpmn2:sequenceFlow id="Flow_Ind_Trimestral_Sim" name="Sim" sourceRef="Gateway_FechouTrimestral" targetRef="Task_NotificaParceiro" />
    <bpmn2:sequenceFlow id="Flow_Ind_Trimestral_Nao" name="Nao" sourceRef="Gateway_FechouTrimestral" targetRef="End_Perdido_Ind" />

    <!-- Checkout -->
    <bpmn2:sequenceFlow id="Flow_Ind_Checkout" sourceRef="Task_NotificaParceiro" targetRef="End_Checkout_Ind" />

  </bpmn2:process>

  <!-- ==================== DIAGRAMA VISUAL (BPMNDI) ==================== -->

  <bpmndi:BPMNDiagram id="BPMNDiagram_Indicacoes">
    <bpmndi:BPMNPlane id="BPMNPlane_Indicacoes" bpmnElement="Collaboration_Indicacoes">

      <!-- Participant e Lane -->
      <bpmndi:BPMNShape id="Shape_Participant_Ind" bpmnElement="Participant_Indicacoes" isHorizontal="true">
        <dc:Bounds x="120" y="60" width="2600" height="520" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Lane_Indicacoes" bpmnElement="Lane_Indicacoes" isHorizontal="true">
        <dc:Bounds x="150" y="60" width="2570" height="520" />
      </bpmndi:BPMNShape>

      <!-- Gateway de Entrada -->
      <bpmndi:BPMNShape id="Shape_Start_Indicacao" bpmnElement="Start_Indicacao">
        <dc:Bounds x="200" y="282" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_TipoEntrada" bpmnElement="Gateway_TipoEntrada" isMarkerVisible="true">
        <dc:Bounds x="275" y="275" width="50" height="50" />
      </bpmndi:BPMNShape>

      <!-- Cenario A: Ativo (linha superior y=160) -->
      <bpmndi:BPMNShape id="Shape_Task_TagIndicacao" bpmnElement="Task_TagIndicacao">
        <dc:Bounds x="360" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_ContatoAtivo" bpmnElement="Task_ContatoAtivo">
        <dc:Bounds x="490" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>

      <!-- Cenario B: Passivo (linha inferior y=380) -->
      <bpmndi:BPMNShape id="Shape_Task_TagPassivo" bpmnElement="Task_TagPassivo">
        <dc:Bounds x="360" y="370" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_ContatoPassivo" bpmnElement="Task_ContatoPassivo">
        <dc:Bounds x="490" y="370" width="100" height="60" />
      </bpmndi:BPMNShape>

      <!-- Merge e Ligacao (linha principal y=270) -->
      <bpmndi:BPMNShape id="Shape_Gateway_MergeContato" bpmnElement="Gateway_MergeContato" isMarkerVisible="true">
        <dc:Bounds x="625" y="275" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_LigacaoParceiro" bpmnElement="Task_LigacaoParceiro">
        <dc:Bounds x="710" y="270" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Atendeu" bpmnElement="Gateway_Atendeu" isMarkerVisible="true">
        <dc:Bounds x="845" y="275" width="50" height="50" />
      </bpmndi:BPMNShape>

      <!-- Cadencia do Parceiro (linha inferior y=420) -->
      <bpmndi:BPMNShape id="Shape_Task_D1_ParceiroPerguntou" bpmnElement="Task_D1_ParceiroPerguntou">
        <dc:Bounds x="820" y="420" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D3_VideoBastidor" bpmnElement="Task_D3_VideoBastidor">
        <dc:Bounds x="950" y="420" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D5_BonusExpirando" bpmnElement="Task_D5_BonusExpirando">
        <dc:Bounds x="1080" y="420" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D7_Despedida" bpmnElement="Task_D7_Despedida">
        <dc:Bounds x="1210" y="420" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Respondeu" bpmnElement="Gateway_Respondeu" isMarkerVisible="true">
        <dc:Bounds x="1345" y="425" width="50" height="50" />
      </bpmndi:BPMNShape>

      <!-- Flash Demo (linha principal y=270) -->
      <bpmndi:BPMNShape id="Shape_Task_FlashDemo" bpmnElement="Task_FlashDemo">
        <dc:Bounds x="930" y="270" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_QuerTrial" bpmnElement="Gateway_QuerTrial" isMarkerVisible="true">
        <dc:Bounds x="1065" y="275" width="50" height="50" />
      </bpmndi:BPMNShape>

      <!-- Trial com Guardiao (linha superior y=140) -->
      <bpmndi:BPMNShape id="Shape_Task_AtivarTrial" bpmnElement="Task_AtivarTrial">
        <dc:Bounds x="1150" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Guardiao_Ind" bpmnElement="Task_Guardiao_Ind">
        <dc:Bounds x="1280" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_AlertaInativo" bpmnElement="Task_AlertaInativo">
        <dc:Bounds x="1280" y="270" width="100" height="60" />
      </bpmndi:BPMNShape>

      <!-- Vitrine Binaria (linha superior y=140) -->
      <bpmndi:BPMNShape id="Shape_Task_OfertaAnual" bpmnElement="Task_OfertaAnual">
        <dc:Bounds x="1420" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_FechouAnual" bpmnElement="Gateway_FechouAnual" isMarkerVisible="true">
        <dc:Bounds x="1555" y="145" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_OfertaSemestral" bpmnElement="Task_OfertaSemestral">
        <dc:Bounds x="1640" y="220" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_FechouSemestral" bpmnElement="Gateway_FechouSemestral" isMarkerVisible="true">
        <dc:Bounds x="1775" y="225" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_OfertaTrimestral" bpmnElement="Task_OfertaTrimestral">
        <dc:Bounds x="1860" y="300" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_FechouTrimestral" bpmnElement="Gateway_FechouTrimestral" isMarkerVisible="true">
        <dc:Bounds x="1995" y="305" width="50" height="50" />
      </bpmndi:BPMNShape>

      <!-- Pos-Conversao -->
      <bpmndi:BPMNShape id="Shape_Task_NotificaParceiro" bpmnElement="Task_NotificaParceiro">
        <dc:Bounds x="2100" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>

      <!-- Finalizacoes -->
      <bpmndi:BPMNShape id="Shape_End_Checkout_Ind" bpmnElement="End_Checkout_Ind">
        <dc:Bounds x="2262" y="152" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Perdido_Ind" bpmnElement="End_Perdido_Ind">
        <dc:Bounds x="2132" y="432" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- ===== EDGES ===== -->

      <!-- Gateway de Entrada -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Start" bpmnElement="Flow_Ind_Start">
        <di:waypoint x="236" y="300" />
        <di:waypoint x="275" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Ativo" bpmnElement="Flow_Ind_Ativo">
        <di:waypoint x="300" y="275" />
        <di:waypoint x="300" y="170" />
        <di:waypoint x="360" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Passivo" bpmnElement="Flow_Ind_Passivo">
        <di:waypoint x="300" y="325" />
        <di:waypoint x="300" y="400" />
        <di:waypoint x="360" y="400" />
      </bpmndi:BPMNEdge>

      <!-- Cenario A -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_2A" bpmnElement="Flow_Ind_2A">
        <di:waypoint x="460" y="170" />
        <di:waypoint x="490" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_3A" bpmnElement="Flow_Ind_3A">
        <di:waypoint x="590" y="170" />
        <di:waypoint x="650" y="170" />
        <di:waypoint x="650" y="275" />
      </bpmndi:BPMNEdge>

      <!-- Cenario B -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_2B" bpmnElement="Flow_Ind_2B">
        <di:waypoint x="460" y="400" />
        <di:waypoint x="490" y="400" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_3B" bpmnElement="Flow_Ind_3B">
        <di:waypoint x="590" y="400" />
        <di:waypoint x="650" y="400" />
        <di:waypoint x="650" y="325" />
      </bpmndi:BPMNEdge>

      <!-- Merge e Ligacao -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_4" bpmnElement="Flow_Ind_4">
        <di:waypoint x="675" y="300" />
        <di:waypoint x="710" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_5" bpmnElement="Flow_Ind_5">
        <di:waypoint x="810" y="300" />
        <di:waypoint x="845" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Atendeu" bpmnElement="Flow_Ind_Atendeu">
        <di:waypoint x="895" y="300" />
        <di:waypoint x="930" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_NaoAtendeu" bpmnElement="Flow_Ind_NaoAtendeu">
        <di:waypoint x="870" y="325" />
        <di:waypoint x="870" y="420" />
      </bpmndi:BPMNEdge>

      <!-- Cadencia do Parceiro -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_6" bpmnElement="Flow_Ind_6">
        <di:waypoint x="920" y="450" />
        <di:waypoint x="950" y="450" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_7" bpmnElement="Flow_Ind_7">
        <di:waypoint x="1050" y="450" />
        <di:waypoint x="1080" y="450" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_8" bpmnElement="Flow_Ind_8">
        <di:waypoint x="1180" y="450" />
        <di:waypoint x="1210" y="450" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_9" bpmnElement="Flow_Ind_9">
        <di:waypoint x="1310" y="450" />
        <di:waypoint x="1345" y="450" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Respondeu" bpmnElement="Flow_Ind_Respondeu">
        <di:waypoint x="1370" y="425" />
        <di:waypoint x="1370" y="300" />
        <di:waypoint x="1030" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_NaoRespondeu" bpmnElement="Flow_Ind_NaoRespondeu">
        <di:waypoint x="1395" y="450" />
        <di:waypoint x="2132" y="450" />
      </bpmndi:BPMNEdge>

      <!-- Flash Demo -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_10" bpmnElement="Flow_Ind_10">
        <di:waypoint x="1030" y="300" />
        <di:waypoint x="1065" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Trial_Sim" bpmnElement="Flow_Ind_Trial_Sim">
        <di:waypoint x="1090" y="275" />
        <di:waypoint x="1090" y="170" />
        <di:waypoint x="1150" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Trial_Nao" bpmnElement="Flow_Ind_Trial_Nao">
        <di:waypoint x="1090" y="325" />
        <di:waypoint x="1090" y="450" />
        <di:waypoint x="2132" y="450" />
      </bpmndi:BPMNEdge>

      <!-- Trial com Guardiao -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_11" bpmnElement="Flow_Ind_11">
        <di:waypoint x="1250" y="170" />
        <di:waypoint x="1280" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_12" bpmnElement="Flow_Ind_12">
        <di:waypoint x="1380" y="170" />
        <di:waypoint x="1420" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Inativo" bpmnElement="Flow_Ind_Inativo">
        <di:waypoint x="1330" y="200" />
        <di:waypoint x="1330" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_VoltaGuardiao" bpmnElement="Flow_Ind_VoltaGuardiao">
        <di:waypoint x="1380" y="300" />
        <di:waypoint x="1400" y="300" />
        <di:waypoint x="1400" y="170" />
        <di:waypoint x="1420" y="170" />
      </bpmndi:BPMNEdge>

      <!-- Vitrine Binaria -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_13" bpmnElement="Flow_Ind_13">
        <di:waypoint x="1520" y="170" />
        <di:waypoint x="1555" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Anual_Sim" bpmnElement="Flow_Ind_Anual_Sim">
        <di:waypoint x="1605" y="170" />
        <di:waypoint x="2100" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Anual_Nao" bpmnElement="Flow_Ind_Anual_Nao">
        <di:waypoint x="1580" y="195" />
        <di:waypoint x="1580" y="250" />
        <di:waypoint x="1640" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_14" bpmnElement="Flow_Ind_14">
        <di:waypoint x="1740" y="250" />
        <di:waypoint x="1775" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Semestral_Sim" bpmnElement="Flow_Ind_Semestral_Sim">
        <di:waypoint x="1800" y="225" />
        <di:waypoint x="1800" y="170" />
        <di:waypoint x="2100" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Semestral_Nao" bpmnElement="Flow_Ind_Semestral_Nao">
        <di:waypoint x="1800" y="275" />
        <di:waypoint x="1800" y="330" />
        <di:waypoint x="1860" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_15" bpmnElement="Flow_Ind_15">
        <di:waypoint x="1960" y="330" />
        <di:waypoint x="1995" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Trimestral_Sim" bpmnElement="Flow_Ind_Trimestral_Sim">
        <di:waypoint x="2020" y="305" />
        <di:waypoint x="2020" y="170" />
        <di:waypoint x="2100" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Trimestral_Nao" bpmnElement="Flow_Ind_Trimestral_Nao">
        <di:waypoint x="2020" y="355" />
        <di:waypoint x="2020" y="450" />
        <di:waypoint x="2132" y="450" />
      </bpmndi:BPMNEdge>

      <!-- Checkout -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Checkout" bpmnElement="Flow_Ind_Checkout">
        <di:waypoint x="2200" y="170" />
        <di:waypoint x="2262" y="170" />
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</bpmn2:definitions>`,DC={"Activate global connect tool":"Ativar conexo global","Activate the global connect tool":"Ativar conexo global","Activate hand tool":"Mover canvas","Activate the hand tool":"Mover canvas","Activate lasso tool":"Selecionar mltiplos","Activate the lasso tool":"Selecionar mltiplos","Activate create/remove space tool":"Criar/remover espao","Activate the create/remove space tool":"Criar/remover espao","Create StartEvent":"Criar Incio","Create start event":"Criar Incio","Create Start Event":"Criar Incio","Create EndEvent":"Criar Fim","Create end event":"Criar Fim","Create End Event":"Criar Fim","Create Task":"Criar Tarefa","Create task":"Criar Tarefa","Create Gateway":"Criar Gateway","Create gateway":"Criar Gateway","Create exclusive gateway":"Criar Gateway Exclusivo","Create Exclusive Gateway":"Criar Gateway Exclusivo","Create parallel gateway":"Criar Gateway Paralelo","Create Parallel Gateway":"Criar Gateway Paralelo","Create Intermediate/Boundary Event":"Criar Evento Intermedirio","Create intermediate/boundary event":"Criar Evento Intermedirio","Create IntermediateThrowEvent":"Criar Evento Intermedirio","Create Pool/Participant":"Criar Pool","Create pool/participant":"Criar Pool","Create Participant":"Criar Participante","Create participant":"Criar Participante","Create DataObjectReference":"Criar Dados","Create data object reference":"Criar Dados","Create Data Object Reference":"Criar Dados","Create DataStoreReference":"Criar Armazm","Create data store reference":"Criar Armazm","Create Data Store Reference":"Criar Armazm","Create Group":"Criar Grupo","Create group":"Criar Grupo","Create expanded SubProcess":"Criar Sub-Processo","Create expanded sub-process":"Criar Sub-Processo","Create Expanded SubProcess":"Criar Sub-Processo","Create SubProcess":"Criar Sub-Processo","Create CallActivity":"Criar Chamada Externa","Create call activity":"Criar Chamada Externa","Create Call Activity":"Criar Chamada Externa","Append Task":"Adicionar Tarefa","Append task":"Adicionar Tarefa","Append EndEvent":"Adicionar Fim","Append end event":"Adicionar Fim","Append End Event":"Adicionar Fim","Append Gateway":"Adicionar Gateway","Append gateway":"Adicionar Gateway","Append Intermediate/Boundary Event":"Adicionar Evento","Append intermediate/boundary event":"Adicionar Evento","Append TextAnnotation":"Adicionar Anotao","Append text annotation":"Adicionar Anotao","Connect using Sequence/MessageFlow or Association":"Conectar","Connect using sequence/message flow or association":"Conectar","Connect using DataInputAssociation":"Conectar Dados",Connect:"Conectar","Change type":"Alterar tipo","Change element":"Alterar elemento",Delete:"Excluir",Remove:"Remover","Edit label":"Editar rtulo",Copy:"Copiar",Paste:"Colar",Undo:"Desfazer",Redo:"Refazer"},bne=_e.forwardRef(function({xml:t,onXmlChange:n,onElementSelect:r,onFluxosClick:i,showGrid:o=!0,onGridToggle:a,onAddImage:s},l){const c=_e.useRef(null),u=_e.useRef(null),d=_e.useRef(t),[h,f]=_e.useState(!0),[m,v]=_e.useState(null),[b,y]=_e.useState(100),[x,_]=_e.useState(!1);_e.useImperativeHandle(l,()=>({async saveSVG(){if(u.current)try{const{svg:M}=await u.current.saveSVG();return M}catch(M){return console.error("Erro ao exportar SVG:",M),null}return null},setElementColor(M,C){if(u.current&&M)try{u.current.get("modeling").setColor([M],{fill:C.fill,stroke:C.stroke})}catch(j){console.error("Erro ao mudar cor:",j)}},addCallActivity(M,C){if(!u.current)return console.error("Modeler no disponvel"),null;try{const j=u.current,z=j.get("modeling"),Q=j.get("elementFactory"),me=j.get("canvas"),pe=j.get("elementRegistry"),ue=me.getRootElement();if(!ue||!ue.businessObject)return console.error("RootElement invlido"),null;let te=ue;if((ue.businessObject.$type||ue.type)==="bpmn:Collaboration"){const K=pe.filter(ee=>ee.type==="bpmn:Lane");if(K.length>0)te=K[0];else{const ee=pe.filter(O=>O.type==="bpmn:Participant");if(ee.length>0)te=ee[0];else return console.error("Colaborao sem participantes"),alert("Adicione uma Pool/Participante ao diagrama antes de adicionar fluxos."),null}}const we="CallActivity_"+M.replace(/-/g,"").substring(0,8),L=Q.createShape({type:"bpmn:CallActivity"}),G={x:250,y:200};return z.createShape(L,G,te),z.updateProperties(L,{name:C}),L.flowId=M,setTimeout(()=>{try{z.setColor([L],{fill:"#fef3c7",stroke:"#f59e0b"})}catch(K){console.warn("No foi possvel aplicar cor:",K)}},200),console.log("CallActivity criado com sucesso:",L.id,"para flowId:",M),L}catch(j){return console.error("Erro ao criar CallActivity:",j),alert("Erro ao criar elemento: "+j.message),null}},hasFlowElement(M){if(!u.current)return!1;try{return u.current.get("elementRegistry").filter(z=>z.type==="bpmn:CallActivity"&&z.flowId===M).length>0}catch{return!1}},removeFlowElement(M){if(!u.current)return!1;try{const C=u.current.get("modeling"),z=u.current.get("elementRegistry").filter(Q=>Q.type==="bpmn:CallActivity"&&Q.flowId===M);return z.length>0?(C.removeElements(z),!0):!1}catch(C){return console.error("Erro ao remover elemento:",C),!1}},createImageOverlayForElement(M,C,j){if(!u.current)return;const z=u.current,Q=z.get("overlays"),me=j==="circle"?"50%":j==="rounded"?"12px":"4px",pe=document.createElement("div");pe.className="bpmn-image-overlay",pe.setAttribute("data-format",j),pe.style.cssText=`
        width: ${M.width}px;
        height: ${M.height}px;
        overflow: hidden;
        border-radius: ${me};
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        pointer-events: none;
        background: white;
      `;const ue=document.createElement("img");ue.src=C,ue.draggable=!1,ue.style.cssText=`
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      `,pe.appendChild(ue),Q.add(M.id,{position:{top:0,left:0},html:pe});const te=()=>{const O=document.querySelector(`[data-element-id="${M.id}"]`);O&&(O.setAttribute("data-image-element","true"),O.setAttribute("data-image-format",j),O.querySelectorAll("text, tspan").forEach(k=>{k.style.display="none",k.style.visibility="hidden"}))};setTimeout(te,50),setTimeout(te,200);const ae=z.get("eventBus"),ye=z.get("modeling"),we=(O,N)=>{pe.style.width=O+"px",pe.style.height=N+"px"},L=O=>{try{const N=O.businessObject;if(N&&N.name&&N.name.startsWith("__IMAGE__:")){const k=N.name.substring(10),V=JSON.parse(k);V.width=O.width,V.height=O.height,ye.updateProperties(O,{name:"__IMAGE__:"+JSON.stringify(V)})}}catch(N){console.error("Erro ao salvar dimenses:",N)}},G=O=>{if(O.shape&&O.shape.id===M.id){const N=O.newBounds;N&&we(N.width,N.height)}},K=O=>{const N=O.element;N&&N.id===M.id&&(we(N.width,N.height),setTimeout(te,10))},ee=O=>{var k;const N=(k=O.context)==null?void 0:k.shape;N&&N.id===M.id&&(we(N.width,N.height),L(N))};ae.on("resize.move",G),ae.on("shape.changed",K),ae.on("commandStack.shape.resize.postExecuted",ee)},restoreImageOverlays(){if(!u.current)return;u.current.get("elementRegistry").forEach(j=>{if(j.businessObject&&j.businessObject.name)try{if(j.businessObject.name.startsWith("__IMAGE__:")){const z=j.businessObject.name.substring(10),Q=JSON.parse(z);this.createImageOverlayForElement(j,Q.url,Q.format)}}catch{}})},addImageOverlay(M,C=300,j=300,z="square"){if(console.log("addImageOverlay chamado:",{imageUrl:M==null?void 0:M.substring(0,50),x:C,y:j,format:z}),!u.current)return console.error("modelerRef.current  null"),null;try{const Q=u.current,me=Q.get("modeling"),pe=Q.get("elementFactory"),ue=Q.get("canvas"),te=Q.get("elementRegistry"),ae=ue.getRootElement();if(!ae||!ae.businessObject)return console.error("RootElement invlido"),null;let ye=ae;const L=ae.businessObject.$type||ae.type;if(console.log("Root type:",L),L==="bpmn:Collaboration"){const J=te.filter(se=>se.type==="bpmn:Lane");if(J.length>0)ye=J[0],console.log("Usando Lane como pai:",ye.id);else{const se=te.filter(ke=>ke.type==="bpmn:Participant");if(se.length>0)ye=se[0],console.log("Usando Participant como pai:",ye.id);else return console.error("Colaborao sem participantes - no  possvel adicionar elementos"),alert("Adicione uma Pool/Participante ao diagrama antes de inserir imagens."),null}}const G=120,K=pe.createShape({type:"bpmn:Task",width:G,height:G}),ee=ue.viewbox(),O={x:ee.x+ee.width/2,y:ee.y+ee.height/2};console.log("Criando shape em:",ye.id,"posio:",O),me.createShape(K,O,ye);const N=K.id;console.log("Shape criado com sucesso, ID:",N);let k=1;te.forEach(J=>{var se,ke;(ke=(se=J.businessObject)==null?void 0:se.name)!=null&&ke.startsWith("__IMAGE__:")&&k++});const V=JSON.stringify({url:M,format:z,displayName:`Imagem ${k}`});return me.updateProperties(K,{name:"__IMAGE__:"+V}),this.createImageOverlayForElement(K,M,z),N}catch(Q){return console.error("Erro ao adicionar imagem:",Q),console.error("Stack:",Q.stack),null}},getModeler(){return u.current},updateElementProperties(M,C){if(!u.current||!M)return!1;try{return u.current.get("modeling").updateProperties(M,C),!0}catch(j){return console.error("Erro ao atualizar propriedades:",j),!1}},async loadComercialTemplate(){if(!u.current)return!1;try{await u.current.importXML(yne);const M=u.current.get("canvas");M.zoom(.7);const C=M.viewbox(),j=u.current.get("elementRegistry");let z=1/0,Q=1/0,me=-1/0,pe=-1/0;if(j.forEach(te=>{te.x!==void 0&&te.y!==void 0&&(z=Math.min(z,te.x),Q=Math.min(Q,te.y),me=Math.max(me,te.x+(te.width||0)),pe=Math.max(pe,te.y+(te.height||0)))}),z!==1/0){const te=(z+me)/2,ae=(Q+pe)/2;M.viewbox({x:te-C.width/2,y:ae-C.height/2,width:C.width,height:C.height})}setTimeout(()=>{const te=u.current.get("overlays");j.forEach(ae=>{var we,L;if((L=(we=ae.businessObject)==null?void 0:we.name)==null?void 0:L.includes("[ROBO]")){const G=document.querySelector(`[data-element-id="${ae.id}"]`);if(G){G.setAttribute("data-robot-task","true");const ee=G.querySelector(".djs-visual");ee&&(ee.querySelectorAll("circle").forEach(N=>{N.style.display="none"}),ee.querySelectorAll("path").forEach((N,k)=>{k>0&&(N.style.display="none")}));const O=G.querySelector(".djs-label text");if(O&&ae.businessObject.name){const N=ae.businessObject.name;if(N.includes("[ROBO]")){const k=N.replace(/\[ROBO\]\s*/g,"");O.textContent=k}}}try{te.remove({element:ae.id,type:"robot-icon"})}catch{}const K=document.createElement("div");K.className="robot-icon-overlay",K.innerHTML=`
                <svg viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px;">
                  <rect x="3" y="11" width="18" height="10" rx="2" />
                  <circle cx="12" cy="5" r="2" />
                  <line x1="12" y1="7" x2="12" y2="11" />
                  <line x1="8" y1="16" x2="8" y2="16" stroke-width="3" />
                  <line x1="16" y1="16" x2="16" y2="16" stroke-width="3" />
                </svg>
              `,te.add(ae.id,"robot-icon",{position:{top:5,left:5},html:K})}})},300);const{xml:ue}=await u.current.saveXML({format:!0});return n&&n(ue),!0}catch(M){return console.error("Erro ao carregar template comercial:",M),!1}}}),[n]);const w=_e.useCallback(()=>{if(u.current)try{const C=u.current.get("canvas").zoom();y(Math.round(C*100))}catch{}},[]),R=_e.useCallback(async()=>{if(!u.current){console.error("modelerRef.current no disponvel");return}console.log("=== INICIANDO ADIO DE RAIA INDICAES ===");try{const{xml:M}=await u.current.saveXML({format:!0});console.log("XML atual obtido, tamanho:",M.length);const C=new DOMParser,j=new XMLSerializer,z=C.parseFromString(M,"text/xml"),Q=z.querySelector("parsererror");if(Q){console.error("Erro ao parsear XML atual:",Q.textContent),alert("Erro ao processar diagrama atual");return}console.log("Template indicaes tamanho:",IC.length);const me=C.parseFromString(IC,"text/xml"),pe=me.querySelector("parsererror");if(pe){console.error("Erro ao parsear template indicaes:",pe.textContent),alert("Erro no template de indicaes");return}let ue=z.querySelector("process");ue||(ue=z.getElementsByTagName("bpmn2:process")[0]),ue||(ue=z.getElementsByTagName("bpmn:process")[0]);let te=z.querySelector("laneSet");te||(te=z.getElementsByTagName("bpmn2:laneSet")[0]),te||(te=z.getElementsByTagName("bpmn:laneSet")[0]);let ae=z.querySelector("BPMNPlane");if(ae||(ae=z.getElementsByTagName("bpmndi:BPMNPlane")[0]),console.log("Elementos encontrados no diagrama atual:",{process:!!ue,laneSet:!!te,diagram:!!ae}),!ue||!te||!ae){alert("Por favor, carregue um diagrama com Lanes primeiro (ex: Comercial)");return}let ye=me.querySelector("process");ye||(ye=me.getElementsByTagName("bpmn2:process")[0]);let we=me.querySelector("lane");we||(we=me.getElementsByTagName("bpmn2:lane")[0]);let L=me.querySelector("BPMNPlane");if(L||(L=me.getElementsByTagName("bpmndi:BPMNPlane")[0]),console.log("Elementos encontrados no template indicaes:",{process:!!ye,lane:!!we,diagram:!!L}),!we||!ye||!L){console.error("Elementos de indicaes no encontrados"),alert("Erro: template de indicaes invlido");return}let G=0;const K=Array.from(ae.childNodes).filter(he=>he.nodeName&&(he.nodeName.includes("BPMNShape")||he.nodeName==="bpmndi:BPMNShape"));console.log("Shapes existentes encontrados:",K.length),K.forEach(he=>{const Ce=he.querySelector("Bounds")||he.getElementsByTagName("dc:Bounds")[0]||he.getElementsByTagName("Bounds")[0];if(Ce){const De=parseFloat(Ce.getAttribute("y"))||0,Te=parseFloat(Ce.getAttribute("height"))||0;De+Te>G&&(G=De+Te)}}),console.log("MaxY calculado:",G);const ee=G+80;console.log("OffsetY para nova raia:",ee),console.log("Copiando Lane para LaneSet...");const O=z.importNode(we,!0);te.appendChild(O),console.log("Lane adicionada ao LaneSet");const N=[],k=[],V=Array.from(ye.childNodes).filter(he=>he.nodeType===1);console.log("Filhos do processo de indicaes:",V.length),V.forEach(he=>{const Ce=(he.tagName||he.nodeName||"").toLowerCase();Ce.includes("laneset")||(Ce.includes("sequenceflow")?k.push(he):N.push(he))}),console.log("Elementos no-flow:",N.length),console.log("Elementos flow:",k.length),N.forEach(he=>{const Ce=z.importNode(he,!0);ue.appendChild(Ce)}),console.log("Elementos no-flow adicionados"),k.forEach(he=>{const Ce=z.importNode(he,!0);ue.appendChild(Ce)}),console.log("Elementos flow adicionados");const J=Array.from(L.childNodes).filter(he=>he.nodeName&&(he.nodeName.includes("BPMNShape")||he.nodeName==="bpmndi:BPMNShape")),se=Array.from(L.childNodes).filter(he=>he.nodeName&&(he.nodeName.includes("BPMNEdge")||he.nodeName==="bpmndi:BPMNEdge"));console.log("Shapes no template indicaes:",J.length),console.log("Edges no template indicaes:",se.length);const ke=Array.from(ae.childNodes).filter(he=>he.nodeName&&(he.nodeName.includes("BPMNEdge")||he.nodeName==="bpmndi:BPMNEdge")),Ae=ke.length>0?ke[0]:null;console.log("Edges existentes:",ke.length);const Ie=z.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNShape");Ie.setAttribute("id","Shape_Lane_Indicacoes_Added"),Ie.setAttribute("bpmnElement","Lane_Indicacoes"),Ie.setAttribute("isHorizontal","true");const U=z.createElementNS("http://www.omg.org/spec/DD/20100524/DC","dc:Bounds");U.setAttribute("x","150"),U.setAttribute("y",String(ee)),U.setAttribute("width","2570"),U.setAttribute("height","520"),Ie.appendChild(U),Ae?ae.insertBefore(Ie,Ae):ae.appendChild(Ie);let ge=0;J.forEach(he=>{const Ce=he.getAttribute("bpmnElement");if(Ce&&!Ce.includes("Participant")&&!Ce.includes("Lane")){const De=z.importNode(he,!0),Te=De.querySelector("Bounds")||De.getElementsByTagName("dc:Bounds")[0];if(Te){const Ge=parseFloat(Te.getAttribute("y"))||0;Te.setAttribute("y",String(Ge+ee))}Ae?ae.insertBefore(De,Ae):ae.appendChild(De),ge++}}),console.log("Shapes adicionados ao diagrama:",ge);let Pe=0;se.forEach(he=>{const Ce=z.importNode(he,!0);Array.from(Ce.childNodes).filter(Te=>Te.nodeName&&(Te.nodeName.includes("waypoint")||Te.nodeName==="di:waypoint")).forEach(Te=>{const Ge=parseFloat(Te.getAttribute("y"))||0;Te.setAttribute("y",String(Ge+ee))}),ae.appendChild(Ce),Pe++}),console.log("Edges adicionados ao diagrama:",Pe);const Z=Array.from(ae.childNodes).filter(he=>he.nodeName&&(he.nodeName.includes("BPMNShape")||he.nodeName==="bpmndi:BPMNShape")).find(he=>{var Ce;return he.getAttribute&&((Ce=he.getAttribute("bpmnElement"))==null?void 0:Ce.includes("Participant"))});if(Z){const he=Z.querySelector("Bounds")||Z.getElementsByTagName("dc:Bounds")[0];if(he){const Ce=parseFloat(he.getAttribute("height"))||2e3,De=Ce+600;he.setAttribute("height",String(De)),console.log("Altura do Participant atualizada:",Ce,"->",De)}}else console.warn("Participant shape no encontrado");let de=j.serializeToString(z);console.log("XML serializado, tamanho:",de.length),de=de.replace(/xmlns:ns\d+="[^"]*"/g,""),de=de.replace(/ns\d+:/g,""),console.log("XML mesclado gerado, importando..."),console.log("Primeiros 500 chars do XML:",de.substring(0,500));try{const he=await u.current.importXML(de);he.warnings&&he.warnings.length>0&&console.warn("Warnings ao importar:",he.warnings),console.log("XML importado com sucesso!"),u.current.get("canvas").zoom(.4);const{xml:De}=await u.current.saveXML({format:!0});n&&n(De),console.log("=== RAIA INDICAES ADICIONADA COM SUCESSO ==="),alert("Raia de Indicaes adicionada com sucesso!")}catch(he){console.error("Erro ao importar XML:",he),console.error("Mensagem:",he.message),console.log("XML completo para debug (primeiros 2000 chars):",de.substring(0,2e3)),alert("Erro ao importar diagrama: "+he.message)}}catch(M){console.error("Erro ao adicionar raia de indicaes:",M),console.error("Stack:",M.stack),alert("Erro ao adicionar raia: "+M.message)}},[n]);_e.useEffect(()=>{const M=c.current;if(!M)return;const C=M.querySelector(".bjs-container");C&&(o?C.classList.add("grid-enabled"):C.classList.remove("grid-enabled"))},[o]),_e.useEffect(()=>{const M=C=>{x&&!C.target.closest("[data-raia-menu]")&&_(!1)};return document.addEventListener("click",M),()=>document.removeEventListener("click",M)},[x]),_e.useEffect(()=>{const M=c.current;if(!M||!d.current)return;const j=setTimeout(async()=>{f(!0),v(null);try{const z=new Fa({container:M,keyboard:{bindTo:document},additionalModules:[cne,fne,gne]});u.current=z,await z.importXML(d.current);const Q=z.get("canvas");Q.zoom(1);const me=Q.viewbox();if(Q.getRootElement()){const ge=z.get("elementRegistry");let Pe=1/0,oe=1/0,Z=-1/0,de=-1/0;if(ge.forEach(he=>{he.x!==void 0&&he.y!==void 0&&(Pe=Math.min(Pe,he.x),oe=Math.min(oe,he.y),Z=Math.max(Z,he.x+(he.width||0)),de=Math.max(de,he.y+(he.height||0)))}),Pe!==1/0){const he=(Pe+Z)/2,Ce=(oe+de)/2;Q.viewbox({x:he-me.width/2,y:Ce-me.height/2,width:me.width,height:me.height})}}y(100),(()=>{const ge=z.get("elementRegistry"),Pe=z.get("modeling"),oe={Lane_Outbound:{stroke:"#ff6b6b",fill:"#ffe0e0"},Lane_Alunos:{stroke:"#51cf66",fill:"#e0ffe0"},Lane_Google:{stroke:"#4dabf7",fill:"#e0f0ff"},Lane_Meta:{stroke:"#9775fa",fill:"#f0e0ff"},Lane_Nucleo:{stroke:"#868e96",fill:"#f0f0f0"}};Object.keys(oe).forEach(Z=>{const de=ge.get(Z);if(de)try{Pe.setColor([de],oe[Z]),console.log(` Cor aplicada  lane: ${Z}`,oe[Z])}catch(he){console.error(`Erro ao aplicar cor  lane ${Z}:`,he)}})})(),setTimeout(()=>{const ge=z.get("elementRegistry"),Pe=z.get("overlays"),oe=z.get("eventBus"),Z=z.get("modeling");ge.forEach(de=>{if(de.businessObject&&de.businessObject.name)try{if(de.businessObject.name.startsWith("__IMAGE__:")){const he=de.businessObject.name.substring(10),Ce=JSON.parse(he),De=Ce.width||de.width,Te=Ce.height||de.height;Ce.width&&Ce.height&&(de.width!==Ce.width||de.height!==Ce.height)&&Z.resizeShape(de,{x:de.x,y:de.y,width:Ce.width,height:Ce.height});const Ge=Ce.format==="circle"?"50%":Ce.format==="rounded"?"12px":"4px",tt=document.createElement("div");tt.className="bpmn-image-overlay",tt.style.cssText=`
                    width: ${De}px;
                    height: ${Te}px;
                    overflow: hidden;
                    border-radius: ${Ge};
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    pointer-events: none;
                    background: white;
                  `;const At=document.createElement("img");At.src=Ce.url,At.draggable=!1,At.style.cssText=`
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    display: block;
                  `,tt.appendChild(At),Pe.add(de.id,{position:{top:0,left:0},html:tt});const kt=()=>{const rt=document.querySelector(`[data-element-id="${de.id}"]`);rt&&(rt.setAttribute("data-image-element","true"),rt.setAttribute("data-image-format",Ce.format),rt.querySelectorAll("text, tspan").forEach(Yt=>{Yt.style.display="none",Yt.style.visibility="hidden"}))};setTimeout(kt,50),setTimeout(kt,200),setTimeout(kt,500);const Ke=(rt,Xe)=>{tt.style.width=rt+"px",tt.style.height=Xe+"px"},_t=rt=>{try{const Xe=rt.businessObject;if(Xe&&Xe.name&&Xe.name.startsWith("__IMAGE__:")){const Yt=JSON.parse(Xe.name.substring(10));Yt.width=rt.width,Yt.height=rt.height,Z.updateProperties(rt,{name:"__IMAGE__:"+JSON.stringify(Yt)})}}catch(Xe){console.error("Erro ao salvar dimenses:",Xe)}},nt=rt=>{if(rt.shape&&rt.shape.id===de.id){const Xe=rt.newBounds;Xe&&Ke(Xe.width,Xe.height)}},pn=rt=>{const Xe=rt.element;Xe&&Xe.id===de.id&&(Ke(Xe.width,Xe.height),setTimeout(kt,10))},Ft=rt=>{var Yt;const Xe=(Yt=rt.context)==null?void 0:Yt.shape;Xe&&Xe.id===de.id&&(Ke(Xe.width,Xe.height),_t(Xe))};oe.on("resize.move",nt),oe.on("shape.changed",pn),oe.on("commandStack.shape.resize.postExecuted",Ft),console.log("Imagem restaurada:",de.id,"dimenses:",De,"x",Te)}}catch{}})},200);const ae=()=>{const ge=z.get("elementRegistry"),Pe=z.get("overlays");ge.forEach(oe=>{var de,he;if((he=(de=oe.businessObject)==null?void 0:de.name)==null?void 0:he.includes("[ROBO]")){const Ce=document.querySelector(`[data-element-id="${oe.id}"]`);if(Ce){Ce.setAttribute("data-robot-task","true");const Ge=Ce.querySelector(".djs-visual");Ge&&(Ge.querySelectorAll("circle").forEach(tt=>{tt.style.display="none"}),Ge.querySelectorAll("path").forEach((tt,At)=>{At>0&&(tt.style.display="none")}))}try{Pe.remove({element:oe.id,type:"robot-icon"})}catch{}const De=document.createElement("div");De.className="robot-icon-overlay",De.innerHTML=`
                <svg viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px;">
                  <rect x="3" y="11" width="18" height="10" rx="2" />
                  <circle cx="12" cy="5" r="2" />
                  <line x1="12" y1="7" x2="12" y2="11" />
                  <line x1="8" y1="16" x2="8" y2="16" stroke-width="3" />
                  <line x1="16" y1="16" x2="16" y2="16" stroke-width="3" />
                  <path d="M9 21v-1" />
                  <path d="M15 21v-1" />
                </svg>
              `,Pe.add(oe.id,"robot-icon",{position:{top:5,left:5},html:De});const Te=Ce.querySelector(".djs-label text");if(Te&&oe.businessObject.name){const Ge=oe.businessObject.name;if(Ge.includes("[ROBO]")){const tt=Ge.replace(/\[ROBO\]\s*/g,"");Te.textContent=tt}}}})};setTimeout(ae,300);const ye=z.get("eventBus");ye.on("shape.added",({element:ge})=>{var Pe,oe;(oe=(Pe=ge.businessObject)==null?void 0:Pe.name)!=null&&oe.includes("[ROBO]")&&setTimeout(ae,50)}),ye.on("shape.changed",({element:ge})=>{var Pe,oe;(oe=(Pe=ge.businessObject)==null?void 0:Pe.name)!=null&&oe.includes("[ROBO]")&&setTimeout(ae,50)});const we=M.querySelector(".bjs-container");we&&o&&we.classList.add("grid-enabled"),ye.on("canvas.viewbox.changed",w),new MutationObserver(()=>{const ge=document.querySelector(".djs-popup-body");if(!ge||document.querySelector('[data-action="replace-with-robot-task"]')||ge.querySelectorAll(".entry").length===0)return;console.log(' Adicionando opo "Tarefa Automatizada" ao menu...');const oe=z.get("selection").get()[0];if(!oe)return;if(oe.type&&(oe.type.includes("Task")||oe.type==="bpmn:Task")){const de=document.createElement("div");de.className="entry",de.setAttribute("data-action","replace-with-robot-task"),de.innerHTML=`
              <span class="robot-menu-icon" style="font-size: 20px; margin-right: 8px;"></span>
              <span>Tarefa Automatizada</span>
            `,de.style.cursor="pointer",de.style.padding="8px 12px",de.style.display="flex",de.style.alignItems="center",de.addEventListener("mouseenter",()=>{de.style.backgroundColor="#f3f4f6"}),de.addEventListener("mouseleave",()=>{de.style.backgroundColor=""}),de.addEventListener("click",()=>{const he=z.get("bpmnReplace"),Ce=z.get("modeling");let De=oe.businessObject.name||"Automao";De.includes("[ROBO]")||(De="[ROBO] "+De);const Te=he.replaceElement(oe,{type:"bpmn:ServiceTask"});Ce.updateProperties(Te,{name:De});const Ge=document.querySelector(".djs-popup");Ge&&Ge.remove()}),ge.appendChild(de)}}).observe(document.body,{childList:!0,subtree:!0}),z.on("commandStack.changed",async()=>{try{const{xml:ge}=await z.saveXML({format:!0});n&&n(ge)}catch(ge){console.error("Erro ao exportar:",ge)}}),z.on("selection.changed",ge=>{var Pe;r&&r(((Pe=ge.newSelection)==null?void 0:Pe[0])||null)});const G=z.get("editorActions"),K=z.get("copyPaste"),ee=z.get("selection"),O=z.get("clipboard"),N=ge=>{if(ge.target.tagName==="INPUT"||ge.target.tagName==="TEXTAREA")return;const oe=navigator.platform.toUpperCase().indexOf("MAC")>=0?ge.metaKey:ge.ctrlKey;if(oe&&ge.key==="c"){const Z=ee.get();Z.length>0&&(ge.preventDefault(),K.copy(Z),console.log("Elementos copiados:",Z.length))}else if(oe&&ge.key==="v"){if(ge.preventDefault(),O.isEmpty&&O.isEmpty()){console.log("Clipboard vazio");return}K.paste(),console.log("Elementos colados")}else if(oe&&ge.key==="x"){const Z=ee.get();Z.length>0&&(ge.preventDefault(),K.copy(Z),z.get("modeling").removeElements(Z),console.log("Elementos recortados:",Z.length))}};document.addEventListener("keydown",N),u.current._copyPasteHandler=N;let k=document.getElementById("bpmn-tooltip");k||(k=document.createElement("div"),k.id="bpmn-tooltip",k.style.cssText=`
            position: fixed;
            background: #1e293b;
            color: white;
            padding: 8px 14px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            white-space: nowrap;
            z-index: 100000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.1s ease;
            box-shadow: 0 4px 16px rgba(0,0,0,0.25);
          `,document.body.appendChild(k));const V=ge=>{const Pe=ge.currentTarget,oe=Pe.getAttribute("data-tooltip");if(!oe)return;const Z=Pe.getBoundingClientRect();k.textContent=oe,k.style.opacity="1",k.style.left=Z.right+12+"px",k.style.top=Z.top+Z.height/2+"px",k.style.transform="translateY(-50%)"},J=()=>{k.style.opacity="0"},se=()=>{M.querySelectorAll(".djs-palette .entry, .djs-context-pad .entry").forEach(Pe=>{const oe=Pe.getAttribute("title");if(!oe||Pe.hasAttribute("data-tooltip-setup"))return;const Z=DC[oe]||Bw(oe);Pe.setAttribute("data-tooltip",Z),Pe.removeAttribute("title"),Pe.setAttribute("data-tooltip-setup","true"),Pe.addEventListener("mouseenter",V),Pe.addEventListener("mouseleave",J)})},ke=setInterval(()=>{M.querySelectorAll(".djs-palette .entry[title], .djs-context-pad .entry[title]").length>0&&se()},100);setTimeout(()=>clearInterval(ke),5e3),new MutationObserver(ge=>{let Pe=!1;ge.forEach(oe=>{if(oe.addedNodes.length>0&&(Pe=!0),oe.type==="attributes"&&oe.attributeName==="title"){const Z=oe.target;if(Z.hasAttribute("title")&&!Z.hasAttribute("data-tooltip-setup")){const de=Z.getAttribute("title"),he=DC[de]||Bw(de);Z.setAttribute("data-tooltip",he),Z.removeAttribute("title"),Z.setAttribute("data-tooltip-setup","true"),Z.addEventListener("mouseenter",V),Z.addEventListener("mouseleave",J)}}}),Pe&&setTimeout(se,50)}).observe(M,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["title"]}),setTimeout(se,200),setTimeout(se,500),setTimeout(se,1e3);const Ie=()=>{const ge=M.querySelector(".djs-palette");!ge||ge.hasAttribute("data-scroll-setup")||(ge.setAttribute("data-scroll-setup","true"),ge.addEventListener("wheel",Pe=>{if(ge.scrollHeight>ge.clientHeight){Pe.stopPropagation();const Z=ge.scrollTop===0,de=ge.scrollTop+ge.clientHeight>=ge.scrollHeight;(Z&&Pe.deltaY<0||de&&Pe.deltaY>0)&&Pe.preventDefault()}},{passive:!1}))};setTimeout(Ie,300),setTimeout(Ie,600);const U=()=>{const ge=M.querySelector(".djs-palette");if(!ge||ge.querySelector(".fluxos-entry"))return;const Pe=document.createElement("div");Pe.className="separator",Pe.style.cssText=`
            margin: 6px 8px;
            width: calc(100% - 16px);
            height: 1px;
            background: #e2e8f0;
            border: none;
          `;const oe=document.createElement("div");oe.className="entry fluxos-entry",oe.setAttribute("data-tooltip","Gerenciar Fluxos"),oe.setAttribute("data-tooltip-setup","true"),oe.style.cssText=`
            width: 36px;
            height: 36px;
            min-height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin: 2px auto;
            transition: all 0.15s ease;
            cursor: pointer;
          `,oe.innerHTML=`
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#6366f1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
              <line x1="12" y1="11" x2="12" y2="17"></line>
              <line x1="9" y1="14" x2="15" y2="14"></line>
            </svg>
          `,oe.addEventListener("mouseenter",he=>{oe.style.background="#f1f5f9",oe.style.transform="scale(1.05)",V(he)}),oe.addEventListener("mouseleave",()=>{oe.style.background="",oe.style.transform="",J()}),oe.addEventListener("click",()=>{i&&i()});const Z=document.createElement("div");Z.className="entry image-entry",Z.setAttribute("data-tooltip","Adicionar Imagem"),Z.setAttribute("data-tooltip-setup","true"),Z.style.cssText=`
            width: 36px;
            height: 36px;
            min-height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin: 2px auto;
            transition: all 0.15s ease;
            cursor: pointer;
          `,Z.innerHTML=`
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
          `,Z.addEventListener("mouseenter",he=>{Z.style.background="#f1f5f9",Z.style.transform="scale(1.05)",V(he)}),Z.addEventListener("mouseleave",()=>{Z.style.background="",Z.style.transform="",J()}),Z.addEventListener("click",()=>{s&&s()});const de=document.createElement("div");de.className="entry robot-entry",de.setAttribute("data-tooltip","Tarefa Automatizada (Rob)"),de.setAttribute("data-tooltip-setup","true"),de.style.cssText=`
            width: 36px;
            height: 36px;
            min-height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin: 2px auto;
            transition: all 0.15s ease;
            cursor: pointer;
          `,de.innerHTML=`
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
              <rect x="3" y="11" width="18" height="10" rx="2" />
              <circle cx="12" cy="5" r="2" />
              <line x1="12" y1="7" x2="12" y2="11" />
              <line x1="8" y1="16" x2="8" y2="16" stroke-width="3" />
              <line x1="16" y1="16" x2="16" y2="16" stroke-width="3" />
            </svg>
          `,de.addEventListener("mouseenter",he=>{de.style.background="#f5f3ff",de.style.transform="scale(1.05)",V(he)}),de.addEventListener("mouseleave",()=>{de.style.background="",de.style.transform="",J()}),de.addEventListener("click",()=>{try{const he=z.get("modeling"),Ce=z.get("elementFactory"),De=z.get("canvas"),Te=z.get("elementRegistry"),Ge=De.getRootElement();let tt=Ge;if((Ge.businessObject.$type||Ge.type)==="bpmn:Collaboration"){const pn=Te.filter(Ft=>Ft.type==="bpmn:Lane");if(pn.length>0)tt=pn[0];else{const Ft=Te.filter(rt=>rt.type==="bpmn:Participant");Ft.length>0&&(tt=Ft[0])}}const Ke=Ce.createShape({type:"bpmn:ServiceTask"}),_t=De.viewbox(),nt={x:_t.x+_t.width/2,y:_t.y+_t.height/2};he.createShape(Ke,nt,tt),he.updateProperties(Ke,{name:"[ROBO] Nova Automao"}),setTimeout(()=>{he.setColor([Ke],{fill:"#f5f3ff",stroke:"#8b5cf6"})},100),console.log("Tarefa automatizada criada:",Ke.id)}catch(he){console.error("Erro ao criar tarefa automatizada:",he)}}),ge.appendChild(Pe),ge.appendChild(oe),ge.appendChild(Z)};setTimeout(U,300),setTimeout(U,600),f(!1)}catch(z){console.error("Erro BPMN:",z),v(z.message||"Erro ao carregar diagrama"),f(!1)}},100);return()=>{clearTimeout(j),u.current&&(u.current._copyPasteHandler&&document.removeEventListener("keydown",u.current._copyPasteHandler),u.current.destroy(),u.current=null)}},[w]);const I=_e.useCallback(()=>{var C;const M=(C=u.current)==null?void 0:C.get("canvas");M&&(M.zoom(M.zoom()*1.2),w())},[w]),q=_e.useCallback(()=>{var C;const M=(C=u.current)==null?void 0:C.get("canvas");M&&(M.zoom(M.zoom()/1.2),w())},[w]),T=_e.useCallback(()=>{var C;const M=(C=u.current)==null?void 0:C.get("canvas");M&&(M.zoom("fit-viewport"),w())},[w]),D=_e.useCallback(()=>{var C;const M=(C=u.current)==null?void 0:C.get("canvas");M&&(M.zoom(1),w())},[w]);return E.jsxs("div",{className:"relative w-full h-full",style:{minHeight:"500px"},children:[h&&E.jsx("div",{className:"absolute inset-0 bg-white/90 flex items-center justify-center z-10",children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),E.jsx("span",{className:"text-slate-600",children:"Carregando..."})]})}),m&&E.jsx("div",{className:"absolute inset-0 bg-red-50 flex items-center justify-center z-10",children:E.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md text-center",children:[E.jsx("h3",{className:"text-red-600 font-bold mb-2",children:"Erro ao carregar diagrama"}),E.jsx("p",{className:"text-slate-600 text-sm",children:m})]})}),!h&&!m&&E.jsx("div",{className:"absolute top-4 right-4 z-20",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-lg flex items-center border border-slate-200",children:[E.jsx("button",{onClick:q,className:"px-3 py-2 hover:bg-slate-100 border-r border-slate-200",title:"Diminuir zoom",children:E.jsx("span",{className:"text-xl font-bold text-slate-600",children:""})}),E.jsxs("button",{onClick:D,className:"px-4 py-2 hover:bg-slate-100 border-r border-slate-200 text-sm font-semibold text-slate-700 min-w-[70px]",title:"Resetar para 100%",children:[b,"%"]}),E.jsx("button",{onClick:I,className:"px-3 py-2 hover:bg-slate-100 border-r border-slate-200",title:"Aumentar zoom",children:E.jsx("span",{className:"text-xl font-bold text-slate-600",children:"+"})}),E.jsx("button",{onClick:T,className:"px-3 py-2 hover:bg-slate-100 border-r border-slate-200",title:"Ajustar  tela",children:E.jsx("svg",{className:"w-5 h-5 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),E.jsx("button",{onClick:a,className:`px-3 py-2 hover:bg-slate-100 transition-colors border-r border-slate-200 ${o?"bg-indigo-50":""}`,title:o?"Desativar grade":"Ativar grade",children:E.jsx("svg",{className:`w-5 h-5 ${o?"text-indigo-600":"text-slate-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}),E.jsxs("div",{className:"relative","data-raia-menu":!0,children:[E.jsxs("button",{onClick:()=>_(!x),className:`px-3 py-2 hover:bg-slate-100 transition-colors flex items-center gap-1 ${x?"bg-emerald-50":""}`,title:"Adicionar Raia",children:[E.jsx("svg",{className:`w-5 h-5 ${x?"text-emerald-600":"text-slate-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),E.jsx("span",{className:`text-xs font-medium ${x?"text-emerald-600":"text-slate-600"}`,children:"Raia"})]}),x&&E.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-white rounded-lg shadow-xl border border-slate-200 py-1 min-w-[180px] z-50",children:[E.jsxs("button",{onClick:async()=>{_(!1),await R()},className:"w-full px-4 py-2 text-left hover:bg-emerald-50 flex items-center gap-2 text-sm",children:[E.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-slate-700",children:"Indicaes"}),E.jsx("div",{className:"text-xs text-slate-500",children:"Funil da Confiana"})]})]}),E.jsx("div",{className:"border-t border-slate-100 my-1"}),E.jsx("div",{className:"px-4 py-2 text-xs text-slate-400 italic",children:"Mais raias em breve..."})]})]})]})}),E.jsx("div",{ref:c,className:"w-full h-full bg-white",style:{minHeight:"500px"}})]})}),_ne=[{name:"Azul",fill:"#dbeafe",stroke:"#3b82f6"},{name:"Verde",fill:"#dcfce7",stroke:"#22c55e"},{name:"Roxo",fill:"#ede9fe",stroke:"#8b5cf6"},{name:"Laranja",fill:"#ffedd5",stroke:"#f97316"},{name:"Cyan",fill:"#cffafe",stroke:"#06b6d4"},{name:"Rosa",fill:"#fce7f3",stroke:"#ec4899"},{name:"Amarelo",fill:"#fef3c7",stroke:"#f59e0b"},{name:"Vermelho",fill:"#fecaca",stroke:"#ef4444"},{name:"Teal",fill:"#ccfbf1",stroke:"#14b8a6"},{name:"Indigo",fill:"#e0e7ff",stroke:"#6366f1"}],K0=e=>{var t,n;return(n=(t=e==null?void 0:e.businessObject)==null?void 0:t.name)==null?void 0:n.startsWith("__IMAGE__:")},wne=e=>{try{if(K0(e)){const t=e.businessObject.name.substring(10);return JSON.parse(t)}}catch(t){console.error("Erro ao parsear dados de imagem:",t)}return null};function xne({element:e,onUpdate:t,onColorChange:n}){var R;const[r,i]=_e.useState(""),[o,a]=_e.useState(""),[s,l]=_e.useState(null),[c,u]=_e.useState(null);_e.useEffect(()=>{if(e){const I=e.businessObject;if(K0(e)){const T=wne(e);u(T),i((T==null?void 0:T.displayName)||"Imagem")}else u(null),i(I.name||"");const q=I.documentation;q&&q.length>0?a(q[0].text||""):a(""),l(null)}else i(""),a(""),l(null),u(null)},[e]);const d=I=>{l(I),n&&e&&n(e,I)},h=I=>{i(I.target.value)},f=()=>{if(t&&e)if(c){const I={...c,displayName:r};t(e,{name:"__IMAGE__:"+JSON.stringify(I)})}else t(e,{name:r})},m=()=>{f()},v=I=>{I.key==="Enter"&&(I.preventDefault(),f(),I.target.blur())},b=I=>{a(I.target.value)},y=()=>{t&&e&&t(e,{documentation:o?[{text:o}]:[]})},x=()=>{y()},_=I=>{var D;if(!I)return"";if(K0(I))return"Imagem";const q=I.type||((D=I.businessObject)==null?void 0:D.$type)||"";return{"bpmn:Task":"Tarefa","bpmn:UserTask":"Tarefa de Usurio","bpmn:ServiceTask":"Tarefa de Servio","bpmn:ScriptTask":"Tarefa de Script","bpmn:ManualTask":"Tarefa Manual","bpmn:BusinessRuleTask":"Tarefa de Regra","bpmn:SendTask":"Tarefa de Envio","bpmn:ReceiveTask":"Tarefa de Recebimento","bpmn:StartEvent":"Evento de Incio","bpmn:EndEvent":"Evento de Fim","bpmn:IntermediateCatchEvent":"Evento Intermedirio","bpmn:IntermediateThrowEvent":"Evento Intermedirio","bpmn:BoundaryEvent":"Evento de Limite","bpmn:ExclusiveGateway":"Gateway Exclusivo","bpmn:ParallelGateway":"Gateway Paralelo","bpmn:InclusiveGateway":"Gateway Inclusivo","bpmn:EventBasedGateway":"Gateway de Evento","bpmn:SubProcess":"Sub-Processo","bpmn:CallActivity":"Atividade de Chamada","bpmn:Participant":"Pool","bpmn:Lane":"Raia","bpmn:SequenceFlow":"Fluxo de Sequncia","bpmn:MessageFlow":"Fluxo de Mensagem","bpmn:DataObject":"Objeto de Dados","bpmn:DataStore":"Armazm de Dados","bpmn:TextAnnotation":"Anotao"}[q]||q.replace("bpmn:","")},w=I=>{var T;if(!I)return null;if(K0(I))return E.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[E.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2",strokeWidth:2}),E.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 15l-5-5L5 21"})]});const q=I.type||((T=I.businessObject)==null?void 0:T.$type)||"";return q.includes("Task")?E.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}):q.includes("Event")?E.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:2})}):q.includes("Gateway")?E.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3l9 9-9 9-9-9 9-9z"})}):q.includes("SubProcess")?E.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[E.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeWidth:2}),E.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M12 8v8M8 12h8"})]}):q.includes("Participant")||q.includes("Lane")?E.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[E.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"1",strokeWidth:2}),E.jsx("line",{x1:"6",y1:"4",x2:"6",y2:"20",strokeWidth:2})]}):E.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})};return e?E.jsxs("div",{className:"w-80 bg-white border-l border-slate-200 flex flex-col overflow-hidden",children:[E.jsx("div",{className:"p-4 border-b border-slate-200 bg-slate-50",children:E.jsx("h2",{className:"font-semibold text-slate-700",children:"Propriedades"})}),E.jsx("div",{className:"p-4 border-b border-slate-200 bg-fyness-light",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 bg-fyness-primary/10 rounded-lg flex items-center justify-center text-fyness-primary",children:w(e)}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Tipo"}),E.jsx("p",{className:"font-medium text-slate-700",children:_(e)})]})]})}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wide mb-1",children:"ID"}),E.jsx("input",{type:"text",value:e.id||"",readOnly:!0,className:"w-full px-3 py-2 bg-slate-100 border border-slate-200 rounded-md text-sm text-slate-600 cursor-not-allowed"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wide mb-1",children:"Nome"}),E.jsx("input",{type:"text",value:r,onChange:h,onBlur:m,onKeyDown:v,placeholder:"Digite o nome do elemento...",className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent"}),E.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Pressione Enter para salvar"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wide mb-1",children:"Documentao"}),E.jsx("textarea",{value:o,onChange:b,onBlur:x,placeholder:"Adicione uma descrio ou notas...",rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent resize-none"}),E.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Clique fora para salvar"})]}),e.type&&!e.type.includes("Flow")&&!e.type.includes("Association")&&E.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[E.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wide mb-2",children:"Cor do Elemento"}),E.jsx("div",{className:"grid grid-cols-5 gap-2",children:_ne.map(I=>E.jsx("button",{onClick:()=>d(I),title:I.name,className:`w-10 h-10 rounded-lg border-2 transition-all hover:scale-110 ${(s==null?void 0:s.name)===I.name?"ring-2 ring-offset-2 ring-slate-400":""}`,style:{backgroundColor:I.fill,borderColor:I.stroke}},I.name))}),s&&E.jsxs("p",{className:"text-xs text-slate-500 mt-2 text-center",children:["Cor selecionada: ",s.name]})]}),((R=e.type)==null?void 0:R.includes("SequenceFlow"))&&E.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[E.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wide mb-1",children:"Condio (Expresso)"}),E.jsx("input",{type:"text",placeholder:"Ex: ${approved == true}",className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent font-mono"})]})]}),E.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:E.jsx("p",{className:"text-xs text-slate-400 text-center",children:"Use o canvas para editar visualmente"})})]}):E.jsxs("div",{className:"w-80 bg-white border-l border-slate-200 flex flex-col",children:[E.jsx("div",{className:"p-4 border-b border-slate-200 bg-slate-50",children:E.jsx("h2",{className:"font-semibold text-slate-700",children:"Propriedades"})}),E.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:E.jsxs("div",{className:"text-center text-slate-400",children:[E.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),E.jsx("p",{className:"text-sm",children:"Selecione um elemento no diagrama para editar suas propriedades"})]})})]})}function jC(){const{id:e}=wB(),t=py(),[n,r]=_e.useState(null),[i,o]=_e.useState(null),[a,s]=_e.useState(null),[l,c]=_e.useState(!1),[u,d]=_e.useState(!1),[h,f]=_e.useState(!1),[m,v]=_e.useState(""),[b,y]=_e.useState(!1),[x,_]=_e.useState(!0),w=_e.useRef(null),R=_e.useRef(e),I=_e.useRef(null),[q,T]=_e.useState(!1),[D,M]=_e.useState(!1),[C,j]=_e.useState([]),[z,Q]=_e.useState(!1),[me,pe]=_e.useState(""),[ue,te]=_e.useState(!0),[ae,ye]=_e.useState(!1),[we,L]=_e.useState(""),[G,K]=_e.useState("square");_e.useEffect(()=>{(async()=>{const Z=await Lh();j(Z.map($c))})()},[]);const ee=_e.useMemo(()=>{if(!n||!C.length)return null;const oe=n.parentId?C.find(he=>he.id===n.parentId):null,Z=C.filter(he=>he.parentId===n.id),de=(he,Ce=[])=>{if(!(he!=null&&he.parentId))return Ce;const De=C.find(Te=>Te.id===he.parentId);return De?(Ce.unshift(De),de(De,Ce)):Ce};return{parent:oe,children:Z,ancestors:de(n),level:n.level||0,isRoot:n.isRoot||!n.parentId}},[n,C]),O=oe=>{const Z=[{bg:"bg-green-500",text:"text-green-600",light:"bg-green-50",border:"border-green-400"},{bg:"bg-blue-500",text:"text-blue-600",light:"bg-blue-50",border:"border-blue-400"},{bg:"bg-purple-500",text:"text-purple-600",light:"bg-purple-50",border:"border-purple-400"},{bg:"bg-orange-500",text:"text-orange-600",light:"bg-orange-50",border:"border-orange-400"},{bg:"bg-pink-500",text:"text-pink-600",light:"bg-pink-50",border:"border-pink-400"}];return Z[oe%Z.length]};_e.useEffect(()=>{(async()=>{if(_(!0),e){const Z=await O9(e);if(Z){const de=$c(Z);r(de),o(de.xml),v(de.name),w.current=de.xml,R.current=de.id}else console.warn("Projeto no encontrado:",e),t("/")}else{const Z=P_;o(Z),v("Novo Diagrama"),w.current=Z}_(!1)})()},[e,t]),_e.useEffect(()=>{i&&w.current&&d(i!==w.current)},[i]),_e.useEffect(()=>{if(!i||!u||!n)return;const oe=setTimeout(async()=>{c(!0);try{R.current&&await Wc(R.current,{xml:i,name:m})&&(w.current=i,d(!1),f(!0),setTimeout(()=>f(!1),2e3))}catch(Z){console.error("Erro no auto-save:",Z)}finally{c(!1)}},500);return()=>clearTimeout(oe)},[i,u,n,m]);const N=_e.useCallback(oe=>{o(oe)},[]),k=_e.useCallback(oe=>{s(oe)},[]),V=_e.useCallback(async()=>{if(i){c(!0);try{if(R.current&&n)await Wc(R.current,{xml:i,name:m})&&(w.current=i,d(!1));else{const oe=await $_({name:m,xml:i,isTemplate:!1});if(oe){const Z=$c(oe);r(Z),R.current=Z.id,w.current=i,d(!1),window.history.replaceState(null,"",`/editor/${Z.id}`)}}f(!0),setTimeout(()=>f(!1),2e3)}catch(oe){console.error("Erro ao salvar:",oe)}finally{c(!1)}}},[i,n,m]);_e.useEffect(()=>{const oe=Z=>{(Z.ctrlKey||Z.metaKey)&&Z.key==="s"&&(Z.preventDefault(),V())};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[V]);const J=async()=>{R.current&&n&&await Wc(R.current,{name:m}),y(!1)},se=_e.useCallback((oe,Z)=>{I.current&&I.current.setElementColor(oe,Z)},[]),ke=_e.useCallback((oe,Z)=>{I.current&&I.current.updateElementProperties(oe,Z)},[]),Ae=async()=>{if(!me.trim()||!n)return;if(await $_({name:me.trim(),xml:P_,companyId:n.companyId,parentId:n.id,level:(n.level||0)+1,isRoot:!1,isTemplate:!1})){const Z=await Lh();j(Z.map($c)),Q(!1),pe("")}},Ie=async oe=>{if(!n||!oe||!I.current)return;if(I.current.hasFlowElement(oe.id)){alert("Este fluxo j foi adicionado ao canvas!");return}if(I.current.addCallActivity(oe.id,oe.name)){const de=(oe.level||0)+1;if(await Wc(n.id,{parentId:oe.id,level:de,isRoot:!1})){r(De=>({...De,parentId:oe.id,level:de,isRoot:!1}));const Ce=await Lh();j(Ce.map($c))}}},U=async()=>{if(!n||!I.current)return;if(ee!=null&&ee.parent&&I.current.removeFlowElement(ee.parent.id),await Wc(n.id,{parentId:null,level:0,isRoot:!0})){r(de=>({...de,parentId:null,level:0,isRoot:!0}));const Z=await Lh();j(Z.map($c))}},ge=()=>{if(!i)return;const oe=new Blob([i],{type:"application/xml"}),Z=URL.createObjectURL(oe),de=document.createElement("a");de.href=Z,de.download=`${m.replace(/\s+/g,"_")}.bpmn`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(Z)},Pe=async()=>{if(I.current){T(!0);try{const oe=await I.current.saveSVG();if(!oe)throw new Error("No foi possvel exportar o diagrama");const Z=document.createElement("canvas"),de=Z.getContext("2d"),he=new Image,Ce=new Blob([oe],{type:"image/svg+xml;charset=utf-8"}),De=URL.createObjectURL(Ce);await new Promise((Te,Ge)=>{he.onload=()=>{Z.width=he.width*2,Z.height=he.height*2,de.fillStyle="#ffffff",de.fillRect(0,0,Z.width,Z.height),de.drawImage(he,0,0,Z.width,Z.height);const At=Z.toDataURL("image/png"),kt=new ut({orientation:Z.width>Z.height?"landscape":"portrait",unit:"px",format:[Z.width,Z.height]});kt.addImage(At,"PNG",0,0,Z.width,Z.height),kt.save(`${m.replace(/\s+/g,"_")}.pdf`),URL.revokeObjectURL(De),Te()},he.onerror=Ge,he.src=De})}catch(oe){console.error("Erro ao exportar PDF:",oe),alert("Erro ao gerar PDF. Tente novamente.")}finally{T(!1)}}};return x||!i?E.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-100",children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 border-4 border-fyness-primary border-t-transparent rounded-full animate-spin"}),E.jsx("span",{className:"text-slate-600",children:"Carregando editor..."})]})}):E.jsxs("div",{className:"h-screen flex flex-col bg-slate-100 overflow-hidden",children:[E.jsx("header",{className:"bg-white border-b border-slate-200 shadow-sm flex-shrink-0 z-30",children:E.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("button",{onClick:()=>t("/"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Voltar ao Dashboard",children:E.jsx("svg",{className:"w-5 h-5 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-fyness-primary to-fyness-secondary rounded-lg flex items-center justify-center",children:E.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}),E.jsxs("button",{onClick:()=>y(!0),className:"group flex items-center gap-1 hover:bg-slate-100 px-2 py-1 rounded-lg transition-colors",children:[E.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:m}),E.jsx("svg",{className:"w-4 h-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),u&&E.jsx("span",{className:"text-xs text-amber-600 bg-amber-50 px-2 py-0.5 rounded-full",children:"No salvo"})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("button",{onClick:()=>{window.confirm("Isso substituir o diagrama atual pelo Template Comercial. Deseja continuar?")&&I.current&&I.current.loadComercialTemplate()},className:"flex items-center gap-2 px-3 py-2 border border-purple-300 bg-purple-50 rounded-lg text-purple-600 hover:bg-purple-100 transition-colors text-sm",title:"Carregar Template Comercial",children:[E.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[E.jsx("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),E.jsx("circle",{cx:"12",cy:"5",r:"2"}),E.jsx("line",{x1:"12",y1:"7",x2:"12",y2:"11"})]}),E.jsx("span",{children:"Comercial"})]}),E.jsx("button",{onClick:Pe,disabled:q,className:"flex items-center gap-2 px-3 py-2 border border-slate-300 rounded-lg text-slate-600 hover:bg-slate-50 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:"Baixar PDF",children:q?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}),E.jsx("span",{children:"Gerando..."})]}):E.jsxs(E.Fragment,{children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),E.jsx("span",{children:"PDF"})]})}),E.jsxs("button",{onClick:ge,className:"flex items-center gap-2 px-3 py-2 border border-slate-300 rounded-lg text-slate-600 hover:bg-slate-50 transition-colors text-sm",title:"Baixar XML",children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),E.jsx("span",{children:"XML"})]}),E.jsx("button",{onClick:V,disabled:l||!u,className:"flex items-center gap-2 px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:l?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),E.jsx("span",{children:"Salvando..."})]}):E.jsxs(E.Fragment,{children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),E.jsx("span",{children:"Salvar"})]})})]})]})}),ee&&(ee.ancestors.length>0||ee.children.length>0)&&E.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-4 py-2 flex items-center gap-2 overflow-x-auto",children:[E.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:"Hierarquia:"}),ee.ancestors.map((oe,Z)=>E.jsxs("span",{className:"flex items-center gap-1 flex-shrink-0",children:[E.jsx("button",{onClick:()=>t(`/editor/${oe.id}`),className:`text-xs px-2 py-1 rounded ${O(Z).light} ${O(Z).text} hover:opacity-80 transition-opacity`,children:oe.name}),E.jsx("svg",{className:"w-3 h-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},oe.id)),E.jsxs("span",{className:`text-xs px-2 py-1 rounded font-semibold ${O(ee.level).bg} text-white flex-shrink-0`,children:[m," (Atual)"]}),ee.children.length>0&&E.jsxs(E.Fragment,{children:[E.jsx("svg",{className:"w-3 h-3 text-slate-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),E.jsxs("span",{className:"text-xs text-slate-500 flex-shrink-0",children:[ee.children.length," fluxo",ee.children.length!==1?"s":""," dependente",ee.children.length!==1?"s":""]})]})]}),E.jsxs("div",{className:"flex-1 flex overflow-hidden",style:{height:ee&&(ee.ancestors.length>0||ee.children.length>0)?"calc(100vh - 104px)":"calc(100vh - 64px)"},children:[E.jsx("div",{className:`bg-white border-r border-slate-200 transition-all duration-300 flex flex-col ${D?"w-64":"w-0"} overflow-hidden`,children:D&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"p-3 border-b border-slate-200 flex items-center justify-between bg-gradient-to-r from-amber-50 to-orange-50",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-7 h-7 bg-amber-500 rounded-lg flex items-center justify-center",children:E.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"})})}),E.jsx("h3",{className:"font-bold text-slate-800 text-sm",children:"Fluxos"})]}),E.jsx("button",{onClick:()=>M(!1),className:"p-1 hover:bg-white/50 rounded",children:E.jsx("svg",{className:"w-4 h-4 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto",children:[E.jsx("div",{className:"p-3 bg-blue-50 border-b border-blue-100",children:E.jsxs("p",{className:"text-[11px] text-blue-700",children:[E.jsx("strong",{children:"Clique"})," em um fluxo para adicion-lo ao canvas como pr-requisito deste fluxo."]})}),E.jsxs("div",{className:"p-2",children:[E.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Adicionar Pr-requisito"}),E.jsxs("div",{className:"space-y-1",children:[C.filter(oe=>oe.id!==(n==null?void 0:n.id)&&oe.companyId===(n==null?void 0:n.companyId)).map(oe=>{const Z=oe.id===(n==null?void 0:n.parentId);return E.jsx("button",{onClick:()=>!Z&&Ie(oe),disabled:Z,className:`w-full p-2 rounded-lg border-2 text-left transition-all group ${Z?"bg-amber-50 border-amber-300 cursor-default":"bg-white border-slate-200 hover:border-amber-400 hover:bg-amber-50 hover:shadow-md cursor-pointer"}`,children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:`w-8 h-8 rounded border-2 flex items-center justify-center flex-shrink-0 ${Z?"bg-amber-100 border-amber-400":"bg-slate-50 border-slate-300 group-hover:bg-amber-100 group-hover:border-amber-400"}`,children:E.jsx("div",{className:`w-5 h-5 rounded-sm border ${Z?"border-amber-500":"border-slate-400 group-hover:border-amber-500"}`,children:E.jsx("div",{className:`w-full h-full rounded-sm border ${Z?"border-amber-400":"border-slate-300 group-hover:border-amber-400"}`})})}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("p",{className:"text-xs font-semibold text-slate-700 truncate",children:oe.name}),Z&&E.jsx("p",{className:"text-[10px] text-amber-600 font-medium",children:"Pr-requisito atual"})]}),!Z&&E.jsx("svg",{className:"w-4 h-4 text-slate-300 group-hover:text-amber-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]})},oe.id)}),C.filter(oe=>oe.id!==(n==null?void 0:n.id)&&oe.companyId===(n==null?void 0:n.companyId)).length===0&&E.jsx("div",{className:"p-3 bg-slate-50 rounded-lg text-center",children:E.jsx("p",{className:"text-xs text-slate-500",children:"Nenhum outro fluxo disponvel"})})]})]}),E.jsx("div",{className:"border-t border-slate-200 my-2"}),E.jsxs("div",{className:"p-2",children:[E.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Status Atual"}),ee!=null&&ee.parent?E.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("span",{className:"text-[10px] font-bold text-amber-700 uppercase",children:"Pr-requisito:"}),E.jsx("button",{onClick:U,className:"text-[10px] text-red-500 hover:text-red-700 hover:underline",children:"Remover"})]}),E.jsxs("button",{onClick:()=>t(`/editor/${ee.parent.id}`),className:"w-full p-2 bg-white rounded border border-amber-300 hover:shadow-md transition-all text-left",children:[E.jsx("p",{className:"text-sm font-bold text-slate-800",children:ee.parent.name}),E.jsx("p",{className:"text-[10px] text-slate-500",children:"Clique para abrir"})]})]}):E.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),E.jsx("span",{className:"text-sm font-bold text-green-700",children:"Fluxo Raiz"})]}),E.jsx("p",{className:"text-[10px] text-green-600 mt-1",children:"Este fluxo no tem pr-requisitos"})]})]}),(ee==null?void 0:ee.children.length)>0&&E.jsxs("div",{className:"p-2 border-t border-slate-200",children:[E.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:["Fluxos que dependem deste (",ee.children.length,")"]}),E.jsx("div",{className:"space-y-1",children:ee.children.map(oe=>E.jsx("button",{onClick:()=>t(`/editor/${oe.id}`),className:"w-full p-2 bg-slate-50 rounded-lg border border-slate-200 hover:bg-slate-100 text-left transition-all",children:E.jsx("p",{className:"text-xs font-medium text-slate-700 truncate",children:oe.name})},oe.id))})]})]})]})}),E.jsx("div",{className:"flex-1 relative h-full",children:E.jsx(bne,{ref:I,xml:i,onXmlChange:N,onElementSelect:k,onFluxosClick:()=>M(!D),showGrid:ue,onGridToggle:()=>te(!ue),onAddImage:()=>ye(!0)})}),a&&E.jsx(xne,{element:a,onUpdate:ke,onColorChange:se})]}),h&&E.jsxs("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50 animate-fade-in",children:[E.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),E.jsx("span",{children:"Projeto salvo com sucesso!"})]}),b&&E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[E.jsx("div",{className:"p-6 border-b border-slate-200",children:E.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Renomear Projeto"})}),E.jsxs("div",{className:"p-6",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Projeto"}),E.jsx("input",{type:"text",value:m,onChange:oe=>v(oe.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",placeholder:"Digite o nome do projeto...",autoFocus:!0,onKeyDown:oe=>{oe.key==="Enter"&&J(),oe.key==="Escape"&&y(!1)}})]}),E.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[E.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),E.jsx("button",{onClick:J,disabled:!m.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Salvar"})]})]})}),z&&E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[E.jsx("div",{className:"p-6 border-b border-slate-200",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 bg-fyness-primary/10 rounded-lg flex items-center justify-center",children:E.jsx("svg",{className:"w-5 h-5 text-fyness-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Criar Sub-Fluxo"}),E.jsxs("p",{className:"text-sm text-slate-500",children:["Dentro de: ",m]})]})]})}),E.jsxs("div",{className:"p-6",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Sub-Fluxo"}),E.jsx("input",{type:"text",value:me,onChange:oe=>pe(oe.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",placeholder:"Ex: Validao de Documentos...",autoFocus:!0,onKeyDown:oe=>{oe.key==="Enter"&&me.trim()&&Ae(),oe.key==="Escape"&&(Q(!1),pe(""))}}),E.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Este fluxo ser criado como dependente do fluxo atual (Nvel ",((ee==null?void 0:ee.level)||0)+1,")"]})]}),E.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[E.jsx("button",{onClick:()=>{Q(!1),pe("")},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),E.jsxs("button",{onClick:Ae,disabled:!me.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Criar Sub-Fluxo"]})]})]})}),ae&&E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[E.jsx("div",{className:"p-6 border-b border-slate-200",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:E.jsxs("svg",{className:"w-5 h-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[E.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2",strokeWidth:2}),E.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5",strokeWidth:2}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 15l-5-5L5 21"})]})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Adicionar Imagem"}),E.jsx("p",{className:"text-sm text-slate-500",children:"Selecione uma imagem do computador"})]})]})}),E.jsxs("div",{className:"p-6 space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Selecionar Imagem"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"file",accept:"image/*",onChange:oe=>{var de;const Z=(de=oe.target.files)==null?void 0:de[0];if(Z){const he=new FileReader;he.onload=Ce=>{L(Ce.target.result)},he.readAsDataURL(Z)}},className:"hidden",id:"image-upload"}),E.jsx("label",{htmlFor:"image-upload",className:"flex items-center justify-center gap-3 w-full px-4 py-6 border-2 border-dashed border-slate-300 rounded-lg cursor-pointer hover:border-green-500 hover:bg-green-50 transition-colors",children:we?E.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[E.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),E.jsx("span",{className:"text-sm font-medium",children:"Imagem selecionada - clique para trocar"})]}):E.jsxs(E.Fragment,{children:[E.jsx("svg",{className:"w-8 h-8 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Clique para selecionar"}),E.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPG, GIF at 10MB"})]})]})})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Formato"}),E.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[E.jsxs("button",{type:"button",onClick:()=>K("square"),className:`p-3 border-2 rounded-lg flex flex-col items-center gap-2 transition-all ${G==="square"?"border-green-500 bg-green-50":"border-slate-200 hover:border-slate-300"}`,children:[E.jsx("div",{className:"w-10 h-10 bg-slate-300 rounded-none"}),E.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Quadrado"})]}),E.jsxs("button",{type:"button",onClick:()=>K("rounded"),className:`p-3 border-2 rounded-lg flex flex-col items-center gap-2 transition-all ${G==="rounded"?"border-green-500 bg-green-50":"border-slate-200 hover:border-slate-300"}`,children:[E.jsx("div",{className:"w-10 h-10 bg-slate-300 rounded-lg"}),E.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Arredondado"})]}),E.jsxs("button",{type:"button",onClick:()=>K("circle"),className:`p-3 border-2 rounded-lg flex flex-col items-center gap-2 transition-all ${G==="circle"?"border-green-500 bg-green-50":"border-slate-200 hover:border-slate-300"}`,children:[E.jsx("div",{className:"w-10 h-10 bg-slate-300 rounded-full"}),E.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Redondo"})]})]})]}),we&&E.jsxs("div",{className:"mt-4",children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Pr-visualizao"}),E.jsx("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50 flex items-center justify-center",children:E.jsx("img",{src:we,alt:"Preview",className:`w-24 h-24 object-cover ${G==="circle"?"rounded-full":G==="rounded"?"rounded-xl":"rounded-none"}`})}),E.jsx("p",{className:"text-xs text-slate-500 mt-2 text-center",children:"Arraste os cantos da imagem no canvas para redimensionar"})]})]}),E.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[E.jsx("button",{onClick:()=>{ye(!1),L(""),K("square")},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),E.jsxs("button",{onClick:()=>{I.current&&we&&I.current.addImageOverlay(we,300,300,G),ye(!1),L(""),K("square")},disabled:!we,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Imagem"]})]})]})}),E.jsxs("div",{className:"fixed bottom-4 right-4 text-xs text-slate-400 z-20",children:[E.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-200 rounded text-slate-600",children:"Ctrl"})," + ",E.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-200 rounded text-slate-600",children:"S"})," para salvar"]})]})}const Rb=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0),Ene=e=>{const t=Math.floor(e/60),n=e%60;return`${t}h ${n}m`};function d0({title:e,value:t,subtitle:n,icon:r,color:i="blue",href:o}){const a={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",orange:"bg-orange-50 text-orange-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"},s=E.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 hover:shadow-md transition-shadow",children:E.jsxs("div",{className:"flex items-start justify-between",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm text-slate-500 font-medium",children:e}),E.jsx("p",{className:"text-2xl font-bold text-slate-800 mt-1",children:t}),n&&E.jsx("p",{className:"text-sm text-slate-500 mt-1",children:n})]}),r&&E.jsx("div",{className:`p-3 rounded-lg ${a[i]}`,children:E.jsx(r,{})})]})});return o?E.jsx(qc,{to:o,children:s}):s}const Sne=()=>E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),Nne=()=>E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ane=()=>E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),kne=()=>E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})});function Cne(){var c;const e={id:null,full_name:"Admin"},[t,n]=_e.useState({tasksInProgress:0,tasksDone:0,hoursWorked:0,totalCost:0,eventsToday:0,meetingCostToday:0}),[r,i]=_e.useState([]),[o,a]=_e.useState([]),[s,l]=_e.useState(!0);return _e.useEffect(()=>{},[e==null?void 0:e.id]),s?E.jsx("div",{className:"flex items-center justify-center h-64",children:E.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{children:[E.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Ola, ",((c=e==null?void 0:e.full_name)==null?void 0:c.split(" ")[0])||"Usuario","!"]}),E.jsx("p",{className:"text-slate-500",children:"Aqui esta um resumo do seu dia"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[E.jsx(d0,{title:"Tarefas em Andamento",value:t.tasksInProgress,subtitle:`${t.tasksDone} concluidas`,icon:Sne,color:"blue",href:"/routine"}),E.jsx(d0,{title:"Tempo Trabalhado",value:Ene(t.hoursWorked),subtitle:"Esta semana",icon:Nne,color:"green"}),E.jsx(d0,{title:"Custo Total",value:Rb(t.totalCost),subtitle:"Esta semana",icon:Ane,color:"purple"}),E.jsx(d0,{title:"Reunioes Hoje",value:t.eventsToday,subtitle:Rb(t.meetingCostToday),icon:kne,color:"orange",href:"/agenda"})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[E.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[E.jsx("h3",{className:"font-semibold text-slate-800",children:"Tarefas Recentes"}),E.jsx(qc,{to:"/routine",className:"text-sm text-blue-600 hover:text-blue-700",children:"Ver todas"})]}),E.jsx("div",{className:"divide-y divide-slate-100",children:r.length===0?E.jsx("div",{className:"p-8 text-center text-slate-500",children:"Nenhuma tarefa encontrada"}):r.map(u=>E.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:E.jsxs("div",{className:"flex items-start justify-between gap-4",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("h4",{className:"font-medium text-slate-800",children:u.title}),E.jsx("p",{className:"text-sm text-slate-500 truncate",children:u.description})]}),E.jsx("span",{className:`
                      px-2 py-1 text-xs font-medium rounded
                      ${u.status==="done"?"bg-green-100 text-green-700":u.status==="doing"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"}
                    `,children:u.status==="done"?"Concluido":u.status==="doing"?"Em andamento":u.status==="blocked"?"Bloqueado":"A fazer"})]})},u.id))})]}),E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[E.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[E.jsx("h3",{className:"font-semibold text-slate-800",children:"Agenda de Hoje"}),E.jsx(qc,{to:"/agenda",className:"text-sm text-blue-600 hover:text-blue-700",children:"Ver agenda"})]}),E.jsx("div",{className:"divide-y divide-slate-100",children:o.length===0?E.jsx("div",{className:"p-8 text-center text-slate-500",children:"Nenhum evento hoje"}):o.map(u=>E.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:E.jsxs("div",{className:"flex items-start justify-between gap-4",children:[E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-sm font-medium text-slate-800",children:new Date(u.start_datetime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),E.jsx("span",{className:"text-slate-300",children:"-"}),E.jsx("span",{className:"text-sm text-slate-500",children:new Date(u.end_datetime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),E.jsx("h4",{className:"font-medium text-slate-800",children:u.title}),u.event_participants&&E.jsxs("p",{className:"text-sm text-slate-500",children:[u.event_participants.length," participante(s)"]})]}),E.jsx("span",{className:"text-sm font-medium text-purple-600",children:Rb(u.total_cost)})]})},u.id))})]})]}),E.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-6 text-white",children:[E.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Acoes Rapidas"}),E.jsxs("div",{className:"flex flex-wrap gap-3",children:[E.jsx(qc,{to:"/routine",className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors text-sm font-medium",children:"+ Nova Tarefa"}),E.jsx(qc,{to:"/agenda",className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors text-sm font-medium",children:"+ Novo Evento"}),E.jsx(qc,{to:"/sales",className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors text-sm font-medium",children:"Ver Fluxos BPMN"})]})]})]})}const Pne=()=>E.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),Tne=()=>E.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})}),Rne=()=>E.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),Lne=()=>E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),One={low:"bg-slate-100 text-slate-600",medium:"bg-blue-100 text-blue-700",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"},Mne={low:"Baixa",medium:"Media",high:"Alta",urgent:"Urgente"},BC=e=>{if(!e||e<=0)return"0h 0m";const t=Math.floor(e/60),n=e%60;return t>0?`${t}h ${n}m`:`${n}m`},FC=e=>e==null?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);function Ine({task:e,onUpdate:t,onStartTimer:n,onStopTimer:r,isDragging:i=!1,className:o=""}){var q,T,D;const a={id:"temp-user"},[s,l]=_e.useState(e.is_timer_running||!1),[c,u]=_e.useState(e.actual_time||0),[d,h]=_e.useState(null),[f,m]=_e.useState(!1),v=e.estimated_time||0,b=v>0?Math.min(c/v*100,100):0,y=c>v&&v>0,x=v>0?(c-v)/v*100:0;_e.useEffect(()=>{let M;return s&&e.timer_started_at&&(M=setInterval(()=>{const C=new Date(e.timer_started_at),z=Math.floor((new Date-C)/6e4);u((e.actual_time||0)+z)},1e3)),()=>{M&&clearInterval(M)}},[s,e.timer_started_at,e.actual_time]),_e.useEffect(()=>{l(e.is_timer_running||!1),e.is_timer_running||u(e.actual_time||0)},[e.is_timer_running,e.actual_time]);const _=_e.useCallback(async()=>{if(!f){m(!0);try{const{data:M,error:C}=await Ir.from("time_entries").insert({task_id:e.id,user_id:a.id,start_time:new Date().toISOString()}).select().single();if(C)throw C;h(M.id);const{error:j}=await Ir.from("tasks").update({is_timer_running:!0,timer_started_at:new Date().toISOString(),status:e.status==="todo"?"doing":e.status}).eq("id",e.id);if(j)throw j;l(!0),n&&n(e.id,M.id),t&&t()}catch(M){console.error("Erro ao iniciar timer:",M),alert("Erro ao iniciar timer: "+M.message)}finally{m(!1)}}},[e,a,n,t,f]),w=_e.useCallback(async()=>{if(!f){m(!0);try{const M=d||await R();if(M){const{data:C,error:j}=await Ir.rpc("stop_time_entry",{entry_id:M});j&&await Ir.from("time_entries").update({end_time:new Date().toISOString()}).eq("id",M)}await Ir.from("tasks").update({is_timer_running:!1,timer_started_at:null}).eq("id",e.id),l(!1),h(null),r&&r(e.id),t&&t()}catch(M){console.error("Erro ao parar timer:",M),alert("Erro ao parar timer: "+M.message)}finally{m(!1)}}},[e,d,r,t,f]),R=async()=>{const{data:M}=await Ir.from("time_entries").select("id").eq("task_id",e.id).is("end_time",null).order("start_time",{ascending:!1}).limit(1).single();return M==null?void 0:M.id},I=["bg-white rounded-lg shadow-sm border-2 transition-all duration-200",i?"opacity-50 rotate-2 scale-105":"",y?"border-red-500 shadow-red-100":"border-transparent hover:border-blue-300",s?"ring-2 ring-green-500 ring-opacity-50":"",o].filter(Boolean).join(" ");return E.jsxs("div",{className:I,children:[E.jsxs("div",{className:"p-3 pb-2",children:[E.jsxs("div",{className:"flex items-start justify-between gap-2",children:[E.jsx("h3",{className:"font-medium text-slate-800 text-sm leading-tight flex-1",children:e.title}),E.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${One[e.priority]}`,children:Mne[e.priority]})]}),e.description&&E.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-2",children:e.description})]}),E.jsx("div",{className:"px-3",children:E.jsx("div",{className:"h-1.5 bg-slate-100 rounded-full overflow-hidden",children:E.jsx("div",{className:`h-full transition-all duration-300 ${y?"bg-red-500":b>80?"bg-orange-500":"bg-blue-500"}`,style:{width:`${Math.min(b,100)}%`}})})}),E.jsx("div",{className:"px-3 pt-2",children:E.jsxs("div",{className:"flex items-center justify-between text-xs",children:[E.jsxs("div",{className:"flex items-center gap-1 text-slate-600",children:[E.jsx(Lne,{}),E.jsx("span",{className:s?"text-green-600 font-medium":"",children:BC(c)}),E.jsx("span",{className:"text-slate-400",children:"/"}),E.jsx("span",{children:BC(v)})]}),y&&E.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[E.jsx(Rne,{}),E.jsxs("span",{className:"font-medium",children:["+",Math.round(x),"%"]})]})]})}),E.jsx("div",{className:"px-3 pt-1",children:E.jsxs("div",{className:"flex items-center justify-between text-xs",children:[E.jsx("span",{className:"text-slate-500",children:"Custo:"}),E.jsxs("div",{children:[E.jsx("span",{className:`font-medium ${y?"text-red-600":"text-slate-700"}`,children:FC(e.actual_cost||0)}),e.estimated_cost>0&&E.jsxs("span",{className:"text-slate-400 ml-1",children:["/ ",FC(e.estimated_cost)]})]})]})}),E.jsxs("div",{className:"p-3 pt-2 border-t border-slate-100 mt-2",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[(q=e.assigned_profile)!=null&&q.avatar_url?E.jsx("img",{src:e.assigned_profile.avatar_url,alt:e.assigned_profile.full_name,className:"w-6 h-6 rounded-full"}):E.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs font-medium text-slate-600",children:(((T=e.assigned_profile)==null?void 0:T.full_name)||"?")[0].toUpperCase()}),E.jsx("span",{className:"text-xs text-slate-500 truncate max-w-[80px]",children:((D=e.assigned_profile)==null?void 0:D.full_name)||"Sem responsavel"})]}),E.jsx("div",{className:"flex items-center gap-1",children:s?E.jsx("button",{onClick:w,disabled:f,className:"p-1.5 rounded-full bg-red-100 text-red-600 hover:bg-red-200 transition-colors disabled:opacity-50",title:"Parar timer",children:E.jsx(Tne,{})}):E.jsx("button",{onClick:_,disabled:f||e.status==="done",className:"p-1.5 rounded-full bg-green-100 text-green-600 hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.status==="done"?"Task finalizada":"Iniciar timer",children:E.jsx(Pne,{})})})]}),e.due_date&&E.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Prazo: ",new Date(e.due_date).toLocaleDateString("pt-BR")]})]}),s&&E.jsxs("div",{className:"absolute top-0 right-0 w-3 h-3",children:[E.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75 animate-ping"}),E.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]})}const $C=[{id:"todo",title:"A Fazer",color:"bg-slate-500"},{id:"doing",title:"Em Andamento",color:"bg-blue-500"},{id:"done",title:"Concluido",color:"bg-green-500"}],Dne=()=>E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})});function jne(){const e={id:"temp-user"},[t,n]=_e.useState([]),[r,i]=_e.useState(!0),[o,a]=_e.useState(!1),[s,l]=_e.useState({title:"",description:"",priority:"medium",estimated_time:60}),c=_e.useCallback(async()=>{try{const{data:f,error:m}=await Ir.from("tasks").select(`
          *,
          assigned_profile:profiles!tasks_assigned_to_fkey (
            id,
            full_name,
            avatar_url
          )
        `).or(`assigned_to.eq.${e.id},created_by.eq.${e.id}`).order("order_index",{ascending:!0});if(m)throw m;n(f||[])}catch(f){console.error("Erro ao carregar tarefas:",f)}finally{i(!1)}},[e==null?void 0:e.id]);_e.useEffect(()=>{c()},[c]);const u=async f=>{f.preventDefault();try{const{error:m}=await Ir.from("tasks").insert({title:s.title,description:s.description,priority:s.priority,estimated_time:s.estimated_time,status:"todo",assigned_to:e.id,created_by:e.id});if(m)throw m;a(!1),l({title:"",description:"",priority:"medium",estimated_time:60}),c()}catch(m){console.error("Erro ao criar tarefa:",m),alert("Erro ao criar tarefa: "+m.message)}},d=async(f,m)=>{try{const{error:v}=await Ir.from("tasks").update({status:m}).eq("id",f);if(v)throw v;c()}catch(v){console.error("Erro ao mover tarefa:",v)}},h=f=>t.filter(m=>m.status===f);return r?E.jsx("div",{className:"flex items-center justify-center h-64",children:E.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):E.jsxs("div",{className:"h-full flex flex-col",children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Minha Rotina"}),E.jsx("p",{className:"text-slate-500",children:"Gerencie suas tarefas e controle seu tempo"})]}),E.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[E.jsx(Dne,{}),"Nova Tarefa"]})]}),E.jsx("div",{className:"flex-1 flex gap-4 overflow-x-auto pb-4",children:$C.map(f=>E.jsxs("div",{className:"flex-1 min-w-[300px] max-w-[400px] bg-slate-100 rounded-xl p-4",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[E.jsx("div",{className:`w-3 h-3 rounded-full ${f.color}`}),E.jsx("h3",{className:"font-semibold text-slate-700",children:f.title}),E.jsx("span",{className:"ml-auto px-2 py-0.5 bg-white rounded-full text-xs font-medium text-slate-600",children:h(f.id).length})]}),E.jsxs("div",{className:"space-y-3",children:[h(f.id).map(m=>E.jsx(Ine,{task:m,onUpdate:c},m.id)),h(f.id).length===0&&E.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Nenhuma tarefa"}),f.id!=="done"&&h(f.id).length>0&&E.jsxs("div",{className:"pt-2 border-t border-slate-200 mt-4",children:[E.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Mover para:"}),E.jsx("div",{className:"flex gap-2",children:$C.filter(m=>m.id!==f.id).map(m=>E.jsx("button",{onClick:()=>{const v=h(f.id)[0];v&&d(v.id,m.id)},className:"flex-1 py-1 text-xs text-slate-600 bg-white rounded hover:bg-slate-50 transition-colors",children:m.title},m.id))})]})]})]},f.id))}),o&&E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:[E.jsx("div",{className:"p-4 border-b border-slate-200",children:E.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Nova Tarefa"})}),E.jsxs("form",{onSubmit:u,className:"p-4 space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Titulo"}),E.jsx("input",{type:"text",value:s.title,onChange:f=>l({...s,title:f.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Revisar relatorio mensal"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descricao"}),E.jsx("textarea",{value:s.description,onChange:f=>l({...s,description:f.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Detalhes da tarefa..."})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Prioridade"}),E.jsxs("select",{value:s.priority,onChange:f=>l({...s,priority:f.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[E.jsx("option",{value:"low",children:"Baixa"}),E.jsx("option",{value:"medium",children:"Media"}),E.jsx("option",{value:"high",children:"Alta"}),E.jsx("option",{value:"urgent",children:"Urgente"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tempo Estimado (min)"}),E.jsx("input",{type:"number",value:s.estimated_time,onChange:f=>l({...s,estimated_time:parseInt(f.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),E.jsxs("div",{className:"flex gap-3 pt-4",children:[E.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors",children:"Cancelar"}),E.jsx("button",{type:"submit",className:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Criar Tarefa"})]})]})]})})]})}function Bne(){return E.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[E.jsx("div",{className:"text-6xl mb-4",children:""}),E.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Agenda"}),E.jsx("p",{className:"text-slate-500",children:"Em construcao..."})]})}function Fne(){return E.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[E.jsx("div",{className:"text-6xl mb-4",children:""}),E.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Financeiro"}),E.jsx("p",{className:"text-slate-500",children:"Em construcao..."})]})}function $ne(){return E.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[E.jsx("div",{className:"text-6xl mb-4",children:""}),E.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Configuracoes"}),E.jsx("p",{className:"text-slate-500",children:"Em construcao..."})]})}const Une=()=>E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),zne=()=>E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),Gne=()=>E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),qne=()=>E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Hne=()=>E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Vne=()=>E.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Wne=()=>E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})});function ud({to:e,icon:t,label:n,isCollapsed:r,badge:i}){const o=Kl(),a=o.pathname===e||o.pathname.startsWith(e+"/");return E.jsxs(JB,{to:e,className:`
        flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
        ${a?"bg-blue-50 text-blue-700 font-medium":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"}
        ${r?"justify-center":""}
      `,title:r?n:void 0,children:[E.jsx(t,{}),!r&&E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"flex-1",children:n}),i&&E.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-600 rounded-full",children:i})]})]})}function Kne(){const[e,t]=_e.useState(!0),[n,r]=_e.useState(!1),i=async()=>{console.log("Logout")};return E.jsxs("aside",{onMouseEnter:()=>t(!1),onMouseLeave:()=>t(!0),className:`
        flex flex-col bg-white border-r border-slate-200 transition-all duration-300
        ${e?"w-16":"w-64"}
      `,children:[E.jsx("div",{className:"h-16 flex items-center justify-center px-4 border-b border-slate-200",children:e?E.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:E.jsx("span",{className:"text-white font-bold text-sm",children:"F"})}):E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:E.jsx("span",{className:"text-white font-bold text-sm",children:"F"})}),E.jsx("span",{className:"font-bold text-slate-800",children:"Fyness OS"})]})}),E.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:[E.jsx(ud,{to:"/dashboard",icon:Une,label:"Dashboard",isCollapsed:e}),E.jsx(ud,{to:"/sales",icon:zne,label:"Processos",isCollapsed:e}),E.jsx(ud,{to:"/routine",icon:Gne,label:"Minha Rotina",isCollapsed:e}),E.jsx(ud,{to:"/agenda",icon:qne,label:"Agenda",isCollapsed:e}),E.jsx(ud,{to:"/financial",icon:Hne,label:"Financeiro",isCollapsed:e}),E.jsx("div",{className:"my-4 border-t border-slate-200"}),E.jsx(ud,{to:"/settings",icon:Vne,label:"Configuracoes",isCollapsed:e})]}),E.jsx("div",{className:"p-3 border-t border-slate-200",children:E.jsxs("div",{className:"relative",children:[E.jsxs("button",{onClick:()=>r(!n),className:`
              w-full flex items-center gap-3 p-2 rounded-lg hover:bg-slate-100 transition-colors
              ${e?"justify-center":""}
            `,children:[E.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-medium",children:"A"}),!e&&E.jsxs("div",{className:"flex-1 text-left",children:[E.jsx("div",{className:"text-sm font-medium text-slate-800 truncate",children:"Admin"}),E.jsx("div",{className:"text-xs text-slate-500 truncate",children:"Administrador"})]})]}),n&&E.jsxs("div",{className:`
              absolute bottom-full mb-2 bg-white border border-slate-200 rounded-lg shadow-lg py-1 z-50
              ${e?"left-0":"left-0 right-0"}
            `,children:[E.jsx("button",{onClick:()=>{},className:"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-100",children:"Meu Perfil"}),E.jsxs("button",{onClick:i,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[E.jsx(Wne,{}),"Sair"]})]})]})})]})}const UC={"/dashboard":"Dashboard","/sales":"Processos","/sales/editor":"Editor de Fluxo","/routine":"Minha Rotina","/agenda":"Agenda","/financial":"Gestao Financeira","/settings":"Configuracoes"},zC=()=>E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})});function Yne(){const e=Kl(),t=()=>{for(const[i,o]of Object.entries(UC))if(e.pathname===i||e.pathname.startsWith(i+"/"))return o;return"Dashboard"},r=(()=>{const i=e.pathname.split("/").filter(Boolean);return i.map((o,a)=>{const s="/"+i.slice(0,a+1).join("/"),l=UC[s]||o.charAt(0).toUpperCase()+o.slice(1);return{path:s,title:l}})})();return E.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 px-6 flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsxs("nav",{className:"flex items-center gap-2 text-sm",children:[E.jsx("span",{className:"text-slate-400",children:"Inicio"}),r.map((i,o)=>E.jsxs("span",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-slate-300",children:"/"}),E.jsx("span",{className:o===r.length-1?"text-slate-800 font-medium":"text-slate-500",children:i.title})]},i.path))]}),E.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:t()})]}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs("div",{className:"relative hidden md:block",children:[E.jsx("input",{type:"text",placeholder:"Buscar...",className:"w-64 pl-10 pr-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),E.jsx(zC,{}),E.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:E.jsx(zC,{})})]}),E.jsxs("button",{className:"hidden sm:flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nova O.S."]})]})]})}function Jne(){return E.jsxs("div",{className:"min-h-screen flex bg-slate-50",children:[E.jsx(Kne,{}),E.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden transition-all duration-300",children:[E.jsx(Yne,{}),E.jsx("main",{className:"flex-1 overflow-auto p-6",children:E.jsx(jB,{})})]})]})}function Xne(){return E.jsx(FB,{children:E.jsxs(Qo,{element:E.jsx(Jne,{}),children:[E.jsx(Qo,{path:"/",element:E.jsx(DB,{to:"/dashboard",replace:!0})}),E.jsx(Qo,{path:"/dashboard",element:E.jsx(Cne,{})}),E.jsx(Qo,{path:"/sales",element:E.jsx(I9,{})}),E.jsx(Qo,{path:"/sales/editor/:id?",element:E.jsx(jC,{})}),E.jsx(Qo,{path:"/routine",element:E.jsx(jne,{})}),E.jsx(Qo,{path:"/agenda",element:E.jsx(Bne,{})}),E.jsx(Qo,{path:"/financial",element:E.jsx(Fne,{})}),E.jsx(Qo,{path:"/settings",element:E.jsx($ne,{})}),E.jsx(Qo,{path:"/editor/:id?",element:E.jsx(jC,{})})]})})}const Zne=()=>{const e=()=>{document.querySelectorAll("div").forEach(n=>{const r=n.textContent||"";n.className,(r.trim().toLowerCase()==="supabase"||r.toLowerCase().includes("supabase")&&r.length<50)&&(console.log("Removendo badge do Supabase:",n),n.style.display="none !important",n.remove())}),document.querySelectorAll('a[href*="supabase"]').forEach(n=>{console.log("Removendo link Supabase:",n),n.style.display="none",n.remove()})};new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0}),setInterval(e,500),setTimeout(e,50),setTimeout(e,200),setTimeout(e,500),setTimeout(e,1e3),setTimeout(e,2e3)};Zne();Lb.createRoot(document.getElementById("root")).render(E.jsx(eP.StrictMode,{children:E.jsx(WB,{children:E.jsx(Xne,{})})}));export{cn as _,ere as c,GC as g};
