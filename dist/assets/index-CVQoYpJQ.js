var DO=Object.defineProperty;var LO=(e,t,n)=>t in e?DO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ln=(e,t,n)=>LO(e,typeof t!="symbol"?t+"":t,n);function OO(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var Iie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n4={exports:{}},iy={},i4={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf=Symbol.for("react.element"),BO=Symbol.for("react.portal"),FO=Symbol.for("react.fragment"),jO=Symbol.for("react.strict_mode"),$O=Symbol.for("react.profiler"),GO=Symbol.for("react.provider"),UO=Symbol.for("react.context"),qO=Symbol.for("react.forward_ref"),zO=Symbol.for("react.suspense"),HO=Symbol.for("react.memo"),VO=Symbol.for("react.lazy"),IS=Symbol.iterator;function WO(e){return e===null||typeof e!="object"?null:(e=IS&&e[IS]||e["@@iterator"],typeof e=="function"?e:null)}var r4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o4=Object.assign,a4={};function dp(e,t,n){this.props=e,this.context=t,this.refs=a4,this.updater=n||r4}dp.prototype.isReactComponent={};dp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function s4(){}s4.prototype=dp.prototype;function Ww(e,t,n){this.props=e,this.context=t,this.refs=a4,this.updater=n||r4}var Kw=Ww.prototype=new s4;Kw.constructor=Ww;o4(Kw,dp.prototype);Kw.isPureReactComponent=!0;var DS=Array.isArray,l4=Object.prototype.hasOwnProperty,Yw={current:null},c4={key:!0,ref:!0,__self:!0,__source:!0};function u4(e,t,n){var i,r={},o=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)l4.call(t,i)&&!c4.hasOwnProperty(i)&&(r[i]=t[i]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return{$$typeof:qf,type:e,key:o,ref:a,props:r,_owner:Yw.current}}function KO(e,t){return{$$typeof:qf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Jw(e){return typeof e=="object"&&e!==null&&e.$$typeof===qf}function YO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var LS=/\/+/g;function d2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?YO(""+e.key):t.toString(36)}function _0(e,t,n,i,r){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case qf:case BO:a=!0}}if(a)return a=e,r=r(a),e=i===""?"."+d2(a,0):i,DS(r)?(n="",e!=null&&(n=e.replace(LS,"$&/")+"/"),_0(r,t,n,"",function(c){return c})):r!=null&&(Jw(r)&&(r=KO(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(LS,"$&/")+"/")+e)),t.push(r)),1;if(a=0,i=i===""?".":i+":",DS(e))for(var s=0;s<e.length;s++){o=e[s];var l=i+d2(o,s);a+=_0(o,t,n,l,r)}else if(l=WO(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=i+d2(o,s++),a+=_0(o,t,n,l,r);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ug(e,t,n){if(e==null)return e;var i=[],r=0;return _0(e,i,"","",function(o){return t.call(n,o,r++)}),i}function JO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Sr={current:null},b0={transition:null},XO={ReactCurrentDispatcher:Sr,ReactCurrentBatchConfig:b0,ReactCurrentOwner:Yw};function d4(){throw Error("act(...) is not supported in production builds of React.")}Kt.Children={map:ug,forEach:function(e,t,n){ug(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ug(e,function(){t++}),t},toArray:function(e){return ug(e,function(t){return t})||[]},only:function(e){if(!Jw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Kt.Component=dp;Kt.Fragment=FO;Kt.Profiler=$O;Kt.PureComponent=Ww;Kt.StrictMode=jO;Kt.Suspense=zO;Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XO;Kt.act=d4;Kt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=o4({},e.props),r=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Yw.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)l4.call(t,l)&&!c4.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];i.children=s}return{$$typeof:qf,type:e.type,key:r,ref:o,props:i,_owner:a}};Kt.createContext=function(e){return e={$$typeof:UO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:GO,_context:e},e.Consumer=e};Kt.createElement=u4;Kt.createFactory=function(e){var t=u4.bind(null,e);return t.type=e,t};Kt.createRef=function(){return{current:null}};Kt.forwardRef=function(e){return{$$typeof:qO,render:e}};Kt.isValidElement=Jw;Kt.lazy=function(e){return{$$typeof:VO,_payload:{_status:-1,_result:e},_init:JO}};Kt.memo=function(e,t){return{$$typeof:HO,type:e,compare:t===void 0?null:t}};Kt.startTransition=function(e){var t=b0.transition;b0.transition={};try{e()}finally{b0.transition=t}};Kt.unstable_act=d4;Kt.useCallback=function(e,t){return Sr.current.useCallback(e,t)};Kt.useContext=function(e){return Sr.current.useContext(e)};Kt.useDebugValue=function(){};Kt.useDeferredValue=function(e){return Sr.current.useDeferredValue(e)};Kt.useEffect=function(e,t){return Sr.current.useEffect(e,t)};Kt.useId=function(){return Sr.current.useId()};Kt.useImperativeHandle=function(e,t,n){return Sr.current.useImperativeHandle(e,t,n)};Kt.useInsertionEffect=function(e,t){return Sr.current.useInsertionEffect(e,t)};Kt.useLayoutEffect=function(e,t){return Sr.current.useLayoutEffect(e,t)};Kt.useMemo=function(e,t){return Sr.current.useMemo(e,t)};Kt.useReducer=function(e,t,n){return Sr.current.useReducer(e,t,n)};Kt.useRef=function(e){return Sr.current.useRef(e)};Kt.useState=function(e){return Sr.current.useState(e)};Kt.useSyncExternalStore=function(e,t,n){return Sr.current.useSyncExternalStore(e,t,n)};Kt.useTransition=function(){return Sr.current.useTransition()};Kt.version="18.3.1";i4.exports=Kt;var ce=i4.exports;const p4=t4(ce),ZO=OO({__proto__:null,default:p4},[ce]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QO=ce,e8=Symbol.for("react.element"),t8=Symbol.for("react.fragment"),n8=Object.prototype.hasOwnProperty,i8=QO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r8={key:!0,ref:!0,__self:!0,__source:!0};function h4(e,t,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)n8.call(t,i)&&!r8.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:e8,type:e,key:o,ref:a,props:r,_owner:i8.current}}iy.Fragment=t8;iy.jsx=h4;iy.jsxs=h4;n4.exports=iy;var g=n4.exports,jb={},f4={exports:{}},so={},m4={exports:{}},g4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,le){var ye=te.length;te.push(le);e:for(;0<ye;){var we=ye-1>>>1,I=te[we];if(0<r(I,le))te[we]=le,te[ye]=I,ye=we;else break e}}function n(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var le=te[0],ye=te.pop();if(ye!==le){te[0]=ye;e:for(var we=0,I=te.length,z=I>>>1;we<z;){var K=2*(we+1)-1,ee=te[K],T=K+1,N=te[T];if(0>r(ee,ye))T<I&&0>r(N,ee)?(te[we]=N,te[T]=ye,we=T):(te[we]=ee,te[K]=ye,we=K);else if(T<I&&0>r(N,ye))te[we]=N,te[T]=ye,we=T;else break e}}return le}function r(te,le){var ye=te.sortIndex-le.sortIndex;return ye!==0?ye:te.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,d=null,h=3,p=!1,m=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(te){for(var le=n(c);le!==null;){if(le.callback===null)i(c);else if(le.startTime<=te)i(c),le.sortIndex=le.expirationTime,t(l,le);else break;le=n(c)}}function x(te){if(v=!1,w(te),!m)if(n(l)!==null)m=!0,ge(M);else{var le=n(c);le!==null&&pe(x,le.startTime-te)}}function M(te,le){m=!1,v&&(v=!1,b(R),R=-1),p=!0;var ye=h;try{for(w(le),d=n(l);d!==null&&(!(d.expirationTime>le)||te&&!A());){var we=d.callback;if(typeof we=="function"){d.callback=null,h=d.priorityLevel;var I=we(d.expirationTime<=le);le=e.unstable_now(),typeof I=="function"?d.callback=I:d===n(l)&&i(l),w(le)}else i(l);d=n(l)}if(d!==null)var z=!0;else{var K=n(c);K!==null&&pe(x,K.startTime-le),z=!1}return z}finally{d=null,h=ye,p=!1}}var B=!1,H=null,R=-1,O=5,D=-1;function A(){return!(e.unstable_now()-D<O)}function L(){if(H!==null){var te=e.unstable_now();D=te;var le=!0;try{le=H(!0,te)}finally{le?$():(B=!1,H=null)}}else B=!1}var $;if(typeof E=="function")$=function(){E(L)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,me=Z.port2;Z.port1.onmessage=L,$=function(){me.postMessage(null)}}else $=function(){_(L,0)};function ge(te){H=te,B||(B=!0,$())}function pe(te,le){R=_(function(){te(e.unstable_now())},le)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,ge(M))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(te){switch(h){case 1:case 2:case 3:var le=3;break;default:le=h}var ye=h;h=le;try{return te()}finally{h=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,le){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ye=h;h=te;try{return le()}finally{h=ye}},e.unstable_scheduleCallback=function(te,le,ye){var we=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?we+ye:we):ye=we,te){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ye+I,te={id:u++,callback:le,priorityLevel:te,startTime:ye,expirationTime:I,sortIndex:-1},ye>we?(te.sortIndex=ye,t(c,te),n(l)===null&&te===n(c)&&(v?(b(R),R=-1):v=!0,pe(x,ye-we))):(te.sortIndex=I,t(l,te),m||p||(m=!0,ge(M))),te},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(te){var le=h;return function(){var ye=h;h=le;try{return te.apply(this,arguments)}finally{h=ye}}}})(g4);m4.exports=g4;var o8=m4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a8=ce,ao=o8;function Ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v4=new Set,af={};function xu(e,t){Vd(e,t),Vd(e+"Capture",t)}function Vd(e,t){for(af[e]=t,e=0;e<t.length;e++)v4.add(t[e])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$b=Object.prototype.hasOwnProperty,s8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OS={},BS={};function l8(e){return $b.call(BS,e)?!0:$b.call(OS,e)?!1:s8.test(e)?BS[e]=!0:(OS[e]=!0,!1)}function c8(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function u8(e,t,n,i){if(t===null||typeof t>"u"||c8(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nr(e,t,n,i,r,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var er={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){er[e]=new Nr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];er[t]=new Nr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){er[e]=new Nr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){er[e]=new Nr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){er[e]=new Nr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){er[e]=new Nr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){er[e]=new Nr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){er[e]=new Nr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){er[e]=new Nr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xw=/[\-:]([a-z])/g;function Zw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xw,Zw);er[t]=new Nr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xw,Zw);er[t]=new Nr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xw,Zw);er[t]=new Nr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){er[e]=new Nr(e,1,!1,e.toLowerCase(),null,!1,!1)});er.xlinkHref=new Nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){er[e]=new Nr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qw(e,t,n,i){var r=er.hasOwnProperty(t)?er[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(u8(t,n,r,i)&&(n=null),i||r===null?l8(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,i=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Ds=a8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dg=Symbol.for("react.element"),wd=Symbol.for("react.portal"),xd=Symbol.for("react.fragment"),ex=Symbol.for("react.strict_mode"),Gb=Symbol.for("react.profiler"),y4=Symbol.for("react.provider"),_4=Symbol.for("react.context"),tx=Symbol.for("react.forward_ref"),Ub=Symbol.for("react.suspense"),qb=Symbol.for("react.suspense_list"),nx=Symbol.for("react.memo"),yl=Symbol.for("react.lazy"),b4=Symbol.for("react.offscreen"),FS=Symbol.iterator;function lh(e){return e===null||typeof e!="object"?null:(e=FS&&e[FS]||e["@@iterator"],typeof e=="function"?e:null)}var jn=Object.assign,p2;function Mh(e){if(p2===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);p2=t&&t[1]||""}return`
`+p2+e}var h2=!1;function f2(e,t){if(!e||h2)return"";h2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||r[a]!==o[s]){var l=`
`+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{h2=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Mh(e):""}function d8(e){switch(e.tag){case 5:return Mh(e.type);case 16:return Mh("Lazy");case 13:return Mh("Suspense");case 19:return Mh("SuspenseList");case 0:case 2:case 15:return e=f2(e.type,!1),e;case 11:return e=f2(e.type.render,!1),e;case 1:return e=f2(e.type,!0),e;default:return""}}function zb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xd:return"Fragment";case wd:return"Portal";case Gb:return"Profiler";case ex:return"StrictMode";case Ub:return"Suspense";case qb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _4:return(e.displayName||"Context")+".Consumer";case y4:return(e._context.displayName||"Context")+".Provider";case tx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nx:return t=e.displayName||null,t!==null?t:zb(e.type)||"Memo";case yl:t=e._payload,e=e._init;try{return zb(e(t))}catch{}}return null}function p8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zb(t);case 8:return t===ex?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $l(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function w4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function h8(e){var t=w4(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pg(e){e._valueTracker||(e._valueTracker=h8(e))}function x4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=w4(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function nv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hb(e,t){var n=t.checked;return jn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jS(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=$l(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function E4(e,t){t=t.checked,t!=null&&Qw(e,"checked",t,!1)}function Vb(e,t){E4(e,t);var n=$l(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wb(e,t.type,n):t.hasOwnProperty("defaultValue")&&Wb(e,t.type,$l(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $S(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Wb(e,t,n){(t!=="number"||nv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ih=Array.isArray;function Ld(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+$l(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Kb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return jn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function GS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ue(92));if(Ih(n)){if(1<n.length)throw Error(Ue(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$l(n)}}function S4(e,t){var n=$l(t.value),i=$l(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function US(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function N4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?N4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hg,k4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hg=hg||document.createElement("div"),hg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f8=["Webkit","ms","Moz","O"];Object.keys(jh).forEach(function(e){f8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jh[t]=jh[e]})});function P4(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jh.hasOwnProperty(e)&&jh[e]?(""+t).trim():t+"px"}function A4(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=P4(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}var m8=jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jb(e,t){if(t){if(m8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ue(62))}}function Xb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zb=null;function ix(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qb=null,Od=null,Bd=null;function qS(e){if(e=Vf(e)){if(typeof Qb!="function")throw Error(Ue(280));var t=e.stateNode;t&&(t=ly(t),Qb(e.stateNode,e.type,t))}}function T4(e){Od?Bd?Bd.push(e):Bd=[e]:Od=e}function C4(){if(Od){var e=Od,t=Bd;if(Bd=Od=null,qS(e),t)for(e=0;e<t.length;e++)qS(t[e])}}function R4(e,t){return e(t)}function M4(){}var m2=!1;function I4(e,t,n){if(m2)return e(t,n);m2=!0;try{return R4(e,t,n)}finally{m2=!1,(Od!==null||Bd!==null)&&(M4(),C4())}}function lf(e,t){var n=e.stateNode;if(n===null)return null;var i=ly(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ue(231,t,typeof n));return n}var e1=!1;if(Ts)try{var ch={};Object.defineProperty(ch,"passive",{get:function(){e1=!0}}),window.addEventListener("test",ch,ch),window.removeEventListener("test",ch,ch)}catch{e1=!1}function g8(e,t,n,i,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var $h=!1,iv=null,rv=!1,t1=null,v8={onError:function(e){$h=!0,iv=e}};function y8(e,t,n,i,r,o,a,s,l){$h=!1,iv=null,g8.apply(v8,arguments)}function _8(e,t,n,i,r,o,a,s,l){if(y8.apply(this,arguments),$h){if($h){var c=iv;$h=!1,iv=null}else throw Error(Ue(198));rv||(rv=!0,t1=c)}}function Eu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function D4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function zS(e){if(Eu(e)!==e)throw Error(Ue(188))}function b8(e){var t=e.alternate;if(!t){if(t=Eu(e),t===null)throw Error(Ue(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return zS(r),e;if(o===i)return zS(r),t;o=o.sibling}throw Error(Ue(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,s=r.child;s;){if(s===n){a=!0,n=r,i=o;break}if(s===i){a=!0,i=r,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,i=r;break}if(s===i){a=!0,i=o,n=r;break}s=s.sibling}if(!a)throw Error(Ue(189))}}if(n.alternate!==i)throw Error(Ue(190))}if(n.tag!==3)throw Error(Ue(188));return n.stateNode.current===n?e:t}function L4(e){return e=b8(e),e!==null?O4(e):null}function O4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=O4(e);if(t!==null)return t;e=e.sibling}return null}var B4=ao.unstable_scheduleCallback,HS=ao.unstable_cancelCallback,w8=ao.unstable_shouldYield,x8=ao.unstable_requestPaint,oi=ao.unstable_now,E8=ao.unstable_getCurrentPriorityLevel,rx=ao.unstable_ImmediatePriority,F4=ao.unstable_UserBlockingPriority,ov=ao.unstable_NormalPriority,S8=ao.unstable_LowPriority,j4=ao.unstable_IdlePriority,ry=null,Ba=null;function N8(e){if(Ba&&typeof Ba.onCommitFiberRoot=="function")try{Ba.onCommitFiberRoot(ry,e,void 0,(e.current.flags&128)===128)}catch{}}var aa=Math.clz32?Math.clz32:A8,k8=Math.log,P8=Math.LN2;function A8(e){return e>>>=0,e===0?32:31-(k8(e)/P8|0)|0}var fg=64,mg=4194304;function Dh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function av(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~r;s!==0?i=Dh(s):(o&=a,o!==0&&(i=Dh(o)))}else a=n&~r,a!==0?i=Dh(a):o!==0&&(i=Dh(o));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===16&&(o&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-aa(t),r=1<<n,i|=e[n],t&=~r;return i}function T8(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function C8(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-aa(o),s=1<<a,l=r[a];l===-1?(!(s&n)||s&i)&&(r[a]=T8(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function n1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $4(){var e=fg;return fg<<=1,!(fg&4194240)&&(fg=64),e}function g2(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-aa(t),e[t]=n}function R8(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-aa(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}function ox(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-aa(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var un=0;function G4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var U4,ax,q4,z4,H4,i1=!1,gg=[],Cl=null,Rl=null,Ml=null,cf=new Map,uf=new Map,xl=[],M8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VS(e,t){switch(e){case"focusin":case"focusout":Cl=null;break;case"dragenter":case"dragleave":Rl=null;break;case"mouseover":case"mouseout":Ml=null;break;case"pointerover":case"pointerout":cf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":uf.delete(t.pointerId)}}function uh(e,t,n,i,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},t!==null&&(t=Vf(t),t!==null&&ax(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function I8(e,t,n,i,r){switch(t){case"focusin":return Cl=uh(Cl,e,t,n,i,r),!0;case"dragenter":return Rl=uh(Rl,e,t,n,i,r),!0;case"mouseover":return Ml=uh(Ml,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return cf.set(o,uh(cf.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,uf.set(o,uh(uf.get(o)||null,e,t,n,i,r)),!0}return!1}function V4(e){var t=Zc(e.target);if(t!==null){var n=Eu(t);if(n!==null){if(t=n.tag,t===13){if(t=D4(n),t!==null){e.blockedOn=t,H4(e.priority,function(){q4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function w0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=r1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Zb=i,n.target.dispatchEvent(i),Zb=null}else return t=Vf(n),t!==null&&ax(t),e.blockedOn=n,!1;t.shift()}return!0}function WS(e,t,n){w0(e)&&n.delete(t)}function D8(){i1=!1,Cl!==null&&w0(Cl)&&(Cl=null),Rl!==null&&w0(Rl)&&(Rl=null),Ml!==null&&w0(Ml)&&(Ml=null),cf.forEach(WS),uf.forEach(WS)}function dh(e,t){e.blockedOn===t&&(e.blockedOn=null,i1||(i1=!0,ao.unstable_scheduleCallback(ao.unstable_NormalPriority,D8)))}function df(e){function t(r){return dh(r,e)}if(0<gg.length){dh(gg[0],e);for(var n=1;n<gg.length;n++){var i=gg[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Cl!==null&&dh(Cl,e),Rl!==null&&dh(Rl,e),Ml!==null&&dh(Ml,e),cf.forEach(t),uf.forEach(t),n=0;n<xl.length;n++)i=xl[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<xl.length&&(n=xl[0],n.blockedOn===null);)V4(n),n.blockedOn===null&&xl.shift()}var Fd=Ds.ReactCurrentBatchConfig,sv=!0;function L8(e,t,n,i){var r=un,o=Fd.transition;Fd.transition=null;try{un=1,sx(e,t,n,i)}finally{un=r,Fd.transition=o}}function O8(e,t,n,i){var r=un,o=Fd.transition;Fd.transition=null;try{un=4,sx(e,t,n,i)}finally{un=r,Fd.transition=o}}function sx(e,t,n,i){if(sv){var r=r1(e,t,n,i);if(r===null)k2(e,t,i,lv,n),VS(e,i);else if(I8(r,e,t,n,i))i.stopPropagation();else if(VS(e,i),t&4&&-1<M8.indexOf(e)){for(;r!==null;){var o=Vf(r);if(o!==null&&U4(o),o=r1(e,t,n,i),o===null&&k2(e,t,i,lv,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else k2(e,t,i,null,n)}}var lv=null;function r1(e,t,n,i){if(lv=null,e=ix(i),e=Zc(e),e!==null)if(t=Eu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=D4(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return lv=e,null}function W4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E8()){case rx:return 1;case F4:return 4;case ov:case S8:return 16;case j4:return 536870912;default:return 16}default:return 16}}var Nl=null,lx=null,x0=null;function K4(){if(x0)return x0;var e,t=lx,n=t.length,i,r="value"in Nl?Nl.value:Nl.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[o-i];i++);return x0=r.slice(e,1<i?1-i:void 0)}function E0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vg(){return!0}function KS(){return!1}function lo(e){function t(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?vg:KS,this.isPropagationStopped=KS,this}return jn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vg)},persist:function(){},isPersistent:vg}),t}var pp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cx=lo(pp),Hf=jn({},pp,{view:0,detail:0}),B8=lo(Hf),v2,y2,ph,oy=jn({},Hf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ux,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ph&&(ph&&e.type==="mousemove"?(v2=e.screenX-ph.screenX,y2=e.screenY-ph.screenY):y2=v2=0,ph=e),v2)},movementY:function(e){return"movementY"in e?e.movementY:y2}}),YS=lo(oy),F8=jn({},oy,{dataTransfer:0}),j8=lo(F8),$8=jn({},Hf,{relatedTarget:0}),_2=lo($8),G8=jn({},pp,{animationName:0,elapsedTime:0,pseudoElement:0}),U8=lo(G8),q8=jn({},pp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),z8=lo(q8),H8=jn({},pp,{data:0}),JS=lo(H8),V8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=K8[e])?!!t[e]:!1}function ux(){return Y8}var J8=jn({},Hf,{key:function(e){if(e.key){var t=V8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=E0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?W8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ux,charCode:function(e){return e.type==="keypress"?E0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?E0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),X8=lo(J8),Z8=jn({},oy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XS=lo(Z8),Q8=jn({},Hf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ux}),eB=lo(Q8),tB=jn({},pp,{propertyName:0,elapsedTime:0,pseudoElement:0}),nB=lo(tB),iB=jn({},oy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rB=lo(iB),oB=[9,13,27,32],dx=Ts&&"CompositionEvent"in window,Gh=null;Ts&&"documentMode"in document&&(Gh=document.documentMode);var aB=Ts&&"TextEvent"in window&&!Gh,Y4=Ts&&(!dx||Gh&&8<Gh&&11>=Gh),ZS=" ",QS=!1;function J4(e,t){switch(e){case"keyup":return oB.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ed=!1;function sB(e,t){switch(e){case"compositionend":return X4(t);case"keypress":return t.which!==32?null:(QS=!0,ZS);case"textInput":return e=t.data,e===ZS&&QS?null:e;default:return null}}function lB(e,t){if(Ed)return e==="compositionend"||!dx&&J4(e,t)?(e=K4(),x0=lx=Nl=null,Ed=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Y4&&t.locale!=="ko"?null:t.data;default:return null}}var cB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cB[e.type]:t==="textarea"}function Z4(e,t,n,i){T4(i),t=cv(t,"onChange"),0<t.length&&(n=new cx("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Uh=null,pf=null;function uB(e){cC(e,0)}function ay(e){var t=kd(e);if(x4(t))return e}function dB(e,t){if(e==="change")return t}var Q4=!1;if(Ts){var b2;if(Ts){var w2="oninput"in document;if(!w2){var tN=document.createElement("div");tN.setAttribute("oninput","return;"),w2=typeof tN.oninput=="function"}b2=w2}else b2=!1;Q4=b2&&(!document.documentMode||9<document.documentMode)}function nN(){Uh&&(Uh.detachEvent("onpropertychange",eC),pf=Uh=null)}function eC(e){if(e.propertyName==="value"&&ay(pf)){var t=[];Z4(t,pf,e,ix(e)),I4(uB,t)}}function pB(e,t,n){e==="focusin"?(nN(),Uh=t,pf=n,Uh.attachEvent("onpropertychange",eC)):e==="focusout"&&nN()}function hB(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ay(pf)}function fB(e,t){if(e==="click")return ay(t)}function mB(e,t){if(e==="input"||e==="change")return ay(t)}function gB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ua=typeof Object.is=="function"?Object.is:gB;function hf(e,t){if(ua(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!$b.call(t,r)||!ua(e[r],t[r]))return!1}return!0}function iN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rN(e,t){var n=iN(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iN(n)}}function tC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nC(){for(var e=window,t=nv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=nv(e.document)}return t}function px(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vB(e){var t=nC(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&tC(n.ownerDocument.documentElement,n)){if(i!==null&&px(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=rN(n,o);var a=rN(n,i);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yB=Ts&&"documentMode"in document&&11>=document.documentMode,Sd=null,o1=null,qh=null,a1=!1;function oN(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;a1||Sd==null||Sd!==nv(i)||(i=Sd,"selectionStart"in i&&px(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),qh&&hf(qh,i)||(qh=i,i=cv(o1,"onSelect"),0<i.length&&(t=new cx("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Sd)))}function yg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nd={animationend:yg("Animation","AnimationEnd"),animationiteration:yg("Animation","AnimationIteration"),animationstart:yg("Animation","AnimationStart"),transitionend:yg("Transition","TransitionEnd")},x2={},iC={};Ts&&(iC=document.createElement("div").style,"AnimationEvent"in window||(delete Nd.animationend.animation,delete Nd.animationiteration.animation,delete Nd.animationstart.animation),"TransitionEvent"in window||delete Nd.transitionend.transition);function sy(e){if(x2[e])return x2[e];if(!Nd[e])return e;var t=Nd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in iC)return x2[e]=t[n];return e}var rC=sy("animationend"),oC=sy("animationiteration"),aC=sy("animationstart"),sC=sy("transitionend"),lC=new Map,aN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vl(e,t){lC.set(e,t),xu(t,[e])}for(var E2=0;E2<aN.length;E2++){var S2=aN[E2],_B=S2.toLowerCase(),bB=S2[0].toUpperCase()+S2.slice(1);Vl(_B,"on"+bB)}Vl(rC,"onAnimationEnd");Vl(oC,"onAnimationIteration");Vl(aC,"onAnimationStart");Vl("dblclick","onDoubleClick");Vl("focusin","onFocus");Vl("focusout","onBlur");Vl(sC,"onTransitionEnd");Vd("onMouseEnter",["mouseout","mouseover"]);Vd("onMouseLeave",["mouseout","mouseover"]);Vd("onPointerEnter",["pointerout","pointerover"]);Vd("onPointerLeave",["pointerout","pointerover"]);xu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xu("onBeforeInput",["compositionend","keypress","textInput","paste"]);xu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lh));function sN(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,_8(i,t,void 0,e),e.currentTarget=null}function cC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;sN(r,s,c),o=l}else for(a=0;a<i.length;a++){if(s=i[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;sN(r,s,c),o=l}}}if(rv)throw e=t1,rv=!1,t1=null,e}function xn(e,t){var n=t[d1];n===void 0&&(n=t[d1]=new Set);var i=e+"__bubble";n.has(i)||(uC(t,e,2,!1),n.add(i))}function N2(e,t,n){var i=0;t&&(i|=4),uC(n,e,i,t)}var _g="_reactListening"+Math.random().toString(36).slice(2);function ff(e){if(!e[_g]){e[_g]=!0,v4.forEach(function(n){n!=="selectionchange"&&(wB.has(n)||N2(n,!1,e),N2(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_g]||(t[_g]=!0,N2("selectionchange",!1,t))}}function uC(e,t,n,i){switch(W4(t)){case 1:var r=L8;break;case 4:r=O8;break;default:r=sx}n=r.bind(null,t,n,e),r=void 0,!e1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function k2(e,t,n,i,r){var o=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var s=i.stateNode.containerInfo;if(s===r||s.nodeType===8&&s.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;s!==null;){if(a=Zc(s),a===null)return;if(l=a.tag,l===5||l===6){i=o=a;continue e}s=s.parentNode}}i=i.return}I4(function(){var c=o,u=ix(n),d=[];e:{var h=lC.get(e);if(h!==void 0){var p=cx,m=e;switch(e){case"keypress":if(E0(n)===0)break e;case"keydown":case"keyup":p=X8;break;case"focusin":m="focus",p=_2;break;case"focusout":m="blur",p=_2;break;case"beforeblur":case"afterblur":p=_2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=YS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=j8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=eB;break;case rC:case oC:case aC:p=U8;break;case sC:p=nB;break;case"scroll":p=B8;break;case"wheel":p=rB;break;case"copy":case"cut":case"paste":p=z8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=XS}var v=(t&4)!==0,_=!v&&e==="scroll",b=v?h!==null?h+"Capture":null:h;v=[];for(var E=c,w;E!==null;){w=E;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,b!==null&&(x=lf(E,b),x!=null&&v.push(mf(E,x,w)))),_)break;E=E.return}0<v.length&&(h=new p(h,m,null,n,u),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Zb&&(m=n.relatedTarget||n.fromElement)&&(Zc(m)||m[Cs]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Zc(m):null,m!==null&&(_=Eu(m),m!==_||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(v=YS,x="onMouseLeave",b="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(v=XS,x="onPointerLeave",b="onPointerEnter",E="pointer"),_=p==null?h:kd(p),w=m==null?h:kd(m),h=new v(x,E+"leave",p,n,u),h.target=_,h.relatedTarget=w,x=null,Zc(u)===c&&(v=new v(b,E+"enter",m,n,u),v.target=w,v.relatedTarget=_,x=v),_=x,p&&m)t:{for(v=p,b=m,E=0,w=v;w;w=Ju(w))E++;for(w=0,x=b;x;x=Ju(x))w++;for(;0<E-w;)v=Ju(v),E--;for(;0<w-E;)b=Ju(b),w--;for(;E--;){if(v===b||b!==null&&v===b.alternate)break t;v=Ju(v),b=Ju(b)}v=null}else v=null;p!==null&&lN(d,h,p,v,!1),m!==null&&_!==null&&lN(d,_,m,v,!0)}}e:{if(h=c?kd(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var M=dB;else if(eN(h))if(Q4)M=mB;else{M=hB;var B=pB}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(M=fB);if(M&&(M=M(e,c))){Z4(d,M,n,u);break e}B&&B(e,h,c),e==="focusout"&&(B=h._wrapperState)&&B.controlled&&h.type==="number"&&Wb(h,"number",h.value)}switch(B=c?kd(c):window,e){case"focusin":(eN(B)||B.contentEditable==="true")&&(Sd=B,o1=c,qh=null);break;case"focusout":qh=o1=Sd=null;break;case"mousedown":a1=!0;break;case"contextmenu":case"mouseup":case"dragend":a1=!1,oN(d,n,u);break;case"selectionchange":if(yB)break;case"keydown":case"keyup":oN(d,n,u)}var H;if(dx)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ed?J4(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Y4&&n.locale!=="ko"&&(Ed||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ed&&(H=K4()):(Nl=u,lx="value"in Nl?Nl.value:Nl.textContent,Ed=!0)),B=cv(c,R),0<B.length&&(R=new JS(R,e,null,n,u),d.push({event:R,listeners:B}),H?R.data=H:(H=X4(n),H!==null&&(R.data=H)))),(H=aB?sB(e,n):lB(e,n))&&(c=cv(c,"onBeforeInput"),0<c.length&&(u=new JS("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=H))}cC(d,t)})}function mf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function cv(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=lf(e,n),o!=null&&i.unshift(mf(e,o,r)),o=lf(e,t),o!=null&&i.push(mf(e,o,r))),e=e.return}return i}function Ju(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lN(e,t,n,i,r){for(var o=t._reactName,a=[];n!==null&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===i)break;s.tag===5&&c!==null&&(s=c,r?(l=lf(n,o),l!=null&&a.unshift(mf(n,l,s))):r||(l=lf(n,o),l!=null&&a.push(mf(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var xB=/\r\n?/g,EB=/\u0000|\uFFFD/g;function cN(e){return(typeof e=="string"?e:""+e).replace(xB,`
`).replace(EB,"")}function bg(e,t,n){if(t=cN(t),cN(e)!==t&&n)throw Error(Ue(425))}function uv(){}var s1=null,l1=null;function c1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var u1=typeof setTimeout=="function"?setTimeout:void 0,SB=typeof clearTimeout=="function"?clearTimeout:void 0,uN=typeof Promise=="function"?Promise:void 0,NB=typeof queueMicrotask=="function"?queueMicrotask:typeof uN<"u"?function(e){return uN.resolve(null).then(e).catch(kB)}:u1;function kB(e){setTimeout(function(){throw e})}function P2(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),df(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);df(t)}function Il(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var hp=Math.random().toString(36).slice(2),Da="__reactFiber$"+hp,gf="__reactProps$"+hp,Cs="__reactContainer$"+hp,d1="__reactEvents$"+hp,PB="__reactListeners$"+hp,AB="__reactHandles$"+hp;function Zc(e){var t=e[Da];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cs]||n[Da]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dN(e);e!==null;){if(n=e[Da])return n;e=dN(e)}return t}e=n,n=e.parentNode}return null}function Vf(e){return e=e[Da]||e[Cs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ue(33))}function ly(e){return e[gf]||null}var p1=[],Pd=-1;function Wl(e){return{current:e}}function Sn(e){0>Pd||(e.current=p1[Pd],p1[Pd]=null,Pd--)}function yn(e,t){Pd++,p1[Pd]=e.current,e.current=t}var Gl={},fr=Wl(Gl),Dr=Wl(!1),cu=Gl;function Wd(e,t){var n=e.type.contextTypes;if(!n)return Gl;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=t[o];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Lr(e){return e=e.childContextTypes,e!=null}function dv(){Sn(Dr),Sn(fr)}function pN(e,t,n){if(fr.current!==Gl)throw Error(Ue(168));yn(fr,t),yn(Dr,n)}function dC(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(Ue(108,p8(e)||"Unknown",r));return jn({},n,i)}function pv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gl,cu=fr.current,yn(fr,e),yn(Dr,Dr.current),!0}function hN(e,t,n){var i=e.stateNode;if(!i)throw Error(Ue(169));n?(e=dC(e,t,cu),i.__reactInternalMemoizedMergedChildContext=e,Sn(Dr),Sn(fr),yn(fr,e)):Sn(Dr),yn(Dr,n)}var vs=null,cy=!1,A2=!1;function pC(e){vs===null?vs=[e]:vs.push(e)}function TB(e){cy=!0,pC(e)}function Kl(){if(!A2&&vs!==null){A2=!0;var e=0,t=un;try{var n=vs;for(un=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}vs=null,cy=!1}catch(r){throw vs!==null&&(vs=vs.slice(e+1)),B4(rx,Kl),r}finally{un=t,A2=!1}}return null}var Ad=[],Td=0,hv=null,fv=0,ko=[],Po=0,uu=null,ws=1,xs="";function Fc(e,t){Ad[Td++]=fv,Ad[Td++]=hv,hv=e,fv=t}function hC(e,t,n){ko[Po++]=ws,ko[Po++]=xs,ko[Po++]=uu,uu=e;var i=ws;e=xs;var r=32-aa(i)-1;i&=~(1<<r),n+=1;var o=32-aa(t)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,ws=1<<32-aa(t)+r|n<<r|i,xs=o+e}else ws=1<<o|n<<r|i,xs=e}function hx(e){e.return!==null&&(Fc(e,1),hC(e,1,0))}function fx(e){for(;e===hv;)hv=Ad[--Td],Ad[Td]=null,fv=Ad[--Td],Ad[Td]=null;for(;e===uu;)uu=ko[--Po],ko[Po]=null,xs=ko[--Po],ko[Po]=null,ws=ko[--Po],ko[Po]=null}var io=null,to=null,Mn=!1,oa=null;function fC(e,t){var n=To(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function fN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,io=e,to=Il(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,io=e,to=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=uu!==null?{id:ws,overflow:xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=To(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,io=e,to=null,!0):!1;default:return!1}}function h1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function f1(e){if(Mn){var t=to;if(t){var n=t;if(!fN(e,t)){if(h1(e))throw Error(Ue(418));t=Il(n.nextSibling);var i=io;t&&fN(e,t)?fC(i,n):(e.flags=e.flags&-4097|2,Mn=!1,io=e)}}else{if(h1(e))throw Error(Ue(418));e.flags=e.flags&-4097|2,Mn=!1,io=e}}}function mN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;io=e}function wg(e){if(e!==io)return!1;if(!Mn)return mN(e),Mn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!c1(e.type,e.memoizedProps)),t&&(t=to)){if(h1(e))throw mC(),Error(Ue(418));for(;t;)fC(e,t),t=Il(t.nextSibling)}if(mN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){to=Il(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}to=null}}else to=io?Il(e.stateNode.nextSibling):null;return!0}function mC(){for(var e=to;e;)e=Il(e.nextSibling)}function Kd(){to=io=null,Mn=!1}function mx(e){oa===null?oa=[e]:oa.push(e)}var CB=Ds.ReactCurrentBatchConfig;function hh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ue(309));var i=n.stateNode}if(!i)throw Error(Ue(147,e));var r=i,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=r.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Ue(284));if(!n._owner)throw Error(Ue(290,e))}return e}function xg(e,t){throw e=Object.prototype.toString.call(t),Error(Ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gN(e){var t=e._init;return t(e._payload)}function gC(e){function t(b,E){if(e){var w=b.deletions;w===null?(b.deletions=[E],b.flags|=16):w.push(E)}}function n(b,E){if(!e)return null;for(;E!==null;)t(b,E),E=E.sibling;return null}function i(b,E){for(b=new Map;E!==null;)E.key!==null?b.set(E.key,E):b.set(E.index,E),E=E.sibling;return b}function r(b,E){return b=Bl(b,E),b.index=0,b.sibling=null,b}function o(b,E,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<E?(b.flags|=2,E):w):(b.flags|=2,E)):(b.flags|=1048576,E)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function s(b,E,w,x){return E===null||E.tag!==6?(E=L2(w,b.mode,x),E.return=b,E):(E=r(E,w),E.return=b,E)}function l(b,E,w,x){var M=w.type;return M===xd?u(b,E,w.props.children,x,w.key):E!==null&&(E.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===yl&&gN(M)===E.type)?(x=r(E,w.props),x.ref=hh(b,E,w),x.return=b,x):(x=C0(w.type,w.key,w.props,null,b.mode,x),x.ref=hh(b,E,w),x.return=b,x)}function c(b,E,w,x){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=O2(w,b.mode,x),E.return=b,E):(E=r(E,w.children||[]),E.return=b,E)}function u(b,E,w,x,M){return E===null||E.tag!==7?(E=au(w,b.mode,x,M),E.return=b,E):(E=r(E,w),E.return=b,E)}function d(b,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=L2(""+E,b.mode,w),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case dg:return w=C0(E.type,E.key,E.props,null,b.mode,w),w.ref=hh(b,null,E),w.return=b,w;case wd:return E=O2(E,b.mode,w),E.return=b,E;case yl:var x=E._init;return d(b,x(E._payload),w)}if(Ih(E)||lh(E))return E=au(E,b.mode,w,null),E.return=b,E;xg(b,E)}return null}function h(b,E,w,x){var M=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return M!==null?null:s(b,E,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dg:return w.key===M?l(b,E,w,x):null;case wd:return w.key===M?c(b,E,w,x):null;case yl:return M=w._init,h(b,E,M(w._payload),x)}if(Ih(w)||lh(w))return M!==null?null:u(b,E,w,x,null);xg(b,w)}return null}function p(b,E,w,x,M){if(typeof x=="string"&&x!==""||typeof x=="number")return b=b.get(w)||null,s(E,b,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case dg:return b=b.get(x.key===null?w:x.key)||null,l(E,b,x,M);case wd:return b=b.get(x.key===null?w:x.key)||null,c(E,b,x,M);case yl:var B=x._init;return p(b,E,w,B(x._payload),M)}if(Ih(x)||lh(x))return b=b.get(w)||null,u(E,b,x,M,null);xg(E,x)}return null}function m(b,E,w,x){for(var M=null,B=null,H=E,R=E=0,O=null;H!==null&&R<w.length;R++){H.index>R?(O=H,H=null):O=H.sibling;var D=h(b,H,w[R],x);if(D===null){H===null&&(H=O);break}e&&H&&D.alternate===null&&t(b,H),E=o(D,E,R),B===null?M=D:B.sibling=D,B=D,H=O}if(R===w.length)return n(b,H),Mn&&Fc(b,R),M;if(H===null){for(;R<w.length;R++)H=d(b,w[R],x),H!==null&&(E=o(H,E,R),B===null?M=H:B.sibling=H,B=H);return Mn&&Fc(b,R),M}for(H=i(b,H);R<w.length;R++)O=p(H,b,R,w[R],x),O!==null&&(e&&O.alternate!==null&&H.delete(O.key===null?R:O.key),E=o(O,E,R),B===null?M=O:B.sibling=O,B=O);return e&&H.forEach(function(A){return t(b,A)}),Mn&&Fc(b,R),M}function v(b,E,w,x){var M=lh(w);if(typeof M!="function")throw Error(Ue(150));if(w=M.call(w),w==null)throw Error(Ue(151));for(var B=M=null,H=E,R=E=0,O=null,D=w.next();H!==null&&!D.done;R++,D=w.next()){H.index>R?(O=H,H=null):O=H.sibling;var A=h(b,H,D.value,x);if(A===null){H===null&&(H=O);break}e&&H&&A.alternate===null&&t(b,H),E=o(A,E,R),B===null?M=A:B.sibling=A,B=A,H=O}if(D.done)return n(b,H),Mn&&Fc(b,R),M;if(H===null){for(;!D.done;R++,D=w.next())D=d(b,D.value,x),D!==null&&(E=o(D,E,R),B===null?M=D:B.sibling=D,B=D);return Mn&&Fc(b,R),M}for(H=i(b,H);!D.done;R++,D=w.next())D=p(H,b,R,D.value,x),D!==null&&(e&&D.alternate!==null&&H.delete(D.key===null?R:D.key),E=o(D,E,R),B===null?M=D:B.sibling=D,B=D);return e&&H.forEach(function(L){return t(b,L)}),Mn&&Fc(b,R),M}function _(b,E,w,x){if(typeof w=="object"&&w!==null&&w.type===xd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case dg:e:{for(var M=w.key,B=E;B!==null;){if(B.key===M){if(M=w.type,M===xd){if(B.tag===7){n(b,B.sibling),E=r(B,w.props.children),E.return=b,b=E;break e}}else if(B.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===yl&&gN(M)===B.type){n(b,B.sibling),E=r(B,w.props),E.ref=hh(b,B,w),E.return=b,b=E;break e}n(b,B);break}else t(b,B);B=B.sibling}w.type===xd?(E=au(w.props.children,b.mode,x,w.key),E.return=b,b=E):(x=C0(w.type,w.key,w.props,null,b.mode,x),x.ref=hh(b,E,w),x.return=b,b=x)}return a(b);case wd:e:{for(B=w.key;E!==null;){if(E.key===B)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(b,E.sibling),E=r(E,w.children||[]),E.return=b,b=E;break e}else{n(b,E);break}else t(b,E);E=E.sibling}E=O2(w,b.mode,x),E.return=b,b=E}return a(b);case yl:return B=w._init,_(b,E,B(w._payload),x)}if(Ih(w))return m(b,E,w,x);if(lh(w))return v(b,E,w,x);xg(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(n(b,E.sibling),E=r(E,w),E.return=b,b=E):(n(b,E),E=L2(w,b.mode,x),E.return=b,b=E),a(b)):n(b,E)}return _}var Yd=gC(!0),vC=gC(!1),mv=Wl(null),gv=null,Cd=null,gx=null;function vx(){gx=Cd=gv=null}function yx(e){var t=mv.current;Sn(mv),e._currentValue=t}function m1(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function jd(e,t){gv=e,gx=Cd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mr=!0),e.firstContext=null)}function Mo(e){var t=e._currentValue;if(gx!==e)if(e={context:e,memoizedValue:t,next:null},Cd===null){if(gv===null)throw Error(Ue(308));Cd=e,gv.dependencies={lanes:0,firstContext:e}}else Cd=Cd.next=e;return t}var Qc=null;function _x(e){Qc===null?Qc=[e]:Qc.push(e)}function yC(e,t,n,i){var r=t.interleaved;return r===null?(n.next=n,_x(t)):(n.next=r.next,r.next=n),t.interleaved=n,Rs(e,i)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var _l=!1;function bx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _C(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ns(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Dl(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Qt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Rs(e,n)}return r=i.interleaved,r===null?(t.next=t,_x(i)):(t.next=r.next,r.next=t),i.interleaved=t,Rs(e,n)}function S0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ox(e,n)}}function vN(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vv(e,t,n,i){var r=e.updateQueue;_l=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(s!==null){r.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=r.baseState;a=0,u=c=l=null,s=o;do{var h=s.lane,p=s.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,v=s;switch(h=t,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=jn({},d,h);break e;case 2:_l=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=r.effects,h===null?r.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,a|=h;if(s=s.next,s===null){if(s=r.shared.pending,s===null)break;h=s,s=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else o===null&&(r.shared.lanes=0);pu|=a,e.lanes=a,e.memoizedState=d}}function yN(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Ue(191,r));r.call(i)}}}var Wf={},Fa=Wl(Wf),vf=Wl(Wf),yf=Wl(Wf);function eu(e){if(e===Wf)throw Error(Ue(174));return e}function wx(e,t){switch(yn(yf,t),yn(vf,e),yn(Fa,Wf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Yb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Yb(t,e)}Sn(Fa),yn(Fa,t)}function Jd(){Sn(Fa),Sn(vf),Sn(yf)}function bC(e){eu(yf.current);var t=eu(Fa.current),n=Yb(t,e.type);t!==n&&(yn(vf,e),yn(Fa,n))}function xx(e){vf.current===e&&(Sn(Fa),Sn(vf))}var Ln=Wl(0);function yv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var T2=[];function Ex(){for(var e=0;e<T2.length;e++)T2[e]._workInProgressVersionPrimary=null;T2.length=0}var N0=Ds.ReactCurrentDispatcher,C2=Ds.ReactCurrentBatchConfig,du=0,Bn=null,Pi=null,Ii=null,_v=!1,zh=!1,_f=0,RB=0;function or(){throw Error(Ue(321))}function Sx(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ua(e[n],t[n]))return!1;return!0}function Nx(e,t,n,i,r,o){if(du=o,Bn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N0.current=e===null||e.memoizedState===null?LB:OB,e=n(i,r),zh){o=0;do{if(zh=!1,_f=0,25<=o)throw Error(Ue(301));o+=1,Ii=Pi=null,t.updateQueue=null,N0.current=BB,e=n(i,r)}while(zh)}if(N0.current=bv,t=Pi!==null&&Pi.next!==null,du=0,Ii=Pi=Bn=null,_v=!1,t)throw Error(Ue(300));return e}function kx(){var e=_f!==0;return _f=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ii===null?Bn.memoizedState=Ii=e:Ii=Ii.next=e,Ii}function Io(){if(Pi===null){var e=Bn.alternate;e=e!==null?e.memoizedState:null}else e=Pi.next;var t=Ii===null?Bn.memoizedState:Ii.next;if(t!==null)Ii=t,Pi=e;else{if(e===null)throw Error(Ue(310));Pi=e,e={memoizedState:Pi.memoizedState,baseState:Pi.baseState,baseQueue:Pi.baseQueue,queue:Pi.queue,next:null},Ii===null?Bn.memoizedState=Ii=e:Ii=Ii.next=e}return Ii}function bf(e,t){return typeof t=="function"?t(e):t}function R2(e){var t=Io(),n=t.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=e;var i=Pi,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var s=a=null,l=null,c=o;do{var u=c.lane;if((du&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=d,a=i):l=l.next=d,Bn.lanes|=u,pu|=u}c=c.next}while(c!==null&&c!==o);l===null?a=i:l.next=s,ua(i,t.memoizedState)||(Mr=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){r=e;do o=r.lane,Bn.lanes|=o,pu|=o,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function M2(e){var t=Io(),n=t.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=e(o,a.action),a=a.next;while(a!==r);ua(o,t.memoizedState)||(Mr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function wC(){}function xC(e,t){var n=Bn,i=Io(),r=t(),o=!ua(i.memoizedState,r);if(o&&(i.memoizedState=r,Mr=!0),i=i.queue,Px(NC.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||Ii!==null&&Ii.memoizedState.tag&1){if(n.flags|=2048,wf(9,SC.bind(null,n,i,r,t),void 0,null),Bi===null)throw Error(Ue(349));du&30||EC(n,t,r)}return r}function EC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function SC(e,t,n,i){t.value=n,t.getSnapshot=i,kC(t)&&PC(e)}function NC(e,t,n){return n(function(){kC(t)&&PC(e)})}function kC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ua(e,n)}catch{return!0}}function PC(e){var t=Rs(e,1);t!==null&&sa(t,e,1,-1)}function _N(e){var t=Ca();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bf,lastRenderedState:e},t.queue=e,e=e.dispatch=DB.bind(null,Bn,e),[t.memoizedState,e]}function wf(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function AC(){return Io().memoizedState}function k0(e,t,n,i){var r=Ca();Bn.flags|=e,r.memoizedState=wf(1|t,n,void 0,i===void 0?null:i)}function uy(e,t,n,i){var r=Io();i=i===void 0?null:i;var o=void 0;if(Pi!==null){var a=Pi.memoizedState;if(o=a.destroy,i!==null&&Sx(i,a.deps)){r.memoizedState=wf(t,n,o,i);return}}Bn.flags|=e,r.memoizedState=wf(1|t,n,o,i)}function bN(e,t){return k0(8390656,8,e,t)}function Px(e,t){return uy(2048,8,e,t)}function TC(e,t){return uy(4,2,e,t)}function CC(e,t){return uy(4,4,e,t)}function RC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function MC(e,t,n){return n=n!=null?n.concat([e]):null,uy(4,4,RC.bind(null,t,e),n)}function Ax(){}function IC(e,t){var n=Io();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Sx(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function DC(e,t){var n=Io();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Sx(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function LC(e,t,n){return du&21?(ua(n,t)||(n=$4(),Bn.lanes|=n,pu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mr=!0),e.memoizedState=n)}function MB(e,t){var n=un;un=n!==0&&4>n?n:4,e(!0);var i=C2.transition;C2.transition={};try{e(!1),t()}finally{un=n,C2.transition=i}}function OC(){return Io().memoizedState}function IB(e,t,n){var i=Ol(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},BC(e))FC(t,n);else if(n=yC(e,t,n,i),n!==null){var r=Er();sa(n,e,i,r),jC(n,t,i)}}function DB(e,t,n){var i=Ol(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(BC(e))FC(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(r.hasEagerState=!0,r.eagerState=s,ua(s,a)){var l=t.interleaved;l===null?(r.next=r,_x(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}n=yC(e,t,r,i),n!==null&&(r=Er(),sa(n,e,i,r),jC(n,t,i))}}function BC(e){var t=e.alternate;return e===Bn||t!==null&&t===Bn}function FC(e,t){zh=_v=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function jC(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ox(e,n)}}var bv={readContext:Mo,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},LB={readContext:Mo,useCallback:function(e,t){return Ca().memoizedState=[e,t===void 0?null:t],e},useContext:Mo,useEffect:bN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,k0(4194308,4,RC.bind(null,t,e),n)},useLayoutEffect:function(e,t){return k0(4194308,4,e,t)},useInsertionEffect:function(e,t){return k0(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ca();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=IB.bind(null,Bn,e),[i.memoizedState,e]},useRef:function(e){var t=Ca();return e={current:e},t.memoizedState=e},useState:_N,useDebugValue:Ax,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=_N(!1),t=e[0];return e=MB.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Bn,r=Ca();if(Mn){if(n===void 0)throw Error(Ue(407));n=n()}else{if(n=t(),Bi===null)throw Error(Ue(349));du&30||EC(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,bN(NC.bind(null,i,o,e),[e]),i.flags|=2048,wf(9,SC.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Bi.identifierPrefix;if(Mn){var n=xs,i=ws;n=(i&~(1<<32-aa(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=_f++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=RB++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},OB={readContext:Mo,useCallback:IC,useContext:Mo,useEffect:Px,useImperativeHandle:MC,useInsertionEffect:TC,useLayoutEffect:CC,useMemo:DC,useReducer:R2,useRef:AC,useState:function(){return R2(bf)},useDebugValue:Ax,useDeferredValue:function(e){var t=Io();return LC(t,Pi.memoizedState,e)},useTransition:function(){var e=R2(bf)[0],t=Io().memoizedState;return[e,t]},useMutableSource:wC,useSyncExternalStore:xC,useId:OC,unstable_isNewReconciler:!1},BB={readContext:Mo,useCallback:IC,useContext:Mo,useEffect:Px,useImperativeHandle:MC,useInsertionEffect:TC,useLayoutEffect:CC,useMemo:DC,useReducer:M2,useRef:AC,useState:function(){return M2(bf)},useDebugValue:Ax,useDeferredValue:function(e){var t=Io();return Pi===null?t.memoizedState=e:LC(t,Pi.memoizedState,e)},useTransition:function(){var e=M2(bf)[0],t=Io().memoizedState;return[e,t]},useMutableSource:wC,useSyncExternalStore:xC,useId:OC,unstable_isNewReconciler:!1};function ta(e,t){if(e&&e.defaultProps){t=jn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function g1(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:jn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var dy={isMounted:function(e){return(e=e._reactInternals)?Eu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Er(),r=Ol(e),o=Ns(i,r);o.payload=t,n!=null&&(o.callback=n),t=Dl(e,o,r),t!==null&&(sa(t,e,r,i),S0(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Er(),r=Ol(e),o=Ns(i,r);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Dl(e,o,r),t!==null&&(sa(t,e,r,i),S0(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Er(),i=Ol(e),r=Ns(n,i);r.tag=2,t!=null&&(r.callback=t),t=Dl(e,r,i),t!==null&&(sa(t,e,i,n),S0(t,e,i))}};function wN(e,t,n,i,r,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,a):t.prototype&&t.prototype.isPureReactComponent?!hf(n,i)||!hf(r,o):!0}function $C(e,t,n){var i=!1,r=Gl,o=t.contextType;return typeof o=="object"&&o!==null?o=Mo(o):(r=Lr(t)?cu:fr.current,i=t.contextTypes,o=(i=i!=null)?Wd(e,r):Gl),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dy,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function xN(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&dy.enqueueReplaceState(t,t.state,null)}function v1(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},bx(e);var o=t.contextType;typeof o=="object"&&o!==null?r.context=Mo(o):(o=Lr(t)?cu:fr.current,r.context=Wd(e,o)),r.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(g1(e,t,o,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&dy.enqueueReplaceState(r,r.state,null),vv(e,n,r,i),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Xd(e,t){try{var n="",i=t;do n+=d8(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:r,digest:null}}function I2(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function y1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var FB=typeof WeakMap=="function"?WeakMap:Map;function GC(e,t,n){n=Ns(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){xv||(xv=!0,A1=i),y1(e,t)},n}function UC(e,t,n){n=Ns(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){y1(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){y1(e,t),typeof i!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function EN(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new FB;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=ZB.bind(null,e,t,n),t.then(e,e))}function SN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function NN(e,t,n,i,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ns(-1,1),t.tag=2,Dl(n,t,1))),n.lanes|=1),e)}var jB=Ds.ReactCurrentOwner,Mr=!1;function wr(e,t,n,i){t.child=e===null?vC(t,null,n,i):Yd(t,e.child,n,i)}function kN(e,t,n,i,r){n=n.render;var o=t.ref;return jd(t,r),i=Nx(e,t,n,i,o,r),n=kx(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ms(e,t,r)):(Mn&&n&&hx(t),t.flags|=1,wr(e,t,i,r),t.child)}function PN(e,t,n,i,r){if(e===null){var o=n.type;return typeof o=="function"&&!Ox(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,qC(e,t,o,i,r)):(e=C0(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:hf,n(a,i)&&e.ref===t.ref)return Ms(e,t,r)}return t.flags|=1,e=Bl(o,i),e.ref=t.ref,e.return=t,t.child=e}function qC(e,t,n,i,r){if(e!==null){var o=e.memoizedProps;if(hf(o,i)&&e.ref===t.ref)if(Mr=!1,t.pendingProps=i=o,(e.lanes&r)!==0)e.flags&131072&&(Mr=!0);else return t.lanes=e.lanes,Ms(e,t,r)}return _1(e,t,n,i,r)}function zC(e,t,n){var i=t.pendingProps,r=i.children,o=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(Md,Zr),Zr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yn(Md,Zr),Zr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,yn(Md,Zr),Zr|=i}else o!==null?(i=o.baseLanes|n,t.memoizedState=null):i=n,yn(Md,Zr),Zr|=i;return wr(e,t,r,n),t.child}function HC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _1(e,t,n,i,r){var o=Lr(n)?cu:fr.current;return o=Wd(t,o),jd(t,r),n=Nx(e,t,n,i,o,r),i=kx(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ms(e,t,r)):(Mn&&i&&hx(t),t.flags|=1,wr(e,t,n,r),t.child)}function AN(e,t,n,i,r){if(Lr(n)){var o=!0;pv(t)}else o=!1;if(jd(t,r),t.stateNode===null)P0(e,t),$C(t,n,i),v1(t,n,i,r),i=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Mo(c):(c=Lr(n)?cu:fr.current,c=Wd(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==i||l!==c)&&xN(t,a,i,c),_l=!1;var h=t.memoizedState;a.state=h,vv(t,i,a,r),l=t.memoizedState,s!==i||h!==l||Dr.current||_l?(typeof u=="function"&&(g1(t,n,u,i),l=t.memoizedState),(s=_l||wN(t,n,s,i,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,_C(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ta(t.type,s),a.props=c,d=t.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Mo(l):(l=Lr(n)?cu:fr.current,l=Wd(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==l)&&xN(t,a,i,l),_l=!1,h=t.memoizedState,a.state=h,vv(t,i,a,r);var m=t.memoizedState;s!==d||h!==m||Dr.current||_l?(typeof p=="function"&&(g1(t,n,p,i),m=t.memoizedState),(c=_l||wN(t,n,c,i,h,m,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),a.props=i,a.state=m,a.context=l,i=c):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return b1(e,t,n,i,o,r)}function b1(e,t,n,i,r,o){HC(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return r&&hN(t,n,!1),Ms(e,t,o);i=t.stateNode,jB.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=Yd(t,e.child,null,o),t.child=Yd(t,null,s,o)):wr(e,t,s,o),t.memoizedState=i.state,r&&hN(t,n,!0),t.child}function VC(e){var t=e.stateNode;t.pendingContext?pN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pN(e,t.context,!1),wx(e,t.containerInfo)}function TN(e,t,n,i,r){return Kd(),mx(r),t.flags|=256,wr(e,t,n,i),t.child}var w1={dehydrated:null,treeContext:null,retryLane:0};function x1(e){return{baseLanes:e,cachePool:null,transitions:null}}function WC(e,t,n){var i=t.pendingProps,r=Ln.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(r&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),yn(Ln,r&1),e===null)return f1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=fy(a,i,0,null),e=au(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=x1(n),t.memoizedState=w1,e):Tx(t,a));if(r=e.memoizedState,r!==null&&(s=r.dehydrated,s!==null))return $B(e,t,a,i,s,r,n);if(o){o=i.fallback,a=t.mode,r=e.child,s=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=Bl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),s!==null?o=Bl(s,o):(o=au(o,a,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,a=e.child.memoizedState,a=a===null?x1(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=w1,i}return o=e.child,e=o.sibling,i=Bl(o,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Tx(e,t){return t=fy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Eg(e,t,n,i){return i!==null&&mx(i),Yd(t,e.child,null,n),e=Tx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $B(e,t,n,i,r,o,a){if(n)return t.flags&256?(t.flags&=-257,i=I2(Error(Ue(422))),Eg(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=fy({mode:"visible",children:i.children},r,0,null),o=au(o,r,a,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,t.mode&1&&Yd(t,e.child,null,a),t.child.memoizedState=x1(a),t.memoizedState=w1,o);if(!(t.mode&1))return Eg(e,t,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var s=i.dgst;return i=s,o=Error(Ue(419)),i=I2(o,i,void 0),Eg(e,t,a,i)}if(s=(a&e.childLanes)!==0,Mr||s){if(i=Bi,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Rs(e,r),sa(i,e,r,-1))}return Lx(),i=I2(Error(Ue(421))),Eg(e,t,a,i)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=QB.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,to=Il(r.nextSibling),io=t,Mn=!0,oa=null,e!==null&&(ko[Po++]=ws,ko[Po++]=xs,ko[Po++]=uu,ws=e.id,xs=e.overflow,uu=t),t=Tx(t,i.children),t.flags|=4096,t)}function CN(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),m1(e.return,t,n)}function D2(e,t,n,i,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function KC(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(wr(e,t,i.children,n),i=Ln.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&CN(e,n,t);else if(e.tag===19)CN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(yn(Ln,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&yv(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),D2(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&yv(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}D2(t,!0,n,null,o);break;case"together":D2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function P0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ms(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ue(153));if(t.child!==null){for(e=t.child,n=Bl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Bl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function GB(e,t,n){switch(t.tag){case 3:VC(t),Kd();break;case 5:bC(t);break;case 1:Lr(t.type)&&pv(t);break;case 4:wx(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;yn(mv,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(yn(Ln,Ln.current&1),t.flags|=128,null):n&t.child.childLanes?WC(e,t,n):(yn(Ln,Ln.current&1),e=Ms(e,t,n),e!==null?e.sibling:null);yn(Ln,Ln.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return KC(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),yn(Ln,Ln.current),i)break;return null;case 22:case 23:return t.lanes=0,zC(e,t,n)}return Ms(e,t,n)}var YC,E1,JC,XC;YC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};E1=function(){};JC=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,eu(Fa.current);var o=null;switch(n){case"input":r=Hb(e,r),i=Hb(e,i),o=[];break;case"select":r=jn({},r,{value:void 0}),i=jn({},i,{value:void 0}),o=[];break;case"textarea":r=Kb(e,r),i=Kb(e,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=uv)}Jb(n,i);var a;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var s=r[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(af.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var l=i[c];if(s=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(af.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xn("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};XC=function(e,t,n,i){n!==i&&(t.flags|=4)};function fh(e,t){if(!Mn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ar(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function UB(e,t,n){var i=t.pendingProps;switch(fx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(t),null;case 1:return Lr(t.type)&&dv(),ar(t),null;case 3:return i=t.stateNode,Jd(),Sn(Dr),Sn(fr),Ex(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(wg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,oa!==null&&(R1(oa),oa=null))),E1(e,t),ar(t),null;case 5:xx(t);var r=eu(yf.current);if(n=t.type,e!==null&&t.stateNode!=null)JC(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ue(166));return ar(t),null}if(e=eu(Fa.current),wg(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[Da]=t,i[gf]=o,e=(t.mode&1)!==0,n){case"dialog":xn("cancel",i),xn("close",i);break;case"iframe":case"object":case"embed":xn("load",i);break;case"video":case"audio":for(r=0;r<Lh.length;r++)xn(Lh[r],i);break;case"source":xn("error",i);break;case"img":case"image":case"link":xn("error",i),xn("load",i);break;case"details":xn("toggle",i);break;case"input":jS(i,o),xn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},xn("invalid",i);break;case"textarea":GS(i,o),xn("invalid",i)}Jb(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?i.textContent!==s&&(o.suppressHydrationWarning!==!0&&bg(i.textContent,s,e),r=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&bg(i.textContent,s,e),r=["children",""+s]):af.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&xn("scroll",i)}switch(n){case"input":pg(i),$S(i,o,!0);break;case"textarea":pg(i),US(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=uv)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=N4(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(n,{is:i.is}):(e=a.createElement(n),n==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,n),e[Da]=t,e[gf]=i,YC(e,t,!1,!1),t.stateNode=e;e:{switch(a=Xb(n,i),n){case"dialog":xn("cancel",e),xn("close",e),r=i;break;case"iframe":case"object":case"embed":xn("load",e),r=i;break;case"video":case"audio":for(r=0;r<Lh.length;r++)xn(Lh[r],e);r=i;break;case"source":xn("error",e),r=i;break;case"img":case"image":case"link":xn("error",e),xn("load",e),r=i;break;case"details":xn("toggle",e),r=i;break;case"input":jS(e,i),r=Hb(e,i),xn("invalid",e);break;case"option":r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=jn({},i,{value:void 0}),xn("invalid",e);break;case"textarea":GS(e,i),r=Kb(e,i),xn("invalid",e);break;default:r=i}Jb(n,r),s=r;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?A4(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&k4(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&sf(e,l):typeof l=="number"&&sf(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(af.hasOwnProperty(o)?l!=null&&o==="onScroll"&&xn("scroll",e):l!=null&&Qw(e,o,l,a))}switch(n){case"input":pg(e),$S(e,i,!1);break;case"textarea":pg(e),US(e);break;case"option":i.value!=null&&e.setAttribute("value",""+$l(i.value));break;case"select":e.multiple=!!i.multiple,o=i.value,o!=null?Ld(e,!!i.multiple,o,!1):i.defaultValue!=null&&Ld(e,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=uv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ar(t),null;case 6:if(e&&t.stateNode!=null)XC(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ue(166));if(n=eu(yf.current),eu(Fa.current),wg(t)){if(i=t.stateNode,n=t.memoizedProps,i[Da]=t,(o=i.nodeValue!==n)&&(e=io,e!==null))switch(e.tag){case 3:bg(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bg(i.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Da]=t,t.stateNode=i}return ar(t),null;case 13:if(Sn(Ln),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mn&&to!==null&&t.mode&1&&!(t.flags&128))mC(),Kd(),t.flags|=98560,o=!1;else if(o=wg(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(Ue(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ue(317));o[Da]=t}else Kd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ar(t),o=!1}else oa!==null&&(R1(oa),oa=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Ln.current&1?Ti===0&&(Ti=3):Lx())),t.updateQueue!==null&&(t.flags|=4),ar(t),null);case 4:return Jd(),E1(e,t),e===null&&ff(t.stateNode.containerInfo),ar(t),null;case 10:return yx(t.type._context),ar(t),null;case 17:return Lr(t.type)&&dv(),ar(t),null;case 19:if(Sn(Ln),o=t.memoizedState,o===null)return ar(t),null;if(i=(t.flags&128)!==0,a=o.rendering,a===null)if(i)fh(o,!1);else{if(Ti!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=yv(e),a!==null){for(t.flags|=128,fh(o,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)o=n,e=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return yn(Ln,Ln.current&1|2),t.child}e=e.sibling}o.tail!==null&&oi()>Zd&&(t.flags|=128,i=!0,fh(o,!1),t.lanes=4194304)}else{if(!i)if(e=yv(a),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Mn)return ar(t),null}else 2*oi()-o.renderingStartTime>Zd&&n!==1073741824&&(t.flags|=128,i=!0,fh(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=oi(),t.sibling=null,n=Ln.current,yn(Ln,i?n&1|2:n&1),t):(ar(t),null);case 22:case 23:return Dx(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Zr&1073741824&&(ar(t),t.subtreeFlags&6&&(t.flags|=8192)):ar(t),null;case 24:return null;case 25:return null}throw Error(Ue(156,t.tag))}function qB(e,t){switch(fx(t),t.tag){case 1:return Lr(t.type)&&dv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jd(),Sn(Dr),Sn(fr),Ex(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xx(t),null;case 13:if(Sn(Ln),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ue(340));Kd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sn(Ln),null;case 4:return Jd(),null;case 10:return yx(t.type._context),null;case 22:case 23:return Dx(),null;case 24:return null;default:return null}}var Sg=!1,dr=!1,zB=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Rd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Vn(e,t,i)}else n.current=null}function S1(e,t,n){try{n()}catch(i){Vn(e,t,i)}}var RN=!1;function HB(e,t){if(s1=sv,e=nC(),px(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(s=a+r),d!==o||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===r&&(s=a),h===o&&++u===i&&(l=a),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(l1={focusedElem:e,selectionRange:n},sv=!1,Ke=t;Ke!==null;)if(t=Ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ke=e;else for(;Ke!==null;){t=Ke;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,_=m.memoizedState,b=t.stateNode,E=b.getSnapshotBeforeUpdate(t.elementType===t.type?v:ta(t.type,v),_);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ue(163))}}catch(x){Vn(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Ke=e;break}Ke=t.return}return m=RN,RN=!1,m}function Hh(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,o!==void 0&&S1(t,n,o)}r=r.next}while(r!==i)}}function py(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function N1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ZC(e){var t=e.alternate;t!==null&&(e.alternate=null,ZC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Da],delete t[gf],delete t[d1],delete t[PB],delete t[AB])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function QC(e){return e.tag===5||e.tag===3||e.tag===4}function MN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||QC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function k1(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=uv));else if(i!==4&&(e=e.child,e!==null))for(k1(e,t,n),e=e.sibling;e!==null;)k1(e,t,n),e=e.sibling}function P1(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(P1(e,t,n),e=e.sibling;e!==null;)P1(e,t,n),e=e.sibling}var Ki=null,ia=!1;function cl(e,t,n){for(n=n.child;n!==null;)eR(e,t,n),n=n.sibling}function eR(e,t,n){if(Ba&&typeof Ba.onCommitFiberUnmount=="function")try{Ba.onCommitFiberUnmount(ry,n)}catch{}switch(n.tag){case 5:dr||Rd(n,t);case 6:var i=Ki,r=ia;Ki=null,cl(e,t,n),Ki=i,ia=r,Ki!==null&&(ia?(e=Ki,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ki.removeChild(n.stateNode));break;case 18:Ki!==null&&(ia?(e=Ki,n=n.stateNode,e.nodeType===8?P2(e.parentNode,n):e.nodeType===1&&P2(e,n),df(e)):P2(Ki,n.stateNode));break;case 4:i=Ki,r=ia,Ki=n.stateNode.containerInfo,ia=!0,cl(e,t,n),Ki=i,ia=r;break;case 0:case 11:case 14:case 15:if(!dr&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&S1(n,t,a),r=r.next}while(r!==i)}cl(e,t,n);break;case 1:if(!dr&&(Rd(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Vn(n,t,s)}cl(e,t,n);break;case 21:cl(e,t,n);break;case 22:n.mode&1?(dr=(i=dr)||n.memoizedState!==null,cl(e,t,n),dr=i):cl(e,t,n);break;default:cl(e,t,n)}}function IN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new zB),t.forEach(function(i){var r=eF.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Xo(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Ki=s.stateNode,ia=!1;break e;case 3:Ki=s.stateNode.containerInfo,ia=!0;break e;case 4:Ki=s.stateNode.containerInfo,ia=!0;break e}s=s.return}if(Ki===null)throw Error(Ue(160));eR(o,a,r),Ki=null,ia=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Vn(r,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tR(t,e),t=t.sibling}function tR(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xo(t,e),ka(e),i&4){try{Hh(3,e,e.return),py(3,e)}catch(v){Vn(e,e.return,v)}try{Hh(5,e,e.return)}catch(v){Vn(e,e.return,v)}}break;case 1:Xo(t,e),ka(e),i&512&&n!==null&&Rd(n,n.return);break;case 5:if(Xo(t,e),ka(e),i&512&&n!==null&&Rd(n,n.return),e.flags&32){var r=e.stateNode;try{sf(r,"")}catch(v){Vn(e,e.return,v)}}if(i&4&&(r=e.stateNode,r!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&E4(r,o),Xb(s,a);var c=Xb(s,o);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?A4(r,d):u==="dangerouslySetInnerHTML"?k4(r,d):u==="children"?sf(r,d):Qw(r,u,d,c)}switch(s){case"input":Vb(r,o);break;case"textarea":S4(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Ld(r,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Ld(r,!!o.multiple,o.defaultValue,!0):Ld(r,!!o.multiple,o.multiple?[]:"",!1))}r[gf]=o}catch(v){Vn(e,e.return,v)}}break;case 6:if(Xo(t,e),ka(e),i&4){if(e.stateNode===null)throw Error(Ue(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(v){Vn(e,e.return,v)}}break;case 3:if(Xo(t,e),ka(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{df(t.containerInfo)}catch(v){Vn(e,e.return,v)}break;case 4:Xo(t,e),ka(e);break;case 13:Xo(t,e),ka(e),r=e.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Mx=oi())),i&4&&IN(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(dr=(c=dr)||u,Xo(t,e),dr=c):Xo(t,e),ka(e),i&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Ke=e,u=e.child;u!==null;){for(d=Ke=u;Ke!==null;){switch(h=Ke,p=h.child,h.tag){case 0:case 11:case 14:case 15:Hh(4,h,h.return);break;case 1:Rd(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){i=h,n=h.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Vn(i,n,v)}}break;case 5:Rd(h,h.return);break;case 22:if(h.memoizedState!==null){LN(d);continue}}p!==null?(p.return=h,Ke=p):LN(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=P4("display",a))}catch(v){Vn(e,e.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Vn(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Xo(t,e),ka(e),i&4&&IN(e);break;case 21:break;default:Xo(t,e),ka(e)}}function ka(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(QC(n)){var i=n;break e}n=n.return}throw Error(Ue(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(sf(r,""),i.flags&=-33);var o=MN(e);P1(e,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,s=MN(e);k1(e,s,a);break;default:throw Error(Ue(161))}}catch(l){Vn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function VB(e,t,n){Ke=e,nR(e)}function nR(e,t,n){for(var i=(e.mode&1)!==0;Ke!==null;){var r=Ke,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Sg;if(!a){var s=r.alternate,l=s!==null&&s.memoizedState!==null||dr;s=Sg;var c=dr;if(Sg=a,(dr=l)&&!c)for(Ke=r;Ke!==null;)a=Ke,l=a.child,a.tag===22&&a.memoizedState!==null?ON(r):l!==null?(l.return=a,Ke=l):ON(r);for(;o!==null;)Ke=o,nR(o),o=o.sibling;Ke=r,Sg=s,dr=c}DN(e)}else r.subtreeFlags&8772&&o!==null?(o.return=r,Ke=o):DN(e)}}function DN(e){for(;Ke!==null;){var t=Ke;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dr||py(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!dr)if(n===null)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ta(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&yN(t,o,i);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}yN(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&df(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ue(163))}dr||t.flags&512&&N1(t)}catch(h){Vn(t,t.return,h)}}if(t===e){Ke=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ke=n;break}Ke=t.return}}function LN(e){for(;Ke!==null;){var t=Ke;if(t===e){Ke=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ke=n;break}Ke=t.return}}function ON(e){for(;Ke!==null;){var t=Ke;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{py(4,t)}catch(l){Vn(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(l){Vn(t,r,l)}}var o=t.return;try{N1(t)}catch(l){Vn(t,o,l)}break;case 5:var a=t.return;try{N1(t)}catch(l){Vn(t,a,l)}}}catch(l){Vn(t,t.return,l)}if(t===e){Ke=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ke=s;break}Ke=t.return}}var WB=Math.ceil,wv=Ds.ReactCurrentDispatcher,Cx=Ds.ReactCurrentOwner,Ro=Ds.ReactCurrentBatchConfig,Qt=0,Bi=null,vi=null,Xi=0,Zr=0,Md=Wl(0),Ti=0,xf=null,pu=0,hy=0,Rx=0,Vh=null,Rr=null,Mx=0,Zd=1/0,ms=null,xv=!1,A1=null,Ll=null,Ng=!1,kl=null,Ev=0,Wh=0,T1=null,A0=-1,T0=0;function Er(){return Qt&6?oi():A0!==-1?A0:A0=oi()}function Ol(e){return e.mode&1?Qt&2&&Xi!==0?Xi&-Xi:CB.transition!==null?(T0===0&&(T0=$4()),T0):(e=un,e!==0||(e=window.event,e=e===void 0?16:W4(e.type)),e):1}function sa(e,t,n,i){if(50<Wh)throw Wh=0,T1=null,Error(Ue(185));zf(e,n,i),(!(Qt&2)||e!==Bi)&&(e===Bi&&(!(Qt&2)&&(hy|=n),Ti===4&&El(e,Xi)),Or(e,i),n===1&&Qt===0&&!(t.mode&1)&&(Zd=oi()+500,cy&&Kl()))}function Or(e,t){var n=e.callbackNode;C8(e,t);var i=av(e,e===Bi?Xi:0);if(i===0)n!==null&&HS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&HS(n),t===1)e.tag===0?TB(BN.bind(null,e)):pC(BN.bind(null,e)),NB(function(){!(Qt&6)&&Kl()}),n=null;else{switch(G4(i)){case 1:n=rx;break;case 4:n=F4;break;case 16:n=ov;break;case 536870912:n=j4;break;default:n=ov}n=uR(n,iR.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iR(e,t){if(A0=-1,T0=0,Qt&6)throw Error(Ue(327));var n=e.callbackNode;if($d()&&e.callbackNode!==n)return null;var i=av(e,e===Bi?Xi:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Sv(e,i);else{t=i;var r=Qt;Qt|=2;var o=oR();(Bi!==e||Xi!==t)&&(ms=null,Zd=oi()+500,ou(e,t));do try{JB();break}catch(s){rR(e,s)}while(!0);vx(),wv.current=o,Qt=r,vi!==null?t=0:(Bi=null,Xi=0,t=Ti)}if(t!==0){if(t===2&&(r=n1(e),r!==0&&(i=r,t=C1(e,r))),t===1)throw n=xf,ou(e,0),El(e,i),Or(e,oi()),n;if(t===6)El(e,i);else{if(r=e.current.alternate,!(i&30)&&!KB(r)&&(t=Sv(e,i),t===2&&(o=n1(e),o!==0&&(i=o,t=C1(e,o))),t===1))throw n=xf,ou(e,0),El(e,i),Or(e,oi()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(Ue(345));case 2:jc(e,Rr,ms);break;case 3:if(El(e,i),(i&130023424)===i&&(t=Mx+500-oi(),10<t)){if(av(e,0)!==0)break;if(r=e.suspendedLanes,(r&i)!==i){Er(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=u1(jc.bind(null,e,Rr,ms),t);break}jc(e,Rr,ms);break;case 4:if(El(e,i),(i&4194240)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-aa(i);o=1<<a,a=t[a],a>r&&(r=a),i&=~o}if(i=r,i=oi()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*WB(i/1960))-i,10<i){e.timeoutHandle=u1(jc.bind(null,e,Rr,ms),i);break}jc(e,Rr,ms);break;case 5:jc(e,Rr,ms);break;default:throw Error(Ue(329))}}}return Or(e,oi()),e.callbackNode===n?iR.bind(null,e):null}function C1(e,t){var n=Vh;return e.current.memoizedState.isDehydrated&&(ou(e,t).flags|=256),e=Sv(e,t),e!==2&&(t=Rr,Rr=n,t!==null&&R1(t)),e}function R1(e){Rr===null?Rr=e:Rr.push.apply(Rr,e)}function KB(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ua(o(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function El(e,t){for(t&=~Rx,t&=~hy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-aa(t),i=1<<n;e[n]=-1,t&=~i}}function BN(e){if(Qt&6)throw Error(Ue(327));$d();var t=av(e,0);if(!(t&1))return Or(e,oi()),null;var n=Sv(e,t);if(e.tag!==0&&n===2){var i=n1(e);i!==0&&(t=i,n=C1(e,i))}if(n===1)throw n=xf,ou(e,0),El(e,t),Or(e,oi()),n;if(n===6)throw Error(Ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Rr,ms),Or(e,oi()),null}function Ix(e,t){var n=Qt;Qt|=1;try{return e(t)}finally{Qt=n,Qt===0&&(Zd=oi()+500,cy&&Kl())}}function hu(e){kl!==null&&kl.tag===0&&!(Qt&6)&&$d();var t=Qt;Qt|=1;var n=Ro.transition,i=un;try{if(Ro.transition=null,un=1,e)return e()}finally{un=i,Ro.transition=n,Qt=t,!(Qt&6)&&Kl()}}function Dx(){Zr=Md.current,Sn(Md)}function ou(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,SB(n)),vi!==null)for(n=vi.return;n!==null;){var i=n;switch(fx(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&dv();break;case 3:Jd(),Sn(Dr),Sn(fr),Ex();break;case 5:xx(i);break;case 4:Jd();break;case 13:Sn(Ln);break;case 19:Sn(Ln);break;case 10:yx(i.type._context);break;case 22:case 23:Dx()}n=n.return}if(Bi=e,vi=e=Bl(e.current,null),Xi=Zr=t,Ti=0,xf=null,Rx=hy=pu=0,Rr=Vh=null,Qc!==null){for(t=0;t<Qc.length;t++)if(n=Qc[t],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Qc=null}return e}function rR(e,t){do{var n=vi;try{if(vx(),N0.current=bv,_v){for(var i=Bn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_v=!1}if(du=0,Ii=Pi=Bn=null,zh=!1,_f=0,Cx.current=null,n===null||n.return===null){Ti=1,xf=t,vi=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Xi,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=SN(a);if(p!==null){p.flags&=-257,NN(p,a,s,o,t),p.mode&1&&EN(o,c,t),t=p,l=c;var m=t.updateQueue;if(m===null){var v=new Set;v.add(l),t.updateQueue=v}else m.add(l);break e}else{if(!(t&1)){EN(o,c,t),Lx();break e}l=Error(Ue(426))}}else if(Mn&&s.mode&1){var _=SN(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),NN(_,a,s,o,t),mx(Xd(l,s));break e}}o=l=Xd(l,s),Ti!==4&&(Ti=2),Vh===null?Vh=[o]:Vh.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var b=GC(o,l,t);vN(o,b);break e;case 1:s=l;var E=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ll===null||!Ll.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=UC(o,s,t);vN(o,x);break e}}o=o.return}while(o!==null)}sR(n)}catch(M){t=M,vi===n&&n!==null&&(vi=n=n.return);continue}break}while(!0)}function oR(){var e=wv.current;return wv.current=bv,e===null?bv:e}function Lx(){(Ti===0||Ti===3||Ti===2)&&(Ti=4),Bi===null||!(pu&268435455)&&!(hy&268435455)||El(Bi,Xi)}function Sv(e,t){var n=Qt;Qt|=2;var i=oR();(Bi!==e||Xi!==t)&&(ms=null,ou(e,t));do try{YB();break}catch(r){rR(e,r)}while(!0);if(vx(),Qt=n,wv.current=i,vi!==null)throw Error(Ue(261));return Bi=null,Xi=0,Ti}function YB(){for(;vi!==null;)aR(vi)}function JB(){for(;vi!==null&&!w8();)aR(vi)}function aR(e){var t=cR(e.alternate,e,Zr);e.memoizedProps=e.pendingProps,t===null?sR(e):vi=t,Cx.current=null}function sR(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=qB(n,t),n!==null){n.flags&=32767,vi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ti=6,vi=null;return}}else if(n=UB(n,t,Zr),n!==null){vi=n;return}if(t=t.sibling,t!==null){vi=t;return}vi=t=e}while(t!==null);Ti===0&&(Ti=5)}function jc(e,t,n){var i=un,r=Ro.transition;try{Ro.transition=null,un=1,XB(e,t,n,i)}finally{Ro.transition=r,un=i}return null}function XB(e,t,n,i){do $d();while(kl!==null);if(Qt&6)throw Error(Ue(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ue(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(R8(e,o),e===Bi&&(vi=Bi=null,Xi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ng||(Ng=!0,uR(ov,function(){return $d(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ro.transition,Ro.transition=null;var a=un;un=1;var s=Qt;Qt|=4,Cx.current=null,HB(e,n),tR(n,e),vB(l1),sv=!!s1,l1=s1=null,e.current=n,VB(n),x8(),Qt=s,un=a,Ro.transition=o}else e.current=n;if(Ng&&(Ng=!1,kl=e,Ev=r),o=e.pendingLanes,o===0&&(Ll=null),N8(n.stateNode),Or(e,oi()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(xv)throw xv=!1,e=A1,A1=null,e;return Ev&1&&e.tag!==0&&$d(),o=e.pendingLanes,o&1?e===T1?Wh++:(Wh=0,T1=e):Wh=0,Kl(),null}function $d(){if(kl!==null){var e=G4(Ev),t=Ro.transition,n=un;try{if(Ro.transition=null,un=16>e?16:e,kl===null)var i=!1;else{if(e=kl,kl=null,Ev=0,Qt&6)throw Error(Ue(331));var r=Qt;for(Qt|=4,Ke=e.current;Ke!==null;){var o=Ke,a=o.child;if(Ke.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Ke=c;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:Hh(8,u,o)}var d=u.child;if(d!==null)d.return=u,Ke=d;else for(;Ke!==null;){u=Ke;var h=u.sibling,p=u.return;if(ZC(u),u===c){Ke=null;break}if(h!==null){h.return=p,Ke=h;break}Ke=p}}}var m=o.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}Ke=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Ke=a;else e:for(;Ke!==null;){if(o=Ke,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Hh(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,Ke=b;break e}Ke=o.return}}var E=e.current;for(Ke=E;Ke!==null;){a=Ke;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Ke=w;else e:for(a=E;Ke!==null;){if(s=Ke,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:py(9,s)}}catch(M){Vn(s,s.return,M)}if(s===a){Ke=null;break e}var x=s.sibling;if(x!==null){x.return=s.return,Ke=x;break e}Ke=s.return}}if(Qt=r,Kl(),Ba&&typeof Ba.onPostCommitFiberRoot=="function")try{Ba.onPostCommitFiberRoot(ry,e)}catch{}i=!0}return i}finally{un=n,Ro.transition=t}}return!1}function FN(e,t,n){t=Xd(n,t),t=GC(e,t,1),e=Dl(e,t,1),t=Er(),e!==null&&(zf(e,1,t),Or(e,t))}function Vn(e,t,n){if(e.tag===3)FN(e,e,n);else for(;t!==null;){if(t.tag===3){FN(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ll===null||!Ll.has(i))){e=Xd(n,e),e=UC(t,e,1),t=Dl(t,e,1),e=Er(),t!==null&&(zf(t,1,e),Or(t,e));break}}t=t.return}}function ZB(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Er(),e.pingedLanes|=e.suspendedLanes&n,Bi===e&&(Xi&n)===n&&(Ti===4||Ti===3&&(Xi&130023424)===Xi&&500>oi()-Mx?ou(e,0):Rx|=n),Or(e,t)}function lR(e,t){t===0&&(e.mode&1?(t=mg,mg<<=1,!(mg&130023424)&&(mg=4194304)):t=1);var n=Er();e=Rs(e,t),e!==null&&(zf(e,t,n),Or(e,n))}function QB(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lR(e,n)}function eF(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ue(314))}i!==null&&i.delete(t),lR(e,n)}var cR;cR=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dr.current)Mr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mr=!1,GB(e,t,n);Mr=!!(e.flags&131072)}else Mr=!1,Mn&&t.flags&1048576&&hC(t,fv,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;P0(e,t),e=t.pendingProps;var r=Wd(t,fr.current);jd(t,n),r=Nx(null,t,i,e,r,n);var o=kx();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lr(i)?(o=!0,pv(t)):o=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,bx(t),r.updater=dy,t.stateNode=r,r._reactInternals=t,v1(t,i,e,n),t=b1(null,t,i,!0,o,n)):(t.tag=0,Mn&&o&&hx(t),wr(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(P0(e,t),e=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=nF(i),e=ta(i,e),r){case 0:t=_1(null,t,i,e,n);break e;case 1:t=AN(null,t,i,e,n);break e;case 11:t=kN(null,t,i,e,n);break e;case 14:t=PN(null,t,i,ta(i.type,e),n);break e}throw Error(Ue(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ta(i,r),_1(e,t,i,r,n);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ta(i,r),AN(e,t,i,r,n);case 3:e:{if(VC(t),e===null)throw Error(Ue(387));i=t.pendingProps,o=t.memoizedState,r=o.element,_C(e,t),vv(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){r=Xd(Error(Ue(423)),t),t=TN(e,t,i,n,r);break e}else if(i!==r){r=Xd(Error(Ue(424)),t),t=TN(e,t,i,n,r);break e}else for(to=Il(t.stateNode.containerInfo.firstChild),io=t,Mn=!0,oa=null,n=vC(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kd(),i===r){t=Ms(e,t,n);break e}wr(e,t,i,n)}t=t.child}return t;case 5:return bC(t),e===null&&f1(t),i=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,a=r.children,c1(i,r)?a=null:o!==null&&c1(i,o)&&(t.flags|=32),HC(e,t),wr(e,t,a,n),t.child;case 6:return e===null&&f1(t),null;case 13:return WC(e,t,n);case 4:return wx(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Yd(t,null,i,n):wr(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ta(i,r),kN(e,t,i,r,n);case 7:return wr(e,t,t.pendingProps,n),t.child;case 8:return wr(e,t,t.pendingProps.children,n),t.child;case 12:return wr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,yn(mv,i._currentValue),i._currentValue=a,o!==null)if(ua(o.value,a)){if(o.children===r.children&&!Dr.current){t=Ms(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=Ns(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),m1(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Ue(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),m1(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}wr(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,jd(t,n),r=Mo(r),i=i(r),t.flags|=1,wr(e,t,i,n),t.child;case 14:return i=t.type,r=ta(i,t.pendingProps),r=ta(i.type,r),PN(e,t,i,r,n);case 15:return qC(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ta(i,r),P0(e,t),t.tag=1,Lr(i)?(e=!0,pv(t)):e=!1,jd(t,n),$C(t,i,r),v1(t,i,r,n),b1(null,t,i,!0,e,n);case 19:return KC(e,t,n);case 22:return zC(e,t,n)}throw Error(Ue(156,t.tag))};function uR(e,t){return B4(e,t)}function tF(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function To(e,t,n,i){return new tF(e,t,n,i)}function Ox(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nF(e){if(typeof e=="function")return Ox(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tx)return 11;if(e===nx)return 14}return 2}function Bl(e,t){var n=e.alternate;return n===null?(n=To(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function C0(e,t,n,i,r,o){var a=2;if(i=e,typeof e=="function")Ox(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case xd:return au(n.children,r,o,t);case ex:a=8,r|=8;break;case Gb:return e=To(12,n,t,r|2),e.elementType=Gb,e.lanes=o,e;case Ub:return e=To(13,n,t,r),e.elementType=Ub,e.lanes=o,e;case qb:return e=To(19,n,t,r),e.elementType=qb,e.lanes=o,e;case b4:return fy(n,r,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case y4:a=10;break e;case _4:a=9;break e;case tx:a=11;break e;case nx:a=14;break e;case yl:a=16,i=null;break e}throw Error(Ue(130,e==null?e:typeof e,""))}return t=To(a,n,t,r),t.elementType=e,t.type=i,t.lanes=o,t}function au(e,t,n,i){return e=To(7,e,i,t),e.lanes=n,e}function fy(e,t,n,i){return e=To(22,e,i,t),e.elementType=b4,e.lanes=n,e.stateNode={isHidden:!1},e}function L2(e,t,n){return e=To(6,e,null,t),e.lanes=n,e}function O2(e,t,n){return t=To(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function iF(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=g2(0),this.expirationTimes=g2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g2(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bx(e,t,n,i,r,o,a,s,l){return e=new iF(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=To(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bx(o),e}function rF(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wd,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function dR(e){if(!e)return Gl;e=e._reactInternals;e:{if(Eu(e)!==e||e.tag!==1)throw Error(Ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ue(171))}if(e.tag===1){var n=e.type;if(Lr(n))return dC(e,n,t)}return t}function pR(e,t,n,i,r,o,a,s,l){return e=Bx(n,i,!0,e,r,o,a,s,l),e.context=dR(null),n=e.current,i=Er(),r=Ol(n),o=Ns(i,r),o.callback=t??null,Dl(n,o,r),e.current.lanes=r,zf(e,r,i),Or(e,i),e}function my(e,t,n,i){var r=t.current,o=Er(),a=Ol(r);return n=dR(n),t.context===null?t.context=n:t.pendingContext=n,t=Ns(o,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Dl(r,t,a),e!==null&&(sa(e,r,a,o),S0(e,r,a)),a}function Nv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fx(e,t){jN(e,t),(e=e.alternate)&&jN(e,t)}function oF(){return null}var hR=typeof reportError=="function"?reportError:function(e){console.error(e)};function jx(e){this._internalRoot=e}gy.prototype.render=jx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ue(409));my(e,t,null,null)};gy.prototype.unmount=jx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hu(function(){my(null,e,null,null)}),t[Cs]=null}};function gy(e){this._internalRoot=e}gy.prototype.unstable_scheduleHydration=function(e){if(e){var t=z4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xl.length&&t!==0&&t<xl[n].priority;n++);xl.splice(n,0,e),n===0&&V4(e)}};function $x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $N(){}function aF(e,t,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var c=Nv(a);o.call(c)}}var a=pR(t,i,e,0,null,!1,!1,"",$N);return e._reactRootContainer=a,e[Cs]=a.current,ff(e.nodeType===8?e.parentNode:e),hu(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof i=="function"){var s=i;i=function(){var c=Nv(l);s.call(c)}}var l=Bx(e,0,!1,null,null,!1,!1,"",$N);return e._reactRootContainer=l,e[Cs]=l.current,ff(e.nodeType===8?e.parentNode:e),hu(function(){my(t,l,n,i)}),l}function yy(e,t,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var s=r;r=function(){var l=Nv(a);s.call(l)}}my(t,a,e,r)}else a=aF(n,t,e,r,i);return Nv(a)}U4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Dh(t.pendingLanes);n!==0&&(ox(t,n|1),Or(t,oi()),!(Qt&6)&&(Zd=oi()+500,Kl()))}break;case 13:hu(function(){var i=Rs(e,1);if(i!==null){var r=Er();sa(i,e,1,r)}}),Fx(e,1)}};ax=function(e){if(e.tag===13){var t=Rs(e,134217728);if(t!==null){var n=Er();sa(t,e,134217728,n)}Fx(e,134217728)}};q4=function(e){if(e.tag===13){var t=Ol(e),n=Rs(e,t);if(n!==null){var i=Er();sa(n,e,t,i)}Fx(e,t)}};z4=function(){return un};H4=function(e,t){var n=un;try{return un=e,t()}finally{un=n}};Qb=function(e,t,n){switch(t){case"input":if(Vb(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=ly(i);if(!r)throw Error(Ue(90));x4(i),Vb(i,r)}}}break;case"textarea":S4(e,n);break;case"select":t=n.value,t!=null&&Ld(e,!!n.multiple,t,!1)}};R4=Ix;M4=hu;var sF={usingClientEntryPoint:!1,Events:[Vf,kd,ly,T4,C4,Ix]},mh={findFiberByHostInstance:Zc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lF={bundleType:mh.bundleType,version:mh.version,rendererPackageName:mh.rendererPackageName,rendererConfig:mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=L4(e),e===null?null:e.stateNode},findFiberByHostInstance:mh.findFiberByHostInstance||oF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kg.isDisabled&&kg.supportsFiber)try{ry=kg.inject(lF),Ba=kg}catch{}}so.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sF;so.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$x(t))throw Error(Ue(200));return rF(e,t,null,n)};so.createRoot=function(e,t){if(!$x(e))throw Error(Ue(299));var n=!1,i="",r=hR;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Bx(e,1,!1,null,null,n,!1,i,r),e[Cs]=t.current,ff(e.nodeType===8?e.parentNode:e),new jx(t)};so.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ue(188)):(e=Object.keys(e).join(","),Error(Ue(268,e)));return e=L4(t),e=e===null?null:e.stateNode,e};so.flushSync=function(e){return hu(e)};so.hydrate=function(e,t,n){if(!vy(t))throw Error(Ue(200));return yy(null,e,t,!0,n)};so.hydrateRoot=function(e,t,n){if(!$x(e))throw Error(Ue(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=hR;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=pR(t,null,e,1,n??null,r,!1,o,a),e[Cs]=t.current,ff(e),i)for(e=0;e<i.length;e++)n=i[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new gy(t)};so.render=function(e,t,n){if(!vy(t))throw Error(Ue(200));return yy(null,e,t,!1,n)};so.unmountComponentAtNode=function(e){if(!vy(e))throw Error(Ue(40));return e._reactRootContainer?(hu(function(){yy(null,null,e,!1,function(){e._reactRootContainer=null,e[Cs]=null})}),!0):!1};so.unstable_batchedUpdates=Ix;so.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!vy(n))throw Error(Ue(200));if(e==null||e._reactInternals===void 0)throw Error(Ue(38));return yy(e,t,n,!1,i)};so.version="18.3.1-next-f1338f8080-20240426";function fR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fR)}catch(e){console.error(e)}}fR(),f4.exports=so;var cF=f4.exports,GN=cF;jb.createRoot=GN.createRoot,jb.hydrateRoot=GN.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ef(){return Ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ef.apply(this,arguments)}var Pl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pl||(Pl={}));const UN="popstate";function uF(e){e===void 0&&(e={});function t(i,r){let{pathname:o,search:a,hash:s}=i.location;return M1("",{pathname:o,search:a,hash:s},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:kv(r)}return pF(t,n,null,e)}function Fn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dF(){return Math.random().toString(36).substr(2,8)}function qN(e,t){return{usr:e.state,key:e.key,idx:t}}function M1(e,t,n,i){return n===void 0&&(n=null),Ef({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?fp(t):t,{state:n,key:t&&t.key||i||dF()})}function kv(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function fp(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function pF(e,t,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,s=Pl.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(Ef({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){s=Pl.Pop;let _=u(),b=_==null?null:_-c;c=_,l&&l({action:s,location:v.location,delta:b})}function h(_,b){s=Pl.Push;let E=M1(v.location,_,b);c=u()+1;let w=qN(E,c),x=v.createHref(E);try{a.pushState(w,"",x)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(x)}o&&l&&l({action:s,location:v.location,delta:1})}function p(_,b){s=Pl.Replace;let E=M1(v.location,_,b);c=u();let w=qN(E,c),x=v.createHref(E);a.replaceState(w,"",x),o&&l&&l({action:s,location:v.location,delta:0})}function m(_){let b=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof _=="string"?_:kv(_);return E=E.replace(/ $/,"%20"),Fn(b,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,b)}let v={get action(){return s},get location(){return e(r,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(UN,d),l=_,()=>{r.removeEventListener(UN,d),l=null}},createHref(_){return t(r,_)},createURL:m,encodeLocation(_){let b=m(_);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:p,go(_){return a.go(_)}};return v}var zN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(zN||(zN={}));function hF(e,t,n){return n===void 0&&(n="/"),fF(e,t,n)}function fF(e,t,n,i){let r=typeof t=="string"?fp(t):t,o=Qd(r.pathname||"/",n);if(o==null)return null;let a=mR(e);mF(a);let s=null;for(let l=0;s==null&&l<a.length;++l){let c=kF(o);s=SF(a[l],c)}return s}function mR(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(Fn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Fl([i,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(Fn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),mR(o.children,t,u,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:xF(c,o.index),routesMeta:u})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))r(o,a);else for(let l of gR(o.path))r(o,a,l)}),t}function gR(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=gR(i.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),r&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function mF(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:EF(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const gF=/^:[\w-]+$/,vF=3,yF=2,_F=1,bF=10,wF=-2,HN=e=>e==="*";function xF(e,t){let n=e.split("/"),i=n.length;return n.some(HN)&&(i+=wF),t&&(i+=yF),n.filter(r=>!HN(r)).reduce((r,o)=>r+(gF.test(o)?vF:o===""?_F:bF),i)}function EF(e,t){return e.length===t.length&&e.slice(0,-1).every((i,r)=>i===t[r])?e[e.length-1]-t[t.length-1]:0}function SF(e,t,n){let{routesMeta:i}=e,r={},o="/",a=[];for(let s=0;s<i.length;++s){let l=i[s],c=s===i.length-1,u=o==="/"?t:t.slice(o.length)||"/",d=I1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:Fl([o,d.pathname]),pathnameBase:RF(Fl([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=Fl([o,d.pathnameBase]))}return a}function I1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=NF(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:i.reduce((c,u,d)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let v=s[d]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const m=s[d];return p&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:e}}function NF(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Gx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(i.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function kF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Qd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const PF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AF=e=>PF.test(e);function TF(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?fp(e):e,o;if(n)if(AF(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Gx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=VN(n.substring(1),"/"):o=VN(n,t)}else o=t;return{pathname:o,search:MF(i),hash:IF(r)}}function VN(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function B2(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ux(e,t){let n=CF(e);return t?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function qx(e,t,n,i){i===void 0&&(i=!1);let r;typeof e=="string"?r=fp(e):(r=Ef({},e),Fn(!r.pathname||!r.pathname.includes("?"),B2("?","pathname","search",r)),Fn(!r.pathname||!r.pathname.includes("#"),B2("#","pathname","hash",r)),Fn(!r.search||!r.search.includes("#"),B2("#","search","hash",r)));let o=e===""||r.pathname==="",a=o?"/":r.pathname,s;if(a==null)s=n;else{let d=t.length-1;if(!i&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;r.pathname=h.join("/")}s=d>=0?t[d]:"/"}let l=TF(r,s),c=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Fl=e=>e.join("/").replace(/\/\/+/g,"/"),RF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,IF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function DF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vR=["post","put","patch","delete"];new Set(vR);const LF=["get",...vR];new Set(LF);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sf(){return Sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sf.apply(this,arguments)}const _y=ce.createContext(null),yR=ce.createContext(null),Ls=ce.createContext(null),by=ce.createContext(null),Ua=ce.createContext({outlet:null,matches:[],isDataRoute:!1}),_R=ce.createContext(null);function OF(e,t){let{relative:n}=t===void 0?{}:t;mp()||Fn(!1);let{basename:i,navigator:r}=ce.useContext(Ls),{hash:o,pathname:a,search:s}=wy(e,{relative:n}),l=a;return i!=="/"&&(l=a==="/"?i:Fl([i,a])),r.createHref({pathname:l,search:s,hash:o})}function mp(){return ce.useContext(by)!=null}function Yl(){return mp()||Fn(!1),ce.useContext(by).location}function bR(e){ce.useContext(Ls).static||ce.useLayoutEffect(e)}function Kf(){let{isDataRoute:e}=ce.useContext(Ua);return e?ZF():BF()}function BF(){mp()||Fn(!1);let e=ce.useContext(_y),{basename:t,future:n,navigator:i}=ce.useContext(Ls),{matches:r}=ce.useContext(Ua),{pathname:o}=Yl(),a=JSON.stringify(Ux(r,n.v7_relativeSplatPath)),s=ce.useRef(!1);return bR(()=>{s.current=!0}),ce.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){i.go(c);return}let d=qx(c,JSON.parse(a),o,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Fl([t,d.pathname])),(u.replace?i.replace:i.push)(d,u.state,u)},[t,i,a,o,e])}const FF=ce.createContext(null);function jF(e){let t=ce.useContext(Ua).outlet;return t&&ce.createElement(FF.Provider,{value:e},t)}function $F(){let{matches:e}=ce.useContext(Ua),t=e[e.length-1];return t?t.params:{}}function wy(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=ce.useContext(Ls),{matches:r}=ce.useContext(Ua),{pathname:o}=Yl(),a=JSON.stringify(Ux(r,i.v7_relativeSplatPath));return ce.useMemo(()=>qx(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function GF(e,t){return UF(e,t)}function UF(e,t,n,i){mp()||Fn(!1);let{navigator:r}=ce.useContext(Ls),{matches:o}=ce.useContext(Ua),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=Yl(),u;if(t){var d;let _=typeof t=="string"?fp(t):t;l==="/"||(d=_.pathname)!=null&&d.startsWith(l)||Fn(!1),u=_}else u=c;let h=u.pathname||"/",p=h;if(l!=="/"){let _=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(_.length).join("/")}let m=hF(e,{pathname:p}),v=WF(m&&m.map(_=>Object.assign({},_,{params:Object.assign({},s,_.params),pathname:Fl([l,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Fl([l,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,i);return t&&v?ce.createElement(by.Provider,{value:{location:Sf({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Pl.Pop}},v):v}function qF(){let e=XF(),t=DF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ce.createElement(ce.Fragment,null,ce.createElement("h2",null,"Unexpected Application Error!"),ce.createElement("h3",{style:{fontStyle:"italic"}},t),n?ce.createElement("pre",{style:r},n):null,null)}const zF=ce.createElement(qF,null);class HF extends ce.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?ce.createElement(Ua.Provider,{value:this.props.routeContext},ce.createElement(_R.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VF(e){let{routeContext:t,match:n,children:i}=e,r=ce.useContext(_y);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),ce.createElement(Ua.Provider,{value:t},i)}function WF(e,t,n,i){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,s=(r=n)==null?void 0:r.errors;if(s!=null){let u=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||Fn(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=n,m=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,h)=>{let p,m=!1,v=null,_=null;n&&(p=s&&d.route.id?s[d.route.id]:void 0,v=d.route.errorElement||zF,l&&(c<0&&h===0?(QF("route-fallback"),m=!0,_=null):c===h&&(m=!0,_=d.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,h+1)),E=()=>{let w;return p?w=v:m?w=_:d.route.Component?w=ce.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,ce.createElement(VF,{match:d,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?ce.createElement(HF,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:E(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):E()},null)}var wR=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wR||{}),xR=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(xR||{});function KF(e){let t=ce.useContext(_y);return t||Fn(!1),t}function YF(e){let t=ce.useContext(yR);return t||Fn(!1),t}function JF(e){let t=ce.useContext(Ua);return t||Fn(!1),t}function ER(e){let t=JF(),n=t.matches[t.matches.length-1];return n.route.id||Fn(!1),n.route.id}function XF(){var e;let t=ce.useContext(_R),n=YF(),i=ER();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function ZF(){let{router:e}=KF(wR.UseNavigateStable),t=ER(xR.UseNavigateStable),n=ce.useRef(!1);return bR(()=>{n.current=!0}),ce.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,Sf({fromRouteId:t},o)))},[e,t])}const WN={};function QF(e,t,n){WN[e]||(WN[e]=!0)}function ej(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function tj(e){let{to:t,replace:n,state:i,relative:r}=e;mp()||Fn(!1);let{future:o,static:a}=ce.useContext(Ls),{matches:s}=ce.useContext(Ua),{pathname:l}=Yl(),c=Kf(),u=qx(t,Ux(s,o.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(u);return ce.useEffect(()=>c(JSON.parse(d),{replace:n,state:i,relative:r}),[c,d,r,n,i]),null}function nj(e){return jF(e.context)}function Qo(e){Fn(!1)}function ij(e){let{basename:t="/",children:n=null,location:i,navigationType:r=Pl.Pop,navigator:o,static:a=!1,future:s}=e;mp()&&Fn(!1);let l=t.replace(/^\/*/,"/"),c=ce.useMemo(()=>({basename:l,navigator:o,static:a,future:Sf({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof i=="string"&&(i=fp(i));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:m="default"}=i,v=ce.useMemo(()=>{let _=Qd(u,l);return _==null?null:{location:{pathname:_,search:d,hash:h,state:p,key:m},navigationType:r}},[l,u,d,h,p,m,r]);return v==null?null:ce.createElement(Ls.Provider,{value:c},ce.createElement(by.Provider,{children:n,value:v}))}function rj(e){let{children:t,location:n}=e;return GF(D1(t),n)}new Promise(()=>{});function D1(e,t){t===void 0&&(t=[]);let n=[];return ce.Children.forEach(e,(i,r)=>{if(!ce.isValidElement(i))return;let o=[...t,r];if(i.type===ce.Fragment){n.push.apply(n,D1(i.props.children,o));return}i.type!==Qo&&Fn(!1),!i.props.index||!i.props.children||Fn(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=D1(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pv.apply(this,arguments)}function SR(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function oj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function aj(e,t){return e.button===0&&(!t||t==="_self")&&!oj(e)}const sj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cj="6";try{window.__reactRouterVersion=cj}catch{}const uj=ce.createContext({isTransitioning:!1}),dj="startTransition",KN=ZO[dj];function pj(e){let{basename:t,children:n,future:i,window:r}=e,o=ce.useRef();o.current==null&&(o.current=uF({window:r,v5Compat:!0}));let a=o.current,[s,l]=ce.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},u=ce.useCallback(d=>{c&&KN?KN(()=>l(d)):l(d)},[l,c]);return ce.useLayoutEffect(()=>a.listen(u),[a,u]),ce.useEffect(()=>ej(i),[i]),ce.createElement(ij,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:i})}const hj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hc=ce.forwardRef(function(t,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:s,target:l,to:c,preventScrollReset:u,viewTransition:d}=t,h=SR(t,sj),{basename:p}=ce.useContext(Ls),m,v=!1;if(typeof c=="string"&&fj.test(c)&&(m=c,hj))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),M=Qd(x.pathname,p);x.origin===w.origin&&M!=null?c=M+x.search+x.hash:v=!0}catch{}let _=OF(c,{relative:r}),b=vj(c,{replace:a,state:s,target:l,preventScrollReset:u,relative:r,viewTransition:d});function E(w){i&&i(w),w.defaultPrevented||b(w)}return ce.createElement("a",Pv({},h,{href:m||_,onClick:v||o?i:E,ref:n,target:l}))}),mj=ce.forwardRef(function(t,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:s,to:l,viewTransition:c,children:u}=t,d=SR(t,lj),h=wy(l,{relative:d.relative}),p=Yl(),m=ce.useContext(yR),{navigator:v,basename:_}=ce.useContext(Ls),b=m!=null&&yj(h)&&c===!0,E=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(w=w.toLowerCase(),x=x?x.toLowerCase():null,E=E.toLowerCase()),x&&_&&(x=Qd(x,_)||x);const M=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let B=w===E||!a&&w.startsWith(E)&&w.charAt(M)==="/",H=x!=null&&(x===E||!a&&x.startsWith(E)&&x.charAt(E.length)==="/"),R={isActive:B,isPending:H,isTransitioning:b},O=B?i:void 0,D;typeof o=="function"?D=o(R):D=[o,B?"active":null,H?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let A=typeof s=="function"?s(R):s;return ce.createElement(Hc,Pv({},d,{"aria-current":O,className:D,ref:n,style:A,to:l,viewTransition:c}),typeof u=="function"?u(R):u)});var L1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(L1||(L1={}));var YN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(YN||(YN={}));function gj(e){let t=ce.useContext(_y);return t||Fn(!1),t}function vj(e,t){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:s}=t===void 0?{}:t,l=Kf(),c=Yl(),u=wy(e,{relative:a});return ce.useCallback(d=>{if(aj(d,n)){d.preventDefault();let h=i!==void 0?i:kv(c)===kv(u);l(e,{replace:h,state:r,preventScrollReset:o,relative:a,viewTransition:s})}},[c,l,u,i,r,n,e,o,a,s])}function yj(e,t){t===void 0&&(t={});let n=ce.useContext(uj);n==null&&Fn(!1);let{basename:i}=gj(L1.useViewTransitionState),r=wy(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Qd(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Qd(n.nextLocation.pathname,i)||n.nextLocation.pathname;return I1(r.pathname,a)!=null||I1(r.pathname,o)!=null}const O1=`<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" id="Definitions_Empty" targetNamespace="http://bpmn.io/schema/bpmn">
  <bpmn:process id="Process_1" isExecutable="false">
    <bpmn:startEvent id="StartEvent_1" name="Inicio" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="180" y="160" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="184" y="206" width="28" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>`;function xy(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function _j(e,t,n,i){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?o(u.value):r(u.value).then(s,l)}c((i=i.apply(e,t||[])).next())})}const bj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class zx extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class wj extends zx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class JN extends zx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class XN extends zx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var B1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(B1||(B1={}));class xj{constructor(t,{headers:n={},customFetch:i,region:r=B1.Any}={}){this.url=t,this.headers=n,this.region=r,this.fetch=bj(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return _j(this,arguments,void 0,function*(n,i={}){var r;let o,a;try{const{headers:s,method:l,body:c,signal:u,timeout:d}=i;let h={},{region:p}=i;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(h["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let v;c&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(h["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(h["Content-Type"]="application/json",v=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?v=JSON.stringify(c):v=c;let _=u;d&&(a=new AbortController,o=setTimeout(()=>a.abort(),d),u?(_=a.signal,u.addEventListener("abort",()=>a.abort())):_=a.signal);const b=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:v,signal:_}).catch(M=>{throw new wj(M)}),E=b.headers.get("x-relay-error");if(E&&E==="true")throw new JN(b);if(!b.ok)throw new XN(b);let w=((r=b.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return w==="application/json"?x=yield b.json():w==="application/octet-stream"||w==="application/pdf"?x=yield b.blob():w==="text/event-stream"?x=b:w==="multipart/form-data"?x=yield b.formData():x=yield b.text(),{data:x,error:null,response:b}}catch(s){return{data:null,error:s,response:s instanceof XN||s instanceof JN?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var Ej=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Sj=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,s=null,l=null,c=o.status,u=o.statusText;if(o.ok){var d,h;if(n.method!=="HEAD"){var p;const b=await o.text();b===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?s=b:s=JSON.parse(b))}const v=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");v&&_&&_.length>1&&(l=parseInt(_[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,c=406,u="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var m;const v=await o.text();try{a=JSON.parse(v),Array.isArray(a)&&o.status===404&&(s=[],a=null,c=200,u="OK")}catch{o.status===404&&v===""?(c=204,u="No Content"):a={message:v}}if(a&&n.isMaybeSingle&&(!(a==null||(m=a.details)===null||m===void 0)&&m.includes("0 rows"))&&(a=null,c=200,u="OK"),a&&n.shouldThrowOnError)throw new Ej(a)}return{error:a,data:s,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(r=r.catch(o=>{var a;let s="";const l=o==null?void 0:o.cause;if(l){var c,u,d,h;const m=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",v=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";s=`${(d=o==null?void 0:o.name)!==null&&d!==void 0?d:"FetchError"}: ${o==null?void 0:o.message}`,s+=`

Caused by: ${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"Error"}: ${m}`,v&&(s+=` (${v})`),l!=null&&l.stack&&(s+=`
${l.stack}`)}else{var p;s=(p=o==null?void 0:o.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},Nj=class extends Sj{select(e){let t=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:r=i}={}){const o=r?`${r}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:o="text"}={}){var a;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${l}"; options=${s};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const ZN=new RegExp("[,()]");var gd=class extends Nj{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&ZN.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&ZN.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},kj=class{constructor(e,{headers:t={},schema:n,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:i}=t??{},r=n?"HEAD":"GET";let o=!1;const a=(e??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join(""),{url:s,headers:l}=this.cloneRequestState();return s.searchParams.set("select",a),i&&l.append("Prefer",`count=${i}`),new gd({method:r,url:s,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var i;const r="POST",{url:o,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),n||a.append("Prefer","missing=default"),Array.isArray(e)){const s=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(s.length>0){const l=[...new Set(s)].map(c=>`"${c}"`);o.searchParams.set("columns",l.join(","))}}return new gd({method:r,url:o,headers:a,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}={}){var o;const a="POST",{url:s,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&s.searchParams.set("on_conflict",t),i&&l.append("Prefer",`count=${i}`),r||l.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);s.searchParams.set("columns",u.join(","))}}return new gd({method:a,url:s,headers:l,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;const i="PATCH",{url:r,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new gd({method:i,url:r,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:i,headers:r}=this.cloneRequestState();return e&&r.append("Prefer",`count=${e}`),new gd({method:n,url:i,headers:r,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Pj=class NR{constructor(t,{headers:n={},schema:i,fetch:r}={}){this.url=t,this.headers=new Headers(n),this.schemaName=i,this.fetch=r}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new kj(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new NR(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:i=!1,get:r=!1,count:o}={}){var a;let s;const l=new URL(`${this.url}/rpc/${t}`);let c;const u=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(u)),d=i&&Object.values(n).some(u);d?(s="POST",c=n):i||r?(s=i?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(s="POST",c=n);const h=new Headers(this.headers);return d?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new gd({method:s,url:l,headers:h,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class Aj{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const r=i.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Tj="2.93.3",Cj=`realtime-js/${Tj}`,Rj="1.0.0",kR="2.0.0",QN=kR,F1=1e4,Mj=1e3,Ij=100;var bl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(bl||(bl={}));var ki;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ki||(ki={}));var ra;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ra||(ra={}));var j1;(function(e){e.websocket="websocket"})(j1||(j1={}));var Vc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vc||(Vc={}));class Dj{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,i;const r=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(t){var n,i;const r=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},a=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,n,i){var r,o;const a=t.topic,s=(r=t.ref)!==null&&r!==void 0?r:"",l=(o=t.join_ref)!==null&&o!==void 0?o:"",c=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+a.length+c.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let m=new DataView(p),v=0;m.setUint8(v++,this.KINDS.userBroadcastPush),m.setUint8(v++,l.length),m.setUint8(v++,s.length),m.setUint8(v++,a.length),m.setUint8(v++,c.length),m.setUint8(v++,d.length),m.setUint8(v++,n),Array.from(l,b=>m.setUint8(v++,b.charCodeAt(0))),Array.from(s,b=>m.setUint8(v++,b.charCodeAt(0))),Array.from(a,b=>m.setUint8(v++,b.charCodeAt(0))),Array.from(c,b=>m.setUint8(v++,b.charCodeAt(0))),Array.from(d,b=>m.setUint8(v++,b.charCodeAt(0)));var _=new Uint8Array(p.byteLength+i.byteLength);return _.set(new Uint8Array(p),0),_.set(new Uint8Array(i),p.byteLength),_.buffer}decode(t,n){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return n(i)}if(typeof t=="string"){const i=JSON.parse(t),[r,o,a,s,l]=i;return n({join_ref:r,ref:o,topic:a,event:s,payload:l})}return n({})}_binaryDecode(t){const n=new DataView(t),i=n.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,r)}}_decodeUserBroadcast(t,n,i){const r=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),s=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=i.decode(t.slice(l,l+r));l=l+r;const u=i.decode(t.slice(l,l+o));l=l+o;const d=i.decode(t.slice(l,l+a));l=l+a;const h=t.slice(l,t.byteLength),p=s===this.JSON_ENCODING?JSON.parse(i.decode(h)):h,m={type:this.BROADCAST_EVENT,event:u,payload:p};return a>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>n.includes(i)))}}class PR{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var vn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(vn||(vn={}));const e3=(e,t,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((o,a)=>(o[a]=Lj(a,e,t,r),o),{}):{}},Lj=(e,t,n,i)=>{const r=t.find(s=>s.name===e),o=r==null?void 0:r.type,a=n[e];return o&&!i.includes(o)?AR(o,a):$1(a)},AR=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return jj(t,n)}switch(e){case vn.bool:return Oj(t);case vn.float4:case vn.float8:case vn.int2:case vn.int4:case vn.int8:case vn.numeric:case vn.oid:return Bj(t);case vn.json:case vn.jsonb:return Fj(t);case vn.timestamp:return $j(t);case vn.abstime:case vn.date:case vn.daterange:case vn.int4range:case vn.int8range:case vn.money:case vn.reltime:case vn.text:case vn.time:case vn.timestamptz:case vn.timetz:case vn.tsrange:case vn.tstzrange:return $1(t);default:return $1(t)}},$1=e=>e,Oj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Bj=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Fj=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},jj=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let o;const a=e.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>AR(t,s))}return e},$j=e=>typeof e=="string"?e.replace(" ","T"):e,TR=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class F2{constructor(t,n,i={},r=F1){this.channel=t,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var t3;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(t3||(t3={}));class Kh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kh.syncState(this.state,r,o,a),this.pendingDiffs.forEach(l=>{this.state=Kh.syncDiff(this.state,l,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(i.diff,{},r=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Kh.syncDiff(this.state,r,o,a),s())}),this.onJoin((r,o,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:a})}),this.onLeave((r,o,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,r){const o=this.cloneDeep(t),a=this.transformState(n),s={},l={};return this.map(o,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const d=o[c];if(d){const h=u.map(_=>_.presence_ref),p=d.map(_=>_.presence_ref),m=u.filter(_=>p.indexOf(_.presence_ref)<0),v=d.filter(_=>h.indexOf(_.presence_ref)<0);m.length>0&&(s[c]=m),v.length>0&&(l[c]=v)}else s[c]=u}),this.syncDiff(o,{joins:s,leaves:l},i,r)}static syncDiff(t,n,i,r){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(o,(s,l)=>{var c;const u=(c=t[s])!==null&&c!==void 0?c:[];if(t[s]=this.cloneDeep(l),u.length>0){const d=t[s].map(p=>p.presence_ref),h=u.filter(p=>d.indexOf(p.presence_ref)<0);t[s].unshift(...h)}i(s,u,l)}),this.map(a,(s,l)=>{let c=t[s];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[s]=c,r(s,c,l),c.length===0&&delete t[s]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const r=t[i];return"metas"in r?n[i]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=r,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var n3;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(n3||(n3={}));var Yh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Yh||(Yh={}));var gs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(gs||(gs={}));class Id{constructor(t,n={config:{}},i){var r,o;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=ki.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new F2(this,ra.join,this.params,this.timeout),this.rejoinTimer=new PR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ki.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ki.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ki.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ki.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ki.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ra.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Kh(this),this.broadcastEndpointURL=TR(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,r,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ki.closed){const{config:{broadcast:a,presence:s,private:l}}=this.params,c=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(p=>p.filter))!==null&&r!==void 0?r:[],u=!!this.bindings[Yh.PRESENCE]&&this.bindings[Yh.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(gs.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(gs.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(gs.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,_=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,b=[];for(let E=0;E<_;E++){const w=v[E],{filter:{event:x,schema:M,table:B,filter:H}}=w,R=p&&p[E];if(R&&R.event===x&&Id.isFilterValueEqual(R.schema,M)&&Id.isFilterValueEqual(R.table,B)&&Id.isFilterValueEqual(R.filter,H))b.push(Object.assign(Object.assign({},w),{id:R.id}));else{this.unsubscribe(),this.state=ki.errored,t==null||t(gs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(gs.SUBSCRIBED);return}}).receive("error",p=>{this.state=ki.errored,t==null||t(gs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(gs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===ki.joined&&t===Yh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var r;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const c=await s.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,n={}){var i,r;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=t,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ki.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ra.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new F2(this,ra.leave,{},t),i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ki.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const r=new AbortController,o=setTimeout(()=>r.abort(),i),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(o),a}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new F2(this,t,n,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Ij){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var r,o;const a=t.toLocaleLowerCase(),{close:s,error:l,leave:c,join:u}=ra;if(i&&[s,l,c,u].indexOf(a)>=0&&i!==this._joinRef())return;let h=this._onMessage(a,n,i);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var m,v,_;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((_=(v=p.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(p=>p.callback(h,i)):(o=this.bindings[a])===null||o===void 0||o.filter(p=>{var m,v,_,b,E,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const x=p.id,M=(m=p.filter)===null||m===void 0?void 0:m.event;return x&&((v=n.ids)===null||v===void 0?void 0:v.includes(x))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const x=(E=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return x==="*"||x===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:v,table:_,commit_timestamp:b,type:E,errors:w}=m;h=Object.assign(Object.assign({},{schema:v,table:_,commit_timestamp:b,eventType:E,new:{},old:{},errors:w}),this._getPayloadRecords(m))}p.callback(h,i)})}_isClosed(){return this.state===ki.closed}_isJoined(){return this.state===ki.joined}_isJoining(){return this.state===ki.joining}_isLeaving(){return this.state===ki.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const r=t.toLocaleLowerCase(),o={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&Id.isEqual(r.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ra.close,{},t)}_onError(t){this._on(ra.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ki.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=e3(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=e3(t.columns,t.old_record)),n}}const j2=()=>{},Pg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Gj=[1e3,2e3,5e3,1e4],Uj=1e4,qj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zj{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=F1,this.transport=null,this.heartbeatIntervalMs=Pg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=j2,this.ref=0,this.reconnectTimer=null,this.vsn=QN,this.logger=j2,this.conn=null,this.sendBuffer=[],this.serializer=new Dj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...o)=>r(...o):(...o)=>fetch(...o),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${j1.websocket}`,this.httpEndpoint=TR(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Aj.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case bl.connecting:return Vc.Connecting;case bl.open:return Vc.Open;case bl.closing:return Vc.Closing;default:return Vc.Closed}}isConnected(){return this.connectionState()===Vc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,r=this.getChannels().find(o=>o.topic===i);if(r)return r;{const o=new Id(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:i,payload:r,ref:o}=t,a=()=>{this.encode(t,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${n} ${i} (${o})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Mj,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Pg.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:r,payload:o,ref:a}=n,s=a?`(${a})`:"",l=o.status||"";this.log("receive",`${l} ${i} ${r} ${s}`.trim(),o),this.channels.filter(c=>c._isMember(i)).forEach(c=>c._trigger(r,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===bl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bl.open||this.conn.readyState===bl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ra.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${t}${i}${r}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([qj],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,i=!1;if(t)n=t,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:Cj};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(ra.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(r){this.log("error",`error in ${t} callback`,r)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new PR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,r,o,a,s,l,c,u,d,h,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:F1,this.heartbeatIntervalMs=(r=t==null?void 0:t.heartbeatIntervalMs)!==null&&r!==void 0?r:Pg.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=t==null?void 0:t.heartbeatCallback)!==null&&s!==void 0?s:j2,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:QN,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>Gj[m-1]||Uj,this.vsn){case Rj:this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(m,v)=>v(JSON.stringify(m)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(m,v)=>v(JSON.parse(m));break;case kR:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Nf=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Hj(e,t,n){const i=new URL(t,e);if(n)for(const[r,o]of Object.entries(n))o!==void 0&&i.searchParams.set(r,o);return i.toString()}async function Vj(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Wj(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:r,body:o,headers:a}){const s=Hj(e.baseUrl,i,r),l=await Vj(e.auth),c=await t(s,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...l,...a},body:o?JSON.stringify(o):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){const p=d?h:void 0,m=p==null?void 0:p.error;throw new Nf((m==null?void 0:m.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:c.status,headers:c.headers,data:h}}}}function Ag(e){return e.join("")}var Kj=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Ag(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ag(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ag(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ag(e.namespace)}`}),!0}catch(t){if(t instanceof Nf&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Nf&&n.status===409)return;throw n}}};function Xu(e){return e.join("")}var Yj=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xu(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xu(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xu(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xu(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xu(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xu(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Nf&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Nf&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},Jj=class{constructor(e){var i;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Wj({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(i=e.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new Kj(this.client,t),this.tableOps=new Yj(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Ey=class extends Error{constructor(e,t="storage",n,i){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=i}};function Sy(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Tg=class extends Ey{constructor(e,t,n,i="storage"){super(e,i,t,n),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},CR=class extends Ey{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const Xj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Zj=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},G1=e=>{if(Array.isArray(e))return e.map(n=>G1(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[r]=G1(i)}),t},Qj=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function e7(e,t){if(kf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(kf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t7(e){var t=e7(e,"string");return kf(t)=="symbol"?t:t+""}function n7(e,t,n){return(t=t7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i3(Object(n),!0).forEach(function(i){n7(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const r3=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},i7=async(e,t,n,i)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e,o=r.status||500;if(typeof r.json=="function")r.json().then(a=>{const s=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||o+"";t(new Tg(r3(a),o,s,i))}).catch(()=>{if(i==="vectors"){const a=o+"";t(new Tg(r.statusText||`HTTP ${o} error`,o,a,i))}else{const a=o+"";t(new Tg(r.statusText||`HTTP ${o} error`,o,a,i))}});else{const a=o+"";t(new Tg(r.statusText||`HTTP ${o} error`,o,a,i))}}else t(new CR(r3(e),e,i))},r7=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!i?Et(Et({},r),n):(Zj(i)?(r.headers=Et({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(i)):r.body=i,t!=null&&t.duplex&&(r.duplex=t.duplex),Et(Et({},r),n))};async function gh(e,t,n,i,r,o,a){return new Promise((s,l)=>{e(n,r7(t,i,r,o)).then(c=>{if(!c.ok)throw c;if(i!=null&&i.noResolveJson)return c;if(a==="vectors"){const u=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>s(c)).catch(c=>i7(c,l,i,a))})}function RR(e="storage"){return{get:async(t,n,i,r)=>gh(t,"GET",n,i,r,void 0,e),post:async(t,n,i,r,o)=>gh(t,"POST",n,r,o,i,e),put:async(t,n,i,r,o)=>gh(t,"PUT",n,r,o,i,e),head:async(t,n,i,r)=>gh(t,"HEAD",n,Et(Et({},i),{},{noResolveJson:!0}),r,void 0,e),remove:async(t,n,i,r,o)=>gh(t,"DELETE",n,r,o,i,e)}}const o7=RR("storage"),{get:Pf,post:na,put:U1,head:a7,remove:Hx}=o7,Qr=RR("vectors");var gp=class{constructor(e,t={},n,i="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=Xj(n),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Sy(n))return{data:null,error:n};throw n}}},s7=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Sy(t))return{data:null,error:t};throw t}}};let MR;MR=Symbol.toStringTag;var l7=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[MR]="BlobDownloadBuilder",this.promise=null}asStream(){return new s7(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Sy(t))return{data:null,error:t};throw t}}};const c7={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},o3={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var u7=class extends gp{constructor(e,t={},n,i){super(e,t,i,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,i){var r=this;return r.handleOperation(async()=>{let o;const a=Et(Et({},o3),i);let s=Et(Et({},r.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",r.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),l&&!o.has("metadata")&&o.append("metadata",r.encodeMetadata(l))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,l&&(s["x-metadata"]=r.toBase64(r.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(s=Et(Et({},s),i.headers));const c=r._removeEmptyFolders(t),u=r._getFinalPath(c),d=await(e=="PUT"?U1:na)(r.fetch,`${r.url}/object/${u}`,o,Et({headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:c,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,i){var r=this;const o=r._removeEmptyFolders(e),a=r._getFinalPath(o),s=new URL(r.url+`/object/upload/sign/${a}`);return s.searchParams.set("token",t),r.handleOperation(async()=>{let l;const c=Et({upsert:o3.upsert},i),u=Et(Et({},r.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:o,fullPath:(await U1(r.fetch,s.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(e);const r=Et({},n.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const o=await na(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:r}),a=new URL(n.url+o.url),s=a.searchParams.get("token");if(!s)throw new Ey("No token returned by API");return{signedUrl:a.toString(),path:e,token:s}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var i=this;return i.handleOperation(async()=>await na(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}))}async copy(e,t,n){var i=this;return i.handleOperation(async()=>({path:(await na(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(e,t,n){var i=this;return i.handleOperation(async()=>{let r=i._getFinalPath(e),o=await na(i.fetch,`${i.url}/object/sign/${r}`,Et({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${i.url}${o.signedURL}${a}`)}})}async createSignedUrls(e,t,n){var i=this;return i.handleOperation(async()=>{const r=await na(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:e},{headers:i.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r.map(a=>Et(Et({},a),{},{signedUrl:a.signedURL?encodeURI(`${i.url}${a.signedURL}${o}`):null}))})}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),r=i?`?${i}`:"",o=this._getFinalPath(e),a=()=>Pf(this.fetch,`${this.url}/${n}/${o}${r}`,{headers:this.headers,noResolveJson:!0});return new l7(a,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>G1(await Pf(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await a7(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Sy(i)&&i instanceof CR){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&i.push(r);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&i.push(a);let s=i.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${s}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Hx(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var i=this;return i.handleOperation(async()=>{const r=Et(Et(Et({},c7),t),{},{prefix:e||""});return await na(i.fetch,`${i.url}/object/list/${i.bucketId}`,r,{headers:i.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const i=Et({},e);return await na(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const d7="2.93.3",Yf={"X-Client-Info":`storage-js/${d7}`};var p7=class extends gp{constructor(e,t={},n,i){const r=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const o=r.href.replace(/\/$/,""),a=Et(Et({},Yf),t);super(o,a,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await Pf(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Pf(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await na(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await U1(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await na(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Hx(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},h7=class extends gp{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=Et(Et({},Yf),t);super(i,r,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await na(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const i=n.toString(),r=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return await Pf(t.fetch,r,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Hx(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!Qj(e))throw new Ey("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Jj({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(r,o){const a=r[o];return typeof a!="function"?a:async(...s)=>{try{return{data:await a.apply(r,s),error:null}}catch(l){if(i)throw l;return{data:null,error:l}}}}})}},f7=class extends gp{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=Et(Et({},Yf),{},{"Content-Type":"application/json"},t);super(i,r,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await Qr.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await Qr.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},m7=class extends gp{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=Et(Et({},Yf),{},{"Content-Type":"application/json"},t);super(i,r,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},g7=class extends gp{constructor(e,t={},n){const i=e.replace(/\/$/,""),r=Et(Et({},Yf),{},{"Content-Type":"application/json"},t);super(i,r,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Qr.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},v7=class extends g7{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new y7(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},y7=class extends f7{constructor(e,t,n,i){super(e,t,i),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Et(Et({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Et(Et({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new _7(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},_7=class extends m7{constructor(e,t,n,i,r){super(e,t,r),this.vectorBucketName=n,this.indexName=i}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Et(Et({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Et(Et({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Et(Et({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Et(Et({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Et(Et({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},b7=class extends p7{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new u7(this.url,this.headers,e,this.fetch)}get vectors(){return new v7(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new h7(this.url+"/iceberg",this.headers,this.fetch)}};const IR="2.93.3",vd=30*1e3,q1=3,$2=q1*vd,w7="http://localhost:9999",x7="supabase.auth.token",E7={"X-Client-Info":`gotrue-js/${IR}`},z1="X-Supabase-Api-Version",DR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},S7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,N7=10*60*1e3;class Af extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function lt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class k7 extends Af{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function P7(e){return lt(e)&&e.name==="AuthApiError"}class Wc extends Af{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Os extends Af{constructor(t,n,i,r){super(t,i,r),this.name=n,this.status=i}}class Xr extends Os{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function G2(e){return lt(e)&&e.name==="AuthSessionMissingError"}class Zu extends Os{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cg extends Os{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Rg extends Os{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function A7(e){return lt(e)&&e.name==="AuthImplicitGrantRedirectError"}class a3 extends Os{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class T7 extends Os{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class H1 extends Os{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function U2(e){return lt(e)&&e.name==="AuthRetryableFetchError"}class s3 extends Os{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class V1 extends Os{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Av="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),l3=` 	
\r=`.split(""),C7=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<l3.length;t+=1)e[l3[t].charCodeAt(0)]=-2;for(let t=0;t<Av.length;t+=1)e[Av[t].charCodeAt(0)]=t;return e})();function c3(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Av[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Av[i]),t.queuedBits-=6}}function LR(e,t,n){const i=C7[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function u3(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=a=>{I7(a,i,n)};for(let a=0;a<e.length;a+=1)LR(e.charCodeAt(a),r,o);return t.join("")}function R7(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function M7(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}R7(i,t)}}function I7(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if(!(e>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Gd(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)LR(e.charCodeAt(r),n,i);return new Uint8Array(t)}function D7(e){const t=[];return M7(e,n=>t.push(n)),new Uint8Array(t)}function tu(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};return e.forEach(r=>c3(r,n,i)),c3(null,n,i),t.join("")}function L7(e){return Math.round(Date.now()/1e3)+e}function O7(){return Symbol("auth-callback")}const Wi=()=>typeof window<"u"&&typeof document<"u",Ic={tested:!1,writable:!1},OR=()=>{if(!Wi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ic.tested)return Ic.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ic.tested=!0,Ic.writable=!0}catch{Ic.tested=!0,Ic.writable=!1}return Ic.writable};function B7(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,o)=>{t[o]=r})}catch{}return n.searchParams.forEach((i,r)=>{t[r]=i}),t}const BR=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),F7=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",yd=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Dc=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Vi=async(e,t)=>{await e.removeItem(t)};class Ny{constructor(){this.promise=new Ny.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ny.promiseConstructor=Promise;function Mg(e){const t=e.split(".");if(t.length!==3)throw new V1("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!S7.test(t[i]))throw new V1("JWT not in base64url format");return{header:JSON.parse(u3(t[0])),payload:JSON.parse(u3(t[1])),signature:Gd(t[2]),raw:{header:t[0],payload:t[1]}}}async function j7(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function $7(e,t){return new Promise((i,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){i(a);return}}catch(a){if(!t(o,a)){r(a);return}}})()})}function G7(e){return("0"+e.toString(16)).substr(-2)}function U7(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let o=0;o<56;o++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,G7).join("")}async function q7(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}async function z7(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await q7(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qu(e,t,n=!1){const i=U7();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await yd(e,`${t}-code-verifier`,r);const o=await z7(i);return[o,i===o?"plain":"s256"]}const H7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function V7(e){const t=e.headers.get(z1);if(!t||!t.match(H7))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function W7(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function K7(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Y7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ed(e){if(!Y7.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function q2(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function J7(e,t){return new Proxy(e,{get:(n,i,r)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,r)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,r)}})}function d3(e){return JSON.parse(JSON.stringify(e))}const $c=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),X7=[502,503,504];async function p3(e){var t;if(!F7(e))throw new H1($c(e),0);if(X7.includes(e.status))throw new H1($c(e),e.status);let n;try{n=await e.json()}catch(o){throw new Wc($c(o),o)}let i;const r=V7(e);if(r&&r.getTime()>=DR["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new s3($c(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Xr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new s3($c(n),e.status,n.weak_password.reasons);throw new k7($c(n),e.status||500,i)}const Z7=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function _t(e,t,n,i){var r;const o=Object.assign({},i==null?void 0:i.headers);o[z1]||(o[z1]=DR["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const a=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(a.redirect_to=i.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Q7(e,t,n+s,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function Q7(e,t,n,i,r,o){const a=Z7(t,i,r,o);let s;try{s=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new H1($c(l),0)}if(s.ok||await p3(s),i!=null&&i.noResolveJson)return s;try{return await s.json()}catch(l){await p3(l)}}function ea(e){var t;let n=null;n9(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=L7(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function h3(e){const t=ea(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Sl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function e9(e){return{data:e,error:null}}function t9(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:o}=e,a=xy(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:o},l=Object.assign({},a);return{data:{properties:s,user:l},error:null}}function f3(e){return e}function n9(e){return e.access_token&&e.refresh_token&&e.expires_in}const z2=["global","local","others"];class i9{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=BR(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=z2[0]){if(z2.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${z2.join(", ")}`);try{return await _t(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(lt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await _t(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Sl})}catch(i){if(lt(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=xy(t,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await _t(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:t9,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(lt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await _t(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Sl})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,r,o,a,s,l;try{const c={nextPage:null,lastPage:0,total:0},u=await _t(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:f3});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(m.split(";")[1].split("=")[1]);c[`${_}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(lt(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){ed(t);try{return await _t(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Sl})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ed(t);try{return await _t(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Sl})}catch(i){if(lt(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){ed(t);try{return await _t(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Sl})}catch(i){if(lt(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){ed(t.userId);try{const{data:n,error:i}=await _t(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ed(t.userId),ed(t.id);try{return{data:await _t(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,r,o,a,s,l;try{const c={nextPage:null,lastPage:0,total:0},u=await _t(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:f3});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(m.split(";")[1].split("=")[1]);c[`${_}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(lt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await _t(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await _t(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await _t(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(lt(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await _t(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await _t(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(lt(n))return{data:null,error:n};throw n}}}function m3(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const td={debug:!!(globalThis&&OR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class FR extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class r9 extends FR{}async function o9(e,t,n){td.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),td.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){td.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{td.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw td.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new r9(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(td.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function a9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function jR(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function s9(e){return parseInt(e,16)}function l9(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function c9(e){var t;const{chainId:n,domain:i,expirationTime:r,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=jR(e.address),m=u?`${u}://${i}`:i,v=e.statement?`${e.statement}
`:"",_=`${m} wants you to sign in with your Ethereum account:
${p}

${v}`;let b=`URI: ${d}
Version: ${h}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(r&&(b+=`
Expiration Time: ${r.toISOString()}`),s&&(b+=`
Not Before: ${s.toISOString()}`),l&&(b+=`
Request ID: ${l}`),c){let E=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);E+=`
- ${w}`}b+=E}return`${_}
${b}`}class mi extends Error{constructor({message:t,code:n,cause:i,name:r}){var o;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(o=r??(i instanceof Error?i.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Tv extends mi{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function u9({error:e,options:t}){var n,i,r;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new mi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new mi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new mi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new mi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new mi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new mi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new mi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new mi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if($R(a)){if(o.rp.id!==a)return new mi({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new mi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new mi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new mi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function d9({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new mi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new mi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if($R(i)){if(n.rpId!==i)return new mi({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new mi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new mi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class p9{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const h9=new p9;function f9(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,r=xy(e,["challenge","user","excludeCredentials"]),o=Gd(t).buffer,a=Object.assign(Object.assign({},n),{id:Gd(n.id).buffer}),s=Object.assign(Object.assign({},r),{challenge:o,user:a});if(i&&i.length>0){s.excludeCredentials=new Array(i.length);for(let l=0;l<i.length;l++){const c=i[l];s.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Gd(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function m9(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=xy(e,["challenge","allowCredentials"]),r=Gd(t).buffer,o=Object.assign(Object.assign({},i),{challenge:r});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const s=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:Gd(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function g9(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:tu(new Uint8Array(e.response.attestationObject)),clientDataJSON:tu(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function v9(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),r=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:tu(new Uint8Array(r.authenticatorData)),clientDataJSON:tu(new Uint8Array(r.clientDataJSON)),signature:tu(new Uint8Array(r.signature)),userHandle:r.userHandle?tu(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function $R(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function g3(){var e,t;return!!(Wi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function y9(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Tv("Browser returned unexpected credential type",t)}:{data:null,error:new Tv("Empty credential response",t)}}catch(t){return{data:null,error:u9({error:t,options:e})}}}async function _9(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Tv("Browser returned unexpected credential type",t)}:{data:null,error:new Tv("Empty credential response",t)}}catch(t){return{data:null,error:d9({error:t,options:e})}}}const b9={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},w9={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Cv(...e){const t=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of e)if(r)for(const o in r){const a=r[o];if(a!==void 0)if(Array.isArray(a))i[o]=a;else if(n(a))i[o]=a;else if(t(a)){const s=i[o];t(s)?i[o]=Cv(s,a):i[o]=Cv(a)}else i[o]=a}return i}function x9(e,t){return Cv(b9,e,t||{})}function E9(e,t){return Cv(w9,e,t||{})}class S9{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:r},o){var a;try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:l};const c=r??h9.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;if(!u.name){const d=i;if(d)u.name=`${u.id}:${d}`;else{const p=(await this.client.getUser()).data.user,m=((a=p==null?void 0:p.user_metadata)===null||a===void 0?void 0:a.name)||(p==null?void 0:p.email)||(p==null?void 0:p.id)||"User";u.name=`${u.id}:${m}`}}u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=x9(s.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:d,error:h}=await y9({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=E9(s.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:d,error:h}=await _9(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(s){return lt(s)?{data:null,error:s}:{data:null,error:new Wc("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},o){if(!n)return{data:null,error:new Af("rpId is required for WebAuthn authentication")};try{if(!g3())return{data:null,error:new Wc("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:r},{request:o});if(!a)return{data:null,error:s};const{webauthn:l}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:i,credential_response:l.credential_response}})}catch(a){return lt(a)?{data:null,error:a}:{data:null,error:new Wc("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},o){if(!n)return{data:null,error:new Af("rpId is required for WebAuthn registration")};try{if(!g3())return{data:null,error:new Wc("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:s};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:r},{create:o});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:i,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return lt(a)?{data:null,error:a}:{data:null,error:new Wc("Unexpected error in register",a)}}}}a9();const N9={url:w7,storageKey:x7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:E7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function v3(e,t,n){return await n()}const nd={};class Tf{get jwks(){var t,n;return(n=(t=nd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){nd[this.storageKey]=Object.assign(Object.assign({},nd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=nd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){nd[this.storageKey]=Object.assign(Object.assign({},nd[this.storageKey]),{cachedAt:t})}constructor(t){var n,i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},N9),t);if(this.storageKey=o.storageKey,this.instanceID=(n=Tf.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Tf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Wi()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new i9({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=BR(o.fetch),this.lock=o.lock||v3,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Wi()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=o9:this.lock=v3,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new S9(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:OR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=m3(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=m3(this.memoryStorage)),Wi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(s){this._debug("#broadcastChannel","error",s)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${IR}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},i="none";if(Wi()&&(n=B7(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),Wi()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),A7(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:a,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return lt(n)?this._returnResult({error:n}):this._returnResult({error:new Wc("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,r;try{const o=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:ea}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(lt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,i,r;try{let o;if("email"in t){const{email:u,password:d,options:h}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Qu(this.storage,this.storageKey)),o=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},xform:ea})}else if("phone"in t){const{phone:u,password:d,options:h}=t;o=await _t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},channel:(r=h==null?void 0:h.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ea})}else throw new Cg("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return await Vi(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),lt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:a,options:s}=t;n=await _t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:h3})}else if("phone"in t){const{phone:o,password:a,options:s}=t;n=await _t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:h3})}else throw new Cg("You must provide either an email or phone number and a password");const{data:i,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!i||!i.session||!i.user){const o=new Zu;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,i,r,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,r,o,a,s,l,c,u,d,h;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:v,wallet:_,statement:b,options:E}=t;let w;if(Wi())if(typeof _=="object")w=_;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")w=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=_}const x=new URL((n=E==null?void 0:E.url)!==null&&n!==void 0?n:window.location.href),M=await w.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=jR(M[0]);let H=(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!H){const O=await w.request({method:"eth_chainId"});H=s9(O)}const R={domain:x.host,address:B,statement:b,uri:x.href,version:"1",chainId:H,nonce:(r=E==null?void 0:E.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(a=(o=E==null?void 0:E.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=E==null?void 0:E.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=E==null?void 0:E.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=c9(R),m=await w.request({method:"personal_sign",params:[l9(p),B]})}try{const{data:v,error:_}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:ea});if(_)throw _;if(!v||!v.session||!v.user){const b=new Zu;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:_})}catch(v){if(lt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var n,i,r,o,a,s,l,c,u,d,h,p;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:_,wallet:b,statement:E,options:w}=t;let x;if(Wi())if(typeof b=="object")x=b;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))x=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=b}const M=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const B=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),E?{statement:E}:null));let H;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")H=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)H=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)m=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),v=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${M.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(r=(i=w==null?void 0:w.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const B=await x.signMessage(new TextEncoder().encode(m),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=B}}try{const{data:_,error:b}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:tu(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ea});if(b)throw b;if(!_||!_.session||!_.user){const E=new Zu;return this._returnResult({data:{user:null,session:null},error:E})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:b})}catch(_){if(lt(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const n=await Dc(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new T7;const{data:o,error:a}=await _t(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:ea});if(await Vi(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new Zu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:r??null}),error:a})}catch(o){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),lt(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:i,token:r,access_token:o,nonce:a}=t,s=await _t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ea}),{data:l,error:c}=s;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Zu;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,i,r,o,a;try{if("email"in t){const{email:s,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Qu(this.storage,this.storageKey));const{error:d}=await _t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:s,options:l}=t,{data:c,error:u}=await _t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Cg("You must provide either an email or phone number.")}catch(s){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),lt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(t){var n,i;try{let r,o;"options"in t&&(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:a,error:s}=await _t(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:ea});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(lt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(t){var n,i,r,o,a;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await Qu(this.storage,this.storageKey));const c=await _t(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:e9});return!((o=c.data)===null||o===void 0)&&o.url&&Wi()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(s){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),lt(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new Xr;const{error:r}=await _t(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(t){if(lt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:r,options:o}=t,{error:a}=await _t(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:i,type:r,options:o}=t,{data:a,error:s}=await _t(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s})}throw new Cg("You must provide either an email or phone number and a type")}catch(n){if(lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Dc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<$2:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const a=await Dc(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=q2()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=J7(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:r,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await _t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Sl}):await this._useSession(async n=>{var i,r,o;const{data:a,error:s}=n;if(s)throw s;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xr}:await _t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0,xform:Sl})})}catch(n){if(lt(n))return G2(n)&&(await this._removeSession(),await Vi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:r,error:o}=i;if(o)throw o;if(!r.session)throw new Xr;const a=r.session;let s=null,l=null;this.flowType==="pkce"&&t.email!=null&&([s,l]=await Qu(this.storage,this.storageKey));const{data:c,error:u}=await _t(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:s,code_challenge_method:l}),jwt:a.access_token,xform:Sl});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),lt(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Xr;const n=Date.now()/1e3;let i=n,r=!0,o=null;const{payload:a}=Mg(t.access_token);if(a.exp&&(i=a.exp,r=i<=n),r){const{data:s,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:l}=await this._getUser(t.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});o={access_token:t.access_token,refresh_token:t.refresh_token,user:s.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(lt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:a,error:s}=n;if(s)throw s;t=(i=a.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Xr;const{data:r,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(lt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Wi())throw new Rg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Rg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new a3("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Rg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new a3("No code detected.");const{data:E,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:o,refresh_token:a,expires_in:s,expires_at:l,token_type:c}=t;if(!o||!s||!a||!c)throw new Rg("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(s);let h=u+d;l&&(h=parseInt(l));const p=h-u;p*1e3<=vd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:v,error:_}=await this._getUser(o);if(_)throw _;const b={provider_token:i,provider_refresh_token:r,access_token:o,expires_in:d,expires_at:h,refresh_token:a,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:t.type},error:null})}catch(i){if(lt(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Dc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o&&!G2(o))return this._returnResult({error:o});const a=(i=r.session)===null||i===void 0?void 0:i.access_token;if(a){const{error:s}=await this.admin.signOut(a,t);if(s&&!(P7(s)&&(s.status===404||s.status===401||s.status===403)||G2(s)))return this._returnResult({error:s})}return t!=="others"&&(await this._removeSession(),await Vi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=O7(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,r;try{const{data:{session:o},error:a}=n;if(a)throw a;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await Qu(this.storage,this.storageKey,!0));try{return await _t(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),lt(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:r}=await this._useSession(async o=>{var a,s,l,c,u;const{data:d,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await _t(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return Wi()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(lt(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:r,data:{session:o}}=n;if(r)throw r;const{options:a,provider:s,token:l,access_token:c,nonce:u}=t,d=await _t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o==null?void 0:o.access_token)!==null&&i!==void 0?i:void 0,body:{provider:s,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ea}),{data:h,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Zu}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(r){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),lt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,r;const{data:o,error:a}=n;if(a)throw a;return await _t(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await $7(async r=>(r>0&&await j7(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await _t(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ea})),(r,o)=>{const a=200*Math.pow(2,r);return o&&U2(o)&&Date.now()+a-i<vd})}catch(i){if(this._debug(n,"error",i),lt(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),Wi()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await Dc(this.storage,this.storageKey);if(r&&this.userStorage){let a=await Dc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:r.user},await yd(this.userStorage,this.storageKey+"-user",a)),r.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:q2()}else if(r&&!r.user&&!r.user){const a=await Dc(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(r.user=a.user,await Vi(this.storage,this.storageKey+"-user"),await yd(this.storage,this.storageKey,r)):r.user=q2()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const o=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$2;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${$2}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),U2(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(r.access_token);!s&&(a!=null&&a.user)?(r.user=a.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new Xr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Ny;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new Xr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(r,"error",o),lt(o)){const a={data:null,error:o};return U2(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,n,i=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(t,n)}catch(l){o.push(l)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Vi(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await yd(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const o=d3(r);await yd(this.storage,this.storageKey,o)}else{const r=d3(n);await yd(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Vi(this.storage,this.storageKey),await Vi(this.storage,this.storageKey+"-code-verifier"),await Vi(this.storage,this.storageKey+"-user"),this.userStorage&&await Vi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Wi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),vd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-t)/vd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${vd}ms, refresh threshold is ${q1} ticks`),r<=q1&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof FR)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,a]=await Qu(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(s.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);r.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;return o?this._returnResult({data:null,error:o}):await _t(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,r;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await _t(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?g9(t.webauthn.credential_response):v9(t.webauthn.credential_response)})}:{code:t.code}),{data:s,error:l}=await _t(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await _t(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:f9(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:m9(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])r.all.push(o),o.status==="verified"&&r[o.factor_type].push(o);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,i,r,o;if(t)try{const{payload:p}=Mg(t);let m=null;p.aal&&(m=p.aal);let v=m;const{data:{user:_},error:b}=await this.getUser(t);if(b)return this._returnResult({data:null,error:b});((i=(n=_==null?void 0:_.factors)===null||n===void 0?void 0:n.filter(x=>x.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(v="aal2");const w=p.amr||[];return{data:{currentLevel:m,nextLevel:v,currentAuthenticationMethods:w},error:null}}catch(p){if(lt(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:a},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Mg(a.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((o=(r=a.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(u="aal2");const h=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?await _t(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Xr})})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:r},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!r)return this._returnResult({data:null,error:new Xr});const a=await _t(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Wi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(lt(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:r},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!r)return this._returnResult({data:null,error:new Xr});const a=await _t(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Wi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(lt(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await _t(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Xr})})}catch(t){if(lt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?(await _t(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Xr})})}catch(n){if(lt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(s=>s.kid===t);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(s=>s.kid===t),i&&this.jwks_cached_at+N7>r)return i;const{data:o,error:a}=await _t(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=r,i=o.keys.find(s=>s.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});i=p.session.access_token}const{header:r,payload:o,signature:a,raw:{header:s,payload:l}}=Mg(i);n!=null&&n.allowExpired||W7(o.exp);const c=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:p}=await this.getUser(i);if(p)throw p;return{data:{claims:o,header:r,signature:a},error:null}}const u=K7(r.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,a,D7(`${s}.${l}`)))throw new V1("Invalid JWT signature");return{data:{claims:o,header:r,signature:a},error:null}}catch(i){if(lt(i))return this._returnResult({data:null,error:i});throw i}}}Tf.nextInstanceID={};const k9=Tf,P9="2.93.3";let Oh="";typeof Deno<"u"?Oh="deno":typeof document<"u"?Oh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Oh="react-native":Oh="node";const A9={"X-Client-Info":`supabase-js-${Oh}/${P9}`},T9={headers:A9},C9={schema:"public"},R9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M9={};function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}function I9(e,t){if(Cf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Cf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D9(e){var t=I9(e,"string");return Cf(t)=="symbol"?t:t+""}function L9(e,t,n){return(t=D9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y3(Object(n),!0).forEach(function(i){L9(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const O9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),B9=()=>Headers,F9=(e,t,n)=>{const i=O9(n),r=B9();return async(o,a)=>{var s;const l=(s=await t())!==null&&s!==void 0?s:e;let c=new r(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(o,Hn(Hn({},a),{},{headers:c}))}};function j9(e){return e.endsWith("/")?e:e+"/"}function $9(e,t){var n,i;const{db:r,auth:o,realtime:a,global:s}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Hn(Hn({},l),r),auth:Hn(Hn({},c),o),realtime:Hn(Hn({},u),a),storage:{},global:Hn(Hn(Hn({},d),s),{},{headers:Hn(Hn({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(i=s==null?void 0:s.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function G9(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(j9(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var U9=class extends k9{constructor(e){super(e)}},q9=class{constructor(e,t,n){var i,r;this.supabaseUrl=e,this.supabaseKey=t;const o=G9(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,s={db:C9,realtime:M9,auth:Hn(Hn({},R9),{},{storageKey:a}),global:T9},l=$9(n??{},s);if(this.storageKey=(i=l.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=l.global.headers)!==null&&r!==void 0?r:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=F9(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Hn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new Pj(new URL("rest/v1",o).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new b7(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new xj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:i}=await e.auth.getSession();return(t=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:r,storageKey:o,flowType:a,lock:s,debug:l,throwOnError:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new U9({url:this.authUrl.href,headers:Hn(Hn({},h),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:r,flowType:a,lock:s,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new zj(this.realtimeUrl.href,Hn(Hn({},e),{},{params:Hn(Hn({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const z9=(e,t,n)=>new q9(e,t,n);function H9(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}H9()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const V9="https://ydiwxlrkrmygpdfacpkt.supabase.co",W9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkaXd4bHJrcm15Z3BkZmFjcGt0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwNzAwMTIsImV4cCI6MjA4NTY0NjAxMn0.uMqOpfKiRSpyaG0Da47KZWI5rOm7_Negsd5VU8J8RiI",Li=z9(V9,W9);async function K9(){const{data:e,error:t}=await Li.from("companies").select("*").order("created_at",{ascending:!0});return t?(console.log(" Supabase no conectado, usando localStorage"),JSON.parse(localStorage.getItem("bpmn_companies")||"[]")):e||[]}async function Y9(e){const{data:t,error:n}=await Li.from("companies").insert([{name:e.name,color_index:e.colorIndex||0}]).select().single();if(n){console.log(" Supabase no conectado, criando empresa no localStorage");const i=JSON.parse(localStorage.getItem("bpmn_companies")||"[]"),r={id:`local_company_${Date.now()}`,name:e.name,color_index:e.colorIndex||0,created_at:new Date().toISOString()};return i.push(r),localStorage.setItem("bpmn_companies",JSON.stringify(i)),console.log(" Empresa criada no localStorage!"),r}return t}async function J9(e,t){const{data:n,error:i}=await Li.from("companies").update({name:t.name,color_index:t.colorIndex,updated_at:new Date().toISOString()}).eq("id",e).select().single();return i?(console.error("Error updating company:",i),null):n}async function X9(e){const{error:t}=await Li.from("companies").delete().eq("id",e);return t?(console.error("Error deleting company:",t),!1):!0}async function Bh(){const{data:e,error:t}=await Li.from("projects").select("*").order("created_at",{ascending:!0});return t?(console.error("Error fetching projects (usando localStorage):",t),JSON.parse(localStorage.getItem("bpmn_projects")||"[]")):e||[]}async function Z9(e){const{data:t,error:n}=await Li.from("projects").select("*").eq("id",e).single();return n?(console.error("Error fetching project (usando localStorage):",n),JSON.parse(localStorage.getItem("bpmn_projects")||"[]").find(o=>o.id===e)||null):t}async function W1(e){const{data:t,error:n}=await Li.from("projects").insert([{name:e.name,xml:e.xml,company_id:e.companyId,parent_id:e.parentId||null,level:e.level||0,is_root:e.isRoot||!1,is_template:e.isTemplate||!1}]).select().single();if(n){console.error("Error creating project (usando localStorage):",n);const i=JSON.parse(localStorage.getItem("bpmn_projects")||"[]"),r={id:`local_${Date.now()}`,name:e.name,xml:e.xml,company_id:e.companyId,parent_id:e.parentId||null,level:e.level||0,is_root:e.isRoot||!1,is_template:e.isTemplate||!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i.push(r),localStorage.setItem("bpmn_projects",JSON.stringify(i)),console.log(" Projeto criado no localStorage!"),r}return t}async function Kc(e,t){const n={updated_at:new Date().toISOString()};t.name!==void 0&&(n.name=t.name),t.xml!==void 0&&(n.xml=t.xml),t.companyId!==void 0&&(n.company_id=t.companyId),t.parentId!==void 0&&(n.parent_id=t.parentId),t.level!==void 0&&(n.level=t.level),t.isRoot!==void 0&&(n.is_root=t.isRoot);const{data:i,error:r}=await Li.from("projects").update(n).eq("id",e).select().single();if(r){console.log(" Supabase no conectado, usando localStorage como fallback");try{const o=JSON.parse(localStorage.getItem("bpmn_projects")||"[]"),a=o.findIndex(s=>s.id===e);return a>=0?(o[a]={...o[a],...n,name:t.name!==void 0?t.name:o[a].name,xml:t.xml!==void 0?t.xml:o[a].xml,company_id:t.companyId!==void 0?t.companyId:o[a].company_id,parent_id:t.parentId!==void 0?t.parentId:o[a].parent_id,level:t.level!==void 0?t.level:o[a].level,is_root:t.isRoot!==void 0?t.isRoot:o[a].is_root},localStorage.setItem("bpmn_projects",JSON.stringify(o)),console.log(" Salvo no localStorage!",{id:e,updates:t}),o[a]):(console.error("Projeto no encontrado no localStorage:",e),null)}catch(o){return console.error("Error salvando no localStorage:",o),null}}return i}async function _3(e){const{error:t}=await Li.from("projects").delete().eq("id",e);return t?(console.error("Error deleting project:",t),!1):!0}function Gc(e){return e?{id:e.id,name:e.name,xml:e.xml,companyId:e.company_id,parentId:e.parent_id,level:e.level,isRoot:e.is_root,isTemplate:e.is_template,createdAt:e.created_at,updatedAt:e.updated_at}:null}function Q9(e){return e?{id:e.id,name:e.name,colorIndex:e.color_index,createdAt:e.created_at}:null}const H2=[{bg:"bg-indigo-500",light:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700",gradient:"from-indigo-500 to-indigo-600"},{bg:"bg-emerald-500",light:"bg-emerald-50",border:"border-emerald-300",text:"text-emerald-700",gradient:"from-emerald-500 to-emerald-600"},{bg:"bg-amber-500",light:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",gradient:"from-amber-500 to-amber-600"},{bg:"bg-rose-500",light:"bg-rose-50",border:"border-rose-300",text:"text-rose-700",gradient:"from-rose-500 to-rose-600"},{bg:"bg-cyan-500",light:"bg-cyan-50",border:"border-cyan-300",text:"text-cyan-700",gradient:"from-cyan-500 to-cyan-600"},{bg:"bg-violet-500",light:"bg-violet-50",border:"border-violet-300",text:"text-violet-700",gradient:"from-violet-500 to-violet-600"}];function e$(){const e=Kf(),[t,n]=ce.useState([]),[i,r]=ce.useState([]),[o,a]=ce.useState(!0),[s,l]=ce.useState(null),[c,u]=ce.useState(null),[d,h]=ce.useState(""),[p,m]=ce.useState(!1),[v,_]=ce.useState(null),[b,E]=ce.useState(""),[w,x]=ce.useState({}),M=ce.useRef({}),B=ce.useRef({}),[H,R]=ce.useState(!1),[O,D]=ce.useState(null),[A,L]=ce.useState(""),[$,Z]=ce.useState(null),[me,ge]=ce.useState(null),pe=ce.useCallback(async()=>{a(!0),l(null);try{const[q,Te]=await Promise.all([K9(),Bh()]),_e=q.map(Q9),oe=Te.map(Gc);r(_e),n(oe)}catch(q){console.error("Erro ao carregar dados:",q),l("Erro ao carregar dados do banco de dados")}finally{a(!1)}},[]);ce.useEffect(()=>{pe()},[pe]);const te=ce.useCallback(()=>{const q={};Object.keys(M.current).forEach(Te=>{const _e=M.current[Te];if(!_e)return;const oe=_e.getBoundingClientRect();Object.keys(B.current).forEach(X=>{const he=B.current[X];if(he){const se=t.find(Ne=>Ne.id===X);if((se==null?void 0:se.companyId)===Te){const Ne=he.getBoundingClientRect();q[X]={x:Ne.left-oe.left+Ne.width/2,y:Ne.top-oe.top+Ne.height/2,width:Ne.width,height:Ne.height,top:Ne.top-oe.top,bottom:Ne.top-oe.top+Ne.height,left:Ne.left-oe.left,right:Ne.left-oe.left+Ne.width,companyId:Te}}}})}),x(q)},[t]);ce.useEffect(()=>{const q=setTimeout(te,100),Te=setTimeout(te,400);window.addEventListener("resize",te);const _e=new ResizeObserver(()=>{te()});return document.querySelector("aside")&&_e.observe(document.querySelector("aside")),()=>{clearTimeout(q),clearTimeout(Te),window.removeEventListener("resize",te),_e.disconnect()}},[t,i,te]);const le=ce.useCallback(q=>{const Te=[];return t.filter(oe=>oe.companyId===q).forEach(oe=>{if(oe.parentId&&w[oe.id]&&w[oe.parentId]){const X=w[oe.parentId],he=w[oe.id];if(X.companyId!==q||he.companyId!==q)return;let se,Ne,Me,Ce;he.top>X.bottom-10?(se=X.x,Ne=X.bottom,Me=he.x,Ce=he.top):he.left>X.right-10?(se=X.right,Ne=X.y,Me=he.left,Ce=he.y):he.right<X.left+10?(se=X.left,Ne=X.y,Me=he.right,Ce=he.y):(se=X.x,Ne=X.top,Me=he.x,Ce=he.bottom),Te.push({id:`${oe.parentId}-${oe.id}`,parentId:oe.parentId,childId:oe.id,startX:se,startY:Ne,endX:Me,endY:Ce,level:oe.level||1})}}),Te},[t,w]),ye=async()=>{await Y9({name:A,colorIndex:i.length%H2.length})&&await pe(),R(!1),L("")},we=async()=>{await J9(O.id,{name:A}),await pe(),D(null),L("")},I=async q=>{const Te=t.filter(_e=>_e.companyId===q);for(const _e of Te)await _3(_e.id);await X9(q),await pe(),ge(null)},z=(q,Te)=>t.filter(_e=>_e.id!==q&&_e.companyId===Te),K=q=>{Z(q),h("Novo Diagrama"),m(!0)},ee=async()=>{const q=await W1({name:d,xml:O1,companyId:$,level:0,parentId:null,isRoot:!0,isTemplate:!1});q&&(m(!1),h(""),Z(null),e(`/editor/${q.id}`))},T=q=>{e(`/editor/${q}`)},N=async q=>{const Te=t.filter(_e=>_e.parentId===q);for(const _e of Te)await Kc(_e.id,{parentId:null,level:0});await _3(q),await pe(),u(null)},P=async()=>{if(v){const q=t.find(_e=>_e.id===b),Te=(q==null?void 0:q.level)??0;await Kc(v,{parentId:b||null,level:b?Te+1:0,isRoot:!b}),await pe()}_(null),E("")},j=q=>q?new Date(q).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}):"",Y=q=>{const Te=t.find(_e=>_e.id===q);return(Te==null?void 0:Te.name)||"Desconhecido"},ae=q=>{const Te=[{gradient:"from-green-500 to-emerald-600",border:"border-green-400",bg:"bg-green-500",light:"bg-green-50"},{gradient:"from-blue-500 to-indigo-600",border:"border-blue-400",bg:"bg-blue-500",light:"bg-blue-50"},{gradient:"from-purple-500 to-violet-600",border:"border-purple-400",bg:"bg-purple-500",light:"bg-purple-50"},{gradient:"from-orange-500 to-amber-600",border:"border-orange-400",bg:"bg-orange-500",light:"bg-orange-50"},{gradient:"from-pink-500 to-rose-600",border:"border-pink-400",bg:"bg-pink-500",light:"bg-pink-50"}];return Te[q%Te.length]},ke=q=>{const Te=["#22c55e","#3b82f6","#8b5cf6","#f97316","#ec4899"];return Te[(q-1)%Te.length]||"#64748b"},Ae=ce.useMemo(()=>{const q={};return i.forEach(Te=>{q[Te.id]=t.filter(_e=>_e.companyId===Te.id).sort((_e,oe)=>{const X=_e.level??0,he=oe.level??0;return X!==he?X-he:new Date(oe.updatedAt||0)-new Date(_e.updatedAt||0)})}),q},[t,i]),Le=t.find(q=>q.id===v);return o?g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:g.jsxs("div",{className:"flex flex-col items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 border-4 border-fyness-primary border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"text-slate-600",children:"Carregando dados..."})]})}):s?g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:g.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),g.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Erro de Conexo"}),g.jsx("p",{className:"text-slate-500 mb-4",children:s}),g.jsx("button",{onClick:pe,className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors",children:"Tentar Novamente"})]})}):g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[g.jsx("header",{className:"bg-white border-b border-slate-200 shadow-sm",children:g.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-fyness-primary to-fyness-secondary rounded-xl flex items-center justify-center",children:g.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"BPMN Holding"}),g.jsx("p",{className:"text-sm text-slate-500",children:"Gesto de Processos Empresariais"})]})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[g.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Supabase"]}),g.jsxs("button",{onClick:()=>{D(null),L(""),R(!0)},className:"flex items-center gap-2 px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors text-sm font-medium",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nova Empresa"]}),g.jsxs("span",{className:"text-sm text-slate-500",children:[i.length," empresa",i.length!==1?"s":"","  ",t.length," fluxo",t.length!==1?"s":""]})]})]})})}),g.jsx("main",{className:"max-w-7xl mx-auto px-6 py-8 space-y-8",children:i.length===0?g.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[g.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5"})}),g.jsx("h2",{className:"text-lg font-semibold text-slate-700 mb-2",children:"Nenhuma empresa cadastrada"}),g.jsx("p",{className:"text-slate-500 mb-4",children:"Crie sua primeira empresa para comear a gerenciar os processos."}),g.jsx("button",{onClick:()=>{D(null),L(""),R(!0)},className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors",children:"Criar Primeira Empresa"})]}):g.jsxs(g.Fragment,{children:[i.map(q=>{const Te=H2[q.colorIndex%H2.length],_e=Ae[q.id]||[],oe=le(q.id);return g.jsxs("div",{className:`bg-white rounded-2xl border-2 ${Te.border} shadow-sm overflow-hidden`,children:[g.jsx("div",{className:`bg-gradient-to-r ${Te.gradient} px-6 py-4`,children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:g.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-bold text-white",children:q.name}),g.jsxs("p",{className:"text-white/70 text-sm",children:[_e.length," fluxo",_e.length!==1?"s":""]})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:()=>K(q.id),className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-colors text-sm",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Novo Fluxo"]}),g.jsx("button",{onClick:()=>{D(q),L(q.name),R(!0)},className:"p-1.5 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-colors",title:"Editar empresa",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),g.jsx("button",{onClick:()=>ge(q.id),className:"p-1.5 bg-white/20 hover:bg-red-500/50 text-white rounded-lg transition-colors",title:"Excluir empresa",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),g.jsx("div",{className:"p-6",children:_e.length===0?g.jsxs("div",{className:`${Te.light} rounded-xl border-2 border-dashed ${Te.border} p-8 text-center`,children:[g.jsx("svg",{className:`w-12 h-12 ${Te.text} mx-auto mb-3 opacity-50`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7"})}),g.jsx("p",{className:`${Te.text} font-medium mb-1`,children:"Nenhum fluxo ainda"}),g.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Crie o primeiro fluxo de processos desta empresa"}),g.jsx("button",{onClick:()=>K(q.id),className:`px-4 py-2 bg-gradient-to-r ${Te.gradient} text-white rounded-lg hover:opacity-90 transition-opacity text-sm font-medium`,children:"Criar Primeiro Fluxo"})]}):g.jsxs("div",{ref:X=>M.current[q.id]=X,className:"relative",children:[g.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-0",style:{overflow:"visible"},children:[g.jsx("defs",{children:[0,1,2,3,4].map(X=>g.jsx("marker",{id:`arrowhead-${q.id}-${X}`,markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:g.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:ke(X+1)})},`arrow-${q.id}-${X}`))}),oe.map(X=>{const he=ke(X.level),se=Math.abs(X.endY-X.startY)>Math.abs(X.endX-X.startX),Ne=(X.startX+X.endX)/2,Me=(X.startY+X.endY)/2;let Ce;return se?Ce=`M ${X.startX} ${X.startY} C ${X.startX} ${Me}, ${X.endX} ${Me}, ${X.endX} ${X.endY}`:Ce=`M ${X.startX} ${X.startY} C ${Ne} ${X.startY}, ${Ne} ${X.endY}, ${X.endX} ${X.endY}`,g.jsxs("g",{children:[g.jsx("path",{d:Ce,fill:"none",stroke:he,strokeWidth:"4",strokeOpacity:"0.2",strokeLinecap:"round"}),g.jsx("path",{d:Ce,fill:"none",stroke:he,strokeWidth:"2",strokeLinecap:"round",markerEnd:`url(#arrowhead-${q.id}-${(X.level-1)%5})`})]},X.id)})]}),g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 relative z-10",children:_e.map(X=>{const he=ae(X.level||0);return g.jsxs("div",{ref:se=>B.current[X.id]=se,className:`bg-white rounded-lg border hover:shadow-md transition-all overflow-hidden group relative z-20 ${he.border} hover:border-slate-400`,children:[g.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${he.gradient}`}),g.jsxs("div",{onClick:()=>T(X.id),className:"h-14 bg-slate-50 border-b border-slate-200 flex items-center justify-center cursor-pointer relative overflow-hidden",children:[g.jsx("svg",{className:"w-6 h-6 text-slate-300 group-hover:opacity-0 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7"})}),g.jsx("div",{className:`absolute top-1 left-1 bg-gradient-to-r ${he.gradient} text-white text-[8px] px-1.5 py-0.5 rounded-full font-medium z-20`,children:X.level===0||X.isRoot?"Raiz":`N${X.level}`}),g.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/90 transition-all flex items-center justify-center",children:g.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-fyness-primary font-medium text-xs",children:"Abrir"})})]}),g.jsxs("div",{className:"p-2",children:[g.jsx("h3",{className:"font-semibold text-slate-800 truncate text-xs",children:X.name}),g.jsx("p",{className:"text-[9px] text-slate-400 mb-1.5",children:j(X.updatedAt)}),X.parentId&&g.jsxs("div",{className:"mb-1.5 p-1 bg-slate-50 rounded flex items-center gap-1 text-[8px]",children:[g.jsx("div",{className:`w-1 h-1 rounded-full ${ae((X.level||1)-1).bg}`}),g.jsxs("span",{className:"text-slate-500 truncate",children:[" ",Y(X.parentId)]})]}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>T(X.id),className:"flex-1 px-1.5 py-0.5 bg-fyness-primary text-white text-[9px] rounded hover:bg-fyness-secondary transition-colors",children:"Editar"}),g.jsx("button",{onClick:()=>{_(X.id),E(X.parentId||"")},className:"px-1.5 py-0.5 border border-slate-200 text-slate-500 rounded hover:bg-slate-50 transition-colors",title:"Dependncia",children:g.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"})})}),g.jsx("button",{onClick:()=>u(X.id),className:"px-1.5 py-0.5 border border-red-200 text-red-400 rounded hover:bg-red-50 transition-colors",title:"Excluir",children:g.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},X.id)})})]})})]},q.id)}),g.jsxs("div",{className:"p-4 bg-white rounded-xl border border-slate-200",children:[g.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Legenda - Relacionamento entre Fluxos"}),g.jsxs("div",{className:"flex flex-wrap gap-4 text-xs",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-r from-green-500 to-emerald-600"}),g.jsx("span",{className:"text-slate-600",children:"Nvel 0 - Raiz"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-r from-blue-500 to-indigo-600"}),g.jsx("span",{className:"text-slate-600",children:"Nvel 1"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-r from-purple-500 to-violet-600"}),g.jsx("span",{className:"text-slate-600",children:"Nvel 2+"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("svg",{className:"w-6 h-3",viewBox:"0 0 24 12",children:[g.jsx("path",{d:"M0 6 L18 6",stroke:"#3b82f6",strokeWidth:"2",fill:"none"}),g.jsx("polygon",{points:"16,3 22,6 16,9",fill:"#3b82f6"})]}),g.jsx("span",{className:"text-slate-600",children:"Dependncia"})]})]})]})]})}),H&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[g.jsx("div",{className:"p-6 border-b border-slate-200",children:g.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:O?"Editar Empresa":"Nova Empresa"})}),g.jsxs("div",{className:"p-6",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome da Empresa"}),g.jsx("input",{type:"text",value:A,onChange:q=>L(q.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",placeholder:"Ex: Empresa de Tecnologia",autoFocus:!0,onKeyDown:q=>{q.key==="Enter"&&A.trim()&&(O?we():ye()),q.key==="Escape"&&(R(!1),D(null))}})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[g.jsx("button",{onClick:()=>{R(!1),D(null),L("")},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),g.jsx("button",{onClick:O?we:ye,disabled:!A.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:O?"Salvar":"Criar Empresa"})]})]})}),v&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[g.jsx("div",{className:"p-6 border-b border-slate-200",children:g.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Definir Dependncia"})}),g.jsxs("div",{className:"p-6",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Este fluxo depende de:"}),g.jsxs("select",{value:b,onChange:q=>E(q.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",children:[g.jsx("option",{value:"",children:"Nenhum (Fluxo Raiz)"}),z(v,Le==null?void 0:Le.companyId).map(q=>g.jsxs("option",{value:q.id,children:[q.name," ",q.level!==void 0?`(Nvel ${q.level})`:""]},q.id))]})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[g.jsx("button",{onClick:()=>{_(null),E("")},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),g.jsx("button",{onClick:P,className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors",children:"Salvar"})]})]})}),p&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[g.jsx("div",{className:"p-6 border-b border-slate-200",children:g.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Novo Fluxo"})}),g.jsxs("div",{className:"p-6",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Fluxo"}),g.jsx("input",{type:"text",value:d,onChange:q=>h(q.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",placeholder:"Ex: Processo de Vendas",autoFocus:!0,onKeyDown:q=>{q.key==="Enter"&&d.trim()&&ee(),q.key==="Escape"&&m(!1)}})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[g.jsx("button",{onClick:()=>{m(!1),Z(null)},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),g.jsx("button",{onClick:ee,disabled:!d.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Criar Fluxo"})]})]})}),c&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full mx-4 overflow-hidden",children:[g.jsxs("div",{className:"p-6",children:[g.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),g.jsx("h3",{className:"text-lg font-semibold text-slate-800 text-center mb-2",children:"Excluir Fluxo?"}),g.jsx("p",{className:"text-sm text-slate-500 text-center",children:"Esta ao no pode ser desfeita."})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-center",children:[g.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),g.jsx("button",{onClick:()=>N(c),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Excluir"})]})]})}),me&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full mx-4 overflow-hidden",children:[g.jsxs("div",{className:"p-6",children:[g.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5"})})}),g.jsx("h3",{className:"text-lg font-semibold text-slate-800 text-center mb-2",children:"Excluir Empresa?"}),g.jsx("p",{className:"text-sm text-slate-500 text-center",children:"Todos os fluxos desta empresa sero excludos."})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-center",children:[g.jsx("button",{onClick:()=>ge(null),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),g.jsx("button",{onClick:()=>I(me),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Excluir"})]})]})})]})}const t$="modulepreload",n$=function(e){return"/"+e},b3={},V2=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=n$(l),l in b3)return;b3[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":t$,c||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return r.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return t().catch(o)})};function cn(e){"@babel/helpers - typeof";return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(e)}var da=Uint8Array,no=Uint16Array,Vx=Int32Array,Wx=new da([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Kx=new da([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w3=new da([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),GR=function(e,t){for(var n=new no(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var r=new Vx(n[30]),i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)r[o]=o-n[i]<<5|i;return{b:n,r}},UR=GR(Wx,2),i$=UR.b,K1=UR.r;i$[28]=258,K1[258]=28;var r$=GR(Kx,0),x3=r$.r,Y1=new no(32768);for(var En=0;En<32768;++En){var ul=(En&43690)>>1|(En&21845)<<1;ul=(ul&52428)>>2|(ul&13107)<<2,ul=(ul&61680)>>4|(ul&3855)<<4,Y1[En]=((ul&65280)>>8|(ul&255)<<8)>>1}var Jh=function(e,t,n){for(var i=e.length,r=0,o=new no(t);r<i;++r)e[r]&&++o[e[r]-1];var a=new no(t);for(r=1;r<t;++r)a[r]=a[r-1]+o[r-1]<<1;var s;if(n){s=new no(1<<t);var l=15-t;for(r=0;r<i;++r)if(e[r])for(var c=r<<4|e[r],u=t-e[r],d=a[e[r]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)s[Y1[d]>>l]=c}else for(s=new no(i),r=0;r<i;++r)e[r]&&(s[r]=Y1[a[e[r]-1]++]>>15-e[r]);return s},fu=new da(288);for(var En=0;En<144;++En)fu[En]=8;for(var En=144;En<256;++En)fu[En]=9;for(var En=256;En<280;++En)fu[En]=7;for(var En=280;En<288;++En)fu[En]=8;var Rv=new da(32);for(var En=0;En<32;++En)Rv[En]=5;var o$=Jh(fu,9,0),a$=Jh(Rv,5,0),qR=function(e){return(e+7)/8|0},s$=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new da(e.subarray(t,n))},ps=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},vh=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},W2=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,o=n.slice();if(!r)return{t:HR,l:0};if(r==1){var a=new da(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(M,B){return M.f-B.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=r-1;)s=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:s.f+l.f,l:s,r:l};for(var h=o[0].s,i=1;i<r;++i)o[i].s>h&&(h=o[i].s);var p=new no(h+1),m=J1(n[u-1],p,0);if(m>t){var i=0,v=0,_=m-t,b=1<<_;for(o.sort(function(B,H){return p[H.s]-p[B.s]||B.f-H.f});i<r;++i){var E=o[i].s;if(p[E]>t)v+=b-(1<<m-p[E]),p[E]=t;else break}for(v>>=_;v>0;){var w=o[i].s;p[w]<t?v-=1<<t-p[w]++-1:++i}for(;i>=0&&v;--i){var x=o[i].s;p[x]==t&&(--p[x],++v)}m=t}return{t:new da(p),l:m}},J1=function(e,t,n){return e.s==-1?Math.max(J1(e.l,t,n+1),J1(e.r,t,n+1)):t[e.s]=n},E3=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new no(++t),i=0,r=e[0],o=1,a=function(l){n[i++]=l},s=1;s<=t;++s)if(e[s]==r&&s!=t)++o;else{if(!r&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(r),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(r);o=1,r=e[s]}return{c:n.subarray(0,i),n:t}},yh=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},zR=function(e,t,n){var i=n.length,r=qR(t+2);e[r]=i&255,e[r+1]=i>>8,e[r+2]=e[r]^255,e[r+3]=e[r+1]^255;for(var o=0;o<i;++o)e[r+o+4]=n[o];return(r+4+i)*8},S3=function(e,t,n,i,r,o,a,s,l,c,u){ps(t,u++,n),++r[256];for(var d=W2(r,15),h=d.t,p=d.l,m=W2(o,15),v=m.t,_=m.l,b=E3(h),E=b.c,w=b.n,x=E3(v),M=x.c,B=x.n,H=new no(19),R=0;R<E.length;++R)++H[E[R]&31];for(var R=0;R<M.length;++R)++H[M[R]&31];for(var O=W2(H,7),D=O.t,A=O.l,L=19;L>4&&!D[w3[L-1]];--L);var $=c+5<<3,Z=yh(r,fu)+yh(o,Rv)+a,me=yh(r,h)+yh(o,v)+a+14+3*L+yh(H,D)+2*H[16]+3*H[17]+7*H[18];if(l>=0&&$<=Z&&$<=me)return zR(t,u,e.subarray(l,l+c));var ge,pe,te,le;if(ps(t,u,1+(me<Z)),u+=2,me<Z){ge=Jh(h,p,0),pe=h,te=Jh(v,_,0),le=v;var ye=Jh(D,A,0);ps(t,u,w-257),ps(t,u+5,B-1),ps(t,u+10,L-4),u+=14;for(var R=0;R<L;++R)ps(t,u+3*R,D[w3[R]]);u+=3*L;for(var we=[E,M],I=0;I<2;++I)for(var z=we[I],R=0;R<z.length;++R){var K=z[R]&31;ps(t,u,ye[K]),u+=D[K],K>15&&(ps(t,u,z[R]>>5&127),u+=z[R]>>12)}}else ge=o$,pe=fu,te=a$,le=Rv;for(var R=0;R<s;++R){var ee=i[R];if(ee>255){var K=ee>>18&31;vh(t,u,ge[K+257]),u+=pe[K+257],K>7&&(ps(t,u,ee>>23&31),u+=Wx[K]);var T=ee&31;vh(t,u,te[T]),u+=le[T],T>3&&(vh(t,u,ee>>5&8191),u+=Kx[T])}else vh(t,u,ge[ee]),u+=pe[ee]}return vh(t,u,ge[256]),u+pe[256]},l$=new Vx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),HR=new da(0),c$=function(e,t,n,i,r,o){var a=o.z||e.length,s=new da(i+a+5*(1+Math.ceil(a/7e3))+r),l=s.subarray(i,s.length-r),c=o.l,u=(o.r||0)&7;if(t){u&&(l[0]=o.r>>3);for(var d=l$[t-1],h=d>>13,p=d&8191,m=(1<<n)-1,v=o.p||new no(32768),_=o.h||new no(m+1),b=Math.ceil(n/3),E=2*b,w=function(Le){return(e[Le]^e[Le+1]<<b^e[Le+2]<<E)&m},x=new Vx(25e3),M=new no(288),B=new no(32),H=0,R=0,O=o.i||0,D=0,A=o.w||0,L=0;O+2<a;++O){var $=w(O),Z=O&32767,me=_[$];if(v[Z]=me,_[$]=Z,A<=O){var ge=a-O;if((H>7e3||D>24576)&&(ge>423||!c)){u=S3(e,l,0,x,M,B,R,D,L,O-L,u),D=H=R=0,L=O;for(var pe=0;pe<286;++pe)M[pe]=0;for(var pe=0;pe<30;++pe)B[pe]=0}var te=2,le=0,ye=p,we=Z-me&32767;if(ge>2&&$==w(O-we))for(var I=Math.min(h,ge)-1,z=Math.min(32767,O),K=Math.min(258,ge);we<=z&&--ye&&Z!=me;){if(e[O+te]==e[O+te-we]){for(var ee=0;ee<K&&e[O+ee]==e[O+ee-we];++ee);if(ee>te){if(te=ee,le=we,ee>I)break;for(var T=Math.min(we,ee-2),N=0,pe=0;pe<T;++pe){var P=O-we+pe&32767,j=v[P],Y=P-j&32767;Y>N&&(N=Y,me=P)}}}Z=me,me=v[Z],we+=Z-me&32767}if(le){x[D++]=268435456|K1[te]<<18|x3[le];var ae=K1[te]&31,ke=x3[le]&31;R+=Wx[ae]+Kx[ke],++M[257+ae],++B[ke],A=O+te,++H}else x[D++]=e[O],++M[e[O]]}}for(O=Math.max(O,A);O<a;++O)x[D++]=e[O],++M[e[O]];u=S3(e,l,c,x,M,B,R,D,L,O-L,u),c||(o.r=u&7|l[u/8|0]<<3,u-=7,o.h=_,o.p=v,o.i=O,o.w=A)}else{for(var O=o.w||0;O<a+c;O+=65535){var Ae=O+65535;Ae>=a&&(l[u/8|0]=c,Ae=a),u=zR(l,u+1,e.subarray(O,Ae))}o.i=a}return s$(s,0,i+qR(u)+r)},VR=function(){var e=1,t=0;return{p:function(n){for(var i=e,r=t,o=n.length|0,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)r+=i+=n[a];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}e=i,t=r},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},u$=function(e,t,n,i,r){if(!r&&(r={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),a=new da(o.length+e.length);a.set(o),a.set(e,o.length),e=a,r.w=o.length}return c$(e,t.level==null?6:t.level,t.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,i,r)},WR=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},d$=function(e,t){var n=t.level,i=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var r=VR();r.p(t.dictionary),WR(e,2,r.d())}};function X1(e,t){t||(t={});var n=VR();n.p(e);var i=u$(e,t,t.dictionary?6:2,4);return d$(i,t),WR(i,i.length-4,n.d()),i}var p$=typeof TextDecoder<"u"&&new TextDecoder,h$=0;try{p$.decode(HR,{stream:!0}),h$=1}catch{}function f$(e){if(Array.isArray(e))return e}function m$(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}function N3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function g$(e,t){if(e){if(typeof e=="string")return N3(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N3(e,t):void 0}}function v$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k3(e,t){return f$(e)||m$(e,t)||g$(e,t)||v$()}function P3(e,t="utf8"){return new TextDecoder(t).decode(e)}const y$=new TextEncoder;function _$(e){return y$.encode(e)}const b$=1024*8,w$=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),K2={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Yx{constructor(t=b$,n={}){ln(this,"buffer");ln(this,"byteLength");ln(this,"byteOffset");ln(this,"length");ln(this,"offset");ln(this,"lastWrittenByte");ln(this,"littleEndian");ln(this,"_data");ln(this,"_mark");ln(this,"_marks");let i=!1;typeof t=="number"?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);const r=n.offset?n.offset>>>0:0,o=t.byteLength-r;let a=r;(ArrayBuffer.isView(t)||t instanceof Yx)&&(t.byteLength!==t.buffer.byteLength&&(a=t.byteOffset+r),t=t.buffer),i?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const i=(this.offset+t)*2,r=new Uint8Array(i);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const i=K2[n].BYTES_PER_ELEMENT*t,r=this.byteOffset+this.offset,o=this.buffer.slice(r,r+i);if(this.littleEndian===w$&&n!=="uint8"&&n!=="int8"){const s=new Uint8Array(this.buffer.slice(r,r+i));s.reverse();const l=new K2[n](s.buffer);return this.offset+=i,l.reverse(),l}const a=new K2[n](o);return this.offset+=i,a}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let i=0;i<t;i++)n+=this.readChar();return n}readUtf8(t=1){return P3(this.readBytes(t))}decodeText(t=1,n="utf8"){return P3(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(_$(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function vp(e){let t=e.length;for(;--t>=0;)e[t]=0}const x$=3,E$=258,KR=29,S$=256,N$=S$+1+KR,YR=30,k$=512,P$=new Array((N$+2)*2);vp(P$);const A$=new Array(YR*2);vp(A$);const T$=new Array(k$);vp(T$);const C$=new Array(E$-x$+1);vp(C$);const R$=new Array(KR);vp(R$);const M$=new Array(YR);vp(M$);const I$=(e,t,n,i)=>{let r=e&65535|0,o=e>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do r=r+t[i++]|0,o=o+r|0;while(--a);r%=65521,o%=65521}return r|o<<16|0};var Z1=I$;const D$=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},L$=new Uint32Array(D$()),O$=(e,t,n,i)=>{const r=L$,o=i+n;e^=-1;for(let a=i;a<o;a++)e=e>>>8^r[(e^t[a])&255];return e^-1};var Pa=O$,Q1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},JR={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const B$=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var F$=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)B$(n,i)&&(e[i]=n[i])}}return e},j$=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,o=e.length;i<o;i++){let a=e[i];n.set(a,r),r+=a.length}return n},XR={assign:F$,flattenChunks:j$};let ZR=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ZR=!1}const Rf=new Uint8Array(256);for(let e=0;e<256;e++)Rf[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Rf[254]=Rf[254]=1;var $$=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,i,r,o,a=e.length,s=0;for(r=0;r<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<a&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,r=0;o<s;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<a&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t};const G$=(e,t)=>{if(t<65534&&e.subarray&&ZR)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var U$=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i,r;const o=new Array(n*2);for(r=0,i=0;i<n;){let a=e[i++];if(a<128){o[r++]=a;continue}let s=Rf[a];if(s>4){o[r++]=65533,i+=s-1;continue}for(a&=s===2?31:s===3?15:7;s>1&&i<n;)a=a<<6|e[i++]&63,s--;if(s>1){o[r++]=65533;continue}a<65536?o[r++]=a:(a-=65536,o[r++]=55296|a>>10&1023,o[r++]=56320|a&1023)}return G$(o,r)},q$=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Rf[e[n]]>t?n:t},ew={string2buf:$$,buf2string:U$,utf8border:q$};function z$(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var H$=z$;const Ig=16209,V$=16191;var W$=function(t,n){let i,r,o,a,s,l,c,u,d,h,p,m,v,_,b,E,w,x,M,B,H,R,O,D;const A=t.state;i=t.next_in,O=t.input,r=i+(t.avail_in-5),o=t.next_out,D=t.output,a=o-(n-t.avail_out),s=o+(t.avail_out-257),l=A.dmax,c=A.wsize,u=A.whave,d=A.wnext,h=A.window,p=A.hold,m=A.bits,v=A.lencode,_=A.distcode,b=(1<<A.lenbits)-1,E=(1<<A.distbits)-1;e:do{m<15&&(p+=O[i++]<<m,m+=8,p+=O[i++]<<m,m+=8),w=v[p&b];t:for(;;){if(x=w>>>24,p>>>=x,m-=x,x=w>>>16&255,x===0)D[o++]=w&65535;else if(x&16){M=w&65535,x&=15,x&&(m<x&&(p+=O[i++]<<m,m+=8),M+=p&(1<<x)-1,p>>>=x,m-=x),m<15&&(p+=O[i++]<<m,m+=8,p+=O[i++]<<m,m+=8),w=_[p&E];n:for(;;){if(x=w>>>24,p>>>=x,m-=x,x=w>>>16&255,x&16){if(B=w&65535,x&=15,m<x&&(p+=O[i++]<<m,m+=8,m<x&&(p+=O[i++]<<m,m+=8)),B+=p&(1<<x)-1,B>l){t.msg="invalid distance too far back",A.mode=Ig;break e}if(p>>>=x,m-=x,x=o-a,B>x){if(x=B-x,x>u&&A.sane){t.msg="invalid distance too far back",A.mode=Ig;break e}if(H=0,R=h,d===0){if(H+=c-x,x<M){M-=x;do D[o++]=h[H++];while(--x);H=o-B,R=D}}else if(d<x){if(H+=c+d-x,x-=d,x<M){M-=x;do D[o++]=h[H++];while(--x);if(H=0,d<M){x=d,M-=x;do D[o++]=h[H++];while(--x);H=o-B,R=D}}}else if(H+=d-x,x<M){M-=x;do D[o++]=h[H++];while(--x);H=o-B,R=D}for(;M>2;)D[o++]=R[H++],D[o++]=R[H++],D[o++]=R[H++],M-=3;M&&(D[o++]=R[H++],M>1&&(D[o++]=R[H++]))}else{H=o-B;do D[o++]=D[H++],D[o++]=D[H++],D[o++]=D[H++],M-=3;while(M>2);M&&(D[o++]=D[H++],M>1&&(D[o++]=D[H++]))}}else if(x&64){t.msg="invalid distance code",A.mode=Ig;break e}else{w=_[(w&65535)+(p&(1<<x)-1)];continue n}break}}else if(x&64)if(x&32){A.mode=V$;break e}else{t.msg="invalid literal/length code",A.mode=Ig;break e}else{w=v[(w&65535)+(p&(1<<x)-1)];continue t}break}}while(i<r&&o<s);M=m>>3,i-=M,m-=M<<3,p&=(1<<m)-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=o<s?257+(s-o):257-(o-s),A.hold=p,A.bits=m};const id=15,A3=852,T3=592,C3=0,Y2=1,R3=2,K$=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Y$=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),J$=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),X$=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Z$=(e,t,n,i,r,o,a,s)=>{const l=s.bits;let c=0,u=0,d=0,h=0,p=0,m=0,v=0,_=0,b=0,E=0,w,x,M,B,H,R=null,O;const D=new Uint16Array(id+1),A=new Uint16Array(id+1);let L=null,$,Z,me;for(c=0;c<=id;c++)D[c]=0;for(u=0;u<i;u++)D[t[n+u]]++;for(p=l,h=id;h>=1&&D[h]===0;h--);if(p>h&&(p=h),h===0)return r[o++]=1<<24|64<<16|0,r[o++]=1<<24|64<<16|0,s.bits=1,0;for(d=1;d<h&&D[d]===0;d++);for(p<d&&(p=d),_=1,c=1;c<=id;c++)if(_<<=1,_-=D[c],_<0)return-1;if(_>0&&(e===C3||h!==1))return-1;for(A[1]=0,c=1;c<id;c++)A[c+1]=A[c]+D[c];for(u=0;u<i;u++)t[n+u]!==0&&(a[A[t[n+u]]++]=u);if(e===C3?(R=L=a,O=20):e===Y2?(R=K$,L=Y$,O=257):(R=J$,L=X$,O=0),E=0,u=0,c=d,H=o,m=p,v=0,M=-1,b=1<<p,B=b-1,e===Y2&&b>A3||e===R3&&b>T3)return 1;for(;;){$=c-v,a[u]+1<O?(Z=0,me=a[u]):a[u]>=O?(Z=L[a[u]-O],me=R[a[u]-O]):(Z=96,me=0),w=1<<c-v,x=1<<m,d=x;do x-=w,r[H+(E>>v)+x]=$<<24|Z<<16|me|0;while(x!==0);for(w=1<<c-1;E&w;)w>>=1;if(w!==0?(E&=w-1,E+=w):E=0,u++,--D[c]===0){if(c===h)break;c=t[n+a[u]]}if(c>p&&(E&B)!==M){for(v===0&&(v=p),H+=d,m=c-v,_=1<<m;m+v<h&&(_-=D[m+v],!(_<=0));)m++,_<<=1;if(b+=1<<m,e===Y2&&b>A3||e===R3&&b>T3)return 1;M=E&B,r[M]=p<<24|m<<16|H-o|0}}return E!==0&&(r[H+E]=c-v<<24|64<<16|0),s.bits=p,0};var Xh=Z$;const Q$=0,QR=1,eM=2,{Z_FINISH:M3,Z_BLOCK:eG,Z_TREES:Dg,Z_OK:mu,Z_STREAM_END:tG,Z_NEED_DICT:nG,Z_STREAM_ERROR:Do,Z_DATA_ERROR:tM,Z_MEM_ERROR:nM,Z_BUF_ERROR:iG,Z_DEFLATED:I3}=JR,ky=16180,D3=16181,L3=16182,O3=16183,B3=16184,F3=16185,j3=16186,$3=16187,G3=16188,U3=16189,Mv=16190,hs=16191,J2=16192,q3=16193,X2=16194,z3=16195,H3=16196,V3=16197,W3=16198,Lg=16199,Og=16200,K3=16201,Y3=16202,J3=16203,X3=16204,Z3=16205,Z2=16206,Q3=16207,ek=16208,Rn=16209,iM=16210,rM=16211,rG=852,oG=592,aG=15,sG=aG,tk=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function lG(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Su=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<ky||t.mode>rM?1:0},oM=e=>{if(Su(e))return Do;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=ky,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(rG),t.distcode=t.distdyn=new Int32Array(oG),t.sane=1,t.back=-1,mu},aM=e=>{if(Su(e))return Do;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,oM(e)},sM=(e,t)=>{let n;if(Su(e))return Do;const i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Do:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,aM(e))},lM=(e,t)=>{if(!e)return Do;const n=new lG;e.state=n,n.strm=e,n.window=null,n.mode=ky;const i=sM(e,t);return i!==mu&&(e.state=null),i},cG=e=>lM(e,sG);let nk=!0,Q2,eb;const uG=e=>{if(nk){Q2=new Int32Array(512),eb=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Xh(QR,e.lens,0,288,Q2,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Xh(eM,e.lens,0,32,eb,0,e.work,{bits:5}),nk=!1}e.lencode=Q2,e.lenbits=9,e.distcode=eb,e.distbits=5},cM=(e,t,n,i)=>{let r;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),o.window.set(t.subarray(n-i,n-i+r),o.wnext),i-=r,i?(o.window.set(t.subarray(n-i,n),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0},dG=(e,t)=>{let n,i,r,o,a,s,l,c,u,d,h,p,m,v,_=0,b,E,w,x,M,B,H,R;const O=new Uint8Array(4);let D,A;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Su(e)||!e.output||!e.input&&e.avail_in!==0)return Do;n=e.state,n.mode===hs&&(n.mode=J2),a=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,c=n.hold,u=n.bits,d=s,h=l,R=mu;e:for(;;)switch(n.mode){case ky:if(n.wrap===0){n.mode=J2;break}for(;u<16;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,O[0]=c&255,O[1]=c>>>8&255,n.check=Pa(n.check,O,2,0),c=0,u=0,n.mode=D3;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Rn;break}if((c&15)!==I3){e.msg="unknown compression method",n.mode=Rn;break}if(c>>>=4,u-=4,H=(c&15)+8,n.wbits===0&&(n.wbits=H),H>15||H>n.wbits){e.msg="invalid window size",n.mode=Rn;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=c&512?U3:hs,c=0,u=0;break;case D3:for(;u<16;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==I3){e.msg="unknown compression method",n.mode=Rn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Rn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(O[0]=c&255,O[1]=c>>>8&255,n.check=Pa(n.check,O,2,0)),c=0,u=0,n.mode=L3;case L3:for(;u<32;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(O[0]=c&255,O[1]=c>>>8&255,O[2]=c>>>16&255,O[3]=c>>>24&255,n.check=Pa(n.check,O,4,0)),c=0,u=0,n.mode=O3;case O3:for(;u<16;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(O[0]=c&255,O[1]=c>>>8&255,n.check=Pa(n.check,O,2,0)),c=0,u=0,n.mode=B3;case B3:if(n.flags&1024){for(;u<16;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(O[0]=c&255,O[1]=c>>>8&255,n.check=Pa(n.check,O,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=F3;case F3:if(n.flags&1024&&(p=n.length,p>s&&(p=s),p&&(n.head&&(H=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(o,o+p),H)),n.flags&512&&n.wrap&4&&(n.check=Pa(n.check,i,p,o)),s-=p,o+=p,n.length-=p),n.length))break e;n.length=0,n.mode=j3;case j3:if(n.flags&2048){if(s===0)break e;p=0;do H=i[o+p++],n.head&&H&&n.length<65536&&(n.head.name+=String.fromCharCode(H));while(H&&p<s);if(n.flags&512&&n.wrap&4&&(n.check=Pa(n.check,i,p,o)),s-=p,o+=p,H)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=$3;case $3:if(n.flags&4096){if(s===0)break e;p=0;do H=i[o+p++],n.head&&H&&n.length<65536&&(n.head.comment+=String.fromCharCode(H));while(H&&p<s);if(n.flags&512&&n.wrap&4&&(n.check=Pa(n.check,i,p,o)),s-=p,o+=p,H)break e}else n.head&&(n.head.comment=null);n.mode=G3;case G3:if(n.flags&512){for(;u<16;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}if(n.wrap&4&&c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Rn;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=hs;break;case U3:for(;u<32;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}e.adler=n.check=tk(c),c=0,u=0,n.mode=Mv;case Mv:if(n.havedict===0)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,nG;e.adler=n.check=1,n.mode=hs;case hs:if(t===eG||t===Dg)break e;case J2:if(n.last){c>>>=u&7,u-=u&7,n.mode=Z2;break}for(;u<3;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=q3;break;case 1:if(uG(n),n.mode=Lg,t===Dg){c>>>=2,u-=2;break e}break;case 2:n.mode=H3;break;case 3:e.msg="invalid block type",n.mode=Rn}c>>>=2,u-=2;break;case q3:for(c>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Rn;break}if(n.length=c&65535,c=0,u=0,n.mode=X2,t===Dg)break e;case X2:n.mode=z3;case z3:if(p=n.length,p){if(p>s&&(p=s),p>l&&(p=l),p===0)break e;r.set(i.subarray(o,o+p),a),s-=p,o+=p,l-=p,a+=p,n.length-=p;break}n.mode=hs;break;case H3:for(;u<14;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Rn;break}n.have=0,n.mode=V3;case V3:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}n.lens[L[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},R=Xh(Q$,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,R){e.msg="invalid code lengths set",n.mode=Rn;break}n.have=0,n.mode=W3;case W3:for(;n.have<n.nlen+n.ndist;){for(;_=n.lencode[c&(1<<n.lenbits)-1],b=_>>>24,E=_>>>16&255,w=_&65535,!(b<=u);){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}if(w<16)c>>>=b,u-=b,n.lens[n.have++]=w;else{if(w===16){for(A=b+2;u<A;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}if(c>>>=b,u-=b,n.have===0){e.msg="invalid bit length repeat",n.mode=Rn;break}H=n.lens[n.have-1],p=3+(c&3),c>>>=2,u-=2}else if(w===17){for(A=b+3;u<A;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}c>>>=b,u-=b,H=0,p=3+(c&7),c>>>=3,u-=3}else{for(A=b+7;u<A;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}c>>>=b,u-=b,H=0,p=11+(c&127),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Rn;break}for(;p--;)n.lens[n.have++]=H}}if(n.mode===Rn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Rn;break}if(n.lenbits=9,D={bits:n.lenbits},R=Xh(QR,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,R){e.msg="invalid literal/lengths set",n.mode=Rn;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},R=Xh(eM,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,R){e.msg="invalid distances set",n.mode=Rn;break}if(n.mode=Lg,t===Dg)break e;case Lg:n.mode=Og;case Og:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,W$(e,h),a=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===hs&&(n.back=-1);break}for(n.back=0;_=n.lencode[c&(1<<n.lenbits)-1],b=_>>>24,E=_>>>16&255,w=_&65535,!(b<=u);){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}if(E&&!(E&240)){for(x=b,M=E,B=w;_=n.lencode[B+((c&(1<<x+M)-1)>>x)],b=_>>>24,E=_>>>16&255,w=_&65535,!(x+b<=u);){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}c>>>=x,u-=x,n.back+=x}if(c>>>=b,u-=b,n.back+=b,n.length=w,E===0){n.mode=Z3;break}if(E&32){n.back=-1,n.mode=hs;break}if(E&64){e.msg="invalid literal/length code",n.mode=Rn;break}n.extra=E&15,n.mode=K3;case K3:if(n.extra){for(A=n.extra;u<A;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Y3;case Y3:for(;_=n.distcode[c&(1<<n.distbits)-1],b=_>>>24,E=_>>>16&255,w=_&65535,!(b<=u);){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}if(!(E&240)){for(x=b,M=E,B=w;_=n.distcode[B+((c&(1<<x+M)-1)>>x)],b=_>>>24,E=_>>>16&255,w=_&65535,!(x+b<=u);){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}c>>>=x,u-=x,n.back+=x}if(c>>>=b,u-=b,n.back+=b,E&64){e.msg="invalid distance code",n.mode=Rn;break}n.offset=w,n.extra=E&15,n.mode=J3;case J3:if(n.extra){for(A=n.extra;u<A;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Rn;break}n.mode=X3;case X3:if(l===0)break e;if(p=h-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Rn;break}p>n.wnext?(p-=n.wnext,m=n.wsize-p):m=n.wnext-p,p>n.length&&(p=n.length),v=n.window}else v=r,m=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do r[a++]=v[m++];while(--p);n.length===0&&(n.mode=Og);break;case Z3:if(l===0)break e;r[a++]=n.length,l--,n.mode=Og;break;case Z2:if(n.wrap){for(;u<32;){if(s===0)break e;s--,c|=i[o++]<<u,u+=8}if(h-=l,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?Pa(n.check,r,h,a-h):Z1(n.check,r,h,a-h)),h=l,n.wrap&4&&(n.flags?c:tk(c))!==n.check){e.msg="incorrect data check",n.mode=Rn;break}c=0,u=0}n.mode=Q3;case Q3:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,c+=i[o++]<<u,u+=8}if(n.wrap&4&&c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Rn;break}c=0,u=0}n.mode=ek;case ek:R=tG;break e;case Rn:R=tM;break e;case iM:return nM;case rM:default:return Do}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<Rn&&(n.mode<Z2||t!==M3))&&cM(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,n.wrap&4&&h&&(e.adler=n.check=n.flags?Pa(n.check,r,h,e.next_out-h):Z1(n.check,r,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===hs?128:0)+(n.mode===Lg||n.mode===X2?256:0),(d===0&&h===0||t===M3)&&R===mu&&(R=iG),R},pG=e=>{if(Su(e))return Do;let t=e.state;return t.window&&(t.window=null),e.state=null,mu},hG=(e,t)=>{if(Su(e))return Do;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,mu):Do},fG=(e,t)=>{const n=t.length;let i,r,o;return Su(e)||(i=e.state,i.wrap!==0&&i.mode!==Mv)?Do:i.mode===Mv&&(r=1,r=Z1(r,t,n,0),r!==i.check)?tM:(o=cM(e,t,n,n),o?(i.mode=iM,nM):(i.havedict=1,mu))};var mG=aM,gG=sM,vG=oM,yG=cG,_G=lM,bG=dG,wG=pG,xG=hG,EG=fG,SG="pako inflate (from Nodeca project)",ys={inflateReset:mG,inflateReset2:gG,inflateResetKeep:vG,inflateInit:yG,inflateInit2:_G,inflate:bG,inflateEnd:wG,inflateGetHeader:xG,inflateSetDictionary:EG,inflateInfo:SG};function NG(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var kG=NG;const uM=Object.prototype.toString,{Z_NO_FLUSH:PG,Z_FINISH:AG,Z_OK:Mf,Z_STREAM_END:tb,Z_NEED_DICT:nb,Z_STREAM_ERROR:TG,Z_DATA_ERROR:ik,Z_MEM_ERROR:CG}=JR;function Jf(e){this.options=XR.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new H$,this.strm.avail_out=0;let n=ys.inflateInit2(this.strm,t.windowBits);if(n!==Mf)throw new Error(Q1[n]);if(this.header=new kG,ys.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ew.string2buf(t.dictionary):uM.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ys.inflateSetDictionary(this.strm,t.dictionary),n!==Mf)))throw new Error(Q1[n])}Jf.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?AG:PG,uM.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),o=ys.inflate(n,a),o===nb&&r&&(o=ys.inflateSetDictionary(n,r),o===Mf?o=ys.inflate(n,a):o===ik&&(o=nb));n.avail_in>0&&o===tb&&n.state.wrap>0&&e[n.next_in]!==0;)ys.inflateReset(n),o=ys.inflate(n,a);switch(o){case TG:case ik:case nb:case CG:return this.onEnd(o),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||o===tb))if(this.options.to==="string"){let l=ew.utf8border(n.output,n.next_out),c=n.next_out-l,u=ew.buf2string(n.output,l);n.next_out=c,n.avail_out=i-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===Mf&&s===0)){if(o===tb)return o=ys.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Jf.prototype.onData=function(e){this.chunks.push(e)};Jf.prototype.onEnd=function(e){e===Mf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=XR.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function RG(e,t){const n=new Jf(t);if(n.push(e),n.err)throw n.msg||Q1[n.err];return n.result}var MG=Jf,IG=RG,DG={Inflate:MG,inflate:IG};const{Inflate:LG,inflate:OG}=DG;var rk=LG,BG=OG;const dM=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;dM[e]=t}const ok=4294967295;function FG(e,t,n){let i=e;for(let r=0;r<n;r++)i=dM[(i^t[r])&255]^i>>>8;return i}function jG(e,t){return(FG(ok,e,t)^ok)>>>0}function ak(e,t,n){const i=e.readUint32(),r=jG(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(r!==i)throw new Error(`CRC mismatch for chunk ${n}. Expected ${i}, found ${r}`)}function pM(e,t,n){for(let i=0;i<n;i++)t[i]=e[i]}function hM(e,t,n,i){let r=0;for(;r<i;r++)t[r]=e[r];for(;r<n;r++)t[r]=e[r]+t[r-i]&255}function fM(e,t,n,i){let r=0;if(n.length===0)for(;r<i;r++)t[r]=e[r];else for(;r<i;r++)t[r]=e[r]+n[r]&255}function mM(e,t,n,i,r){let o=0;if(n.length===0){for(;o<r;o++)t[o]=e[o];for(;o<i;o++)t[o]=e[o]+(t[o-r]>>1)&255}else{for(;o<r;o++)t[o]=e[o]+(n[o]>>1)&255;for(;o<i;o++)t[o]=e[o]+(t[o-r]+n[o]>>1)&255}}function gM(e,t,n,i,r){let o=0;if(n.length===0){for(;o<r;o++)t[o]=e[o];for(;o<i;o++)t[o]=e[o]+t[o-r]&255}else{for(;o<r;o++)t[o]=e[o]+n[o]&255;for(;o<i;o++)t[o]=e[o]+$G(t[o-r],n[o],n[o-r])&255}}function $G(e,t,n){const i=e+t-n,r=Math.abs(i-e),o=Math.abs(i-t),a=Math.abs(i-n);return r<=o&&r<=a?e:o<=a?t:n}function GG(e,t,n,i,r,o){switch(e){case 0:pM(t,n,r);break;case 1:hM(t,n,r,o);break;case 2:fM(t,n,i,r);break;case 3:mM(t,n,i,r,o);break;case 4:gM(t,n,i,r,o);break;default:throw new Error(`Unsupported filter: ${e}`)}}const UG=new Uint16Array([255]),qG=new Uint8Array(UG.buffer),zG=qG[0]===255;function HG(e){const{data:t,width:n,height:i,channels:r,depth:o}=e,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],s=Math.ceil(o/8)*r,l=new Uint8Array(i*n*s);let c=0;for(let u=0;u<7;u++){const d=a[u],h=Math.ceil((n-d.x)/d.xStep),p=Math.ceil((i-d.y)/d.yStep);if(h<=0||p<=0)continue;const m=h*s,v=new Uint8Array(m);for(let _=0;_<p;_++){const b=t[c++],E=t.subarray(c,c+m);c+=m;const w=new Uint8Array(m);GG(b,E,w,v,m,s),v.set(w);for(let x=0;x<h;x++){const M=d.x+x*d.xStep,B=d.y+_*d.yStep;if(!(M>=n||B>=i))for(let H=0;H<s;H++)l[(B*n+M)*s+H]=w[x*s+H]}}}if(o===16){const u=new Uint16Array(l.buffer);if(zG)for(let d=0;d<u.length;d++)u[d]=VG(u[d]);return u}else return l}function VG(e){return(e&255)<<8|e>>8&255}const WG=new Uint16Array([255]),KG=new Uint8Array(WG.buffer),YG=KG[0]===255,JG=new Uint8Array(0);function sk(e){const{data:t,width:n,height:i,channels:r,depth:o}=e,a=Math.ceil(o/8)*r,s=Math.ceil(o/8*r*n),l=new Uint8Array(i*s);let c=JG,u=0,d,h;for(let p=0;p<i;p++){switch(d=t.subarray(u+1,u+1+s),h=l.subarray(p*s,(p+1)*s),t[u]){case 0:pM(d,h,s);break;case 1:hM(d,h,s,a);break;case 2:fM(d,h,c,s);break;case 3:mM(d,h,c,s,a);break;case 4:gM(d,h,c,s,a);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}c=h,u+=s+1}if(o===16){const p=new Uint16Array(l.buffer);if(YG)for(let m=0;m<p.length;m++)p[m]=XG(p[m]);return p}else return l}function XG(e){return(e&255)<<8|e>>8&255}const R0=Uint8Array.of(137,80,78,71,13,10,26,10);function lk(e){if(!ZG(e.readBytes(R0.length)))throw new Error("wrong PNG signature")}function ZG(e){if(e.length<R0.length)return!1;for(let t=0;t<R0.length;t++)if(e[t]!==R0[t])return!1;return!0}const QG="tEXt",eU=0,vM=new TextDecoder("latin1");function tU(e){if(iU(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const nU=/^[\u0000-\u00FF]*$/;function iU(e){if(!nU.test(e))throw new Error("invalid latin1 text")}function rU(e,t,n){const i=yM(t);e[i]=oU(t,n-i.length-1)}function yM(e){for(e.mark();e.readByte()!==eU;);const t=e.offset;e.reset();const n=vM.decode(e.readBytes(t-e.offset-1));return e.skip(1),tU(n),n}function oU(e,t){return vM.decode(e.readBytes(t))}const Jr={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},ib={UNKNOWN:-1,DEFLATE:0},ck={UNKNOWN:-1,ADAPTIVE:0},rb={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Bg={NONE:0,BACKGROUND:1,PREVIOUS:2},ob={SOURCE:0,OVER:1};class aU extends Yx{constructor(n,i={}){super(n);ln(this,"_checkCrc");ln(this,"_inflator");ln(this,"_png");ln(this,"_apng");ln(this,"_end");ln(this,"_hasPalette");ln(this,"_palette");ln(this,"_hasTransparency");ln(this,"_transparency");ln(this,"_compressionMethod");ln(this,"_filterMethod");ln(this,"_interlaceMethod");ln(this,"_colorType");ln(this,"_isAnimated");ln(this,"_numberOfFrames");ln(this,"_numberOfPlays");ln(this,"_frames");ln(this,"_writingDataChunks");const{checkCrc:r=!1}=i;this._checkCrc=r,this._inflator=new rk,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=ib.UNKNOWN,this._filterMethod=ck.UNKNOWN,this._interlaceMethod=rb.UNKNOWN,this._colorType=Jr.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(lk(this);!this._end;){const n=this.readUint32(),i=this.readChars(4);this.decodeChunk(n,i)}return this.decodeImage(),this._png}decodeApng(){for(lk(this);!this._end;){const n=this.readUint32(),i=this.readChars(4);this.decodeApngChunk(n,i)}return this.decodeApngImage(),this._apng}decodeChunk(n,i){const r=this.offset;switch(i){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case QG:rU(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-r!==n)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?ak(this,n+4,i):this.skip(4)}decodeApngChunk(n,i){const r=this.offset;switch(i!=="fdAT"&&i!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),i){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,i),this.offset=r+n;break}if(this.offset-r!==n)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?ak(this,n+4,i):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=sU(this.readUint8());const i=this.readUint8();this._colorType=i;let r;switch(i){case Jr.GREYSCALE:r=1;break;case Jr.TRUECOLOUR:r=3;break;case Jr.INDEXED_COLOUR:r=1;break;case Jr.GREYSCALE_ALPHA:r=2;break;case Jr.TRUECOLOUR_ALPHA:r=4;break;case Jr.UNKNOWN:default:throw new Error(`Unknown color type: ${i}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==ib.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const i=n/3;this._hasPalette=!0;const r=[];this._palette=r;for(let o=0;o<i;o++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const i=n,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let i=n,r=this.offset+this.byteOffset;if(r+=4,i-=4,this._inflator.push(new Uint8Array(this.buffer,r,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Jr.GREYSCALE:case Jr.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let i=0;i<n/2;i++)this._transparency[i]=this.readUint16();break}case Jr.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let i=0;for(;i<n;i++){const r=this.readByte();this._palette[i].push(r)}for(;i<this._palette.length;i++)this._palette[i].push(255);break}case Jr.UNKNOWN:case Jr.GREYSCALE_ALPHA:case Jr.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const i=yM(this),r=this.readUint8();if(r!==ib.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const o=this.readBytes(n-i.length-2);this._png.iccEmbeddedProfile={name:i,profile:BG(o)}}decodepHYs(){const n=this.readUint32(),i=this.readUint32(),r=this.readByte();this._png.resolution={x:n,y:i,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const i={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(n);if(r){if(r.data=sk({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)i.data=r.data;else{const o=this._apng.frames.at(n-1);this.disposeFrame(r,o,i),this.addFrameDataToCanvas(i,r)}this._apng.frames.push(i)}}return this._apng}disposeFrame(n,i,r){switch(n.disposeOp){case Bg.NONE:break;case Bg.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let a=0;a<this._png.width;a++){const s=(o*n.width+a)*this._png.channels;for(let l=0;l<this._png.channels;l++)r.data[s+l]=0}break;case Bg.PREVIOUS:r.data.set(i.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,i){const r=1<<this._png.depth,o=(a,s)=>{const l=((a+i.yOffset)*this._png.width+i.xOffset+s)*this._png.channels,c=(a*i.width+s)*this._png.channels;return{index:l,frameIndex:c}};switch(i.blendOp){case ob.SOURCE:for(let a=0;a<i.height;a++)for(let s=0;s<i.width;s++){const{index:l,frameIndex:c}=o(a,s);for(let u=0;u<this._png.channels;u++)n.data[l+u]=i.data[c+u]}break;case ob.OVER:for(let a=0;a<i.height;a++)for(let s=0;s<i.width;s++){const{index:l,frameIndex:c}=o(a,s);for(let u=0;u<this._png.channels;u++){const d=i.data[c+this._png.channels-1]/r,h=u%(this._png.channels-1)===0?1:i.data[c+u],p=Math.floor(d*h+(1-d)*n.data[l+u]);n.data[l+u]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var i;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((i=this._frames)==null?void 0:i.at(0)).data:this._inflator.result;if(this._filterMethod!==ck.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===rb.NO_INTERLACE)this._png.data=sk({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===rb.ADAM7)this._png.data=HG({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,i=this._frames.at(-1);i?i.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Bg.NONE,blendOp:ob.SOURCE,data:n}),this._inflator=new rk,this._writingDataChunks=!1}}function sU(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var uk;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(uk||(uk={}));function lU(e,t){return new aU(e,t).decode()}var kt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ab(){kt.console&&typeof kt.console.log=="function"&&kt.console.log.apply(kt.console,arguments)}var hn={log:ab,warn:function(e){kt.console&&(typeof kt.console.warn=="function"?kt.console.warn.apply(kt.console,arguments):ab.call(null,arguments))},error:function(e){kt.console&&(typeof kt.console.error=="function"?kt.console.error.apply(kt.console,arguments):ab(e))}};function sb(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){Uc(i.response,t,n)},i.onerror=function(){hn.error("could not download file")},i.send()}function dk(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Fg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Uc=kt.saveAs||((typeof window>"u"?"undefined":cn(window))!=="object"||window!==kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var i=kt.URL||kt.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener",typeof e=="string"?(r.href=e,r.origin!==location.origin?dk(r.href)?sb(e,t,n):Fg(r,r.target="_blank"):Fg(r)):(r.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){Fg(r)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(dk(e))sb(e,t,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){Fg(i)})}else navigator.msSaveOrOpenBlob(function(r,o){return o===void 0?o={autoBom:!1}:cn(o)!=="object"&&(hn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(e,n),t)}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return sb(e,t,n);var r=e.type==="application/octet-stream",o=/constructor/i.test(kt.HTMLElement)||kt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&o)&&(typeof FileReader>"u"?"undefined":cn(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var u=s.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=u:location=u,i=null},s.readAsDataURL(e)}else{var l=kt.URL||kt.webkitURL,c=l.createObjectURL(e);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function _M(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,o=n[i].process,a=r.exec(e);a&&(t=o(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+s+l+c}}var M0=kt.atob.bind(kt),pk=kt.btoa.bind(kt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function lb(e,t){var n=e[0],i=e[1],r=e[2],o=e[3];n=sr(n,i,r,o,t[0],7,-680876936),o=sr(o,n,i,r,t[1],12,-389564586),r=sr(r,o,n,i,t[2],17,606105819),i=sr(i,r,o,n,t[3],22,-1044525330),n=sr(n,i,r,o,t[4],7,-176418897),o=sr(o,n,i,r,t[5],12,1200080426),r=sr(r,o,n,i,t[6],17,-1473231341),i=sr(i,r,o,n,t[7],22,-45705983),n=sr(n,i,r,o,t[8],7,1770035416),o=sr(o,n,i,r,t[9],12,-1958414417),r=sr(r,o,n,i,t[10],17,-42063),i=sr(i,r,o,n,t[11],22,-1990404162),n=sr(n,i,r,o,t[12],7,1804603682),o=sr(o,n,i,r,t[13],12,-40341101),r=sr(r,o,n,i,t[14],17,-1502002290),n=lr(n,i=sr(i,r,o,n,t[15],22,1236535329),r,o,t[1],5,-165796510),o=lr(o,n,i,r,t[6],9,-1069501632),r=lr(r,o,n,i,t[11],14,643717713),i=lr(i,r,o,n,t[0],20,-373897302),n=lr(n,i,r,o,t[5],5,-701558691),o=lr(o,n,i,r,t[10],9,38016083),r=lr(r,o,n,i,t[15],14,-660478335),i=lr(i,r,o,n,t[4],20,-405537848),n=lr(n,i,r,o,t[9],5,568446438),o=lr(o,n,i,r,t[14],9,-1019803690),r=lr(r,o,n,i,t[3],14,-187363961),i=lr(i,r,o,n,t[8],20,1163531501),n=lr(n,i,r,o,t[13],5,-1444681467),o=lr(o,n,i,r,t[2],9,-51403784),r=lr(r,o,n,i,t[7],14,1735328473),n=cr(n,i=lr(i,r,o,n,t[12],20,-1926607734),r,o,t[5],4,-378558),o=cr(o,n,i,r,t[8],11,-2022574463),r=cr(r,o,n,i,t[11],16,1839030562),i=cr(i,r,o,n,t[14],23,-35309556),n=cr(n,i,r,o,t[1],4,-1530992060),o=cr(o,n,i,r,t[4],11,1272893353),r=cr(r,o,n,i,t[7],16,-155497632),i=cr(i,r,o,n,t[10],23,-1094730640),n=cr(n,i,r,o,t[13],4,681279174),o=cr(o,n,i,r,t[0],11,-358537222),r=cr(r,o,n,i,t[3],16,-722521979),i=cr(i,r,o,n,t[6],23,76029189),n=cr(n,i,r,o,t[9],4,-640364487),o=cr(o,n,i,r,t[12],11,-421815835),r=cr(r,o,n,i,t[15],16,530742520),n=ur(n,i=cr(i,r,o,n,t[2],23,-995338651),r,o,t[0],6,-198630844),o=ur(o,n,i,r,t[7],10,1126891415),r=ur(r,o,n,i,t[14],15,-1416354905),i=ur(i,r,o,n,t[5],21,-57434055),n=ur(n,i,r,o,t[12],6,1700485571),o=ur(o,n,i,r,t[3],10,-1894986606),r=ur(r,o,n,i,t[10],15,-1051523),i=ur(i,r,o,n,t[1],21,-2054922799),n=ur(n,i,r,o,t[8],6,1873313359),o=ur(o,n,i,r,t[15],10,-30611744),r=ur(r,o,n,i,t[6],15,-1560198380),i=ur(i,r,o,n,t[13],21,1309151649),n=ur(n,i,r,o,t[4],6,-145523070),o=ur(o,n,i,r,t[11],10,-1120210379),r=ur(r,o,n,i,t[2],15,718787259),i=ur(i,r,o,n,t[9],21,-343485551),e[0]=Al(n,e[0]),e[1]=Al(i,e[1]),e[2]=Al(r,e[2]),e[3]=Al(o,e[3])}function Py(e,t,n,i,r,o){return t=Al(Al(t,e),Al(i,o)),Al(t<<r|t>>>32-r,n)}function sr(e,t,n,i,r,o,a){return Py(t&n|~t&i,e,t,r,o,a)}function lr(e,t,n,i,r,o,a){return Py(t&i|n&~i,e,t,r,o,a)}function cr(e,t,n,i,r,o,a){return Py(t^n^i,e,t,r,o,a)}function ur(e,t,n,i,r,o,a){return Py(n^(t|~i),e,t,r,o,a)}function bM(e){var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)lb(i,cU(e.substring(t-64,t)));e=e.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(lb(i,r),t=0;t<16;t++)r[t]=0;return r[14]=8*n,lb(i,r),i}function cU(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var hk="0123456789abcdef".split("");function uU(e){for(var t="",n=0;n<4;n++)t+=hk[e>>8*n+4&15]+hk[e>>8*n&15];return t}function dU(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function tw(e){return bM(e).map(dU).join("")}var pU=function(e){for(var t=0;t<e.length;t++)e[t]=uU(e[t]);return e.join("")}(bM("hello"))!="5d41402abc4b2a76b9719d911017c592";function Al(e,t){if(pU){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function nw(e,t){var n,i,r,o;if(e!==n){for(var a=(r=e,o=1+(256/e.length|0),new Array(o+1).join(r)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var u=s[l];c=(c+u+a.charCodeAt(l))%256,s[l]=s[c],s[c]=u}n=e,i=s}else s=i;var d=t.length,h=0,p=0,m="";for(l=0;l<d;l++)p=(p+(u=s[h=(h+1)%256]))%256,s[h]=s[p],s[p]=u,a=s[(s[h]+s[p])%256],m+=String.fromCharCode(t.charCodeAt(l)^a);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var fk={print:4,modify:8,copy:16,"annot-forms":32};function _d(e,t,n,i){this.v=1,this.r=2;var r=192;e.forEach(function(s){if(fk.perm!==void 0)throw new Error("Invalid permission: "+s);r+=fk[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^r)),this.encryptionKey=tw(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=nw(this.encryptionKey,this.padding)}function bd(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,i=0;i<n;i++){var r=e.charCodeAt(i);t+=r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?"#"+("0"+r.toString(16)).slice(-2):e[i]}return t}function mk(e){if(cn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,i,r){if(r=r||!1,typeof n!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var o=Math.random().toString(35);return t[n][o]=[i,!!r],o},this.unsubscribe=function(n){for(var i in t)if(t[i][n])return delete t[i][n],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var o in t[n]){var a=t[n][o];try{a[0].apply(e,i)}catch(s){kt.console&&hn.error("jsPDF PubSub Error",s.message,s)}a[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Iv(e){if(!(this instanceof Iv))return new Iv(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function wM(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Yc(e,t,n,i,r){if(!(this instanceof Yc))return new Yc(e,t,n,i,r);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,wM.call(this,i,r)}function Dd(e,t,n,i,r){if(!(this instanceof Dd))return new Dd(e,t,n,i,r);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,wM.call(this,i,r)}function ut(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],o=arguments[3],a=[],s=1,l=16,c="S",u=null;cn(e=e||{})==="object"&&(n=e.orientation,i=e.unit||i,r=e.format||r,o=e.compress||e.compressPdf||o,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),s=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),a=e.filters||(o===!0?["FlateEncode"]:a),i=i||"mm",n=(""+(n||"P")).toLowerCase();var d=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=mk;var m="1.3",v=p.__private__.getPdfVersion=function(){return m};p.__private__.setPdfVersion=function(S){m=S};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return _};var b=p.__private__.getPageFormat=function(S){return _[S]};r=r||"a4";var E="compat",w="advanced",x=E;function M(){this.saveGraphicsState(),q(new yt(gt,0,0,-gt,0,Ec()*gt).toString()+" cm"),this.setFontSize(this.getFontSize()/gt),c="n",x=w}function B(){this.restoreGraphicsState(),c="S",x=E}var H=p.__private__.combineFontStyleAndFontWeight=function(S,G){if(S=="bold"&&G=="normal"||S=="bold"&&G==400||S=="normal"&&G=="italic"||S=="bold"&&G=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return G&&(S=G==400||G==="normal"?S==="italic"?"italic":"normal":G!=700&&G!=="bold"||S!=="normal"?(G==700?"bold":G)+""+S:"bold"),S};p.advancedAPI=function(S){var G=x===E;return G&&M.call(this),typeof S!="function"||(S(this),G&&B.call(this)),this},p.compatAPI=function(S){var G=x===w;return G&&B.call(this),typeof S!="function"||(S(this),G&&M.call(this)),this},p.isAdvancedAPI=function(){return x===w};var R,O=function(S){if(x!==w)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=p.roundToPrecision=p.__private__.roundToPrecision=function(S,G){var re=t||G;if(isNaN(S)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(re).replace(/0+$/,"")};R=p.hpf=p.__private__.hpf=typeof l=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return D(S,l)}:l==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return D(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return D(S,16)};var A=p.f2=p.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return D(S,2)},L=p.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return D(S,3)},$=p.scale=p.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return x===E?S*gt:x===w?S:void 0},Z=function(S){return $(function(G){return x===E?Ec()-G:x===w?G:void 0}(S))};p.__private__.setPrecision=p.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(t=parseInt(S,10))};var me,ge="00000000000000000000000000000000",pe=p.__private__.getFileId=function(){return ge},te=p.__private__.setFileId=function(S){return ge=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():ge.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(bi=new _d(u.userPermissions,u.userPassword,u.ownerPassword,ge)),ge};p.setFileId=function(S){return te(S),this},p.getFileId=function(){return pe()};var le=p.__private__.convertDateToPDFDate=function(S){var G=S.getTimezoneOffset(),re=G<0?"+":"-",de=Math.floor(Math.abs(G/60)),xe=Math.abs(G%60),De=[re,K(de),"'",K(xe),"'"].join("");return["D:",S.getFullYear(),K(S.getMonth()+1),K(S.getDate()),K(S.getHours()),K(S.getMinutes()),K(S.getSeconds()),De].join("")},ye=p.__private__.convertPDFDateToDate=function(S){var G=parseInt(S.substr(2,4),10),re=parseInt(S.substr(6,2),10)-1,de=parseInt(S.substr(8,2),10),xe=parseInt(S.substr(10,2),10),De=parseInt(S.substr(12,2),10),Be=parseInt(S.substr(14,2),10);return new Date(G,re,de,xe,De,Be,0)},we=p.__private__.setCreationDate=function(S){var G;if(S===void 0&&(S=new Date),S instanceof Date)G=le(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");G=S}return me=G},I=p.__private__.getCreationDate=function(S){var G=me;return S==="jsDate"&&(G=ye(me)),G};p.setCreationDate=function(S){return we(S),this},p.getCreationDate=function(S){return I(S)};var z,K=p.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},ee=p.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},T=0,N=[],P=[],j=0,Y=[],ae=[],ke=!1,Ae=P;p.__private__.setCustomOutputDestination=function(S){ke=!0,Ae=S};var Le=function(S){ke||(Ae=S)};p.__private__.resetCustomOutputDestination=function(){ke=!1,Ae=P};var q=p.__private__.out=function(S){return S=S.toString(),j+=S.length+1,Ae.push(S),Ae},Te=p.__private__.write=function(S){return q(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},_e=p.__private__.getArrayBuffer=function(S){for(var G=S.length,re=new ArrayBuffer(G),de=new Uint8Array(re);G--;)de[G]=S.charCodeAt(G);return re},oe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return oe};var X=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(S){return X=x===w?S/gt:S,this};var he,se=p.__private__.getFontSize=p.getFontSize=function(){return x===E?X:X*gt},Ne=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(S){return Ne=S,this},p.__private__.getR2L=p.getR2L=function(){return Ne};var Me,Ce=p.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))he=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');he=S}else he=parseInt(S,10)};p.__private__.getZoomMode=function(){return he};var qe,nt=p.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');Me=S};p.__private__.getPageMode=function(){return Me};var dt=p.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');qe=S};p.__private__.getLayoutMode=function(){return qe},p.__private__.setDisplayMode=p.setDisplayMode=function(S,G,re){return Ce(S),dt(G),nt(re),this};var Nt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(S){if(Object.keys(Nt).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Nt[S]},p.__private__.getDocumentProperties=function(){return Nt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(S){for(var G in Nt)Nt.hasOwnProperty(G)&&S[G]&&(Nt[G]=S[G]);return this},p.__private__.setDocumentProperty=function(S,G){if(Object.keys(Nt).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Nt[S]=G};var Ye,gt,Xe,bn,zt,Pt={},it={},wt=[],et={},fn={},xt={},Dt={},Cn=null,Ht=0,vt=[],tn=new mk(p),mc=e.hotfixes||[],ir={},Ka={},va=[],yt=function S(G,re,de,xe,De,Be){if(!(this instanceof S))return new S(G,re,de,xe,De,Be);isNaN(G)&&(G=1),isNaN(re)&&(re=0),isNaN(de)&&(de=0),isNaN(xe)&&(xe=1),isNaN(De)&&(De=0),isNaN(Be)&&(Be=0),this._matrix=[G,re,de,xe,De,Be]};Object.defineProperty(yt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(yt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(yt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(yt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(yt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(yt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(yt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(yt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(yt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(yt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(yt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(yt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(yt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(yt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(yt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(yt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),yt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(S)},yt.prototype.multiply=function(S){var G=S.sx*this.sx+S.shy*this.shx,re=S.sx*this.shy+S.shy*this.sy,de=S.shx*this.sx+S.sy*this.shx,xe=S.shx*this.shy+S.sy*this.sy,De=S.tx*this.sx+S.ty*this.shx+this.tx,Be=S.tx*this.shy+S.ty*this.sy+this.ty;return new yt(G,re,de,xe,De,Be)},yt.prototype.decompose=function(){var S=this.sx,G=this.shy,re=this.shx,de=this.sy,xe=this.tx,De=this.ty,Be=Math.sqrt(S*S+G*G),tt=(S/=Be)*re+(G/=Be)*de;re-=S*tt,de-=G*tt;var st=Math.sqrt(re*re+de*de);return tt/=st,S*(de/=st)<G*(re/=st)&&(S=-S,G=-G,tt=-tt,Be=-Be),{scale:new yt(Be,0,0,st,0,0),translate:new yt(1,0,0,1,xe,De),rotate:new yt(S,G,-G,S,0,0),skew:new yt(1,0,tt,1,0,0)}},yt.prototype.toString=function(S){return this.join(" ")},yt.prototype.inversed=function(){var S=this.sx,G=this.shy,re=this.shx,de=this.sy,xe=this.tx,De=this.ty,Be=1/(S*de-G*re),tt=de*Be,st=-G*Be,At=-re*Be,Ot=S*Be;return new yt(tt,st,At,Ot,-tt*xe-At*De,-st*xe-Ot*De)},yt.prototype.applyToPoint=function(S){var G=S.x*this.sx+S.y*this.shx+this.tx,re=S.x*this.shy+S.y*this.sy+this.ty;return new ts(G,re)},yt.prototype.applyToRectangle=function(S){var G=this.applyToPoint(S),re=this.applyToPoint(new ts(S.x+S.w,S.y+S.h));return new Up(G.x,G.y,re.x-G.x,re.y-G.y)},yt.prototype.clone=function(){var S=this.sx,G=this.shy,re=this.shx,de=this.sy,xe=this.tx,De=this.ty;return new yt(S,G,re,de,xe,De)},p.Matrix=yt;var Ya=p.matrixMult=function(S,G){return G.multiply(S)},Ja=new yt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ja;var mo=function(S,G){if(!fn[S]){var re=(G instanceof Yc?"Sh":"P")+(Object.keys(et).length+1).toString(10);G.id=re,fn[S]=re,et[re]=G,tn.publish("addPattern",G)}};p.ShadingPattern=Yc,p.TilingPattern=Dd,p.addShadingPattern=function(S,G){return O("addShadingPattern()"),mo(S,G),this},p.beginTilingPattern=function(S){O("beginTilingPattern()"),qp(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},p.endTilingPattern=function(S,G){O("endTilingPattern()"),G.stream=ae[z].join(`
`),mo(S,G),tn.publish("endTilingPattern",G),va.pop().restore()};var go,$n=p.__private__.newObject=function(){var S=Mi();return $i(S,!0),S},Mi=p.__private__.newObjectDeferred=function(){return T++,N[T]=function(){return j},T},$i=function(S,G){return G=typeof G=="boolean"&&G,N[S]=j,G&&q(S+" 0 obj"),S},gc=p.__private__.newAdditionalObject=function(){var S={objId:Mi(),content:""};return Y.push(S),S},Ws=Mi(),qo=Mi(),ya=p.__private__.decodeColorString=function(S){var G=S.split(" ");if(G.length!==2||G[1]!=="g"&&G[1]!=="G")G.length!==5||G[4]!=="k"&&G[4]!=="K"||(G=[(1-G[0])*(1-G[3]),(1-G[1])*(1-G[3]),(1-G[2])*(1-G[3]),"r"]);else{var re=parseFloat(G[0]);G=[re,re,re,"r"]}for(var de="#",xe=0;xe<3;xe++)de+=("0"+Math.floor(255*parseFloat(G[xe])).toString(16)).slice(-2);return de},zo=p.__private__.encodeColorString=function(S){var G;typeof S=="string"&&(S={ch1:S});var re=S.ch1,de=S.ch2,xe=S.ch3,De=S.ch4,Be=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var tt=new _M(re);if(tt.ok)re=tt.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var st=parseInt(re.substr(1),16);re=st>>16&255,de=st>>8&255,xe=255&st}if(de===void 0||De===void 0&&re===de&&de===xe)G=typeof re=="string"?re+" "+Be[0]:S.precision===2?A(re/255)+" "+Be[0]:L(re/255)+" "+Be[0];else if(De===void 0||cn(De)==="object"){if(De&&!isNaN(De.a)&&De.a===0)return["1.","1.","1.",Be[1]].join(" ");G=typeof re=="string"?[re,de,xe,Be[1]].join(" "):S.precision===2?[A(re/255),A(de/255),A(xe/255),Be[1]].join(" "):[L(re/255),L(de/255),L(xe/255),Be[1]].join(" ")}else G=typeof re=="string"?[re,de,xe,De,Be[2]].join(" "):S.precision===2?[A(re),A(de),A(xe),A(De),Be[2]].join(" "):[L(re),L(de),L(xe),L(De),Be[2]].join(" ");return G},Ho=p.__private__.getFilters=function(){return a},vo=p.__private__.putStream=function(S){var G=(S=S||{}).data||"",re=S.filters||Ho(),de=S.alreadyAppliedFilters||[],xe=S.addLength1||!1,De=G.length,Be=S.objectId,tt=function(wi){return wi};if(u!==null&&Be===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(tt=bi.encryptor(Be,0));var st={};re===!0&&(re=["FlateEncode"]);var At=S.additionalKeyValues||[],Ot=(st=ut.API.processDataByFilters!==void 0?ut.API.processDataByFilters(G,re):{data:G,reverseChain:[]}).reverseChain+(Array.isArray(de)?de.join(" "):de.toString());if(st.data.length!==0&&(At.push({key:"Length",value:st.data.length}),xe===!0&&At.push({key:"Length1",value:De})),Ot.length!=0)if(Ot.split("/").length-1==1)At.push({key:"Filter",value:Ot});else{At.push({key:"Filter",value:"["+Ot+"]"});for(var Xt=0;Xt<At.length;Xt+=1)if(At[Xt].key==="DecodeParms"){for(var Dn=[],hi=0;hi<st.reverseChain.split("/").length-1;hi+=1)Dn.push("null");Dn.push(At[Xt].value),At[Xt].value="["+Dn.join(" ")+"]"}}q("<<");for(var mn=0;mn<At.length;mn++)q("/"+At[mn].key+" "+At[mn].value);q(">>"),st.data.length!==0&&(q("stream"),q(tt(st.data)),q("endstream"))},vc=p.__private__.putPage=function(S){var G=S.number,re=S.data,de=S.objId,xe=S.contentsObjId;$i(de,!0),q("<</Type /Page"),q("/Parent "+S.rootDictionaryObjId+" 0 R"),q("/Resources "+S.resourceDictionaryObjId+" 0 R"),q("/MediaBox ["+parseFloat(R(S.mediaBox.bottomLeftX))+" "+parseFloat(R(S.mediaBox.bottomLeftY))+" "+R(S.mediaBox.topRightX)+" "+R(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&q("/CropBox ["+R(S.cropBox.bottomLeftX)+" "+R(S.cropBox.bottomLeftY)+" "+R(S.cropBox.topRightX)+" "+R(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&q("/BleedBox ["+R(S.bleedBox.bottomLeftX)+" "+R(S.bleedBox.bottomLeftY)+" "+R(S.bleedBox.topRightX)+" "+R(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&q("/TrimBox ["+R(S.trimBox.bottomLeftX)+" "+R(S.trimBox.bottomLeftY)+" "+R(S.trimBox.topRightX)+" "+R(S.trimBox.topRightY)+"]"),S.artBox!==null&&q("/ArtBox ["+R(S.artBox.bottomLeftX)+" "+R(S.artBox.bottomLeftY)+" "+R(S.artBox.topRightX)+" "+R(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&q("/UserUnit "+S.userUnit),tn.publish("putPage",{objId:de,pageContext:vt[G],pageNumber:G,page:re}),q("/Contents "+xe+" 0 R"),q(">>"),q("endobj");var De=re.join(`
`);return x===w&&(De+=`
Q`),$i(xe,!0),vo({data:De,filters:Ho(),objectId:xe}),q("endobj"),de},_a=p.__private__.putPages=function(){var S,G,re=[];for(S=1;S<=Ht;S++)vt[S].objId=Mi(),vt[S].contentsObjId=Mi();for(S=1;S<=Ht;S++)re.push(vc({number:S,data:ae[S],objId:vt[S].objId,contentsObjId:vt[S].contentsObjId,mediaBox:vt[S].mediaBox,cropBox:vt[S].cropBox,bleedBox:vt[S].bleedBox,trimBox:vt[S].trimBox,artBox:vt[S].artBox,userUnit:vt[S].userUnit,rootDictionaryObjId:Ws,resourceDictionaryObjId:qo}));$i(Ws,!0),q("<</Type /Pages");var de="/Kids [";for(G=0;G<Ht;G++)de+=re[G]+" 0 R ";q(de+"]"),q("/Count "+Ht),q(">>"),q("endobj"),tn.publish("postPutPages")},yc=function(S){tn.publish("putFont",{font:S,out:q,newObject:$n,putStream:vo}),S.isAlreadyPutted!==!0&&(S.objectNumber=$n(),q("<<"),q("/Type /Font"),q("/BaseFont /"+bd(S.postScriptName)),q("/Subtype /Type1"),typeof S.encoding=="string"&&q("/Encoding /"+S.encoding),q("/FirstChar 32"),q("/LastChar 255"),q(">>"),q("endobj"))},Bu=function(S){S.objectNumber=$n();var G=[];G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Form"}),G.push({key:"BBox",value:"["+[R(S.x),R(S.y),R(S.x+S.width),R(S.y+S.height)].join(" ")+"]"}),G.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var re=S.pages[1].join(`
`);vo({data:re,additionalKeyValues:G,objectId:S.objectNumber}),q("endobj")},Fu=function(S,G){G||(G=21);var re=$n(),de=function(Be,tt){var st,At=[],Ot=1/(tt-1);for(st=0;st<1;st+=Ot)At.push(st);if(At.push(1),Be[0].offset!=0){var Xt={offset:0,color:Be[0].color};Be.unshift(Xt)}if(Be[Be.length-1].offset!=1){var Dn={offset:1,color:Be[Be.length-1].color};Be.push(Dn)}for(var hi="",mn=0,wi=0;wi<At.length;wi++){for(st=At[wi];st>Be[mn+1].offset;)mn++;var fi=Be[mn].offset,Gi=(st-fi)/(Be[mn+1].offset-fi),rs=Be[mn].color,Wo=Be[mn+1].color;hi+=ee(Math.round((1-Gi)*rs[0]+Gi*Wo[0]).toString(16))+ee(Math.round((1-Gi)*rs[1]+Gi*Wo[1]).toString(16))+ee(Math.round((1-Gi)*rs[2]+Gi*Wo[2]).toString(16))}return hi.trim()}(S.colors,G),xe=[];xe.push({key:"FunctionType",value:"0"}),xe.push({key:"Domain",value:"[0.0 1.0]"}),xe.push({key:"Size",value:"["+G+"]"}),xe.push({key:"BitsPerSample",value:"8"}),xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vo({data:de,additionalKeyValues:xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),q("endobj"),S.objectNumber=$n(),q("<< /ShadingType "+S.type),q("/ColorSpace /DeviceRGB");var De="/Coords ["+R(parseFloat(S.coords[0]))+" "+R(parseFloat(S.coords[1]))+" ";S.type===2?De+=R(parseFloat(S.coords[2]))+" "+R(parseFloat(S.coords[3])):De+=R(parseFloat(S.coords[2]))+" "+R(parseFloat(S.coords[3]))+" "+R(parseFloat(S.coords[4]))+" "+R(parseFloat(S.coords[5])),q(De+="]"),S.matrix&&q("/Matrix ["+S.matrix.toString()+"]"),q("/Function "+re+" 0 R"),q("/Extend [true true]"),q(">>"),q("endobj")},ju=function(S,G){var re=Mi(),de=$n();G.push({resourcesOid:re,objectOid:de}),S.objectNumber=de;var xe=[];xe.push({key:"Type",value:"/Pattern"}),xe.push({key:"PatternType",value:"1"}),xe.push({key:"PaintType",value:"1"}),xe.push({key:"TilingType",value:"1"}),xe.push({key:"BBox",value:"["+S.boundingBox.map(R).join(" ")+"]"}),xe.push({key:"XStep",value:R(S.xStep)}),xe.push({key:"YStep",value:R(S.yStep)}),xe.push({key:"Resources",value:re+" 0 R"}),S.matrix&&xe.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),vo({data:S.stream,additionalKeyValues:xe,objectId:S.objectNumber}),q("endobj")},I_=function(S){for(var G in S.objectNumber=$n(),q("<<"),S)switch(G){case"opacity":q("/ca "+A(S[G]));break;case"stroke-opacity":q("/CA "+A(S[G]))}q(">>"),q("endobj")},Dp=function(S){$i(S.resourcesOid,!0),q("<<"),q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var G in q("/Font <<"),Pt)Pt.hasOwnProperty(G)&&(d===!1||d===!0&&h.hasOwnProperty(G))&&q("/"+G+" "+Pt[G].objectNumber+" 0 R");q(">>")}(),function(){if(Object.keys(et).length>0){for(var G in q("/Shading <<"),et)et.hasOwnProperty(G)&&et[G]instanceof Yc&&et[G].objectNumber>=0&&q("/"+G+" "+et[G].objectNumber+" 0 R");tn.publish("putShadingPatternDict"),q(">>")}}(),function(G){if(Object.keys(et).length>0){for(var re in q("/Pattern <<"),et)et.hasOwnProperty(re)&&et[re]instanceof p.TilingPattern&&et[re].objectNumber>=0&&et[re].objectNumber<G&&q("/"+re+" "+et[re].objectNumber+" 0 R");tn.publish("putTilingPatternDict"),q(">>")}}(S.objectOid),function(){if(Object.keys(xt).length>0){var G;for(G in q("/ExtGState <<"),xt)xt.hasOwnProperty(G)&&xt[G].objectNumber>=0&&q("/"+G+" "+xt[G].objectNumber+" 0 R");tn.publish("putGStateDict"),q(">>")}}(),function(){for(var G in q("/XObject <<"),ir)ir.hasOwnProperty(G)&&ir[G].objectNumber>=0&&q("/"+G+" "+ir[G].objectNumber+" 0 R");tn.publish("putXobjectDict"),q(">>")}(),q(">>"),q("endobj")},Am=function(S){it[S.fontName]=it[S.fontName]||{},it[S.fontName][S.fontStyle]=S.id},Tm=function(S,G,re,de,xe){var De={id:"F"+(Object.keys(Pt).length+1).toString(10),postScriptName:S,fontName:G,fontStyle:re,encoding:de,isStandardFont:xe||!1,metadata:{}};return tn.publish("addFont",{font:De,instance:this}),Pt[De.id]=De,Am(De),De.id},yo=p.__private__.pdfEscape=p.pdfEscape=function(S,G){return function(re,de){var xe,De,Be,tt,st,At,Ot,Xt,Dn;if(Be=(de=de||{}).sourceEncoding||"Unicode",st=de.outputEncoding,(de.autoencode||st)&&Pt[Ye].metadata&&Pt[Ye].metadata[Be]&&Pt[Ye].metadata[Be].encoding&&(tt=Pt[Ye].metadata[Be].encoding,!st&&Pt[Ye].encoding&&(st=Pt[Ye].encoding),!st&&tt.codePages&&(st=tt.codePages[0]),typeof st=="string"&&(st=tt[st]),st)){for(Ot=!1,At=[],xe=0,De=re.length;xe<De;xe++)(Xt=st[re.charCodeAt(xe)])?At.push(String.fromCharCode(Xt)):At.push(re[xe]),At[xe].charCodeAt(0)>>8&&(Ot=!0);re=At.join("")}for(xe=re.length;Ot===void 0&&xe!==0;)re.charCodeAt(xe-1)>>8&&(Ot=!0),xe--;if(!Ot)return re;for(At=de.noBOM?[]:[254,255],xe=0,De=re.length;xe<De;xe++){if((Dn=(Xt=re.charCodeAt(xe))>>8)>>8)throw new Error("Character at position "+xe+" of string '"+re+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");At.push(Dn),At.push(Xt-(Dn<<8))}return String.fromCharCode.apply(void 0,At)}(S,G).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lp=p.__private__.beginPage=function(S){ae[++Ht]=[],vt[Ht]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Rm(Ht),Le(ae[z])},Cm=function(S,G){var re,de,xe;switch(n=G||n,typeof S=="string"&&(re=b(S.toLowerCase()),Array.isArray(re)&&(de=re[0],xe=re[1])),Array.isArray(S)&&(de=S[0]*gt,xe=S[1]*gt),isNaN(de)&&(de=r[0],xe=r[1]),(de>14400||xe>14400)&&(hn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),de=Math.min(14400,de),xe=Math.min(14400,xe)),r=[de,xe],n.substr(0,1)){case"l":xe>de&&(r=[xe,de]);break;case"p":de>xe&&(r=[xe,de])}Lp(r),Tt(Fp),q(qu),$p!==0&&q($p+" J"),Gp!==0&&q(Gp+" j"),tn.publish("addPage",{pageNumber:Ht})},Op=function(S){S>0&&S<=Ht&&(ae.splice(S,1),vt.splice(S,1),Ht--,z>Ht&&(z=Ht),this.setPage(z))},Rm=function(S){S>0&&S<=Ht&&(z=S)},Mm=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ae.length-1},Im=function(S,G,re){var de,xe=void 0;return re=re||{},S=S!==void 0?S:Pt[Ye].fontName,G=G!==void 0?G:Pt[Ye].fontStyle,de=S.toLowerCase(),it[de]!==void 0&&it[de][G]!==void 0?xe=it[de][G]:it[S]!==void 0&&it[S][G]!==void 0?xe=it[S][G]:re.disableWarning===!1&&hn.warn("Unable to look up font label for font '"+S+"', '"+G+"'. Refer to getFontList() for available fonts."),xe||re.noFallback||(xe=it.times[G])==null&&(xe=it.times.normal),xe},ba=p.__private__.putInfo=function(){var S=$n(),G=function(de){return de};for(var re in u!==null&&(G=bi.encryptor(S,0)),q("<<"),q("/Producer ("+yo(G("jsPDF "+ut.version))+")"),Nt)Nt.hasOwnProperty(re)&&Nt[re]&&q("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+yo(G(Nt[re]))+")");q("/CreationDate ("+yo(G(me))+")"),q(">>"),q("endobj")},$u=p.__private__.putCatalog=function(S){var G=(S=S||{}).rootDictionaryObjId||Ws;switch($n(),q("<<"),q("/Type /Catalog"),q("/Pages "+G+" 0 R"),he||(he="fullwidth"),he){case"fullwidth":q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":q("/OpenAction [3 0 R /Fit]");break;case"original":q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+he;re.substr(re.length-1)==="%"&&(he=parseInt(he)/100),typeof he=="number"&&q("/OpenAction [3 0 R /XYZ null null "+A(he)+"]")}switch(qe||(qe="continuous"),qe){case"continuous":q("/PageLayout /OneColumn");break;case"single":q("/PageLayout /SinglePage");break;case"two":case"twoleft":q("/PageLayout /TwoColumnLeft");break;case"tworight":q("/PageLayout /TwoColumnRight")}Me&&q("/PageMode /"+Me),tn.publish("putCatalog"),q(">>"),q("endobj")},D_=p.__private__.putTrailer=function(){q("trailer"),q("<<"),q("/Size "+(T+1)),q("/Root "+T+" 0 R"),q("/Info "+(T-1)+" 0 R"),u!==null&&q("/Encrypt "+bi.oid+" 0 R"),q("/ID [ <"+ge+"> <"+ge+"> ]"),q(">>")},pi=p.__private__.putHeader=function(){q("%PDF-"+m),q("%")},Dm=p.__private__.putXRef=function(){var S="0000000000";q("xref"),q("0 "+(T+1)),q("0000000000 65535 f ");for(var G=1;G<=T;G++)typeof N[G]=="function"?q((S+N[G]()).slice(-10)+" 00000 n "):N[G]!==void 0?q((S+N[G]).slice(-10)+" 00000 n "):q("0000000000 00000 n ")},wa=p.__private__.buildDocument=function(){var S;T=0,j=0,P=[],N=[],Y=[],Ws=Mi(),qo=Mi(),Le(P),tn.publish("buildDocument"),pi(),_a(),function(){tn.publish("putAdditionalObjects");for(var re=0;re<Y.length;re++){var de=Y[re];$i(de.objId,!0),q(de.content),q("endobj")}tn.publish("postPutAdditionalObjects")}(),S=[],function(){for(var re in Pt)Pt.hasOwnProperty(re)&&(d===!1||d===!0&&h.hasOwnProperty(re))&&yc(Pt[re])}(),function(){var re;for(re in xt)xt.hasOwnProperty(re)&&I_(xt[re])}(),function(){for(var re in ir)ir.hasOwnProperty(re)&&Bu(ir[re])}(),function(re){var de;for(de in et)et.hasOwnProperty(de)&&(et[de]instanceof Yc?Fu(et[de]):et[de]instanceof Dd&&ju(et[de],re))}(S),tn.publish("putResources"),S.forEach(Dp),Dp({resourcesOid:qo,objectOid:Number.MAX_SAFE_INTEGER}),tn.publish("postPutResources"),u!==null&&(bi.oid=$n(),q("<<"),q("/Filter /Standard"),q("/V "+bi.v),q("/R "+bi.r),q("/U <"+bi.toHexString(bi.U)+">"),q("/O <"+bi.toHexString(bi.O)+">"),q("/P "+bi.P),q(">>"),q("endobj")),ba(),$u();var G=j;return Dm(),D_(),q("startxref"),q(""+G),q("%%EOF"),Le(ae[z]),P.join(`
`)},Gu=p.__private__.getBlob=function(S){return new Blob([_e(S)],{type:"application/pdf"})},Lm=p.output=p.__private__.output=(go=function(S,G){switch(typeof(G=G||{})=="string"?G={filename:G}:G.filename=G.filename||"generated.pdf",S){case void 0:return wa();case"save":p.save(G.filename);break;case"arraybuffer":return _e(wa());case"blob":return Gu(wa());case"bloburi":case"bloburl":if(kt.URL!==void 0&&typeof kt.URL.createObjectURL=="function")return kt.URL&&kt.URL.createObjectURL(Gu(wa()))||void 0;hn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",de=wa();try{re=pk(de)}catch{re=pk(unescape(encodeURIComponent(de)))}return"data:application/pdf;filename="+G.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",De=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';G.pdfObjectUrl&&(xe=G.pdfObjectUrl,De="");var Be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xe+'"'+De+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(G)+");<\/script></body></html>",tt=kt.open();return tt!==null&&tt.document.write(Be),tt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(G.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+G.filename+'" width="500px" height="400px" /></body></html>',At=kt.open();if(At!==null){At.document.write(st);var Ot=this;At.document.documentElement.querySelector("#pdfViewer").onload=function(){At.document.title=G.filename,At.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ot.output("bloburl"))}}return At}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",G)+'"></iframe></body></html>',Dn=kt.open();if(Dn!==null&&(Dn.document.write(Xt),Dn.document.title=G.filename),Dn||typeof safari>"u")return Dn;break;case"datauri":case"dataurl":return kt.document.location.href=this.output("datauristring",G);default:return null}},go.foo=function(){try{return go.apply(this,arguments)}catch(re){var S=re.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var G="Error in function "+S.split(`
`)[0].split("<")[0]+": "+re.message;if(!kt.console)throw new Error(G);kt.console.error(G,re),kt.alert&&alert(G)}},go.foo.bar=go,go.foo),_o=function(S){return Array.isArray(mc)===!0&&mc.indexOf(S)>-1};switch(i){case"pt":gt=1;break;case"mm":gt=72/25.4;break;case"cm":gt=72/2.54;break;case"in":gt=72;break;case"px":gt=_o("px_scaling")==1?.75:96/72;break;case"pc":case"em":gt=12;break;case"ex":gt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);gt=i}var bi=null;we(),te();var Xa=p.__private__.getPageInfo=p.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:vt[S].objId,pageNumber:S,pageContext:vt[S]}},Om=p.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var G in vt)if(vt[G].objId===S)break;return Xa(G)},L_=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:vt[z].objId,pageNumber:z,pageContext:vt[z]}};p.addPage=function(){return Cm.apply(this,arguments),this},p.setPage=function(){return Rm.apply(this,arguments),Le.call(this,ae[z]),this},p.insertPage=function(S){return this.addPage(),this.movePage(z,S),this},p.movePage=function(S,G){var re,de;if(S>G){re=ae[S],de=vt[S];for(var xe=S;xe>G;xe--)ae[xe]=ae[xe-1],vt[xe]=vt[xe-1];ae[G]=re,vt[G]=de,this.setPage(G)}else if(S<G){re=ae[S],de=vt[S];for(var De=S;De<G;De++)ae[De]=ae[De+1],vt[De]=vt[De+1];ae[G]=re,vt[G]=de,this.setPage(G)}return this},p.deletePage=function(){return Op.apply(this,arguments),this},p.__private__.text=p.text=function(S,G,re,de,xe){var De,Be,tt,st,At,Ot,Xt,Dn,hi,mn=(de=de||{}).scope||this;if(typeof S=="number"&&typeof G=="number"&&(typeof re=="string"||Array.isArray(re))){var wi=re;re=G,G=S,S=wi}if(arguments[3]instanceof yt==0?(tt=arguments[4],st=arguments[5],cn(Xt=arguments[3])==="object"&&Xt!==null||(typeof tt=="string"&&(st=tt,tt=null),typeof Xt=="string"&&(st=Xt,Xt=null),typeof Xt=="number"&&(tt=Xt,Xt=null),de={flags:Xt,angle:tt,align:st})):(O("The transform parameter of text() with a Matrix value"),hi=xe),isNaN(G)||isNaN(re)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return mn;var fi,Gi="",rs=typeof de.lineHeightFactor=="number"?de.lineHeightFactor:bc,Wo=mn.internal.scaleFactor;function os(nn){return nn=nn.split("	").join(Array(de.TabLen||9).join(" ")),yo(nn,Xt)}function Hp(nn){for(var dn,Qn=nn.concat(),xi=[],ls=Qn.length;ls--;)typeof(dn=Qn.shift())=="string"?xi.push(dn):Array.isArray(nn)&&(dn.length===1||dn[1]===void 0&&dn[2]===void 0)?xi.push(dn[0]):xi.push([dn[0],dn[1],dn[2]]);return xi}function Hu(nn,dn){var Qn;if(typeof nn=="string")Qn=dn(nn)[0];else if(Array.isArray(nn)){for(var xi,ls,th=nn.concat(),Ku=[],Wm=th.length;Wm--;)typeof(xi=th.shift())=="string"?Ku.push(dn(xi)[0]):Array.isArray(xi)&&typeof xi[0]=="string"&&(ls=dn(xi[0],xi[1],xi[2]),Ku.push([ls[0],ls[1],ls[2]]));Qn=Ku}return Qn}var Ks=!1,Sc=!0;if(typeof S=="string")Ks=!0;else if(Array.isArray(S)){var Nc=S.concat();Be=[];for(var Ys,Ui=Nc.length;Ui--;)(typeof(Ys=Nc.shift())!="string"||Array.isArray(Ys)&&typeof Ys[0]!="string")&&(Sc=!1);Ks=Sc}if(Ks===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var kc=X/mn.internal.scaleFactor,Pc=kc*(rs-1);switch(de.baseline){case"bottom":re-=Pc;break;case"top":re+=kc-Pc;break;case"hanging":re+=kc-2*Pc;break;case"middle":re+=kc/2-Pc}if((Ot=de.maxWidth||0)>0&&(typeof S=="string"?S=mn.splitTextToSize(S,Ot):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(nn,dn){return nn.concat(mn.splitTextToSize(dn,Ot))},[]))),De={text:S,x:G,y:re,options:de,mutex:{pdfEscape:yo,activeFontKey:Ye,fonts:Pt,activeFontSize:X}},tn.publish("preProcessText",De),S=De.text,tt=(de=De.options).angle,hi instanceof yt==0&&tt&&typeof tt=="number"){tt*=Math.PI/180,de.rotationDirection===0&&(tt=-tt),x===w&&(tt=-tt);var Vp=Math.cos(tt),Wp=Math.sin(tt);hi=new yt(Vp,Wp,-Wp,Vp,0,0)}else tt&&tt instanceof yt&&(hi=tt);x!==w||hi||(hi=Ja),(At=de.charSpace||es)!==void 0&&(Gi+=R($(At))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Dn=de.horizontalScale)!==void 0&&(Gi+=R(100*Dn)+` Tz
`),de.lang;var gr=-1,as=de.renderingMode!==void 0?de.renderingMode:de.stroke,Vu=mn.internal.getCurrentPageInfo().pageContext;switch(as){case 0:case!1:case"fill":gr=0;break;case 1:case!0:case"stroke":gr=1;break;case 2:case"fillThenStroke":gr=2;break;case 3:case"invisible":gr=3;break;case 4:case"fillAndAddForClipping":gr=4;break;case 5:case"strokeAndAddPathForClipping":gr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gr=6;break;case 7:case"addToPathForClipping":gr=7}var Hm=Vu.usedRenderingMode!==void 0?Vu.usedRenderingMode:-1;gr!==-1?Gi+=gr+` Tr
`:Hm!==-1&&(Gi+=`0 Tr
`),gr!==-1&&(Vu.usedRenderingMode=gr),st=de.align||"left";var bo,Ac=X*rs,Kp=mn.internal.pageSize.getWidth(),Yp=Pt[Ye];At=de.charSpace||es,Ot=de.maxWidth||0,Xt=Object.assign({autoencode:!0,noBOM:!0},de.flags);var Js=[],Tc=function(nn){return mn.getStringUnitWidth(nn,{font:Yp,charSpace:At,fontSize:X,doKerning:!1})*X/Wo};if(Object.prototype.toString.call(S)==="[object Array]"){var Ur;Be=Hp(S),st!=="left"&&(bo=Be.map(Tc));var qr,Xs=0;if(st==="right"){G-=bo[0],S=[],Ui=Be.length;for(var ss=0;ss<Ui;ss++)ss===0?(qr=Za(G),Ur=Qa(re)):(qr=$(Xs-bo[ss]),Ur=-Ac),S.push([Be[ss],qr,Ur]),Xs=bo[ss]}else if(st==="center"){G-=bo[0]/2,S=[],Ui=Be.length;for(var Zs=0;Zs<Ui;Zs++)Zs===0?(qr=Za(G),Ur=Qa(re)):(qr=$((Xs-bo[Zs])/2),Ur=-Ac),S.push([Be[Zs],qr,Ur]),Xs=bo[Zs]}else if(st==="left"){S=[],Ui=Be.length;for(var Jp=0;Jp<Ui;Jp++)S.push(Be[Jp])}else if(st==="justify"&&Yp.encoding==="Identity-H"){S=[],Ui=Be.length,Ot=Ot!==0?Ot:Kp;for(var Wu=0,Zn=0;Zn<Ui;Zn++)if(Ur=Zn===0?Qa(re):-Ac,qr=Zn===0?Za(G):Wu,Zn<Ui-1){var Vm=$((Ot-bo[Zn])/(Be[Zn].split(" ").length-1)),Ea=Be[Zn].split(" ");S.push([Ea[0]+" ",qr,Ur]),Wu=0;for(var Sa=1;Sa<Ea.length;Sa++){var Xp=(Tc(Ea[Sa-1]+" "+Ea[Sa])-Tc(Ea[Sa]))*Wo+Vm;Sa==Ea.length-1?S.push([Ea[Sa],Xp,0]):S.push([Ea[Sa]+" ",Xp,0]),Wu-=Xp}}else S.push([Be[Zn],qr,Ur]);S.push(["",Wu,0])}else{if(st!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],Ui=Be.length,Ot=Ot!==0?Ot:Kp,Zn=0;Zn<Ui;Zn++){Ur=Zn===0?Qa(re):-Ac,qr=Zn===0?Za(G):0;var Zp=Be[Zn].split(" ").length-1,Qp=Zp>0?(Ot-bo[Zn])/Zp:0;Zn<Ui-1?Js.push(R($(Qp))):Js.push(0),S.push([Be[Zn],qr,Ur])}}}(typeof de.R2L=="boolean"?de.R2L:Ne)===!0&&(S=Hu(S,function(nn,dn,Qn){return[nn.split("").reverse().join(""),dn,Qn]})),De={text:S,x:G,y:re,options:de,mutex:{pdfEscape:yo,activeFontKey:Ye,fonts:Pt,activeFontSize:X}},tn.publish("postProcessText",De),S=De.text,fi=De.mutex.isHex||!1;var eh=Pt[Ye].encoding;eh!=="WinAnsiEncoding"&&eh!=="StandardEncoding"||(S=Hu(S,function(nn,dn,Qn){return[os(nn),dn,Qn]})),Be=Hp(S),S=[];for(var Qs,el,tl,Cc=Array.isArray(Be[0])?1:0,nl="",Rc=function(nn,dn,Qn){var xi="";return Qn instanceof yt?(Qn=typeof de.angle=="number"?Ya(Qn,new yt(1,0,0,1,nn,dn)):Ya(new yt(1,0,0,1,nn,dn),Qn),x===w&&(Qn=Ya(new yt(1,0,0,-1,0,0),Qn)),xi=Qn.join(" ")+` Tm
`):xi=R(nn)+" "+R(dn)+` Td
`,xi},wo=0;wo<Be.length;wo++){switch(nl="",Cc){case 1:tl=(fi?"<":"(")+Be[wo][0]+(fi?">":")"),Qs=parseFloat(Be[wo][1]),el=parseFloat(Be[wo][2]);break;case 0:tl=(fi?"<":"(")+Be[wo]+(fi?">":")"),Qs=Za(G),el=Qa(re)}Js!==void 0&&Js[wo]!==void 0&&(nl=Js[wo]+` Tw
`),wo===0?S.push(nl+Rc(Qs,el,hi)+tl):Cc===0?S.push(nl+tl):Cc===1&&S.push(nl+Rc(Qs,el,hi)+tl)}S=Cc===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Na=`BT
/`;return Na+=Ye+" "+X+` Tf
`,Na+=R(X*rs)+` TL
`,Na+=wc+`
`,Na+=Gi,Na+=S,q(Na+="ET"),h[Ye]=!0,mn};var O_=p.__private__.clip=p.clip=function(S){return q(S==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return O_("evenodd")},p.__private__.discardPath=p.discardPath=function(){return q("n"),this};var xa=p.__private__.isValidStyle=function(S){var G=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(G=!0),G};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(S){return xa(S)&&(c=S),this};var Bm=p.__private__.getStyle=p.getStyle=function(S){var G=c;switch(S){case"D":case"S":G="S";break;case"F":G="f";break;case"FD":case"DF":G="B";break;case"f":case"f*":case"B":case"B*":G=S}return G},Fm=p.close=function(){return q("h"),this};p.stroke=function(){return q("S"),this},p.fill=function(S){return Uu("f",S),this},p.fillEvenOdd=function(S){return Uu("f*",S),this},p.fillStroke=function(S){return Uu("B",S),this},p.fillStrokeEvenOdd=function(S){return Uu("B*",S),this};var Uu=function(S,G){cn(G)==="object"?F_(G,S):q(S)},_c=function(S){S===null||x===w&&S===void 0||(S=Bm(S),q(S))};function B_(S,G,re,de,xe){var De=new Dd(G||this.boundingBox,re||this.xStep,de||this.yStep,this.gState,xe||this.matrix);De.stream=this.stream;var Be=S+"$$"+this.cloneIndex+++"$$";return mo(Be,De),De}var F_=function(S,G){var re=fn[S.key],de=et[re];if(de instanceof Yc)q("q"),q(j_(G)),de.gState&&p.setGState(de.gState),q(S.matrix.toString()+" cm"),q("/"+re+" sh"),q("Q");else if(de instanceof Dd){var xe=new yt(1,0,0,-1,0,Ec());S.matrix&&(xe=xe.multiply(S.matrix||Ja),re=B_.call(de,S.key,S.boundingBox,S.xStep,S.yStep,xe).id),q("q"),q("/Pattern cs"),q("/"+re+" scn"),de.gState&&p.setGState(de.gState),q(G),q("Q")}},j_=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Bp=p.moveTo=function(S,G){return q(R($(S))+" "+R(Z(G))+" m"),this},jm=p.lineTo=function(S,G){return q(R($(S))+" "+R(Z(G))+" l"),this},Vo=p.curveTo=function(S,G,re,de,xe,De){return q([R($(S)),R(Z(G)),R($(re)),R(Z(de)),R($(xe)),R(Z(De)),"c"].join(" ")),this};p.__private__.line=p.line=function(S,G,re,de,xe){if(isNaN(S)||isNaN(G)||isNaN(re)||isNaN(de)||!xa(xe))throw new Error("Invalid arguments passed to jsPDF.line");return x===E?this.lines([[re-S,de-G]],S,G,[1,1],xe||"S"):this.lines([[re-S,de-G]],S,G,[1,1]).stroke()},p.__private__.lines=p.lines=function(S,G,re,de,xe,De){var Be,tt,st,At,Ot,Xt,Dn,hi,mn,wi,fi,Gi;if(typeof S=="number"&&(Gi=re,re=G,G=S,S=Gi),de=de||[1,1],De=De||!1,isNaN(G)||isNaN(re)||!Array.isArray(S)||!Array.isArray(de)||!xa(xe)||typeof De!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Bp(G,re),Be=de[0],tt=de[1],At=S.length,wi=G,fi=re,st=0;st<At;st++)(Ot=S[st]).length===2?(wi=Ot[0]*Be+wi,fi=Ot[1]*tt+fi,jm(wi,fi)):(Xt=Ot[0]*Be+wi,Dn=Ot[1]*tt+fi,hi=Ot[2]*Be+wi,mn=Ot[3]*tt+fi,wi=Ot[4]*Be+wi,fi=Ot[5]*tt+fi,Vo(Xt,Dn,hi,mn,wi,fi));return De&&Fm(),_c(xe),this},p.path=function(S){for(var G=0;G<S.length;G++){var re=S[G],de=re.c;switch(re.op){case"m":Bp(de[0],de[1]);break;case"l":jm(de[0],de[1]);break;case"c":Vo.apply(this,de);break;case"h":Fm()}}return this},p.__private__.rect=p.rect=function(S,G,re,de,xe){if(isNaN(S)||isNaN(G)||isNaN(re)||isNaN(de)||!xa(xe))throw new Error("Invalid arguments passed to jsPDF.rect");return x===E&&(de=-de),q([R($(S)),R(Z(G)),R($(re)),R($(de)),"re"].join(" ")),_c(xe),this},p.__private__.triangle=p.triangle=function(S,G,re,de,xe,De,Be){if(isNaN(S)||isNaN(G)||isNaN(re)||isNaN(de)||isNaN(xe)||isNaN(De)||!xa(Be))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-S,de-G],[xe-re,De-de],[S-xe,G-De]],S,G,[1,1],Be,!0),this},p.__private__.roundedRect=p.roundedRect=function(S,G,re,de,xe,De,Be){if(isNaN(S)||isNaN(G)||isNaN(re)||isNaN(de)||isNaN(xe)||isNaN(De)||!xa(Be))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var tt=4/3*(Math.SQRT2-1);return xe=Math.min(xe,.5*re),De=Math.min(De,.5*de),this.lines([[re-2*xe,0],[xe*tt,0,xe,De-De*tt,xe,De],[0,de-2*De],[0,De*tt,-xe*tt,De,-xe,De],[2*xe-re,0],[-xe*tt,0,-xe,-De*tt,-xe,-De],[0,2*De-de],[0,-De*tt,xe*tt,-De,xe,-De]],S+xe,G,[1,1],Be,!0),this},p.__private__.ellipse=p.ellipse=function(S,G,re,de,xe){if(isNaN(S)||isNaN(G)||isNaN(re)||isNaN(de)||!xa(xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var De=4/3*(Math.SQRT2-1)*re,Be=4/3*(Math.SQRT2-1)*de;return Bp(S+re,G),Vo(S+re,G-Be,S+De,G-de,S,G-de),Vo(S-De,G-de,S-re,G-Be,S-re,G),Vo(S-re,G+Be,S-De,G+de,S,G+de),Vo(S+De,G+de,S+re,G+Be,S+re,G),_c(xe),this},p.__private__.circle=p.circle=function(S,G,re,de){if(isNaN(S)||isNaN(G)||isNaN(re)||!xa(de))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,G,re,re,de)},p.setFont=function(S,G,re){return re&&(G=H(G,re)),Ye=Im(S,G,{disableWarning:!1}),this};var $_=p.__private__.getFont=p.getFont=function(){return Pt[Im.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var S,G,re={};for(S in it)if(it.hasOwnProperty(S))for(G in re[S]=[],it[S])it[S].hasOwnProperty(G)&&re[S].push(G);return re},p.addFont=function(S,G,re,de,xe){var De=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&De.indexOf(arguments[3])!==-1?xe=arguments[3]:arguments[3]&&De.indexOf(arguments[3])==-1&&(re=H(re,de)),Tm.call(this,S,G,re,xe=xe||"Identity-H")};var bc,Fp=e.lineWidth||.200025,G_=p.__private__.getLineWidth=p.getLineWidth=function(){return Fp},Tt=p.__private__.setLineWidth=p.setLineWidth=function(S){return Fp=S,q(R($(S))+" w"),this};p.__private__.setLineDash=ut.API.setLineDash=ut.API.setLineDashPattern=function(S,G){if(S=S||[],G=G||0,isNaN(G)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(re){return R($(re))}).join(" "),G=R($(G)),q("["+S+"] "+G+" d"),this};var U_=p.__private__.getLineHeight=p.getLineHeight=function(){return X*bc};p.__private__.getLineHeight=p.getLineHeight=function(){return X*bc};var q_=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(bc=S),this},z_=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return bc};q_(e.lineHeight);var Za=p.__private__.getHorizontalCoordinate=function(S){return $(S)},Qa=p.__private__.getVerticalCoordinate=function(S){return x===w?S:vt[z].mediaBox.topRightY-vt[z].mediaBox.bottomLeftY-$(S)},H_=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(S){return R(Za(S))},V_=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(S){return R(Qa(S))},qu=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ya(qu)},p.__private__.setStrokeColor=p.setDrawColor=function(S,G,re,de){return qu=zo({ch1:S,ch2:G,ch3:re,ch4:de,pdfColorType:"draw",precision:2}),q(qu),this};var jp=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ya(jp)},p.__private__.setFillColor=p.setFillColor=function(S,G,re,de){return jp=zo({ch1:S,ch2:G,ch3:re,ch4:de,pdfColorType:"fill",precision:2}),q(jp),this};var wc=e.textColor||"0 g",W_=p.__private__.getTextColor=p.getTextColor=function(){return ya(wc)};p.__private__.setTextColor=p.setTextColor=function(S,G,re,de){return wc=zo({ch1:S,ch2:G,ch3:re,ch4:de,pdfColorType:"text",precision:3}),this};var es=e.charSpace,K_=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(es||0)};p.__private__.setCharSpace=p.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return es=S,this};var $p=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(S){var G=p.CapJoinStyles[S];if(G===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $p=G,q(G+" J"),this};var Gp=0;p.__private__.setLineJoin=p.setLineJoin=function(S){var G=p.CapJoinStyles[S];if(G===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gp=G,q(G+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return q(R($(S))+" M"),this},p.GState=Iv,p.setGState=function(S){(S=typeof S=="string"?xt[Dt[S]]:$m(null,S)).equals(Cn)||(q("/"+S.id+" gs"),Cn=S)};var $m=function(S,G){if(!S||!Dt[S]){var re=!1;for(var de in xt)if(xt.hasOwnProperty(de)&&xt[de].equals(G)){re=!0;break}if(re)G=xt[de];else{var xe="GS"+(Object.keys(xt).length+1).toString(10);xt[xe]=G,G.id=xe}return S&&(Dt[S]=G.id),tn.publish("addGState",G),G}};p.addGState=function(S,G){return $m(S,G),this},p.saveGraphicsState=function(){return q("q"),wt.push({key:Ye,size:X,color:wc}),this},p.restoreGraphicsState=function(){q("Q");var S=wt.pop();return Ye=S.key,X=S.size,wc=S.color,Cn=null,this},p.setCurrentTransformationMatrix=function(S){return q(S.toString()+" cm"),this},p.comment=function(S){return q("#"+S),this};var ts=function(S,G){var re=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(De){isNaN(De)||(re=parseFloat(De))}});var de=G||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return de},set:function(De){isNaN(De)||(de=parseFloat(De))}});var xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xe},set:function(De){xe=De.toString()}}),this},Up=function(S,G,re,de){ts.call(this,S,G),this.type="rect";var xe=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xe},set:function(Be){isNaN(Be)||(xe=parseFloat(Be))}});var De=de||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return De},set:function(Be){isNaN(Be)||(De=parseFloat(Be))}}),this},zu=function(){this.page=Ht,this.currentPage=z,this.pages=ae.slice(0),this.pagesContext=vt.slice(0),this.x=Xe,this.y=bn,this.matrix=zt,this.width=zp(z),this.height=Um(z),this.outputDestination=Ae,this.id="",this.objectNumber=-1};zu.prototype.restore=function(){Ht=this.page,z=this.currentPage,vt=this.pagesContext,ae=this.pages,Xe=this.x,bn=this.y,zt=this.matrix,Gm(z,this.width),ns(z,this.height),Ae=this.outputDestination};var qp=function(S,G,re,de,xe){va.push(new zu),Ht=z=0,ae=[],Xe=S,bn=G,zt=xe,Lp([re,de])};for(var xc in p.beginFormObject=function(S,G,re,de,xe){return qp(S,G,re,de,xe),this},p.endFormObject=function(S){return function(G){if(Ka[G])va.pop().restore();else{var re=new zu,de="Xo"+(Object.keys(ir).length+1).toString(10);re.id=de,Ka[G]=de,ir[de]=re,tn.publish("addFormObject",re),va.pop().restore()}}(S),this},p.doFormObject=function(S,G){var re=ir[Ka[S]];return q("q"),q(G.toString()+" cm"),q("/"+re.id+" Do"),q("Q"),this},p.getFormObject=function(S){var G=ir[Ka[S]];return{x:G.x,y:G.y,width:G.width,height:G.height,matrix:G.matrix}},p.save=function(S,G){return S=S||"generated.pdf",(G=G||{}).returnPromise=G.returnPromise||!1,G.returnPromise===!1?(Uc(Gu(wa()),S),typeof Uc.unload=="function"&&kt.setTimeout&&setTimeout(Uc.unload,911),this):new Promise(function(re,de){try{var xe=Uc(Gu(wa()),S);typeof Uc.unload=="function"&&kt.setTimeout&&setTimeout(Uc.unload,911),re(xe)}catch(De){de(De.message)}})},ut.API)ut.API.hasOwnProperty(xc)&&(xc==="events"&&ut.API.events.length?function(S,G){var re,de,xe;for(xe=G.length-1;xe!==-1;xe--)re=G[xe][0],de=G[xe][1],S.subscribe.apply(S,[re].concat(typeof de=="function"?[de]:de))}(tn,ut.API.events):p[xc]=ut.API[xc]);function zp(S){return vt[S].mediaBox.topRightX-vt[S].mediaBox.bottomLeftX}function Gm(S,G){vt[S].mediaBox.topRightX=G+vt[S].mediaBox.bottomLeftX}function Um(S){return vt[S].mediaBox.topRightY-vt[S].mediaBox.bottomLeftY}function ns(S,G){vt[S].mediaBox.topRightY=G+vt[S].mediaBox.bottomLeftY}var is=p.getPageWidth=function(S){return zp(S=S||z)/gt},qm=p.setPageWidth=function(S,G){Gm(S,G*gt)},Ec=p.getPageHeight=function(S){return Um(S=S||z)/gt},zm=p.setPageHeight=function(S,G){ns(S,G*gt)};return p.internal={pdfEscape:yo,getStyle:Bm,getFont:$_,getFontSize:se,getCharSpace:K_,getTextColor:W_,getLineHeight:U_,getLineHeightFactor:z_,getLineWidth:G_,write:Te,getHorizontalCoordinate:Za,getVerticalCoordinate:Qa,getCoordinateString:H_,getVerticalCoordinateString:V_,collections:{},newObject:$n,newAdditionalObject:gc,newObjectDeferred:Mi,newObjectDeferredBegin:$i,getFilters:Ho,putStream:vo,events:tn,scaleFactor:gt,pageSize:{getWidth:function(){return is(z)},setWidth:function(S){qm(z,S)},getHeight:function(){return Ec(z)},setHeight:function(S){zm(z,S)}},encryptionOptions:u,encryption:bi,getEncryptor:function(S){return u!==null?bi.encryptor(S,0):function(G){return G}},output:Lm,getNumberOfPages:Mm,get pages(){return ae},out:q,f2:A,f3:L,getPageInfo:Xa,getPageInfoByObjId:Om,getCurrentPageInfo:L_,getPDFVersion:v,Point:ts,Rectangle:Up,Matrix:yt,hasHotfix:_o},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return is(z)},set:function(S){qm(z,S)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ec(z)},set:function(S){zm(z,S)},enumerable:!0,configurable:!0}),(function(S){for(var G=0,re=oe.length;G<re;G++){var de=Tm.call(this,S[G][0],S[G][1],S[G][2],oe[G][3],!0);d===!1&&(h[de]=!0);var xe=S[G][0].split("-");Am({id:de,fontName:xe[0],fontStyle:xe[1]||""})}tn.publish("addFonts",{fonts:Pt,dictionary:it})}).call(p,oe),Ye="F1",Cm(r,n),tn.publish("initialized"),p}_d.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},_d.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},_d.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},_d.prototype.processOwnerPassword=function(e,t){return nw(tw(t).substr(0,5),e)},_d.prototype.encryptor=function(e,t){var n=tw(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return nw(n,i)}},Iv.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||cn(e)!==cn(this))return!1;var i=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&i--;return i===0},ut.API={events:[]},ut.version="4.1.0";var zn=ut.API,Jx=1,Nu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rd=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Dv=function(e){return e.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(t){var n=t.charCodeAt(0).toString(16).toUpperCase();return"#"+(n.length===1?"0"+n:n)})},Mt=function(e){return e.toFixed(2)},dl=function(e){return e.toFixed(5)};zn.__acroform__={};var jr=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},gk=function(e){return e*Jx},Ta=function(e){var t=new EM,n=Ze.internal.getHeight(e)||0,i=Ze.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Mt(i)),Number(Mt(n))],t},hU=zn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},fU=zn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},mU=zn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ai=zn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return mU(e,t-1)},si=zn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hU(e,t-1)},li=zn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fU(e,t-1)},gU=zn.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,r=e[0],o=e[1],a=e[2],s=e[3],l={};return l.lowerLeft_X=n(r)||0,l.lowerLeft_Y=i(o+s)||0,l.upperRight_X=n(r+a)||0,l.upperRight_Y=i(o)||0,[Number(Mt(l.lowerLeft_X)),Number(Mt(l.lowerLeft_Y)),Number(Mt(l.upperRight_X)),Number(Mt(l.upperRight_Y))]},vU=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,i=iw(e,n),r=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+r+" "+Mt(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=Ta(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},iw=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},r=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");r=e.multiline?r.map(function(A){return A.split(`
`)}):r.map(function(A){return[A]});var o=n,a=Ze.internal.getHeight(e)||0;a=a<0?-a:a;var s=Ze.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(A,L,$){if(A+1<r.length){var Z=L+" "+r[A+1][0];return jg(Z,e,$).width<=s-4}return!1};o++;e:for(;o>0;){t="",o--;var c,u,d=jg("3",e,o).height,h=e.multiline?a-o:(a-d)/2,p=h+=2,m=0,v=0,_=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+jg(t,e,o=12).width+", FieldWidth:"+s+`
`;break}for(var b="",E=0,w=0;w<r.length;w++)if(r.hasOwnProperty(w)){var x=!1;if(r[w].length!==1&&_!==r[w].length-1){if((d+2)*(E+2)+2>a)continue e;b+=r[w][_],x=!0,v=w,w--}else{b=(b+=r[w][_]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var M=parseInt(w),B=l(M,b,o),H=w>=r.length-1;if(B&&!H){b+=" ",_=0;continue}if(B||H){if(H)v=M;else if(e.multiline&&(d+2)*(E+2)+2>a)continue e}else{if(!e.multiline||(d+2)*(E+2)+2>a)continue e;v=M}}for(var R="",O=m;O<=v;O++){var D=r[O];if(e.multiline){if(O===v){R+=D[_]+" ",_=(_+1)%D.length;continue}if(O===m){R+=D[D.length-1]+" ";continue}}R+=D[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,u=jg(R,e,o).width,e.textAlign){case"right":c=s-u-2;break;case"center":c=(s-u)/2;break;default:c=2}t+=Mt(c)+" "+Mt(p)+` Td
`,t+="("+Nu(R)+`) Tj
`,t+=-Mt(c)+` 0 Td
`,p=-(o+2),u=0,m=x?v:v+1,E++,b=""}break}return i.text=t,i.fontSize=o,i},jg=function(e,t,n){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},yU={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},_U=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},bU=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ha.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(yU)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Jx=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new SM,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];o.objId=void 0,o.hasAnnotation&&_U(o,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(i,r){var o=!i;for(var a in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(a)){var s=i[a],l=[],c=s.Rect;if(s.Rect&&(s.Rect=gU(s.Rect,r)),r.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Ze.createDefaultAppearanceStream(s),cn(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=c,s.hasAppearanceStream&&!s.appearanceStreamContent){var u=vU(s);l.push({key:"AP",value:"<</N "+u+">>"}),r.internal.acroformPlugin.xForms.push(u)}if(s.appearanceStreamContent){var d="";for(var h in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(h)){var p=s.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var m=p[a];typeof m=="function"&&(m=m.call(r,s)),d+="/"+a+" "+m+" ",r.internal.acroformPlugin.xForms.indexOf(m)>=0||r.internal.acroformPlugin.xForms.push(m)}}else typeof(m=p)=="function"&&(m=m.call(r,s)),d+="/"+a+" "+m,r.internal.acroformPlugin.xForms.indexOf(m)>=0||r.internal.acroformPlugin.xForms.push(m);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:s.objId}),r.internal.out("endobj")}o&&function(v,_){for(var b in v)if(v.hasOwnProperty(b)){var E=b,w=v[b];_.internal.newObjectDeferredBegin(w.objId,!0),cn(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete v[E]}}(r.internal.acroformPlugin.xForms,r)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},xM=zn.__acroform__.arrayToPdfArray=function(e,t,n){var i=function(a){return a};if(Array.isArray(e)){for(var r="[",o=0;o<e.length;o++)switch(o!==0&&(r+=" "),cn(e[o])){case"boolean":case"number":case"object":r+=e[o].toString();break;case"string":e[o].substr(0,1)==="/"?r+="/"+Dv(e[o].substr(1)):(t!==void 0&&n&&(i=n.internal.getEncryptor(t)),r+="("+Nu(i(e[o].toString()))+")")}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},cb=function(e,t,n){var i=function(r){return r};return t!==void 0&&n&&(i=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Nu(i(e))+")"},La=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};La.prototype.toString=function(){return this.objId+" 0 R"},La.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},La.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var i=t[n],r=this[i];r&&(Array.isArray(r)?e.push({key:i,value:xM(r,this.objId,this.scope)}):r instanceof La?(r.scope=this.scope,e.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&e.push({key:i,value:r}))}return e};var EM=function(){La.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};jr(EM,La);var SM=function(){La.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Nu(n(e))+")"}},set:function(n){e=n}})};jr(SM,La);var ha=function e(){La.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ai(t,3)},set:function(b){b?this.F=si(t,3):this.F=li(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(b){i=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(b){i[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(b){i[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(b){i[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(b){i[3]=b}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Lv)return;o="FieldObject"+e.FieldNum++}var b=function(E){return E};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Nu(b(o))+")"},set:function(b){o=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(b){o=b}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(b){s=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Jx:c},set:function(b){c=b}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Lv||this instanceof su))return cb(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=b}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Di==0?cb(h,this.objId,this.scope):h},set:function(b){b=b.toString(),h=this instanceof Di==0?b.substr(0,1)==="("?rd(b.substr(1,b.length-2)):rd(b):b}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Di==1?rd(h.substr(1,h.length-1)):h},set:function(b){b=b.toString(),h=this instanceof Di==1?"/"+Dv(b):b}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Di==0?cb(p,this.objId,this.scope):p},set:function(b){b=b.toString(),p=this instanceof Di==0?b.substr(0,1)==="("?rd(b.substr(1,b.length-2)):rd(b):b}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Di==1?rd(p.substr(1,p.length-1)):p},set:function(b){b=b.toString(),p=this instanceof Di==1?"/"+Dv(b):b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(b){b=!!b,v=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(b){m=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,1)},set:function(b){b?this.Ff=si(this.Ff,1):this.Ff=li(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,2)},set:function(b){b?this.Ff=si(this.Ff,2):this.Ff=li(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,3)},set:function(b){b?this.Ff=si(this.Ff,3):this.Ff=li(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');_=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(_){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:_=2;break;case"center":case 1:_=1;break;default:_=0}}})};jr(ha,La);var Ud=function(){ha.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return xM(t,this.objId,this.scope)},set:function(n){var i,r;r=[],typeof(i=n)=="string"&&(r=function(o,a,s){s||(s=1);for(var l,c=[];l=a.exec(o);)c.push(l[s]);return c}(i,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,18)},set:function(n){n?this.Ff=si(this.Ff,18):this.Ff=li(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=si(this.Ff,19):this.Ff=li(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,20)},set:function(n){n?(this.Ff=si(this.Ff,20),t.sort()):this.Ff=li(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,22)},set:function(n){n?this.Ff=si(this.Ff,22):this.Ff=li(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(n){n?this.Ff=si(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,27)},set:function(n){n?this.Ff=si(this.Ff,27):this.Ff=li(this.Ff,27)}}),this.hasAppearanceStream=!1};jr(Ud,ha);var qd=function(){Ud.call(this),this.fontName="helvetica",this.combo=!1};jr(qd,Ud);var zd=function(){qd.call(this),this.combo=!0};jr(zd,qd);var I0=function(){zd.call(this),this.edit=!0};jr(I0,zd);var Di=function(){ha.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,15)},set:function(n){n?this.Ff=si(this.Ff,15):this.Ff=li(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,16)},set:function(n){n?this.Ff=si(this.Ff,16):this.Ff=li(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,17)},set:function(n){n?this.Ff=si(this.Ff,17):this.Ff=li(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(n){n?this.Ff=si(this.Ff,26):this.Ff=li(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,r=[];for(i in r.push("<<"),t)r.push("/"+i+" ("+Nu(n(t[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(n){cn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+Dv(n)}})};jr(Di,ha);var D0=function(){Di.call(this),this.pushButton=!0};jr(D0,Di);var Hd=function(){Di.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};jr(Hd,Di);var Lv=function(){var e,t;ha.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(r){t=r}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var o,a=[];for(o in a.push("<<"),i)a.push("/"+o+" ("+Nu(r(i[o]))+")");return a.push(">>"),a.join(`
`)},set:function(r){cn(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ze.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};jr(Lv,ha),Hd.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Hd.prototype.createOption=function(e){var t=new Lv;return t.Parent=this,t.optionName=e,this.Kids.push(t),wU.call(this.scope,t),t};var L0=function(){Di.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ze.CheckBox.createAppearanceStream()};jr(L0,Di);var su=function(){ha.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,13)},set:function(t){t?this.Ff=si(this.Ff,13):this.Ff=li(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,21)},set:function(t){t?this.Ff=si(this.Ff,21):this.Ff=li(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(t){t?this.Ff=si(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,24)},set:function(t){t?this.Ff=si(this.Ff,24):this.Ff=li(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,25)},set:function(t){t?this.Ff=si(this.Ff,25):this.Ff=li(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(t){t?this.Ff=si(this.Ff,26):this.Ff=li(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};jr(su,ha);var O0=function(){su.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,14)},set:function(e){e?this.Ff=si(this.Ff,14):this.Ff=li(this.Ff,14)}}),this.password=!0};jr(O0,su);var Ze={CheckBox:{createAppearanceStream:function(){return{N:{On:Ze.CheckBox.YesNormal},D:{On:Ze.CheckBox.YesPushDown,Off:Ze.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),o=iw(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Mt(Ze.internal.getWidth(e))+" "+Mt(Ze.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+Mt(o.fontSize)+" Tf "+r),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Ta(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),r=[],o=Ze.internal.getHeight(e),a=Ze.internal.getWidth(e),s=iw(e,e.caption);return r.push("1 g"),r.push("0 0 "+Mt(a)+" "+Mt(o)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Mt(a-1)+" "+Mt(o-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+Mt(s.fontSize)+" Tf "+i),r.push(s.text),r.push("ET"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Mt(Ze.internal.getWidth(e))+" "+Mt(Ze.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ze.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ze.RadioButton.Circle.YesNormal,t.D[e]=Ze.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ta(e);t.scope=e.scope;var n=[],i=Ze.internal.getWidth(e)<=Ze.internal.getHeight(e)?Ze.internal.getWidth(e)/4:Ze.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var r=Ze.internal.Bezier_C,o=Number((i*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+dl(Ze.internal.getWidth(e)/2)+" "+dl(Ze.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=[],i=Ze.internal.getWidth(e)<=Ze.internal.getHeight(e)?Ze.internal.getWidth(e)/4:Ze.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*Ze.internal.Bezier_C).toFixed(5)),a=Number((i*Ze.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+dl(Ze.internal.getWidth(e)/2)+" "+dl(Ze.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+dl(Ze.internal.getWidth(e)/2)+" "+dl(Ze.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=[],i=Ze.internal.getWidth(e)<=Ze.internal.getHeight(e)?Ze.internal.getWidth(e)/4:Ze.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*Ze.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+dl(Ze.internal.getWidth(e)/2)+" "+dl(Ze.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ze.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ze.RadioButton.Cross.YesNormal,t.D[e]=Ze.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ta(e);t.scope=e.scope;var n=[],i=Ze.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Mt(Ze.internal.getWidth(e)-2)+" "+Mt(Ze.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Mt(i.x1.x)+" "+Mt(i.x1.y)+" m"),n.push(Mt(i.x2.x)+" "+Mt(i.x2.y)+" l"),n.push(Mt(i.x4.x)+" "+Mt(i.x4.y)+" m"),n.push(Mt(i.x3.x)+" "+Mt(i.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=Ze.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+Mt(Ze.internal.getWidth(e))+" "+Mt(Ze.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Mt(Ze.internal.getWidth(e)-2)+" "+Mt(Ze.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(Mt(n.x1.x)+" "+Mt(n.x1.y)+" m"),i.push(Mt(n.x2.x)+" "+Mt(n.x2.y)+" l"),i.push(Mt(n.x4.x)+" "+Mt(n.x4.y)+" m"),i.push(Mt(n.x3.x)+" "+Mt(n.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Ta(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Mt(Ze.internal.getWidth(e))+" "+Mt(Ze.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Ze.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ze.internal.getWidth(e),n=Ze.internal.getHeight(e),i=Math.min(t,n);return{x1:{x:(t-i)/2,y:(n-i)/2+i},x2:{x:(t-i)/2+i,y:(n-i)/2},x3:{x:(t-i)/2,y:(n-i)/2},x4:{x:(t-i)/2+i,y:(n-i)/2+i}}}},Ze.internal.getWidth=function(e){var t=0;return cn(e)==="object"&&(t=gk(e.Rect[2])),t},Ze.internal.getHeight=function(e){var t=0;return cn(e)==="object"&&(t=gk(e.Rect[3])),t};var wU=zn.addField=function(e){if(bU(this,e),!(e instanceof ha))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};zn.AcroFormChoiceField=Ud,zn.AcroFormListBox=qd,zn.AcroFormComboBox=zd,zn.AcroFormEditBox=I0,zn.AcroFormButton=Di,zn.AcroFormPushButton=D0,zn.AcroFormRadioButton=Hd,zn.AcroFormCheckBox=L0,zn.AcroFormTextField=su,zn.AcroFormPasswordField=O0,zn.AcroFormAppearance=Ze,zn.AcroForm={ChoiceField:Ud,ListBox:qd,ComboBox:zd,EditBox:I0,Button:Di,PushButton:D0,RadioButton:Hd,CheckBox:L0,TextField:su,PasswordField:O0,Appearance:Ze},ut.AcroForm={ChoiceField:Ud,ListBox:qd,ComboBox:zd,EditBox:I0,Button:Di,PushButton:D0,RadioButton:Hd,CheckBox:L0,TextField:su,PasswordField:O0,Appearance:Ze};ut.AcroForm;function NM(e){return e.reduce(function(t,n,i){return t[n]=i,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(A,L){var $,Z,me,ge,pe,te=n;if((L=L||n)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(B(A))for(pe in i)for(me=i[pe],$=0;$<me.length;$+=1){for(ge=!0,Z=0;Z<me[$].length;Z+=1)if(me[$][Z]!==void 0&&me[$][Z]!==A[Z]){ge=!1;break}if(ge===!0){te=pe;break}}else for(pe in i)for(me=i[pe],$=0;$<me.length;$+=1){for(ge=!0,Z=0;Z<me[$].length;Z+=1)if(me[$][Z]!==void 0&&me[$][Z]!==A.charCodeAt(Z)){ge=!1;break}if(ge===!0){te=pe;break}}return te===n&&L!==n&&(te=L),te},o=function A(L){for(var $=this.internal.write,Z=this.internal.putStream,me=(0,this.internal.getFilters)();me.indexOf("FlateEncode")!==-1;)me.splice(me.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var ge=[];if(ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Image"}),ge.push({key:"Width",value:L.width}),ge.push({key:"Height",value:L.height}),L.colorSpace===b.INDEXED?ge.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(ge.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===b.DEVICE_CMYK&&ge.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ge.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&ge.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var pe="",te=0,le=L.transparency.length;te<le;te++)pe+=L.transparency[te]+" "+L.transparency[te]+" ";ge.push({key:"Mask",value:"["+pe+"]"})}L.sMask!==void 0&&ge.push({key:"SMask",value:L.objectId+1+" 0 R"});var ye=L.filter!==void 0?["/"+L.filter]:void 0;if(Z({data:L.data,additionalKeyValues:ge,alreadyAppliedFilters:ye,objectId:L.objectId}),$("endobj"),"sMask"in L&&L.sMask!==void 0){var we,I=(we=L.sMaskBitsPerComponent)!==null&&we!==void 0?we:L.bitsPerComponent,z={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:I,data:L.sMask};"filter"in L&&(z.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(I," /Columns ").concat(L.width),z.filter=L.filter),A.call(this,z)}if(L.colorSpace===b.INDEXED){var K=this.internal.newObject();Z({data:R(new Uint8Array(L.palette)),objectId:K}),$("endobj")}},a=function(){var A=this.internal.collections[t+"images"];for(var L in A)o.call(this,A[L])},s=function(){var A,L=this.internal.collections[t+"images"],$=this.internal.write;for(var Z in L)$("/I"+(A=L[Z]).index,A.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",s))},c=function(){var A=this.internal.collections[t+"images"];return l.call(this),A},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},d=function(A){return typeof e["process"+A.toUpperCase()]=="function"},h=function(A){return cn(A)==="object"&&A.nodeType===1},p=function(A,L){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var $=""+A.getAttribute("src");if($.indexOf("data:image/")===0)return M0(unescape($).split("base64,").pop());var Z=e.loadFile($,!0);if(Z!==void 0)return Z}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var me;switch(L){case"PNG":me="image/png";break;case"WEBP":me="image/webp";break;default:me="image/jpeg"}return M0(A.toDataURL(me,1).split("base64,").pop())}},m=function(A){var L=this.internal.collections[t+"images"];if(L){for(var $ in L)if(A===L[$].alias)return L[$]}},v=function(A,L,$){return A||L||(A=-96,L=-96),A<0&&(A=-1*$.width*72/A/this.internal.scaleFactor),L<0&&(L=-1*$.height*72/L/this.internal.scaleFactor),A===0&&(A=L*$.width/$.height),L===0&&(L=A*$.height/$.width),[A,L]},_=function(A,L,$,Z,me,ge){var pe=v.call(this,$,Z,me),te=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,ye=c.call(this);if($=pe[0],Z=pe[1],ye[me.index]=me,ge){ge*=Math.PI/180;var we=Math.cos(ge),I=Math.sin(ge),z=function(ee){return ee.toFixed(4)},K=[z(we),z(I),z(-1*I),z(we),0,0,"cm"]}this.internal.write("q"),ge?(this.internal.write([1,"0","0",1,te(A),le(L+Z),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([te($),"0","0",te(Z),"0","0","cm"].join(" "))):this.internal.write([te($),"0","0",te(Z),te(A),le(L+Z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+me.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(A){var L,$,Z=0;if(typeof A=="string")for($=A.length,L=0;L<$;L++)Z=(Z<<5)-Z+A.charCodeAt(L),Z|=0;else if(B(A))for($=A.byteLength/2,L=0;L<$;L++)Z=(Z<<5)-Z+A[L],Z|=0;return Z},x=e.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var L=!0;return A.length===0&&(L=!1),A.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(L=!1),L},M=e.__addimage__.extractImageFromDataUrl=function(A){if(A==null||!(A=A.trim()).startsWith("data:"))return null;var L=A.indexOf(",");return L<0?null:A.substring(0,L).trim().endsWith("base64")?A.substring(L+1):null};e.__addimage__.isArrayBuffer=function(A){return A instanceof ArrayBuffer};var B=e.__addimage__.isArrayBufferView=function(A){return A instanceof Int8Array||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array},H=e.__addimage__.binaryStringToUint8Array=function(A){for(var L=A.length,$=new Uint8Array(L),Z=0;Z<L;Z++)$[Z]=A.charCodeAt(Z);return $},R=e.__addimage__.arrayBufferToBinaryString=function(A){for(var L="",$=B(A)?A:new Uint8Array(A),Z=0;Z<$.length;Z+=8192)L+=String.fromCharCode.apply(null,$.subarray(Z,Z+8192));return L};e.addImage=function(){var A,L,$,Z,me,ge,pe,te,le;if(typeof arguments[1]=="number"?(L=n,$=arguments[1],Z=arguments[2],me=arguments[3],ge=arguments[4],pe=arguments[5],te=arguments[6],le=arguments[7]):(L=arguments[1],$=arguments[2],Z=arguments[3],me=arguments[4],ge=arguments[5],pe=arguments[6],te=arguments[7],le=arguments[8]),cn(A=arguments[0])==="object"&&!h(A)&&"imageData"in A){var ye=A;A=ye.imageData,L=ye.format||L||n,$=ye.x||$||0,Z=ye.y||Z||0,me=ye.w||ye.width||me,ge=ye.h||ye.height||ge,pe=ye.alias||pe,te=ye.compression||te,le=ye.rotation||ye.angle||le}var we=this.internal.getFilters();if(te===void 0&&we.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN($)||isNaN(Z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var I=O.call(this,A,L,pe,te);return _.call(this,$,Z,me,ge,I,le),this};var O=function(A,L,$,Z){var me,ge,pe;if(typeof A=="string"&&r(A)===n){A=unescape(A);var te=D(A,!1);(te!==""||(te=e.loadFile(A,!0))!==void 0)&&(A=te)}if(h(A)&&(A=p(A,L)),L=r(A,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((pe=$)==null||pe.length===0)&&($=function(le){return typeof le=="string"||B(le)?w(le):B(le.data)?w(le.data):null}(A)),(me=m.call(this,$))||(A instanceof Uint8Array||L==="RGBA"||(ge=A,A=H(A)),me=this["process"+L.toUpperCase()](A,u.call(this),$,function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in e.image_compression?le:E.NONE}(Z),ge)),!me)throw new Error("An unknown error occurred whilst processing the image.");return me},D=e.__addimage__.convertBase64ToBinaryString=function(A,L){L=typeof L!="boolean"||L;var $,Z="";if(typeof A=="string"){var me;$=(me=M(A))!==null&&me!==void 0?me:A;try{Z=M0($)}catch(ge){if(L)throw x($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ge.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};e.getImageProperties=function(A){var L,$,Z="";if(h(A)&&(A=p(A)),typeof A=="string"&&r(A)===n&&((Z=D(A,!1))===""&&(Z=e.loadFile(A)||""),A=Z),$=r(A),!d($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(A instanceof Uint8Array||(A=H(A)),!(L=this["process"+$.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=$,L}})(ut.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};ut.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var i,r,o,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((i=c[d]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){i=c[h];var p=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(v.objId),E=i.title||"Note";o="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(i.bounds.x)+" "+s(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+s(i.bounds.y)+"] ")+"/Contents ("+p(b(i.contents))+")",o+=" /Popup "+_.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+p(b(E))+") >>",v.content=o;var w=v.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(i.bounds.x+30)+" "+s(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+s(i.bounds.y)+"] ")+" /Parent "+w,i.open&&(o+=" /Open true"),o+=" >>",_.content=o,this.internal.write(v.objId,"0 R",_.objId,"0 R");break;case"freetext":r="/Rect ["+a(i.bounds.x)+" "+s(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+s(i.bounds.y+i.bounds.h)+"] ";var x=i.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+p(m(i.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+x+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(i.options.name){var M=this.annotations._nameMap[i.options.name];i.options.pageNumber=M.page,i.options.top=M.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",o="",i.options.url)o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+p(m(i.options.url))+") >>";else if(i.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,o+=" /FitV "+i.options.left+"]";break;default:var B=s(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),o+=" /XYZ "+i.options.left+" "+B+" "+i.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},e.link=function(n,i,r,o,a){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(n),y:c(i),w:l(n+r),h:c(i+o)},options:a,type:"link"})},e.textWithLink=function(n,i,r,o){var a,s,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){s=o.maxWidth;var u=this.splitTextToSize(n,s).length;a=Math.ceil(c*u)}else s=l,a=c;return this.text(n,i,r,o),r+=.2*c,o.align==="center"&&(i-=l/2),o.align==="right"&&(i-=l),this.link(i,r-c,s,a,o),l},e.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(ut.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},s=e.__arabicParser__.isArabicEndLetter=function(v){return a(v)&&o(v)&&t[v.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(v){return a(v)&&r.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return a(v)&&o(v)&&t[v.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return a(v)&&o(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return a(v)&&o(v)&&t[v.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return a(v)&&o(v)&&t[v.charCodeAt(0)].length==4},d=e.__arabicParser__.resolveLigatures=function(v){var _=0,b=n,E="",w=0;for(_=0;_<v.length;_+=1)b[v.charCodeAt(_)]!==void 0?(w++,typeof(b=b[v.charCodeAt(_)])=="number"&&(E+=String.fromCharCode(b),b=n,w=0),_===v.length-1&&(b=n,E+=v.charAt(_-(w-1)),_-=w-1,w=0)):(b=n,E+=v.charAt(_-w),_-=w,w=0);return E};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&i[v.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(v,_,b){return a(v)?o(v)===!1?-1:!c(v)||!a(_)&&!a(b)||!a(b)&&s(_)||s(v)&&!a(_)||s(v)&&l(_)||s(v)&&s(_)?0:u(v)&&a(_)&&!s(_)&&a(b)&&c(b)?3:s(v)||!a(b)?1:2:-1},p=function(v){var _=0,b=0,E=0,w="",x="",M="",B=(v=v||"").split("\\s+"),H=[];for(_=0;_<B.length;_+=1){for(H.push(""),b=0;b<B[_].length;b+=1)w=B[_][b],x=B[_][b-1],M=B[_][b+1],a(w)?(E=h(w,x,M),H[_]+=E!==-1?String.fromCharCode(t[w.charCodeAt(0)][E]):w):H[_]+=w;H[_]=d(H[_])}return H.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var v,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(_)){var E=0;for(b=[],E=0;E<_.length;E+=1)Array.isArray(_[E])?b.push([p(_[E][0]),_[E][1],_[E][2]]):b.push([p(_[E])]);v=b}else v=p(_);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",m])}(ut.API),ut.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(s){n=s}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(s){o=s}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,i){var r;if((n=n||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ut.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(v){m=v}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){i.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,p=0,m=0,v=0,_=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=c.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(w,x){return w.concat(_.splitTextToSize(x,b))},[])):l=Array.isArray(l)?l:[l];for(var E=0;E<l.length;E++)p<(v=this.getStringUnitWidth(l[E],{font:d})*u)&&(p=v);return p!==0&&(m=l.length),{w:p/=h,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,u,d,h){if(i.call(this),!u)throw new Error("No data for PDF table.");var p,m,v,_,b=[],E=[],w=[],x={},M={},B=[],H=[],R=(h=h||{}).autoSize||!1,O=h.printHeaders!==!1,D=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,A=h.margins||Object.assign({width:this.getPageWidth()},t),L=typeof h.padding=="number"?h.padding:3,$=h.headerBackgroundColor||"#c8c8c8",Z=h.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=Z,this.setFontSize(D),d==null)E=b=Object.keys(u[0]),w=b.map(function(){return"left"});else if(Array.isArray(d)&&cn(d[0])==="object")for(b=d.map(function(ye){return ye.name}),E=d.map(function(ye){return ye.prompt||ye.name||""}),w=d.map(function(ye){return ye.align||"left"}),p=0;p<d.length;p+=1)M[d[p].name]=.7499990551181103*d[p].width;else Array.isArray(d)&&typeof d[0]=="string"&&(E=b=d,w=b.map(function(){return"left"}));if(R||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<b.length;p+=1){for(x[_=b[p]]=u.map(function(ye){return ye[_]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(E[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=x[_],this.setFont(void 0,"normal"),v=0;v<m.length;v+=1)B.push(this.getTextDimensions(m[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);M[_]=Math.max.apply(null,B)+L+L,B=[]}if(O){var me={};for(p=0;p<b.length;p+=1)me[b[p]]={},me[b[p]].text=E[p],me[b[p]].align=w[p];var ge=s.call(this,me,M);H=b.map(function(ye){return new o(l,c,M[ye],ge,me[ye].text,void 0,me[ye].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var pe=d.reduce(function(ye,we){return ye[we.name]=we.align,ye},{});for(p=0;p<u.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:u[p]},this);var te=s.call(this,u[p],M);for(v=0;v<b.length;v+=1){var le=u[p][b[v]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:v,data:le},this),a.call(this,new o(l,c,M[b[v]],te,le,p+2,pe[b[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var s=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(p){var m=l[p];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/h+u+u},this).reduce(function(p,m){return Math.max(p,m)},0)};e.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(ut.API);var kM={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},PM=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],rw=NM(PM),AM=[100,200,300,400,500,600,700,800,900],xU=NM(AM);function ub(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(o){return kM[o=o||"normal"]?o:"normal"}(e.style),i=function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400}(e.weight),r=function(o){return typeof rw[o=o||"normal"]=="number"?o:"normal"}(e.stretch);return{family:t,style:n,weight:i,stretch:r,src:e.src||[],ref:e.ref||{name:t,style:[r,n,i].join(" ")}}}function vk(e,t,n,i){var r;for(r=n;r>=0&&r<t.length;r+=i)if(e[t[r]])return e[t[r]];for(r=n;r>=0&&r<t.length;r-=i)if(e[t[r]])return e[t[r]]}var EU={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},yk={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function _k(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function bk(e){return e.trimLeft()}function SU(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function NU(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var od,$g,wk,xk,Ek,db=["times"];function Sk(e,t,n,i,r){var o=4,a=kk;switch(r){case ut.API.image_compression.FAST:o=1,a=Nk;break;case ut.API.image_compression.MEDIUM:o=6,a=Pk;break;case ut.API.image_compression.SLOW:o=9,a=Ak}e=function(l,c,u,d){for(var h,p=l.length/c,m=new Uint8Array(l.length+p),v=[kU,Nk,kk,Pk,Ak],_=0;_<p;_+=1){var b=_*c,E=l.subarray(b,b+c);if(d)m.set(d(E,u,h),b+_);else{for(var w=v.length,x=[],M=0;M<w;M+=1)x[M]=v[M](E,u,h);var B=AU(x.concat());m.set(x[B],b+_)}h=E}return m}(e,t,Math.ceil(n*i/8),a);var s=X1(e,{level:o});return ut.API.__addimage__.arrayBufferToBinaryString(s)}function kU(e){var t=Array.apply([],e);return t.unshift(0),t}function Nk(e,t){var n=e.length,i=[];i[0]=1;for(var r=0;r<n;r+=1){var o=e[r-t]||0;i[r+1]=e[r]-o+256&255}return i}function kk(e,t,n){var i=e.length,r=[];r[0]=2;for(var o=0;o<i;o+=1){var a=n&&n[o]||0;r[o+1]=e[o]-a+256&255}return r}function Pk(e,t,n){var i=e.length,r=[];r[0]=3;for(var o=0;o<i;o+=1){var a=e[o-t]||0,s=n&&n[o]||0;r[o+1]=e[o]+256-(a+s>>>1)&255}return r}function Ak(e,t,n){var i=e.length,r=[];r[0]=4;for(var o=0;o<i;o+=1){var a=PU(e[o-t]||0,n&&n[o]||0,n&&n[o-t]||0);r[o+1]=e[o]-a+256&255}return r}function PU(e,t,n){if(e===t&&t===n)return e;var i=Math.abs(t-n),r=Math.abs(e-n),o=Math.abs(e+t-n-n);return i<=r&&i<=o?e:r<=o?t:n}function AU(e){var t=e.map(function(n){return n.reduce(function(i,r){return i+Math.abs(r)},0)});return t.indexOf(Math.min.apply(null,t))}function pb(e,t,n){var i=t*n,r=Math.floor(i/8),o=16-(i-8*r+n),a=(1<<n)-1;return TM(e,r)>>o&a}function Tk(e,t,n,i){var r=n*i,o=Math.floor(r/8),a=16-(r-8*o+i),s=(1<<i)-1,l=(t&s)<<a;(function(c,u,d){if(u+1<c.byteLength)c.setUint16(u,d,!1);else{var h=d>>8&255;c.setUint8(u,h)}})(e,o,TM(e,o)&~(s<<a)&65535|l)}function TM(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function TU(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,r=e[t++],o=r>>7,a=1<<1+(7&r);e[t++],e[t++];var s=null,l=null;o&&(s=t,l=a,t+=3*a);var c=!0,u=[],d=0,h=null,p=0,m=null;for(this.width=n,this.height=i;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];d=e[t++]|e[t++]<<8,h=e[t++],1&v||(h=null),p=v>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var _=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,x=e[t++],M=x>>6&1,B=1<<1+(7&x),H=s,R=l,O=!1;x>>7&&(O=!0,H=t,R=B,t+=3*B);var D=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}u.push({x:_,y:b,width:E,height:w,has_local_palette:O,palette_offset:H,palette_size:R,data_offset:D,data_length:t-D,transparent_index:h,interlaced:!!M,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(L){if(L<0||L>=u.length)throw new Error("Frame index out of range.");return u[L]},this.decodeAndBlitFrameBGRA=function(L,$){var Z=this.frameInfo(L),me=Z.width*Z.height,ge=new Uint8Array(me);Ck(e,Z.data_offset,ge,me);var pe=Z.palette_offset,te=Z.transparent_index;te===null&&(te=256);var le=Z.width,ye=n-le,we=le,I=4*(Z.y*n+Z.x),z=4*((Z.y+Z.height)*n+Z.x),K=I,ee=4*ye;Z.interlaced===!0&&(ee+=4*n*7);for(var T=8,N=0,P=ge.length;N<P;++N){var j=ge[N];if(we===0&&(we=le,(K+=ee)>=z&&(ee=4*ye+4*n*(T-1),K=I+(le+ye)*(T<<1),T>>=1)),j===te)K+=4;else{var Y=e[pe+3*j],ae=e[pe+3*j+1],ke=e[pe+3*j+2];$[K++]=ke,$[K++]=ae,$[K++]=Y,$[K++]=255}--we}},this.decodeAndBlitFrameRGBA=function(L,$){var Z=this.frameInfo(L),me=Z.width*Z.height,ge=new Uint8Array(me);Ck(e,Z.data_offset,ge,me);var pe=Z.palette_offset,te=Z.transparent_index;te===null&&(te=256);var le=Z.width,ye=n-le,we=le,I=4*(Z.y*n+Z.x),z=4*((Z.y+Z.height)*n+Z.x),K=I,ee=4*ye;Z.interlaced===!0&&(ee+=4*n*7);for(var T=8,N=0,P=ge.length;N<P;++N){var j=ge[N];if(we===0&&(we=le,(K+=ee)>=z&&(ee=4*ye+4*n*(T-1),K=I+(le+ye)*(T<<1),T>>=1)),j===te)K+=4;else{var Y=e[pe+3*j],ae=e[pe+3*j+1],ke=e[pe+3*j+2];$[K++]=Y,$[K++]=ae,$[K++]=ke,$[K++]=255}--we}}}function Ck(e,t,n,i){for(var r=e[t++],o=1<<r,a=o+1,s=a+1,l=r+1,c=(1<<l)-1,u=0,d=0,h=0,p=e[t++],m=new Int32Array(4096),v=null;;){for(;u<16&&p!==0;)d|=e[t++]<<u,u+=8,p===1?p=e[t++]:--p;if(u<l)break;var _=d&c;if(d>>=l,u-=l,_!==o){if(_===a)break;for(var b=_<s?_:v,E=0,w=b;w>o;)w=m[w]>>8,++E;var x=w;if(h+E+(b!==_?1:0)>i)return void hn.log("Warning, gif stream longer than expected.");n[h++]=x;var M=h+=E;for(b!==_&&(n[h++]=x),w=b;E--;)w=m[w],n[--M]=255&w,w>>=8;v!==null&&s<4096&&(m[s++]=v<<8|x,s>=c+1&&l<12&&(++l,c=c<<1|1)),v=_}else s=a+1,c=(1<<(l=r+1))-1,v=null}return h!==i&&hn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function hb(e){var t,n,i,r,o,a=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),p=new Array(64),m=new Array(64),v=[],_=0,b=7,E=new Array(64),w=new Array(64),x=new Array(64),M=new Array(256),B=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],me=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ge(I,z){for(var K=0,ee=0,T=new Array,N=1;N<=16;N++){for(var P=1;P<=I[N];P++)T[z[ee]]=[],T[z[ee]][0]=K,T[z[ee]][1]=N,ee++,K++;K*=2}return T}function pe(I){for(var z=I[0],K=I[1]-1;K>=0;)z&1<<K&&(_|=1<<b),K--,--b<0&&(_==255?(te(255),te(0)):te(_),b=7,_=0)}function te(I){v.push(I)}function le(I){te(I>>8&255),te(255&I)}function ye(I,z,K,ee,T){for(var N,P=T[0],j=T[240],Y=function(X,he){var se,Ne,Me,Ce,qe,nt,dt,Nt,Ye,gt,Xe=0;for(Ye=0;Ye<8;++Ye){se=X[Xe],Ne=X[Xe+1],Me=X[Xe+2],Ce=X[Xe+3],qe=X[Xe+4],nt=X[Xe+5],dt=X[Xe+6];var bn=se+(Nt=X[Xe+7]),zt=se-Nt,Pt=Ne+dt,it=Ne-dt,wt=Me+nt,et=Me-nt,fn=Ce+qe,xt=Ce-qe,Dt=bn+fn,Cn=bn-fn,Ht=Pt+wt,vt=Pt-wt;X[Xe]=Dt+Ht,X[Xe+4]=Dt-Ht;var tn=.707106781*(vt+Cn);X[Xe+2]=Cn+tn,X[Xe+6]=Cn-tn;var mc=.382683433*((Dt=xt+et)-(vt=it+zt)),ir=.5411961*Dt+mc,Ka=1.306562965*vt+mc,va=.707106781*(Ht=et+it),yt=zt+va,Ya=zt-va;X[Xe+5]=Ya+ir,X[Xe+3]=Ya-ir,X[Xe+1]=yt+Ka,X[Xe+7]=yt-Ka,Xe+=8}for(Xe=0,Ye=0;Ye<8;++Ye){se=X[Xe],Ne=X[Xe+8],Me=X[Xe+16],Ce=X[Xe+24],qe=X[Xe+32],nt=X[Xe+40],dt=X[Xe+48];var Ja=se+(Nt=X[Xe+56]),mo=se-Nt,go=Ne+dt,$n=Ne-dt,Mi=Me+nt,$i=Me-nt,gc=Ce+qe,Ws=Ce-qe,qo=Ja+gc,ya=Ja-gc,zo=go+Mi,Ho=go-Mi;X[Xe]=qo+zo,X[Xe+32]=qo-zo;var vo=.707106781*(Ho+ya);X[Xe+16]=ya+vo,X[Xe+48]=ya-vo;var vc=.382683433*((qo=Ws+$i)-(Ho=$n+mo)),_a=.5411961*qo+vc,yc=1.306562965*Ho+vc,Bu=.707106781*(zo=$i+$n),Fu=mo+Bu,ju=mo-Bu;X[Xe+40]=ju+_a,X[Xe+24]=ju-_a,X[Xe+8]=Fu+yc,X[Xe+56]=Fu-yc,Xe++}for(Ye=0;Ye<64;++Ye)gt=X[Ye]*he[Ye],p[Ye]=gt>0?gt+.5|0:gt-.5|0;return p}(I,z),ae=0;ae<64;++ae)m[H[ae]]=Y[ae];var ke=m[0]-K;K=m[0],ke==0?pe(ee[0]):(pe(ee[h[N=32767+ke]]),pe(d[N]));for(var Ae=63;Ae>0&&m[Ae]==0;)Ae--;if(Ae==0)return pe(P),K;for(var Le,q=1;q<=Ae;){for(var Te=q;m[q]==0&&q<=Ae;)++q;var _e=q-Te;if(_e>=16){Le=_e>>4;for(var oe=1;oe<=Le;++oe)pe(j);_e&=15}N=32767+m[q],pe(T[(_e<<4)+h[N]]),pe(d[N]),q++}return Ae!=63&&pe(P),K}function we(I){I=Math.min(Math.max(I,1),100),o!=I&&(function(z){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var T=a((K[ee]*z+50)/100);T=Math.min(Math.max(T,1),255),s[H[ee]]=T}for(var N=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],P=0;P<64;P++){var j=a((N[P]*z+50)/100);j=Math.min(Math.max(j,1),255),l[H[P]]=j}for(var Y=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ae=0,ke=0;ke<8;ke++)for(var Ae=0;Ae<8;Ae++)c[ae]=1/(s[H[ae]]*Y[ke]*Y[Ae]*8),u[ae]=1/(l[H[ae]]*Y[ke]*Y[Ae]*8),ae++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),o=I)}this.encode=function(I,z){z&&we(z),v=new Array,_=0,b=7,le(65496),le(65504),le(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),le(1),le(1),te(0),te(0),function(){le(65499),le(132),te(0);for(var Ne=0;Ne<64;Ne++)te(s[Ne]);te(1);for(var Me=0;Me<64;Me++)te(l[Me])}(),function(Ne,Me){le(65472),le(17),te(8),le(Me),le(Ne),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(I.width,I.height),function(){le(65476),le(418),te(0);for(var Ne=0;Ne<16;Ne++)te(R[Ne+1]);for(var Me=0;Me<=11;Me++)te(O[Me]);te(16);for(var Ce=0;Ce<16;Ce++)te(D[Ce+1]);for(var qe=0;qe<=161;qe++)te(A[qe]);te(1);for(var nt=0;nt<16;nt++)te(L[nt+1]);for(var dt=0;dt<=11;dt++)te($[dt]);te(17);for(var Nt=0;Nt<16;Nt++)te(Z[Nt+1]);for(var Ye=0;Ye<=161;Ye++)te(me[Ye])}(),le(65498),le(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var K=0,ee=0,T=0;_=0,b=7,this.encode.displayName="_encode_";for(var N,P,j,Y,ae,ke,Ae,Le,q,Te=I.data,_e=I.width,oe=I.height,X=4*_e,he=0;he<oe;){for(N=0;N<X;){for(ae=X*he+N,Ae=-1,Le=0,q=0;q<64;q++)ke=ae+(Le=q>>3)*X+(Ae=4*(7&q)),he+Le>=oe&&(ke-=X*(he+1+Le-oe)),N+Ae>=X&&(ke-=N+Ae-X+4),P=Te[ke++],j=Te[ke++],Y=Te[ke++],E[q]=(B[P]+B[j+256|0]+B[Y+512|0]>>16)-128,w[q]=(B[P+768|0]+B[j+1024|0]+B[Y+1280|0]>>16)-128,x[q]=(B[P+1280|0]+B[j+1536|0]+B[Y+1792|0]>>16)-128;K=ye(E,c,K,t,i),ee=ye(w,u,ee,n,r),T=ye(x,u,T,n,r),N+=32}he+=8}if(b>=0){var se=[];se[1]=b+1,se[0]=(1<<b+1)-1,pe(se)}return le(65497),new Uint8Array(v)},e=e||50,function(){for(var I=String.fromCharCode,z=0;z<256;z++)M[z]=I(z)}(),t=ge(R,O),n=ge(L,$),i=ge(D,A),r=ge(Z,me),function(){for(var I=1,z=2,K=1;K<=15;K++){for(var ee=I;ee<z;ee++)h[32767+ee]=K,d[32767+ee]=[],d[32767+ee][1]=K,d[32767+ee][0]=ee;for(var T=-(z-1);T<=-I;T++)h[32767+T]=K,d[32767+T]=[],d[32767+T][1]=K,d[32767+T][0]=z-1+T;I<<=1,z<<=1}}(),function(){for(var I=0;I<256;I++)B[I]=19595*I,B[I+256|0]=38470*I,B[I+512|0]=7471*I+32768,B[I+768|0]=-11059*I,B[I+1024|0]=-21709*I,B[I+1280|0]=32768*I+8421375,B[I+1536|0]=-27439*I,B[I+1792|0]=-5329*I}(),we(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zo(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Rk(e){function t(O){if(!O)throw Error("assert :P")}function n(O,D,A){for(var L=0;4>L;L++)if(O[D+L]!=A.charCodeAt(L))return!0;return!1}function i(O,D,A,L,$){for(var Z=0;Z<$;Z++)O[D+Z]=A[L+Z]}function r(O,D,A,L){for(var $=0;$<L;$++)O[D+$]=A}function o(O){return new Int32Array(O)}function a(O,D){for(var A=[],L=0;L<O;L++)A.push(new D);return A}function s(O,D){var A=[];return function L($,Z,me){for(var ge=me[Z],pe=0;pe<ge&&($.push(me.length>Z+1?[]:new D),!(me.length<Z+1));pe++)L($[pe],Z+1,me)}(A,0,O),A}var l=function(){var O=this;function D(f,y){for(var k=1<<y-1>>>0;f&k;)k>>>=1;return k?(f&k-1)+k:f}function A(f,y,k,C,U){t(!(C%k));do f[y+(C-=k)]=U;while(0<C)}function L(f,y,k,C,U){if(t(2328>=U),512>=U)var V=o(512);else if((V=o(U))==null)return 0;return function(W,J,Q,ne,fe,Pe){var ie,ve,Ee=J,Re=1<<Q,Se=o(16),Ie=o(16);for(t(fe!=0),t(ne!=null),t(W!=null),t(0<Q),ve=0;ve<fe;++ve){if(15<ne[ve])return 0;++Se[ne[ve]]}if(Se[0]==fe)return 0;for(Ie[1]=0,ie=1;15>ie;++ie){if(Se[ie]>1<<ie)return 0;Ie[ie+1]=Ie[ie]+Se[ie]}for(ve=0;ve<fe;++ve)ie=ne[ve],0<ne[ve]&&(Pe[Ie[ie]++]=ve);if(Ie[15]==1)return(ne=new $).g=0,ne.value=Pe[0],A(W,Ee,1,Re,ne),Re;var Oe,$e=-1,Fe=Re-1,ct=0,Je=1,Ft=1,rt=1<<Q;for(ve=0,ie=1,fe=2;ie<=Q;++ie,fe<<=1){if(Je+=Ft<<=1,0>(Ft-=Se[ie]))return 0;for(;0<Se[ie];--Se[ie])(ne=new $).g=ie,ne.value=Pe[ve++],A(W,Ee+ct,fe,rt,ne),ct=D(ct,ie)}for(ie=Q+1,fe=2;15>=ie;++ie,fe<<=1){if(Je+=Ft<<=1,0>(Ft-=Se[ie]))return 0;for(;0<Se[ie];--Se[ie]){if(ne=new $,(ct&Fe)!=$e){for(Ee+=rt,Oe=1<<($e=ie)-Q;15>$e&&!(0>=(Oe-=Se[$e]));)++$e,Oe<<=1;Re+=rt=1<<(Oe=$e-Q),W[J+($e=ct&Fe)].g=Oe+Q,W[J+$e].value=Ee-J-$e}ne.g=ie-Q,ne.value=Pe[ve++],A(W,Ee+(ct>>Q),fe,rt,ne),ct=D(ct,ie)}}return Je!=2*Ie[15]-1?0:Re}(f,y,k,C,U,V)}function $(){this.value=this.g=0}function Z(){this.value=this.g=0}function me(){this.G=a(5,$),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Tc,Z)}function ge(f,y,k,C){t(f!=null),t(y!=null),t(2147483648>C),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=y,f.pa=k,f.Jd=y,f.Yc=k+C,f.Zc=4<=C?k+C-4+1:k,P(f)}function pe(f,y){for(var k=0;0<y--;)k|=Y(f,128)<<y;return k}function te(f,y){var k=pe(f,y);return j(f)?-k:k}function le(f,y,k,C){var U,V=0;for(t(f!=null),t(y!=null),t(4294967288>C),f.Sb=C,f.Ra=0,f.u=0,f.h=0,4<C&&(C=4),U=0;U<C;++U)V+=y[k+U]<<8*U;f.Ra=V,f.bb=C,f.oa=y,f.pa=k}function ye(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<Xs-8>>>0,++f.bb,f.u-=8;ee(f)&&(f.h=1,f.u=0)}function we(f,y){if(t(0<=y),!f.h&&y<=qr){var k=K(f)&Ur[y];return f.u+=y,ye(f),k}return f.h=1,f.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(f){return f.Ra>>>(f.u&Xs-1)>>>0}function ee(f){return t(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>Xs}function T(f,y){f.u=y,f.h=ee(f)}function N(f){f.u>=ss&&(t(f.u>=ss),ye(f))}function P(f){t(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(t(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function j(f){return pe(f,1)}function Y(f,y){var k=f.Ca;0>f.b&&P(f);var C=f.b,U=k*y>>>8,V=(f.I>>>C>U)+0;for(V?(k-=U,f.I-=U+1<<C>>>0):k=U+1,C=k,U=0;256<=C;)U+=8,C>>=8;return C=7^U+Zs[C],f.b-=C,f.Ca=(k<<C)-1,V}function ae(f,y,k){f[y+0]=k>>24&255,f[y+1]=k>>16&255,f[y+2]=k>>8&255,f[y+3]=255&k}function ke(f,y){return f[y+0]|f[y+1]<<8}function Ae(f,y){return ke(f,y)|f[y+2]<<16}function Le(f,y){return ke(f,y)|ke(f,y+2)<<16}function q(f,y){var k=1<<y;return t(f!=null),t(0<y),f.X=o(k),f.X==null?0:(f.Mb=32-y,f.Xa=y,1)}function Te(f,y){t(f!=null),t(y!=null),t(f.Xa==y.Xa),i(y.X,0,f.X,0,1<<y.Xa)}function _e(){this.X=[],this.Xa=this.Mb=0}function oe(f,y,k,C){t(k!=null),t(C!=null);var U=k[0],V=C[0];return U==0&&(U=(f*V+y/2)/y),V==0&&(V=(y*U+f/2)/f),0>=U||0>=V?0:(k[0]=U,C[0]=V,1)}function X(f,y){return f+(1<<y)-1>>>y}function he(f,y){return((4278255360&f)+(4278255360&y)>>>0&4278255360)+((16711935&f)+(16711935&y)>>>0&16711935)>>>0}function se(f,y){O[y]=function(k,C,U,V,W,J,Q){var ne;for(ne=0;ne<W;++ne){var fe=O[f](J[Q+ne-1],U,V+ne);J[Q+ne]=he(k[C+ne],fe)}}}function Ne(){this.ud=this.hd=this.jd=0}function Me(f,y){return((4278124286&(f^y))>>>1)+(f&y)>>>0}function Ce(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function qe(f,y){return Ce(f+(f-y+.5>>1))}function nt(f,y,k){return Math.abs(y-k)-Math.abs(f-k)}function dt(f,y,k,C,U,V,W){for(C=V[W-1],k=0;k<U;++k)V[W+k]=C=he(f[y+k],C)}function Nt(f,y,k,C,U){var V;for(V=0;V<k;++V){var W=f[y+V],J=W>>8&255,Q=16711935&(Q=(Q=16711935&W)+((J<<16)+J));C[U+V]=(4278255360&W)+Q>>>0}}function Ye(f,y){y.jd=255&f,y.hd=f>>8&255,y.ud=f>>16&255}function gt(f,y,k,C,U,V){var W;for(W=0;W<C;++W){var J=y[k+W],Q=J>>>8,ne=J,fe=255&(fe=(fe=J>>>16)+((f.jd<<24>>24)*(Q<<24>>24)>>>5));ne=255&(ne=(ne+=(f.hd<<24>>24)*(Q<<24>>24)>>>5)+((f.ud<<24>>24)*(fe<<24>>24)>>>5)),U[V+W]=(4278255360&J)+(fe<<16)+ne}}function Xe(f,y,k,C,U){O[y]=function(V,W,J,Q,ne,fe,Pe,ie,ve){for(Q=Pe;Q<ie;++Q)for(Pe=0;Pe<ve;++Pe)ne[fe++]=U(J[C(V[W++])])},O[f]=function(V,W,J,Q,ne,fe,Pe){var ie=8>>V.b,ve=V.Ea,Ee=V.K[0],Re=V.w;if(8>ie)for(V=(1<<V.b)-1,Re=(1<<ie)-1;W<J;++W){var Se,Ie=0;for(Se=0;Se<ve;++Se)Se&V||(Ie=C(Q[ne++])),fe[Pe++]=U(Ee[Ie&Re]),Ie>>=ie}else O["VP8LMapColor"+k](Q,ne,Ee,Re,fe,Pe,W,J,ve)}}function bn(f,y,k,C,U){for(k=y+k;y<k;){var V=f[y++];C[U++]=V>>16&255,C[U++]=V>>8&255,C[U++]=255&V}}function zt(f,y,k,C,U){for(k=y+k;y<k;){var V=f[y++];C[U++]=V>>16&255,C[U++]=V>>8&255,C[U++]=255&V,C[U++]=V>>24&255}}function Pt(f,y,k,C,U){for(k=y+k;y<k;){var V=(W=f[y++])>>16&240|W>>12&15,W=240&W|W>>28&15;C[U++]=V,C[U++]=W}}function it(f,y,k,C,U){for(k=y+k;y<k;){var V=(W=f[y++])>>16&248|W>>13&7,W=W>>5&224|W>>3&31;C[U++]=V,C[U++]=W}}function wt(f,y,k,C,U){for(k=y+k;y<k;){var V=f[y++];C[U++]=255&V,C[U++]=V>>8&255,C[U++]=V>>16&255}}function et(f,y,k,C,U,V){if(V==0)for(k=y+k;y<k;)ae(C,((V=f[y++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),U+=32;else i(C,U,f,y,k)}function fn(f,y){O[y][0]=O[f+"0"],O[y][1]=O[f+"1"],O[y][2]=O[f+"2"],O[y][3]=O[f+"3"],O[y][4]=O[f+"4"],O[y][5]=O[f+"5"],O[y][6]=O[f+"6"],O[y][7]=O[f+"7"],O[y][8]=O[f+"8"],O[y][9]=O[f+"9"],O[y][10]=O[f+"10"],O[y][11]=O[f+"11"],O[y][12]=O[f+"12"],O[y][13]=O[f+"13"],O[y][14]=O[f+"0"],O[y][15]=O[f+"0"]}function xt(f){return f==X_||f==Z_||f==Qm||f==Q_}function Dt(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ht(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Dt,this.f.kb=new Cn,this.sd=null}function vt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mc(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function ir(f,y){var k=f.T,C=y.ba.f.RGBA,U=C.eb,V=C.fb+f.ka*C.A,W=Eo[y.ba.S],J=f.y,Q=f.O,ne=f.f,fe=f.N,Pe=f.ea,ie=f.W,ve=y.cc,Ee=y.dc,Re=y.Mc,Se=y.Nc,Ie=f.ka,Oe=f.ka+f.T,$e=f.U,Fe=$e+1>>1;for(Ie==0?W(J,Q,null,null,ne,fe,Pe,ie,ne,fe,Pe,ie,U,V,null,null,$e):(W(y.ec,y.fc,J,Q,ve,Ee,Re,Se,ne,fe,Pe,ie,U,V-C.A,U,V,$e),++k);Ie+2<Oe;Ie+=2)ve=ne,Ee=fe,Re=Pe,Se=ie,fe+=f.Rc,ie+=f.Rc,V+=2*C.A,W(J,(Q+=2*f.fa)-f.fa,J,Q,ve,Ee,Re,Se,ne,fe,Pe,ie,U,V-C.A,U,V,$e);return Q+=f.fa,f.j+Oe<f.o?(i(y.ec,y.fc,J,Q,$e),i(y.cc,y.dc,ne,fe,Fe),i(y.Mc,y.Nc,Pe,ie,Fe),k--):1&Oe||W(J,Q,null,null,ne,fe,Pe,ie,ne,fe,Pe,ie,U,V+C.A,null,null,$e),k}function Ka(f,y,k){var C=f.F,U=[f.J];if(C!=null){var V=f.U,W=y.ba.S,J=W==Zm||W==Qm;y=y.ba.f.RGBA;var Q=[0],ne=f.ka;Q[0]=f.T,f.Kb&&(ne==0?--Q[0]:(--ne,U[0]-=f.width),f.j+f.ka+f.T==f.o&&(Q[0]=f.o-f.j-ne));var fe=y.eb;ne=y.fb+ne*y.A,f=iS(C,U[0],f.width,V,Q,fe,ne+(J?0:3),y.A),t(k==Q),f&&xt(W)&&nh(fe,ne,J,V,Q,y.A)}return 0}function va(f){var y=f.ma,k=y.ba.S,C=11>k,U=k==Jm||k==Xm||k==Zm||k==J_||k==12||xt(k);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Kp(y.Oa,f,U?11:12))return 0;if(U&&xt(k)&&Hp(),f.da)alert("todo:use_scaling");else{if(C){if(y.Ib=mc,f.Kb){if(k=f.U+1>>1,y.memory=o(f.U+2*k),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+f.U,y.Mc=y.cc,y.Nc=y.dc+k,y.Ib=ir,Hp()}}else alert("todo:EmitYUV");U&&(y.Jb=Ka,C&&Wo())}if(C&&!_S){for(f=0;256>f;++f)mO[f]=89858*(f-128)+tg>>eg,yO[f]=-22014*(f-128)+tg,vO[f]=-45773*(f-128),gO[f]=113618*(f-128)+tg>>eg;for(f=rh;f<n2;++f)y=76283*(f-16)+tg>>eg,_O[f-rh]=ba(y,255),bO[f-rh]=ba(y+8>>4,15);_S=1}return 1}function yt(f){var y=f.ma,k=f.U,C=f.T;return t(!(1&f.ka)),0>=k||0>=C?0:(k=y.Ib(f,y),y.Jb!=null&&y.Jb(f,y,k),y.Dc+=k,1)}function Ya(f){f.ma.memory=null}function Ja(f,y,k,C){return we(f,8)!=47?0:(y[0]=we(f,14)+1,k[0]=we(f,14)+1,C[0]=we(f,1),we(f,3)!=0?0:!f.h)}function mo(f,y){if(4>f)return f+1;var k=f-2>>1;return(2+(1&f)<<k)+we(y,k)+1}function go(f,y){return 120<y?y-120:1<=(k=((k=tO[y-1])>>4)*f+(8-(15&k)))?k:1;var k}function $n(f,y,k){var C=K(k),U=f[y+=255&C].g-8;return 0<U&&(T(k,k.u+8),C=K(k),y+=f[y].value,y+=C&(1<<U)-1),T(k,k.u+f[y].g),f[y].value}function Mi(f,y,k){return k.g+=f.g,k.value+=f.value<<y>>>0,t(8>=k.g),f.g}function $i(f,y,k){var C=f.xc;return t((y=C==0?0:f.vc[f.md*(k>>C)+(y>>C)])<f.Wb),f.Ya[y]}function gc(f,y,k,C){var U=f.ab,V=f.c*y,W=f.C;y=W+y;var J=k,Q=C;for(C=f.Ta,k=f.Ua;0<U--;){var ne=f.gc[U],fe=W,Pe=y,ie=J,ve=Q,Ee=(Q=C,J=k,ne.Ea);switch(t(fe<Pe),t(Pe<=ne.nc),ne.hc){case 2:Zn(ie,ve,(Pe-fe)*Ee,Q,J);break;case 0:var Re=fe,Se=Pe,Ie=Q,Oe=J,$e=(rt=ne).Ea;Re==0&&(Jp(ie,ve,null,null,1,Ie,Oe),dt(ie,ve+1,0,0,$e-1,Ie,Oe+1),ve+=$e,Oe+=$e,++Re);for(var Fe=1<<rt.b,ct=Fe-1,Je=X($e,rt.b),Ft=rt.K,rt=rt.w+(Re>>rt.b)*Je;Re<Se;){var Yt=Ft,Ei=rt,jt=1;for(Wu(ie,ve,Ie,Oe-$e,1,Ie,Oe);jt<$e;){var ot=(jt&~ct)+Fe;ot>$e&&(ot=$e),(0,Zp[Yt[Ei++]>>8&15])(ie,ve+ +jt,Ie,Oe+jt-$e,ot-jt,Ie,Oe+jt),jt=ot}ve+=$e,Oe+=$e,++Re&ct||(rt+=Je)}Pe!=ne.nc&&i(Q,J-Ee,Q,J+(Pe-fe-1)*Ee,Ee);break;case 1:for(Ee=ie,Se=ve,$e=(ie=ne.Ea)-(Oe=ie&~(Ie=(ve=1<<ne.b)-1)),Re=X(ie,ne.b),Fe=ne.K,ne=ne.w+(fe>>ne.b)*Re;fe<Pe;){for(ct=Fe,Je=ne,Ft=new Ne,rt=Se+Oe,Yt=Se+ie;Se<rt;)Ye(ct[Je++],Ft),Qp(Ft,Ee,Se,ve,Q,J),Se+=ve,J+=ve;Se<Yt&&(Ye(ct[Je++],Ft),Qp(Ft,Ee,Se,$e,Q,J),Se+=$e,J+=$e),++fe&Ie||(ne+=Re)}break;case 3:if(ie==Q&&ve==J&&0<ne.b){for(Se=Q,ie=Ee=J+(Pe-fe)*Ee-(Oe=(Pe-fe)*X(ne.Ea,ne.b)),ve=Q,Ie=J,Re=[],Oe=($e=Oe)-1;0<=Oe;--Oe)Re[Oe]=ve[Ie+Oe];for(Oe=$e-1;0<=Oe;--Oe)Se[ie+Oe]=Re[Oe];Vm(ne,fe,Pe,Q,Ee,Q,J)}else Vm(ne,fe,Pe,ie,ve,Q,J)}J=C,Q=k}Q!=k&&i(C,k,J,Q,V)}function Ws(f,y){var k=f.V,C=f.Ba+f.c*f.C,U=y-f.C;if(t(y<=f.l.o),t(16>=U),0<U){var V=f.l,W=f.Ta,J=f.Ua,Q=V.width;if(gc(f,U,k,C),U=J=[J],t((k=f.C)<(C=y)),t(V.v<V.va),C>V.o&&(C=V.o),k<V.j){var ne=V.j-k;k=V.j,U[0]+=ne*Q}if(k>=C?k=0:(U[0]+=4*V.v,V.ka=k-V.j,V.U=V.va-V.v,V.T=C-k,k=1),k){if(J=J[0],11>(k=f.ca).S){var fe=k.f.RGBA,Pe=(C=k.S,U=V.U,V=V.T,ne=fe.eb,fe.A),ie=V;for(fe=fe.fb+f.Ma*fe.A;0<ie--;){var ve=W,Ee=J,Re=U,Se=ne,Ie=fe;switch(C){case Ym:eh(ve,Ee,Re,Se,Ie);break;case Jm:Qs(ve,Ee,Re,Se,Ie);break;case X_:Qs(ve,Ee,Re,Se,Ie),nh(Se,Ie,0,Re,1,0);break;case uS:Cc(ve,Ee,Re,Se,Ie);break;case Xm:et(ve,Ee,Re,Se,Ie,1);break;case Z_:et(ve,Ee,Re,Se,Ie,1),nh(Se,Ie,0,Re,1,0);break;case Zm:et(ve,Ee,Re,Se,Ie,0);break;case Qm:et(ve,Ee,Re,Se,Ie,0),nh(Se,Ie,1,Re,1,0);break;case J_:el(ve,Ee,Re,Se,Ie);break;case Q_:el(ve,Ee,Re,Se,Ie),nS(Se,Ie,Re,1,0);break;case dS:tl(ve,Ee,Re,Se,Ie);break;default:t(0)}J+=Q,fe+=Pe}f.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");t(f.Ma<=k.height)}}f.C=y,t(f.C<=f.i)}function qo(f){var y;if(0<f.ua)return 0;for(y=0;y<f.Wb;++y){var k=f.Ya[y].G,C=f.Ya[y].H;if(0<k[1][C[1]+0].g||0<k[2][C[2]+0].g||0<k[3][C[3]+0].g)return 0}return 1}function ya(f,y,k,C,U,V){if(f.Z!=0){var W=f.qd,J=f.rd;for(t(rl[f.Z]!=null);y<k;++y)rl[f.Z](W,J,C,U,C,U,V),W=C,J=U,U+=V;f.qd=W,f.rd=J}}function zo(f,y){var k=f.l.ma,C=k.Z==0||k.Z==1?f.l.j:f.C;if(C=f.C<C?C:f.C,t(y<=f.l.o),y>C){var U=f.l.width,V=k.ca,W=k.tb+U*C,J=f.V,Q=f.Ba+f.c*C,ne=f.gc;t(f.ab==1),t(ne[0].hc==3),Sa(ne[0],C,y,J,Q,V,W),ya(k,C,y,V,W,U)}f.C=f.Ma=y}function Ho(f,y,k,C,U,V,W){var J=f.$/C,Q=f.$%C,ne=f.m,fe=f.s,Pe=k+f.$,ie=Pe;U=k+C*U;var ve=k+C*V,Ee=280+fe.ua,Re=f.Pb?J:16777216,Se=0<fe.ua?fe.Wa:null,Ie=fe.wc,Oe=Pe<ve?$i(fe,Q,J):null;t(f.C<V),t(ve<=U);var $e=!1;e:for(;;){for(;$e||Pe<ve;){var Fe=0;if(J>=Re){var ct=Pe-k;t((Re=f).Pb),Re.wd=Re.m,Re.xd=ct,0<Re.s.ua&&Te(Re.s.Wa,Re.s.vb),Re=J+iO}if(Q&Ie||(Oe=$i(fe,Q,J)),t(Oe!=null),Oe.Qb&&(y[Pe]=Oe.qb,$e=!0),!$e)if(N(ne),Oe.jc){Fe=ne,ct=y;var Je=Pe,Ft=Oe.pd[K(Fe)&Tc-1];t(Oe.jc),256>Ft.g?(T(Fe,Fe.u+Ft.g),ct[Je]=Ft.value,Fe=0):(T(Fe,Fe.u+Ft.g-256),t(256<=Ft.value),Fe=Ft.value),Fe==0&&($e=!0)}else Fe=$n(Oe.G[0],Oe.H[0],ne);if(ne.h)break;if($e||256>Fe){if(!$e)if(Oe.nd)y[Pe]=(Oe.qb|Fe<<8)>>>0;else{if(N(ne),$e=$n(Oe.G[1],Oe.H[1],ne),N(ne),ct=$n(Oe.G[2],Oe.H[2],ne),Je=$n(Oe.G[3],Oe.H[3],ne),ne.h)break;y[Pe]=(Je<<24|$e<<16|Fe<<8|ct)>>>0}if($e=!1,++Pe,++Q>=C&&(Q=0,++J,W!=null&&J<=V&&!(J%16)&&W(f,J),Se!=null))for(;ie<Pe;)Fe=y[ie++],Se.X[(506832829*Fe&4294967295)>>>Se.Mb]=Fe}else if(280>Fe){if(Fe=mo(Fe-256,ne),ct=$n(Oe.G[4],Oe.H[4],ne),N(ne),ct=go(C,ct=mo(ct,ne)),ne.h)break;if(Pe-k<ct||U-Pe<Fe)break e;for(Je=0;Je<Fe;++Je)y[Pe+Je]=y[Pe+Je-ct];for(Pe+=Fe,Q+=Fe;Q>=C;)Q-=C,++J,W!=null&&J<=V&&!(J%16)&&W(f,J);if(t(Pe<=U),Q&Ie&&(Oe=$i(fe,Q,J)),Se!=null)for(;ie<Pe;)Fe=y[ie++],Se.X[(506832829*Fe&4294967295)>>>Se.Mb]=Fe}else{if(!(Fe<Ee))break e;for($e=Fe-280,t(Se!=null);ie<Pe;)Fe=y[ie++],Se.X[(506832829*Fe&4294967295)>>>Se.Mb]=Fe;Fe=Pe,t(!($e>>>(ct=Se).Xa)),y[Fe]=ct.X[$e],$e=!0}$e||t(ne.h==ee(ne))}if(f.Pb&&ne.h&&Pe<U)t(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Te(f.s.vb,f.s.Wa);else{if(ne.h)break e;W!=null&&W(f,J>V?V:J),f.a=0,f.$=Pe-k}return 1}return f.a=3,0}function vo(f){t(f!=null),f.vc=null,f.yc=null,f.Ya=null;var y=f.Wa;y!=null&&(y.X=null),f.vb=null,t(f!=null)}function vc(){var f=new At;return f==null?null:(f.a=0,f.xb=fS,fn("Predictor","VP8LPredictors"),fn("Predictor","VP8LPredictors_C"),fn("PredictorAdd","VP8LPredictorsAdd"),fn("PredictorAdd","VP8LPredictorsAdd_C"),Zn=Nt,Qp=gt,eh=bn,Qs=zt,el=Pt,tl=it,Cc=wt,O.VP8LMapColor32b=Ea,O.VP8LMapColor8b=Xp,f)}function _a(f,y,k,C,U){var V=1,W=[f],J=[y],Q=C.m,ne=C.s,fe=null,Pe=0;e:for(;;){if(k)for(;V&&we(Q,1);){var ie=W,ve=J,Ee=C,Re=1,Se=Ee.m,Ie=Ee.gc[Ee.ab],Oe=we(Se,2);if(Ee.Oc&1<<Oe)V=0;else{switch(Ee.Oc|=1<<Oe,Ie.hc=Oe,Ie.Ea=ie[0],Ie.nc=ve[0],Ie.K=[null],++Ee.ab,t(4>=Ee.ab),Oe){case 0:case 1:Ie.b=we(Se,3)+2,Re=_a(X(Ie.Ea,Ie.b),X(Ie.nc,Ie.b),0,Ee,Ie.K),Ie.K=Ie.K[0];break;case 3:var $e,Fe=we(Se,8)+1,ct=16<Fe?0:4<Fe?1:2<Fe?2:3;if(ie[0]=X(Ie.Ea,ct),Ie.b=ct,$e=Re=_a(Fe,1,0,Ee,Ie.K)){var Je,Ft=Fe,rt=Ie,Yt=1<<(8>>rt.b),Ei=o(Yt);if(Ei==null)$e=0;else{var jt=rt.K[0],ot=rt.w;for(Ei[0]=rt.K[0][0],Je=1;Je<1*Ft;++Je)Ei[Je]=he(jt[ot+Je],Ei[Je-1]);for(;Je<4*Yt;++Je)Ei[Je]=0;rt.K[0]=null,rt.K[0]=Ei,$e=1}}Re=$e;break;case 2:break;default:t(0)}V=Re}}if(W=W[0],J=J[0],V&&we(Q,1)&&!(V=1<=(Pe=we(Q,4))&&11>=Pe)){C.a=3;break e}var ze;if(ze=V)t:{var ei,Lt,Jt,wn=C,qi=W,vr=J,Gn=Pe,rr=k,yr=wn.m,Si=wn.s,Zt=[null],an=1,Un=0,sn=nO[Gn];n:for(;;){if(rr&&we(yr,1)){var zi=we(yr,3)+2,Yo=X(qi,zi),ti=X(vr,zi),Pr=Yo*ti;if(!_a(Yo,ti,0,wn,Zt))break n;for(Zt=Zt[0],Si.xc=zi,ei=0;ei<Pr;++ei){var pn=Zt[ei]>>8&65535;Zt[ei]=pn,pn>=an&&(an=pn+1)}}if(yr.h)break n;for(Lt=0;5>Lt;++Lt){var Ni=pS[Lt];!Lt&&0<Gn&&(Ni+=1<<Gn),Un<Ni&&(Un=Ni)}var Hr=a(an*sn,$),_r=an,Vr=a(_r,me);if(Vr==null)var Wr=null;else t(65536>=_r),Wr=Vr;var Ar=o(Un);if(Wr==null||Ar==null||Hr==null){wn.a=1;break n}var Kr=Hr;for(ei=Jt=0;ei<an;++ei){var gn=Wr[ei],Yr=gn.G,Jo=gn.H,Mc=0,us=1,Hi=0;for(Lt=0;5>Lt;++Lt){Ni=pS[Lt],Yr[Lt]=Kr,Jo[Lt]=Jt,!Lt&&0<Gn&&(Ni+=1<<Gn);r:{var ig,i2=Ni,rg=wn,oh=Ar,EO=Kr,SO=Jt,r2=0,ol=rg.m,NO=we(ol,1);if(r(oh,0,0,i2),NO){var kO=we(ol,1)+1,PO=we(ol,1),xS=we(ol,PO==0?1:8);oh[xS]=1,kO==2&&(oh[xS=we(ol,8)]=1);var og=1}else{var ES=o(19),SS=we(ol,4)+4;if(19<SS){rg.a=3;var ag=0;break r}for(ig=0;ig<SS;++ig)ES[eO[ig]]=we(ol,3);var o2=void 0,ah=void 0,NS=rg,AO=ES,sg=i2,kS=oh,a2=0,al=NS.m,PS=8,AS=a(128,$);i:for(;L(AS,0,7,AO,19);){if(we(al,1)){var TO=2+2*we(al,3);if((o2=2+we(al,TO))>sg)break i}else o2=sg;for(ah=0;ah<sg&&o2--;){N(al);var TS=AS[0+(127&K(al))];T(al,al.u+TS.g);var Yu=TS.value;if(16>Yu)kS[ah++]=Yu,Yu!=0&&(PS=Yu);else{var CO=Yu==16,CS=Yu-16,RO=ZL[CS],RS=we(al,XL[CS])+RO;if(ah+RS>sg)break i;for(var MO=CO?PS:0;0<RS--;)kS[ah++]=MO}}a2=1;break i}a2||(NS.a=3),og=a2}(og=og&&!ol.h)&&(r2=L(EO,SO,8,oh,i2)),og&&r2!=0?ag=r2:(rg.a=3,ag=0)}if(ag==0)break n;if(us&&QL[Lt]==1&&(us=Kr[Jt].g==0),Mc+=Kr[Jt].g,Jt+=ag,3>=Lt){var sh,s2=Ar[0];for(sh=1;sh<Ni;++sh)Ar[sh]>s2&&(s2=Ar[sh]);Hi+=s2}}if(gn.nd=us,gn.Qb=0,us&&(gn.qb=(Yr[3][Jo[3]+0].value<<24|Yr[1][Jo[1]+0].value<<16|Yr[2][Jo[2]+0].value)>>>0,Mc==0&&256>Yr[0][Jo[0]+0].value&&(gn.Qb=1,gn.qb+=Yr[0][Jo[0]+0].value<<8)),gn.jc=!gn.Qb&&6>Hi,gn.jc){var lg,ds=gn;for(lg=0;lg<Tc;++lg){var sl=lg,ll=ds.pd[sl],cg=ds.G[0][ds.H[0]+sl];256<=cg.value?(ll.g=cg.g+256,ll.value=cg.value):(ll.g=0,ll.value=0,sl>>=Mi(cg,8,ll),sl>>=Mi(ds.G[1][ds.H[1]+sl],16,ll),sl>>=Mi(ds.G[2][ds.H[2]+sl],0,ll),Mi(ds.G[3][ds.H[3]+sl],24,ll))}}}Si.vc=Zt,Si.Wb=an,Si.Ya=Wr,Si.yc=Hr,ze=1;break t}ze=0}if(!(V=ze)){C.a=3;break e}if(0<Pe){if(ne.ua=1<<Pe,!q(ne.Wa,Pe)){C.a=1,V=0;break e}}else ne.ua=0;var l2=C,MS=W,IO=J,c2=l2.s,u2=c2.xc;if(l2.c=MS,l2.i=IO,c2.md=X(MS,u2),c2.wc=u2==0?-1:(1<<u2)-1,k){C.xb=uO;break e}if((fe=o(W*J))==null){C.a=1,V=0;break e}V=(V=Ho(C,fe,0,W,J,J,null))&&!Q.h;break e}return V?(U!=null?U[0]=fe:(t(fe==null),t(k)),C.$=0,k||vo(ne)):vo(ne),V}function yc(f,y){var k=f.c*f.i,C=k+y+16*y;return t(f.c<=y),f.V=o(C),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+k+y,1)}function Bu(f,y){var k=f.C,C=y-k,U=f.V,V=f.Ba+f.c*k;for(t(y<=f.l.o);0<C;){var W=16<C?16:C,J=f.l.ma,Q=f.l.width,ne=Q*W,fe=J.ca,Pe=J.tb+Q*k,ie=f.Ta,ve=f.Ua;gc(f,W,U,V),rS(ie,ve,fe,Pe,ne),ya(J,k,k+W,fe,Pe,Q),C-=W,U+=W*f.c,k+=W}t(k==y),f.C=f.Ma=y}function Fu(){this.ub=this.yd=this.td=this.Rb=0}function ju(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function I_(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Dp(){this.Yb=function(){var f=[];return function y(k,C,U){for(var V=U[C],W=0;W<V&&(k.push(U.length>C+1?[]:0),!(U.length<C+1));W++)y(k[W],C+1,U)}(f,0,[3,11]),f}()}function Am(){this.jb=o(3),this.Wc=s([4,8],Dp),this.Xc=s([4,17],Dp)}function Tm(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function yo(){this.ld=this.La=this.dd=this.tc=0}function Lp(){this.Na=this.la=0}function Cm(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Op(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Rm(){this.uc=this.M=this.Nb=0,this.wa=Array(new yo),this.Y=0,this.ya=Array(new Op),this.aa=0,this.l=new $u}function Mm(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Im(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new Fu,this.Kc=new ju,this.ed=new Tm,this.Qa=new I_,this.Ic=this.$c=this.Aa=0,this.D=new Rm,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,I),this.ia=0,this.pb=a(4,Cm),this.Pa=new Am,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Mm),this.Hd=0,this.rb=Array(new Lp),this.sb=0,this.wa=Array(new yo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Op),this.L=this.aa=0,this.gd=s([4,2],yo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ba(f,y){return 0>f?0:f>y?y:f}function $u(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function D_(){var f=new Im;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,ih||(ih=Gu)),f}function pi(f,y,k){return f.a==0&&(f.a=y,f.sc=k,f.cb=0),0}function Dm(f,y,k){return 3<=k&&f[y+0]==157&&f[y+1]==1&&f[y+2]==42}function wa(f,y){if(f==null)return 0;if(f.a=0,f.sc="OK",y==null)return pi(f,2,"null VP8Io passed to VP8GetHeaders()");var k=y.data,C=y.w,U=y.ha;if(4>U)return pi(f,7,"Truncated header.");var V=k[C+0]|k[C+1]<<8|k[C+2]<<16,W=f.Od;if(W.Rb=!(1&V),W.td=V>>1&7,W.yd=V>>4&1,W.ub=V>>5,3<W.td)return pi(f,3,"Incorrect keyframe parameters.");if(!W.yd)return pi(f,4,"Frame not displayable.");C+=3,U-=3;var J=f.Kc;if(W.Rb){if(7>U)return pi(f,7,"cannot parse picture header");if(!Dm(k,C,U))return pi(f,3,"Bad code word");J.c=16383&(k[C+4]<<8|k[C+3]),J.Td=k[C+4]>>6,J.i=16383&(k[C+6]<<8|k[C+5]),J.Ud=k[C+6]>>6,C+=7,U-=7,f.za=J.c+15>>4,f.Ub=J.i+15>>4,y.width=J.c,y.height=J.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,r((V=f.Pa).jb,0,255,V.jb.length),t((V=f.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,r(V.Zb,0,0,V.Zb.length),r(V.Lb,0,0,V.Lb)}if(W.ub>U)return pi(f,7,"bad partition length");ge(V=f.m,k,C,W.ub),C+=W.ub,U-=W.ub,W.Rb&&(J.Ld=j(V),J.Kd=j(V)),J=f.Qa;var Q,ne=f.Pa;if(t(V!=null),t(J!=null),J.Cb=j(V),J.Cb){if(J.Bb=j(V),j(V)){for(J.Fb=j(V),Q=0;4>Q;++Q)J.Zb[Q]=j(V)?te(V,7):0;for(Q=0;4>Q;++Q)J.Lb[Q]=j(V)?te(V,6):0}if(J.Bb)for(Q=0;3>Q;++Q)ne.jb[Q]=j(V)?pe(V,8):255}else J.Bb=0;if(V.Ka)return pi(f,3,"cannot parse segment header");if((J=f.ed).zd=j(V),J.Tb=pe(V,6),J.wb=pe(V,3),J.Pc=j(V),J.Pc&&j(V)){for(ne=0;4>ne;++ne)j(V)&&(J.vd[ne]=te(V,6));for(ne=0;4>ne;++ne)j(V)&&(J.od[ne]=te(V,6))}if(f.L=J.Tb==0?0:J.zd?1:2,V.Ka)return pi(f,3,"cannot parse filter header");var fe=U;if(U=Q=C,C=Q+fe,J=fe,f.Xb=(1<<pe(f.m,2))-1,fe<3*(ne=f.Xb))k=7;else{for(Q+=3*ne,J-=3*ne,fe=0;fe<ne;++fe){var Pe=k[U+0]|k[U+1]<<8|k[U+2]<<16;Pe>J&&(Pe=J),ge(f.Jc[+fe],k,Q,Pe),Q+=Pe,J-=Pe,U+=3}ge(f.Jc[+ne],k,Q,J),k=Q<C?0:5}if(k!=0)return pi(f,k,"cannot parse partitions");for(k=pe(Q=f.m,7),U=j(Q)?te(Q,4):0,C=j(Q)?te(Q,4):0,J=j(Q)?te(Q,4):0,ne=j(Q)?te(Q,4):0,Q=j(Q)?te(Q,4):0,fe=f.Qa,Pe=0;4>Pe;++Pe){if(fe.Cb){var ie=fe.Zb[Pe];fe.Fb||(ie+=k)}else{if(0<Pe){f.pb[Pe]=f.pb[0];continue}ie=k}var ve=f.pb[Pe];ve.Sc[0]=e2[ba(ie+U,127)],ve.Sc[1]=t2[ba(ie+0,127)],ve.Eb[0]=2*e2[ba(ie+C,127)],ve.Eb[1]=101581*t2[ba(ie+J,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=e2[ba(ie+ne,117)],ve.Qc[1]=t2[ba(ie+Q,127)],ve.lc=ie+Q}if(!W.Rb)return pi(f,4,"Not a key frame.");for(j(V),W=f.Pa,k=0;4>k;++k){for(U=0;8>U;++U)for(C=0;3>C;++C)for(J=0;11>J;++J)ne=Y(V,lO[k][U][C][J])?pe(V,8):aO[k][U][C][J],W.Wc[k][U].Yb[C][J]=ne;for(U=0;17>U;++U)W.Xc[k][U]=W.Wc[k][cO[U]]}return f.kc=j(V),f.kc&&(f.Bd=pe(V,8)),f.cb=1}function Gu(f,y,k,C,U,V,W){var J=y[U].Yb[k];for(k=0;16>U;++U){if(!Y(f,J[k+0]))return U;for(;!Y(f,J[k+1]);)if(J=y[++U].Yb[0],k=0,U==16)return 16;var Q=y[U+1].Yb;if(Y(f,J[k+2])){var ne=f,fe=0;if(Y(ne,(ie=J)[(Pe=k)+3]))if(Y(ne,ie[Pe+6])){for(J=0,Pe=2*(fe=Y(ne,ie[Pe+8]))+(ie=Y(ne,ie[Pe+9+fe])),fe=0,ie=rO[Pe];ie[J];++J)fe+=fe+Y(ne,ie[J]);fe+=3+(8<<Pe)}else Y(ne,ie[Pe+7])?(fe=7+2*Y(ne,165),fe+=Y(ne,145)):fe=5+Y(ne,159);else fe=Y(ne,ie[Pe+4])?3+Y(ne,ie[Pe+5]):2;J=Q[2]}else fe=1,J=Q[1];Q=W+oO[U],0>(ne=f).b&&P(ne);var Pe,ie=ne.b,ve=(Pe=ne.Ca>>1)-(ne.I>>ie)>>31;--ne.b,ne.Ca+=ve,ne.Ca|=1,ne.I-=(Pe+1&ve)<<ie,V[Q]=((fe^ve)-ve)*C[(0<U)+0]}return 16}function Lm(f){var y=f.rb[f.sb-1];y.la=0,y.Na=0,r(f.zc,0,0,f.zc.length),f.ja=0}function _o(f,y,k,C,U){U=f[y+k+32*C]+(U>>3),f[y+k+32*C]=-256&U?0>U?0:255:U}function bi(f,y,k,C,U,V){_o(f,y,0,k,C+U),_o(f,y,1,k,C+V),_o(f,y,2,k,C-V),_o(f,y,3,k,C-U)}function Xa(f){return(20091*f>>16)+f}function Om(f,y,k,C){var U,V=0,W=o(16);for(U=0;4>U;++U){var J=f[y+0]+f[y+8],Q=f[y+0]-f[y+8],ne=(35468*f[y+4]>>16)-Xa(f[y+12]),fe=Xa(f[y+4])+(35468*f[y+12]>>16);W[V+0]=J+fe,W[V+1]=Q+ne,W[V+2]=Q-ne,W[V+3]=J-fe,V+=4,y++}for(U=V=0;4>U;++U)J=(f=W[V+0]+4)+W[V+8],Q=f-W[V+8],ne=(35468*W[V+4]>>16)-Xa(W[V+12]),_o(k,C,0,0,J+(fe=Xa(W[V+4])+(35468*W[V+12]>>16))),_o(k,C,1,0,Q+ne),_o(k,C,2,0,Q-ne),_o(k,C,3,0,J-fe),V++,C+=32}function L_(f,y,k,C){var U=f[y+0]+4,V=35468*f[y+4]>>16,W=Xa(f[y+4]),J=35468*f[y+1]>>16;bi(k,C,0,U+W,f=Xa(f[y+1]),J),bi(k,C,1,U+V,f,J),bi(k,C,2,U-V,f,J),bi(k,C,3,U-W,f,J)}function O_(f,y,k,C,U){Om(f,y,k,C),U&&Om(f,y+16,k,C+4)}function xa(f,y,k,C){Rc(f,y+0,k,C,1),Rc(f,y+32,k,C+128,1)}function Bm(f,y,k,C){var U;for(f=f[y+0]+4,U=0;4>U;++U)for(y=0;4>y;++y)_o(k,C,y,U,f)}function Fm(f,y,k,C){f[y+0]&&nn(f,y+0,k,C),f[y+16]&&nn(f,y+16,k,C+4),f[y+32]&&nn(f,y+32,k,C+128),f[y+48]&&nn(f,y+48,k,C+128+4)}function Uu(f,y,k,C){var U,V=o(16);for(U=0;4>U;++U){var W=f[y+0+U]+f[y+12+U],J=f[y+4+U]+f[y+8+U],Q=f[y+4+U]-f[y+8+U],ne=f[y+0+U]-f[y+12+U];V[0+U]=W+J,V[8+U]=W-J,V[4+U]=ne+Q,V[12+U]=ne-Q}for(U=0;4>U;++U)W=(f=V[0+4*U]+3)+V[3+4*U],J=V[1+4*U]+V[2+4*U],Q=V[1+4*U]-V[2+4*U],ne=f-V[3+4*U],k[C+0]=W+J>>3,k[C+16]=ne+Q>>3,k[C+32]=W-J>>3,k[C+48]=ne-Q>>3,C+=64}function _c(f,y,k){var C,U=y-32,V=zr,W=255-f[U-1];for(C=0;C<k;++C){var J,Q=V,ne=W+f[y-1];for(J=0;J<k;++J)f[y+J]=Q[ne+f[U+J]];y+=32}}function B_(f,y){_c(f,y,4)}function F_(f,y){_c(f,y,8)}function j_(f,y){_c(f,y,16)}function Bp(f,y){var k;for(k=0;16>k;++k)i(f,y+32*k,f,y-32,16)}function jm(f,y){var k;for(k=16;0<k;--k)r(f,y,f[y-1],16),y+=32}function Vo(f,y,k){var C;for(C=0;16>C;++C)r(y,k+32*C,f,16)}function $_(f,y){var k,C=16;for(k=0;16>k;++k)C+=f[y-1+32*k]+f[y+k-32];Vo(C>>5,f,y)}function bc(f,y){var k,C=8;for(k=0;16>k;++k)C+=f[y-1+32*k];Vo(C>>4,f,y)}function Fp(f,y){var k,C=8;for(k=0;16>k;++k)C+=f[y+k-32];Vo(C>>4,f,y)}function G_(f,y){Vo(128,f,y)}function Tt(f,y,k){return f+2*y+k+2>>2}function U_(f,y){var k,C=y-32;for(C=new Uint8Array([Tt(f[C-1],f[C+0],f[C+1]),Tt(f[C+0],f[C+1],f[C+2]),Tt(f[C+1],f[C+2],f[C+3]),Tt(f[C+2],f[C+3],f[C+4])]),k=0;4>k;++k)i(f,y+32*k,C,0,C.length)}function q_(f,y){var k=f[y-1],C=f[y-1+32],U=f[y-1+64],V=f[y-1+96];ae(f,y+0,16843009*Tt(f[y-1-32],k,C)),ae(f,y+32,16843009*Tt(k,C,U)),ae(f,y+64,16843009*Tt(C,U,V)),ae(f,y+96,16843009*Tt(U,V,V))}function z_(f,y){var k,C=4;for(k=0;4>k;++k)C+=f[y+k-32]+f[y-1+32*k];for(C>>=3,k=0;4>k;++k)r(f,y+32*k,C,4)}function Za(f,y){var k=f[y-1+0],C=f[y-1+32],U=f[y-1+64],V=f[y-1-32],W=f[y+0-32],J=f[y+1-32],Q=f[y+2-32],ne=f[y+3-32];f[y+0+96]=Tt(C,U,f[y-1+96]),f[y+1+96]=f[y+0+64]=Tt(k,C,U),f[y+2+96]=f[y+1+64]=f[y+0+32]=Tt(V,k,C),f[y+3+96]=f[y+2+64]=f[y+1+32]=f[y+0+0]=Tt(W,V,k),f[y+3+64]=f[y+2+32]=f[y+1+0]=Tt(J,W,V),f[y+3+32]=f[y+2+0]=Tt(Q,J,W),f[y+3+0]=Tt(ne,Q,J)}function Qa(f,y){var k=f[y+1-32],C=f[y+2-32],U=f[y+3-32],V=f[y+4-32],W=f[y+5-32],J=f[y+6-32],Q=f[y+7-32];f[y+0+0]=Tt(f[y+0-32],k,C),f[y+1+0]=f[y+0+32]=Tt(k,C,U),f[y+2+0]=f[y+1+32]=f[y+0+64]=Tt(C,U,V),f[y+3+0]=f[y+2+32]=f[y+1+64]=f[y+0+96]=Tt(U,V,W),f[y+3+32]=f[y+2+64]=f[y+1+96]=Tt(V,W,J),f[y+3+64]=f[y+2+96]=Tt(W,J,Q),f[y+3+96]=Tt(J,Q,Q)}function H_(f,y){var k=f[y-1+0],C=f[y-1+32],U=f[y-1+64],V=f[y-1-32],W=f[y+0-32],J=f[y+1-32],Q=f[y+2-32],ne=f[y+3-32];f[y+0+0]=f[y+1+64]=V+W+1>>1,f[y+1+0]=f[y+2+64]=W+J+1>>1,f[y+2+0]=f[y+3+64]=J+Q+1>>1,f[y+3+0]=Q+ne+1>>1,f[y+0+96]=Tt(U,C,k),f[y+0+64]=Tt(C,k,V),f[y+0+32]=f[y+1+96]=Tt(k,V,W),f[y+1+32]=f[y+2+96]=Tt(V,W,J),f[y+2+32]=f[y+3+96]=Tt(W,J,Q),f[y+3+32]=Tt(J,Q,ne)}function V_(f,y){var k=f[y+0-32],C=f[y+1-32],U=f[y+2-32],V=f[y+3-32],W=f[y+4-32],J=f[y+5-32],Q=f[y+6-32],ne=f[y+7-32];f[y+0+0]=k+C+1>>1,f[y+1+0]=f[y+0+64]=C+U+1>>1,f[y+2+0]=f[y+1+64]=U+V+1>>1,f[y+3+0]=f[y+2+64]=V+W+1>>1,f[y+0+32]=Tt(k,C,U),f[y+1+32]=f[y+0+96]=Tt(C,U,V),f[y+2+32]=f[y+1+96]=Tt(U,V,W),f[y+3+32]=f[y+2+96]=Tt(V,W,J),f[y+3+64]=Tt(W,J,Q),f[y+3+96]=Tt(J,Q,ne)}function qu(f,y){var k=f[y-1+0],C=f[y-1+32],U=f[y-1+64],V=f[y-1+96];f[y+0+0]=k+C+1>>1,f[y+2+0]=f[y+0+32]=C+U+1>>1,f[y+2+32]=f[y+0+64]=U+V+1>>1,f[y+1+0]=Tt(k,C,U),f[y+3+0]=f[y+1+32]=Tt(C,U,V),f[y+3+32]=f[y+1+64]=Tt(U,V,V),f[y+3+64]=f[y+2+64]=f[y+0+96]=f[y+1+96]=f[y+2+96]=f[y+3+96]=V}function jp(f,y){var k=f[y-1+0],C=f[y-1+32],U=f[y-1+64],V=f[y-1+96],W=f[y-1-32],J=f[y+0-32],Q=f[y+1-32],ne=f[y+2-32];f[y+0+0]=f[y+2+32]=k+W+1>>1,f[y+0+32]=f[y+2+64]=C+k+1>>1,f[y+0+64]=f[y+2+96]=U+C+1>>1,f[y+0+96]=V+U+1>>1,f[y+3+0]=Tt(J,Q,ne),f[y+2+0]=Tt(W,J,Q),f[y+1+0]=f[y+3+32]=Tt(k,W,J),f[y+1+32]=f[y+3+64]=Tt(C,k,W),f[y+1+64]=f[y+3+96]=Tt(U,C,k),f[y+1+96]=Tt(V,U,C)}function wc(f,y){var k;for(k=0;8>k;++k)i(f,y+32*k,f,y-32,8)}function W_(f,y){var k;for(k=0;8>k;++k)r(f,y,f[y-1],8),y+=32}function es(f,y,k){var C;for(C=0;8>C;++C)r(y,k+32*C,f,8)}function K_(f,y){var k,C=8;for(k=0;8>k;++k)C+=f[y+k-32]+f[y-1+32*k];es(C>>4,f,y)}function $p(f,y){var k,C=4;for(k=0;8>k;++k)C+=f[y+k-32];es(C>>3,f,y)}function Gp(f,y){var k,C=4;for(k=0;8>k;++k)C+=f[y-1+32*k];es(C>>3,f,y)}function $m(f,y){es(128,f,y)}function ts(f,y,k){var C=f[y-k],U=f[y+0],V=3*(U-C)+Y_[1020+f[y-2*k]-f[y+k]],W=Km[112+(V+4>>3)];f[y-k]=zr[255+C+Km[112+(V+3>>3)]],f[y+0]=zr[255+U-W]}function Up(f,y,k,C){var U=f[y+0],V=f[y+k];return xo[255+f[y-2*k]-f[y-k]]>C||xo[255+V-U]>C}function zu(f,y,k,C){return 4*xo[255+f[y-k]-f[y+0]]+xo[255+f[y-2*k]-f[y+k]]<=C}function qp(f,y,k,C,U){var V=f[y-3*k],W=f[y-2*k],J=f[y-k],Q=f[y+0],ne=f[y+k],fe=f[y+2*k],Pe=f[y+3*k];return 4*xo[255+J-Q]+xo[255+W-ne]>C?0:xo[255+f[y-4*k]-V]<=U&&xo[255+V-W]<=U&&xo[255+W-J]<=U&&xo[255+Pe-fe]<=U&&xo[255+fe-ne]<=U&&xo[255+ne-Q]<=U}function xc(f,y,k,C){var U=2*C+1;for(C=0;16>C;++C)zu(f,y+C,k,U)&&ts(f,y+C,k)}function zp(f,y,k,C){var U=2*C+1;for(C=0;16>C;++C)zu(f,y+C*k,1,U)&&ts(f,y+C*k,1)}function Gm(f,y,k,C){var U;for(U=3;0<U;--U)xc(f,y+=4*k,k,C)}function Um(f,y,k,C){var U;for(U=3;0<U;--U)zp(f,y+=4,k,C)}function ns(f,y,k,C,U,V,W,J){for(V=2*V+1;0<U--;){if(qp(f,y,k,V,W))if(Up(f,y,k,J))ts(f,y,k);else{var Q=f,ne=y,fe=k,Pe=Q[ne-2*fe],ie=Q[ne-fe],ve=Q[ne+0],Ee=Q[ne+fe],Re=Q[ne+2*fe],Se=27*(Oe=Y_[1020+3*(ve-ie)+Y_[1020+Pe-Ee]])+63>>7,Ie=18*Oe+63>>7,Oe=9*Oe+63>>7;Q[ne-3*fe]=zr[255+Q[ne-3*fe]+Oe],Q[ne-2*fe]=zr[255+Pe+Ie],Q[ne-fe]=zr[255+ie+Se],Q[ne+0]=zr[255+ve-Se],Q[ne+fe]=zr[255+Ee-Ie],Q[ne+2*fe]=zr[255+Re-Oe]}y+=C}}function is(f,y,k,C,U,V,W,J){for(V=2*V+1;0<U--;){if(qp(f,y,k,V,W))if(Up(f,y,k,J))ts(f,y,k);else{var Q=f,ne=y,fe=k,Pe=Q[ne-fe],ie=Q[ne+0],ve=Q[ne+fe],Ee=Km[112+(4+(Re=3*(ie-Pe))>>3)],Re=Km[112+(Re+3>>3)],Se=Ee+1>>1;Q[ne-2*fe]=zr[255+Q[ne-2*fe]+Se],Q[ne-fe]=zr[255+Pe+Re],Q[ne+0]=zr[255+ie-Ee],Q[ne+fe]=zr[255+ve-Se]}y+=C}}function qm(f,y,k,C,U,V){ns(f,y,k,1,16,C,U,V)}function Ec(f,y,k,C,U,V){ns(f,y,1,k,16,C,U,V)}function zm(f,y,k,C,U,V){var W;for(W=3;0<W;--W)is(f,y+=4*k,k,1,16,C,U,V)}function S(f,y,k,C,U,V){var W;for(W=3;0<W;--W)is(f,y+=4,1,k,16,C,U,V)}function G(f,y,k,C,U,V,W,J){ns(f,y,U,1,8,V,W,J),ns(k,C,U,1,8,V,W,J)}function re(f,y,k,C,U,V,W,J){ns(f,y,1,U,8,V,W,J),ns(k,C,1,U,8,V,W,J)}function de(f,y,k,C,U,V,W,J){is(f,y+4*U,U,1,8,V,W,J),is(k,C+4*U,U,1,8,V,W,J)}function xe(f,y,k,C,U,V,W,J){is(f,y+4,1,U,8,V,W,J),is(k,C+4,1,U,8,V,W,J)}function De(){this.ba=new Ht,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Be(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function tt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function st(){this.ua=0,this.Wa=new _e,this.vb=new _e,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new me,this.yc=new $}function At(){this.xb=this.a=0,this.l=new $u,this.ca=new Ht,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new st,this.ab=0,this.gc=a(4,tt),this.Oc=0}function Ot(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new $u,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Xt(f,y,k,C,U,V,W){for(f=f==null?0:f[y+0],y=0;y<W;++y)U[V+y]=f+k[C+y]&255,f=U[V+y]}function Dn(f,y,k,C,U,V,W){var J;if(f==null)Xt(null,null,k,C,U,V,W);else for(J=0;J<W;++J)U[V+J]=f[y+J]+k[C+J]&255}function hi(f,y,k,C,U,V,W){if(f==null)Xt(null,null,k,C,U,V,W);else{var J,Q=f[y+0],ne=Q,fe=Q;for(J=0;J<W;++J)ne=fe+(Q=f[y+J])-ne,fe=k[C+J]+(-256&ne?0>ne?0:255:ne)&255,ne=Q,U[V+J]=fe}}function mn(f,y,k,C){var U=y.width,V=y.o;if(t(f!=null&&y!=null),0>k||0>=C||k+C>V)return null;if(!f.Cc){if(f.ga==null){var W;if(f.ga=new Ot,(W=f.ga==null)||(W=y.width*y.o,t(f.Gb.length==0),f.Gb=o(W),f.Uc=0,f.Gb==null?W=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,W=1),W=!W),!W){W=f.ga;var J=f.Fa,Q=f.P,ne=f.qc,fe=f.mb,Pe=f.nb,ie=Q+1,ve=ne-1,Ee=W.l;if(t(J!=null&&fe!=null&&y!=null),rl[0]=null,rl[1]=Xt,rl[2]=Dn,rl[3]=hi,W.ca=fe,W.tb=Pe,W.c=y.width,W.i=y.height,t(0<W.c&&0<W.i),1>=ne)y=0;else if(W.$a=3&J[Q+0],W.Z=J[Q+0]>>2&3,W.Lc=J[Q+0]>>4&3,Q=J[Q+0]>>6&3,0>W.$a||1<W.$a||4<=W.Z||1<W.Lc||Q)y=0;else if(Ee.put=yt,Ee.ac=va,Ee.bc=Ya,Ee.ma=W,Ee.width=y.width,Ee.height=y.height,Ee.Da=y.Da,Ee.v=y.v,Ee.va=y.va,Ee.j=y.j,Ee.o=y.o,W.$a)e:{t(W.$a==1),y=vc();t:for(;;){if(y==null){y=0;break e}if(t(W!=null),W.mc=y,y.c=W.c,y.i=W.i,y.l=W.l,y.l.ma=W,y.l.width=W.c,y.l.height=W.i,y.a=0,le(y.m,J,ie,ve),!_a(W.c,W.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&qo(y.s)?(W.ic=1,J=y.c*y.i,y.Ta=null,y.Ua=0,y.V=o(J),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(W.ic=0,y=yc(y,W.c)),!y))break t;y=1;break e}W.mc=null,y=0}else y=ve>=W.c*W.i;W=!y}if(W)return null;f.ga.Lc!=1?f.Ga=0:C=V-k}t(f.ga!=null),t(k+C<=V);e:{if(y=(J=f.ga).c,V=J.l.o,J.$a==0){if(ie=f.rc,ve=f.Vc,Ee=f.Fa,Q=f.P+1+k*y,ne=f.mb,fe=f.nb+k*y,t(Q<=f.P+f.qc),J.Z!=0)for(t(rl[J.Z]!=null),W=0;W<C;++W)rl[J.Z](ie,ve,Ee,Q,ne,fe,y),ie=ne,ve=fe,fe+=y,Q+=y;else for(W=0;W<C;++W)i(ne,fe,Ee,Q,y),ie=ne,ve=fe,fe+=y,Q+=y;f.rc=ie,f.Vc=ve}else{if(t(J.mc!=null),y=k+C,t((W=J.mc)!=null),t(y<=W.i),W.C>=y)y=1;else if(J.ic||Wo(),J.ic){J=W.V,ie=W.Ba,ve=W.c;var Re=W.i,Se=(Ee=1,Q=W.$/ve,ne=W.$%ve,fe=W.m,Pe=W.s,W.$),Ie=ve*Re,Oe=ve*y,$e=Pe.wc,Fe=Se<Oe?$i(Pe,ne,Q):null;t(Se<=Ie),t(y<=Re),t(qo(Pe));t:for(;;){for(;!fe.h&&Se<Oe;){if(ne&$e||(Fe=$i(Pe,ne,Q)),t(Fe!=null),N(fe),256>(Re=$n(Fe.G[0],Fe.H[0],fe)))J[ie+Se]=Re,++Se,++ne>=ve&&(ne=0,++Q<=y&&!(Q%16)&&zo(W,Q));else{if(!(280>Re)){Ee=0;break t}Re=mo(Re-256,fe);var ct,Je=$n(Fe.G[4],Fe.H[4],fe);if(N(fe),!(Se>=(Je=go(ve,Je=mo(Je,fe)))&&Ie-Se>=Re)){Ee=0;break t}for(ct=0;ct<Re;++ct)J[ie+Se+ct]=J[ie+Se+ct-Je];for(Se+=Re,ne+=Re;ne>=ve;)ne-=ve,++Q<=y&&!(Q%16)&&zo(W,Q);Se<Oe&&ne&$e&&(Fe=$i(Pe,ne,Q))}t(fe.h==ee(fe))}zo(W,Q>y?y:Q);break t}!Ee||fe.h&&Se<Ie?(Ee=0,W.a=fe.h?5:3):W.$=Se,y=Ee}else y=Ho(W,W.V,W.Ba,W.c,W.i,y,Bu);if(!y){C=0;break e}}k+C>=V&&(f.Cc=1),C=1}if(!C)return null;if(f.Cc&&((C=f.ga)!=null&&(C.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+k*U}function wi(f,y,k,C,U,V){for(;0<U--;){var W,J=f,Q=y+(k?1:0),ne=f,fe=y+(k?0:3);for(W=0;W<C;++W){var Pe=ne[fe+4*W];Pe!=255&&(Pe*=32897,J[Q+4*W+0]=J[Q+4*W+0]*Pe>>23,J[Q+4*W+1]=J[Q+4*W+1]*Pe>>23,J[Q+4*W+2]=J[Q+4*W+2]*Pe>>23)}y+=V}}function fi(f,y,k,C,U){for(;0<C--;){var V;for(V=0;V<k;++V){var W=f[y+2*V+0],J=15&(ne=f[y+2*V+1]),Q=4369*J,ne=(240&ne|ne>>4)*Q>>16;f[y+2*V+0]=(240&W|W>>4)*Q>>16&240|(15&W|W<<4)*Q>>16>>4&15,f[y+2*V+1]=240&ne|J}y+=U}}function Gi(f,y,k,C,U,V,W,J){var Q,ne,fe=255;for(ne=0;ne<U;++ne){for(Q=0;Q<C;++Q){var Pe=f[y+Q];V[W+4*Q]=Pe,fe&=Pe}y+=k,W+=J}return fe!=255}function rs(f,y,k,C,U){var V;for(V=0;V<U;++V)k[C+V]=f[y+V]>>8}function Wo(){nh=wi,nS=fi,iS=Gi,rS=rs}function os(f,y,k){O[f]=function(C,U,V,W,J,Q,ne,fe,Pe,ie,ve,Ee,Re,Se,Ie,Oe,$e){var Fe,ct=$e-1>>1,Je=J[Q+0]|ne[fe+0]<<16,Ft=Pe[ie+0]|ve[Ee+0]<<16;t(C!=null);var rt=3*Je+Ft+131074>>2;for(y(C[U+0],255&rt,rt>>16,Re,Se),V!=null&&(rt=3*Ft+Je+131074>>2,y(V[W+0],255&rt,rt>>16,Ie,Oe)),Fe=1;Fe<=ct;++Fe){var Yt=J[Q+Fe]|ne[fe+Fe]<<16,Ei=Pe[ie+Fe]|ve[Ee+Fe]<<16,jt=Je+Yt+Ft+Ei+524296,ot=jt+2*(Yt+Ft)>>3;rt=ot+Je>>1,Je=(jt=jt+2*(Je+Ei)>>3)+Yt>>1,y(C[U+2*Fe-1],255&rt,rt>>16,Re,Se+(2*Fe-1)*k),y(C[U+2*Fe-0],255&Je,Je>>16,Re,Se+(2*Fe-0)*k),V!=null&&(rt=jt+Ft>>1,Je=ot+Ei>>1,y(V[W+2*Fe-1],255&rt,rt>>16,Ie,Oe+(2*Fe-1)*k),y(V[W+2*Fe+0],255&Je,Je>>16,Ie,Oe+(2*Fe+0)*k)),Je=Yt,Ft=Ei}1&$e||(rt=3*Je+Ft+131074>>2,y(C[U+$e-1],255&rt,rt>>16,Re,Se+($e-1)*k),V!=null&&(rt=3*Ft+Je+131074>>2,y(V[W+$e-1],255&rt,rt>>16,Ie,Oe+($e-1)*k)))}}function Hp(){Eo[Ym]=dO,Eo[Jm]=mS,Eo[uS]=pO,Eo[Xm]=gS,Eo[Zm]=vS,Eo[J_]=yS,Eo[dS]=hO,Eo[X_]=mS,Eo[Z_]=gS,Eo[Qm]=vS,Eo[Q_]=yS}function Hu(f){return f&-16384?0>f?0:255:f>>fO}function Ks(f,y){return Hu((19077*f>>8)+(26149*y>>8)-14234)}function Sc(f,y,k){return Hu((19077*f>>8)-(6419*y>>8)-(13320*k>>8)+8708)}function Nc(f,y){return Hu((19077*f>>8)+(33050*y>>8)-17685)}function Ys(f,y,k,C,U){C[U+0]=Ks(f,k),C[U+1]=Sc(f,y,k),C[U+2]=Nc(f,y)}function Ui(f,y,k,C,U){C[U+0]=Nc(f,y),C[U+1]=Sc(f,y,k),C[U+2]=Ks(f,k)}function kc(f,y,k,C,U){var V=Sc(f,y,k);y=V<<3&224|Nc(f,y)>>3,C[U+0]=248&Ks(f,k)|V>>5,C[U+1]=y}function Pc(f,y,k,C,U){var V=240&Nc(f,y)|15;C[U+0]=240&Ks(f,k)|Sc(f,y,k)>>4,C[U+1]=V}function Vp(f,y,k,C,U){C[U+0]=255,Ys(f,y,k,C,U+1)}function Wp(f,y,k,C,U){Ui(f,y,k,C,U),C[U+3]=255}function gr(f,y,k,C,U){Ys(f,y,k,C,U),C[U+3]=255}function as(f,y,k){O[f]=function(C,U,V,W,J,Q,ne,fe,Pe){for(var ie=fe+(-2&Pe)*k;fe!=ie;)y(C[U+0],V[W+0],J[Q+0],ne,fe),y(C[U+1],V[W+0],J[Q+0],ne,fe+k),U+=2,++W,++Q,fe+=2*k;1&Pe&&y(C[U+0],V[W+0],J[Q+0],ne,fe)}}function Vu(f,y,k){return k==0?f==0?y==0?6:5:y==0?4:0:k}function Hm(f,y,k,C,U){switch(f>>>30){case 3:Rc(y,k,C,U,0);break;case 2:wo(y,k,C,U);break;case 1:nn(y,k,C,U)}}function bo(f,y){var k,C,U=y.M,V=y.Nb,W=f.oc,J=f.pc+40,Q=f.oc,ne=f.pc+584,fe=f.oc,Pe=f.pc+600;for(k=0;16>k;++k)W[J+32*k-1]=129;for(k=0;8>k;++k)Q[ne+32*k-1]=129,fe[Pe+32*k-1]=129;for(0<U?W[J-1-32]=Q[ne-1-32]=fe[Pe-1-32]=129:(r(W,J-32-1,127,21),r(Q,ne-32-1,127,9),r(fe,Pe-32-1,127,9)),C=0;C<f.za;++C){var ie=y.ya[y.aa+C];if(0<C){for(k=-1;16>k;++k)i(W,J+32*k-4,W,J+32*k+12,4);for(k=-1;8>k;++k)i(Q,ne+32*k-4,Q,ne+32*k+4,4),i(fe,Pe+32*k-4,fe,Pe+32*k+4,4)}var ve=f.Gd,Ee=f.Hd+C,Re=ie.ad,Se=ie.Hc;if(0<U&&(i(W,J-32,ve[Ee].y,0,16),i(Q,ne-32,ve[Ee].f,0,8),i(fe,Pe-32,ve[Ee].ea,0,8)),ie.Za){var Ie=W,Oe=J-32+16;for(0<U&&(C>=f.za-1?r(Ie,Oe,ve[Ee].y[15],4):i(Ie,Oe,ve[Ee+1].y,0,4)),k=0;4>k;k++)Ie[Oe+128+k]=Ie[Oe+256+k]=Ie[Oe+384+k]=Ie[Oe+0+k];for(k=0;16>k;++k,Se<<=2)Ie=W,Oe=J+bS[k],Ko[ie.Ob[k]](Ie,Oe),Hm(Se,Re,16*+k,Ie,Oe)}else if(Ie=Vu(C,U,ie.Ob[0]),il[Ie](W,J),Se!=0)for(k=0;16>k;++k,Se<<=2)Hm(Se,Re,16*+k,W,J+bS[k]);for(k=ie.Gc,Ie=Vu(C,U,ie.Dd),cs[Ie](Q,ne),cs[Ie](fe,Pe),Se=Re,Ie=Q,Oe=ne,255&(ie=0|k)&&(170&ie?Na(Se,256,Ie,Oe):dn(Se,256,Ie,Oe)),ie=fe,Se=Pe,255&(k>>=8)&&(170&k?Na(Re,320,ie,Se):dn(Re,320,ie,Se)),U<f.Ub-1&&(i(ve[Ee].y,0,W,J+480,16),i(ve[Ee].f,0,Q,ne+224,8),i(ve[Ee].ea,0,fe,Pe+224,8)),k=8*V*f.B,ve=f.sa,Ee=f.ta+16*C+16*V*f.R,Re=f.qa,ie=f.ra+8*C+k,Se=f.Ha,Ie=f.Ia+8*C+k,k=0;16>k;++k)i(ve,Ee+k*f.R,W,J+32*k,16);for(k=0;8>k;++k)i(Re,ie+k*f.B,Q,ne+32*k,8),i(Se,Ie+k*f.B,fe,Pe+32*k,8)}}function Ac(f,y,k,C,U,V,W,J,Q){var ne=[0],fe=[0],Pe=0,ie=Q!=null?Q.kd:0,ve=Q??new Be;if(f==null||12>k)return 7;ve.data=f,ve.w=y,ve.ha=k,y=[y],k=[k],ve.gb=[ve.gb];e:{var Ee=y,Re=k,Se=ve.gb;if(t(f!=null),t(Re!=null),t(Se!=null),Se[0]=0,12<=Re[0]&&!n(f,Ee[0],"RIFF")){if(n(f,Ee[0]+8,"WEBP")){Se=3;break e}var Ie=Le(f,Ee[0]+4);if(12>Ie||4294967286<Ie){Se=3;break e}if(ie&&Ie>Re[0]-8){Se=7;break e}Se[0]=Ie,Ee[0]+=12,Re[0]-=12}Se=0}if(Se!=0)return Se;for(Ie=0<ve.gb[0],k=k[0];;){e:{var Oe=f;Re=y,Se=k;var $e=ne,Fe=fe,ct=Ee=[0];if((rt=Pe=[Pe])[0]=0,8>Se[0])Se=7;else{if(!n(Oe,Re[0],"VP8X")){if(Le(Oe,Re[0]+4)!=10){Se=3;break e}if(18>Se[0]){Se=7;break e}var Je=Le(Oe,Re[0]+8),Ft=1+Ae(Oe,Re[0]+12);if(2147483648<=Ft*(Oe=1+Ae(Oe,Re[0]+15))){Se=3;break e}ct!=null&&(ct[0]=Je),$e!=null&&($e[0]=Ft),Fe!=null&&(Fe[0]=Oe),Re[0]+=18,Se[0]-=18,rt[0]=1}Se=0}}if(Pe=Pe[0],Ee=Ee[0],Se!=0)return Se;if(Re=!!(2&Ee),!Ie&&Pe)return 3;if(V!=null&&(V[0]=!!(16&Ee)),W!=null&&(W[0]=Re),J!=null&&(J[0]=0),W=ne[0],Ee=fe[0],Pe&&Re&&Q==null){Se=0;break}if(4>k){Se=7;break}if(Ie&&Pe||!Ie&&!Pe&&!n(f,y[0],"ALPH")){k=[k],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{Je=f,Se=y,Ie=k;var rt=ve.gb;$e=ve.na,Fe=ve.P,ct=ve.Sa,Ft=22,t(Je!=null),t(Ie!=null),Oe=Se[0];var Yt=Ie[0];for(t($e!=null),t(ct!=null),$e[0]=null,Fe[0]=null,ct[0]=0;;){if(Se[0]=Oe,Ie[0]=Yt,8>Yt){Se=7;break e}var Ei=Le(Je,Oe+4);if(4294967286<Ei){Se=3;break e}var jt=8+Ei+1&-2;if(Ft+=jt,0<rt&&Ft>rt){Se=3;break e}if(!n(Je,Oe,"VP8 ")||!n(Je,Oe,"VP8L")){Se=0;break e}if(Yt[0]<jt){Se=7;break e}n(Je,Oe,"ALPH")||($e[0]=Je,Fe[0]=Oe+8,ct[0]=Ei),Oe+=jt,Yt-=jt}}if(k=k[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],Se!=0)break}k=[k],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(rt=f,Se=y,Ie=k,$e=ve.gb[0],Fe=ve.Ja,ct=ve.xa,Je=Se[0],Oe=!n(rt,Je,"VP8 "),Ft=!n(rt,Je,"VP8L"),t(rt!=null),t(Ie!=null),t(Fe!=null),t(ct!=null),8>Ie[0])Se=7;else{if(Oe||Ft){if(rt=Le(rt,Je+4),12<=$e&&rt>$e-12){Se=3;break e}if(ie&&rt>Ie[0]-8){Se=7;break e}Fe[0]=rt,Se[0]+=8,Ie[0]-=8,ct[0]=Ft}else ct[0]=5<=Ie[0]&&rt[Je+0]==47&&!(rt[Je+4]>>5),Fe[0]=Ie[0];Se=0}if(k=k[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],y=y[0],Se!=0)break;if(4294967286<ve.Ja)return 3;if(J==null||Re||(J[0]=ve.xa?2:1),W=[W],Ee=[Ee],ve.xa){if(5>k){Se=7;break}J=W,ie=Ee,Re=V,f==null||5>k?f=0:5<=k&&f[y+0]==47&&!(f[y+4]>>5)?(Ie=[0],rt=[0],$e=[0],le(Fe=new z,f,y,k),Ja(Fe,Ie,rt,$e)?(J!=null&&(J[0]=Ie[0]),ie!=null&&(ie[0]=rt[0]),Re!=null&&(Re[0]=$e[0]),f=1):f=0):f=0}else{if(10>k){Se=7;break}J=Ee,f==null||10>k||!Dm(f,y+3,k-3)?f=0:(ie=f[y+0]|f[y+1]<<8|f[y+2]<<16,Re=16383&(f[y+7]<<8|f[y+6]),f=16383&(f[y+9]<<8|f[y+8]),1&ie||3<(ie>>1&7)||!(ie>>4&1)||ie>>5>=ve.Ja||!Re||!f?f=0:(W&&(W[0]=Re),J&&(J[0]=f),f=1))}if(!f||(W=W[0],Ee=Ee[0],Pe&&(ne[0]!=W||fe[0]!=Ee)))return 3;Q!=null&&(Q[0]=ve,Q.offset=y-Q.w,t(4294967286>y-Q.w),t(Q.offset==Q.ha-k));break}return Se==0||Se==7&&Pe&&Q==null?(V!=null&&(V[0]|=ve.na!=null&&0<ve.na.length),C!=null&&(C[0]=W),U!=null&&(U[0]=Ee),0):Se}function Kp(f,y,k){var C=y.width,U=y.height,V=0,W=0,J=C,Q=U;if(y.Da=f!=null&&0<f.Da,y.Da&&(J=f.cd,Q=f.bd,V=f.v,W=f.j,11>k||(V&=-2,W&=-2),0>V||0>W||0>=J||0>=Q||V+J>C||W+Q>U))return 0;if(y.v=V,y.j=W,y.va=V+J,y.o=W+Q,y.U=J,y.T=Q,y.da=f!=null&&0<f.da,y.da){if(!oe(J,Q,k=[f.ib],V=[f.hb]))return 0;y.ib=k[0],y.hb=V[0]}return y.ob=f!=null&&f.ob,y.Kb=f==null||!f.Sd,y.da&&(y.ob=y.ib<3*C/4&&y.hb<3*U/4,y.Kb=0),1}function Yp(f){if(f==null)return 2;if(11>f.S){var y=f.f.RGBA;y.fb+=(f.height-1)*y.A,y.A=-y.A}else y=f.f.kb,f=f.height,y.O+=(f-1)*y.fa,y.fa=-y.fa,y.N+=(f-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(f-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(f-1)*y.lb,y.lb=-y.lb);return 0}function Js(f,y,k,C){if(C==null||0>=f||0>=y)return 2;if(k!=null){if(k.Da){var U=k.cd,V=k.bd,W=-2&k.v,J=-2&k.j;if(0>W||0>J||0>=U||0>=V||W+U>f||J+V>y)return 2;f=U,y=V}if(k.da){if(!oe(f,y,U=[k.ib],V=[k.hb]))return 2;f=U[0],y=V[0]}}C.width=f,C.height=y;e:{var Q=C.width,ne=C.height;if(f=C.S,0>=Q||0>=ne||!(f>=Ym&&13>f))f=2;else{if(0>=C.Rd&&C.sd==null){W=V=U=y=0;var fe=(J=Q*wS[f])*ne;if(11>f||(V=(ne+1)/2*(y=(Q+1)/2),f==12&&(W=(U=Q)*ne)),(ne=o(fe+2*V+W))==null){f=1;break e}C.sd=ne,11>f?((Q=C.f.RGBA).eb=ne,Q.fb=0,Q.A=J,Q.size=fe):((Q=C.f.kb).y=ne,Q.O=0,Q.fa=J,Q.Fd=fe,Q.f=ne,Q.N=0+fe,Q.Ab=y,Q.Cd=V,Q.ea=ne,Q.W=0+fe+V,Q.Db=y,Q.Ed=V,f==12&&(Q.F=ne,Q.J=0+fe+2*V),Q.Tc=W,Q.lb=U)}if(y=1,U=C.S,V=C.width,W=C.height,U>=Ym&&13>U)if(11>U)f=C.f.RGBA,y&=(J=Math.abs(f.A))*(W-1)+V<=f.size,y&=J>=V*wS[U],y&=f.eb!=null;else{f=C.f.kb,J=(V+1)/2,fe=(W+1)/2,Q=Math.abs(f.fa),ne=Math.abs(f.Ab);var Pe=Math.abs(f.Db),ie=Math.abs(f.lb),ve=ie*(W-1)+V;y&=Q*(W-1)+V<=f.Fd,y&=ne*(fe-1)+J<=f.Cd,y=(y&=Pe*(fe-1)+J<=f.Ed)&Q>=V&ne>=J&Pe>=J,y&=f.y!=null,y&=f.f!=null,y&=f.ea!=null,U==12&&(y&=ie>=V,y&=ve<=f.Tc,y&=f.F!=null)}else y=0;f=y?0:2}}return f!=0||k!=null&&k.fd&&(f=Yp(C)),f}var Tc=64,Ur=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qr=24,Xs=32,ss=8,Zs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];se("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(f){return f},O.Predictor2=function(f,y,k){return y[k+0]},O.Predictor3=function(f,y,k){return y[k+1]},O.Predictor4=function(f,y,k){return y[k-1]},O.Predictor5=function(f,y,k){return Me(Me(f,y[k+1]),y[k+0])},O.Predictor6=function(f,y,k){return Me(f,y[k-1])},O.Predictor7=function(f,y,k){return Me(f,y[k+0])},O.Predictor8=function(f,y,k){return Me(y[k-1],y[k+0])},O.Predictor9=function(f,y,k){return Me(y[k+0],y[k+1])},O.Predictor10=function(f,y,k){return Me(Me(f,y[k-1]),Me(y[k+0],y[k+1]))},O.Predictor11=function(f,y,k){var C=y[k+0];return 0>=nt(C>>24&255,f>>24&255,(y=y[k-1])>>24&255)+nt(C>>16&255,f>>16&255,y>>16&255)+nt(C>>8&255,f>>8&255,y>>8&255)+nt(255&C,255&f,255&y)?C:f},O.Predictor12=function(f,y,k){var C=y[k+0];return(Ce((f>>24&255)+(C>>24&255)-((y=y[k-1])>>24&255))<<24|Ce((f>>16&255)+(C>>16&255)-(y>>16&255))<<16|Ce((f>>8&255)+(C>>8&255)-(y>>8&255))<<8|Ce((255&f)+(255&C)-(255&y)))>>>0},O.Predictor13=function(f,y,k){var C=y[k-1];return(qe((f=Me(f,y[k+0]))>>24&255,C>>24&255)<<24|qe(f>>16&255,C>>16&255)<<16|qe(f>>8&255,C>>8&255)<<8|qe(255&f,255&C))>>>0};var Jp=O.PredictorAdd0;O.PredictorAdd1=dt,se("Predictor2","PredictorAdd2"),se("Predictor3","PredictorAdd3"),se("Predictor4","PredictorAdd4"),se("Predictor5","PredictorAdd5"),se("Predictor6","PredictorAdd6"),se("Predictor7","PredictorAdd7"),se("Predictor8","PredictorAdd8"),se("Predictor9","PredictorAdd9"),se("Predictor10","PredictorAdd10"),se("Predictor11","PredictorAdd11"),se("Predictor12","PredictorAdd12"),se("Predictor13","PredictorAdd13");var Wu=O.PredictorAdd2;Xe("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),Xe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Zn,Vm=O.ColorIndexInverseTransform,Ea=O.MapARGB,Sa=O.VP8LColorIndexInverseTransformAlpha,Xp=O.MapAlpha,Zp=O.VP8LPredictorsAdd=[];Zp.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Qp,eh,Qs,el,tl,Cc,nl,Rc,wo,Na,nn,dn,Qn,xi,ls,th,Ku,Wm,JE,XE,ZE,QE,eS,tS,nh,nS,iS,rS,oS=o(511),aS=o(2041),sS=o(225),lS=o(767),cS=0,Y_=aS,Km=sS,zr=lS,xo=oS,Ym=0,Jm=1,uS=2,Xm=3,Zm=4,J_=5,dS=6,X_=7,Z_=8,Qm=9,Q_=10,XL=[2,3,7],ZL=[3,3,11],pS=[280,256,256,256,40],QL=[0,1,1,1,0],eO=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],tO=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],nO=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],iO=8,e2=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],t2=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ih=null,rO=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],oO=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],hS=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],aO=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],sO=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lO=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cO=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],il=[],Ko=[],cs=[],uO=1,fS=2,rl=[],Eo=[];os("UpsampleRgbLinePair",Ys,3),os("UpsampleBgrLinePair",Ui,3),os("UpsampleRgbaLinePair",gr,4),os("UpsampleBgraLinePair",Wp,4),os("UpsampleArgbLinePair",Vp,4),os("UpsampleRgba4444LinePair",Pc,2),os("UpsampleRgb565LinePair",kc,2);var dO=O.UpsampleRgbLinePair,pO=O.UpsampleBgrLinePair,mS=O.UpsampleRgbaLinePair,gS=O.UpsampleBgraLinePair,vS=O.UpsampleArgbLinePair,yS=O.UpsampleRgba4444LinePair,hO=O.UpsampleRgb565LinePair,eg=16,tg=1<<eg-1,rh=-227,n2=482,fO=6,_S=0,mO=o(256),gO=o(256),vO=o(256),yO=o(256),_O=o(n2-rh),bO=o(n2-rh);as("YuvToRgbRow",Ys,3),as("YuvToBgrRow",Ui,3),as("YuvToRgbaRow",gr,4),as("YuvToBgraRow",Wp,4),as("YuvToArgbRow",Vp,4),as("YuvToRgba4444Row",Pc,2),as("YuvToRgb565Row",kc,2);var bS=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ng=[0,2,8],wO=[8,7,6,4,4,2,2,2,1,1,1,1],xO=1;this.WebPDecodeRGBA=function(f,y,k,C,U){var V=Jm,W=new De,J=new Ht;W.ba=J,J.S=V,J.width=[J.width],J.height=[J.height];var Q=J.width,ne=J.height,fe=new vt;if(fe==null||f==null)var Pe=2;else t(fe!=null),Pe=Ac(f,y,k,fe.width,fe.height,fe.Pd,fe.Qd,fe.format,null);if(Pe!=0?Q=0:(Q!=null&&(Q[0]=fe.width[0]),ne!=null&&(ne[0]=fe.height[0]),Q=1),Q){J.width=J.width[0],J.height=J.height[0],C!=null&&(C[0]=J.width),U!=null&&(U[0]=J.height);e:{if(C=new $u,(U=new Be).data=f,U.w=y,U.ha=k,U.kd=1,y=[0],t(U!=null),((f=Ac(U.data,U.w,U.ha,null,null,null,y,null,U))==0||f==7)&&y[0]&&(f=4),(y=f)==0){if(t(W!=null),C.data=U.data,C.w=U.w+U.offset,C.ha=U.ha-U.offset,C.put=yt,C.ac=va,C.bc=Ya,C.ma=W,U.xa){if((f=vc())==null){W=1;break e}if(function(ie,ve){var Ee=[0],Re=[0],Se=[0];t:for(;;){if(ie==null)return 0;if(ve==null)return ie.a=2,0;if(ie.l=ve,ie.a=0,le(ie.m,ve.data,ve.w,ve.ha),!Ja(ie.m,Ee,Re,Se)){ie.a=3;break t}if(ie.xb=fS,ve.width=Ee[0],ve.height=Re[0],!_a(Ee[0],Re[0],1,ie,null))break t;return 1}return t(ie.a!=0),0}(f,C)){if(C=(y=Js(C.width,C.height,W.Oa,W.ba))==0){t:{C=f;n:for(;;){if(C==null){C=0;break t}if(t(C.s.yc!=null),t(C.s.Ya!=null),t(0<C.s.Wb),t((k=C.l)!=null),t((U=k.ma)!=null),C.xb!=0){if(C.ca=U.ba,C.tb=U.tb,t(C.ca!=null),!Kp(U.Oa,k,Xm)){C.a=2;break n}if(!yc(C,k.width)||k.da)break n;if((k.da||xt(C.ca.S))&&Wo(),11>C.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),C.ca.f.kb.F!=null&&Wo()),C.Pb&&0<C.s.ua&&C.s.vb.X==null&&!q(C.s.vb,C.s.Wa.Xa)){C.a=1;break n}C.xb=0}if(!Ho(C,C.V,C.Ba,C.c,C.i,k.o,Ws))break n;U.Dc=C.Ma,C=1;break t}t(C.a!=0),C=0}C=!C}C&&(y=f.a)}else y=f.a}else{if((f=new D_)==null){W=1;break e}if(f.Fa=U.na,f.P=U.P,f.qc=U.Sa,wa(f,C)){if((y=Js(C.width,C.height,W.Oa,W.ba))==0){if(f.Aa=0,k=W.Oa,t((U=f)!=null),k!=null){if(0<(Q=0>(Q=k.Md)?0:100<Q?255:255*Q/100)){for(ne=fe=0;4>ne;++ne)12>(Pe=U.pb[ne]).lc&&(Pe.ia=Q*wO[0>Pe.lc?0:Pe.lc]>>3),fe|=Pe.ia;fe&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=k.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}(function(ie,ve){if(ie==null)return 0;if(ve==null)return pi(ie,2,"NULL VP8Io parameter in VP8Decode().");if(!ie.cb&&!wa(ie,ve))return 0;if(t(ie.cb),ve.ac==null||ve.ac(ve)){ve.ob&&(ie.L=0);var Ee=ng[ie.L];if(ie.L==2?(ie.yb=0,ie.zb=0):(ie.yb=ve.v-Ee>>4,ie.zb=ve.j-Ee>>4,0>ie.yb&&(ie.yb=0),0>ie.zb&&(ie.zb=0)),ie.Va=ve.o+15+Ee>>4,ie.Hb=ve.va+15+Ee>>4,ie.Hb>ie.za&&(ie.Hb=ie.za),ie.Va>ie.Ub&&(ie.Va=ie.Ub),0<ie.L){var Re=ie.ed;for(Ee=0;4>Ee;++Ee){var Se;if(ie.Qa.Cb){var Ie=ie.Qa.Lb[Ee];ie.Qa.Fb||(Ie+=Re.Tb)}else Ie=Re.Tb;for(Se=0;1>=Se;++Se){var Oe=ie.gd[Ee][Se],$e=Ie;if(Re.Pc&&($e+=Re.vd[0],Se&&($e+=Re.od[0])),0<($e=0>$e?0:63<$e?63:$e)){var Fe=$e;0<Re.wb&&(Fe=4<Re.wb?Fe>>2:Fe>>1)>9-Re.wb&&(Fe=9-Re.wb),1>Fe&&(Fe=1),Oe.dd=Fe,Oe.tc=2*$e+Fe,Oe.ld=40<=$e?2:15<=$e?1:0}else Oe.tc=0;Oe.La=Se}}}Ee=0}else pi(ie,6,"Frame setup failed"),Ee=ie.a;if(Ee=Ee==0){if(Ee){ie.$c=0,0<ie.Aa||(ie.Ic=xO);t:{Ee=ie.Ic,Re=4*(Fe=ie.za);var ct=32*Fe,Je=Fe+1,Ft=0<ie.L?Fe*(0<ie.Aa?2:1):0,rt=(ie.Aa==2?2:1)*Fe;if((Oe=Re+832+(Se=3*(16*Ee+ng[ie.L])/2*ct)+(Ie=ie.Fa!=null&&0<ie.Fa.length?ie.Kc.c*ie.Kc.i:0))!=Oe)Ee=0;else{if(Oe>ie.Vb){if(ie.Vb=0,ie.Ec=o(Oe),ie.Fc=0,ie.Ec==null){Ee=pi(ie,1,"no memory during frame initialization.");break t}ie.Vb=Oe}Oe=ie.Ec,$e=ie.Fc,ie.Ac=Oe,ie.Bc=$e,$e+=Re,ie.Gd=a(ct,Mm),ie.Hd=0,ie.rb=a(Je+1,Lp),ie.sb=1,ie.wa=Ft?a(Ft,yo):null,ie.Y=0,ie.D.Nb=0,ie.D.wa=ie.wa,ie.D.Y=ie.Y,0<ie.Aa&&(ie.D.Y+=Fe),t(!0),ie.oc=Oe,ie.pc=$e,$e+=832,ie.ya=a(rt,Op),ie.aa=0,ie.D.ya=ie.ya,ie.D.aa=ie.aa,ie.Aa==2&&(ie.D.aa+=Fe),ie.R=16*Fe,ie.B=8*Fe,Fe=(ct=ng[ie.L])*ie.R,ct=ct/2*ie.B,ie.sa=Oe,ie.ta=$e+Fe,ie.qa=ie.sa,ie.ra=ie.ta+16*Ee*ie.R+ct,ie.Ha=ie.qa,ie.Ia=ie.ra+8*Ee*ie.B+ct,ie.$c=0,$e+=Se,ie.mb=Ie?Oe:null,ie.nb=Ie?$e:null,t($e+Ie<=ie.Fc+ie.Vb),Lm(ie),r(ie.Ac,ie.Bc,0,Re),Ee=1}}if(Ee){if(ve.ka=0,ve.y=ie.sa,ve.O=ie.ta,ve.f=ie.qa,ve.N=ie.ra,ve.ea=ie.Ha,ve.Vd=ie.Ia,ve.fa=ie.R,ve.Rc=ie.B,ve.F=null,ve.J=0,!cS){for(Ee=-255;255>=Ee;++Ee)oS[255+Ee]=0>Ee?-Ee:Ee;for(Ee=-1020;1020>=Ee;++Ee)aS[1020+Ee]=-128>Ee?-128:127<Ee?127:Ee;for(Ee=-112;112>=Ee;++Ee)sS[112+Ee]=-16>Ee?-16:15<Ee?15:Ee;for(Ee=-255;510>=Ee;++Ee)lS[255+Ee]=0>Ee?0:255<Ee?255:Ee;cS=1}nl=Uu,Rc=O_,Na=xa,nn=Bm,dn=Fm,wo=L_,Qn=qm,xi=Ec,ls=G,th=re,Ku=zm,Wm=S,JE=de,XE=xe,ZE=xc,QE=zp,eS=Gm,tS=Um,Ko[0]=z_,Ko[1]=B_,Ko[2]=U_,Ko[3]=q_,Ko[4]=Za,Ko[5]=H_,Ko[6]=Qa,Ko[7]=V_,Ko[8]=jp,Ko[9]=qu,il[0]=$_,il[1]=j_,il[2]=Bp,il[3]=jm,il[4]=bc,il[5]=Fp,il[6]=G_,cs[0]=K_,cs[1]=F_,cs[2]=wc,cs[3]=W_,cs[4]=Gp,cs[5]=$p,cs[6]=$m,Ee=1}else Ee=0}Ee&&(Ee=function(Yt,Ei){for(Yt.M=0;Yt.M<Yt.Va;++Yt.M){var jt,ot=Yt.Jc[Yt.M&Yt.Xb],ze=Yt.m,ei=Yt;for(jt=0;jt<ei.za;++jt){var Lt=ze,Jt=ei,wn=Jt.Ac,qi=Jt.Bc+4*jt,vr=Jt.zc,Gn=Jt.ya[Jt.aa+jt];if(Jt.Qa.Bb?Gn.$b=Y(Lt,Jt.Pa.jb[0])?2+Y(Lt,Jt.Pa.jb[2]):Y(Lt,Jt.Pa.jb[1]):Gn.$b=0,Jt.kc&&(Gn.Ad=Y(Lt,Jt.Bd)),Gn.Za=!Y(Lt,145)+0,Gn.Za){var rr=Gn.Ob,yr=0;for(Jt=0;4>Jt;++Jt){var Si,Zt=vr[0+Jt];for(Si=0;4>Si;++Si){Zt=sO[wn[qi+Si]][Zt];for(var an=hS[Y(Lt,Zt[0])];0<an;)an=hS[2*an+Y(Lt,Zt[an])];Zt=-an,wn[qi+Si]=Zt}i(rr,yr,wn,qi,4),yr+=4,vr[0+Jt]=Zt}}else Zt=Y(Lt,156)?Y(Lt,128)?1:3:Y(Lt,163)?2:0,Gn.Ob[0]=Zt,r(wn,qi,Zt,4),r(vr,0,Zt,4);Gn.Dd=Y(Lt,142)?Y(Lt,114)?Y(Lt,183)?1:3:2:0}if(ei.m.Ka)return pi(Yt,7,"Premature end-of-partition0 encountered.");for(;Yt.ja<Yt.za;++Yt.ja){if(ei=ot,Lt=(ze=Yt).rb[ze.sb-1],wn=ze.rb[ze.sb+ze.ja],jt=ze.ya[ze.aa+ze.ja],qi=ze.kc?jt.Ad:0)Lt.la=wn.la=0,jt.Za||(Lt.Na=wn.Na=0),jt.Hc=0,jt.Gc=0,jt.ia=0;else{var Un,sn;if(Lt=wn,wn=ei,qi=ze.Pa.Xc,vr=ze.ya[ze.aa+ze.ja],Gn=ze.pb[vr.$b],Jt=vr.ad,rr=0,yr=ze.rb[ze.sb-1],Zt=Si=0,r(Jt,rr,0,384),vr.Za)var zi=0,Yo=qi[3];else{an=o(16);var ti=Lt.Na+yr.Na;if(ti=ih(wn,qi[1],ti,Gn.Eb,0,an,0),Lt.Na=yr.Na=(0<ti)+0,1<ti)nl(an,0,Jt,rr);else{var Pr=an[0]+3>>3;for(an=0;256>an;an+=16)Jt[rr+an]=Pr}zi=1,Yo=qi[0]}var pn=15&Lt.la,Ni=15&yr.la;for(an=0;4>an;++an){var Hr=1&Ni;for(Pr=sn=0;4>Pr;++Pr)pn=pn>>1|(Hr=(ti=ih(wn,Yo,ti=Hr+(1&pn),Gn.Sc,zi,Jt,rr))>zi)<<7,sn=sn<<2|(3<ti?3:1<ti?2:Jt[rr+0]!=0),rr+=16;pn>>=4,Ni=Ni>>1|Hr<<7,Si=(Si<<8|sn)>>>0}for(Yo=pn,zi=Ni>>4,Un=0;4>Un;Un+=2){for(sn=0,pn=Lt.la>>4+Un,Ni=yr.la>>4+Un,an=0;2>an;++an){for(Hr=1&Ni,Pr=0;2>Pr;++Pr)ti=Hr+(1&pn),pn=pn>>1|(Hr=0<(ti=ih(wn,qi[2],ti,Gn.Qc,0,Jt,rr)))<<3,sn=sn<<2|(3<ti?3:1<ti?2:Jt[rr+0]!=0),rr+=16;pn>>=2,Ni=Ni>>1|Hr<<5}Zt|=sn<<4*Un,Yo|=pn<<4<<Un,zi|=(240&Ni)<<Un}Lt.la=Yo,yr.la=zi,vr.Hc=Si,vr.Gc=Zt,vr.ia=43690&Zt?0:Gn.ia,qi=!(Si|Zt)}if(0<ze.L&&(ze.wa[ze.Y+ze.ja]=ze.gd[jt.$b][jt.Za],ze.wa[ze.Y+ze.ja].La|=!qi),ei.Ka)return pi(Yt,7,"Premature end-of-file encountered.")}if(Lm(Yt),ze=Ei,ei=1,jt=(ot=Yt).D,Lt=0<ot.L&&ot.M>=ot.zb&&ot.M<=ot.Va,ot.Aa==0)t:{if(jt.M=ot.M,jt.uc=Lt,bo(ot,jt),ei=1,jt=(sn=ot.D).Nb,Lt=(Zt=ng[ot.L])*ot.R,wn=Zt/2*ot.B,an=16*jt*ot.R,Pr=8*jt*ot.B,qi=ot.sa,vr=ot.ta-Lt+an,Gn=ot.qa,Jt=ot.ra-wn+Pr,rr=ot.Ha,yr=ot.Ia-wn+Pr,Ni=(pn=sn.M)==0,Si=pn>=ot.Va-1,ot.Aa==2&&bo(ot,sn),sn.uc)for(Hr=(ti=ot).D.M,t(ti.D.uc),sn=ti.yb;sn<ti.Hb;++sn){zi=sn,Yo=Hr;var _r=(Vr=(Hi=ti).D).Nb;Un=Hi.R;var Vr=Vr.wa[Vr.Y+zi],Wr=Hi.sa,Ar=Hi.ta+16*_r*Un+16*zi,Kr=Vr.dd,gn=Vr.tc;if(gn!=0)if(t(3<=gn),Hi.L==1)0<zi&&QE(Wr,Ar,Un,gn+4),Vr.La&&tS(Wr,Ar,Un,gn),0<Yo&&ZE(Wr,Ar,Un,gn+4),Vr.La&&eS(Wr,Ar,Un,gn);else{var Yr=Hi.B,Jo=Hi.qa,Mc=Hi.ra+8*_r*Yr+8*zi,us=Hi.Ha,Hi=Hi.Ia+8*_r*Yr+8*zi;_r=Vr.ld,0<zi&&(xi(Wr,Ar,Un,gn+4,Kr,_r),th(Jo,Mc,us,Hi,Yr,gn+4,Kr,_r)),Vr.La&&(Wm(Wr,Ar,Un,gn,Kr,_r),XE(Jo,Mc,us,Hi,Yr,gn,Kr,_r)),0<Yo&&(Qn(Wr,Ar,Un,gn+4,Kr,_r),ls(Jo,Mc,us,Hi,Yr,gn+4,Kr,_r)),Vr.La&&(Ku(Wr,Ar,Un,gn,Kr,_r),JE(Jo,Mc,us,Hi,Yr,gn,Kr,_r))}}if(ot.ia&&alert("todo:DitherRow"),ze.put!=null){if(sn=16*pn,pn=16*(pn+1),Ni?(ze.y=ot.sa,ze.O=ot.ta+an,ze.f=ot.qa,ze.N=ot.ra+Pr,ze.ea=ot.Ha,ze.W=ot.Ia+Pr):(sn-=Zt,ze.y=qi,ze.O=vr,ze.f=Gn,ze.N=Jt,ze.ea=rr,ze.W=yr),Si||(pn-=Zt),pn>ze.o&&(pn=ze.o),ze.F=null,ze.J=null,ot.Fa!=null&&0<ot.Fa.length&&sn<pn&&(ze.J=mn(ot,ze,sn,pn-sn),ze.F=ot.mb,ze.F==null&&ze.F.length==0)){ei=pi(ot,3,"Could not decode alpha data.");break t}sn<ze.j&&(Zt=ze.j-sn,sn=ze.j,t(!(1&Zt)),ze.O+=ot.R*Zt,ze.N+=ot.B*(Zt>>1),ze.W+=ot.B*(Zt>>1),ze.F!=null&&(ze.J+=ze.width*Zt)),sn<pn&&(ze.O+=ze.v,ze.N+=ze.v>>1,ze.W+=ze.v>>1,ze.F!=null&&(ze.J+=ze.v),ze.ka=sn-ze.j,ze.U=ze.va-ze.v,ze.T=pn-sn,ei=ze.put(ze))}jt+1!=ot.Ic||Si||(i(ot.sa,ot.ta-Lt,qi,vr+16*ot.R,Lt),i(ot.qa,ot.ra-wn,Gn,Jt+8*ot.B,wn),i(ot.Ha,ot.Ia-wn,rr,yr+8*ot.B,wn))}if(!ei)return pi(Yt,6,"Output aborted.")}return 1}(ie,ve)),ve.bc!=null&&ve.bc(ve),Ee&=1}return Ee?(ie.cb=0,Ee):0})(f,C)||(y=f.a)}}else y=f.a}y==0&&W.Oa!=null&&W.Oa.fd&&(y=Yp(W.ba))}W=y}V=W!=0?null:11>V?J.f.RGBA.eb:J.f.kb.y}else V=null;return V};var wS=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(O,D){for(var A="",L=0;L<4;L++)A+=String.fromCharCode(O[D++]);return A}function u(O,D){return O[D+0]|O[D+1]<<8}function d(O,D){return(O[D+0]|O[D+1]<<8|O[D+2]<<16)>>>0}function h(O,D){return(O[D+0]|O[D+1]<<8|O[D+2]<<16|O[D+3]<<24)>>>0}new l;var p=[0],m=[0],v=[],_=new l,b=e,E=function(O,D){var A={},L=0,$=!1,Z=0,me=0;if(A.frames=[],!function(I,z){for(var K=0;K<4;K++)if(I[z+K]!="RIFF".charCodeAt(K))return!0;return!1}(O,D)){for(h(O,D+=4),D+=8;D<O.length;){var ge=c(O,D),pe=h(O,D+=4);D+=4;var te=pe+(1&pe);switch(ge){case"VP8 ":case"VP8L":A.frames[L]===void 0&&(A.frames[L]={}),(we=A.frames[L]).src_off=$?me:D-8,we.src_size=Z+pe+8,L++,$&&($=!1,Z=0,me=0);break;case"VP8X":(we=A.header={}).feature_flags=O[D];var le=D+4;we.canvas_width=1+d(O,le),le+=3,we.canvas_height=1+d(O,le),le+=3;break;case"ALPH":$=!0,Z=te+8,me=D-8;break;case"ANIM":(we=A.header).bgcolor=h(O,D),le=D+4,we.loop_count=u(O,le),le+=2;break;case"ANMF":var ye,we;(we=A.frames[L]={}).offset_x=2*d(O,D),D+=3,we.offset_y=2*d(O,D),D+=3,we.width=1+d(O,D),D+=3,we.height=1+d(O,D),D+=3,we.duration=d(O,D),D+=3,ye=O[D++],we.dispose=1&ye,we.blend=ye>>1&1}ge!="ANMF"&&(D+=te)}return A}}(b,0);E.response=b,E.rgbaoutput=!0,E.dataurl=!1;var w=E.header?E.header:null,x=E.frames?E.frames:null;if(w){w.loop_counter=w.loop_count,p=[w.canvas_height],m=[w.canvas_width];for(var M=0;M<x.length&&x[M].blend!=0;M++);}var B=x[0],H=_.WebPDecodeRGBA(b,B.src_off,B.src_size,m,p);B.rgba=H,B.imgwidth=m[0],B.imgheight=p[0];for(var R=0;R<m[0]*p[0]*4;R++)v[R]=H[R];return this.width=m,this.height=p,this.data=v,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function CU(){var e,t=this.internal.__metadata__.metadata,n=unescape(encodeURIComponent(t));e=this.internal.__metadata__.rawXml?n:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+e.length+" >>"),this.internal.write("stream"),this.internal.write(e),this.internal.write("endstream"),this.internal.write("endobj")}function RU(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(e){var t,n,i,r,o,a,s,l,c,u=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new l,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new a,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new a,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=I;Object.defineProperty(this,"pdf",{get:function(){return z}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(q){K=!!q}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(q){ee=!!q}});var T=0;Object.defineProperty(this,"posX",{get:function(){return T},set:function(q){isNaN(q)||(T=q)}});var N=0;Object.defineProperty(this,"posY",{get:function(){return N},set:function(q){isNaN(q)||(N=q)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(q){var Te;typeof q=="number"?Te=[q,q,q,q]:((Te=new Array(4))[0]=q[0],Te[1]=q.length>=2?q[1]:Te[0],Te[2]=q.length>=3?q[2]:Te[0],Te[3]=q.length>=4?q[3]:Te[1]),c.margin=Te}});var P=!1;Object.defineProperty(this,"autoPaging",{get:function(){return P},set:function(q){P=q}});var j=0;Object.defineProperty(this,"lastBreak",{get:function(){return j},set:function(q){j=q}});var Y=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Y},set:function(q){Y=q}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(q){q instanceof u&&(c=q)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(q){c.path=q}});var ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return ae},set:function(q){ae=q}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(q){var Te;Te=h(q),this.ctx.fillStyle=Te.style,this.ctx.isFillTransparent=Te.a===0,this.ctx.fillOpacity=Te.a,this.pdf.setFillColor(Te.r,Te.g,Te.b,{a:Te.a}),this.pdf.setTextColor(Te.r,Te.g,Te.b,{a:Te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(q){var Te=h(q);this.ctx.strokeStyle=Te.style,this.ctx.isStrokeTransparent=Te.a===0,this.ctx.strokeOpacity=Te.a,Te.a===0?this.pdf.setDrawColor(255,255,255):(Te.a,this.pdf.setDrawColor(Te.r,Te.g,Te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(q){["butt","round","square"].indexOf(q)!==-1&&(this.ctx.lineCap=q,this.pdf.setLineCap(q))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(q){isNaN(q)||(this.ctx.lineWidth=q,this.pdf.setLineWidth(q))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(q){["bevel","round","miter"].indexOf(q)!==-1&&(this.ctx.lineJoin=q,this.pdf.setLineJoin(q))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(q){isNaN(q)||(this.ctx.miterLimit=q,this.pdf.setMiterLimit(q))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(q){this.ctx.textBaseline=q}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(q){["right","end","center","left","start"].indexOf(q)!==-1&&(this.ctx.textAlign=q)}});var ke=null,Ae=null,Le=null;Object.defineProperty(this,"fontFaces",{get:function(){return Le},set:function(q){ke=null,Ae=null,Le=q}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(q){var Te;if(this.ctx.font=q,(Te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(q))!==null){var _e=Te[1];Te[2];var oe=Te[3],X=Te[4];Te[5];var he=Te[6],se=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(X)[2];X=Math.floor(se==="px"?parseFloat(X)*this.pdf.internal.scaleFactor:se==="em"?parseFloat(X)*this.pdf.getFontSize():parseFloat(X)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(X);var Ne=function(Xe){var bn,zt,Pt=[],it=Xe.trim();if(it==="")return db;if(it in yk)return[yk[it]];for(;it!=="";){switch(zt=null,bn=(it=bk(it)).charAt(0)){case'"':case"'":zt=SU(it.substring(1),bn);break;default:zt=NU(it)}if(zt===null||(Pt.push(zt[0]),(it=bk(zt[1]))!==""&&it.charAt(0)!==","))return db;it=it.replace(/^,/,"")}return Pt}(he);if(this.fontFaces){var Me=function(Xe,bn){var zt=Xe.getFontList(),Pt=JSON.stringify(zt);if(ke===null||Ae!==Pt){var it=function(wt){var et=[];return Object.keys(wt).forEach(function(fn){wt[fn].forEach(function(xt){var Dt=null;switch(xt){case"bold":Dt={family:fn,weight:"bold"};break;case"italic":Dt={family:fn,style:"italic"};break;case"bolditalic":Dt={family:fn,weight:"bold",style:"italic"};break;case"":case"normal":Dt={family:fn}}Dt!==null&&(Dt.ref={name:fn,style:xt},et.push(Dt))})}),et}(zt);ke=function(wt){for(var et={},fn=0;fn<wt.length;++fn){var xt=ub(wt[fn]),Dt=xt.family,Cn=xt.stretch,Ht=xt.style,vt=xt.weight;et[Dt]=et[Dt]||{},et[Dt][Cn]=et[Dt][Cn]||{},et[Dt][Cn][Ht]=et[Dt][Cn][Ht]||{},et[Dt][Cn][Ht][vt]=xt}return et}(it.concat(bn)),Ae=Pt}return ke}(this.pdf,this.fontFaces),Ce=Ne.map(function(Xe){return{family:Xe,stretch:"normal",weight:oe,style:_e}}),qe=function(Xe,bn,zt){for(var Pt=(zt=zt||{}).defaultFontFamily||"times",it=Object.assign({},EU,zt.genericFontFamilies||{}),wt=null,et=null,fn=0;fn<bn.length;++fn)if(it[(wt=ub(bn[fn])).family]&&(wt.family=it[wt.family]),Xe.hasOwnProperty(wt.family)){et=Xe[wt.family];break}if(!(et=et||Xe[Pt]))throw new Error("Could not find a font-family for the rule '"+_k(wt)+"' and default family '"+Pt+"'.");if(et=function(xt,Dt){if(Dt[xt])return Dt[xt];var Cn=rw[xt],Ht=Cn<=rw.normal?-1:1,vt=vk(Dt,PM,Cn,Ht);if(!vt)throw new Error("Could not find a matching font-stretch value for "+xt);return vt}(wt.stretch,et),et=function(xt,Dt){if(Dt[xt])return Dt[xt];for(var Cn=kM[xt],Ht=0;Ht<Cn.length;++Ht)if(Dt[Cn[Ht]])return Dt[Cn[Ht]];throw new Error("Could not find a matching font-style for "+xt)}(wt.style,et),!(et=function(xt,Dt){if(Dt[xt])return Dt[xt];if(xt===400&&Dt[500])return Dt[500];if(xt===500&&Dt[400])return Dt[400];var Cn=xU[xt],Ht=vk(Dt,AM,Cn,xt<400?-1:1);if(!Ht)throw new Error("Could not find a matching font-weight for value "+xt);return Ht}(wt.weight,et)))throw new Error("Failed to resolve a font for the rule '"+_k(wt)+"'.");return et}(Me,Ce);this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var nt="";(oe==="bold"||parseInt(oe,10)>=700||_e==="bold")&&(nt="bold"),_e==="italic"&&(nt+="italic"),nt.length===0&&(nt="normal");for(var dt="",Nt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ye=0;Ye<Ne.length;Ye++){if(this.pdf.internal.getFont(Ne[Ye],nt,{noFallback:!0,disableWarning:!0})!==void 0){dt=Ne[Ye];break}if(nt==="bolditalic"&&this.pdf.internal.getFont(Ne[Ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)dt=Ne[Ye],nt="bold";else if(this.pdf.internal.getFont(Ne[Ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){dt=Ne[Ye],nt="normal";break}}if(dt===""){for(var gt=0;gt<Ne.length;gt++)if(Nt[Ne[gt]]){dt=Nt[Ne[gt]];break}}dt=dt===""?"Times":dt,this.pdf.setFont(dt,nt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(q){this.ctx.globalCompositeOperation=q}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(q){this.ctx.globalAlpha=q}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(q){this.ctx.lineDashOffset=q,we.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(q){this.ctx.lineDash=q,we.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(q){this.ctx.ignoreClearRect=!!q}})};d.prototype.setLineDash=function(I){this.lineDash=I},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){x.call(this,"fill",!1)},d.prototype.stroke=function(){x.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(I,z){if(isNaN(I)||isNaN(z))throw hn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new a(I,z));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(I,z)},d.prototype.closePath=function(){var I=new a(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&cn(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){I=new a(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(I.x,I.y)},d.prototype.lineTo=function(I,z){if(isNaN(I)||isNaN(z))throw hn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new a(I,z));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(K.x,K.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},d.prototype.quadraticCurveTo=function(I,z,K,ee){if(isNaN(K)||isNaN(ee)||isNaN(I)||isNaN(z))throw hn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var T=this.ctx.transform.applyToPoint(new a(K,ee)),N=this.ctx.transform.applyToPoint(new a(I,z));this.path.push({type:"qct",x1:N.x,y1:N.y,x:T.x,y:T.y}),this.ctx.lastPoint=new a(T.x,T.y)},d.prototype.bezierCurveTo=function(I,z,K,ee,T,N){if(isNaN(T)||isNaN(N)||isNaN(I)||isNaN(z)||isNaN(K)||isNaN(ee))throw hn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var P=this.ctx.transform.applyToPoint(new a(T,N)),j=this.ctx.transform.applyToPoint(new a(I,z)),Y=this.ctx.transform.applyToPoint(new a(K,ee));this.path.push({type:"bct",x1:j.x,y1:j.y,x2:Y.x,y2:Y.y,x:P.x,y:P.y}),this.ctx.lastPoint=new a(P.x,P.y)},d.prototype.arc=function(I,z,K,ee,T,N){if(isNaN(I)||isNaN(z)||isNaN(K)||isNaN(ee)||isNaN(T))throw hn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(N=!!N,!this.ctx.transform.isIdentity){var P=this.ctx.transform.applyToPoint(new a(I,z));I=P.x,z=P.y;var j=this.ctx.transform.applyToPoint(new a(0,K)),Y=this.ctx.transform.applyToPoint(new a(0,0));K=Math.sqrt(Math.pow(j.x-Y.x,2)+Math.pow(j.y-Y.y,2))}Math.abs(T-ee)>=2*Math.PI&&(ee=0,T=2*Math.PI),this.path.push({type:"arc",x:I,y:z,radius:K,startAngle:ee,endAngle:T,counterclockwise:N})},d.prototype.arcTo=function(I,z,K,ee,T){throw new Error("arcTo not implemented.")},d.prototype.rect=function(I,z,K,ee){if(isNaN(I)||isNaN(z)||isNaN(K)||isNaN(ee))throw hn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,z),this.lineTo(I+K,z),this.lineTo(I+K,z+ee),this.lineTo(I,z+ee),this.lineTo(I,z),this.lineTo(I+K,z),this.lineTo(I,z)},d.prototype.fillRect=function(I,z,K,ee){if(isNaN(I)||isNaN(z)||isNaN(K)||isNaN(ee))throw hn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var T={};this.lineCap!=="butt"&&(T.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(T.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,z,K,ee),this.fill(),T.hasOwnProperty("lineCap")&&(this.lineCap=T.lineCap),T.hasOwnProperty("lineJoin")&&(this.lineJoin=T.lineJoin)}},d.prototype.strokeRect=function(I,z,K,ee){if(isNaN(I)||isNaN(z)||isNaN(K)||isNaN(ee))throw hn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(I,z,K,ee),this.stroke())},d.prototype.clearRect=function(I,z,K,ee){if(isNaN(I)||isNaN(z)||isNaN(K)||isNaN(ee))throw hn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,z,K,ee))},d.prototype.save=function(I){I=typeof I!="boolean"||I;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},d.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(z),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(I){var z,K,ee,T;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))z=0,K=0,ee=0,T=0;else{var N=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(N!==null)z=parseInt(N[1]),K=parseInt(N[2]),ee=parseInt(N[3]),T=1;else if((N=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)z=parseInt(N[1]),K=parseInt(N[2]),ee=parseInt(N[3]),T=parseFloat(N[4]);else{if(T=1,typeof I=="string"&&I.charAt(0)!=="#"){var P=new _M(I);I=P.ok?P.toHex():"#000000"}I.length===4?(z=I.substring(1,2),z+=z,K=I.substring(2,3),K+=K,ee=I.substring(3,4),ee+=ee):(z=I.substring(1,3),K=I.substring(3,5),ee=I.substring(5,7)),z=parseInt(z,16),K=parseInt(K,16),ee=parseInt(ee,16)}}return{r:z,g:K,b:ee,a:T,style:I}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(I,z,K,ee){if(isNaN(z)||isNaN(K)||typeof I!="string")throw hn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!p.call(this)){var T=te(this.ctx.transform.rotation),N=this.ctx.transform.scaleX;L.call(this,{text:I,x:z,y:K,scale:N,angle:T,align:this.textAlign,maxWidth:ee})}},d.prototype.strokeText=function(I,z,K,ee){if(isNaN(z)||isNaN(K)||typeof I!="string")throw hn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){ee=isNaN(ee)?void 0:ee;var T=te(this.ctx.transform.rotation),N=this.ctx.transform.scaleX;L.call(this,{text:I,x:z,y:K,scale:N,renderingMode:"stroke",angle:T,align:this.textAlign,maxWidth:ee})}},d.prototype.measureText=function(I){if(typeof I!="string")throw hn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,K=this.pdf.internal.scaleFactor,ee=z.internal.getFontSize(),T=z.getStringUnitWidth(I)*ee/z.internal.scaleFactor;return new function(N){var P=(N=N||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return P}}),this}({width:T*=Math.round(96*K/72*1e4)/1e4})},d.prototype.scale=function(I,z){if(isNaN(I)||isNaN(z))throw hn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(I,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.rotate=function(I){if(isNaN(I))throw hn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.translate=function(I,z){if(isNaN(I)||isNaN(z))throw hn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,I,z);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.transform=function(I,z,K,ee,T,N){if(isNaN(I)||isNaN(z)||isNaN(K)||isNaN(ee)||isNaN(T)||isNaN(N))throw hn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var P=new l(I,z,K,ee,T,N);this.ctx.transform=this.ctx.transform.multiply(P)},d.prototype.setTransform=function(I,z,K,ee,T,N){I=isNaN(I)?1:I,z=isNaN(z)?0:z,K=isNaN(K)?0:K,ee=isNaN(ee)?1:ee,T=isNaN(T)?0:T,N=isNaN(N)?0:N,this.ctx.transform=new l(I,z,K,ee,T,N)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(I,z,K,ee,T,N,P,j,Y){var ae=this.pdf.getImageProperties(I),ke=1,Ae=1,Le=1,q=1;ee!==void 0&&j!==void 0&&(Le=j/ee,q=Y/T,ke=ae.width/ee*j/ee,Ae=ae.height/T*Y/T),N===void 0&&(N=z,P=K,z=0,K=0),ee!==void 0&&j===void 0&&(j=ee,Y=T),ee===void 0&&j===void 0&&(j=ae.width,Y=ae.height);var Te=this.ctx.transform.decompose(),_e=te(Te.rotate.shx),oe=new l,X=(oe=(oe=(oe=oe.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale)).applyToRectangle(new s(N-z*Le,P-K*q,ee*ke,T*Ae));if(this.autoPaging){for(var he,se=_.call(this,X),Ne=[],Me=0;Me<se.length;Me+=1)Ne.indexOf(se[Me])===-1&&Ne.push(se[Me]);w(Ne);for(var Ce=Ne[0],qe=Ne[Ne.length-1],nt=Ce;nt<qe+1;nt++){this.pdf.setPage(nt);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=nt===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=nt===1?0:Ye+(nt-2)*gt;if(this.ctx.clip_path.length!==0){var bn=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(he,this.posX+this.margin[3],-Xe+Nt+this.ctx.prevPageLastElemOffset),M.call(this,"fill",!0),this.path=bn}var zt=JSON.parse(JSON.stringify(X));zt=E([zt],this.posX+this.margin[3],-Xe+Nt+this.ctx.prevPageLastElemOffset)[0];var Pt=(nt>Ce||nt<qe)&&v.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,gt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",zt.x,zt.y,zt.w,zt.h,null,null,_e),Pt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(I,"JPEG",X.x,X.y,X.w,X.h,null,null,_e)};var _=function(I,z,K){var ee=[];z=z||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var T=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":ee.push(Math.floor((I.y+T)/K)+1);break;case"arc":ee.push(Math.floor((I.y+T-I.radius)/K)+1),ee.push(Math.floor((I.y+T+I.radius)/K)+1);break;case"qct":var N=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);ee.push(Math.floor((N.y+T)/K)+1),ee.push(Math.floor((N.y+N.h+T)/K)+1);break;case"bct":var P=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);ee.push(Math.floor((P.y+T)/K)+1),ee.push(Math.floor((P.y+P.h+T)/K)+1);break;case"rect":ee.push(Math.floor((I.y+T)/K)+1),ee.push(Math.floor((I.y+I.h+T)/K)+1)}for(var j=0;j<ee.length;j+=1)for(;this.pdf.internal.getNumberOfPages()<ee[j];)b.call(this);return ee},b=function(){var I=this.fillStyle,z=this.strokeStyle,K=this.font,ee=this.lineCap,T=this.lineWidth,N=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=z,this.font=K,this.lineCap=ee,this.lineWidth=T,this.lineJoin=N},E=function(I,z,K){for(var ee=0;ee<I.length;ee++)switch(I[ee].type){case"bct":I[ee].x2+=z,I[ee].y2+=K;case"qct":I[ee].x1+=z,I[ee].y1+=K;default:I[ee].x+=z,I[ee].y+=K}return I},w=function(I){return I.sort(function(z,K){return z-K})},x=function(I,z){var K=this.fillStyle,ee=this.strokeStyle,T=this.lineCap,N=this.lineWidth,P=Math.abs(N*this.ctx.transform.scaleX),j=this.lineJoin;if(this.autoPaging){for(var Y,ae,ke=JSON.parse(JSON.stringify(this.path)),Ae=JSON.parse(JSON.stringify(this.path)),Le=[],q=0;q<Ae.length;q++)if(Ae[q].x!==void 0)for(var Te=_.call(this,Ae[q]),_e=0;_e<Te.length;_e+=1)Le.indexOf(Te[_e])===-1&&Le.push(Te[_e]);for(var oe=0;oe<Le.length;oe++)for(;this.pdf.internal.getNumberOfPages()<Le[oe];)b.call(this);w(Le);for(var X=Le[0],he=Le[Le.length-1],se=X;se<he+1;se++){this.pdf.setPage(se),this.fillStyle=K,this.strokeStyle=ee,this.lineCap=T,this.lineWidth=P,this.lineJoin=j;var Ne=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Me=se===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=se===1?0:Ce+(se-2)*qe;if(this.ctx.clip_path.length!==0){var dt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Y,this.posX+this.margin[3],-nt+Me+this.ctx.prevPageLastElemOffset),M.call(this,I,!0),this.path=dt}if(ae=JSON.parse(JSON.stringify(ke)),this.path=E(ae,this.posX+this.margin[3],-nt+Me+this.ctx.prevPageLastElemOffset),z===!1||se===0){var Nt=(se>X||se<he)&&v.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ne,qe,null).clip().discardPath()),M.call(this,I,z),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=N}this.path=ke}else this.lineWidth=P,M.call(this,I,z),this.lineWidth=N},M=function(I,z){if((I!=="stroke"||z||!m.call(this))&&(I==="stroke"||z||!p.call(this))){for(var K,ee,T=[],N=this.path,P=0;P<N.length;P++){var j=N[P];switch(j.type){case"begin":T.push({begin:!0});break;case"close":T.push({close:!0});break;case"mt":T.push({start:j,deltas:[],abs:[]});break;case"lt":var Y=T.length;if(N[P-1]&&!isNaN(N[P-1].x)&&(K=[j.x-N[P-1].x,j.y-N[P-1].y],Y>0)){for(;Y>=0;Y--)if(T[Y-1].close!==!0&&T[Y-1].begin!==!0){T[Y-1].deltas.push(K),T[Y-1].abs.push(j);break}}break;case"bct":K=[j.x1-N[P-1].x,j.y1-N[P-1].y,j.x2-N[P-1].x,j.y2-N[P-1].y,j.x-N[P-1].x,j.y-N[P-1].y],T[T.length-1].deltas.push(K);break;case"qct":var ae=N[P-1].x+2/3*(j.x1-N[P-1].x),ke=N[P-1].y+2/3*(j.y1-N[P-1].y),Ae=j.x+2/3*(j.x1-j.x),Le=j.y+2/3*(j.y1-j.y),q=j.x,Te=j.y;K=[ae-N[P-1].x,ke-N[P-1].y,Ae-N[P-1].x,Le-N[P-1].y,q-N[P-1].x,Te-N[P-1].y],T[T.length-1].deltas.push(K);break;case"arc":T.push({deltas:[],abs:[],arc:!0}),Array.isArray(T[T.length-1].abs)&&T[T.length-1].abs.push(j)}}ee=z?null:I==="stroke"?"stroke":"fill";for(var _e=!1,oe=0;oe<T.length;oe++)if(T[oe].arc)for(var X=T[oe].abs,he=0;he<X.length;he++){var se=X[he];se.type==="arc"?R.call(this,se.x,se.y,se.radius,se.startAngle,se.endAngle,se.counterclockwise,void 0,z,!_e):$.call(this,se.x,se.y),_e=!0}else if(T[oe].close===!0)this.pdf.internal.out("h"),_e=!1;else if(T[oe].begin!==!0){var Ne=T[oe].start.x,Me=T[oe].start.y;Z.call(this,T[oe].deltas,Ne,Me),_e=!0}ee&&O.call(this,ee),z&&D.call(this)}},B=function(I){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-K;case"top":return I+z-K;case"hanging":return I+z-2*K;case"middle":return I+z/2-K;default:return I}},H=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(z,K){this.colorStops.push([z,K])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(I,z,K,ee,T,N,P,j,Y){for(var ae=ge.call(this,K,ee,T,N),ke=0;ke<ae.length;ke++){var Ae=ae[ke];ke===0&&(Y?A.call(this,Ae.x1+I,Ae.y1+z):$.call(this,Ae.x1+I,Ae.y1+z)),me.call(this,I,z,Ae.x2,Ae.y2,Ae.x3,Ae.y3,Ae.x4,Ae.y4)}j?D.call(this):O.call(this,P)},O=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(I,z){this.pdf.internal.out(n(I)+" "+i(z)+" m")},L=function(I){var z;switch(I.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var K,ee,T,N=this.pdf.getTextDimensions(I.text),P=B.call(this,I.y),j=H.call(this,P)-N.h,Y=this.ctx.transform.applyToPoint(new a(I.x,P));if(this.autoPaging){var ae=this.ctx.transform.decompose(),ke=new l;ke=(ke=(ke=ke.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale);for(var Ae=this.ctx.transform.applyToRectangle(new s(I.x,P,N.w,N.h)),Le=ke.applyToRectangle(new s(I.x,j,N.w,N.h)),q=_.call(this,Le),Te=[],_e=0;_e<q.length;_e+=1)Te.indexOf(q[_e])===-1&&Te.push(q[_e]);w(Te);for(var oe=Te[0],X=Te[Te.length-1],he=oe;he<X+1;he++){this.pdf.setPage(he);var se=he===1?this.posY+this.margin[0]:this.margin[0],Ne=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[2],Ce=Me-this.margin[0],qe=this.pdf.internal.pageSize.width-this.margin[1],nt=qe-this.margin[3],dt=he===1?0:Ne+(he-2)*Ce;if(this.ctx.clip_path.length!==0){var Nt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(K,this.posX+this.margin[3],-1*dt+se),M.call(this,"fill",!0),this.path=Nt}var Ye=E([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-dt+se+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*I.scale),T=this.lineWidth,this.lineWidth=T*I.scale);var gt=this.autoPaging!=="text";if(gt||Ye.y+Ye.h<=Me){if(gt||Ye.y>=se&&Ye.x<=qe){var Xe=gt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||qe-Ye.x)[0],bn=E([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-dt+se+this.ctx.prevPageLastElemOffset)[0],zt=gt&&(he>oe||he<X)&&v.call(this);zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nt,Ce,null).clip().discardPath()),this.pdf.text(Xe,bn.x,bn.y,{angle:I.angle,align:z,renderingMode:I.renderingMode}),zt&&this.pdf.restoreGraphicsState()}}else Ye.y<Me&&(this.ctx.prevPageLastElemOffset+=Me-Ye.y);I.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=T)}}else I.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*I.scale),T=this.lineWidth,this.lineWidth=T*I.scale),this.pdf.text(I.text,Y.x+this.posX,Y.y+this.posY,{angle:I.angle,align:z,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=T)},$=function(I,z,K,ee){K=K||0,ee=ee||0,this.pdf.internal.out(n(I+K)+" "+i(z+ee)+" l")},Z=function(I,z,K){return this.pdf.lines(I,z,K,null,null)},me=function(I,z,K,ee,T,N,P,j){this.pdf.internal.out([t(r(K+I)),t(o(ee+z)),t(r(T+I)),t(o(N+z)),t(r(P+I)),t(o(j+z)),"c"].join(" "))},ge=function(I,z,K,ee){for(var T=2*Math.PI,N=Math.PI/2;z>K;)z-=T;var P=Math.abs(K-z);P<T&&ee&&(P=T-P);for(var j=[],Y=ee?-1:1,ae=z;P>1e-5;){var ke=ae+Y*Math.min(P,N);j.push(pe.call(this,I,ae,ke)),P-=Math.abs(ke-ae),ae=ke}return j},pe=function(I,z,K){var ee=(K-z)/2,T=I*Math.cos(ee),N=I*Math.sin(ee),P=T,j=-N,Y=P*P+j*j,ae=Y+P*T+j*N,ke=4/3*(Math.sqrt(2*Y*ae)-ae)/(P*N-j*T),Ae=P-ke*j,Le=j+ke*P,q=Ae,Te=-Le,_e=ee+z,oe=Math.cos(_e),X=Math.sin(_e);return{x1:I*Math.cos(z),y1:I*Math.sin(z),x2:Ae*oe-Le*X,y2:Ae*X+Le*oe,x3:q*oe-Te*X,y3:q*X+Te*oe,x4:I*Math.cos(K),y4:I*Math.sin(K)}},te=function(I){return 180*I/Math.PI},le=function(I,z,K,ee,T,N){var P=I+.5*(K-I),j=z+.5*(ee-z),Y=T+.5*(K-T),ae=N+.5*(ee-N),ke=Math.min(I,T,P,Y),Ae=Math.max(I,T,P,Y),Le=Math.min(z,N,j,ae),q=Math.max(z,N,j,ae);return new s(ke,Le,Ae-ke,q-Le)},ye=function(I,z,K,ee,T,N,P,j){var Y,ae,ke,Ae,Le,q,Te,_e,oe,X,he,se,Ne,Me,Ce=K-I,qe=ee-z,nt=T-K,dt=N-ee,Nt=P-T,Ye=j-N;for(ae=0;ae<41;ae++)oe=(Te=(ke=I+(Y=ae/40)*Ce)+Y*((Le=K+Y*nt)-ke))+Y*(Le+Y*(T+Y*Nt-Le)-Te),X=(_e=(Ae=z+Y*qe)+Y*((q=ee+Y*dt)-Ae))+Y*(q+Y*(N+Y*Ye-q)-_e),ae==0?(he=oe,se=X,Ne=oe,Me=X):(he=Math.min(he,oe),se=Math.min(se,X),Ne=Math.max(Ne,oe),Me=Math.max(Me,X));return new s(Math.round(he),Math.round(se),Math.round(Ne-he),Math.round(Me-se))},we=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,z,K=(I=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:z}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(ut.API),function(e){var t=function(a){var s,l,c,u,d,h,p,m,v,_;for(l=[],c=0,u=(a+=s="\0\0\0\0".slice(a.length%4||4)).length;u>c;c+=4)(d=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(h=(d=((d=((d=((d=(d-(_=d%85))/85)-(v=d%85))/85)-(m=d%85))/85)-(p=d%85))/85)%85,l.push(h+33,p+33,m+33,v+33,_+33)):l.push(122);return function(b,E){for(var w=E;w>0;w--)b.pop()}(l,s.length),String.fromCharCode.apply(String,l)+"~>"},n=function(a){var s,l,c,u,d,h=String,p="length",m=255,v="charCodeAt",_="slice",b="replace";for(a[_](-2),a=a[_](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],u=0,d=(a+=s="uuuuu"[_](a[p]%5||5))[p];d>u;u+=5)l=52200625*(a[v](u)-33)+614125*(a[v](u+1)-33)+7225*(a[v](u+2)-33)+85*(a[v](u+3)-33)+(a[v](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(E,w){for(var x=w;x>0;x--)E.pop()}(c,s[p]),h.fromCharCode.apply(h,c)},i=function(a){return a.split("").map(function(s){return("0"+s.charCodeAt().toString(16)).slice(-2)}).join("")+">"},r=function(a){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),s.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},o=function(a){for(var s=new Uint8Array(a.length),l=a.length;l--;)s[l]=a.charCodeAt(l);return(s=X1(s)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(a,s){var l=0,c=a||"",u=[];for(typeof(s=s||[])=="string"&&(s=[s]),l=0;l<s.length;l+=1)switch(s[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=i(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=o(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(ut.API),function(e){e.loadFile=function(t,n,i){return function(r,o,a){o=o!==!1,a=typeof a=="function"?a:function(){};var s=void 0;try{s=function(l,c,u){var d=new XMLHttpRequest,h=0,p=function(m){var v=m.length,_=[],b=String.fromCharCode;for(h=0;h<v;h+=1)_.push(b(255&m.charCodeAt(h)));return _.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(p(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)}(r,o,a)}catch{}return s}(t,n,i)},e.allowFsRead=void 0,e.loadImageFile=e.loadFile}(ut.API),function(e){function t(){return(kt.html2canvas?Promise.resolve(kt.html2canvas):V2(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function n(){return(kt.DOMPurify?Promise.resolve(kt.DOMPurify):V2(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var i=function(s){var l=cn(s);return l==="undefined"?"undefined":l==="string"||s instanceof String?"string":l==="number"||s instanceof Number?"number":l==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":l==="object"?"object":"unknown"},r=function(s,l){var c=document.createElement(s);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},o=function s(l,c){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(s(d,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},a=function s(l){var c=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),c);return(u=u.setProgress(1,s,1,[s])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(s,l){return s.__proto__=l||a.prototype,s},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(s,l){return this.then(function(){switch(l=l||function(c){switch(i(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s),l){case"string":return this.then(n).then(function(c){return this.set({src:r("div",{innerHTML:s,dompurify:c})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},a.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var m=u[p],v=m.src.find(function(_){return _.format==="truetype"});v&&c.addFont(v.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(s,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(s,l):this.outputPdf(s,l)},a.prototype.outputPdf=function(s,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,l)})},a.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},a.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(s){if(i(s)!=="object")return this;var l=Object.keys(s||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=s[c]};switch(c){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[c]=s[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(s,l){return this.then(function(){var c=s in a.template.prop?this.prop[s]:this.opt[s];return l?l(c):c})},a.prototype.setMargin=function(s){return this.then(function(){switch(i(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},a.prototype.setPageSize=function(s){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(s=s||ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:l(s.inner.width,s.k),height:l(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},a.prototype.setProgress=function(s,l,c,u){return s!=null&&(this.progress.val=s),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(s,l,c,u){return this.setProgress(s?this.progress.val+s:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(s,l){var c=this;return this.thenCore(s,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,u),h}).then(u,d).then(function(h){return c.updateProgress(1),h})})},a.prototype.thenCore=function(s,l,c){c=c||Promise.prototype.then;var u=this;s&&(s=s.bind(u)),l&&(l=l.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:a.convert(Object.assign({},u),Promise.prototype),h=c.call(d,s,l);return a.convert(h,u.__proto__)},a.prototype.thenExternal=function(s,l){return Promise.prototype.then.call(this,s,l)},a.prototype.thenList=function(s){var l=this;return s.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(s){s&&(s=s.bind(this));var l=Promise.prototype.catch.call(this,s);return a.convert(l,this)},a.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},a.prototype.error=function(s){return this.then(function(){throw new Error(s)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,ut.getPageSize=function(s,l,c){if(cn(s)==="object"){var u=s;s=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",s=(""+(s||"P")).toLowerCase();var d,h=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,v=0,_=0;if(p.hasOwnProperty(h))v=p[h][1]/d,_=p[h][0]/d;else try{v=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(s==="p"||s==="portrait")s="p",_>v&&(m=_,_=v,v=m);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",v>_&&(m=_,_=v,v=m)}return{width:_,height:v,unit:l,k:d,orientation:s}},e.html=function(s,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(ub):null;var c=new a(l);return l.worker?c:c.from(s).doCallback()}}(ut.API),ut.API.addJS=function(e){var t,n,i=e;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(t+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+i+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){t!==void 0&&n!==void 0&&this.internal.out("/Names <</JavaScript "+t+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=n.outline.render().split(/\r\n/),o=0;o<r.length;o++){var a=r[o],s=i.exec(a);if(s!=null){var l=s[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(o=0;o<c;o++){var d=n.internal.newObject();u.push(d);var h=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<u.length;o++)n.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,r,o){var a={title:r,options:o,children:[]};return i==null&&(i=this.root),i.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<i.children.length;o++){var a=i.children[o];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(i)),o>0&&this.line("/Prev "+this.makeRef(i.children[o-1])),o<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[o+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,r){for(var o=0;o<r.children.length;o++)i.count++,this.count_r(i,r.children[o]);return i.count}}])}(ut.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,i,r,o,a,s){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(d){for(var h,p=256*d.charCodeAt(4)+d.charCodeAt(5),m=d.length,v={width:0,height:0,numcomponents:1},_=4;_<m;_+=2){if(_+=p,t.indexOf(d.charCodeAt(_+1))!==-1){h=256*d.charCodeAt(_+5)+d.charCodeAt(_+6),v={width:256*d.charCodeAt(_+7)+d.charCodeAt(_+8),height:h,numcomponents:d.charCodeAt(_+9)};break}p=256*d.charCodeAt(_+2)+d.charCodeAt(_+3)}return v}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:c,index:i,alias:r}}return u}}(ut.API),ut.API.processPNG=function(e,t,n,i){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var r,o=lU(e,{checkCrc:!0}),a=o.width,s=o.height,l=o.channels,c=o.palette,u=o.depth;r=c&&l===1?function(R){for(var O=R.width,D=R.height,A=R.data,L=R.palette,$=R.depth,Z=!1,me=[],ge=[],pe=void 0,te=!1,le=0,ye=0;ye<L.length;ye++){var we=k3(L[ye],4),I=we[0],z=we[1],K=we[2],ee=we[3];me.push(I,z,K),ee!=null&&(ee===0?(le++,ge.length<1&&ge.push(ye)):ee<255&&(te=!0))}if(te||le>1){Z=!0,ge=void 0;var T=O*D;pe=new Uint8Array(T);for(var N=new DataView(A.buffer),P=0;P<T;P++){var j=pb(N,P,$),Y=k3(L[j],4)[3];pe[P]=Y}}else le===0&&(ge=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Z?8:void 0,colorBytes:A,alphaBytes:pe,needSMask:Z,palette:me,mask:ge}}(o):l===2||l===4?function(R){for(var O=R.data,D=R.width,A=R.height,L=R.channels,$=R.depth,Z=L===2?"DeviceGray":"DeviceRGB",me=L-1,ge=D*A,pe=me,te=ge*pe,le=1*ge,ye=Math.ceil(te*$/8),we=Math.ceil(le*$/8),I=new Uint8Array(ye),z=new Uint8Array(we),K=new DataView(O.buffer),ee=new DataView(I.buffer),T=new DataView(z.buffer),N=!1,P=0;P<ge;P++){for(var j=P*L,Y=0;Y<pe;Y++)Tk(ee,pb(K,j+Y,$),P*pe+Y,$);var ae=pb(K,j+pe,$);ae<(1<<$)-1&&(N=!0),Tk(T,ae,1*P,$)}return{colorSpace:Z,colorsPerPixel:me,sMaskBitsPerComponent:N?$:void 0,colorBytes:I,alphaBytes:z,needSMask:N}}(o):function(R){var O=R.data,D=R.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:D,colorsPerPixel:D==="DeviceGray"?1:3,colorBytes:O instanceof Uint16Array?function(A){for(var L=A.length,$=new Uint8Array(2*L),Z=new DataView($.buffer,$.byteOffset,$.byteLength),me=0;me<L;me++)Z.setUint16(2*me,A[me],!1);return $}(O):O,needSMask:!1}}(o);var d,h,p,m=r,v=m.colorSpace,_=m.colorsPerPixel,b=m.sMaskBitsPerComponent,E=m.colorBytes,w=m.alphaBytes,x=m.needSMask,M=m.palette,B=m.mask,H=null;return i!==ut.API.image_compression.NONE&&typeof X1=="function"?(H=function(R){var O;switch(R){case ut.API.image_compression.FAST:O=11;break;case ut.API.image_compression.MEDIUM:O=13;break;case ut.API.image_compression.SLOW:O=14;break;default:O=12}return O}(i),d=this.decode.FLATE_DECODE,h="/Predictor ".concat(H," /Colors ").concat(_," /BitsPerComponent ").concat(u," /Columns ").concat(a),e=Sk(E,Math.ceil(a*_*u/8),_,u,i),x&&(p=Sk(w,Math.ceil(a*b/8),1,b,i))):(d=void 0,h=void 0,e=E,x&&(p=w)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:e,index:t,filter:d,decodeParameters:h,transparency:B,palette:M,sMask:p,predictor:H,width:a,height:s,bitsPerComponent:u,sMaskBitsPerComponent:b,colorSpace:v}}},function(e){e.processGIF89A=function(t,n,i,r){var o=new TU(t),a=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:s},u=new hb(100).encode(c,100);return e.processJPEG.call(this,u,n,i,r)},e.processGIF87A=e.processGIF89A}(ut.API),Zo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zo.prototype.parseBGR=function(){this.pos=this.offset;var e="bit"+this.bitPP,t=this.width*this.height*4;if(t>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(t);try{this[e]()}catch(n){hn.log("bit decode error:"+n)}},Zo.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<t;r++)for(var o=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*r*4,s=0;s<8&&8*r+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}n!==0&&(this.pos+=4-n)}},Zo.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<e;r++){var o=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*r*4,s=o>>4,l=15&o,c=this.palette[s];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Zo.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(r<this.palette.length){var a=this.palette[r];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},Zo.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,s=(o>>5&t)/t*255|0,l=(o>>10&t)/t*255|0,c=o>>15?255:0,u=i*this.width*4+4*r;this.data[u]=l,this.data[u+1]=s,this.data[u+2]=a,this.data[u+3]=c}this.pos+=e}},Zo.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,u=r*this.width*4+4*o;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=s,this.data[u+3]=255}this.pos+=e}},Zo.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=o,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},Zo.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=o,this.data[s+1]=r,this.data[s+2]=i,this.data[s+3]=a}},Zo.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,i,r){var o=new Zo(t,!1),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new hb(100).encode(l,100);return e.processJPEG.call(this,c,n,i,r)}}(ut.API),Rk.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,i,r){var o=new Rk(t),a=o.width,s=o.height,l={data:o.getData(),width:a,height:s},c=new hb(100).encode(l,100);return e.processJPEG.call(this,c,n,i,r)}}(ut.API),ut.API.processRGBA=function(e,t,n){for(var i=e.data,r=i.length,o=new Uint8Array(r/4*3),a=new Uint8Array(r/4),s=0,l=0,c=0;c<r;c+=4){var u=i[c],d=i[c+1],h=i[c+2],p=i[c+3];o[s++]=u,o[s++]=d,o[s++]=h,a[l++]=p}var m=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:m,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ut.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},od=ut.API,$g=od.getCharWidthsArray=function(e,t){var n,i,r=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:r.metadata.Unicode.widths,l=s.fof?s.fof:1,c=t.kerning?t.kerning:r.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=t.doKerning!==!1,h=0,p=e.length,m=0,v=s[0]||l,_=[];for(n=0;n<p;n++)i=e.charCodeAt(n),typeof r.metadata.widthOfString=="function"?_.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+a*(1e3/o)||0)/1e3):(h=d&&cn(c[i])==="object"&&!isNaN(parseInt(c[i][m],10))?c[i][m]/u:0,_.push((s[i]||v)/l+h)),m=i;return _},wk=od.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return od.processArabic&&(e=od.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,n,r)/n:$g.apply(this,arguments).reduce(function(o,a){return o+a},0)},xk=function(e,t,n,i){for(var r=[],o=0,a=e.length,s=0;o!==a&&s+t[o]<n;)s+=t[o],o++;r.push(e.slice(0,o));var l=o;for(s=0;o!==a;)s+t[o]>i&&(r.push(e.slice(l,o)),s=0,l=o),s+=t[o],o++;return l!==o&&r.push(e.slice(l,o)),r},Ek=function(e,t,n){n||(n={});var i,r,o,a,s,l,c,u=[],d=[u],h=n.textIndent||0,p=0,m=0,v=e.split(" "),_=$g.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?v[0].length+2:n.lineIndent||0){var b=Array(l).join(" "),E=[];v.map(function(x){(x=x.split(/\s*\n/)).length>1?E=E.concat(x.map(function(M,B){return(B&&M.length?`
`:"")+M})):E.push(x[0])}),v=E,l=wk.apply(this,[b,n])}for(o=0,a=v.length;o<a;o++){var w=0;if(i=v[o],l&&i[0]==`
`&&(i=i.substr(1),w=1),h+p+(m=(r=$g.apply(this,[i,n])).reduce(function(x,M){return x+M},0))>t||w){if(m>t){for(s=xk.apply(this,[i,r,t-(h+p),t]),u.push(s.shift()),u=[s.pop()];s.length;)d.push([s.shift()]);m=r.slice(i.length-(u[0]?u[0].length:0)).reduce(function(x,M){return x+M},0)}else u=[i];d.push(u),h=m+l,p=_}else u.push(i),h+=p+m,p=_}return c=l?function(x,M){return(M?b:"")+x.join(" ")}:function(x){return x.join(" ")},d.map(c)},od.splitTextToSize=function(e,t,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),h="Unicode";return d.metadata[h]?{widths:d.metadata[h].widths||{0:1},kerning:d.metadata[h].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/r;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=n.lineIndent;var s,l,c=[];for(s=0,l=i.length;s<l;s++)c=c.concat(Ek.apply(this,[i[s],a,o]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",i={},r={},o=0;o<16;o++)i[n[o]]=t[o],r[t[o]]=n[o];var a=function(h){return"0x"+parseInt(h,10).toString(16)},s=e.__fontmetrics__.compress=function(h){var p,m,v,_,b=["{"];for(var E in h){if(p=h[E],isNaN(parseInt(E,10))?m="'"+E+"'":(E=parseInt(E,10),m=(m=a(E).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof p=="number")p<0?(v=a(p).slice(3),_="-"):(v=a(p).slice(2),_=""),v=_+v.slice(0,-1)+r[v.slice(-1)];else{if(cn(p)!=="object")throw new Error("Don't know what to do with value type "+cn(p)+".");v=s(p)}b.push(m+v)}return b.push("}"),b.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,m,v,_,b={},E=1,w=b,x=[],M="",B="",H=h.length-1,R=1;R<H;R+=1)(_=h[R])=="'"?p?(v=p.join(""),p=void 0):p=[]:p?p.push(_):_=="{"?(x.push([w,v]),w={},v=void 0):_=="}"?((m=x.pop())[0][m[1]]=w,v=void 0,w=m[0]):_=="-"?E=-1:v===void 0?i.hasOwnProperty(_)?(M+=i[_],v=parseInt(M,16)*E,E=1,M=""):M+=_:i.hasOwnProperty(_)?(B+=i[_],w[v]=parseInt(B,16)*E,E=1,v=void 0,B=""):B+=_;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var p=h.font,m=d.Unicode[p.postScriptName];m&&(p.metadata.Unicode={},p.metadata.Unicode.widths=m.widths,p.metadata.Unicode.kerning=m.kerning);var v=u.Unicode[p.postScriptName];v&&(p.metadata.Unicode.encoding=v,p.encoding=v.codePages[0])}])}(ut.API),function(e){var t=function(n){for(var i=n.length,r=new Uint8Array(i),o=0;o<i;o++)r[o]=n.charCodeAt(o);return r};e.API.events.push(["addFont",function(n){var i=void 0,r=n.font,o=n.instance;if(!r.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=o.existsFileInVFS(r.postScriptName)===!1?o.loadFile(r.postScriptName):o.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(a,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(M0(s)),a.metadata=e.API.TTFFont.open(s),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(r,i)}}])}(ut),ut.API.addSvgAsImage=function(e,t,n,i,r,o,a,s){if(isNaN(t)||isNaN(n))throw hn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(r))throw hn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=i,l.height=r;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(kt.canvg?Promise.resolve(kt.canvg):V2(()=>import("./index.es-C0hOAq-w.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(c,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(u)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),t,n,i,r,a,s)})},ut.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(t,n);return this},ut.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var i,r,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),l=[],c=0,u=0,d=0;function h(m,v){var _,b=!1;for(_=0;_<m.length;_+=1)m[_]===v&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=s.length;for(d=0;d<p;d+=1)n[s[d]].value=n[s[d]].defaultValue,n[s[d]].explicitSet=!1}if(cn(e)==="object"){for(r in e)if(o=e[r],h(s,r)&&o!==void 0){if(n[r].type==="boolean"&&typeof o=="boolean")n[r].value=o;else if(n[r].type==="name"&&h(n[r].valueSet,o))n[r].value=o;else if(n[r].type==="integer"&&Number.isInteger(o))n[r].value=o;else if(n[r].type==="array"){for(c=0;c<o.length;c+=1)if(i=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(u=0;u<o[c].length;u+=1)typeof o[c][u]!="number"&&(i=!1);i===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[r].value="["+l.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,v=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?v.push("/"+m+" /"+n[m].value):v.push("/"+m+" "+n[m].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},ut.API.addMetadata=function(e,t){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:e,namespaceUri:t??"http://jspdf.default.namespaceuri/",rawXml:typeof t=="boolean"&&t},this.internal.events.subscribe("putCatalog",RU),this.internal.events.subscribe("postPutResources",CU)),this},function(e){var t=e.API,n=t.pdfEscape16=function(o,a){for(var s,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=o.length;d<h;++d){if(s=a.metadata.characterToGlyph(o.charCodeAt(d)),a.metadata.glyIdsUsed.push(s),a.metadata.toUnicode[s]=o.charCodeAt(d),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(a.metadata.widthOfGlyph(s),10)])),s=="0")return u.join("");s=s.toString(16),u.push(c[4-s.length],s)}return u.join("")},i=function(o){var a,s,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(s=Object.keys(o).sort(function(p,m){return p-m})).length;d<h;d++)a=s[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[a]!==void 0&&o[a]!==null&&typeof o[a].toString=="function"&&(c=("0000"+o[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,c=a.newObject,u=a.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="Identity-H"){for(var d=s.metadata.Unicode.widths,h=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),p="",m=0;m<h.length;m++)p+=String.fromCharCode(h[m]);var v=c();u({data:p,addLength1:!0,objectId:v}),l("endobj");var _=c();u({data:i(s.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var b=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+bd(s.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var E=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+bd(s.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+e.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+_+" 0 R"),l("/BaseFont /"+bd(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+E+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(a){var s=a.font,l=a.out,c=a.newObject,u=a.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var d=s.metadata.rawData,h="",p=0;p<d.length;p++)h+=String.fromCharCode(d[p]);var m=c();u({data:h,addLength1:!0,objectId:m}),l("endobj");var v=c();u({data:i(s.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var _=c();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+bd(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=c();for(var b=0;b<s.metadata.hmtx.widths.length;b++)s.metadata.hmtx.widths[b]=parseInt(s.metadata.hmtx.widths[b]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+bd(s.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(o)}]);var r=function(o){var a,s=o.text||"",l=o.x,c=o.y,u=o.options||{},d=o.mutex||{},h=d.pdfEscape,p=d.activeFontKey,m=d.fonts,v=p,_="",b=0,E="",w=m[v].encoding;if(m[v].encoding!=="Identity-H")return{text:s,x:l,y:c,options:u,mutex:d};for(E=s,v=p,Array.isArray(s)&&(E=s[0]),b=0;b<E.length;b+=1)m[v].metadata.hasOwnProperty("cmap")&&(a=m[v].metadata.cmap.unicode.codeMap[E[b].charCodeAt(0)]),a||E[b].charCodeAt(0)<256&&m[v].metadata.hasOwnProperty("Unicode")?_+=E[b]:_+="";var x="";return parseInt(v.slice(1))<14||w==="WinAnsiEncoding"?x=h(_,v).split("").map(function(M){return M.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(x=n(_,m[v])),d.isHex=!0,{text:x,x:l,y:c,options:u,mutex:d}};t.events.push(["postProcessText",function(o){var a=o.text||"",s=[],l={text:a,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?s.push([r(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):s.push(r(Object.assign({},l,{text:a[c]})).text);o.text=s}else o.text=r(Object.assign({},l,{text:a})).text}])}(ut),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,i){return t.call(this),this.internal.vFS[n]=i,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ut.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var r,o,a,s,l,c,u,d=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,w=0;this.__bidiEngine__={};var x=function(A){var L=A.charCodeAt(),$=L>>8,Z=v[$];return Z!==void 0?d[256*Z+(255&L)]:$===252||$===253?"AL":b.test($)?"L":$===8?"R":"N"},M=function(A){for(var L,$=0;$<A.length;$++){if((L=x(A.charAt($)))==="L")return!1;if(L==="R")return!0}return!1},B=function(A,L,$,Z){var me,ge,pe,te,le=L[Z];switch(le){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(le="AN");break;case"AL":E=!0,le="R";break;case"WS":case"BN":le="N";break;case"CS":Z<1||Z+1>=L.length||(me=$[Z-1])!=="EN"&&me!=="AN"||(ge=L[Z+1])!=="EN"&&ge!=="AN"?le="N":E&&(ge="AN"),le=ge===me?ge:"N";break;case"ES":le=(me=Z>0?$[Z-1]:"B")==="EN"&&Z+1<L.length&&L[Z+1]==="EN"?"EN":"N";break;case"ET":if(Z>0&&$[Z-1]==="EN"){le="EN";break}if(E){le="N";break}for(pe=Z+1,te=L.length;pe<te&&L[pe]==="ET";)pe++;le=pe<te&&L[pe]==="EN"?"EN":"N";break;case"NSM":if(a&&!s){for(te=L.length,pe=Z+1;pe<te&&L[pe]==="NSM";)pe++;if(pe<te){var ye=A[Z],we=ye>=1425&&ye<=2303||ye===64286;if(me=L[pe],we&&(me==="R"||me==="AL")){le="R";break}}}le=Z<1||(me=L[Z-1])==="B"?"N":$[Z-1];break;case"B":E=!1,r=!0,le=w;break;case"S":o=!0,le="N"}return le},H=function(A,L,$){var Z=A.split("");return $&&R(Z,$,{hiLevel:w}),Z.reverse(),L&&L.reverse(),Z.join("")},R=function(A,L,$){var Z,me,ge,pe,te,le=-1,ye=A.length,we=0,I=[],z=w?p:h,K=[];for(E=!1,r=!1,o=!1,me=0;me<ye;me++)K[me]=x(A[me]);for(ge=0;ge<ye;ge++){if(te=we,I[ge]=B(A,K,I,ge),Z=240&(we=z[te][m[I[ge]]]),we&=15,L[ge]=pe=z[we][5],Z>0)if(Z===16){for(me=le;me<ge;me++)L[me]=1;le=-1}else le=-1;if(z[we][6])le===-1&&(le=ge);else if(le>-1){for(me=le;me<ge;me++)L[me]=pe;le=-1}K[ge]==="B"&&(L[ge]=0),$.hiLevel|=pe}o&&function(ee,T,N){for(var P=0;P<N;P++)if(ee[P]==="S"){T[P]=w;for(var j=P-1;j>=0&&ee[j]==="WS";j--)T[j]=w}}(K,L,ye)},O=function(A,L,$,Z,me){if(!(me.hiLevel<A)){if(A===1&&w===1&&!r)return L.reverse(),void($&&$.reverse());for(var ge,pe,te,le,ye=L.length,we=0;we<ye;){if(Z[we]>=A){for(te=we+1;te<ye&&Z[te]>=A;)te++;for(le=we,pe=te-1;le<pe;le++,pe--)ge=L[le],L[le]=L[pe],L[pe]=ge,$&&(ge=$[le],$[le]=$[pe],$[pe]=ge);we=te}we++}}},D=function(A,L,$){var Z=A.split(""),me={hiLevel:w};return $||($=[]),R(Z,$,me),function(ge,pe,te){if(te.hiLevel!==0&&u)for(var le,ye=0;ye<ge.length;ye++)pe[ye]===1&&(le=_.indexOf(ge[ye]))>=0&&(ge[ye]=_[le+1])}(Z,$,me),O(2,Z,L,$,me),O(1,Z,L,$,me),Z.join("")};return this.__bidiEngine__.doBidiReorder=function(A,L,$){if(function(me,ge){if(ge)for(var pe=0;pe<me.length;pe++)ge[pe]=pe;s===void 0&&(s=M(me)),c===void 0&&(c=M(me))}(A,L),a||!l||c)if(a&&l&&s^c)w=s?1:0,A=H(A,L,$);else if(!a&&l&&c)w=s?1:0,A=D(A,L,$),A=H(A,L);else if(!a||s||l||c){if(a&&!l&&s^c)A=H(A,L),s?(w=0,A=D(A,L,$)):(w=1,A=D(A,L,$),A=H(A,L));else if(a&&s&&!l&&c)w=1,A=D(A,L,$),A=H(A,L);else if(!a&&!l&&s^c){var Z=u;s?(w=1,A=D(A,L,$),w=0,u=!1,A=D(A,L,$),u=Z):(w=0,A=D(A,L,$),A=H(A,L),w=1,u=!1,A=D(A,L,$),u=Z,A=H(A,L))}}else w=0,A=D(A,L,$);else w=s?1:0,A=D(A,L,$);return A},this.__bidiEngine__.setOptions=function(A){A&&(a=A.isInputVisual,l=A.isOutputVisual,s=A.isInputRtl,c=A.isOutputRtl,u=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var r=i.text;i.x,i.y;var o=i.options||{};i.mutex,o.lang;var a=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(r)==="[object Array]"){var s=0;for(a=[],s=0;s<r.length;s+=1)Object.prototype.toString.call(r[s])==="[object Array]"?a.push([n.doBidiReorder(r[s][0]),r[s][1],r[s][2]]):a.push([n.doBidiReorder(r[s])]);i.text=a}else i.text=n.doBidiReorder(r);n.setOptions({isInputVisual:!0})}])}(ut),ut.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Ul(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new VU(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new MU(this.contents),this.head=new DU(this),this.name=new jU(this),this.cmap=new CM(this),this.toUnicode={},this.hhea=new LU(this),this.maxp=new $U(this),this.hmtx=new GU(this),this.post=new BU(this),this.os2=new OU(this),this.loca=new HU(this),this.glyf=new UU(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,i,r,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,s,l,c;for(c=[],a=0,s=(l=this.bbox).length;a<s;a++)t=l[a],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(n=r>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,i){var r,o,a,s;for(a=0,o=0,s=(t=""+t).length;0<=s?o<s:o>s;o=0<=s?++o:--o)r=t.charCodeAt(o),a+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var fa,Ul=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,i;for(i=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var n,i,r;for(r=[],n=0,i=t.length;0<=i?n<i:n>i;n=0<=i?++n:--n)r.push(this.writeByte(t.charCodeAt(n)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,i,r,o,a,s,l;return t=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^o)+65536*(255^a)+256*(255^s)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*i+4294967296*r+16777216*o+65536*a+256*s+l},e.prototype.writeLongLong=function(t){var n,i;return n=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,i;for(n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push(this.readByte());return n},e.prototype.write=function(t){var n,i,r,o;for(o=[],i=0,r=t.length;i<r;i++)n=t[i],o.push(this.writeByte(n));return o},e}(),MU=function(){var e;function t(n){var i,r,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},r=0,o=this.tableCount;0<=o?r<o:r>o;r=0<=o?++r:--r)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(n){var i,r,o,a,s,l,c,u,d,h,p,m,v;for(v in p=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),a=Math.floor(d/l),u=16*p-d,(r=new Ul).writeInt(this.scalarType),r.writeShort(p),r.writeShort(d),r.writeShort(a),r.writeShort(u),o=16*p,c=r.pos+o,s=null,m=[],n)for(h=n[v],r.writeString(v),r.writeInt(e(h)),r.writeInt(c),r.writeInt(h.length),m=m.concat(h),v==="head"&&(s=c),c+=h.length;c%4;)m.push(0),c++;return r.write(m),i=2981146554-e(r.data),r.pos=s+8,r.writeUInt32(i),r.data},e=function(n){var i,r,o,a;for(n=RM.call(n);n.length%4;)n.push(0);for(o=new Ul(n),r=0,i=0,a=n.length;i<a;i=i+=4)r+=o.readUInt32();return 4294967295&r},t}(),IU={}.hasOwnProperty,qa=function(e,t){for(var n in t)IU.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};fa=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var DU=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,fa),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Ul).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),Mk=function(){function e(t,n){var i,r,o,a,s,l,c,u,d,h,p,m,v,_,b,E,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,o=function(){var x,M;for(M=[],l=x=0;0<=h?x<h:x>h;l=0<=h?++x:--x)M.push(t.readUInt16());return M}(),t.pos+=2,v=function(){var x,M;for(M=[],l=x=0;0<=h?x<h:x>h;l=0<=h?++x:--x)M.push(t.readUInt16());return M}(),c=function(){var x,M;for(M=[],l=x=0;0<=h?x<h:x>h;l=0<=h?++x:--x)M.push(t.readUInt16());return M}(),u=function(){var x,M;for(M=[],l=x=0;0<=h?x<h:x>h;l=0<=h?++x:--x)M.push(t.readUInt16());return M}(),r=(this.length-t.pos+this.offset)/2,s=function(){var x,M;for(M=[],l=x=0;0<=r?x<r:x>r;l=0<=r?++x:--x)M.push(t.readUInt16());return M}(),l=b=0,w=o.length;b<w;l=++b)for(_=o[l],i=E=m=v[l];m<=_?E<=_:E>=_;i=m<=_?++E:--E)u[l]===0?a=i+c[l]:(a=s[u[l]/2+(i-m)-(h-l)]||0)!==0&&(a+=c[l]),this.codeMap[i]=65535&a}t.pos=d}return e.encode=function(t,n){var i,r,o,a,s,l,c,u,d,h,p,m,v,_,b,E,w,x,M,B,H,R,O,D,A,L,$,Z,me,ge,pe,te,le,ye,we,I,z,K,ee,T,N,P,j,Y,ae,ke;switch(Z=new Ul,a=Object.keys(t).sort(function(Ae,Le){return Ae-Le}),n){case"macroman":for(v=0,_=function(){var Ae=[];for(m=0;m<256;++m)Ae.push(0);return Ae}(),E={0:0},o={},me=0,le=a.length;me<le;me++)E[j=t[r=a[me]]]==null&&(E[j]=++v),o[r]={old:t[r],new:E[t[r]]},_[r]=E[t[r]];return Z.writeUInt16(1),Z.writeUInt16(0),Z.writeUInt32(12),Z.writeUInt16(0),Z.writeUInt16(262),Z.writeUInt16(0),Z.write(_),{charMap:o,subtable:Z.data,maxGlyphID:v+1};case"unicode":for(L=[],d=[],w=0,E={},i={},b=c=null,ge=0,ye=a.length;ge<ye;ge++)E[M=t[r=a[ge]]]==null&&(E[M]=++w),i[r]={old:M,new:E[M]},s=E[M]-r,b!=null&&s===c||(b&&d.push(b),L.push(r),c=s),b=r;for(b&&d.push(b),d.push(65535),L.push(65535),D=2*(O=L.length),R=2*Math.pow(Math.log(O)/Math.LN2,2),h=Math.log(R/2)/Math.LN2,H=2*O-R,l=[],B=[],p=[],m=pe=0,we=L.length;pe<we;m=++pe){if(A=L[m],u=d[m],A===65535){l.push(0),B.push(0);break}if(A-($=i[A].new)>=32768)for(l.push(0),B.push(2*(p.length+O-m)),r=te=A;A<=u?te<=u:te>=u;r=A<=u?++te:--te)p.push(i[r].new);else l.push($-A),B.push(0)}for(Z.writeUInt16(3),Z.writeUInt16(1),Z.writeUInt32(12),Z.writeUInt16(4),Z.writeUInt16(16+8*O+2*p.length),Z.writeUInt16(0),Z.writeUInt16(D),Z.writeUInt16(R),Z.writeUInt16(h),Z.writeUInt16(H),N=0,I=d.length;N<I;N++)r=d[N],Z.writeUInt16(r);for(Z.writeUInt16(0),P=0,z=L.length;P<z;P++)r=L[P],Z.writeUInt16(r);for(Y=0,K=l.length;Y<K;Y++)s=l[Y],Z.writeUInt16(s);for(ae=0,ee=B.length;ae<ee;ae++)x=B[ae],Z.writeUInt16(x);for(ke=0,T=p.length;ke<T;ke++)v=p[ke],Z.writeUInt16(v);return{charMap:i,subtable:Z.data,maxGlyphID:w+1}}},e}(),CM=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,fa),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,i,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n=new Mk(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var i,r;return n==null&&(n="macroman"),i=Mk.encode(t,n),(r=new Ul).writeUInt16(0),r.writeUInt16(1),i.table=r.data.concat(i.subtable),i},e}(),LU=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,fa),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),OU=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,fa),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(t.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),BU=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,fa),e.prototype.tag="post",e.prototype.parse=function(t){var n,i,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)n=t.readByte(),r.push(this.names.push(t.readString(n)));return r;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=(function(){var a,s,l;for(l=[],o=a=0,s=this.file.maxp.numGlyphs;0<=s?a<s:a>s;o=0<=s?++a:--a)l.push(t.readUInt32());return l}).call(this)}},e}(),FU=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},jU=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,fa),e.prototype.tag="name",e.prototype.parse=function(t){var n,i,r,o,a,s,l,c,u,d,h;for(t.pos=this.offset,t.readShort(),n=t.readShort(),s=t.readShort(),i=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()});for(l={},o=u=0,d=i.length;u<d;o=++u)r=i[o],t.pos=r.offset,c=t.readString(r.length),a=new FU(c,r),l[h=r.nameID]==null&&(l[h]=[]),l[r.nameID].push(a);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},e}(),$U=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,fa),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),GU=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,fa),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,i,r,o,a,s,l;for(t.pos=this.offset,this.metrics=[],n=0,s=this.file.hhea.numberOfMetrics;0<=s?n<s:n>s;n=0<=s?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],n=c=0;0<=r?c<r:c>r;n=0<=r?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,d,h;for(h=[],c=0,u=(d=this.metrics).length;c<u;c++)o=d[c],h.push(o.advance);return h}).call(this),i=this.widths[this.widths.length-1],l=[],n=a=0;0<=r?a<r:a>r;n=0<=r?++a:--a)l.push(this.widths.push(i));return l},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),RM=[].slice,UU=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,fa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,i,r,o,a,s,l,c,u,d;return t in this.cache?this.cache[t]:(o=this.file.loca,n=this.file.contents,i=o.indexOf(t),(r=o.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+i,a=(s=new Ul(n.read(r))).readShort(),c=s.readShort(),d=s.readShort(),l=s.readShort(),u=s.readShort(),this.cache[t]=a===-1?new zU(s,c,d,l,u):new qU(s,a,c,d,l,u),this.cache[t]))},e.prototype.encode=function(t,n,i){var r,o,a,s,l;for(a=[],o=[],s=0,l=n.length;s<l;s++)r=t[n[s]],o.push(a.length),r&&(a=a.concat(r.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),qU=function(){function e(t,n,i,r,o,a){this.raw=t,this.numberOfContours=n,this.xMin=i,this.yMin=r,this.xMax=o,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),zU=function(){function e(t,n,i,r,o){var a,s;for(this.raw=t,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;s=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&s;)a.pos+=1&s?4:2,128&s?a.pos+=8:64&s?a.pos+=4:8&s&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,i;for(n=new Ul(RM.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),HU=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return qa(e,fa),e.prototype.tag="loca",e.prototype.parse=function(t){var n,i;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var r,o;for(o=[],i=0,r=this.length;i<r;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var r,o;for(o=[],i=0,r=this.length;i<r;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var i=new Uint32Array(this.offsets.length),r=0,o=0,a=0;a<i.length;++a)if(i[a]=r,o<n.length&&n[o]==a){++o,i[a]=r;var s=this.offsets[a],l=this.offsets[a+1]-s;l>0&&(r+=l)}for(var c=new Array(4*i.length),u=0;u<i.length;++u)c[4*u+3]=255&i[u],c[4*u+2]=(65280&i[u])>>8,c[4*u+1]=(16711680&i[u])>>16,c[4*u]=(4278190080&i[u])>>24;return c},e}(),VU=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,i,r,o;for(n in r=this.font.cmap.tables[0].codeMap,t={},o=this.subset)i=o[n],t[n]=r[i];return t},e.prototype.glyphsFor=function(t){var n,i,r,o,a,s,l;for(r={},a=0,s=t.length;a<s;a++)r[o=t[a]]=this.font.glyf.glyphFor(o);for(o in n=[],r)(i=r[o])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(o in l=this.glyphsFor(n))i=l[o],r[o]=i;return r},e.prototype.encode=function(t,n){var i,r,o,a,s,l,c,u,d,h,p,m,v,_,b;for(r in i=CM.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),p={0:0},b=i.charMap)p[(l=b[r]).old]=l.new;for(m in h=i.maxGlyphID,a)m in p||(p[m]=h++);return u=function(E){var w,x;for(w in x={},E)x[E[w]]=w;return x}(p),d=Object.keys(u).sort(function(E,w){return E-w}),v=function(){var E,w,x;for(x=[],E=0,w=d.length;E<w;E++)s=d[E],x.push(u[s]);return x}(),o=this.font.glyf.encode(a,v,p),c=this.font.loca.encode(o.offsets,v),_={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},e}();ut.API.PDFObject=function(){var e;function t(){}return e=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},t.convert=function(n){var i,r,o,a;if(Array.isArray(n))return"["+function(){var s,l,c;for(c=[],s=0,l=n.length;s<l;s++)i=n[s],c.push(t.convert(i));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(r in o=["<<"],n)a=n[r],o.push("/"+r+" "+t.convert(a));return o.push(">>"),o.join(`
`)}return""+n},t}();function We(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function WU(e,t){return t={exports:{}},e(t,t.exports),t.exports}var KU=WU(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,n/o))/Math.log(i)*o;for(var a=r-Math.floor(r),s="",o=0;o<Math.floor(r);o++){var l=Math.floor(Math.random()*i).toString(i);s=l+s}if(a){var c=Math.pow(i,a),l=Math.floor(Math.random()*c).toString(i);s=l+s}var u=parseInt(s,i);return u!==1/0&&u>=Math.pow(2,n)?t(n,i):s};t.rack=function(n,i,r){var o=function(s){var l=0;do{if(l++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var c=t(n,i)}while(Object.hasOwnProperty.call(a,c));return a[c]=s,c},a=o.hats={};return o.get=function(s){return o.hats[s]},o.set=function(s,l){return o.hats[s]=l,o},o.bits=n||128,o.base=i||16,o}});function $a(e){if(!(this instanceof $a))return new $a(e);e=e||[128,36,1],this._seed=e.length?KU.rack(e[0],e[1],e[2]):e}$a.prototype.next=function(e){return this._seed(e||!0)};$a.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};$a.prototype.claim=function(e,t){this._seed.set(e,t||!0)};$a.prototype.assigned=function(e){return this._seed.get(e)||!1};$a.prototype.unclaim=function(e){delete this._seed.hats[e]};$a.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};function Xx(e){return Array.prototype.concat.apply([],e)}const Xf=Object.prototype.toString,YU=Object.prototype.hasOwnProperty;function gu(e){return e===void 0}function Ai(e){return e!==void 0}function If(e){return e==null}function bt(e){return Xf.call(e)==="[object Array]"}function Ci(e){return Xf.call(e)==="[object Object]"}function pt(e){return Xf.call(e)==="[object Number]"}function ui(e){const t=Xf.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function Br(e){return Xf.call(e)==="[object String]"}function JU(e){if(!bt(e))throw new Error("must supply array")}function xr(e,t){return!If(e)&&YU.call(e,t)}function Wt(e,t){const n=Ay(t);let i;return ue(e,function(r,o){if(n(r,o))return i=r,!1}),i}function MM(e,t){const n=Ay(t);let i=bt(e)?-1:void 0;return ue(e,function(r,o){if(n(r,o))return i=o,!1}),i}function It(e,t){const n=Ay(t);let i=[];return ue(e,function(r,o){n(r,o)&&i.push(r)}),i}function ue(e,t){let n,i;if(gu(e))return;const r=bt(e)?tq:eq;for(let o in e)if(xr(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function XU(e,t){if(gu(e))return[];JU(e);const n=Ay(t);return e.filter(function(i,r){return!n(i,r)})}function Fr(e,t,n){return ue(e,function(i,r){n=t(n,i,r)}),n}function ku(e,t){return!!Fr(e,function(n,i,r){return n&&t(i,r)},!0)}function Jl(e,t){return!!Wt(e,t)}function Zi(e,t){let n=[];return ue(e,function(i,r){n.push(t(i,r))}),n}function Ov(e){return e&&Object.keys(e)||[]}function ZU(e){return Ov(e).length}function Zx(e){return Zi(e,t=>t)}function yp(e,t,n={}){return t=Qx(t),ue(e,function(i){let r=t(i)||"_",o=n[r];o||(o=n[r]=[]),o.push(i)}),n}function IM(e,...t){e=Qx(e);let n={};return ue(t,r=>yp(r,e,n)),Zi(n,function(r,o){return r[0]})}const QU=IM;function Ga(e,t){t=Qx(t);let n=[];return ue(e,function(i,r){let o=t(i,r),a={d:o,v:i};for(var s=0;s<n.length;s++){let{d:l}=n[s];if(o<l){n.splice(s,0,a);return}}n.push(a)}),Zi(n,i=>i.v)}function la(e){return function(t){return ku(e,function(n,i){return t[i]===n})}}function Qx(e){return ui(e)?e:t=>t[e]}function Ay(e){return ui(e)?e:t=>t===e}function eq(e){return e}function tq(e){return Number(e)}function DM(e,t){let n,i,r,o;function a(d){let h=Date.now(),p=d?0:o+t-h;if(p>0)return s(p);e.apply(r,i),l()}function s(d){n=setTimeout(a,d)}function l(){n&&clearTimeout(n),n=o=i=r=void 0}function c(){n&&a(!0),l()}function u(...d){o=Date.now(),i=d,r=this,n||s(t)}return u.flush=c,u.cancel=l,u}function pa(e,t){return e.bind(t)}function be(e,...t){return Object.assign(e,...t)}function nq(e,t,n){let i=e;return ue(t,function(r,o){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let a=t[o+1],s=i[r];Ai(a)&&If(s)&&(s=i[r]=isNaN(+a)?{}:[]),gu(a)?gu(n)?delete i[r]:i[r]=n:i=s}),e}function Is(e,t){let n={},i=Object(e);return ue(t,function(r){r in i&&(n[r]=e[r])}),n}function Lo(e,t){let n={},i=Object(e);return ue(i,function(r,o){t.indexOf(o)===-1&&(n[o]=r)}),n}function iq(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const rq=Object.prototype.toString,oq=Object.prototype.hasOwnProperty;function aq(e){return e===void 0}function sq(e){return rq.call(e)==="[object Array]"}function lq(e,t){return oq.call(e,t)}function Ik(e,t){let n,i;if(aq(e))return;const r=sq(e)?uq:cq;for(let o in e)if(lq(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function cq(e){return e}function uq(e){return Number(e)}function Ji(e,...t){const n=e.style;return Ik(t,function(i){i&&Ik(i,function(r,o){n[o]=r})}),e}function pr(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const dq=Object.prototype.toString;function In(e){return new ql(e)}function ql(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}ql.prototype.add=function(e){return this.list.add(e),this};ql.prototype.remove=function(e){return dq.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};ql.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};ql.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};ql.prototype.array=function(){return Array.from(this.list)};ql.prototype.has=ql.prototype.contains=function(e){return this.list.contains(e)};function Ty(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Xl(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var Bv={},Fv,ow,e5;function LM(){Fv=window.addEventListener?"addEventListener":"attachEvent",ow=window.removeEventListener?"removeEventListener":"detachEvent",e5=Fv!=="addEventListener"?"on":""}var pq=Bv.bind=function(e,t,n,i){return Fv||LM(),e[Fv](e5+t,n,i||!1),n},hq=Bv.unbind=function(e,t,n,i){return ow||LM(),e[ow](e5+t,n,i||!1),n},Vt=iq({__proto__:null,bind:pq,unbind:hq,default:Bv},[Bv]),OM=["focus","blur"];function fq(e,t,n,i,r){return OM.indexOf(n)!==-1&&(r=!0),Vt.bind(e,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=Xl(a,t,!0),o.delegateTarget&&i.call(e,o)},r)}function mq(e,t,n,i){return OM.indexOf(t)!==-1&&(i=!0),Vt.unbind(e,t,n,i)}var Ir={bind:fq,unbind:mq},gq=vq,BM=!1,Gg;typeof document<"u"&&(Gg=document.createElement("div"),Gg.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',BM=!Gg.getElementsByTagName("link").length,Gg=void 0);var ii={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:BM?[1,"X<div>","</div>"]:[0,"",""]};ii.td=ii.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];ii.option=ii.optgroup=[1,'<select multiple="multiple">',"</select>"];ii.thead=ii.tbody=ii.colgroup=ii.caption=ii.tfoot=[1,"<table>","</table>"];ii.polyline=ii.ellipse=ii.polygon=ii.circle=ii.text=ii.line=ii.path=ii.rect=ii.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function vq(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var l=t.createElement("html");return l.innerHTML=e,l.removeChild(l.lastChild)}var r=Object.prototype.hasOwnProperty.call(ii,i)?ii[i]:ii._default,o=r[0],a=r[1],s=r[2],l=t.createElement("div");for(l.innerHTML=a+e+s;o--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var c=t.createDocumentFragment();l.firstChild;)c.appendChild(l.removeChild(l.firstChild));return c}var _n=gq;function Cy(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function rn(e,t){return t=t||document,t.querySelector(e)}function aw(e,t){return t=t||document,t.querySelectorAll(e)}function vu(e){e.parentNode&&e.parentNode.removeChild(e)}function yq(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function _q(e,t){return t.appendChild(yq(e,t))}function ft(e,t){return _q(t,e),e}var sw=2,FM={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":sw,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":sw,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function bq(e,t){return FM[t]?e.style[t]:e.getAttributeNS(null,t)}function jM(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=FM[i];r?(r===sw&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function wq(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)jM(e,r,t[r])}function He(e,t,n){if(typeof t=="string")if(n!==void 0)jM(e,t,n);else return bq(e,t);else wq(e,t);return e}const xq=Object.prototype.toString;function Gt(e){return new zl(e)}function zl(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}zl.prototype.add=function(e){return this.list.add(e),this};zl.prototype.remove=function(e){return xq.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};zl.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};zl.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};zl.prototype.array=function(){return Array.from(this.list)};zl.prototype.has=zl.prototype.contains=function(e){return this.list.contains(e)};function Ry(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function $M(e){return e.cloneNode(!0)}var t5={svg:"http://www.w3.org/2000/svg"},Dk='<svg xmlns="'+t5.svg+'"';function Eq(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(t5.svg)===-1&&(e=Dk+e.substring(4)):(e=Dk+">"+e+"</svg>",t=!0);var n=Sq(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function Sq(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Qe(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=Eq(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(t5.svg,e),t&&He(n,t),n}var fb=null;function GM(){return fb===null&&(fb=Qe("svg")),fb}function Lk(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function Nq(e,t,n,i,r,o){var a=GM().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return Lk(a,e);case 6:return Lk(a,{a:e,b:t,c:n,d:i,e:r,f:o})}}function Zh(e){return GM().createSVGTransform()}var Ok=/([&<>]{1})/g,kq=/([&<>\n\r"]{1})/g,Pq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function mb(e,t){function n(i,r){return Pq[r]||r}return e.replace(t,n)}function UM(e,t){var n,i,r,o,a;switch(e.nodeType){case 3:t.push(mb(e.textContent,Ok));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',mb(o.value,kq),'"');if(e.hasChildNodes()){for(t.push(">"),a=e.childNodes,n=0,i=a.length;n<i;++n)UM(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",mb(e.nodeValue,Ok),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function Aq(e){for(var t=e.firstChild,n=[];t;)UM(t,n),t=t.nextSibling;return n.join("")}function Bk(e,t){return Aq(e)}function ci(e){var t=e.parentNode;return t&&t.removeChild(e),e}function Tq(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Cq(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(Tq(e,i))}function Df(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),Cq(n,t)),n.consolidate()}const Rq=/^class[ {]/;function Mq(e){return Rq.test(e.toString())}function n5(e){return Array.isArray(e)}function gb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function B0(...e){e.length===1&&n5(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const Iq=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Dq=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Lq=/\/\*([^*]*)\*\//m;function Oq(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(Mq(e)?Iq:Dq);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(Lq);return(r&&r[1]||i).trim()})||[]}function qM(e,t){const n=t||{get:function(w,x){if(i.push(w),x===!1)return null;throw s(`No provider for "${w}"!`)}},i=[],r=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),a=o.injector=this,s=function(w){const x=i.join(" -> ");return i.length=0,new Error(x?`${w} (Resolving: ${x})`:w)};function l(w,x){if(!r[w]&&w.includes(".")){const M=w.split(".");let B=l(M.shift());for(;M.length;)B=B[M.shift()];return B}if(gb(o,w))return o[w];if(gb(r,w)){if(i.indexOf(w)!==-1)throw i.push(w),s("Cannot resolve circular dependency!");return i.push(w),o[w]=r[w][0](r[w][1]),i.pop(),o[w]}return n.get(w,x)}function c(w,x){if(typeof x>"u"&&(x={}),typeof w!="function")if(n5(w))w=B0(w.slice());else throw s(`Cannot invoke "${w}". Expected a function!`);const B=(w.$inject||Oq(w)).map(H=>gb(x,H)?x[H]:l(H));return{fn:w,dependencies:B}}function u(w){const{fn:x,dependencies:M}=c(w),B=Function.prototype.bind.call(x,null,...M);return new B}function d(w,x,M){const{fn:B,dependencies:H}=c(w,M);return B.apply(x,H)}function h(w){return B0(x=>w.get(x))}function p(w,x){if(x&&x.length){const M=Object.create(null),B=Object.create(null),H=[],R=[],O=[];let D,A,L,$;for(let Z in r)D=r[Z],x.indexOf(Z)!==-1&&(D[2]==="private"?(A=H.indexOf(D[3]),A===-1?(L=D[3].createChild([],x),$=h(L),H.push(D[3]),R.push(L),O.push($),M[Z]=[$,Z,"private",L]):M[Z]=[O[A],Z,"private",R[A]]):M[Z]=[D[2],D[1]],B[Z]=!0),(D[2]==="factory"||D[2]==="type")&&D[1].$scope&&x.forEach(me=>{D[1].$scope.indexOf(me)!==-1&&(M[Z]=[D[2],D[1]],B[me]=!0)});x.forEach(Z=>{if(!B[Z])throw new Error('No provider for "'+Z+'". Cannot use provider from the parent!')}),w.unshift(M)}return new qM(w,a)}const m={factory:d,type:u,value:function(w){return w}};function v(w,x){const M=w.__init__||[];return function(){M.forEach(B=>{typeof B=="string"?x.get(B):x.invoke(B)})}}function _(w){const x=w.__exports__;if(x){const M=w.__modules__,B=Object.keys(w).reduce((A,L)=>(L!=="__exports__"&&L!=="__modules__"&&L!=="__init__"&&L!=="__depends__"&&(A[L]=w[L]),A),Object.create(null)),H=(M||[]).concat(B),R=p(H),O=B0(function(A){return R.get(A)});x.forEach(function(A){r[A]=[O,A,"private",R]});const D=(w.__init__||[]).slice();return D.unshift(function(){R.init()}),w=Object.assign({},w,{__init__:D}),v(w,R)}return Object.keys(w).forEach(function(M){if(M==="__init__"||M==="__depends__")return;const B=w[M];if(B[2]==="private"){r[M]=B;return}const H=B[0],R=B[1];r[M]=[m[H],Bq(H,R),H]}),v(w,a)}function b(w,x){return w.indexOf(x)!==-1||(w=(x.__depends__||[]).reduce(b,w),w.indexOf(x)!==-1)?w:w.concat(x)}function E(w){const x=w.reduce(b,[]).map(_);let M=!1;return function(){M||(M=!0,x.forEach(B=>B()))}}this.get=l,this.invoke=d,this.instantiate=u,this.createChild=p,this.init=E(e)}function Bq(e,t){return e!=="value"&&n5(t)&&(t=B0(t.slice())),t}var Fq=1e3;function Bs(e,t){var n=this;t=t||Fq,e.on(["render.shape","render.connection"],t,function(i,r){var o=i.type,a=r.element,s=r.gfx,l=r.attrs;if(n.canRender(a))return o==="render.shape"?n.drawShape(s,a,l):n.drawConnection(s,a,l)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}Bs.prototype.canRender=function(e){};Bs.prototype.drawShape=function(e,t){};Bs.prototype.drawConnection=function(e,t){};Bs.prototype.getShapePath=function(e){};Bs.prototype.getConnectionPath=function(e){};function Pu(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function jq(e){return["M",e.x,e.y]}function vb(e){return["L",e.x,e.y]}function $q(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function Gq(e,t){const n=e.length,i=[jq(e[0])];for(let r=1;r<n;r++){const o=e[r-1],a=e[r],s=e[r+1];if(!s||!t){i.push(vb(a));continue}const l=Math.min(t,lw(a.x-o.x,a.y-o.y),lw(s.x-a.x,s.y-a.y));if(!l){i.push(vb(a));continue}const c=Ug(a,o,l),u=Ug(a,o,l*.5),d=Ug(a,s,l),h=Ug(a,s,l*.5);i.push(vb(c)),i.push($q(u,h,d))}return i}function Ug(e,t,n){const i=t.x-e.x,r=t.y-e.y,o=lw(i,r),a=n/o;return{x:e.x+i*a,y:e.y+r*a}}function lw(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function My(e,t,n){pt(t)&&(n=t,t=null),t||(t={});const i=Qe("path",t);return pt(n)&&(i.dataset.cornerRadius=String(n)),zM(i,e)}function zM(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return He(e,{d:Pu(Gq(t,n))}),e}function Iy(e){return It(e,function(t){return!Wt(e,function(n){return n!==t&&HM(t,n)})})}function HM(e,t){if(t){if(e===t)return t;if(e.parent)return HM(e.parent,t)}}function Fk(e,t,n){var i=!n||e.indexOf(t)===-1;return i&&e.push(t),i}function Au(e,t,n){n=n||0,bt(e)||(e=[e]),ue(e,function(i,r){var o=t(i,r,n);bt(o)&&o.length&&Au(o,t,n+1)})}function Uq(e,t,n){var i=[],r=[];return Au(e,function(o,a,s){Fk(i,o,t);var l=o.children;if(l&&Fk(r,l,t))return l}),i}function Zf(e,t){return Uq(e,!t)}function qq(e,t,n){gu(t)&&(t=!0),Ci(t)&&(n=t,t=!0),n=n||{};var i=_h(n.allShapes),r=_h(n.allConnections),o=_h(n.enclosedElements),a=_h(n.enclosedConnections),s=_h(n.topLevel,t&&yp(e,function(u){return u.id}));function l(u){s[u.source.id]&&s[u.target.id]&&(s[u.id]=[u]),i[u.source.id]&&i[u.target.id]&&(a[u.id]=o[u.id]=u),r[u.id]=u}function c(u){if(o[u.id]=u,u.waypoints)a[u.id]=r[u.id]=u;else return i[u.id]=u,ue(u.incoming,l),ue(u.outgoing,l),u.children}return Au(e,c),{allShapes:i,allConnections:r,topLevel:s,enclosedConnections:a,enclosedElements:o}}function yi(e,t){t=!!t,bt(e)||(e=[e]);var n,i,r,o;return ue(e,function(a){var s=a;a.waypoints&&!t&&(s=yi(a.waypoints,!0));var l=s.x,c=s.y,u=s.height||0,d=s.width||0;(l<n||n===void 0)&&(n=l),(c<i||i===void 0)&&(i=c),(l+d>r||r===void 0)&&(r=l+d),(c+u>o||o===void 0)&&(o=c+u)}),{x:n,y:i,height:o-i,width:r-n}}function zq(e,t){var n={};return ue(e,function(i){var r=i;r.waypoints&&(r=yi(r)),!pt(t.y)&&r.x>t.x&&(n[i.id]=i),!pt(t.x)&&r.y>t.y&&(n[i.id]=i),r.x>t.x&&r.y>t.y&&(pt(t.width)&&pt(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y||!pt(t.width)||!pt(t.height))&&(n[i.id]=i)}),n}function VM(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function WM(e){return!!(e&&e.isFrame)}function _h(e,t){return be({},e||{},t||{})}var Hq=1;function Zl(e,t){Bs.call(this,e,Hq),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}We(Zl,Bs);Zl.prototype.canRender=function(){return!0};Zl.prototype.drawShape=function(t,n,i){var r=Qe("rect");return He(r,{x:0,y:0,width:n.width||0,height:n.height||0}),WM(n)?He(r,be({},this.FRAME_STYLE,i||{})):He(r,be({},this.SHAPE_STYLE,i||{})),ft(t,r),r};Zl.prototype.drawConnection=function(t,n,i){var r=My(n.waypoints,be({},this.CONNECTION_STYLE,i||{}));return ft(t,r),r};Zl.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,o=t.height,a=[["M",n,i],["l",r,0],["l",0,o],["l",-r,0],["z"]];return Pu(a)};Zl.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,o=[];for(i=0;r=n[i];i++)r=r.original||r,o.push([i===0?"M":"L",r.x,r.y]);return Pu(o)};Zl.$inject=["eventBus","styles"];function Vq(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var o=this.style(i,r);return be(o,{class:n})},this.style=function(n,i){!bt(n)&&!i&&(i=n,n=[]);var r=Fr(n,function(o,a){return be(o,e[a]||{})},{});return i?be(r,i):r},this.computeStyle=function(n,i,r){return bt(i)||(r=i,i=[]),t.style(i||[],be({},r,n||{}))}}const Wq={__init__:["defaultRenderer"],defaultRenderer:["type",Zl],styles:["type",Vq]};function Yn(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function di(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function i5(e,t){return!e||!t?-1:e.indexOf(t)}function Qf(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function r5(e,t,n,i){if(typeof i>"u"&&(i=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=Qf(e,t);return Math.abs(r/o)<=i}var Kq=2;function Es(e,t){var n=Array.from(arguments).flat();const i={x:"v",y:"h"};for(const[r,o]of Object.entries(i))if(Yq(r,n))return o;return!1}function Yq(e,t){const n=t[0];return ku(t,function(i){return Math.abs(n[e]-i[e])<=Kq})}function jk(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function cw(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var Jq=/,?([a-z]),?/gi,$k=parseFloat,qn=Math,pl=qn.PI,Ra=qn.min,Ma=qn.max,Gk=qn.pow,Tl=qn.abs,Xq=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,Zq=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,jv=Array.isArray||function(e){return e instanceof Array};function o5(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Qh(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)o5(e,n)&&(t[n]=Qh(e[n]));return t}function Qq(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function ez(e){function t(){var n=Array.prototype.slice.call(arguments,0),i=n.join(""),r=t.cache=t.cache||{},o=t.count=t.count||[];return o5(r,i)?(Qq(o,i),r[i]):(o.length>=1e3&&delete r[o.shift()],o.push(i),r[i]=e(...arguments),r[i])}return t}function tz(e){if(!e)return null;var t=ep(e);if(t.arr)return Qh(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return jv(e)&&jv(e[0])&&(i=Qh(e)),i.length||String(e).replace(Xq,function(r,o,a){var s=[],l=o.toLowerCase();for(a.replace(Zq,function(c,u){u&&s.push(+u)}),l=="m"&&s.length>2&&(i.push([o,...s.splice(0,2)]),l="l",o=o=="m"?"l":"L");s.length>=n[l]&&(i.push([o,...s.splice(0,n[l])]),!!n[l]););}),i.toString=ep.toString,t.arr=Qh(i),i}function ep(e){var t=ep.ps=ep.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)o5(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function uw(e,t,n,i){return arguments.length===1&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,height:i,x2:e+n,y2:t+i}}function KM(){return this.join(",").replace(Jq,"$1")}function $v(e){var t=Qh(e);return t.toString=KM,t}function Uk(e,t,n,i,r,o,a,s,l){var c=1-l,u=Gk(c,3),d=Gk(c,2),h=l*l,p=h*l,m=u*e+d*3*l*n+c*3*l*l*r+p*a,v=u*t+d*3*l*i+c*3*l*l*o+p*s;return{x:Gv(m),y:Gv(v)}}function qk(e){var t=az(...e);return uw(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function hl(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function nz(e,t){return e=uw(e),t=uw(t),hl(t,e.x,e.y)||hl(t,e.x2,e.y)||hl(t,e.x,e.y2)||hl(t,e.x2,e.y2)||hl(e,t.x,t.y)||hl(e,t.x2,t.y)||hl(e,t.x,t.y2)||hl(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function zk(e,t,n,i,r){var o=-3*t+9*n-9*i+3*r,a=e*o+6*t-12*n+6*i;return e*a-3*t+3*n}function Hk(e,t,n,i,r,o,a,s,l){l==null&&(l=1),l=l>1?1:l<0?0:l;for(var c=l/2,u=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,m=0;m<u;m++){var v=c*d[m]+c,_=zk(v,e,n,r,a),b=zk(v,t,i,o,s),E=_*_+b*b;p+=h[m]*qn.sqrt(E)}return c*p}function iz(e,t,n,i,r,o,a,s){if(!(Ma(e,n)<Ra(r,a)||Ra(e,n)>Ma(r,a)||Ma(t,i)<Ra(o,s)||Ra(t,i)>Ma(o,s))){var l=(e*i-t*n)*(r-a)-(e-n)*(r*s-o*a),c=(e*i-t*n)*(o-s)-(t-i)*(r*s-o*a),u=(e-n)*(o-s)-(t-i)*(r-a);if(u){var d=Gv(l/u),h=Gv(c/u),p=+d.toFixed(2),m=+h.toFixed(2);if(!(p<+Ra(e,n).toFixed(2)||p>+Ma(e,n).toFixed(2)||p<+Ra(r,a).toFixed(2)||p>+Ma(r,a).toFixed(2)||m<+Ra(t,i).toFixed(2)||m>+Ma(t,i).toFixed(2)||m<+Ra(o,s).toFixed(2)||m>+Ma(o,s).toFixed(2)))return{x:d,y:h}}}}function Gv(e){return Math.round(e*1e11)/1e11}function rz(e,t,n){var i=qk(e),r=qk(t);if(!nz(i,r))return[];for(var o=Hk(...e),a=Hk(...t),s=Vk(e)?1:~~(o/5)||1,l=Vk(t)?1:~~(a/5)||1,c=[],u=[],d={},h=[],p=0;p<s+1;p++){var m=Uk(...e,p/s);c.push({x:m.x,y:m.y,t:p/s})}for(p=0;p<l+1;p++)m=Uk(...t,p/l),u.push({x:m.x,y:m.y,t:p/l});for(p=0;p<s;p++)for(var v=0;v<l;v++){var _=c[p],b=c[p+1],E=u[v],w=u[v+1],x=Tl(b.x-_.x)<.01?"y":"x",M=Tl(w.x-E.x)<.01?"y":"x",B=iz(_.x,_.y,b.x,b.y,E.x,E.y,w.x,w.y),H;if(B){if(H=B.x.toFixed(9)+"#"+B.y.toFixed(9),d[H])continue;d[H]=!0;var R=_.t+Tl((B[x]-_[x])/(b[x]-_[x]))*(b.t-_.t),O=E.t+Tl((B[M]-E[M])/(w[M]-E[M]))*(w.t-E.t);R>=0&&R<=1&&O>=0&&O<=1&&h.push({x:B.x,y:B.y,t1:R,t2:O})}}return h}function YM(e,t,n){e=Kk(e),t=Kk(t);for(var i,r,o,a,s,l,c,u,d,h,p=n?0:[],m=0,v=e.length;m<v;m++){var _=e[m];if(_[0]=="M")i=s=_[1],r=l=_[2];else{_[0]=="C"?(d=[i,r,..._.slice(1)],i=d[6],r=d[7]):(d=[i,r,i,r,s,l,s,l],i=s,r=l);for(var b=0,E=t.length;b<E;b++){var w=t[b];if(w[0]=="M")o=c=w[1],a=u=w[2];else{w[0]=="C"?(h=[o,a,...w.slice(1)],o=h[6],a=h[7]):(h=[o,a,o,a,c,u,c,u],o=c,a=u);var x=rz(d,h);{for(var M=0,B=x.length;M<B;M++)x[M].segment1=m,x[M].segment2=b,x[M].bez1=d,x[M].bez2=h;p=p.concat(x)}}}}}return p}function oz(e){var t=ep(e);if(t.abs)return $v(t.abs);if((!jv(e)||!jv(e&&e[0]))&&(e=tz(e)),!e||!e.length)return[["M",0,0]];var n=[],i=0,r=0,o=0,a=0,s=0,l;e[0][0]=="M"&&(i=+e[0][1],r=+e[0][2],o=i,a=r,s++,n[0]=["M",i,r]);for(var c,u,d=s,h=e.length;d<h;d++){if(n.push(c=[]),u=e[d],l=u[0],l!=l.toUpperCase())switch(c[0]=l.toUpperCase(),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+u[6]+i,c[7]=+u[7]+r;break;case"V":c[1]=+u[1]+r;break;case"H":c[1]=+u[1]+i;break;case"M":o=+u[1]+i,a=+u[2]+r;default:for(var p=1,m=u.length;p<m;p++)c[p]=+u[p]+(p%2?i:r)}else for(var v=0,_=u.length;v<_;v++)c[v]=u[v];switch(l=l.toUpperCase(),c[0]){case"Z":i=+o,r=+a;break;case"H":i=c[1];break;case"V":r=c[1];break;case"M":o=c[c.length-2],a=c[c.length-1];default:i=c[c.length-2],r=c[c.length-1]}}return n.toString=KM,t.abs=$v(n),n}function Vk(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function qg(e,t,n,i){return[e,t,n,i,n,i]}function Wk(e,t,n,i,r,o){var a=.3333333333333333,s=2/3;return[a*e+s*n,a*t+s*i,a*r+s*n,a*o+s*i,r,o]}function JM(e,t,n,i,r,o,a,s,l,c){var u=pl*120/180,d=pl/180*(+r||0),h=[],p,m=ez(function(N,P,j){var Y=N*qn.cos(j)-P*qn.sin(j),ae=N*qn.sin(j)+P*qn.cos(j);return{x:Y,y:ae}});if(c)H=c[0],R=c[1],M=c[2],B=c[3];else{p=m(e,t,-d),e=p.x,t=p.y,p=m(s,l,-d),s=p.x,l=p.y;var v=(e-s)/2,_=(t-l)/2,b=v*v/(n*n)+_*_/(i*i);b>1&&(b=qn.sqrt(b),n=b*n,i=b*i);var E=n*n,w=i*i,x=(o==a?-1:1)*qn.sqrt(Tl((E*w-E*_*_-w*v*v)/(E*_*_+w*v*v))),M=x*n*_/i+(e+s)/2,B=x*-i*v/n+(t+l)/2,H=qn.asin(((t-B)/i).toFixed(9)),R=qn.asin(((l-B)/i).toFixed(9));H=e<M?pl-H:H,R=s<M?pl-R:R,H<0&&(H=pl*2+H),R<0&&(R=pl*2+R),a&&H>R&&(H=H-pl*2),!a&&R>H&&(R=R-pl*2)}var O=R-H;if(Tl(O)>u){var D=R,A=s,L=l;R=H+u*(a&&R>H?1:-1),s=M+n*qn.cos(R),l=B+i*qn.sin(R),h=JM(s,l,n,i,r,0,a,A,L,[R,D,M,B])}O=R-H;var $=qn.cos(H),Z=qn.sin(H),me=qn.cos(R),ge=qn.sin(R),pe=qn.tan(O/4),te=4/3*n*pe,le=4/3*i*pe,ye=[e,t],we=[e+te*Z,t-le*$],I=[s+te*ge,l-le*me],z=[s,l];if(we[0]=2*ye[0]-we[0],we[1]=2*ye[1]-we[1],c)return[we,I,z].concat(h);h=[we,I,z].concat(h).join().split(",");for(var K=[],ee=0,T=h.length;ee<T;ee++)K[ee]=ee%2?m(h[ee-1],h[ee],d).y:m(h[ee],h[ee+1],d).x;return K}function az(e,t,n,i,r,o,a,s){for(var l=[],c=[[],[]],u,d,h,p,m,v,_,b,E=0;E<2;++E){if(E==0?(d=6*e-12*n+6*r,u=-3*e+9*n-9*r+3*a,h=3*n-3*e):(d=6*t-12*i+6*o,u=-3*t+9*i-9*o+3*s,h=3*i-3*t),Tl(u)<1e-12){if(Tl(d)<1e-12)continue;p=-h/d,0<p&&p<1&&l.push(p);continue}_=d*d-4*h*u,b=qn.sqrt(_),!(_<0)&&(m=(-d+b)/(2*u),0<m&&m<1&&l.push(m),v=(-d-b)/(2*u),0<v&&v<1&&l.push(v))}for(var w=l.length,x=w,M;w--;)p=l[w],M=1-p,c[0][w]=M*M*M*e+3*M*M*p*n+3*M*p*p*r+p*p*p*a,c[1][w]=M*M*M*t+3*M*M*p*i+3*M*p*p*o+p*p*p*s;return c[0][x]=e,c[1][x]=t,c[0][x+1]=a,c[1][x+1]=s,c[0].length=c[1].length=x+2,{x0:Ra(...c[0]),y0:Ra(...c[1]),x1:Ma(...c[0]),y1:Ma(...c[1])}}function Kk(e){var t=ep(e);if(t.curve)return $v(t.curve);for(var n=oz(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(p,m,v){var _,b;if(!p)return["C",m.x,m.y,m.x,m.y,m.x,m.y];switch(!(p[0]in{T:1,Q:1})&&(m.qx=m.qy=null),p[0]){case"M":m.X=p[1],m.Y=p[2];break;case"A":p=["C",...JM(m.x,m.y,...p.slice(1))];break;case"S":v=="C"||v=="S"?(_=m.x*2-m.bx,b=m.y*2-m.by):(_=m.x,b=m.y),p=["C",_,b,...p.slice(1)];break;case"T":v=="Q"||v=="T"?(m.qx=m.x*2-m.qx,m.qy=m.y*2-m.qy):(m.qx=m.x,m.qy=m.y),p=["C",...Wk(m.x,m.y,m.qx,m.qy,p[1],p[2])];break;case"Q":m.qx=p[1],m.qy=p[2],p=["C",...Wk(m.x,m.y,p[1],p[2],p[3],p[4])];break;case"L":p=["C",...qg(m.x,m.y,p[1],p[2])];break;case"H":p=["C",...qg(m.x,m.y,p[1],m.y)];break;case"V":p=["C",...qg(m.x,m.y,m.x,p[1])];break;case"Z":p=["C",...qg(m.x,m.y,m.X,m.Y)];break}return p},o=function(p,m){if(p[m].length>7){p[m].shift();for(var v=p[m];v.length;)a[m]="A",p.splice(m++,0,["C",...v.splice(0,6)]);p.splice(m,1),u=n.length}},a=[],s="",l="",c=0,u=n.length;c<u;c++){n[c]&&(s=n[c][0]),s!="C"&&(a[c]=s,c&&(l=a[c-1])),n[c]=r(n[c],i,l),a[c]!="A"&&s=="C"&&(a[c]="C"),o(n,c);var d=n[c],h=d.length;i.x=d[h-2],i.y=d[h-1],i.bx=$k(d[h-4])||i.x,i.by=$k(d[h-3])||i.y}return t.curve=$v(n),n}function on(e){return Ci(e)&&xr(e,"waypoints")}function qt(e){return Ci(e)&&xr(e,"labelTarget")}function XM(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function ks(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function at(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Dy(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function sz(e){return ks({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function lz(e){for(var t=e.waypoints,n=t.reduce(function(c,u,d){var h=t[d-1];if(h){var p=c[c.length-1],m=p&&p.endLength||0,v=dz(h,u);c.push({start:h,end:u,startLength:m,endLength:m+v,length:v})}return c},[]),i=n.reduce(function(c,u){return c+u.length},0),r=i/2,o=0,a=n[o];a.endLength<r;)a=n[++o];var s=(r-a.startLength)/a.length,l={x:a.start.x+(a.end.x-a.start.x)*s,y:a.start.y+(a.end.y-a.start.y)*s};return l}function ht(e){return on(e)?lz(e):sz(e)}function tr(e,t,n){n=n||0,Ci(n)||(n={x:n,y:n});var i=at(e),r=at(t),o=i.bottom+n.y<=r.top,a=i.left-n.x>=r.right,s=i.top-n.y>=r.bottom,l=i.right+n.x<=r.left,c=o?"top":s?"bottom":null,u=l?"left":a?"right":null;return u&&c?c+"-"+u:u||c||"intersect"}function dw(e,t,n){var i=cz(e,t);return i.length===1||i.length===2&&Qf(i[0],i[1])<1?ks(i[0]):i.length>1?(i=Ga(i,function(r){var o=Math.floor(r.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,r.segment2+"#"+o}),ks(i[n?0:i.length-1])):null}function cz(e,t){return YM(e,t)}function uz(e){e=e.slice();for(var t=0,n,i,r;e[t];)n=e[t],i=e[t-1],r=e[t+1],Qf(n,r)===0||r5(i,r,n)?e.splice(t,1):t++;return e}function dz(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function F0(e,t){return Math.round(e*t)/t}function Yk(e){return pt(e)?e+"px":e}function pz(e){for(;e.parent;)e=e.parent;return e}function hz(e){e=be({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Ji(n,{position:"relative",overflow:"hidden",width:Yk(e.width),height:Yk(e.height)}),t.appendChild(n),n}function ZM(e,t,n){const i=Qe("g");Gt(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const fz="base",QM=0,mz=1,gz={shape:["x","y","width","height"],connection:["waypoints"]};function St(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}St.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];St.prototype._init=function(e){const t=this._eventBus,n=this._container=hz(e),i=this._svg=Qe("svg");He(i,{width:"100%",height:"100%"}),ft(n,i);const r=this._viewport=ZM(i,"viewport");e.deferUpdate&&(this._viewboxChanged=DM(pa(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};St.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};St.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=VM(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};St.prototype.getDefaultLayer=function(){return this.getLayer(fz,QM)};St.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};St.prototype._getChildIndex=function(e){return Fr(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};St.prototype._createLayer=function(e,t){typeof t>"u"&&(t=mz);const n=this._getChildIndex(t);return{group:ZM(this._viewport,"layer-"+e,n),index:t,visible:!0}};St.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const o=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[o]||null),t.visible=!0,i};St.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(ci(n),t.visible=!1),n};St.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],ci(t.group))};St.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};St.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(pz(e))||{}).rootElement:void 0};St.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};St.prototype._findPlaneForRoot=function(e){return Wt(this._planes,function(t){return t.rootElement===e})};St.prototype.getContainer=function(){return this._container};St.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,i=this._elementRegistry._elements[e.id],i&&(ue([i.gfx,i.secondaryGfx],function(r){r&&(n?(e.markers.add(t),Gt(r).add(t)):(e.markers.delete(t),Gt(r).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};St.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};St.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};St.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};St.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};St.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};St.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,QM);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};St.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};St.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};St.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};St.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};St.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};St.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=gz[e];if(!ku(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};St.prototype._setParent=function(e,t,n){di(t.children,e,n),e.parent=t};St.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const a=o.create(e,t,i);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+".added",{element:t,gfx:a}),t};St.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};St.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};St.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),Yn(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};St.prototype.removeShape=function(e){return this._removeElement(e,"shape")};St.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};St.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};St.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};St.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};St.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let i,r,o,a,s,l,c;if(e)this._changeViewbox(function(){s=Math.min(n.width/e.width,n.height/e.height);const u=this._svg.createSVGMatrix().scale(s).translate(-e.x,-e.y);Df(t,u)});else return o=this._rootElement?this.getActiveLayer():null,i=o&&o.getBBox()||{},a=Df(t),r=a?a.matrix:Nq(),s=F0(r.a,1e3),l=F0(-r.e||0,1e3),c=F0(-r.f||0,1e3),e=this._cachedViewbox={x:l?l/s:0,y:c?c/s:0,width:n.width/s,height:n.height/s,scale:s,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};St.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=be({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),e6(t,n)}),{x:n.e,y:n.f}};St.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=yi(e),o=at(r),a=this.viewbox(),s=this.zoom();let l,c;a.y+=t.top/s,a.x+=t.left/s,a.width-=(t.right+t.left)/s,a.height-=(t.bottom+t.top)/s;const u=at(a);if(!(r.width<a.width&&r.height<a.height))l=r.x-a.x,c=r.y-a.y;else{const h=Math.max(0,o.right-u.right),p=Math.min(0,o.left-u.left),m=Math.max(0,o.bottom-u.bottom),v=Math.min(0,o.top-u.top);l=h||p,c=m||v}this.scroll({dx:-l*s,dy:-c*s})};St.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),F0(i.a,1e3)};function e6(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}St.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,o;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?o={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),o={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(o),this.viewbox(!1).scale};St.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),o=n.createSVGPoint();let a,s,l,c,u;l=i.getCTM();const d=l.a;return t?(a=be(o,t),s=a.matrixTransform(l.inverse()),c=r.translate(s.x,s.y).scale(1/d*e).translate(-s.x,-s.y),u=l.multiply(c)):u=r.scale(e),e6(this._viewport,u),u};St.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};St.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,a=n.height*t.scale;return{x:i,y:r,width:o,height:a}};St.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var tp="data-element-id";function co(e){this._elements={},this._eventBus=e}co.$inject=["eventBus"];co.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),He(t,tp,i),n&&He(n,tp,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};co.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(He(i.gfx,tp,""),i.secondaryGfx&&He(i.secondaryGfx,tp,""),delete t[n])};co.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};co.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&He(t,tp,i),t};co.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&He(e,tp);var n=this._elements[t];return n&&n.element};co.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};co.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],o=t[r],a=o.element,s=o.gfx;if(e(a,s))return a}};co.prototype.getAll=function(){return this.filter(function(e){return e})};co.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,o=i.gfx;return e(r,o)})};co.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};co.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function vz(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var a=this.indexOf(o);return a!==-1&&(this.splice(a,1),t.unset(o,r,i)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,a){var s=this.indexOf(o);if(typeof a>"u"){if(s!==-1)return;a=this.length}s!==-1&&this.splice(s,1),this.splice(a,0,o),s===-1&&t.set(o,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function yz(e){return e.__refs_collection===!0}function _z(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function t6(e,t,n){var i=vz(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function bz(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(o){if(o!==r){var a=r;r=null,a&&e.unset(a,i,n),r=o,e.set(r,i,n)}}})}function Oo(e,t){if(!(this instanceof Oo))return new Oo(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Oo.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?t6(this,t,e):bz(this,t,e)};Oo.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return yz(n)||t6(this,t,e),n};Oo.prototype.ensureBound=function(e,t){_z(e,t)||this.bind(e,t)};Oo.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};Oo.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var a5=new Oo({name:"children",enumerable:!0,collection:!0},{name:"parent"}),n6=new Oo({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Jk=new Oo({name:"attachers",collection:!0},{name:"host"}),i6=new Oo({name:"outgoing",collection:!0},{name:"source"}),r6=new Oo({name:"incoming",collection:!0},{name:"target"});function _p(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),a5.bind(this,"parent"),n6.bind(this,"labels"),i6.bind(this,"outgoing"),r6.bind(this,"incoming")}function em(){_p.call(this),a5.bind(this,"children"),Jk.bind(this,"host"),Jk.bind(this,"attachers")}We(em,_p);function o6(){_p.call(this),a5.bind(this,"children")}We(o6,em);function a6(){em.call(this),n6.bind(this,"labelTarget")}We(a6,em);function s6(){_p.call(this),i6.bind(this,"source"),r6.bind(this,"target")}We(s6,_p);var wz={connection:s6,shape:em,label:a6,root:o6};function xz(e,t){var n=wz[e];if(!n)throw new Error("unknown type: <"+e+">");return be(new n,t)}function Ez(e){return e instanceof _p}function Fs(){this._uid=12}Fs.prototype.createRoot=function(e){return this.create("root",e)};Fs.prototype.createLabel=function(e){return this.create("label",e)};Fs.prototype.createShape=function(e){return this.create("shape",e)};Fs.prototype.createConnection=function(e){return this.create("connection",e)};Fs.prototype.create=function(e,t){return t=be({},t||{}),t.id||(t.id=e+"_"+this._uid++),xz(e,t)};var Uv="__fn",l6=1e3,Sz=Array.prototype.slice;function $r(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}$r.prototype.on=function(e,t,n,i){if(e=bt(e)?e:[e],ui(t)&&(i=n,n=t,t=l6),!pt(t))throw new Error("priority must be a number");var r=n;i&&(r=pa(n,i),r[Uv]=n[Uv]||n);var o=this;e.forEach(function(a){o._addListener(a,{priority:t,callback:r,next:null})})};$r.prototype.once=function(e,t,n,i){var r=this;if(ui(t)&&(i=n,n=t,t=l6),!pt(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var a=n.apply(i,arguments);return r.off(e,o),a}o[Uv]=n,this.on(e,t,o)};$r.prototype.off=function(e,t){e=bt(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};$r.prototype.createEvent=function(e){var t=new tm;return t.init(e),t};$r.prototype.fire=function(e,t){var n,i,r,o;if(o=Sz.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof tm?n=t:n=this.createEvent(t),o[0]=n;var a=n.type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==a&&(n.type=a)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};$r.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};$r.prototype._destroy=function(){this._listeners={}};$r.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};$r.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=Nz(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};$r.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};$r.prototype._getListeners=function(e){return this._listeners[e]};$r.prototype._setListeners=function(e,t){this._listeners[e]=t};$r.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,o;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,o=n.callback,(o===t||o[Uv]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function tm(){}tm.prototype.stopPropagation=function(){this.cancelBubble=!0};tm.prototype.preventDefault=function(){this.defaultPrevented=!0};tm.prototype.init=function(e){be(this,e||{})};function Nz(e,t){return e.apply(null,t)}function lu(e){return e.childNodes[0]}function kz(e){return e.parentNode.childNodes[1]}function j0(e,t,n,i,r){var o=Zh();o.setTranslate(t,n);var a=Zh();a.setRotate(i||0,0,0);var s=Zh();s.setScale(1,1),Df(e,[o,a,s])}function Oi(e,t,n){var i=Zh();i.setTranslate(t,n),Df(e,i)}function c6(e,t){var n=Zh();n.setRotate(t,0,0),Df(e,n)}function uo(e,t){this._eventBus=e,this._elementRegistry=t}uo.$inject=["eventBus","elementRegistry"];uo.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=kz(t),n||(n=Qe("g"),Gt(n).add("djs-children"),ft(t.parentNode,n))):n=t,n};uo.prototype._clear=function(e){var t=lu(e);return Ty(t),t};uo.prototype._createContainer=function(e,t,n,i){var r=Qe("g");Gt(r).add("djs-group"),typeof n<"u"?u6(r,t,t.childNodes[n]):ft(t,r);var o=Qe("g");Gt(o).add("djs-element"),Gt(o).add("djs-"+e),i&&Gt(o).add("djs-frame"),ft(r,o);var a=Qe("g");return Gt(a).add("djs-visual"),ft(o,a),o};uo.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,WM(t))};uo.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=Fr(e,function(r,o){return o.parent&&(r[o.parent.id]=o.parent),r},{}),ue(i,function(r){var o=r.children;if(o){var a=t._getChildrenContainer(r);ue(o.slice().reverse(),function(s){var l=n.getGraphics(s);u6(l.parentNode,a)})}})};uo.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})};uo.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};uo.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})};uo.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};uo.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),Oi(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?He(n,"display","none"):He(n,"display","block")}};uo.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);ci(t.parentNode)};function u6(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const Pz={__depends__:[Wq],__init__:["canvas"],canvas:["type",St],elementRegistry:["type",co],elementFactory:["type",Fs],eventBus:["type",$r],graphicsFactory:["type",uo]};function Az(e){var t=new qM(e);return t.init(),t}function Tz(e){e=e||{};var t={config:["value",e]},n=[t,Pz].concat(e.modules||[]);return Az(n)}function Ql(e,t){this._injector=t||Tz(e),this.get("eventBus").fire("diagram.init")}Ql.prototype.get=function(e,t){return this._injector.get(e,t)};Ql.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};Ql.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Ql.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function s5(){}s5.prototype.get=function(e){return this.$model.properties.get(this,e)};s5.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function d6(e,t){this.model=e,this.properties=t}d6.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(s5.prototype);ue(e.properties,function(a){!a.isMany&&a.default!==void 0&&(i[a.name]=a.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(a){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),ue(a,pa(function(s,l){this.set(l,s)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var Cz={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},p6={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function l5(e,t){var n=p6[e];return n?n(t):t}function pw(e){return!!Cz[e]}function h6(e){return!!p6[e]}function hr(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function po(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}po.prototype.build=function(){return Is(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};po.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};po.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(s===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(t,n?void 0:s,a),o[i.name]=o[i.localName]=t};po.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=hr(r[0],i),a=hr(r[1],o.prefix).name,s=this.propertiesByName[a];if(s)this.replaceProperty(s,e,n);else throw new Error("refined property <"+a+"> not found");delete e.redefines};po.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};po.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};po.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};po.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};po.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};po.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};po.prototype.hasProperty=function(e){return this.propertiesByName[e]};po.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(ue(e.properties,pa(function(o){o=be({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var a=o.replaces,s=o.redefines;a||s?this.redefineProperty(o,a||s,a):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),i.push(e),n[r]=e)};function ec(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,ue(e,pa(this.registerPackage,this))}ec.prototype.getPackage=function(e){return this.packageMap[e]};ec.prototype.getPackages=function(){return this.packages};ec.prototype.registerPackage=function(e){e=be({},e);var t=this.packageMap;Xk(t,e,"prefix"),Xk(t,e,"uri"),ue(e.types,pa(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};ec.prototype.registerType=function(e,t){e=be({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:be(e.meta||{})});var n=hr(e.name,t.prefix),i=n.name,r={};ue(e.properties,pa(function(o){var a=hr(o.name,n.prefix),s=a.name;pw(o.type)||(o.type=hr(o.type,a.prefix).name),be(o,{ns:a,name:s}),r[s]=o},this)),be(e,{ns:n,name:i,propertiesByName:r}),ue(e.extends,pa(function(o){var a=hr(o,n.prefix),s=this.typeMap[a.name];s.traits=s.traits||[],s.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};ec.prototype.mapTypes=function(e,t,n){var i=pw(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function o(l,c){var u=hr(l,pw(l)?"":e.prefix);r.mapTypes(u,t,c)}function a(l){return o(l,!0)}function s(l){return o(l,!1)}if(!i)throw new Error("unknown type <"+e.name+">");ue(i.superClass,n?a:s),t(i,!n),ue(i.traits,a)};ec.prototype.getEffectiveDescriptor=function(e){var t=hr(e),n=new po(t);this.mapTypes(t,function(r,o){n.addTrait(r,o)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};ec.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function Xk(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function Tu(e){this.model=e}Tu.prototype.set=function(e,t,n){if(!Br(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;Rz(n)?i?delete e[r]:delete e.$attrs[hw(t)]:i?r in e?e[r]=n:f6(e,i,n):e.$attrs[hw(t)]=n};Tu.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[hw(t)];var i=n.name;return!e[i]&&n.isMany&&f6(e,n,[]),e[i]};Tu.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=be({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};Tu.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Tu.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Tu.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw o;typeof console<"u"&&console.warn(o)}return null};function Rz(e){return typeof e>"u"}function f6(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function hw(e){return e.replace(/^:/,"")}function Bo(e,t={}){this.properties=new Tu(this),this.factory=new d6(this,this.properties),this.registry=new ec(e,this.properties),this.typeCache={},this.config=t}Bo.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};Bo.prototype.getType=function(e){var t=this.typeCache,n=Br(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};Bo.prototype.createAny=function(e,t,n){var i=hr(e),r={$type:e,$instanceOf:function(a){return a===this.$type},get:function(a){return this[a]},set:function(a,s){nq(this,[a],s)}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),ue(n,function(a,s){Ci(a)&&a.value!==void 0?r[a.name]=a.value:r[s]=a}),r};Bo.prototype.getPackage=function(e){return this.registry.getPackage(e)};Bo.prototype.getPackages=function(){return this.registry.getPackages()};Bo.prototype.getElementDescriptor=function(e){return e.$descriptor};Bo.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};Bo.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Bo.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Zk=String.fromCharCode,Mz=Object.prototype.hasOwnProperty,Iz=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,ef={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(ef).forEach(function(e){ef[e.toUpperCase()]=ef[e]});function Dz(e,t,n,i){return i?Mz.call(ef,i)?ef[i]:"&"+i+";":Zk(t||parseInt(n,16))}function Lc(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(Iz,Dz):e}var Lz="http://www.w3.org/2001/XMLSchema-instance",Oz="xsi",Qk="xsi:type",eP="non-whitespace outside of root node";function ad(e){return new Error(e)}function tP(e){return"missing namespace for prefix <"+e+">"}function zg(e){return{get:e,enumerable:!0}}function Bz(e){var t={},n;for(n in e)t[n]=e[n];return t}function fw(e){return e+"$uri"}function Fz(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[fw(i)]=n;return t}function nP(){return{line:0,column:0}}function jz(e){throw e}function m6(e){if(!this)return new m6(e);var t=e&&e.proxy,n,i,r,o,a=jz,s,l,c,u,d=nP,h=!1,p=!1,m=null,v=!1,_;function b(x){x instanceof Error||(x=ad(x)),m=x,a(x,d)}function E(x){s&&(x instanceof Error||(x=ad(x)),s(x,d))}this.on=function(x,M){if(typeof M!="function")throw ad("required args <name, cb>");switch(x){case"openTag":i=M;break;case"text":n=M;break;case"closeTag":r=M;break;case"error":a=M;break;case"warn":s=M;break;case"cdata":o=M;break;case"attention":u=M;break;case"question":c=M;break;case"comment":l=M;break;default:throw ad("unsupported event: "+x)}return this},this.ns=function(x){if(typeof x>"u"&&(x={}),typeof x!="object")throw ad("required args <nsMap={}>");var M={},B;for(B in x)M[B]=x[B];return M[Lz]=Oz,p=!0,_=M,this},this.parse=function(x){if(typeof x!="string")throw ad("required args <xml=string>");return m=null,w(x),d=nP,v=!1,m},this.stop=function(){v=!0};function w(x){var M=p?[]:null,B=p?Fz(_):null,H,R=[],O=0,D=!1,A=!1,L=0,$=0,Z,me,ge,pe,te,le,ye,we,I,z="",K=0,ee;function T(){if(ee!==null)return ee;var P,j,Y,ae=p&&B.xmlns,ke=p&&h?[]:null,Ae=K,Le=z,q=Le.length,Te,_e,oe,X,he,se={},Ne={},Me,Ce,qe;e:for(;Ae<q;Ae++)if(Me=!1,Ce=Le.charCodeAt(Ae),!(Ce===32||Ce<14&&Ce>8)){for((Ce<65||Ce>122||Ce>90&&Ce<97)&&Ce!==95&&Ce!==58&&(E("illegal first char attribute name"),Me=!0),qe=Ae+1;qe<q;qe++)if(Ce=Le.charCodeAt(qe),!(Ce>96&&Ce<123||Ce>64&&Ce<91||Ce>47&&Ce<59||Ce===46||Ce===45||Ce===95)){if(Ce===32||Ce<14&&Ce>8){E("missing attribute value"),Ae=qe;continue e}if(Ce===61)break;E("illegal attribute name char"),Me=!0}if(he=Le.substring(Ae,qe),he==="xmlns:xmlns"&&(E("illegal declaration of xmlns"),Me=!0),Ce=Le.charCodeAt(qe+1),Ce===34)qe=Le.indexOf('"',Ae=qe+2),qe===-1&&(qe=Le.indexOf("'",Ae),qe!==-1&&(E("attribute value quote missmatch"),Me=!0));else if(Ce===39)qe=Le.indexOf("'",Ae=qe+2),qe===-1&&(qe=Le.indexOf('"',Ae),qe!==-1&&(E("attribute value quote missmatch"),Me=!0));else for(E("missing attribute value quotes"),Me=!0,qe=qe+1;qe<q&&(Ce=Le.charCodeAt(qe+1),!(Ce===32||Ce<14&&Ce>8));qe++);for(qe===-1&&(E("missing closing quotes"),qe=q,Me=!0),Me||(oe=Le.substring(Ae,qe)),Ae=qe;qe+1<q&&(Ce=Le.charCodeAt(qe+1),!(Ce===32||Ce<14&&Ce>8));qe++)Ae===qe&&(E("illegal character after attribute end"),Me=!0);if(Ae=qe+1,Me)continue e;if(he in Ne){E("attribute <"+he+"> already defined");continue}if(Ne[he]=!0,!p){se[he]=oe;continue}if(h){if(_e=he==="xmlns"?"xmlns":he.charCodeAt(0)===120&&he.substr(0,6)==="xmlns:"?he.substr(6):null,_e!==null){if(P=Lc(oe),j=fw(_e),X=_[P],!X){if(_e==="xmlns"||j in B&&B[j]!==P)do X="ns"+O++;while(typeof B[X]<"u");else X=_e;_[P]=X}B[_e]!==X&&(Te||(B=Bz(B),Te=!0),B[_e]=X,_e==="xmlns"&&(B[fw(X)]=P,ae=X),B[j]=P),se[he]=oe;continue}ke.push(he,oe);continue}if(Ce=he.indexOf(":"),Ce===-1){se[he]=oe;continue}if(!(Y=B[he.substring(0,Ce)])){E(tP(he.substring(0,Ce)));continue}he=ae===Y?he.substr(Ce+1):Y+he.substr(Ce),he===Qk&&(Ce=oe.indexOf(":"),Ce!==-1?(Y=oe.substring(0,Ce),Y=B[Y]||Y,oe=Y+oe.substring(Ce)):oe=ae+":"+oe),se[he]=oe}if(h)for(Ae=0,q=ke.length;Ae<q;Ae++){if(he=ke[Ae++],oe=ke[Ae],Ce=he.indexOf(":"),Ce!==-1){if(!(Y=B[he.substring(0,Ce)])){E(tP(he.substring(0,Ce)));continue}he=ae===Y?he.substr(Ce+1):Y+he.substr(Ce),he===Qk&&(Ce=oe.indexOf(":"),Ce!==-1?(Y=oe.substring(0,Ce),Y=B[Y]||Y,oe=Y+oe.substring(Ce)):oe=ae+":"+oe)}se[he]=oe}return ee=se}function N(){for(var P=/(\r\n|\r|\n)/g,j=0,Y=0,ae=0,ke=$,Ae,Le;L>=ae&&(Ae=P.exec(x),!(!Ae||(ke=Ae[0].length+Ae.index,ke>L)));)j+=1,ae=ke;return L==-1?(Y=ke,Le=x.substring($)):$===0?Le=x.substring($,L):(Y=L-ae,Le=$==-1?x.substring(L):x.substring(L,$+1)),{data:Le,line:j,column:Y}}for(d=N,t&&(I=Object.create({},{name:zg(function(){return ye}),originalName:zg(function(){return we}),attrs:zg(T),ns:zg(function(){return B})}));$!==-1;){if(x.charCodeAt($)===60?L=$:L=x.indexOf("<",$),L===-1){if(R.length)return b("unexpected end of file");if($===0)return b("missing start tag");$<x.length&&x.substring($).trim()&&E(eP);return}if($!==L){if(R.length){if(n&&(n(x.substring($,L),Lc,d),v))return}else if(x.substring($,L).trim()&&(E(eP),v))return}if(pe=x.charCodeAt(L+1),pe===33){if(ge=x.charCodeAt(L+2),ge===91&&x.substr(L+3,6)==="CDATA["){if($=x.indexOf("]]>",L),$===-1)return b("unclosed cdata");if(o&&(o(x.substring(L+9,$),d),v))return;$+=3;continue}if(ge===45&&x.charCodeAt(L+3)===45){if($=x.indexOf("-->",L),$===-1)return b("unclosed comment");if(l&&(l(x.substring(L+4,$),Lc,d),v))return;$+=3;continue}}if(pe===63){if($=x.indexOf("?>",L),$===-1)return b("unclosed question");if(c&&(c(x.substring(L,$+2),d),v))return;$+=2;continue}for(Z=L+1;;Z++){if(te=x.charCodeAt(Z),isNaN(te))return $=-1,b("unclosed tag");if(te===34)ge=x.indexOf('"',Z+1),Z=ge!==-1?ge:Z;else if(te===39)ge=x.indexOf("'",Z+1),Z=ge!==-1?ge:Z;else if(te===62){$=Z;break}}if(pe===33){if(u&&(u(x.substring(L,$+1),Lc,d),v))return;$+=1;continue}if(ee={},pe===47){if(D=!1,A=!0,!R.length)return b("missing open tag");if(Z=ye=R.pop(),ge=L+2+Z.length,x.substring(L+2,ge)!==Z)return b("closing tag mismatch");for(;ge<$;ge++)if(pe=x.charCodeAt(ge),!(pe===32||pe>8&&pe<14))return b("close tag")}else{if(x.charCodeAt($-1)===47?(Z=ye=x.substring(L+1,$-1),D=!0,A=!0):(Z=ye=x.substring(L+1,$),D=!0,A=!1),!(pe>96&&pe<123||pe>64&&pe<91||pe===95||pe===58))return b("illegal first char nodeName");for(ge=1,me=Z.length;ge<me;ge++)if(pe=Z.charCodeAt(ge),!(pe>96&&pe<123||pe>64&&pe<91||pe>47&&pe<59||pe===45||pe===95||pe==46)){if(pe===32||pe<14&&pe>8){ye=Z.substring(0,ge),ee=null;break}return b("invalid nodeName")}A||R.push(ye)}if(p){if(H=B,D&&(A||M.push(H),ee===null&&(h=Z.indexOf("xmlns",ge)!==-1)&&(K=ge,z=Z,T(),h=!1)),we=ye,pe=ye.indexOf(":"),pe!==-1){if(le=B[ye.substring(0,pe)],!le)return b("missing namespace on <"+we+">");ye=ye.substr(pe+1)}else le=B.xmlns;le&&(ye=le+":"+ye)}if(D&&(K=ge,z=Z,i&&(t?i(I,Lc,A,d):i(ye,T,Lc,A,d),v)))return;if(A){if(r&&(r(t?I:ye,Lc,D,d),v))return;p&&(D?B=H:B=M.pop())}$+=1}}}function g6(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var $z={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Ly="xsi:type";function v6(e){return e.xml&&e.xml.serialize}function y6(e){return v6(e)===Ly}function Gz(e){return v6(e)==="property"}function Uz(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _6(e,t){return g6(t)?e.prefix+":"+Uz(e.localName):e.name}function qz(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function zz(e,t){var n=hr(e),i=t.getPackage(n.prefix);return qz(n,i)}function Hl(e){return new Error(e)}function Ps(e){return e.$descriptor}function Hz(e){be(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw Hl("expected element");var n=this.elementsById,i=Ps(t),r=i.idProperty,o;if(r&&(o=t.get(r.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw Hl("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function nm(){}nm.prototype.handleEnd=function(){};nm.prototype.handleText=function(){};nm.prototype.handleNode=function(){};function c5(){}c5.prototype=Object.create(nm.prototype);c5.prototype.handleNode=function(){return this};function bp(){}bp.prototype=Object.create(nm.prototype);bp.prototype.handleText=function(e){this.body=(this.body||"")+e};function im(e,t){this.property=e,this.context=t}im.prototype=Object.create(bp.prototype);im.prototype.handleNode=function(e){if(this.element)throw Hl("expected no sub nodes");return this.element=this.createReference(e),this};im.prototype.handleEnd=function(){this.element.id=this.body};im.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function u5(e,t){this.element=t,this.propertyDesc=e}u5.prototype=Object.create(bp.prototype);u5.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=l5(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function Oy(){}Oy.prototype=Object.create(bp.prototype);Oy.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function mr(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}mr.prototype=Object.create(Oy.prototype);mr.prototype.addReference=function(e){this.context.addReference(e)};mr.prototype.handleText=function(e){var t=this.element,n=Ps(t),i=n.bodyProperty;if(!i)throw Hl("unexpected body text <"+e+">");bp.prototype.handleText.call(this,e)};mr.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Ps(t),i=n.bodyProperty;i&&e!==void 0&&(e=l5(i.type,e),t.set(i.name,e))};mr.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=Ps(n),r=this.context,o=new n({}),a=this.model,s;return ue(t,function(l,c){var u=i.propertiesByName[c],d;u&&u.isReference?u.isMany?(d=l.split(" "),ue(d,function(h){r.addReference({element:o,property:u.ns.name,id:h})})):r.addReference({element:o,property:u.ns.name,id:l}):(u?l=l5(u.type,l):c!=="xmlns"&&(s=hr(c,i.ns.prefix),a.getPackage(s.prefix)&&r.addWarning({message:"unknown attribute <"+c+">",element:o,property:c,value:l})),o.set(c,l))}),o};mr.prototype.getPropertyForNode=function(e){var t=e.name,n=hr(t),i=this.type,r=this.model,o=Ps(i),a=n.name,s=o.propertiesByName[a],l,c;if(s&&!s.isAttr)return y6(s)&&(l=e.attributes[Ly],l)?(l=zz(l,r),c=r.getType(l),be({},s,{effectiveType:Ps(c).name})):s;var u=r.getPackage(n.prefix);if(u){if(l=_6(n,u),c=r.getType(l),s=Wt(o.properties,function(d){return!d.isVirtual&&!d.isReference&&!d.isAttribute&&c.hasType(d.type)}),s)return be({},s,{effectiveType:Ps(c).name})}else if(s=Wt(o.properties,function(d){return!d.isReference&&!d.isAttribute&&d.type==="Element"}),s)return s;throw Hl("unrecognized element <"+n.name+">")};mr.prototype.toString=function(){return"ElementDescriptor["+Ps(this.type).name+"]"};mr.prototype.valueHandler=function(e,t){return new u5(e,t)};mr.prototype.referenceHandler=function(e){return new im(e,this.context)};mr.prototype.handler=function(e){return e==="Element"?new np(this.model,e,this.context):new mr(this.model,e,this.context)};mr.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,h6(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var o=r.element;return o!==void 0&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(be(o,{element:i}),this.context.addReference(o)):o.$parent=i),r};function d5(e,t,n){mr.call(this,e,t,n)}d5.prototype=Object.create(mr.prototype);d5.prototype.createElement=function(e){var t=e.name,n=hr(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&_6(n,o)||t;if(!r.hasType(a))throw Hl("unexpected element <"+e.originalName+">");return mr.prototype.createElement.call(this,e)};function np(e,t,n){this.model=e,this.context=n}np.prototype=Object.create(Oy.prototype);np.prototype.createElement=function(e){var t=e.name,n=hr(t),i=n.prefix,r=e.ns[i+"$uri"],o=e.attributes;return this.model.createAny(t,r,o)};np.prototype.handleChild=function(e){var t=new np(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};np.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function p5(e){e instanceof Bo&&(e={model:e}),be(this,{lax:!1},e)}p5.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof mr?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,o=this.lax,a=new Hz(be({},t,{rootHandler:i})),s=new m6({proxy:!0}),l=Vz();i.context=a,l.push(i);function c(M,B,H){var R=B(),O=R.line,D=R.column,A=R.data;A.charAt(0)==="<"&&A.indexOf(" ")!==-1&&(A=A.slice(0,A.indexOf(" "))+">");var L="unparsable content "+(A?A+" ":"")+`detected
	line: `+O+`
	column: `+D+`
	nested error: `+M.message;if(H)return a.addWarning({message:L,error:M}),!0;throw Hl(L)}function u(M,B){return c(M,B,!0)}function d(){var M=a.elementsById,B=a.references,H,R;for(H=0;R=B[H];H++){var O=R.element,D=M[R.id],A=Ps(O).propertiesByName[R.property];if(D||a.addWarning({message:"unresolved reference <"+R.id+">",element:R.element,property:R.property,value:R.id}),A.isMany){var L=O.get(A.name),$=L.indexOf(R);$===-1&&($=L.length),D?L[$]=D:L.splice($,1)}else O.set(A.name,D)}}function h(){l.pop().handleEnd()}var p=/^<\?xml /i,m=/ encoding="([^"]+)"/i,v=/^utf-8$/i;function _(M){if(p.test(M)){var B=m.exec(M),H=B&&B[1];!H||v.test(H)||a.addWarning({message:"unsupported document encoding <"+H+">, falling back to UTF-8"})}}function b(M,B){var H=l.peek();try{l.push(H.handleNode(M))}catch(R){c(R,B,o)&&l.push(new c5)}}function E(M,B){try{l.peek().handleText(M)}catch(H){u(H,B)}}function w(M,B){M.trim()&&E(M,B)}var x=r.getPackages().reduce(function(M,B){return M[B.uri]=B.prefix,M},{"http://www.w3.org/XML/1998/namespace":"xml"});return s.ns(x).on("openTag",function(M,B,H,R){var O=M.attrs||{},D=Object.keys(O).reduce(function(L,$){var Z=B(O[$]);return L[$]=Z,L},{}),A={name:M.name,originalName:M.originalName,attributes:D,ns:M.ns};b(A,R)}).on("question",_).on("closeTag",h).on("cdata",E).on("text",function(M,B,H){w(B(M),H)}).on("error",c).on("warn",u),new Promise(function(M,B){var H;try{s.parse(e),d()}catch(L){H=L}var R=i.element;!H&&!R&&(H=Hl("failed to parse document as <"+i.type.$descriptor.name+">"));var O=a.warnings,D=a.references,A=a.elementsById;return H?(H.warnings=O,B(H)):M({rootElement:R,elementsById:A,references:D,warnings:O})})};p5.prototype.handler=function(e){return new d5(this.model,e)};function Vz(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var Wz=`<?xml version="1.0" encoding="UTF-8"?>
`,Kz=/<|>|'|"|&|\n\r|\n/g,b6=/<|>|&/g;function Yz(e){var t={},n={},i={},r=[],o=[];this.byUri=function(a){return n[a]||e&&e.byUri(a)},this.add=function(a,s){n[a.uri]=a,s?r.push(a):o.push(a),this.mapPrefix(a.prefix,a.uri)},this.uriByPrefix=function(a){return t[a||"xmlns"]},this.mapPrefix=function(a,s){t[a||"xmlns"]=s},this.getNSKey=function(a){return a.prefix!==void 0?a.uri+"|"+a.prefix:a.uri},this.logUsed=function(a){var s=a.uri,l=this.getNSKey(a);i[l]=this.byUri(s),e&&e.logUsed(a)},this.getUsed=function(a){function s(u){var d=l.getNSKey(u);return i[d]}var l=this,c=[].concat(r,o);return c.filter(s)}}function Jz(e){return e.charAt(0).toLowerCase()+e.slice(1)}function Xz(e,t){return g6(t)?Jz(e):e}function w6(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function x6(e){return Br(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Zz(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function Qz(e,t){return t.isGeneric?be({localName:t.ns.localName},e):be({localName:Xz(t.ns.localName,t.$pkg)},e)}function eH(e,t){return be({localName:t.ns.localName},e)}function tH(e){var t=e.$descriptor;return It(t.properties,function(n){var i=n.name;if(n.isVirtual||!xr(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var nH={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},iH={"<":"lt",">":"gt","&":"amp"};function E6(e,t,n){return e=Br(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function rH(e){return E6(e,Kz,nH)}function oH(e){return E6(e,b6,iH)}function aH(e){return It(e,function(t){return t.isAttr})}function sH(e){return It(e,function(t){return!t.isAttr})}function h5(e){this.tagName=e}h5.prototype.build=function(e){return this.element=e,this};h5.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function yu(){}yu.prototype.serializeValue=yu.prototype.serializeTo=function(e){e.append(this.escape?oH(this.value):this.value)};yu.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(b6)!==-1&&(this.escape=!0),this};function f5(e){this.tagName=e}w6(f5,yu);f5.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function kn(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}kn.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,o=t.isGeneric;return o?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o||(r=tH(e),this.parseAttributes(aH(r)),this.parseContainments(sH(r))),this.parseGenericAttributes(e,i),this};kn.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Qz(t,e)};kn.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return eH(t,e)};kn.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};kn.prototype.nsAttributeName=function(e){var t;if(Br(e)?t=hr(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:be({localName:t.localName},n)};kn.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return ue(e,function(r,o){var a;o==="$body"?n.push(new yu().build({type:"String"},r)):o==="$children"?ue(r,function(s){n.push(new kn(t).build(s))}):o.indexOf("$")!==0&&(a=t.parseNsAttribute(e,o,r),a&&i.push({name:o,value:r}))}),i};kn.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=hr(t),o;if(r.prefix==="xmlns"&&(o={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(o,!0,!0);else{var a=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(a)}};kn.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return ue(i,function(o,a){var s=n.parseNsAttribute(e,a,o);s&&r.push(s)}),r};kn.prototype.parseGenericAttributes=function(e,t){var n=this;ue(t,function(i){if(i.name!==Ly)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};kn.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;ue(e,function(r){var o=i.get(r.name),a=r.isReference,s=r.isMany;if(s||(o=[o]),r.isBody)n.push(new yu().build(r,o[0]));else if(h6(r.type))ue(o,function(u){n.push(new f5(t.addTagName(t.nsPropertyTagName(r))).build(r,u))});else if(a)ue(o,function(u){n.push(new h5(t.addTagName(t.nsPropertyTagName(r))).build(u))});else{var l=y6(r),c=Gz(r);ue(o,function(u){var d;l?d=new By(t,r):c?d=new kn(t,r):d=new kn(t),n.push(d.build(u))})}})};kn.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new Yz(i):t=i),t};kn.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix,a=i.byUri(r);return(!a||n)&&i.add(e,t),i.mapPrefix(o,r),e};kn.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),o=e.prefix,a=e.uri,s,l,c;if(!o&&!a)return{localName:e.localName};if(c=$z[o]||i&&(i.getPackage(o)||{}).uri,a=a||c||r.uriByPrefix(o),!a)throw new Error("no namespace uri given for prefix <"+o+">");if(e=r.byUri(a),!e){for(s=o,l=1;r.uriByPrefix(s);)s=o+"_"+l++;e=this.logNamespace({prefix:s,uri:a},c===a)}return o&&r.mapPrefix(o,a),e};kn.prototype.parseAttributes=function(e){var t=this,n=this.element;ue(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var o=[];ue(r,function(a){o.push(a.id)}),r=o.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};kn.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),x6(e)};kn.prototype.addAttribute=function(e,t){var n=this.attrs;Br(t)&&(t=rH(t));var i=MM(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};kn.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=Zz(n).concat(t)),ue(t,function(i){e.append(" ").append(x6(i.name)).append('="').append(i.value).append('"')})};kn.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==yu;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),ue(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function By(e,t){kn.call(this,e,t)}w6(By,kn);By.prototype.parseNsAttributes=function(e){var t=kn.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Ly),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t};By.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function lH(){this.value="",this.write=function(e){this.value+=e}}function cH(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function uH(e){e=be({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new lH,o=new cH(r,e.format);if(e.preamble&&o.append(Wz),new kn().build(n).serializeTo(o),!i)return r.value}return{toXML:t}}function Fy(e,t){Bo.call(this,e,t)}Fy.prototype=Object.create(Bo.prototype);Fy.prototype.fromXML=function(e,t,n){Br(t)||(n=t,t="bpmn:Definitions");var i=new p5(be({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};Fy.prototype.toXML=function(e,t){var n=new uH(t);return new Promise(function(i,r){try{var o=n.toXML(e);return i({xml:o})}catch(a){return r(a)}})};var dH="BPMN20",pH="http://www.omg.org/spec/BPMN/20100524/MODEL",hH="bpmn",fH=[],mH=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],gH=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],vH={tagAlias:"lowerCase",typePrefix:"t"},yH={name:dH,uri:pH,prefix:hH,associations:fH,types:mH,enumerations:gH,xml:vH},_H="BPMNDI",bH="http://www.omg.org/spec/BPMN/20100524/DI",wH="bpmndi",xH=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],EH=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],SH=[],NH={name:_H,uri:bH,prefix:wH,types:xH,enumerations:EH,associations:SH},kH="DC",PH="http://www.omg.org/spec/DD/20100524/DC",AH="dc",TH=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],CH=[],RH={name:kH,uri:PH,prefix:AH,types:TH,associations:CH},MH="DI",IH="http://www.omg.org/spec/DD/20100524/DI",DH="di",LH=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],OH=[],BH={tagAlias:"lowerCase"},FH={name:MH,uri:IH,prefix:DH,types:LH,associations:OH,xml:BH},jH="bpmn.io colors for BPMN",$H="http://bpmn.io/schema/bpmn/biocolor/1.0",GH="bioc",UH=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],qH=[],zH=[],HH={name:jH,uri:$H,prefix:GH,types:UH,enumerations:qH,associations:zH},VH="BPMN in Color",WH="http://www.omg.org/spec/BPMN/non-normative/color/1.0",KH="color",YH=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],JH=[],XH=[],ZH={name:VH,uri:WH,prefix:KH,types:YH,enumerations:JH,associations:XH},QH={bpmn:yH,bpmndi:NH,dc:RH,di:FH,bioc:HH,color:ZH};function eV(e,t){var n=be({},QH,e);return new Fy(n,t)}function Yi(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var tV="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function S6(e){xr(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(tV)}})}function br(e,t){return e.$instanceOf(t)}function nV(e){return Wt(e.rootElements,function(t){return br(t,"bpmn:Process")||br(t,"bpmn:Collaboration")})}function iV(e){var t={},n=[],i={};function r(I,z){return function(K){I(K,z)}}function o(I){t[I.id]=I}function a(I){return t[I.id]}function s(I,z){var K=I.gfx;if(K)throw new Error(`already rendered ${Yi(I)}`);return e.element(I,i[I.id],z)}function l(I,z){return e.root(I,i[I.id],z)}function c(I,z){try{var K=i[I.id]&&s(I,z);return o(I),K}catch(ee){u(ee.message,{element:I,error:ee}),console.error(`failed to import ${Yi(I)}`,ee)}}function u(I,z){e.error(I,z)}var d=this.registerDi=function(z){var K=z.bpmnElement;K?i[K.id]?u(`multiple DI elements defined for ${Yi(K)}`,{element:K}):(i[K.id]=z,S6(K)):u(`no bpmnElement referenced in ${Yi(z)}`,{element:z})};function h(I){p(I.plane)}function p(I){d(I),ue(I.planeElement,m)}function m(I){d(I)}this.handleDefinitions=function(z,K){var ee=z.diagrams;if(K&&ee.indexOf(K)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!K&&ee&&ee.length&&(K=ee[0]),!K)throw new Error("no diagram to display");i={},h(K);var T=K.plane;if(!T)throw new Error(`no plane for ${Yi(K)}`);var N=T.bpmnElement;if(!N)if(N=nV(z),N)u(`correcting missing bpmnElement on ${Yi(T)} to ${Yi(N)}`),T.bpmnElement=N,d(T);else throw new Error("no process or collaboration to display");var P=l(N,T);if(br(N,"bpmn:Process")||br(N,"bpmn:SubProcess"))_(N,P);else if(br(N,"bpmn:Collaboration"))ye(N,P),b(z.rootElements,P);else throw new Error(`unsupported bpmnElement for ${Yi(T)}: ${Yi(N)}`);v(n)};var v=this.handleDeferred=function(){for(var z;n.length;)z=n.shift(),z()};function _(I,z){pe(I,z),O(I.ioSpecification,z),R(I.artifacts,z),o(I)}function b(I,z){var K=It(I,function(ee){return!a(ee)&&br(ee,"bpmn:Process")&&ee.laneSets});K.forEach(r(_,z))}function E(I,z){c(I,z)}function w(I,z){ue(I,r(E,z))}function x(I,z){c(I,z)}function M(I,z){c(I,z)}function B(I,z){c(I,z)}function H(I,z){c(I,z)}function R(I,z){ue(I,function(K){br(K,"bpmn:Association")?n.push(function(){H(K,z)}):H(K,z)})}function O(I,z){I&&(ue(I.dataInputs,r(M,z)),ue(I.dataOutputs,r(B,z)))}var D=this.handleSubProcess=function(z,K){pe(z,K),R(z.artifacts,K)};function A(I,z){var K=c(I,z);br(I,"bpmn:SubProcess")&&D(I,K||z),br(I,"bpmn:Activity")&&O(I.ioSpecification,z),n.push(function(){ue(I.dataInputAssociations,r(x,z)),ue(I.dataOutputAssociations,r(x,z))})}function L(I,z){c(I,z)}function $(I,z){c(I,z)}function Z(I,z){n.push(function(){var K=c(I,z);I.childLaneSet&&me(I.childLaneSet,K||z),we(I)})}function me(I,z){ue(I.lanes,r(Z,z))}function ge(I,z){ue(I,r(me,z))}function pe(I,z){te(I.flowElements,z),I.laneSets&&ge(I.laneSets,z)}function te(I,z){ue(I,function(K){br(K,"bpmn:SequenceFlow")?n.push(function(){L(K,z)}):br(K,"bpmn:BoundaryEvent")?n.unshift(function(){A(K,z)}):br(K,"bpmn:FlowNode")?A(K,z):br(K,"bpmn:DataObject")||(br(K,"bpmn:DataStoreReference")||br(K,"bpmn:DataObjectReference")?$(K,z):u(`unrecognized flowElement ${Yi(K)} in context ${Yi(z&&z.businessObject)}`,{element:K,context:z}))})}function le(I,z){var K=c(I,z),ee=I.processRef;ee&&_(ee,K||z)}function ye(I,z){ue(I.participants,r(le,z)),R(I.artifacts,z),n.push(function(){w(I.messageFlows,z)})}function we(I){ue(I.flowNodeRef,function(z){var K=z.get("lanes");K&&K.push(I)})}}function F(e,t){var n=Ge(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Ct(e,t){return Jl(t,function(n){return F(e,n)})}function Ge(e){return e&&e.businessObject||e}function Ut(e){return e&&e.di}function rV(e,t,n){var i,r,o,a,s=[];function l(c,u){var d={root:function(v,_){return i.add(v,_)},element:function(v,_,b){return i.add(v,_,b)},error:function(v,_){s.push({message:v,context:_})}},h=new iV(d);u=u||c.diagrams&&c.diagrams[0];var p=oV(c,u);if(!p)throw new Error("no diagram to display");ue(p,function(v){h.handleDefinitions(c,v)});var m=u.plane.bpmnElement.id;o.setRootElement(o.findRoot(m+"_plane")||o.findRoot(m))}return new Promise(function(c,u){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),o=e.get("canvas"),r.fire("import.render.start",{definitions:t}),l(t,n),r.fire("import.render.complete",{error:a,warnings:s}),c({warnings:s})}catch(d){return d.warnings=s,u(d)}})}function oV(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,i=n;!F(n,"bpmn:Process")&&!F(n,"bpmn:Collaboration")&&(i=aV(n));var r;F(i,"bpmn:Collaboration")?r=i:r=Wt(e.rootElements,function(c){if(F(c,"bpmn:Collaboration"))return Wt(c.participants,function(u){return u.processRef===i})});var o=[i];r&&(o=Zi(r.participants,function(c){return c.processRef}),o.push(r));var a=N6(o),s=[t],l=[n];return ue(e.diagrams,function(c){if(c.plane){var u=c.plane.bpmnElement;a.indexOf(u)!==-1&&l.indexOf(u)===-1&&(s.push(c),l.push(u))}}),s}}function N6(e){var t=[];return ue(e,function(n){n&&(t.push(n),t=t.concat(N6(n.flowElements)))}),t}function aV(e){for(var t=e;t;){if(F(t,"bpmn:Process"))return t;t=t.$parent}}var sV='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',k6=sV,P6={verticalAlign:"middle"},A6={color:"#404040"},lV={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},cV={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},uV={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},dV='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+k6+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Ia;function pV(){Ia=_n(dV),Ji(Ia,lV),Ji(rn("svg",Ia),P6),Ji(rn(".backdrop",Ia),cV),Ji(rn(".notice",Ia),uV),Ji(rn(".link",Ia),A6,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function hV(){Ia||(pV(),Ir.bind(Ia,".backdrop","click",function(e){document.body.removeChild(Ia)})),document.body.appendChild(Ia)}function Pn(e){e=be({},mV,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),vV(this._container),this._init(this._container,this._moddle,e)}We(Pn,Ql);Pn.prototype.importXML=async function(t,n){const i=this;function r(a){return i.get("eventBus").createEvent(a)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let a;try{a=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(h){throw this._emit("import.parse.complete",{error:h}),h}let s=a.rootElement;const l=a.references,c=a.warnings,u=a.elementsById;o=o.concat(c),s=this._emit("import.parse.complete",r({error:null,definitions:s,elementsById:u,references:l,warnings:o}))||s;const d=await this.importDefinitions(s,n);return o=o.concat(d.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(a){let s=a;throw o=o.concat(s.warnings||[]),$0(s,o),s=fV(s),this._emit("import.done",{error:s,warnings:s.warnings}),s}};Pn.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};Pn.prototype.open=async function(t){const n=this._definitions;let i=t;if(!n){const o=new Error("no XML imported");throw $0(o,[]),o}if(typeof t=="string"&&(i=gV(n,t),!i)){const o=new Error("BPMNDiagram <"+t+"> not found");throw $0(o,[]),o}try{this.clear()}catch(o){throw $0(o,[]),o}const{warnings:r}=await rV(this,n,i);return{warnings:r}};Pn.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(a){i=a}const o=i?{error:i}:{xml:r};if(this._emit("saveXML.done",o),i)throw i;return o};Pn.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),r=i.getActiveLayer(),o=rn(":scope > defs",i._svg),a=Bk(r),s=o?"<defs>"+Bk(o)+"</defs>":"",l=r.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+l.width+'" height="'+l.height+'" viewBox="'+l.x+" "+l.y+" "+l.width+" "+l.height+'" version="1.1">'+s+a+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};Pn.prototype._setDefinitions=function(e){this._definitions=e};Pn.prototype.getModules=function(){return this._modules};Pn.prototype.clear=function(){this.getDefinitions()&&Ql.prototype.clear.call(this)};Pn.prototype.destroy=function(){Ql.prototype.destroy.call(this),vu(this._container)};Pn.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};Pn.prototype.off=function(e,t){this.get("eventBus").off(e,t)};Pn.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=rn(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};Pn.prototype.getDefinitions=function(){return this._definitions};Pn.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};Pn.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],a=[].concat(o,i,r),s=be(Lo(n,["additionalModules"]),{canvas:be({},n.canvas,{container:e}),modules:a});Ql.call(this,s),n&&n.container&&this.attachTo(n.container)};Pn.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};Pn.prototype._createContainer=function(e){const t=_n('<div class="bjs-container"></div>');return Ji(t,{width:iP(e.width),height:iP(e.height),position:e.position}),t};Pn.prototype._createModdle=function(e){const t=be({},this._moddleExtensions,e.moddleExtensions);return new eV(t)};Pn.prototype._modules=[];function $0(e,t){return e.warnings=t,e}function fV(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const mV={width:"100%",height:"100%",position:"relative"};function iP(e){return e+(pt(e)?"px":"")}function gV(e,t){return t&&Wt(e.diagrams,function(n){return n.id===t})||null}function vV(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+k6+"</a>",i=_n(n);Ji(rn("svg",i),P6),Ji(i,A6,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),Vt.bind(i,"click",function(r){hV(),r.preventDefault()})}function rm(e){Pn.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}We(rm,Pn);rm.prototype._createModdle=function(e){var t=Pn.prototype._createModdle.call(this,e);return t.ids=new $a([32,36,1]),t};rm.prototype._collectIds=function(e,t){var n=e.$model,i=n.ids,r;i.clear();for(r in t)i.claim(r,t[r])};function Bt(e,t){return F(e,"bpmn:CallActivity")?!1:F(e,"bpmn:SubProcess")?(t=t||Ut(e),t&&F(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):F(e,"bpmn:Participant")?!!Ge(e).processRef:!0}function _i(e){if(!(!F(e,"bpmn:Participant")&&!F(e,"bpmn:Lane"))){var t=Ut(e).isHorizontal;return t===void 0?!0:t}}function yV(e){return e&&Ge(e).isInterrupting!==!1}function Qi(e){return e&&!!Ge(e).triggeredByEvent}function wp(e,t){var n=Ge(e).eventDefinitions;return Jl(n,function(i){return F(i,t)})}function _V(e){return wp(e,"bpmn:ErrorEventDefinition")}function bV(e){return wp(e,"bpmn:EscalationEventDefinition")}function wV(e){return wp(e,"bpmn:CompensateEventDefinition")}var Lf={width:90,height:20},rP=15;function _u(e){return F(e,"bpmn:Event")||F(e,"bpmn:Gateway")||F(e,"bpmn:DataStoreReference")||F(e,"bpmn:DataObjectReference")||F(e,"bpmn:DataInput")||F(e,"bpmn:DataOutput")||F(e,"bpmn:SequenceFlow")||F(e,"bpmn:MessageFlow")||F(e,"bpmn:Group")}function jy(e){return qt(e.label)}function xV(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=EV(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),a=r.x,s=r.y;return Math.abs(o)<Math.PI/2?s-=rP:a+=rP,{x:a,y:s}}function EV(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function m5(e){return e.waypoints?xV(e.waypoints):F(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+Lf.height/2}:{x:e.x+e.width/2,y:e.y+e.height+Lf.height/2}}function SV(e,t){var n,i,r,o=e.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(Lf.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=m5(t),i=Lf),be({x:n.x-i.width/2,y:n.y-i.height/2},i)}function T6(e){if(F(e,"bpmn:FlowElement")||F(e,"bpmn:Participant")||F(e,"bpmn:Lane")||F(e,"bpmn:SequenceFlow")||F(e,"bpmn:MessageFlow")||F(e,"bpmn:DataInput")||F(e,"bpmn:DataOutput"))return"name";if(F(e,"bpmn:TextAnnotation"))return"text";if(F(e,"bpmn:Group"))return"categoryValueRef"}function NV(e){var t=e.categoryValueRef;return t&&t.value||""}function ro(e){var t=e.businessObject,n=T6(t);if(n)return n==="categoryValueRef"?NV(t):t[n]||""}function kV(e,t){var n=e.businessObject,i=T6(n);return i&&(i==="categoryValueRef"?n.categoryValueRef.value=t:n[i]=t),e}var mw="hsl(225, 10%, 15%)",PV="white";function Aa(e,t){return Jl(e.eventDefinitions,function(n){return n.$type===t})}function AV(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function TV(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function Rt(e,t,n){var i=Ut(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||PV}function Ve(e,t,n){var i=Ut(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||mw}function bh(e,t,n,i){var r=Ut(e),o=r.get("label");return i||o&&o.get("color:color")||t||Ve(e,n)}function CV(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return Pu(r)}function RV(e,t){var n=e.x,i=e.y,r=e.width,o=e.height,a=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-o],["a",t,t,0,0,1,t,-t],["z"]];return Pu(a)}function MV(e){var t=e.width,n=e.height,i=e.x,r=e.y,o=t/2,a=n/2,s=[["M",i+o,r],["l",o,a],["l",-o,a],["l",-o,-a],["z"]];return Pu(s)}function IV(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return Pu(o)}function wh(e,t={}){return{width:So(e,t),height:Cr(e,t)}}function So(e,t={}){return xr(t,"width")?t.width:e.width}function Cr(e,t={}){return xr(t,"height")?t.height:e.height}var DV=new $a,LV=10,Hg=3,OV=1.5,G0=10,sd=.95,BV=1,FV=.25;function Cu(e,t,n,i,r,o,a){Bs.call(this,t,a);var s=e&&e.defaultFillColor,l=e&&e.defaultStrokeColor,c=e&&e.defaultLabelColor;function u(T){return n.computeStyle(T,{strokeLinecap:"round",strokeLinejoin:"round",stroke:mw,strokeWidth:2,fill:"white"})}function d(T){return n.computeStyle(T,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:mw,strokeWidth:2})}function h(T,N){var{ref:P={x:0,y:0},scale:j=1,element:Y,parentGfx:ae=r._svg}=N,ke=Qe("marker",{id:T,viewBox:"0 0 20 20",refX:P.x,refY:P.y,markerWidth:20*j,markerHeight:20*j,orient:"auto"});ft(ke,Y);var Ae=rn(":scope > defs",ae);Ae||(Ae=Qe("defs"),ft(ae,Ae)),ft(Ae,ke)}function p(T,N,P,j){var Y=DV.nextPrefixed("marker-");return m(T,Y,N,P,j),"url(#"+Y+")"}function m(T,N,P,j,Y){if(P==="sequenceflow-end"){var ae=Qe("path",{d:"M 1 5 L 11 10 L 1 15 Z",...u({fill:Y,stroke:Y,strokeWidth:1})});h(N,{element:ae,ref:{x:11,y:10},scale:.5,parentGfx:T})}if(P==="messageflow-start"){var ke=Qe("circle",{cx:6,cy:6,r:3.5,...u({fill:j,stroke:Y,strokeWidth:1,strokeDasharray:[1e4,1]})});h(N,{element:ke,ref:{x:6,y:6},parentGfx:T})}if(P==="messageflow-end"){var Ae=Qe("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...u({fill:j,stroke:Y,strokeWidth:1,strokeDasharray:[1e4,1]})});h(N,{element:Ae,ref:{x:8.5,y:5},parentGfx:T})}if(P==="association-start"){var Le=Qe("path",{d:"M 11 5 L 1 10 L 11 15",...d({fill:"none",stroke:Y,strokeWidth:1.5,strokeDasharray:[1e4,1]})});h(N,{element:Le,ref:{x:1,y:10},scale:.5,parentGfx:T})}if(P==="association-end"){var q=Qe("path",{d:"M 1 5 L 11 10 L 1 15",...d({fill:"none",stroke:Y,strokeWidth:1.5,strokeDasharray:[1e4,1]})});h(N,{element:q,ref:{x:11,y:10},scale:.5,parentGfx:T})}if(P==="conditional-flow-marker"){var Te=Qe("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...u({fill:j,stroke:Y})});h(N,{element:Te,ref:{x:-1,y:10},scale:.5,parentGfx:T})}if(P==="conditional-default-flow-marker"){var _e=Qe("path",{d:"M 6 4 L 10 16",...u({stroke:Y,fill:"none"})});h(N,{element:_e,ref:{x:0,y:10},scale:.5,parentGfx:T})}}function v(T,N,P,j,Y={}){Ci(j)&&(Y=j,j=0),j=j||0,Y=u(Y);var ae=N/2,ke=P/2,Ae=Qe("circle",{cx:ae,cy:ke,r:Math.round((N+P)/4-j),...Y});return ft(T,Ae),Ae}function _(T,N,P,j,Y,ae){Ci(Y)&&(ae=Y,Y=0),Y=Y||0,ae=u(ae);var ke=Qe("rect",{x:Y,y:Y,width:N-Y*2,height:P-Y*2,rx:j,ry:j,...ae});return ft(T,ke),ke}function b(T,N,P,j){var Y=N/2,ae=P/2,ke=[{x:Y,y:0},{x:N,y:ae},{x:Y,y:P},{x:0,y:ae}],Ae=ke.map(function(q){return q.x+","+q.y}).join(" ");j=u(j);var Le=Qe("polygon",{...j,points:Ae});return ft(T,Le),Le}function E(T,N,P,j){P=d(P);var Y=My(N,P,j);return ft(T,Y),Y}function w(T,N,P){return E(T,N,P,5)}function x(T,N,P){P=d(P);var j=Qe("path",{...P,d:N});return ft(T,j),j}function M(T,N,P,j){return x(N,P,be({"data-marker":T},j))}function B(T){return ee[T]}function H(T){return function(N,P,j){return B(T)(N,P,j)}}var R={"bpmn:MessageEventDefinition":function(T,N,P={},j){var Y=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:N.width,containerHeight:N.height,position:{mx:.235,my:.315}}),ae=j?Ve(N,l,P.stroke):Rt(N,s,P.fill),ke=j?Rt(N,s,P.fill):Ve(N,l,P.stroke),Ae=x(T,Y,{fill:ae,stroke:ke,strokeWidth:1});return Ae},"bpmn:TimerEventDefinition":function(T,N,P={}){var j=v(T,N.width,N.height,.2*N.height,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:2}),Y=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.5}});x(T,Y,{stroke:Ve(N,l,P.stroke),strokeWidth:2});for(var ae=0;ae<12;ae++){var ke=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.5}}),Ae=N.width/2,Le=N.height/2;x(T,ke,{strokeWidth:1,stroke:Ve(N,l,P.stroke),transform:"rotate("+ae*30+","+Le+","+Ae+")"})}return j},"bpmn:EscalationEventDefinition":function(T,N,P={},j){var Y=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.2}}),ae=j?Ve(N,l,P.stroke):Rt(N,s,P.fill);return x(T,Y,{fill:ae,stroke:Ve(N,l,P.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(T,N,P={}){var j=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.222}});return x(T,j,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(T,N,P={},j){var Y=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.57,my:.263}}),ae=j?Ve(N,l,P.stroke):Rt(N,s,P.fill);return x(T,Y,{fill:ae,stroke:Ve(N,l,P.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(T,N,P={},j){var Y=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:N.width,containerHeight:N.height,position:{mx:.2,my:.722}}),ae=j?Ve(N,l,P.stroke):Rt(N,s,P.fill);return x(T,Y,{fill:ae,stroke:Ve(N,l,P.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(T,N,P={},j){var Y=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.638,my:-.055}}),ae=j?Ve(N,l,P.stroke):"none",ke=x(T,Y,{fill:ae,stroke:Ve(N,l,P.stroke),strokeWidth:1});return c6(ke,45),ke},"bpmn:CompensateEventDefinition":function(T,N,P={},j){var Y=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.22,my:.5}}),ae=j?Ve(N,l,P.stroke):Rt(N,s,P.fill);return x(T,Y,{fill:ae,stroke:Ve(N,l,P.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(T,N,P={},j){var Y=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.2}}),ae=j?Ve(N,l,P.stroke):Rt(N,s,P.fill);return x(T,Y,{strokeWidth:1,fill:ae,stroke:Ve(N,l,P.stroke)})},"bpmn:MultipleEventDefinition":function(T,N,P={},j){var Y=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:N.width,containerHeight:N.height,position:{mx:.222,my:.36}}),ae=j?Ve(N,l,P.stroke):Rt(N,s,P.fill);return x(T,Y,{fill:ae,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(T,N,P={}){var j=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:N.width,containerHeight:N.height,position:{mx:.458,my:.194}});return x(T,j,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(T,N,P={}){var j=v(T,N.width,N.height,8,{fill:Ve(N,l,P.stroke),stroke:Ve(N,l,P.stroke),strokeWidth:4});return j}};function O(T,N,P={}){var j=Ge(T),Y=AV(j);return j.get("eventDefinitions")&&j.get("eventDefinitions").length>1?j.get("parallelMultiple")?R["bpmn:ParallelMultipleEventDefinition"](N,T,P,Y):R["bpmn:MultipleEventDefinition"](N,T,P,Y):Aa(j,"bpmn:MessageEventDefinition")?R["bpmn:MessageEventDefinition"](N,T,P,Y):Aa(j,"bpmn:TimerEventDefinition")?R["bpmn:TimerEventDefinition"](N,T,P,Y):Aa(j,"bpmn:ConditionalEventDefinition")?R["bpmn:ConditionalEventDefinition"](N,T,P,Y):Aa(j,"bpmn:SignalEventDefinition")?R["bpmn:SignalEventDefinition"](N,T,P,Y):Aa(j,"bpmn:EscalationEventDefinition")?R["bpmn:EscalationEventDefinition"](N,T,P,Y):Aa(j,"bpmn:LinkEventDefinition")?R["bpmn:LinkEventDefinition"](N,T,P,Y):Aa(j,"bpmn:ErrorEventDefinition")?R["bpmn:ErrorEventDefinition"](N,T,P,Y):Aa(j,"bpmn:CancelEventDefinition")?R["bpmn:CancelEventDefinition"](N,T,P,Y):Aa(j,"bpmn:CompensateEventDefinition")?R["bpmn:CompensateEventDefinition"](N,T,P,Y):Aa(j,"bpmn:TerminateEventDefinition")?R["bpmn:TerminateEventDefinition"](N,T,P,Y):null}var D={ParticipantMultiplicityMarker:function(T,N,P={}){var j=So(N,P),Y=Cr(N,P),ae=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:j,containerHeight:Y,position:{mx:(j/2-6)/j,my:(Y-15)/Y}});M("participant-multiplicity",T,ae,{strokeWidth:2,fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke)})},SubProcessMarker:function(T,N,P={}){var j=_(T,14,14,0,{strokeWidth:1,fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke)});Oi(j,N.width/2-7.5,N.height-20);var Y=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2-7.5)/N.width,my:(N.height-20)/N.height}});M("sub-process",T,Y,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke)})},ParallelMarker:function(T,N,P){var j=So(N,P),Y=Cr(N,P),ae=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:j,containerHeight:Y,position:{mx:(j/2+P.parallel)/j,my:(Y-20)/Y}});M("parallel",T,ae,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke)})},SequentialMarker:function(T,N,P){var j=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2+P.seq)/N.width,my:(N.height-19)/N.height}});M("sequential",T,j,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke)})},CompensationMarker:function(T,N,P){var j=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2+P.compensation)/N.width,my:(N.height-13)/N.height}});M("compensation",T,j,{strokeWidth:1,fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke)})},LoopMarker:function(T,N,P){var j=So(N,P),Y=Cr(N,P),ae=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:j,containerHeight:Y,position:{mx:(j/2+P.loop)/j,my:(Y-7)/Y}});M("loop",T,ae,{strokeWidth:1.5,fill:"none",stroke:Ve(N,l,P.stroke),strokeMiterlimit:.5})},AdhocMarker:function(T,N,P){var j=So(N,P),Y=Cr(N,P),ae=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:j,containerHeight:Y,position:{mx:(j/2+P.adhoc)/j,my:(Y-15)/Y}});M("adhoc",T,ae,{strokeWidth:1,fill:Ve(N,l,P.stroke),stroke:Ve(N,l,P.stroke)})}};function A(T,N,P,j){D[T](N,P,j)}function L(T,N,P,j={}){j={fill:j.fill,stroke:j.stroke,width:So(N,j),height:Cr(N,j)};var Y=Ge(N),ae=P&&P.includes("SubProcessMarker");ae?j={...j,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:j={...j,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},ue(P,function(Le){A(Le,T,N,j)}),Y.get("isForCompensation")&&A("CompensationMarker",T,N,j),F(Y,"bpmn:AdHocSubProcess")&&A("AdhocMarker",T,N,j);var ke=Y.get("loopCharacteristics"),Ae=ke&&ke.get("isSequential");ke&&(Ae===void 0&&A("LoopMarker",T,N,j),Ae===!1&&A("ParallelMarker",T,N,j),Ae===!0&&A("SequentialMarker",T,N,j))}function $(T,N,P={}){P=be({size:{width:100}},P);var j=o.createText(N||"",P);return Gt(j).add("djs-label"),ft(T,j),j}function Z(T,N,P,j={}){var Y=Ge(N),ae=wh({x:N.x,y:N.y,width:N.width,height:N.height},j);return $(T,Y.name,{align:P,box:ae,padding:7,style:{fill:bh(N,c,l,j.stroke)}})}function me(T,N,P={}){var j={width:90,height:30,x:N.width/2+N.x,y:N.height/2+N.y};return $(T,ro(N),{box:j,fitBox:!0,style:be({},o.getExternalStyle(),{fill:bh(N,c,l,P.stroke)})})}function ge(T,N,P,j={}){var Y=_i(P),ae=$(T,N,{box:{height:30,width:Y?Cr(P,j):So(P,j)},align:"center-middle",style:{fill:bh(P,c,l,j.stroke)}});if(Y){var ke=-1*Cr(P,j);j0(ae,0,-ke,270)}}function pe(T,N,P={}){var{width:j,height:Y}=wh(N,P);return _(T,j,Y,G0,{...P,fill:Rt(N,s,P.fill),fillOpacity:sd,stroke:Ve(N,l,P.stroke)})}function te(T,N,P={}){var j=Ge(N),Y=Rt(N,s,P.fill),ae=Ve(N,l,P.stroke);return(j.get("associationDirection")==="One"||j.get("associationDirection")==="Both")&&(P.markerEnd=p(T,"association-end",Y,ae)),j.get("associationDirection")==="Both"&&(P.markerStart=p(T,"association-start",Y,ae)),P=$t(P,["markerStart","markerEnd"]),w(T,N.waypoints,{...P,stroke:ae,strokeDasharray:"0, 5"})}function le(T,N,P={}){var j=Rt(N,s,P.fill),Y=Ve(N,l,P.stroke),ae=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.474,my:.296}}),ke=x(T,ae,{fill:j,fillOpacity:sd,stroke:Y}),Ae=Ge(N);if(TV(Ae)){var Le=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.33,my:(N.height-18)/N.height}});x(T,Le,{strokeWidth:2,fill:j,stroke:Y})}return ke}function ye(T,N,P={}){return v(T,N.width,N.height,{fillOpacity:sd,...P,fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke)})}function we(T,N,P={}){return b(T,N.width,N.height,{fill:Rt(N,s,P.fill),fillOpacity:sd,stroke:Ve(N,l,P.stroke)})}function I(T,N,P={}){var j=_(T,So(N,P),Cr(N,P),0,{fill:Rt(N,s,P.fill),fillOpacity:P.fillOpacity||sd,stroke:Ve(N,l,P.stroke),strokeWidth:1.5}),Y=Ge(N);if(F(Y,"bpmn:Lane")){var ae=Y.get("name");ge(T,ae,N,P)}return j}function z(T,N,P={}){var j=pe(T,N,P);Qi(N)&&He(j,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var Y=Bt(N);return Z(T,N,Y?"center-top":"center-middle",P),Y?L(T,N,void 0,P):L(T,N,["SubProcessMarker"],P),j}function K(T,N,P={}){var j=pe(T,N,P);return Z(T,N,"center-middle",P),L(T,N,void 0,P),j}var ee=this.handlers={"bpmn:AdHocSubProcess":function(T,N,P={}){return Bt(N)?P=$t(P,["fill","stroke","width","height"]):P=$t(P,["fill","stroke"]),z(T,N,P)},"bpmn:Association":function(T,N,P={}){return P=$t(P,["fill","stroke"]),te(T,N,P)},"bpmn:BoundaryEvent":function(T,N,P={}){var{renderIcon:j=!0}=P;P=$t(P,["fill","stroke"]);var Y=Ge(N),ae=Y.get("cancelActivity");P={strokeWidth:1.5,fill:Rt(N,s,P.fill),fillOpacity:BV,stroke:Ve(N,l,P.stroke)},ae||(P.strokeDasharray="6");var ke=ye(T,N,P);return v(T,N.width,N.height,Hg,{...P,fill:"none"}),j&&O(N,T,P),ke},"bpmn:BusinessRuleTask":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=K(T,N,P),Y=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),ae=x(T,Y);He(ae,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:1});var ke=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),Ae=x(T,ke);return He(Ae,{fill:Ve(N,l,P.stroke),stroke:Ve(N,l,P.stroke),strokeWidth:1}),j},"bpmn:CallActivity":function(T,N,P={}){return P=$t(P,["fill","stroke"]),z(T,N,{strokeWidth:5,...P})},"bpmn:ComplexGateway":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=we(T,N,P),Y=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:N.width,containerHeight:N.height,position:{mx:.46,my:.26}});return x(T,Y,{fill:Ve(N,l,P.stroke),stroke:Ve(N,l,P.stroke),strokeWidth:1}),j},"bpmn:DataInput":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=i.getRawPath("DATA_ARROW"),Y=le(T,N,P);return x(T,j,{fill:"none",stroke:Ve(N,l,P.stroke),strokeWidth:1}),Y},"bpmn:DataInputAssociation":function(T,N,P={}){return P=$t(P,["fill","stroke"]),te(T,N,{...P,markerEnd:p(T,"association-end",Rt(N,s,P.fill),Ve(N,l,P.stroke))})},"bpmn:DataObject":function(T,N,P={}){return P=$t(P,["fill","stroke"]),le(T,N,P)},"bpmn:DataObjectReference":H("bpmn:DataObject"),"bpmn:DataOutput":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=i.getRawPath("DATA_ARROW"),Y=le(T,N,P);return x(T,j,{strokeWidth:1,fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke)}),Y},"bpmn:DataOutputAssociation":function(T,N,P={}){return P=$t(P,["fill","stroke"]),te(T,N,{...P,markerEnd:p(T,"association-end",Rt(N,s,P.fill),Ve(N,l,P.stroke))})},"bpmn:DataStoreReference":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:0,my:.133}});return x(T,j,{fill:Rt(N,s,P.fill),fillOpacity:sd,stroke:Ve(N,l,P.stroke),strokeWidth:2})},"bpmn:EndEvent":function(T,N,P={}){var{renderIcon:j=!0}=P;P=$t(P,["fill","stroke"]);var Y=ye(T,N,{...P,strokeWidth:4});return j&&O(N,T,P),Y},"bpmn:EventBasedGateway":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=Ge(N),Y=we(T,N,P);v(T,N.width,N.height,N.height*.2,{fill:Rt(N,"none",P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:1});var ae=j.get("eventGatewayType"),ke=!!j.get("instantiate");function Ae(){var q=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:N.width,containerHeight:N.height,position:{mx:.36,my:.44}});x(T,q,{fill:"none",stroke:Ve(N,l,P.stroke),strokeWidth:2})}if(ae==="Parallel"){var Le=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:N.width,containerHeight:N.height,position:{mx:.474,my:.296}});x(T,Le,{fill:"none",stroke:Ve(N,l,P.stroke),strokeWidth:1})}else ae==="Exclusive"&&(ke||v(T,N.width,N.height,N.height*.26,{fill:"none",stroke:Ve(N,l,P.stroke),strokeWidth:1}),Ae());return Y},"bpmn:ExclusiveGateway":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=we(T,N,P),Y=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:N.width,containerHeight:N.height,position:{mx:.32,my:.3}}),ae=Ut(N);return ae.get("isMarkerVisible")&&x(T,Y,{fill:Ve(N,l,P.stroke),stroke:Ve(N,l,P.stroke),strokeWidth:1}),j},"bpmn:Gateway":function(T,N,P={}){return P=$t(P,["fill","stroke"]),we(T,N,P)},"bpmn:Group":function(T,N,P={}){return P=$t(P,["fill","stroke","width","height"]),_(T,N.width,N.height,G0,{stroke:Ve(N,l,P.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:So(N,P),height:Cr(N,P)})},"bpmn:InclusiveGateway":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=we(T,N,P);return v(T,N.width,N.height,N.height*.24,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:2.5}),j},"bpmn:IntermediateEvent":function(T,N,P={}){var{renderIcon:j=!0}=P;P=$t(P,["fill","stroke"]);var Y=ye(T,N,{...P,strokeWidth:1.5});return v(T,N.width,N.height,Hg,{fill:"none",stroke:Ve(N,l,P.stroke),strokeWidth:1.5}),j&&O(N,T,P),Y},"bpmn:IntermediateCatchEvent":H("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":H("bpmn:IntermediateEvent"),"bpmn:Lane":function(T,N,P={}){return P=$t(P,["fill","stroke","width","height"]),I(T,N,{...P,fillOpacity:FV})},"bpmn:ManualTask":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=K(T,N,P),Y=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return x(T,Y,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:.5}),j},"bpmn:MessageFlow":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=Ge(N),Y=Ut(N),ae=Rt(N,s,P.fill),ke=Ve(N,l,P.stroke),Ae=w(T,N.waypoints,{markerEnd:p(T,"messageflow-end",ae,ke),markerStart:p(T,"messageflow-start",ae,ke),stroke:ke,strokeDasharray:"10, 11",strokeWidth:1.5});if(j.get("messageRef")){var Le=Ae.getPointAtLength(Ae.getTotalLength()/2),q=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:Le.x,y:Le.y}}),Te={strokeWidth:1};Y.get("messageVisibleKind")==="initiating"?(Te.fill=ae,Te.stroke=ke):(Te.fill=ke,Te.stroke=ae);var _e=x(T,q,Te),oe=j.get("messageRef"),X=oe.get("name"),he=$(T,X,{align:"center-top",fitBox:!0,style:{fill:ke}}),se=_e.getBBox(),Ne=he.getBBox(),Me=Le.x-Ne.width/2,Ce=Le.y+se.height/2+LV;j0(he,Me,Ce,0)}return Ae},"bpmn:ParallelGateway":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=we(T,N,P),Y=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:N.width,containerHeight:N.height,position:{mx:.46,my:.2}});return x(T,Y,{fill:Ve(N,l,P.stroke),stroke:Ve(N,l,P.stroke),strokeWidth:1}),j},"bpmn:Participant":function(T,N,P={}){P=$t(P,["fill","stroke","width","height"]);var j=I(T,N,P),Y=Bt(N),ae=_i(N),ke=Ge(N),Ae=ke.get("name");if(Y){var Le=ae?[{x:30,y:0},{x:30,y:Cr(N,P)}]:[{x:0,y:30},{x:So(N,P),y:30}];E(T,Le,{stroke:Ve(N,l,P.stroke),strokeWidth:OV}),ge(T,Ae,N,P)}else{var q=wh(N,P);ae||(q.height=So(N,P),q.width=Cr(N,P));var Te=$(T,Ae,{box:q,align:"center-middle",style:{fill:bh(N,c,l,P.stroke)}});if(!ae){var _e=-1*Cr(N,P);j0(Te,0,-_e,270)}}return ke.get("participantMultiplicity")&&A("ParticipantMultiplicityMarker",T,N,P),j},"bpmn:ReceiveTask":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=Ge(N),Y=K(T,N,P),ae;return j.get("instantiate")?(v(T,28,28,20*.22,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:1}),ae=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):ae=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),x(T,ae,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:1}),Y},"bpmn:ScriptTask":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=K(T,N,P),Y=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return x(T,Y,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:1}),j},"bpmn:SendTask":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=K(T,N,P),Y=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return x(T,Y,{fill:Ve(N,l,P.stroke),stroke:Rt(N,s,P.fill),strokeWidth:1}),j},"bpmn:SequenceFlow":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=Rt(N,s,P.fill),Y=Ve(N,l,P.stroke),ae=w(T,N.waypoints,{markerEnd:p(T,"sequenceflow-end",j,Y),stroke:Y}),ke=Ge(N),{source:Ae}=N;if(Ae){var Le=Ge(Ae);ke.get("conditionExpression")&&F(Le,"bpmn:Activity")&&He(ae,{markerStart:p(T,"conditional-flow-marker",j,Y)}),Le.get("default")&&(F(Le,"bpmn:Gateway")||F(Le,"bpmn:Activity"))&&Le.get("default")===ke&&He(ae,{markerStart:p(T,"conditional-default-flow-marker",j,Y)})}return ae},"bpmn:ServiceTask":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=K(T,N,P);v(T,10,10,{fill:Rt(N,s,P.fill),stroke:"none",transform:"translate(6, 6)"});var Y=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});x(T,Y,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:1}),v(T,10,10,{fill:Rt(N,s,P.fill),stroke:"none",transform:"translate(11, 10)"});var ae=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return x(T,ae,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:1}),j},"bpmn:StartEvent":function(T,N,P={}){var{renderIcon:j=!0}=P;P=$t(P,["fill","stroke"]);var Y=Ge(N);Y.get("isInterrupting")||(P={...P,strokeDasharray:"6"});var ae=ye(T,N,P);return j&&O(N,T,P),ae},"bpmn:SubProcess":function(T,N,P={}){return Bt(N)?P=$t(P,["fill","stroke","width","height"]):P=$t(P,["fill","stroke"]),z(T,N,P)},"bpmn:Task":function(T,N,P={}){return P=$t(P,["fill","stroke"]),K(T,N,P)},"bpmn:TextAnnotation":function(T,N,P={}){P=$t(P,["fill","stroke","width","height"]);var{width:j,height:Y}=wh(N,P),ae=_(T,j,Y,0,0,{fill:"none",stroke:"none"}),ke=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:j,containerHeight:Y,position:{mx:0,my:0}});x(T,ke,{stroke:Ve(N,l,P.stroke)});var Ae=Ge(N),Le=Ae.get("text")||"";return $(T,Le,{align:"left-top",box:wh(N,P),padding:7,style:{fill:bh(N,c,l,P.stroke)}}),ae},"bpmn:Transaction":function(T,N,P={}){Bt(N)?P=$t(P,["fill","stroke","width","height"]):P=$t(P,["fill","stroke"]);var j=z(T,N,{strokeWidth:1.5,...P}),Y=n.style(["no-fill","no-events"],{stroke:Ve(N,l,P.stroke),strokeWidth:1.5}),ae=Bt(N);return ae||(P={}),_(T,So(N,P),Cr(N,P),G0-Hg,Hg,Y),j},"bpmn:UserTask":function(T,N,P={}){P=$t(P,["fill","stroke"]);var j=K(T,N,P),Y=15,ae=12,ke=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:Y,y:ae}});x(T,ke,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:.5});var Ae=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:Y,y:ae}});x(T,Ae,{fill:Rt(N,s,P.fill),stroke:Ve(N,l,P.stroke),strokeWidth:.5});var Le=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:Y,y:ae}});return x(T,Le,{fill:Ve(N,l,P.stroke),stroke:Ve(N,l,P.stroke),strokeWidth:.5}),j},label:function(T,N,P={}){return me(T,N,P)}};this._drawPath=x,this._renderer=B}We(Cu,Bs);Cu.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Cu.prototype.canRender=function(e){return F(e,"bpmn:BaseElement")};Cu.prototype.drawShape=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Cu.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Cu.prototype.getShapePath=function(e){return F(e,"bpmn:Event")?CV(e):F(e,"bpmn:Activity")?RV(e,G0):F(e,"bpmn:Gateway")?MV(e):IV(e)};function $t(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var jV=0,$V={width:150,height:50};function GV(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function UV(e){return Ci(e)?be({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function qV(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch{return{width:0,height:0}}}function zV(e,t,n){for(var i=e.shift(),r=i,o;;){if(o=qV(r,n),o.width=r?o.width:0,r===" "||r===""||o.width<Math.round(t)||r.length<2)return HV(e,r,i,o);r=WV(r,o.width,t)}}function HV(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var oP="";function VV(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],o=0;if(n.length>1)for(;i=n.shift();)if(i.length+o<t)r.push(i),o+=i.length;else{(i==="-"||i===oP)&&r.pop();break}var a=r[r.length-1];return a&&a===oP&&(r[r.length-1]="-"),r.join("")}function WV(e,t,n){var i=Math.max(e.length*(n/t),1),r=VV(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function KV(){var e=document.getElementById("helper-svg");return e||(e=Qe("svg"),He(e,{id:"helper-svg"}),Ji(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function $y(e){this._config=be({},{size:$V,padding:jV,style:{},align:"center-top"},e||{})}$y.prototype.createText=function(e,t){return this.layoutText(e,t).element};$y.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};$y.prototype.layoutText=function(e,t){var n=be({},this._config.size,t.box),i=be({},this._config.style,t.style),r=GV(t.align||this._config.align),o=UV(t.padding!==void 0?t.padding:this._config.padding),a=t.fitBox||!1,s=YV(i),l=e.split(/\u00AD?\r?\n/),c=[],u=n.width-o.left-o.right,d=Qe("text");He(d,{x:0,y:0}),He(d,i);var h=KV();for(ft(h,d);l.length;)c.push(zV(l,u,d));r.vertical==="middle"&&(o.top=o.bottom=0);var p=Fr(c,function(E,w,x){return E+(s||w.height)},0)+o.top+o.bottom,m=Fr(c,function(E,w,x){return w.width>E?w.width:E},0),v=o.top;r.vertical==="middle"&&(v+=(n.height-p)/2),v-=(s||c[0].height)/4;var _=Qe("text");He(_,i),ue(c,function(E){var w;switch(v+=s||E.height,r.horizontal){case"left":w=o.left;break;case"right":w=(a?m:u)-o.right-E.width;break;default:w=Math.max(((a?m:u)-E.width)/2+o.left,0)}var x=Qe("tspan");He(x,{x:w,y:v}),x.textContent=E.text,ft(_,x)}),ci(d);var b={width:m,height:p};return{dimensions:b,element:_}};function YV(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var JV=12,XV=1.2,ZV=30;function C6(e){var t=be({fontFamily:"Arial, sans-serif",fontSize:JV,fontWeight:"normal",lineHeight:XV},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=be({},t,{fontSize:n},e&&e.externalStyle||{}),r=new $y({style:t});this.getExternalLabelBounds=function(o,a){var s=r.getDimensions(a,{box:{width:90,height:30},style:i});return{x:Math.round(o.x+o.width/2-s.width/2),y:Math.round(o.y),width:Math.ceil(s.width),height:Math.ceil(s.height)}},this.getTextAnnotationBounds=function(o,a){var s=r.getDimensions(a,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(ZV,Math.round(s.height))}},this.createText=function(o,a){return r.createText(o,a||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}C6.$inject=["config.textRenderer"];function QV(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,o;n.abspos?(r=n.abspos.x,o=n.abspos.y):(r=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var a={};if(n.position){for(var s=n.containerHeight/i.height*n.yScaleFactor,l=n.containerWidth/i.width*n.xScaleFactor,c=0;c<i.heightElements.length;c++)a["y"+c]=i.heightElements[c]*s;for(var u=0;u<i.widthElements.length;u++)a["x"+u]=i.widthElements[u]*l}var d=iW(i.d,{mx:r,my:o,e:a});return d}}var eW=/\{([^{}]+)\}/g,tW=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function nW(e,t,n){var i=n;return t.replace(tW,function(r,o,a,s,l){o=o||s,i&&(o in i&&(i=i[o]),typeof i=="function"&&l&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function iW(e,t){return String(e).replace(eW,function(n,i){return nW(n,i,t)})}const rW={__init__:["bpmnRenderer"],bpmnRenderer:["type",Cu],textRenderer:["type",C6],pathMap:["type",QV]};function oW(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const Gy={translate:["value",oW]};function U0(e,t,n){return be({id:e.id,type:e.$type,businessObject:e,di:t},n)}function aW(e,t,n){var i=e.waypoint;return!i||i.length<2?[ht(t),ht(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function R6(e,t,n){return new Error(`element ${Yi(t)} referenced by ${Yi(e)}#${n} not yet drawn`)}function js(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=r}js.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];js.prototype.add=function(e,t,n){var i,r,o;if(F(t,"bpmndi:BPMNPlane")){var a=F(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(U0(e,t,a)),this._canvas.addRootElement(i)}else if(F(t,"bpmndi:BPMNShape")){var s=!Bt(e,t),l=lW(e);r=n&&(n.hidden||n.collapsed);var c=t.bounds;i=this._elementFactory.createShape(U0(e,t,{collapsed:s,hidden:r,x:Math.round(c.x),y:Math.round(c.y),width:Math.round(c.width),height:Math.round(c.height),isFrame:l})),F(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),F(e,"bpmn:Lane")&&(o=0),F(e,"bpmn:DataStoreReference")&&(sW(n,ht(c))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,o)}else if(F(t,"bpmndi:BPMNEdge")){var u=this._getSource(e),d=this._getTarget(e);r=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(U0(e,t,{hidden:r,source:u,target:d,waypoints:aW(t,u,d)})),F(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,o)}else throw new Error(`unknown di ${Yi(t)} for element ${Yi(e)}`);return _u(e)&&ro(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};js.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${Yi(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw R6(e,n,"attachedToRef");t.host=i,r||(i.attachers=r=[]),r.indexOf(t)===-1&&r.push(t)};js.prototype.addLabel=function(e,t,n){var i,r,o;return i=SV(t,n),r=ro(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),o=this._elementFactory.createLabel(U0(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!ro(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(o,n.parent)};js.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?R6(e,i,t+"Ref"):new Error(`${Yi(e)}#${t} Ref not specified`)};js.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};js.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};js.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function sW(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function lW(e){return F(e,"bpmn:Group")}const cW={__depends__:[Gy],bpmnImporter:["type",js]},uW={__depends__:[rW,cW]};function om(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}om.prototype.next=function(){return this._prefix+ ++this._counter};var dW=new om("ov"),pW=500;function Ri(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=dW,this._overlayDefaults=be({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=hW(n.getContainer()),this._init()}Ri.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Ri.prototype.get=function(e){if(Br(e)&&(e={id:e}),Br(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?It(t.overlays,la({type:e.type})):t.overlays.slice():[]}else return e.type?It(this._overlays,la({type:e.type})):e.id?this._overlays[e.id]:null};Ri.prototype.add=function(e,t,n){if(Ci(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=be({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};Ri.prototype.remove=function(e){var t=this.get(e)||[];bt(t)||(t=[t]);var n=this;ue(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(vu(i.html),vu(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var o=r.overlays.indexOf(i);o!==-1&&r.overlays.splice(o,1)}})};Ri.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Ri.prototype.show=function(){Uy(this._overlayRoot)};Ri.prototype.hide=function(){Uy(this._overlayRoot,!1)};Ri.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Ty(this._overlayRoot)};Ri.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=yi(t);i=o.x,r=o.y}M6(n,i,r),pr(e.html,"data-container-id",t.id)};Ri.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,o=t.top;if(t.right!==void 0){var a;i.waypoints?a=yi(i).width:a=i.width,r=t.right*-1+a}if(t.bottom!==void 0){var s;i.waypoints?s=yi(i).height:s=i.height,o=t.bottom*-1+s}M6(n,r||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Ri.prototype._createOverlayContainer=function(e){var t=_n('<div class="djs-overlays" />');Ji(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};Ri.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";I6(this._overlayRoot,n)};Ri.prototype._getOverlayContainer=function(e,t){var n=Wt(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};Ri.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,o;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),Br(i)&&(i=_n(i)),o=this._getOverlayContainer(n),r=_n('<div class="djs-overlay" data-overlay-id="'+t+'">'),Ji(r,{position:"absolute"}),r.appendChild(i),e.type&&In(r).add("djs-overlay-"+e.type);var a=this._canvas.findRoot(n),s=this._canvas.getRootElement();Uy(r,a===s),e.htmlContainer=r,o.overlays.push(e),o.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Ri.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,o=n&&n.maxZoom,a=e.htmlContainer,s=this._canvas.getRootElement(),l=!0;(i!==s||n&&(Ai(r)&&r>t.scale||Ai(o)&&o<t.scale))&&(l=!1),Uy(a,l),this._updateOverlayScale(e,t)};Ri.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,o=e.htmlContainer,a,s="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Ai(i)&&t.scale<i&&(a=(1/t.scale||1)*i),Ai(r)&&t.scale>r&&(a=(1/t.scale||1)*r)),Ai(a)&&(s="scale("+a+","+a+")"),I6(o,s)};Ri.prototype._updateOverlaysVisibilty=function(e){var t=this;ue(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};Ri.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,o=t.get({element:r});ue(o,function(l){t.remove(l.id)});var a=t._getOverlayContainer(r);if(a){vu(a.html);var s=t._overlayContainers.indexOf(a);s!==-1&&t._overlayContainers.splice(s,1)}}),e.on("element.changed",pW,function(i){var r=i.element,o=t._getOverlayContainer(r,!0);o&&(ue(o.overlays,function(a){t._updateOverlay(a)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&In(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function hW(e){var t=_n('<div class="djs-overlay-container" />');return Ji(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function M6(e,t,n){Ji(e,{left:t+"px",top:n+"px"})}function Uy(e,t){e.style.display=t===!1?"none":""}function I6(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const qy={__init__:["overlays"],overlays:["type",Ri]};function D6(e,t,n,i){e.on("element.changed",function(r){var o=r.element;(o.parent||o===t.getRootElement())&&(r.gfx=n.getGraphics(o)),r.gfx&&e.fire(VM(o)+".changed",r)}),e.on("elements.changed",function(r){var o=r.elements;o.forEach(function(a){e.fire("element.changed",{element:a})}),i.updateContainments(o)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}D6.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const g5={__init__:["changeSupport"],changeSupport:["type",D6]};var fW=1e3;function je(e){this._eventBus=e}je.$inject=["eventBus"];function mW(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}je.prototype.on=function(e,t,n,i,r,o){if((ui(t)||pt(t))&&(o=r,r=i,i=n,n=t,t=null),ui(n)&&(o=r,r=i,i=n,n=fW),Ci(r)&&(o=r,r=!1),!ui(i))throw new Error("handlerFn must be a function");bt(e)||(e=[e]);var a=this._eventBus;ue(e,function(s){var l=["commandStack",s,t].filter(function(c){return c}).join(".");a.on(l,n,r?mW(i,o):i,o)})};je.prototype.canExecute=$s("canExecute");je.prototype.preExecute=$s("preExecute");je.prototype.preExecuted=$s("preExecuted");je.prototype.execute=$s("execute");je.prototype.executed=$s("executed");je.prototype.postExecute=$s("postExecute");je.prototype.postExecuted=$s("postExecuted");je.prototype.revert=$s("revert");je.prototype.reverted=$s("reverted");function $s(e){return function(n,i,r,o,a){(ui(n)||pt(n))&&(a=o,o=r,r=i,i=n,n=null),this.on(n,e,i,r,o,a)}}function v5(e,t){t.invoke(je,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}We(v5,je);v5.$inject=["canvas","injector"];const gW={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",v5]};function Of(e){return CSS.escape(e)}var vW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function gw(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return vW[t]})}var L6="_plane";function aP(e){var t=e.id;return yW(t)}function _s(e){var t=e.id;return F(e,"bpmn:SubProcess")?O6(t):t}function Oc(e){return O6(e)}function q0(e){var t=Ut(e);return F(t,"bpmndi:BPMNPlane")}function O6(e){return e+L6}function yW(e){return e.replace(new RegExp(L6+"$"),"")}var _W="bjs-breadcrumbs-shown";function B6(e,t,n){var i=_n('<ul class="bjs-breadcrumbs"></ul>'),r=n.getContainer(),o=In(r);r.appendChild(i);var a=[];e.on("element.changed",function(l){var c=l.element,u=Ge(c),d=Wt(a,function(h){return h===u});d&&s()});function s(l){l&&(a=bW(l));var c=a.flatMap(function(d){var h=n.findRoot(_s(d))||n.findRoot(d.id);if(!h&&F(d,"bpmn:Process")){var p=t.find(function(_){var b=Ge(_);return b&&b.get("processRef")===d});h=p&&n.findRoot(p.id)}if(!h)return[];var m=gw(d.name||d.id),v=_n('<li><span class="bjs-crumb"><a title="'+m+'">'+m+"</a></span></li>");return v.addEventListener("click",function(){n.setRootElement(h)}),v});i.innerHTML="";var u=c.length>1;o.toggle(_W,u),c.forEach(function(d){i.appendChild(d)})}e.on("root.set",function(l){s(l.element)})}B6.$inject=["eventBus","elementRegistry","canvas"];function bW(e){for(var t=Ge(e),n=[],i=t;i;i=i.$parent)(F(i,"bpmn:SubProcess")||F(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function F6(e,t){var n=null,i=new wW;e.on("root.set",function(r){var o=r.element,a=t.viewbox(),s=i.get(o);if(i.set(n,{x:a.x,y:a.y,zoom:a.scale}),n=o,!(!F(o,"bpmn:SubProcess")&&!s)){s=s||{x:0,y:0,zoom:1};var l=(a.x-s.x)*a.scale,c=(a.y-s.y)*a.scale;(l!==0||c!==0)&&t.scroll({dx:l,dy:c}),s.zoom!==a.scale&&t.zoom(s.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}F6.$inject=["eventBus","canvas"];function wW(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var sP={x:180,y:160};function Ru(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n._handleImport(r.definitions)})}Ru.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=e.diagrams.filter(i=>i.plane).flatMap(i=>t._createNewDiagrams(i.plane));n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};Ru.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(o){var a=o.bpmnElement;if(a){var s=a.$parent;F(a,"bpmn:SubProcess")&&!o.isExpanded&&n.push(a),EW(a,e)&&i.push({diElement:o,parent:s})}});var r=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var a=t._createDiagram(o);t._processToDiagramMap[o.id]=a,r.push(a)}}),i.forEach(function(o){for(var a=o.diElement,s=o.parent;s&&n.indexOf(s)===-1;)s=s.$parent;if(s){var l=t._processToDiagramMap[s.id];t._moveToDiPlane(a,l.plane)}}),r};Ru.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=xW(e),i={x:n.x-sP.x,y:n.y-sP.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(o){o.x=o.x-i.x,o.y=o.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};Ru.prototype._moveToDiPlane=function(e,t){var n=j6(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};Ru.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Ru.$inject=["eventBus","moddle"];function j6(e){return F(e,"bpmndi:BPMNDiagram")?e:j6(e.$parent)}function xW(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=at(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),Dy(t)}function EW(e,t){var n=e.$parent;return!(!F(n,"bpmn:SubProcess")||n===t.bpmnElement||Ct(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Vg=250,SW='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',NW="bjs-drilldown-empty";function tc(e,t,n,i,r){je.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=r;var o=this;this.executed("shape.toggleCollapse",Vg,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.reverted("shape.toggleCollapse",Vg,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.executed(["shape.create","shape.move","shape.delete"],Vg,function(a){var s=a.oldParent,l=a.newParent||a.parent,c=a.shape;o._canDrillDown(c)&&o._addOverlay(c),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(l),o._updateDrilldownOverlay(c)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Vg,function(a){var s=a.oldParent,l=a.newParent||a.parent,c=a.shape;o._canDrillDown(c)&&o._addOverlay(c),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(l),o._updateDrilldownOverlay(c)},!0),t.on("import.render.complete",function(){n.filter(function(a){return o._canDrillDown(a)}).map(function(a){o._addOverlay(a)})})}We(tc,je);tc.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};tc.prototype._canDrillDown=function(e){var t=this._canvas;return F(e,"bpmn:SubProcess")&&t.findRoot(_s(e))};tc.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=Ge(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.get("flowElements")&&n.get("flowElements").length;In(i.html).toggle(NW,!r)}};tc.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=Ge(e),r=n.get({element:e,type:"drilldown"});r.length&&this._removeOverlay(e);var o=_n('<button type="button" class="bjs-drilldown">'+SW+"</button>"),a=i.get("name")||i.get("id"),s=this._translate("Open {element}",{element:a});o.setAttribute("title",s),o.addEventListener("click",function(){t.setRootElement(t.findRoot(_s(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)};tc.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};tc.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const kW={__depends__:[qy,g5,gW],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",B6],drilldownCentering:["type",F6],drilldownOverlayBehavior:["type",tc],subprocessCompatibility:["type",Ru]};var PW=500,AW=1e3;function Mu(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(o){var a=Qe("rect");return He(a,be({x:0,y:0,rx:4,width:100,height:100},n)),a}e.on(["shape.added","shape.changed"],PW,function(o){var a=o.element,s=o.gfx,l=rn(".djs-outline",s);l||(l=i.getOutline(a)||r(),ft(s,l)),i.updateShapeOutline(l,a)}),e.on(["connection.added","connection.changed"],function(o){var a=o.element,s=o.gfx,l=rn(".djs-outline",s);l||(l=r(),ft(s,l)),i.updateConnectionOutline(l,a)})}Mu.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&ue(i,function(r){n=n||r.updateOutline(t,e)}),n||He(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};Mu.prototype.updateConnectionOutline=function(e,t){var n=yi(t);He(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};Mu.prototype.registerProvider=function(e,t){t||(t=e,e=AW),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};Mu.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Mu.prototype.getOutline=function(e){var t,n=this._getProviders();return ue(n,function(i){ui(i.getOutline)&&(t=t||i.getOutline(e))}),t};Mu.$inject=["eventBus","styles","elementRegistry"];const y5={__init__:["outline"],outline:["type",Mu]},TW="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",CW="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",RW={width:36,height:50},MW={width:50,height:50};function lP(e,t,n){return Qe("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const wl=5;function zy(e,t){this._styles=t,e.registerProvider(this)}zy.$inject=["outline","styles"];zy.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!qt(e))return F(e,"bpmn:Gateway")?(n=Qe("rect"),be(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),He(n,be({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):Ct(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=Qe("rect"),He(n,be({x:-wl,y:-wl,rx:14,width:e.width+wl*2,height:e.height+wl*2},t))):F(e,"bpmn:EndEvent")?(n=Qe("circle"),He(n,be({cx:e.width/2,cy:e.height/2,r:e.width/2+wl+1},t))):F(e,"bpmn:Event")?(n=Qe("circle"),He(n,be({cx:e.width/2,cy:e.height/2,r:e.width/2+wl},t))):F(e,"bpmn:DataObjectReference")&&cP(e,"bpmn:DataObjectReference")?n=lP(TW,{x:-6,y:-6},t):F(e,"bpmn:DataStoreReference")&&cP(e,"bpmn:DataStoreReference")&&(n=lP(CW,{x:-6,y:-6},t)),n};zy.prototype.updateOutline=function(e,t){if(!qt(e))return Ct(e,["bpmn:SubProcess","bpmn:Group"])?(He(t,{width:e.width+wl*2,height:e.height+wl*2}),!0):!!Ct(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function cP(e,t){var n;return t==="bpmn:DataObjectReference"?n=RW:t==="bpmn:DataStoreReference"&&(n=MW),e.width===n.width&&e.height===n.height}const IW={__depends__:[y5],__init__:["outlineProvider"],outlineProvider:["type",zy]};function uP(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function xp(e){return e.originalEvent||e.srcEvent}function yb(e){uP(e),uP(xp(e))}function bu(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function $6(){return/mac/i.test(navigator.platform)}function G6(e,t){return(xp(e)||e).button===t}function nc(e){return G6(e,0)}function DW(e){return G6(e,1)}function Bf(e){var t=xp(e)||e;return nc(e)?$6()?t.metaKey:t.ctrlKey:!1}function qv(e){var t=xp(e)||e;return nc(e)&&t.shiftKey}function LW(e){return!0}function Wg(e){return nc(e)||DW(e)}var dP=500;function U6(e,t,n){var i=this;function r(R,O,D){if(!s(R,O)){var A,L,$;D?L=t.getGraphics(D):(A=O.delegateTarget||O.target,A&&(L=A,D=t.get(L))),!(!L||!D)&&($=e.fire(R,{element:D,gfx:L,originalEvent:O}),$===!1&&(O.stopPropagation(),O.preventDefault()))}}var o={};function a(R){return o[R]}function s(R,O){var D=c[R]||nc;return!D(O)}var l={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},c={"element.contextmenu":LW,"element.mousedown":Wg,"element.mouseup":Wg,"element.click":Wg,"element.dblclick":Wg};function u(R,O,D){var A=l[R];if(!A)throw new Error("unmapped DOM event name <"+R+">");return r(A,O,D)}var d="svg, .djs-element";function h(R,O,D,A){var L=o[D]=function($){r(D,$)};A&&(c[D]=A),L.$delegate=Ir.bind(R,d,O,L)}function p(R,O,D){var A=a(D);A&&Ir.unbind(R,O,A.$delegate)}function m(R){ue(l,function(O,D){h(R,D,O)})}function v(R){ue(l,function(O,D){p(R,D,O)})}e.on("canvas.destroy",function(R){v(R.svg)}),e.on("canvas.init",function(R){m(R.svg)}),e.on(["shape.added","connection.added"],function(R){var O=R.element,D=R.gfx;e.fire("interactionEvents.createHit",{element:O,gfx:D})}),e.on(["shape.changed","connection.changed"],dP,function(R){var O=R.element,D=R.gfx;e.fire("interactionEvents.updateHit",{element:O,gfx:D})}),e.on("interactionEvents.createHit",dP,function(R){var O=R.element,D=R.gfx;i.createDefaultHit(O,D)}),e.on("interactionEvents.updateHit",function(R){var O=R.element,D=R.gfx;i.updateDefaultHit(O,D)});var _=M("djs-hit djs-hit-stroke"),b=M("djs-hit djs-hit-click-stroke"),E=M("djs-hit djs-hit-all"),w=M("djs-hit djs-hit-no-move"),x={all:E,"click-stroke":b,stroke:_,"no-move":w};function M(R,O){return O=be({stroke:"white",strokeWidth:15},O||{}),n.cls(R,["no-fill","no-border"],O)}function B(R,O){var D=x[O];if(!D)throw new Error("invalid hit type <"+O+">");return He(R,D),R}function H(R,O){ft(R,O)}this.removeHits=function(R){var O=aw(".djs-hit",R);ue(O,ci)},this.createDefaultHit=function(R,O){var D=R.waypoints,A=R.isFrame,L;return D?this.createWaypointsHit(O,D):(L=A?"stroke":"all",this.createBoxHit(O,L,{width:R.width,height:R.height}))},this.createWaypointsHit=function(R,O){var D=My(O);return B(D,"stroke"),H(R,D),D},this.createBoxHit=function(R,O,D){D=be({x:0,y:0},D);var A=Qe("rect");return B(A,O),He(A,D),H(R,A),A},this.updateDefaultHit=function(R,O){var D=rn(".djs-hit",O);if(D)return R.waypoints?zM(D,R.waypoints):He(D,{width:R.width,height:R.height}),D},this.fire=r,this.triggerMouseEvent=u,this.mouseHandler=a,this.registerEvent=h,this.unregisterEvent=p}U6.$inject=["eventBus","elementRegistry","styles"];const _5={__init__:["interactionEvents"],interactionEvents:["type",U6]};function Ep(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}Ep.$inject=["eventBus","canvas"];Ep.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};Ep.prototype.get=function(){return this._selectedElements};Ep.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Ep.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();bt(e)||(e=e?[e]:[]);var r=this._canvas,o=r.getRootElement();e=e.filter(function(a){var s=r.findRoot(a);return o===s}),t?ue(e,function(a){n.indexOf(a)===-1&&n.push(a)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var pP="hover",hP="selected",Kg=6;function b5(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(a,s){e.addMarker(a,s)}function o(a,s){e.removeMarker(a,s)}t.on("element.hover",function(a){r(a.element,pP)}),t.on("element.out",function(a){o(a.element,pP)}),t.on("selection.changed",function(a){function s(d){o(d,hP)}function l(d){r(d,hP)}var c=a.oldSelection,u=a.newSelection;ue(c,function(d){u.indexOf(d)===-1&&s(d)}),ue(u,function(d){c.indexOf(d)===-1&&l(d)}),i._updateSelectionOutline(u)}),t.on("element.changed",function(a){n.isSelected(a.element)&&i._updateSelectionOutline(n.get())})}b5.$inject=["canvas","eventBus","selection"];b5.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Ry(t);var n=e.length>1,i=this._canvas.getContainer();if(Gt(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=OW(yi(e)),o=Qe("rect");He(o,be({rx:3},r)),Gt(o).add("djs-selection-outline"),ft(t,o)}};function OW(e){return{x:e.x-Kg,y:e.y-Kg,width:e.width+Kg*2,height:e.height+Kg*2}}function q6(e,t,n,i){e.on("create.end",500,function(r){var o=r.context,a=o.canExecute,s=o.elements,l=o.hints||{},c=l.autoSelect;if(a){if(c===!1)return;bt(c)?t.select(c):t.select(s.filter(BW))}}),e.on("connect.end",500,function(r){var o=r.context,a=o.connection;a&&t.select(a)}),e.on("shape.move.end",500,function(r){var o=r.previousSelection||[],a=i.get(r.context.shape.id),s=Wt(o,function(l){return a.id===l.id});s||t.select(a)}),e.on("element.click",function(r){if(nc(r)){var o=r.element;o===n.getRootElement()&&(o=null);var a=t.isSelected(o),s=t.get().length>1,l=qv(r);if(a&&s)return l?t.deselect(o):t.select(o);a?t.deselect(o):t.select(o,l)}})}q6.$inject=["eventBus","selection","canvas","elementRegistry"];function BW(e){return!e.hidden}const za={__init__:["selectionVisuals","selectionBehavior"],__depends__:[_5,y5],selection:["type",Ep],selectionVisuals:["type",b5],selectionBehavior:["type",q6]};function ic(e){Pn.call(this,e)}We(ic,Pn);ic.prototype._modules=[uW,kW,IW,qy,za,Gy];ic.prototype._moddleExtensions={};var FW=["c","C"],jW=["v","V"],$W=["y","Y"],z6=["z","Z"];function GW(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function oo(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function gi(e,t){return e=bt(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function w5(e){return e.shiftKey}function UW(e){return oo(e)&&gi(FW,e)}function qW(e){return oo(e)&&gi(jW,e)}function zW(e){return oo(e)&&!w5(e)&&gi(z6,e)}function HW(e){return oo(e)&&(gi($W,e)||gi(z6,e)&&w5(e))}var Hy="keyboard.keydown",VW="keyboard.keyup",fP="input-handle-modified-keys",WW=1e3;function Fi(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}Fi.$inject=["config.keyboard","eventBus"];Fi.prototype._keydownHandler=function(e){this._keyHandler(e,Hy)};Fi.prototype._keyupHandler=function(e){this._keyHandler(e,VW)};Fi.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||Hy,i),n&&e.preventDefault()}};Fi.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:(KW(e.target)||YW(e.target)&&gi([" ","Enter"],e))&&this._isModifiedKeyIgnored(e)};Fi.prototype._isModifiedKeyIgnored=function(e){if(!oo(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1};Fi.prototype._getAllowedModifiers=function(e){var t=Xl(e,"["+fP+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(fP).split(",")};Fi.prototype.bind=function(e){this.unbind(),this._node=e,Vt.bind(e,"keydown",this._keydownHandler),Vt.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Fi.prototype.getBinding=function(){return this._node};Fi.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),Vt.unbind(e,"keydown",this._keydownHandler),Vt.unbind(e,"keyup",this._keyupHandler)),this._node=null};Fi.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Fi.prototype.addListener=function(e,t,n){ui(e)&&(n=t,t=e,e=WW),this._eventBus.on(n||Hy,e,t)};Fi.prototype.removeListener=function(e,t){this._eventBus.off(t||Hy,e)};Fi.prototype.hasModifier=GW;Fi.prototype.isCmd=oo;Fi.prototype.isShift=w5;Fi.prototype.isKey=gi;function KW(e){return e&&(Cy(e,"input, textarea")||e.contentEditable==="true")}function YW(e){return e&&Cy(e,"button, input[type=submit], input[type=button], a[href], [aria-role=button]")}var JW=500;function Sp(e,t){var n=this;e.on("editorActions.init",JW,function(i){var r=i.editorActions;n.registerBindings(t,r)})}Sp.$inject=["eventBus","keyboard"];Sp.prototype.registerBindings=function(e,t){function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("undo",function(i){var r=i.keyEvent;if(zW(r))return t.trigger("undo"),!0}),n("redo",function(i){var r=i.keyEvent;if(HW(r))return t.trigger("redo"),!0}),n("copy",function(i){var r=i.keyEvent;if(UW(r))return t.trigger("copy"),!0}),n("paste",function(i){var r=i.keyEvent;if(qW(r))return t.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(gi(["+","Add","="],r)&&oo(r))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(gi(["-","Subtract"],r)&&oo(r))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(gi("0",r)&&oo(r))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var r=i.keyEvent;if(gi(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};const x5={__init__:["keyboard","keyboardBindings"],keyboard:["type",Fi],keyboardBindings:["type",Sp]};var XW={moveSpeed:50,moveSpeedAccelerated:200};function H6(e,t,n){var i=this;this._config=be({},XW,e||{}),t.addListener(r);function r(o){var a=o.keyEvent,s=i._config;if(t.isCmd(a)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],a)){var l=t.isShift(a)?s.moveSpeedAccelerated:s.moveSpeed,c;switch(a.key){case"ArrowLeft":case"Left":c="left";break;case"ArrowUp":case"Up":c="up";break;case"ArrowRight":case"Right":c="right";break;case"ArrowDown":case"Down":c="down";break}return i.moveCanvas({speed:l,direction:c}),!0}}this.moveCanvas=function(o){var a=0,s=0,l=o.speed,c=l/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":a=c;break;case"up":s=c;break;case"right":a=-c;break;case"down":s=-c;break}n.scroll({dx:a,dy:s})}}H6.$inject=["config.keyboardMove","keyboard","canvas"];const V6={__depends__:[x5],__init__:["keyboardMove"],keyboardMove:["type",H6]};var ZW=/^djs-cursor-.*$/;function Vy(e){var t=In(document.body);t.removeMatching(ZW),e&&t.add("djs-cursor-"+e)}function W6(){Vy(null)}var QW=5e3;function K6(e,t){t=t||"element.click";function n(){return!1}return e.once(t,QW,n),function(){e.off(t,n)}}function tf(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function ca(e,t){return{x:e.x-t.x,y:e.y-t.y}}var eK=15;function Y6(e,t){var n;e.on("element.mousedown",500,function(a){return o(a.originalEvent)});function i(a){var s=n.start,l=n.button,c=bu(a),u=ca(c,s);if(!n.dragging&&tK(u)>eK&&(n.dragging=!0,l===0&&K6(e),Vy("grab")),n.dragging){var d=n.last||n.start;u=ca(c,d),t.scroll({dx:u.x,dy:u.y}),n.last=c}a.preventDefault()}function r(a){Vt.unbind(document,"mousemove",i),Vt.unbind(document,"mouseup",r),n=null,W6()}function o(a){if(!Xl(a.target,".djs-draggable")){var s=a.button;if(!(s>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:s,start:bu(a)},Vt.bind(document,"mousemove",i),Vt.bind(document,"mouseup",r),!0}}this.isActive=function(){return!!n}}Y6.$inject=["eventBus","canvas"];function tK(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const J6={__init__:["moveCanvas"],moveCanvas:["type",Y6]};function vw(e){return Math.log(e)/Math.log(10)}function X6(e,t){var n=vw(e.min),i=vw(e.max),r=Math.abs(n)+Math.abs(i);return r/t}function nK(e,t){return Math.max(e.min,Math.min(e.max,t))}var iK=Math.sign||function(e){return e>=0?1:-1},E5={min:.2,max:4},Z6=10,rK=.1,oK=.75;function Ha(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=pa(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||oK;var i=this;t.on("canvas.init",function(r){i._init(e.enabled!==!1)})}Ha.$inject=["config.zoomScroll","eventBus","canvas"];Ha.prototype.scroll=function(t){this._canvas.scroll(t)};Ha.prototype.reset=function(){this._canvas.zoom("fit-viewport")};Ha.prototype.zoom=function(t,n){var i=X6(E5,Z6*2);this._totalDelta+=t,Math.abs(this._totalDelta)>rK&&(this._zoom(t,n,i),this._totalDelta=0)};Ha.prototype._handleWheel=function(t){if(!Xl(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var i=t.ctrlKey||$6()&&t.metaKey,r=t.shiftKey,o=-1*this._scale,a;if(i?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,i){var s=n.getBoundingClientRect(),l={x:t.clientX-s.left,y:t.clientY-s.top};a=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*iK(t.deltaY)*o,this.zoom(a,l)}else r?a={dx:o*t.deltaY,dy:0}:a={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(a)}};Ha.prototype.stepZoom=function(t,n){var i=X6(E5,Z6);this._zoom(t,n,i)};Ha.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,o=vw(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var s=Math.pow(10,a);i.zoom(nK(E5,s),t)};Ha.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,r=this._enabled;return typeof t>"u"&&(t=!r),r!==t&&Vt[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t};Ha.prototype._init=function(e){this.toggle(e)};const Q6={__init__:["zoomScroll"],zoomScroll:["type",Ha]};function Ff(e){ic.call(this,e)}We(Ff,ic);Ff.prototype._navigationModules=[V6,J6,Q6];Ff.prototype._modules=[].concat(ic.prototype._modules,Ff.prototype._navigationModules);function _b(e){return e&&e[e.length-1]}function mP(e){return e.y}function gP(e){return e.x}var aK={left:gP,center:gP,right:function(e){return e.x+e.width},top:mP,middle:mP,bottom:function(e){return e.y+e.height}};function Np(e,t){this._modeling=e,this._rules=t}Np.$inject=["modeling","rules"];Np.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",i="width";return t.indexOf(e)!==-1&&(n="y",i="height"),{axis:n,dimension:i}};Np.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Np.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),i=n.axis,r=n.dimension,o={},a={},s=!1,l,c,u;function d(h,p){return Math.round((h[i]+p[i]+p[r])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][i];else if(this._isType(e,["right","bottom"]))u=_b(t),o[e]=u[i]+u[r];else if(this._isType(e,["center","middle"])){if(ue(t,function(h){var p=h[i]+Math.round(h[r]/2);a[p]?a[p].elements.push(h):a[p]={elements:[h],center:p}}),l=Ga(a,function(h){return h.elements.length>1&&(s=!0),h.elements.length}),s)return o[e]=_b(l).center,o;c=t[0],t=Ga(t,function(h){return h[i]+h[r]}),u=_b(t),o[e]=d(c,u)}return o};Np.prototype.trigger=function(e,t){var n=this._modeling,i,r=It(e,function(l){return!(l.waypoints||l.host||l.labelTarget)});if(i=this._rules.allowed("elements.align",{elements:r}),bt(i)&&(r=i),!(r.length<2||!i)){var o=aK[t],a=Ga(r,o),s=this._alignmentPosition(t,a);n.alignElements(a,s)}};const sK={__init__:["alignElements"],alignElements:["type",Np]},lK=new om;function kp(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}kp.$inject=["eventBus"];kp.prototype.schedule=function(e,t=lK.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};kp.prototype._schedule=function(e,t){const{promise:n,resolve:i,reject:r}=cK();return{executionId:requestAnimationFrame(()=>{try{i(e())}catch(a){r(a)}}),promise:n}};kp.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};kp.prototype._cancel=function(e){cancelAnimationFrame(e.executionId)};function cK(){let e,t;return{promise:new Promise((i,r)=>{e=i,t=r}),resolve:e,reject:t}}const uK={scheduler:["type",kp]};var dK="djs-element-hidden",Yg=".entry",pK=1e3,vP=8,hK=300;function Xn(e,t,n,i){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=i,this._current=null,this._init()}Xn.$inject=["canvas","elementRegistry","eventBus","scheduler"];Xn.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,i=n.length?n.length===1?n[0]:n:null;i?e.open(i,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,i=e._current;if(i){var r=i.target,o=bt(r)?r:[r],a=o.filter(function(l){return n.includes(l)});if(a.length){e.close();var s=o.filter(function(l){return e._elementRegistry.get(l.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,i=e._current,r=bt(i.target)?i.target:[i.target];r.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};Xn.prototype._createContainer=function(){var e=_n('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};Xn.prototype.registerProvider=function(e,t){t||(t=e,e=pK),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};Xn.prototype.getEntries=function(e){var t=this._getProviders(),n=bt(e)?"getMultiElementContextPadEntries":"getContextPadEntries",i={};return ue(t,function(r){if(ui(r[n])){var o=r[n](e);ui(o)?i=o(i):ue(o,function(a,s){i[s]=a})}}),i};Xn.prototype.trigger=function(e,t,n){var i=this,r,o,a=t.delegateTarget||t.target;if(!a)return t.preventDefault();if(r=pr(a,"data-action"),o=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){i._mouseout=i.triggerEntry(r,"hover",o,n)},hK);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(r,e,o,n)};Xn.prototype.triggerEntry=function(e,t,n,i){if(this.isShown()){var r=this._current.target,o=this._current.entries,a=o[e];if(a){var s=a.action;if(this._eventBus.fire("contextPad.trigger",{entry:a,event:n})!==!1){if(ui(s)){if(t==="click")return s(n,r,i)}else if(s[t])return s[t](n,r,i);n.preventDefault()}}}};Xn.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};Xn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Xn.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),i;ue(t,function(r,o){var a=r.group||"default",s=_n(r.html||'<div class="entry" draggable="true"></div>'),l;pr(s,"data-action",o),l=rn("[data-group="+Of(a)+"]",n),l||(l=_n('<div class="group"></div>'),pr(l,"data-group",a),n.appendChild(l)),l.appendChild(s),r.className&&fK(s,r.className),r.title&&pr(s,"title",r.title),r.imageUrl&&(i=_n("<img>"),pr(i,"src",r.imageUrl),i.style.width="100%",i.style.height="100%",s.appendChild(i))}),In(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};Xn.prototype._createHtml=function(e){var t=this,n=_n('<div class="djs-context-pad"></div>');return Ir.bind(n,Yg,"click",function(i){t.trigger("click",i)}),Ir.bind(n,Yg,"dragstart",function(i){t.trigger("dragstart",i)}),Ir.bind(n,Yg,"mouseover",function(i){t.trigger("mouseover",i)}),Ir.bind(n,Yg,"mouseout",function(i){t.trigger("mouseout",i)}),Vt.bind(n,"mousedown",function(i){i.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};Xn.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&gK(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};Xn.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};Xn.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return bt(e)!==bt(n)?!1:bt(e)?e.length===n.length&&ku(e,function(i){return n.includes(i)}):n===e};Xn.prototype.isShown=function(){return this.isOpen()&&In(this._current.html).has("open")};Xn.prototype.show=function(){this.isOpen()&&(In(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};Xn.prototype.hide=function(){this.isOpen()&&(In(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};Xn.prototype._getPosition=function(e){if(!bt(e)&&on(e)){var t=this._canvas.viewbox(),n=mK(e),i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale;return{left:i+vP*this._canvas.zoom(),top:r}}var o=this._canvas.getContainer(),a=o.getBoundingClientRect(),s=this._getTargetBounds(e);return{left:s.right-a.left+vP*this._canvas.zoom(),top:s.top-a.top}};Xn.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(i){i in n&&(t.style[i]=n[i]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};Xn.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,i=bt(n)?n:[n],r=i.some(function(o){return t._canvas.hasMarker(o,dK)});r?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};Xn.prototype._getTargetBounds=function(e){var t=this,n=bt(e)?e:[e],i=n.map(function(r){return t._canvas.getGraphics(r)});return i.reduce(function(r,o){const a=o.getBoundingClientRect();return r.top=Math.min(r.top,a.top),r.right=Math.max(r.right,a.right),r.bottom=Math.max(r.bottom,a.bottom),r.left=Math.min(r.left,a.left),r.x=r.left,r.y=r.top,r.width=r.right-r.left,r.height=r.bottom-r.top,r},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function fK(e,t){var n=In(e);t=bt(t)?t:t.split(/\s+/g),t.forEach(function(i){n.add(i)})}function mK(e){return e.waypoints[e.waypoints.length-1]}function gK(e,t){return e=bt(e)?e:[e],t=bt(t)?t:[t],e.length===t.length&&ku(e,function(n){return t.includes(n)})}const eI={__depends__:[_5,uK,qy],contextPad:["type",Xn]};var Wy,Nn,tI,Jc,yP,nI,iI,rI,S5,yw,_w,jf={},oI=[],vK=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ky=Array.isArray;function Ss(e,t){for(var n in t)e[n]=t[n];return e}function N5(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function aI(e,t,n){var i,r,o,a={};for(o in t)o=="key"?i=t[o]:o=="ref"?r=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?Wy.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return z0(e,a,i,r,null)}function z0(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++tI,__i:-1,__u:0};return r==null&&Nn.vnode!=null&&Nn.vnode(o),o}function Yy(e){return e.children}function H0(e,t){this.props=e,this.context=t}function ip(e,t){if(t==null)return e.__?ip(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ip(e):null}function sI(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return sI(e)}}function _P(e){(!e.__d&&(e.__d=!0)&&Jc.push(e)&&!zv.__r++||yP!=Nn.debounceRendering)&&((yP=Nn.debounceRendering)||nI)(zv)}function zv(){for(var e,t,n,i,r,o,a,s=1;Jc.length;)Jc.length>s&&Jc.sort(iI),e=Jc.shift(),s=Jc.length,e.__d&&(n=void 0,i=void 0,r=(i=(t=e).__v).__e,o=[],a=[],t.__P&&((n=Ss({},i)).__v=i.__v+1,Nn.vnode&&Nn.vnode(n),k5(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[r]:null,o,r??ip(i),!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,uI(o,n,a),i.__e=i.__=null,n.__e!=r&&sI(n)));zv.__r=0}function lI(e,t,n,i,r,o,a,s,l,c,u){var d,h,p,m,v,_,b,E=i&&i.__k||oI,w=t.length;for(l=yK(n,t,E,l,w),d=0;d<w;d++)(p=n.__k[d])!=null&&(h=p.__i==-1?jf:E[p.__i]||jf,p.__i=d,_=k5(e,p,h,r,o,a,s,l,c,u),m=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&P5(h.ref,null,p),u.push(p.ref,p.__c||m,p)),v==null&&m!=null&&(v=m),(b=!!(4&p.__u))||h.__k===p.__k?l=cI(p,l,e,b):typeof p.type=="function"&&_!==void 0?l=_:m&&(l=m.nextSibling),p.__u&=-7);return n.__e=v,l}function yK(e,t,n,i,r){var o,a,s,l,c,u=n.length,d=u,h=0;for(e.__k=new Array(r),o=0;o<r;o++)(a=t[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[o]=z0(null,a,null,null,null):Ky(a)?a=e.__k[o]=z0(Yy,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=e.__k[o]=z0(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[o]=a,l=o+h,a.__=e,a.__b=e.__b+1,s=null,(c=a.__i=_K(a,n,l,d))!=-1&&(d--,(s=n[c])&&(s.__u|=2)),s==null||s.__v==null?(c==-1&&(r>u?h--:r<u&&h++),typeof a.type!="function"&&(a.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,a.__u|=4))):e.__k[o]=null;if(d)for(o=0;o<u;o++)(s=n[o])!=null&&!(2&s.__u)&&(s.__e==i&&(i=ip(s)),pI(s,s));return i}function cI(e,t,n,i){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=cI(r[o],t,n,i));return t}e.__e!=t&&(i&&(t&&e.type&&!t.parentNode&&(t=ip(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function _K(e,t,n,i){var r,o,a,s=e.key,l=e.type,c=t[n],u=c!=null&&(2&c.__u)==0;if(c===null&&s==null||u&&s==c.key&&l==c.type)return n;if(i>(u?1:0)){for(r=n-1,o=n+1;r>=0||o<t.length;)if((c=t[a=r>=0?r--:o++])!=null&&!(2&c.__u)&&s==c.key&&l==c.type)return a}return-1}function bP(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||vK.test(t)?n:n+"px"}function Jg(e,t,n,i,r){var o,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||bP(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||bP(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(rI,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=S5,e.addEventListener(t,o?_w:yw,o)):e.removeEventListener(t,o?_w:yw,o);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function wP(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=S5++;else if(t.t<n.u)return;return n(Nn.event?Nn.event(t):t)}}}function k5(e,t,n,i,r,o,a,s,l,c){var u,d,h,p,m,v,_,b,E,w,x,M,B,H,R,O,D,A=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=t.__e=n.__e]),(u=Nn.__b)&&u(t);e:if(typeof A=="function")try{if(b=t.props,E="prototype"in A&&A.prototype.render,w=(u=A.contextType)&&i[u.__c],x=u?w?w.props.value:u.__:i,n.__c?_=(d=t.__c=n.__c).__=d.__E:(E?t.__c=d=new A(b,x):(t.__c=d=new H0(b,x),d.constructor=A,d.render=wK),w&&w.sub(d),d.state||(d.state={}),d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),E&&d.__s==null&&(d.__s=d.state),E&&A.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Ss({},d.__s)),Ss(d.__s,A.getDerivedStateFromProps(b,d.__s))),p=d.props,m=d.state,d.__v=t,h)E&&A.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),E&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(E&&A.getDerivedStateFromProps==null&&b!==p&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,x),t.__v==n.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,x)===!1){for(t.__v!=n.__v&&(d.props=b,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(L){L&&(L.__=t)}),M=0;M<d._sb.length;M++)d.__h.push(d._sb[M]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,x),E&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(p,m,v)})}if(d.context=x,d.props=b,d.__P=e,d.__e=!1,B=Nn.__r,H=0,E){for(d.state=d.__s,d.__d=!1,B&&B(t),u=d.render(d.props,d.state,d.context),R=0;R<d._sb.length;R++)d.__h.push(d._sb[R]);d._sb=[]}else do d.__d=!1,B&&B(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++H<25);d.state=d.__s,d.getChildContext!=null&&(i=Ss(Ss({},i),d.getChildContext())),E&&!h&&d.getSnapshotBeforeUpdate!=null&&(v=d.getSnapshotBeforeUpdate(p,m)),O=u,u!=null&&u.type===Yy&&u.key==null&&(O=dI(u.props.children)),s=lI(e,Ky(O)?O:[O],t,n,i,r,o,a,s,l,c),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),_&&(d.__E=d.__=null)}catch(L){if(t.__v=null,l||o!=null)if(L.then){for(t.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else{for(D=o.length;D--;)N5(o[D]);bw(t)}else t.__e=n.__e,t.__k=n.__k,L.then||bw(t);Nn.__e(L,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=bK(n.__e,t,n,i,r,o,a,l,c);return(u=Nn.diffed)&&u(t),128&t.__u?void 0:s}function bw(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(bw)}function uI(e,t,n){for(var i=0;i<n.length;i++)P5(n[i],n[++i],n[++i]);Nn.__c&&Nn.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(o){o.call(r)})}catch(o){Nn.__e(o,r.__v)}})}function dI(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Ky(e)?e.map(dI):Ss({},e)}function bK(e,t,n,i,r,o,a,s,l){var c,u,d,h,p,m,v,_=n.props||jf,b=t.props,E=t.type;if(E=="svg"?r="http://www.w3.org/2000/svg":E=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((p=o[c])&&"setAttribute"in p==!!E&&(E?p.localName==E:p.nodeType==3)){e=p,o[c]=null;break}}if(e==null){if(E==null)return document.createTextNode(b);e=document.createElementNS(r,E,b.is&&b),s&&(Nn.__m&&Nn.__m(t,o),s=!1),o=null}if(E==null)_===b||s&&e.data==b||(e.data=b);else{if(o=o&&Wy.call(e.childNodes),!s&&o!=null)for(_={},c=0;c<e.attributes.length;c++)_[(p=e.attributes[c]).name]=p.value;for(c in _)if(p=_[c],c!="children"){if(c=="dangerouslySetInnerHTML")d=p;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;Jg(e,c,null,p,r)}}for(c in b)p=b[c],c=="children"?h=p:c=="dangerouslySetInnerHTML"?u=p:c=="value"?m=p:c=="checked"?v=p:s&&typeof p!="function"||_[c]===p||Jg(e,c,p,_[c],r);if(u)s||d&&(u.__html==d.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),lI(t.type=="template"?e.content:e,Ky(h)?h:[h],t,n,i,E=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,a,o?o[0]:n.__k&&ip(n,0),s,l),o!=null)for(c=o.length;c--;)N5(o[c]);s||(c="value",E=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[c]||E=="progress"&&!m||E=="option"&&m!=_[c])&&Jg(e,c,m,_[c],r),c="checked",v!=null&&v!=e[c]&&Jg(e,c,v,_[c],r))}return e}function P5(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Nn.__e(r,n)}}function pI(e,t,n){var i,r;if(Nn.unmount&&Nn.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||P5(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){Nn.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&pI(i[r],t,n||typeof e.type!="function");n||N5(e.__e),e.__c=e.__=e.__e=void 0}function wK(e,t,n){return this.constructor(e,n)}function hI(e,t,n){var i,r,o,a;t==document&&(t=document.documentElement),Nn.__&&Nn.__(e,t),r=(i=!1)?null:t.__k,o=[],a=[],k5(t,e=t.__k=aI(Yy,null,[e]),r||jf,jf,t.namespaceURI,r?null:t.firstChild?Wy.call(t.childNodes):null,o,r?r.__e:t.firstChild,i,a),uI(o,e,a)}Wy=oI.slice,Nn={__e:function(e,t,n,i){for(var r,o,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(e)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),a=r.__d),a)return r.__E=r}catch(s){e=s}throw e}},tI=0,H0.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ss({},this.state),typeof e=="function"&&(e=e(Ss({},n),this.props)),e&&Ss(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),_P(this))},H0.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_P(this))},H0.prototype.render=Yy,Jc=[],nI=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,iI=function(e,t){return e.__v.__b-t.__v.__b},zv.__r=0,rI=/(PointerCapture)$|Capture$/i,S5=0,yw=wP(!1),_w=wP(!0);var fI=function(e,t,n,i){var r;t[0]=0;for(var o=1;o<t.length;o++){var a=t[o++],s=t[o]?(t[0]|=a?1:2,n[t[o++]]):t[++o];a===3?i[0]=s:a===4?i[1]=Object.assign(i[1]||{},s):a===5?(i[1]=i[1]||{})[t[++o]]=s:a===6?i[1][t[++o]]+=s+"":a?(r=e.apply(s,fI(e,s,n,["",null])),i.push(r),s[0]?t[0]|=2:(t[o-2]=0,t[o]=r)):i.push(s)}return i},xP=new Map;function xK(e){var t=xP.get(this);return t||(t=new Map,xP.set(this,t)),(t=fI(this,t.get(e)||(t.set(e,t=function(n){for(var i,r,o=1,a="",s="",l=[0],c=function(h){o===1&&(h||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,h,a):o===3&&(h||a)?(l.push(3,h,a),o=2):o===2&&a==="..."&&h?l.push(4,h,0):o===2&&a&&!h?l.push(5,0,!0,a):o>=5&&((a||!h&&o===5)&&(l.push(o,0,a,r),o=6),h&&(l.push(o,h,0,r),o=6)),a=""},u=0;u<n.length;u++){u&&(o===1&&c(),c(u));for(var d=0;d<n[u].length;d++)i=n[u][d],o===1?i==="<"?(c(),l=[l],o=3):a+=i:o===4?a==="--"&&i===">"?(o=1,a=""):a=i+a[0]:s?i===s?s="":a+=i:i==='"'||i==="'"?s=i:i===">"?(c(),o=1):o&&(i==="="?(o=5,r=a,a=""):i==="/"&&(o<5||n[u][d+1]===">")?(c(),o===3&&(l=l[0]),o=l,(l=l[0]).push(2,0,o),o=0):i===" "||i==="	"||i===`
`||i==="\r"?(c(),o=2):a+=i),o===3&&a==="!--"&&(o=4,l=l[0])}return c(),l}(e)),t),arguments,[])).length>1?t:t[0]}var On=xK.bind(aI),rp,Wn,bb,EP,$f=0,mI=[],ni=Nn,SP=ni.__b,NP=ni.__r,kP=ni.diffed,PP=ni.__c,AP=ni.unmount,TP=ni.__;function Jy(e,t){ni.__h&&ni.__h(Wn,e,$f||t),$f=0;var n=Wn.__H||(Wn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function wb(e){return $f=1,EK(vI,e)}function EK(e,t,n){var i=Jy(rp++,2);if(i.t=e,!i.__c&&(i.__=[vI(void 0,t),function(s){var l=i.__N?i.__N[0]:i.__[0],c=i.t(l,s);l!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=Wn,!Wn.__f)){var r=function(s,l,c){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!o||o.call(this,s,l,c);var d=i.__c.props!==s;return u.forEach(function(h){if(h.__N){var p=h.__[0];h.__=h.__N,h.__N=void 0,p!==h.__[0]&&(d=!0)}}),o&&o.call(this,s,l,c)||d};Wn.__f=!0;var o=Wn.shouldComponentUpdate,a=Wn.componentWillUpdate;Wn.componentWillUpdate=function(s,l,c){if(this.__e){var u=o;o=void 0,r(s,l,c),o=u}a&&a.call(this,s,l,c)},Wn.shouldComponentUpdate=r}return i.__N||i.__}function ww(e,t){var n=Jy(rp++,3);!ni.__s&&A5(n.__H,t)&&(n.__=e,n.u=t,Wn.__H.__h.push(n))}function xw(e,t){var n=Jy(rp++,4);!ni.__s&&A5(n.__H,t)&&(n.__=e,n.u=t,Wn.__h.push(n))}function gI(e){return $f=5,op(function(){return{current:e}},[])}function op(e,t){var n=Jy(rp++,7);return A5(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function xh(e,t){return $f=8,op(function(){return e},t)}function SK(){for(var e;e=mI.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(V0),e.__H.__h.forEach(Ew),e.__H.__h=[]}catch(t){e.__H.__h=[],ni.__e(t,e.__v)}}ni.__b=function(e){Wn=null,SP&&SP(e)},ni.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),TP&&TP(e,t)},ni.__r=function(e){NP&&NP(e),rp=0;var t=(Wn=e.__c).__H;t&&(bb===Wn?(t.__h=[],Wn.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(V0),t.__h.forEach(Ew),t.__h=[],rp=0)),bb=Wn},ni.diffed=function(e){kP&&kP(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(mI.push(t)!==1&&EP===ni.requestAnimationFrame||((EP=ni.requestAnimationFrame)||NK)(SK)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),bb=Wn=null},ni.__c=function(e,t){t.some(function(n){try{n.__h.forEach(V0),n.__h=n.__h.filter(function(i){return!i.__||Ew(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],ni.__e(i,n.__v)}}),PP&&PP(e,t)},ni.unmount=function(e){AP&&AP(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{V0(i)}catch(r){t=r}}),n.__H=void 0,t&&ni.__e(t,n.__v))};var CP=typeof requestAnimationFrame=="function";function NK(e){var t,n=function(){clearTimeout(i),CP&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);CP&&(t=requestAnimationFrame(n))}function V0(e){var t=Wn,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),Wn=t}function Ew(e){var t=Wn;e.__c=e.__(),Wn=t}function A5(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function vI(e,t){return typeof t=="function"?t(e):t}function yI(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=yI(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Hv(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=yI(e))&&(i&&(i+=" "),i+=t);return i}function kK(e){const{headerEntries:t,onSelect:n,selectedEntry:i,setSelectedEntry:r,title:o}=e,a=op(()=>PK(t),[t]);return On`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${o}>${o}</h3>
      ${a.map(s=>On`
        <ul key=${s.id} class="djs-popup-header-group" data-header-group=${s.id}>

          ${s.entries.map(l=>On`
            <li key=${l.id}>
              <${l.action?"button":"span"}
                class=${AK(l,l===i)}
                onClick=${c=>l.action&&n(c,l)}
                title=${l.title||l.label}
                data-id=${l.id}
                onMouseEnter=${()=>l.action&&r(l)}
                onMouseLeave=${()=>l.action&&r(null)}
                onFocus=${()=>l.action&&r(l)}
                onBlur=${()=>l.action&&r(null)}
              >
                ${l.imageUrl&&On`<img class="djs-popup-entry-icon" src=${l.imageUrl} alt="" />`||l.imageHtml&&On`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:l.imageHtml}} />`}
                ${l.label?On`
                  <span class="djs-popup-label">${l.label}</span>
                `:null}
              </${l.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function PK(e){return e.reduce((t,n)=>{const i=n.group||"default",r=t.find(o=>o.id===i);return r?r.entries.push(n):t.push({id:i,entries:[n]}),t},[])}function AK(e,t){return Hv("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function TK(e){const{entry:t,selected:n,onMouseEnter:i,onMouseLeave:r,onAction:o}=e;return On`
    <li
      class=${Hv("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${i}
      onBlur=${r}
      onMouseEnter=${i}
      onMouseLeave=${r}
      onDragStart=${a=>o(a,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Hv("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&On`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&On`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?On`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&On`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&On`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${a=>a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function CK(e){const{selectedEntry:t,setSelectedEntry:n,entries:i,...r}=e,o=gI(),a=op(()=>RK(i),[i]);return xw(()=>{const s=o.current;if(!s)return;const l=s.querySelector(".selected");l&&MK(l)},[t]),On`
    <div class="djs-popup-results" ref=${o}>
      ${a.map(s=>On`
        ${s.name&&On`
          <div key=${s.id} class="entry-header" title=${s.name}>
            ${s.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${s.id}>
          ${s.entries.map(l=>On`
            <${TK}
              key=${l.id}
              entry=${l}
              selected=${l===t}
              onMouseEnter=${()=>n(l)}
              onMouseLeave=${()=>n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function RK(e){const t=[],n=o=>t.find(a=>o.id===a.id),i=o=>!!n(o),r=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{const a=o.group?r(o.group):{id:"default"};i(a)?n(a).entries.push(o):t.push({...a,entries:[o]})}),t}function MK(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function IK(e){const{onClose:t,onSelect:n,className:i,headerEntries:r,position:o,title:a,width:s,scale:l,search:c,emptyPlaceholder:u,entries:d,onOpened:h,onClosed:p}=e,m=op(()=>Ai(c)?d.length>5:!1,[c,d]),[v,_]=wb(""),b=xh((A,L)=>{if(!m)return A;const $=Z=>{if(!L)return(Z.rank||0)>=0;if(Z.searchable===!1)return!1;const me=[Z.description||"",Z.label||"",Z.search||""].map(ge=>ge.toLowerCase());return L.toLowerCase().split(/\s/g).every(ge=>me.some(pe=>pe.includes(ge)))};return A.filter($)},[m]),[E,w]=wb(b(d,v)),[x,M]=wb(E[0]),B=xh(A=>{(!x||!A.includes(x))&&M(A[0]),w(A)},[x,w,M]);ww(()=>{B(b(d,v))},[v,d]);const H=xh(A=>{let $=E.indexOf(x)+A;$<0&&($=E.length-1),$>=E.length&&($=0),M(E[$])},[E,x,M]),R=xh(A=>{if(A.key==="Enter"&&x)return n(A,x);if(A.key==="ArrowUp")return H(-1),A.preventDefault();if(A.key==="ArrowDown")return H(1),A.preventDefault()},[n,x,H]),O=xh(A=>{Cy(A.target,"input")&&_(()=>A.target.value)},[_]);ww(()=>(h(),()=>{p()}),[]);const D=op(()=>a||r.length>0,[a,r]);return On`
    <${RP}
      onClose=${t}
      onKeyup=${O}
      onKeydown=${R}
      className=${i}
      position=${o}
      width=${s}
      scale=${l}
    >
      ${D&&On`
        <${kK}
          headerEntries=${r}
          onSelect=${n}
          selectedEntry=${x}
          setSelectedEntry=${M}
          title=${a}
        />
      `}
      ${d.length>0&&On`
        <div class="djs-popup-body">

          ${m&&On`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${a}" />
          </div>
          `}

          <${CK}
            entries=${E}
            selectedEntry=${x}
            setSelectedEntry=${M}
            onAction=${n}
          />
        </div>
      `}
    ${u&&E.length===0&&On`
      <div class="djs-popup-no-results">${ui(u)?u(v):u}</div>
    `}
    </${RP}>
  `}function RP(e){const{onClose:t,onKeydown:n,onKeyup:i,className:r,children:o,position:a}=e,s=gI();return xw(()=>{if(typeof a!="function")return;const l=s.current,c=a(l);l.style.left=`${c.x}px`,l.style.top=`${c.y}px`},[s.current,a]),xw(()=>{const l=s.current;if(!l)return;(l.querySelector("input")||l).focus()},[]),ww(()=>{const l=u=>{if(u.key==="Escape")return u.preventDefault(),t()},c=u=>{if(!Xl(u.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",l),document.body.addEventListener("click",c),()=>{document.documentElement.removeEventListener("keydown",l),document.body.removeEventListener("click",c)}},[]),On`
    <div
      class=${Hv("djs-popup",r)}
      style=${DK(e)}
      onKeydown=${n}
      onKeyup=${i}
      ref=${s}
      tabIndex="-1"
    >
      ${o}
    </div>
  `}function DK(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var LK="data-id",_I=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],OK=1e3;function An(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var i=Ai(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:i},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",r=>{const o=this.isOpen()&&this._current.target;r.element===o&&this.refresh()})}An.$inject=["config.popupMenu","eventBus","canvas"];An.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:i,emptyPlaceholder:r,options:o}=this._current,a=Object.entries(n).map(([h,p])=>({id:h,...p})),s=Object.entries(i).map(([h,p])=>({id:h,...p})),l=e&&(h=>this._ensureVisible(h,e)),c=this._updateScale(this._current.container);hI(On`
      <${IK}
        onClose=${h=>this.close(h)}
        onSelect=${(h,p,m)=>this.trigger(h,p,m)}
        position=${l}
        className=${t}
        entries=${a}
        headerEntries=${s}
        emptyPlaceholder=${r}
        scale=${c}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...o}}
      />
    `,this._current.container)};An.prototype.open=function(e,t,n,i){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:r,headerEntries:o,emptyPlaceholder:a}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:r,headerEntries:o,emptyPlaceholder:a,container:this._createContainer({provider:t}),options:i},this._emit("open"),this._bindAutoClose(),this._render()};An.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:i,emptyPlaceholder:r}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:i,emptyPlaceholder:r},this._emit("refresh"),this._render()};An.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const i=this._getEntries(e,n),r=this._getHeaderEntries(e,n),o=this._getEmptyPlaceholder(n);return{entries:i,headerEntries:r,emptyPlaceholder:o,empty:!(Object.keys(i).length||Object.keys(r).length)}};An.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)};An.prototype.reset=function(){const e=this._current.container;hI(null,e),vu(e)};An.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};An.prototype._onOpened=function(){this._emit("opened")};An.prototype._onClosed=function(){this._emit("closed")};An.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const i=_n(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(i),i};An.prototype._bindAutoClose=function(){this._eventBus.once(_I,this.close,this)};An.prototype._unbindAutoClose=function(){this._eventBus.off(_I,this.close,this)};An.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,i,r=e;return t!==!0&&(t===!1?(n=1,i=1):(n=t.min,i=t.max),Ai(n)&&e<n&&(r=n),Ai(i)&&e>i&&(r=i)),r};An.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect(),r={},o=t.x,a=t.y;return t.x+i.width>n.width&&(r.x=!0),t.y+i.height>n.height&&(r.y=!0),r.x&&r.y?(o=t.x-i.width,a=t.y-i.height):r.x?(o=t.x-i.width,a=t.y):r.y&&t.y<i.height?(o=t.x,a=10):r.y&&(o=t.x,a=t.y-i.height),t.y<n.top&&(a=t.y+i.height),{x:o,y:a}};An.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};An.prototype.registerProvider=function(e,t,n){n||(n=t,t=OK),this._eventBus.on("popupMenu.getProviders."+e,t,function(i){i.providers.push(n)})};An.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};An.prototype._getEntries=function(e,t){var n={};return ue(t,function(i){if(!i.getPopupMenuEntries){ue(i.getEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=Lo(o,["id"])});return}var r=i.getPopupMenuEntries(e);ui(r)?n=r(n):ue(r,function(o,a){n[a]=o})}),n};An.prototype._getHeaderEntries=function(e,t){var n={};return ue(t,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;ue(i.getHeaderEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=Lo(o,["id"])});return}var r=i.getPopupMenuHeaderEntries(e);ui(r)?n=r(n):ue(r,function(o,a){n[a]=o})}),n};An.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>ui(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};An.prototype.isOpen=function(){return!!this._current};An.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let r=Xl(e.delegateTarget||e.target,".entry",!0),o=pr(r,LK);t={id:o,...this._getEntry(o)}}const i=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(ui(i)){if(n==="click")return i(e,t)}else if(i[n])return i[n](e,t)}};An.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const T5={__init__:["popupMenu"],popupMenu:["type",An]};var bI={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},BK=900;function Pp(e,t,n,i){e.registerProvider(BK,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}Pp.$inject=["contextPad","popupMenu","translate","canvas"];Pp.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&be(t,this._getEntries(e)),t};Pp.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};Pp.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${bI.align}</div>`,action:{click:function(t,n){var i=e._getMenuPosition(n);be(i,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",i)}}}}};Pp.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,i=n.getBoundingClientRect(),r={x:i.left,y:i.bottom+t};return r};var FK=["left","center","right","top","middle","bottom"];function am(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}am.$inject=["popupMenu","alignElements","translate","rules"];am.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&be(t,this._getEntries(e)),t};am.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};am.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,i=this._popupMenu,r={};return ue(FK,function(o){r["align-elements-"+o]={group:"align",title:n("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:bI[o],action:function(){t.trigger(e,o),i.close()}}}),r};function Fo(e){je.call(this,e),this.init()}Fo.$inject=["eventBus"];We(Fo,je);Fo.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){i.canExecute(r,t,function(o,a,s){return n(o)},!0)})};Fo.prototype.init=function(){};function Xy(e){Fo.call(this,e)}Xy.$inject=["eventBus"];We(Xy,Fo);Xy.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=It(t,function(i){return!(i.waypoints||i.host||i.labelTarget)});return n=Iy(n),n.length<2?!1:n})};const jK={__depends__:[sK,eI,T5],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",Pp],alignElementsMenuProvider:["type",am],bpmnAlignElements:["type",Xy]};var $K=10,wI=50,GK=250;function C5(e,t,n,i){for(var r;r=UK(e,n,t);)n=i(t,n,r);return n}function R5(e){return function(t,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(o){var a=e[o];if(a){var s=o==="x"?"width":"height",l=a.margin,c=a.minDistance;l<0?r[o]=Math.min(i[o]+l-t[s]/2,n[o]-c+l):r[o]=Math.max(i[o]+i[s]+l+t[s]/2,n[o]+c+l)}}),r}}function UK(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},r=zK(e);return Wt(r,function(o){if(o===n)return!1;var a=tr(o,i,$K);return a==="intersect"})}function qK(e,t){t||(t={});function n(m){return m.source===e?1:-1}var i=t.defaultDistance||wI,r=t.direction||"e",o=t.filter,a=t.getWeight||n,s=t.maxDistance||GK,l=t.reference||"start";o||(o=WK);function c(m,v){return r==="n"?l==="start"?at(m).top-at(v).bottom:l==="center"?at(m).top-ht(v).y:at(m).top-at(v).top:r==="w"?l==="start"?at(m).left-at(v).right:l==="center"?at(m).left-ht(v).x:at(m).left-at(v).left:r==="s"?l==="start"?at(v).top-at(m).bottom:l==="center"?ht(v).y-at(m).bottom:at(v).bottom-at(m).bottom:l==="start"?at(v).left-at(m).right:l==="center"?ht(v).x-at(m).right:at(v).right-at(m).right}var u=e.incoming.filter(o).map(function(m){var v=a(m),_=v<0?c(m.source,e):c(e,m.source);return{id:m.source.id,distance:_,weight:v}}),d=e.outgoing.filter(o).map(function(m){var v=a(m),_=v>0?c(e,m.target):c(m.target,e);return{id:m.target.id,distance:_,weight:v}}),h=u.concat(d).reduce(function(m,v){return m[v.id+"__weight_"+v.weight]=v,m},{}),p=Fr(h,function(m,v){var _=v.distance,b=v.weight;return _<0||_>s||(m[String(_)]||(m[String(_)]=0),m[String(_)]+=1*b,(!m.distance||m[m.distance]<m[String(_)])&&(m.distance=_)),m},{});return p.distance||i}function zK(e){var t=xb(e);return e.host&&(t=t.concat(xb(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,i){return n.concat(xb(i))},[]))),t}function xb(e){return VK(e).concat(HK(e))}function HK(e){return e.incoming.map(function(t){return t.source})}function VK(e){return e.outgoing.map(function(t){return t.target})}function WK(){return!0}var KK=100;function xI(e,t,n){e.on("autoPlace",KK,function(i){var r=i.shape,o=i.source;return YK(o,r)}),e.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,o){e.fire("autoPlace.start",{source:i,shape:r});var a=e.fire("autoPlace",{source:i,shape:r}),s=t.appendShape(i,r,a,i.parent,o);return e.fire("autoPlace.end",{source:i,shape:s}),s}}xI.$inject=["eventBus","modeling","canvas"];function YK(e,t,n){n||(n={});var i=n.defaultDistance||wI,r=ht(e),o=at(e);return{x:o.right+i+t.width/2,y:r.y}}function EI(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}EI.$inject=["eventBus","selection"];const JK={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",xI],autoPlaceSelectionBehavior:["type",EI]};function ap(e,t){for(Br(t)&&(t=[t]);e=e.parent;)if(Ct(e,t))return e;return null}function SI(e,t){var n=ap(e,"bpmn:Process");if(n)return!0;var i=["bpmn:Participant","bpmn:Lane"];if(n=ap(e,i),n)return _i(n);if(Ct(e,i))return _i(e);var r;for(r=Ge(e);r&&!F(r,"bpmn:Process");r=r.$parent);if(!t)return!0;var o=t.find(function(a){var s=Ge(a);return s&&s.get("processRef")===r});return o?_i(o):!0}function NI(e,t,n){var i=SI(e,n);if(F(t,"bpmn:TextAnnotation"))return ZK(e,t,i);if(Ct(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return QK(e,t,i);if(F(t,"bpmn:FlowNode"))return XK(e,t,i)}function XK(e,t,n){var i=at(e),r=ht(e),o=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},a=qK(e,{filter:function(p){return F(p,"bpmn:SequenceFlow")},direction:o.directionHint}),s=30,l=o.minDistance,c=o.baseOrientation;F(e,"bpmn:BoundaryEvent")&&(c=tr(e,e.host,-25),c.indexOf(o.boundaryOrientation)!==-1&&(s*=-1));var u=n?{x:i.right+a+t.width/2,y:r.y+MP(c,l,o)}:{x:r.x+MP(c,l,o),y:i.bottom+a+t.height/2},d={margin:s,minDistance:l},h=n?{y:d}:{x:d};return C5(e,t,u,R5(h))}function MP(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function ZK(e,t,n){var i=at(e),r=n?{x:i.right+t.width/2,y:i.top-50-t.height/2}:{x:i.right+50+t.width/2,y:i.bottom+t.height/2};on(e)&&(r=ht(e),n?(r.x+=100,r.y-=50):(r.x+=100,r.y+=50));var o={margin:n?-30:30,minDistance:20},a=n?{y:o}:{x:o};return C5(e,t,r,R5(a))}function QK(e,t,n){var i=at(e),r=n?{x:i.right-10+t.width/2,y:i.bottom+40+t.width/2}:{x:i.left-40-t.width/2,y:i.bottom-10+t.height/2},o={margin:30,minDistance:30},a=n?{x:o}:{y:o};return C5(e,t,r,R5(a))}function kI(e,t){e.on("autoPlace",function(n){var i=n.shape,r=n.source;return NI(r,i,t)})}kI.$inject=["eventBus","elementRegistry"];const M5={__depends__:[JK],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",kI]};function Gs(e,t,n,i){je.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(o){var a=o.context,s=a.hints||{},l=a.shape,c=a.parent||a.newParent;s.autoResize!==!1&&r._expand([l],c)}),this.postExecuted(["elements.move"],function(o){var a=o.context,s=Xx(Zx(a.closure.topLevel)),l=a.hints,c=l?l.autoResize:!0;if(c!==!1){var u=yp(s,function(d){return d.parent.id});ue(u,function(d,h){bt(c)&&(d=d.filter(function(p){return Wt(c,la({id:p.id}))})),r._expand(d,h)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var a=o.context,s=a.hints,l=a.shape;s&&s.autoResize===!1||l.collapsed||r._expand(l.children||[],l)}),this.postExecuted(["shape.resize"],function(o){var a=o.context,s=a.hints,l=a.shape,c=l.parent;s&&s.autoResize===!1||c&&r._expand([l],c)})}Gs.$inject=["eventBus","elementRegistry","modeling","rules"];We(Gs,je);Gs.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=at(yi(e)),o=at(t),a={};return r.top-o.top<i.top&&(a.top=r.top-n.top),r.left-o.left<i.left&&(a.left=r.left-n.left),o.right-r.right<i.right&&(a.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(a.bottom=r.bottom+n.bottom),Dy(be({},o,a))};Gs.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var i=this._getOptimalBounds(e,t);if(eY(i,t)){var r=tY(Is(t,["x","y","width","height"]),i);this.resize(t,i,{autoResize:r});var o=t.parent;o&&this._expand([t],o)}}};Gs.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};Gs.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};Gs.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function eY(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function tY(e,t){var n="";return e=at(e),t=at(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function Zy(e){e.invoke(Gs,this)}Zy.$inject=["injector"];We(Zy,Gs);Zy.prototype.resize=function(e,t,n){F(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function sm(e){Fo.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}sm.$inject=["eventBus"];We(sm,Fo);sm.prototype.canResize=function(e,t){return!1};function Qy(e,t){sm.call(this,e),this._modeling=t}We(Qy,sm);Qy.$inject=["eventBus","modeling"];Qy.prototype.canResize=function(e,t){if(F(t.di,"bpmndi:BPMNPlane")||!F(t,"bpmn:Participant")&&!F(t,"bpmn:Lane")&&!F(t,"bpmn:SubProcess"))return!1;var n=!0;return ue(e,function(i){if(F(i,"bpmn:Lane")||qt(i)){n=!1;return}}),n};const nY={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Zy],bpmnAutoResizeProvider:["type",Qy]};var IP=1500;function PI(e,t,n){var i=this,r=n.get("dragging",!1);function o(a){if(!a.hover){var s=a.originalEvent,l=i._findTargetGfx(s),c=l&&e.get(l);l&&c&&(a.stopPropagation(),r.hover({element:c,gfx:l}),r.move(s))}}r&&t.on("drag.start",function(a){t.once("drag.move",IP,function(s){o(s)})}),function(){var a,s;t.on("element.hover",function(l){a=l.gfx,s=l.element}),t.on("element.hover",IP,function(l){s&&t.fire("element.out",{element:s,gfx:a})}),t.on("element.out",function(){a=null,s=null})}(),this._findTargetGfx=function(a){var s,l;if(a instanceof MouseEvent)return s=bu(a),l=document.elementFromPoint(s.x,s.y),iY(l)}}PI.$inject=["elementRegistry","eventBus","injector"];function iY(e){return Xl(e,"svg, .djs-element",!0)}const rY={__init__:["hoverFix"],hoverFix:["type",PI]};var ld=Math.round,DP="djs-drag-active";function Bc(e){e.preventDefault()}function oY(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function aY(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function AI(e,t,n,i){var r={threshold:5,trapClick:!0},o;function a(w){var x=t.viewbox(),M=t._container.getBoundingClientRect();return{x:x.x+(w.x-M.left)/x.scale,y:x.y+(w.y-M.top)/x.scale}}function s(w,x){x=x||o;var M=e.createEvent(be({},x.payload,x.data,{isTouch:x.isTouch}));return e.fire("drag."+w,M)===!1?!1:e.fire(x.prefix+"."+w,M)}function l(w){var x=w.filter(function(M){return i.get(M.id)});x.length&&n.select(x)}function c(w,x){var M=o.payload,B=o.displacement,H=o.globalStart,R=bu(w),O=ca(R,H),D=o.localStart,A=a(R),L=ca(A,D);if(!o.active&&(x||aY(O)>o.threshold)){if(be(M,{x:ld(D.x+B.x),y:ld(D.y+B.y),dx:0,dy:0},{originalEvent:w}),s("start")===!1)return _();o.active=!0,o.keepSelection||(M.previousSelection=n.get(),n.select(null)),o.cursor&&Vy(o.cursor),t.addMarker(t.getRootElement(),DP)}yb(w),o.active&&(be(M,{x:ld(A.x+B.x),y:ld(A.y+B.y),dx:ld(L.x),dy:ld(L.y)},{originalEvent:w}),s("move"))}function u(w){var x,M=!0;o.active&&(w&&(o.payload.originalEvent=w,yb(w)),M=s("end")),M===!1&&s("rejected"),x=b(M!==!0),s("ended",x)}function d(w){gi("Escape",w)&&(Bc(w),_())}function h(w){var x;o.active&&(x=K6(e),setTimeout(x,400),Bc(w)),u(w)}function p(w){c(w)}function m(w){var x=o.payload;x.hoverGfx=w.gfx,x.hover=w.element,s("hover")}function v(w){s("out");var x=o.payload;x.hoverGfx=null,x.hover=null}function _(w){var x;if(o){var M=o.active;M&&s("cancel"),x=b(w),M&&s("canceled",x)}}function b(w){var x,M;s("cleanup"),W6(),o.trapClick?M=h:M=u,Vt.unbind(document,"mousemove",c),Vt.unbind(document,"dragstart",Bc),Vt.unbind(document,"selectstart",Bc),Vt.unbind(document,"mousedown",M,!0),Vt.unbind(document,"mouseup",M,!0),Vt.unbind(document,"keyup",d),Vt.unbind(document,"touchstart",p,!0),Vt.unbind(document,"touchcancel",_,!0),Vt.unbind(document,"touchmove",c,!0),Vt.unbind(document,"touchend",u,!0),e.off("element.hover",m),e.off("element.out",v),t.removeMarker(t.getRootElement(),DP);var B=o.payload.previousSelection;return w!==!1&&B&&!n.get().length&&l(B),x=o,o=null,x}function E(w,x,M,B){o&&_(!1),typeof x=="string"&&(B=M,M=x,x=null),B=be({},r,B||{});var H=B.data||{},R,O,D,A,L;B.trapClick?A=h:A=u,w?(R=xp(w)||w,O=bu(w),yb(w),R.type==="dragstart"&&Bc(R)):(R=null,O={x:0,y:0}),D=a(O),x||(x=D),L=oY(R),o=be({prefix:M,data:H,payload:{},globalStart:O,displacement:ca(x,D),localStart:D,isTouch:L},B),B.manual||(L?(Vt.bind(document,"touchstart",p,!0),Vt.bind(document,"touchcancel",_,!0),Vt.bind(document,"touchmove",c,!0),Vt.bind(document,"touchend",u,!0)):(Vt.bind(document,"mousemove",c),Vt.bind(document,"dragstart",Bc),Vt.bind(document,"selectstart",Bc),Vt.bind(document,"mousedown",A,!0),Vt.bind(document,"mouseup",A,!0)),Vt.bind(document,"keyup",d),e.on("element.hover",m),e.on("element.out",v)),s("init"),B.autoActivate&&c(w,!0)}e.on("diagram.destroy",_),this.init=E,this.move=c,this.hover=m,this.out=v,this.end=u,this.cancel=_,this.context=function(){return o},this.setOptions=function(w){be(r,w)}}AI.$inject=["eventBus","canvas","selection","elementRegistry"];const Us={__depends__:[rY,za],dragging:["type",AI]};function Ap(e,t,n){this._canvas=n,this._opts=be({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(r){var o=i._toBorderPoint(r);i.startScroll(o)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}Ap.$inject=["config.autoScroll","eventBus","canvas"];Ap.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var a=0,s=0,l=0;l<4;l++)sY(o[l],n.scrollThresholdOut[l],n.scrollThresholdIn[l])&&(l===0?a=n.scrollStep:l==1?s=n.scrollStep:l==2?a=-n.scrollStep:l==3&&(s=-n.scrollStep));(a!==0||s!==0)&&(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))};function sY(e,t,n){return t<e&&e<n}Ap.prototype.stopScroll=function(){clearTimeout(this._scrolling)};Ap.prototype.setOptions=function(e){this._opts=be({},this._opts,e)};Ap.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=bu(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const lY={__depends__:[Us],__init__:["autoScroll"],autoScroll:["type",Ap]};function I5(e){this._commandStack=e.get("commandStack",!1)}I5.$inject=["injector"];I5.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};const Va={__init__:["rules"],rules:["type",I5]};var Xg=Math.round,cY=Math.max;function uY(e,t){var n=e.x,i=e.y;return[["M",n,i],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function dY(e){var t=[];return e.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}var TI=10;function pY(e,t){var n,i;for(n=0;i=e[n];n++)if(Qf(i,t)<=TI)return{point:e[n],bendpoint:!0,index:n};return null}function hY(e,t){var n=YM(uY(t,TI),dY(e)),i=n[0],r=n[n.length-1],o;return i?i!==r?i.segment2!==r.segment2?(o=cY(i.segment2,r.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:Xg(i.x+r.x)/2,y:Xg(i.y+r.y)/2},index:i.segment2}:{point:{x:Xg(i.x),y:Xg(i.y)},index:i.segment2}:null}function Sw(e,t){return pY(e,t)||hY(e,t)}function CI(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function LP(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function fY(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function mY(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],r=i[0].n*t[0]+i[1].n*t[1],o=i[0].lambda*t[0]+i[1].lambda*t[1];return-r/o}function D5(e,t){var n=t[0],i=t[1],r={x:i.x-n.x,y:i.y-n.y},o=mY([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+o*r.x,y:n.y+o*r.y}}function RI(e,t){var n=D5(e,t),i={x:n.x-e.x,y:n.y-e.y};return CI(i)}function Vv(e,t){return CI({x:e.x-t.x,y:e.y-t.y})}var MI="djs-bendpoint",II="djs-segment-dragger";function gY(e,t){var n=bu(t),i=e._container.getBoundingClientRect(),r;r={x:i.left,y:i.top};var o=e.viewbox();return{x:o.x+(n.x-r.x)/o.scale,y:o.y+(n.y-r.y)/o.scale}}function Nw(e,t,n){var i=gY(e,n),r=Sw(t,i);return r}function kw(e,t){var n=Qe("g");Gt(n).add(MI),ft(e,n);var i=Qe("circle");He(i,{cx:0,cy:0,r:4}),Gt(i).add("djs-visual"),ft(n,i);var r=Qe("circle");return He(r,{cx:0,cy:0,r:10}),Gt(r).add("djs-hit"),ft(n,r),t&&Gt(n).add(t),n}function vY(e,t,n,i){var r=Qe("g");ft(e,r);var o=18,a=6,s=11,l=_Y(t,n,i),c=a+s,u=Qe("rect");He(u,{x:-o/2,y:-a/2,width:o,height:a}),Gt(u).add("djs-visual"),ft(r,u);var d=Qe("rect");return He(d,{x:-l/2,y:-c/2,width:l,height:c}),Gt(d).add("djs-hit"),ft(r,d),c6(r,i==="v"?90:0),r}function DI(e,t,n){var i=Qe("g"),r=cw(t,n),o=Es(t,n);return ft(e,i),vY(i,t,n,o),Gt(i).add(II),Gt(i).add(o==="h"?"horizontal":"vertical"),Oi(i,r.x,r.y),i}function Pw(e){return Math.abs(Math.round(e*2/3))}function yY(e,t){var n=bY(e,t);return D5(e,n)}function _Y(e,t,n){var i=t.x-e.x,r=t.y-e.y;return Pw(n==="h"?i:r)}function bY(e,t){for(var n=t.waypoints,i=1/0,r,o=0;o<n.length-1;o++){var a=n[o],s=n[o+1],l=RI(e,[a,s]);l<i&&(i=l,r=o)}return[n[r],n[r+1]]}function LI(e,t,n,i,r){function o(w,x,M){var B=w.index,H=w.point,R,O,D,A,L,$;return B<=0||w.bendpoint?!1:(R=x[B-1],O=x[B],D=cw(R,O),A=Es(R,O),L=Math.abs(H.x-D.x),$=Math.abs(H.y-D.y),A&&L<=M&&$<=M)}function a(w,x){var M=w.waypoints,B,H,R,O;return x.index<=0||x.bendpoint||(B={start:M[x.index-1],end:M[x.index]},H=Es(B.start,B.end),!H)?null:(H==="h"?R=B.end.x-B.start.x:R=B.end.y-B.start.y,O=Pw(R)/2,O)}function s(w,x){var M=x.waypoints,B=Nw(t,M,w),H;if(B)return H=a(x,B),o(B,M,H)?r.start(w,x,B.index):i.start(w,x,B.index,!B.bendpoint),!0}function l(w,x,M){Vt.bind(w,x,function(B){n.triggerMouseEvent(x,B,M),B.stopPropagation()})}function c(w,x){var M=t.getLayer("overlays"),B=rn('.djs-bendpoints[data-element-id="'+Of(w.id)+'"]',M);return!B&&x&&(B=Qe("g"),He(B,{"data-element-id":w.id}),Gt(B).add("djs-bendpoints"),ft(M,B),l(B,"mousedown",w),l(B,"click",w),l(B,"dblclick",w)),B}function u(w,x){return rn('.djs-segment-dragger[data-segment-idx="'+w+'"]',x)}function d(w,x){x.waypoints.forEach(function(M,B){var H=kw(w);ft(w,H),Oi(H,M.x,M.y)}),kw(w,"floating")}function h(w,x){for(var M=x.waypoints,B,H,R,O=1;O<M.length;O++)B=M[O-1],H=M[O],Es(B,H)&&(R=DI(w,B,H),He(R,{"data-segment-idx":O}),l(R,"mousemove",x))}function p(w){ue(aw("."+MI,w),function(x){ci(x)})}function m(w){ue(aw("."+II,w),function(x){ci(x)})}function v(w){var x=c(w);return x||(x=c(w,!0),d(x,w),h(x,w)),x}function _(w){var x=c(w);x&&(m(x),p(x),h(x,w),d(x,w))}function b(w,x){var M=rn(".floating",w),B=x.point;M&&Oi(M,B.x,B.y)}function E(w,x,M){var B=u(x.index,w),H=M[x.index-1],R=M[x.index],O=x.point,D=cw(H,R),A=Es(H,R),L,$;B&&(L=wY(B),$={x:O.x-D.x,y:O.y-D.y},A==="v"&&($={x:$.y,y:$.x}),Oi(L,$.x,$.y))}e.on("connection.changed",function(w){_(w.element)}),e.on("connection.remove",function(w){var x=c(w.element);x&&ci(x)}),e.on("element.marker.update",function(w){var x=w.element,M;x.waypoints&&(M=v(x),w.add?Gt(M).add(w.marker):Gt(M).remove(w.marker))}),e.on("element.mousemove",function(w){var x=w.element,M=x.waypoints,B,H;if(M){if(B=c(x,!0),H=Nw(t,M,w.originalEvent),!H)return;b(B,H),H.bendpoint||E(B,H,M)}}),e.on("element.mousedown",function(w){if(nc(w)){var x=w.originalEvent,M=w.element;if(M.waypoints)return s(x,M)}}),e.on("selection.changed",function(w){var x=w.newSelection,M=x[0];M&&M.waypoints&&v(M)}),e.on("element.hover",function(w){var x=w.element;x.waypoints&&(v(x),n.registerEvent(w.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(w){n.unregisterEvent(w.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(w){var x=w.element,M=w.newId;if(x.waypoints){var B=c(x);B&&He(B,{"data-element-id":M})}}),this.addHandles=v,this.updateHandles=_,this.getBendpointsContainer=c,this.getSegmentDragger=u}LI.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function wY(e){return rn(".djs-visual",e)}var OP=Math.round,qc="reconnectStart",zc="reconnectEnd",Eh="updateWaypoints";function L5(e,t,n,i,r,o){this._injector=e,this.start=function(a,s,l,c){var u=n.getGraphics(s),d=s.source,h=s.target,p=s.waypoints,m;!c&&l===0?m=qc:!c&&l===p.length-1?m=zc:m=Eh;var v=m===Eh?"connection.updateWaypoints":"connection.reconnect",_=r.allowed(v,{connection:s,source:d,target:h});_===!1&&(_=r.allowed(v,{connection:s,source:h,target:d})),_!==!1&&i.init(a,"bendpoint.move",{data:{connection:s,connectionGfx:u,context:{allowed:_,bendpointIndex:l,connection:s,source:d,target:h,insert:c,type:m}}})},t.on("bendpoint.move.hover",function(a){var s=a.context,l=s.connection,c=l.source,u=l.target,d=a.hover,h=s.type;s.hover=d;var p;if(d){var m=h===Eh?"connection.updateWaypoints":"connection.reconnect";if(p=s.allowed=r.allowed(m,{connection:l,source:h===qc?d:c,target:h===zc?d:u}),p){s.source=h===qc?d:c,s.target=h===zc?d:u;return}p===!1&&(p=s.allowed=r.allowed(m,{connection:l,source:h===zc?d:u,target:h===qc?d:c})),p&&(s.source=h===zc?d:u,s.target=h===qc?d:c)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var s=a.context,l=s.type;s.hover=null,s.source=null,s.target=null,l!==Eh&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(a){var s=a.context,l=s.allowed,c=s.bendpointIndex,u=s.connection,d=s.insert,h=u.waypoints.slice(),p=s.source,m=s.target,v=s.type,_=s.hints||{},b={x:OP(a.x),y:OP(a.y)};if(!l)return!1;v===Eh?(d?h.splice(c,0,b):h[c]=b,_.bendpointMove={insert:d,bendpointIndex:c},h=this.cropWaypoints(u,h),o.updateWaypoints(u,uz(h),_)):(v===qc?(_.docking="source",Wv(s)&&(_.docking="target",_.newWaypoints=h.reverse())):v===zc&&(_.docking="target",Wv(s)&&(_.docking="source",_.newWaypoints=h.reverse())),o.reconnect(u,p,m,b,_))},this)}L5.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];L5.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function Wv(e){var t=e.hover,n=e.source,i=e.target,r=e.type;if(r===qc)return t&&i&&t===i&&n!==i;if(r===zc)return t&&n&&t===n&&n!==i}var xY="reconnectStart",EY="reconnectEnd",BP="updateWaypoints",Sh="connect-ok",Zg="connect-not-ok",FP="connect-hover",jP="djs-updating",$P="djs-dragging",GP=1100;function OI(e,t,n,i){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var a=o.context,s=a.bendpointIndex,l=a.connection,c=a.insert,u=l.waypoints,d=u.slice();a.waypoints=u,c&&d.splice(s,0,{x:o.x,y:o.y}),l.waypoints=d;var h=a.draggerGfx=kw(i.getLayer("overlays"));Gt(h).add("djs-dragging"),i.addMarker(l,$P),i.addMarker(l,jP)}),n.on("bendpoint.move.hover",function(o){var a=o.context,s=a.allowed,l=a.hover,c=a.type;if(l){if(i.addMarker(l,FP),c===BP)return;s?(i.removeMarker(l,Zg),i.addMarker(l,Sh)):s===!1&&(i.removeMarker(l,Sh),i.addMarker(l,Zg))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],GP,function(o){var a=o.context,s=a.hover,l=a.target;s&&(i.removeMarker(s,FP),i.removeMarker(s,l?Sh:Zg))}),n.on("bendpoint.move.move",function(o){var a=o.context,s=a.allowed,l=a.bendpointIndex,c=a.draggerGfx,u=a.hover,d=a.type,h=a.connection,p=h.source,m=h.target,v=h.waypoints.slice(),_={x:o.x,y:o.y},b=a.hints||{},E={};r&&(b.connectionStart&&(E.connectionStart=b.connectionStart),b.connectionEnd&&(E.connectionEnd=b.connectionEnd),d===xY?Wv(a)?(E.connectionEnd=E.connectionEnd||_,E.source=m,E.target=u||p,v=v.reverse()):(E.connectionStart=E.connectionStart||_,E.source=u||p,E.target=m):d===EY?Wv(a)?(E.connectionStart=E.connectionStart||_,E.source=u||m,E.target=p,v=v.reverse()):(E.connectionEnd=E.connectionEnd||_,E.source=p,E.target=u||m):(E.noCropping=!0,E.noLayout=!0,v[l]=_),d===BP&&(v=e.cropWaypoints(h,v)),E.waypoints=v,r.drawPreview(a,s,E)),Oi(c,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],GP,function(o){var a=o.context,s=a.connection,l=a.draggerGfx,c=a.hover,u=a.target,d=a.waypoints;s.waypoints=d,ci(l),i.removeMarker(s,jP),i.removeMarker(s,$P),c&&(i.removeMarker(c,Sh),i.removeMarker(c,u?Sh:Zg)),r&&r.cleanUp(a)})}OI.$inject=["bendpointMove","injector","eventBus","canvas"];var UP="connect-hover",qP="djs-updating";function zP(e,t,n){return O5(e,t,e[t]+n)}function O5(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function SY(e,t,n,i){var r=Math.max(t[i],n[i]),o=Math.min(t[i],n[i]),a=20,s=Math.min(Math.max(o+a,e[i]),r-a);return O5(t,i,s)}function BI(e){return e==="x"?"y":"x"}function HP(e,t,n){var i,r;return e.original?e.original:(i=ht(t),r=BI(n),O5(e,r,i[r]))}function FI(e,t,n,i,r,o){var a=e.get("connectionDocking",!1);this.start=function(d,h,p){var m,v=n.getGraphics(h),_=p-1,b=p,E=h.waypoints,w=E[_],x=E[b],M=Nw(n,E,d),B,H,R;B=Es(w,x),B&&(H=B==="v"?"x":"y",_===0&&(w=HP(w,h.source,H)),b===E.length-1&&(x=HP(x,h.target,H)),M?R=M.point:R={x:(w.x+x.x)/2,y:(w.y+x.y)/2},m={connection:h,segmentStartIndex:_,segmentEndIndex:b,segmentStart:w,segmentEnd:x,axis:H,dragPosition:R},i.init(d,R,"connectionSegment.move",{cursor:H==="x"?"resize-ew":"resize-ns",data:{connection:h,connectionGfx:v,context:m}}))};function s(d,h){if(!a)return h;var p=d.waypoints,m;return d.waypoints=h,m=a.getCroppedWaypoints(d),d.waypoints=p,m}function l(d){r.update("connection",d.connection,d.connectionGfx)}function c(d,h,p){var m=d.newWaypoints,v=d.segmentStartIndex+h,_=m[v],b=d.segmentEndIndex+h,E=m[b],w=BI(d.axis),x=SY(p,_,E,w);Oi(d.draggerGfx,x.x,x.y)}function u(d,h){var p=0,m=d.filter(function(v,_){return r5(d[_-1],d[_+1],v)?(p=_<=h?p-1:p,!1):!0});return{waypoints:m,segmentOffset:p}}t.on("connectionSegment.move.start",function(d){var h=d.context,p=d.connection,m=n.getLayer("overlays");h.originalWaypoints=p.waypoints.slice(),h.draggerGfx=DI(m,h.segmentStart,h.segmentEnd),Gt(h.draggerGfx).add("djs-dragging"),n.addMarker(p,qP)}),t.on("connectionSegment.move.move",function(d){var h=d.context,p=h.connection,m=h.segmentStartIndex,v=h.segmentEndIndex,_=h.segmentStart,b=h.segmentEnd,E=h.axis,w=h.originalWaypoints.slice(),x=zP(_,E,d["d"+E]),M=zP(b,E,d["d"+E]),B=w.length,H=0;w[m]=x,w[v]=M;var R,O;m<2&&(R=tr(p.source,x),m===1?R==="intersect"&&(w.shift(),w[0]=x,H--):R!=="intersect"&&(w.unshift(_),H++)),v>B-3&&(O=tr(p.target,M),v===B-2?O==="intersect"&&(w.pop(),w[w.length-1]=M):O!=="intersect"&&w.push(b)),h.newWaypoints=p.waypoints=s(p,w),c(h,H,d),h.newSegmentStartIndex=m+H,l(d)}),t.on("connectionSegment.move.hover",function(d){d.context.hover=d.hover,n.addMarker(d.hover,UP)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(d){var h=d.context.hover;h&&n.removeMarker(h,UP)}),t.on("connectionSegment.move.cleanup",function(d){var h=d.context,p=h.connection;h.draggerGfx&&ci(h.draggerGfx),n.removeMarker(p,qP)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(d){var h=d.context,p=h.connection;p.waypoints=h.originalWaypoints,l(d)}),t.on("connectionSegment.move.end",function(d){var h=d.context,p=h.connection,m=h.newWaypoints,v=h.newSegmentStartIndex;m=m.map(function(M){return{original:M.original,x:Math.round(M.x),y:Math.round(M.y)}});var _=u(m,v),b=_.waypoints,E=s(p,b),w=_.segmentOffset,x={segmentMove:{segmentStartIndex:h.segmentStartIndex,newSegmentStartIndex:v+w}};o.updateWaypoints(p,E,x)})}FI.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var NY=Math.abs,VP=Math.round;function kY(e,t,n){n=n===void 0?10:n;var i,r;for(i=0;i<t.length;i++)if(r=t[i],NY(r-e)<=n)return r}function jI(e){return{x:e.x,y:e.y}}function $I(e){return{x:e.x+e.width,y:e.y+e.height}}function Co(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:VP(e.x+e.width/2),y:VP(e.y+e.height/2)}}function sp(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function Kn(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}function GI(e){return e.children||[]}var PY=Math.abs,WP=Math.round,Eb=10;function UI(e){function t(o,a){if(bt(o)){for(var s=o.length;s--;)if(PY(o[s]-a)<=Eb)return o[s]}else{o=+o;var l=a%o;if(l<Eb)return a-l;if(l>o-Eb)return a-l+o}return a}function n(o,a){if(o.waypoints)return yY(a,o);if(o.width)return{x:WP(o.width/2+o.x),y:WP(o.height/2+o.y)}}function i(o){var a=o.context,s=a.snapPoints,l=a.connection,c=l.waypoints,u=a.segmentStart,d=a.segmentStartIndex,h=a.segmentEnd,p=a.segmentEndIndex,m=a.axis;if(s)return s;var v=[c[d-1],u,h,c[p+1]];return d<2&&v.unshift(n(l.source,o)),p>c.length-3&&v.unshift(n(l.target,o)),a.snapPoints=s={horizontal:[],vertical:[]},ue(v,function(_){_&&(_=_.original||_,m==="y"&&s.horizontal.push(_.y),m==="x"&&s.vertical.push(_.x))}),s}e.on("connectionSegment.move.move",1500,function(o){var a=i(o),s=o.x,l=o.y,c,u;if(a){c=t(a.vertical,s),u=t(a.horizontal,l);var d=s-c,h=l-u;be(o,{dx:o.dx-d,dy:o.dy-h,x:c,y:u}),(d||a.vertical.indexOf(s)!==-1)&&Kn(o,"x",c),(h||a.horizontal.indexOf(l)!==-1)&&Kn(o,"y",u)}});function r(o){var a=o.snapPoints,s=o.connection.waypoints,l=o.bendpointIndex;if(a)return a;var c=[s[l-1],s[l+1]];return o.snapPoints=a={horizontal:[],vertical:[]},ue(c,function(u){u&&(u=u.original||u,a.horizontal.push(u.y),a.vertical.push(u.x))}),a}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var a=o.context,s=a.hover,l=s&&n(s,o);!on(s)||!l||!l.x||!l.y||(Kn(o,"x",l.x),Kn(o,"y",l.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var a=o.context,s=r(a),l=a.hover,c=l&&n(l,o),u=o.x,d=o.y,h,p;if(s){h=t(c?s.vertical.concat([c.x]):s.vertical,u),p=t(c?s.horizontal.concat([c.y]):s.horizontal,d);var m=u-h,v=d-p;be(o,{dx:o.dx-m,dy:o.dy-v,x:o.x-m,y:o.y-v}),(m||s.vertical.indexOf(u)!==-1)&&Kn(o,"x",h),(v||s.horizontal.indexOf(d)!==-1)&&Kn(o,"y",p)}})}UI.$inject=["eventBus"];const AY={__depends__:[Us,Va],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",LI],bendpointMove:["type",L5],bendpointMovePreview:["type",OI],connectionSegmentMove:["type",FI],bendpointSnapping:["type",UI]};function qI(e,t,n,i){function r(a,s){return i.allowed("connection.create",{source:a,target:s})}function o(a,s){return r(s,a)}e.on("connect.hover",function(a){var s=a.context,l=s.start,c=a.hover,u;if(s.hover=c,u=s.canExecute=r(l,c),!If(u)){if(u!==!1){s.source=l,s.target=c;return}u=s.canExecute=o(l,c),!If(u)&&u!==!1&&(s.source=c,s.target=l)}}),e.on(["connect.out","connect.cleanup"],function(a){var s=a.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(a){var s=a.context,l=s.canExecute,c=s.connectionStart,u={x:a.x,y:a.y},d=s.source,h=s.target;if(!l)return!1;var p=null,m={connectionStart:Aw(s)?u:c,connectionEnd:Aw(s)?c:u};Ci(l)&&(p=l),s.connection=n.connect(d,h,p,m)}),this.start=function(a,s,l,c){Ci(l)||(c=l,l=ht(s)),t.init(a,"connect",{autoActivate:c,data:{shape:s,context:{start:s,connectionStart:l}}})}}qI.$inject=["eventBus","dragging","modeling","rules"];function Aw(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var TY=1100,CY=900,KP="connect-ok",YP="connect-not-ok";function zI(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(r){var o=r.context,a=o.canExecute,s=o.hover,l=o.source,c=o.start,u=o.startPosition,d=o.target,h=o.connectionStart||u,p=o.connectionEnd||{x:r.x,y:r.y},m=h,v=p;Aw(o)&&(m=p,v=h),i.drawPreview(o,a,{source:l||c,target:d||s,connectionStart:m,connectionEnd:v})}),t.on("connect.hover",CY,function(r){var o=r.context,a=r.hover,s=o.canExecute;s!==null&&n.addMarker(a,s?KP:YP)}),t.on(["connect.out","connect.cleanup"],TY,function(r){var o=r.hover;o&&(n.removeMarker(o,KP),n.removeMarker(o,YP))}),i&&t.on("connect.cleanup",function(r){i.cleanUp(r.context)})}zI.$inject=["injector","eventBus","canvas"];const B5={__depends__:[za,Va,Us],__init__:["connectPreview"],connect:["type",qI],connectPreview:["type",zI]};var RY="djs-dragger";function qs(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}qs.$inject=["injector","canvas","graphicsFactory","elementFactory"];qs.prototype.drawPreview=function(e,t,n){n=n||{};var i=e.connectionPreviewGfx,r=e.getConnection,o=n.source,a=n.target,s=n.waypoints,l=n.connectionStart,c=n.connectionEnd,u=n.noLayout,d=n.noCropping,h=n.noNoop,p,m=this;if(i||(i=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Ry(i),r||(r=e.getConnection=MY(function(v,_,b){return m.getConnection(v,_,b)})),t&&(p=r(t,o,a)),!p){!h&&this.drawNoopPreview(i,n);return}p.waypoints=s||[],this._layouter&&!u&&(p.waypoints=this._layouter.layoutConnection(p,{source:o,target:a,connectionStart:l,connectionEnd:c,waypoints:n.waypoints||p.waypoints})),(!p.waypoints||!p.waypoints.length)&&(p.waypoints=[o?ht(o):l,a?ht(a):c]),this._connectionDocking&&(o||a)&&!d&&(p.waypoints=this._connectionDocking.getCroppedWaypoints(p,o,a)),this._graphicsFactory.drawConnection(i,p,{stroke:"var(--element-dragger-color)"})};qs.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,r=t.connectionStart||ht(n),o=t.connectionEnd||ht(i),a=this.cropWaypoints(r,o,n,i),s=this.createNoopConnection(a[0],a[1]);ft(e,s)};qs.prototype.cropWaypoints=function(e,t,n,i){var r=this._graphicsFactory,o=n&&r.getShapePath(n),a=i&&r.getShapePath(i),s=r.getConnectionPath({waypoints:[e,t]});return e=n&&dw(o,s,!0)||e,t=i&&dw(a,s,!1)||t,[e,t]};qs.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&ci(e.connectionPreviewGfx)};qs.prototype.getConnection=function(e){var t=IY(e);return this._elementFactory.createConnection(t)};qs.prototype.createConnectionPreviewGfx=function(){var e=Qe("g");return He(e,{pointerEvents:"none"}),Gt(e).add(RY),ft(this._canvas.getActiveLayer(),e),e};qs.prototype.createNoopConnection=function(e,t){return My([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function MY(e){var t={};return function(n){var i=JSON.stringify(n),r=t[i];return r||(r=t[i]=e.apply(null,arguments)),r}}function IY(e){return Ci(e)?e:{}}const DY={__init__:["connectionPreview"],connectionPreview:["type",qs]},LY=new om("ps");var OY=["marker-start","marker-mid","marker-end"],BY=["circle","ellipse","line","path","polygon","polyline","path","rect"];function rc(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i}rc.$inject=["elementRegistry","eventBus","canvas","styles"];rc.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};rc.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};rc.prototype.addDragger=function(e,t,n,i="djs-dragger"){n=n||this.getGfx(e);var r=$M(n),o=n.getBoundingClientRect();return this._cloneMarkers(lu(r),i),He(r,this._styles.cls(i,[],{x:o.top,y:o.left})),ft(t,r),He(r,"data-preview-support-element-id",e.id),r};rc.prototype.addFrame=function(e,t){var n=Qe("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return ft(t,n),He(n,"data-preview-support-element-id",e.id),n};rc.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var i=this;if(e.childNodes)for(var r=0;r<e.childNodes.length;r++)i._cloneMarkers(e.childNodes[r],t,n);GY(e)&&OY.forEach(function(o){if(He(e,o)){var a=FY(e,o,i._canvas.getContainer());a&&i._cloneMarker(n,e,a,o,t)}})};rc.prototype._cloneMarker=function(e,t,n,i,r="djs-dragger"){var o=[n.id,r,LY.next()].join("-"),a=rn("marker#"+n.id,e);e=e||this._canvas._svg;var s=a||$M(n);s.id=o,Gt(s).add(r);var l=rn(":scope > defs",e);l||(l=Qe("defs"),ft(e,l)),ft(l,s);var c=$Y(s.id);He(t,i,c)};function FY(e,t,n){var i=jY(He(e,t));return rn("marker#"+i,n||document)}function jY(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function $Y(e){return"url(#"+e+")"}function GY(e){return BY.indexOf(e.nodeName)!==-1}const Tp={__init__:["previewSupport"],previewSupport:["type",rc]},Qg="complex-preview";class HI{constructor(t,n,i){this._canvas=t,this._graphicsFactory=n,this._previewSupport=i,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:i=[],removed:r=[],resized:o=[]}=t,a=this._canvas.getLayer(Qg);n.filter(s=>!UY(s)).forEach(s=>{let l;on(s)?(l=this._graphicsFactory._createContainer("connection",Qe("g")),this._graphicsFactory.drawConnection(lu(l),s)):(l=this._graphicsFactory._createContainer("shape",Qe("g")),this._graphicsFactory.drawShape(lu(l),s),Oi(l,s.x,s.y)),this._previewSupport.addDragger(s,a,l)}),i.forEach(({element:s,delta:l})=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"]);const c=this._previewSupport.addDragger(s,a);on(s)?Oi(c,l.x,l.y):Oi(c,s.x+l.x,s.y+l.y)}),r.forEach(s=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"])}),o.forEach(({shape:s,bounds:l})=>{this._canvas.addMarker(s,"djs-hidden"),this._markers.push([s,"djs-hidden"]),this._previewSupport.addDragger(s,a,void 0,"djs-dragging");const c=this._graphicsFactory._createContainer("shape",Qe("g"));this._graphicsFactory.drawShape(lu(c),s,{width:l.width,height:l.height}),Oi(c,l.x,l.y),this._previewSupport.addDragger(s,a,c)})}cleanUp(){Ry(this._canvas.getLayer(Qg)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(Qg)}hide(){this._canvas.hideLayer(Qg)}}HI.$inject=["canvas","graphicsFactory","previewSupport"];function UY(e){return e.hidden}const qY={__depends__:[Tp],__init__:["complexPreview"],complexPreview:["type",HI]};var F5=["top","bottom","left","right"],e0=10;function j5(e,t){je.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(r){var o=r.context,a=o.connection,s=a.source,l=a.target,c=o.hints||{};c.createElementsBehavior!==!1&&(n(s),n(l))}),this.postExecuted(["label.create"],function(r){var o=r.context,a=o.shape,s=o.hints||{};s.createElementsBehavior!==!1&&n(a.labelTarget)}),this.postExecuted(["elements.create"],function(r){var o=r.context,a=o.elements,s=o.hints||{};s.createElementsBehavior!==!1&&a.forEach(function(l){n(l)})});function n(r){if(jy(r)){var o=VY(r);o&&i(r,o)}}function i(r,o){var a=ht(r),s=r.label,l=ht(s);if(s.parent){var c=at(r),u;switch(o){case"top":u={x:a.x,y:c.top-e0-s.height/2};break;case"left":u={x:c.left-e0-s.width/2,y:a.y};break;case"bottom":u={x:a.x,y:c.bottom+e0+s.height/2};break;case"right":u={x:c.right+e0+s.width/2,y:a.y};break}var d=ca(u,l);t.moveShape(s,d)}}}We(j5,je);j5.$inject=["eventBus","modeling"];function zY(e){var t=e.host,n=ht(e),i=tr(n,t),r;i.indexOf("-")>=0?r=i.split("-"):r=[i];var o=F5.filter(function(a){return r.indexOf(a)===-1});return o}function HY(e){var t=ht(e),n=[].concat(e.incoming.map(function(i){return i.waypoints[i.waypoints.length-2]}),e.outgoing.map(function(i){return i.waypoints[1]})).map(function(i){return VI(t,i)});return n}function VY(e){var t=ht(e.label),n=ht(e),i=VI(n,t);if(WY(i)){var r=HY(e);if(e.host){var o=zY(e);r=r.concat(o)}var a=F5.filter(function(s){return r.indexOf(s)===-1});if(a.indexOf(i)===-1)return a[0]}}function VI(e,t){return tr(t,e,5)}function WY(e){return F5.indexOf(e)!==-1}function $5(e){je.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,i=t.shape;t.position||(F(i,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-i.height/2}:t.position={x:n.x+n.width+80+i.width/2,y:n.y+n.height/2})},!0)}We($5,je);$5.$inject=["eventBus"];function G5(e,t){e.invoke(je,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape,o=It(r.incoming.concat(r.outgoing),function(a){return F(a,"bpmn:Association")});ue(o,function(a){t.moveConnection(a,{x:0,y:0},i)})},!0)}We(G5,je);G5.$inject=["injector","modeling"];var JP=500;function e_(e,t){t.invoke(je,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",JP,function(i){var r=i.elements;r=r.filter(function(o){var a=o.host;return XP(o,a)}),r.length===1&&r.map(function(o){return r.indexOf(o)}).forEach(function(o){var a=r[o];i.elements[o]=n._replaceShape(r[o],a)})},!0),this.preExecute("elements.move",JP,function(i){var r=i.shapes,o=i.newHost;if(r.length===1){var a=r[0];XP(a,o)&&(i.shapes=[n._replaceShape(a,o)])}},!0)}e_.$inject=["bpmnReplace","injector"];We(e_,je);e_.prototype._replaceShape=function(e,t){var n=KY(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function KY(e){var t=Ge(e),n=t.eventDefinitions;return n&&n[0]}function XP(e,t){return!qt(e)&&Ct(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function U5(e,t){je.call(this,e);function n(i){return It(i.attachers,function(r){return F(r,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(i){var r=i.context.source,o=i.context.target,a=n(o);F(r,"bpmn:EventBasedGateway")&&F(o,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)}),this.postExecute("connection.reconnect",function(i){var r=i.context.oldSource,o=i.context.newSource;F(r,"bpmn:Gateway")&&F(o,"bpmn:EventBasedGateway")&&ue(o.outgoing,function(a){var s=a.target,l=n(s);F(s,"bpmn:ReceiveTask")&&l.length>0&&t.removeElements(l)})})}U5.$inject=["eventBus","modeling"];We(U5,je);function q5(e,t,n){je.call(this,e),this.preExecute("shape.replace",s,!0),this.postExecuted("shape.replace",l,!0),this.preExecute("connection.create",r,!0),this.postExecuted("connection.delete",i,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",a,!0);function i(_){const b=_.source,E=_.target;cd(b)&&Nh(E)&&u(E)}function r(_){const b=_.connection,E=_.source,w=_.target;cd(E)&&t0(w)&&(c(w),h(E,[b]))}function o(_){const b=_.newTarget,E=_.oldSource,w=_.oldTarget;if(w!==b){const x=E;Nh(w)&&u(w),cd(x)&&t0(b)&&c(b)}}function a(_){const{element:b}=_;Nh(b)?(d(b),p(b)):t0(b)&&m(b)}function s(_){const{newData:b,oldShape:E}=_;if(cd(_.oldShape)&&b.eventDefinitionType!=="bpmn:CompensateEventDefinition"||b.type!=="bpmn:BoundaryEvent"){const w=E.outgoing.find(({target:x})=>Nh(x));w&&w.target&&(_._connectionTarget=w.target)}else if(!cd(_.oldShape)&&b.eventDefinitionType==="bpmn:CompensateEventDefinition"&&b.type==="bpmn:BoundaryEvent"){const w=E.outgoing.find(({target:x})=>t0(x));w&&w.target&&(_._connectionTarget=w.target),v(E)}}function l(_){const{_connectionTarget:b,newShape:E}=_;b&&t.connect(E,b)}function c(_){t.updateProperties(_,{isForCompensation:!0})}function u(_){t.updateProperties(_,{isForCompensation:void 0})}function d(_){for(const b of _.incoming)n.canConnect(b.source,_)||t.removeConnection(b);for(const b of _.outgoing)n.canConnect(_,b.target)||t.removeConnection(b)}function h(_,b){_.outgoing.filter(x=>F(x,"bpmn:Association")).filter(x=>Nh(x.target)&&!b.includes(x)).forEach(x=>t.removeConnection(x))}function p(_){const b=_.attachers.slice();b.length&&t.removeElements(b)}function m(_){const b=_.incoming.filter(E=>cd(E.source));t.removeElements(b)}function v(_){const b=_.outgoing.filter(E=>F(E,"bpmn:SequenceFlow"));t.removeElements(b)}}We(q5,je);q5.$inject=["eventBus","modeling","bpmnRules"];function Nh(e){const t=Ge(e);return t&&t.get("isForCompensation")}function cd(e){return e&&F(e,"bpmn:BoundaryEvent")&&wp(e,"bpmn:CompensateEventDefinition")}function t0(e){return e&&F(e,"bpmn:Activity")&&!Qi(e)}function z5(e){e.invoke(je,this),this.preExecute("shape.create",1500,function(t){var n=t.context,i=n.parent,r=n.shape;F(i,"bpmn:Lane")&&!F(r,"bpmn:Lane")&&(n.parent=ap(i,"bpmn:Participant"))})}z5.$inject=["injector"];We(z5,je);function H5(e,t){je.call(this,e),this.preExecute("shape.create",function(n){var i=n.context,r=i.shape;if(F(r,"bpmn:DataObjectReference")&&r.type!=="label"){var o=t.create("bpmn:DataObject");r.businessObject.dataObjectRef=o}})}H5.$inject=["eventBus","bpmnFactory"];We(H5,je);var Tw=20,Cw=20,WI=30,n0=2e3;function V5(e,t,n){je.call(this,t),t.on(["create.start","shape.move.start"],n0,function(r){var o=r.context,a=o.shape,s=e.getRootElement();if(!(!F(a,"bpmn:Participant")||!F(s,"bpmn:Process")||!s.children.length)){var l=s.children.filter(function(d){return!F(d,"bpmn:Group")&&!qt(d)&&!on(d)});if(l.length){var c=yi(l),u=YY(a,c);be(a,u),o.createConstraints=JY(a,c)}}}),t.on("create.start",n0,function(r){var o=r.context,a=o.shape,s=e.getRootElement(),l=e.getGraphics(s);function c(u){u.element=s,u.gfx=l}F(a,"bpmn:Participant")&&F(s,"bpmn:Process")&&(t.on("element.hover",n0,c),t.once("create.cleanup",function(){t.off("element.hover",c)}))});function i(){var r=e.getRootElement();return F(r,"bpmn:Collaboration")?r:n.makeCollaboration()}this.preExecute("elements.create",n0,function(r){var o=r.elements,a=r.parent,s=XY(o),l;s&&F(a,"bpmn:Process")&&(r.parent=i(),l=r.hints=r.hints||{},l.participant=s,l.process=a,l.processRef=Ge(s).get("processRef"))},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;F(a,"bpmn:Participant")&&F(o,"bpmn:Process")&&(r.parent=i(),r.process=o,r.processRef=Ge(a).get("processRef"))},!0),this.execute("shape.create",function(r){var o=r.hints||{},a=r.process||o.process,s=r.shape,l=o.participant;a&&(!l||s===l)&&Ge(s).set("processRef",Ge(a))},!0),this.revert("shape.create",function(r){var o=r.hints||{},a=r.process||o.process,s=r.processRef||o.processRef,l=r.shape,c=o.participant;a&&(!c||l===c)&&Ge(l).set("processRef",s)},!0),this.postExecute("shape.create",function(r){var o=r.hints||{},a=r.process||r.hints.process,s=r.shape,l=o.participant;if(a){var c=a.children.slice();l?s===l&&n.moveElements(c,{x:0,y:0},l):n.moveElements(c,{x:0,y:0},s)}},!0)}V5.$inject=["canvas","eventBus","modeling"];We(V5,je);function YY(e,t){t={width:t.width+Tw*2+WI,height:t.height+Cw*2};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function JY(e,t){return t=at(t),{bottom:t.top+e.height/2-Cw,left:t.right-e.width/2+Tw,top:t.bottom-e.height/2+Cw,right:t.left+e.width/2-Tw-WI}}function XY(e){return Wt(e,function(t){return F(t,"bpmn:Participant")})}var ZP="__targetRef_placeholder";function W5(e,t){je.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],QP(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],QP(o));function n(a,s,l){var c=a.get("dataInputAssociations");return Wt(c,function(u){return u!==l&&u.targetRef===s})}function i(a,s){var l=a.get("properties"),c=Wt(l,function(u){return u.name===ZP});return!c&&s&&(c=t.create("bpmn:Property",{name:ZP}),di(l,c)),c}function r(a,s){var l=i(a);l&&(n(a,l,s)||Yn(a.get("properties"),l))}function o(a){var s=a.context,l=s.connection,c=l.businessObject,u=l.target,d=u&&u.businessObject,h=s.newTarget,p=h&&h.businessObject,m=s.oldTarget||s.target,v=m&&m.businessObject,_=l.businessObject,b;v&&v!==d&&r(v,c),p&&p!==d&&r(p,c),d?(b=i(d,!0),_.targetRef=b):_.targetRef=null}}W5.$inject=["eventBus","bpmnFactory"];We(W5,je);function QP(e){return function(t){var n=t.context,i=n.connection;if(F(i,"bpmn:DataInputAssociation"))return e(t)}}function t_(e){this._bpmnUpdater=e}t_.$inject=["bpmnUpdater"];t_.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.newSemanticParent,r=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};t_.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.oldSemanticParent,r=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};function K5(e,t,n,i){je.call(this,i),t.registerHandler("dataStore.updateContainment",t_);function r(){return n.filter(function(s){return F(s,"bpmn:Participant")&&Ge(s).processRef})[0]}function o(s){return s.children.filter(function(l){return F(l,"bpmn:DataStoreReference")&&!l.labelTarget})}function a(s,l){var c=s.businessObject||s;if(l=l||r(),l){var u=l.businessObject||l;t.execute("dataStore.updateContainment",{dataStoreBo:c,dataStoreDi:Ut(s),newSemanticParent:u.processRef||u,newDiParent:Ut(l)})}}this.preExecute("shape.create",function(s){var l=s.context,c=l.shape;F(c,"bpmn:DataStoreReference")&&c.type!=="label"&&(l.hints||(l.hints={}),l.hints.autoResize=!1)}),this.preExecute("elements.move",function(s){var l=s.context,c=l.shapes,u=c.filter(function(d){return F(d,"bpmn:DataStoreReference")});u.length&&(l.hints||(l.hints={}),l.hints.autoResize=c.filter(function(d){return!F(d,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(s){var l=s.context,c=l.shape,u=c.parent;F(c,"bpmn:DataStoreReference")&&c.type!=="label"&&F(u,"bpmn:Collaboration")&&a(c)}),this.postExecute("shape.move",function(s){var l=s.context,c=l.shape,u=l.oldParent,d=c.parent;if(!F(u,"bpmn:Collaboration")&&F(c,"bpmn:DataStoreReference")&&c.type!=="label"&&F(d,"bpmn:Collaboration")){var h=F(u,"bpmn:Participant")?u:QY(u,"bpmn:Participant");a(c,h)}}),this.postExecute("shape.delete",function(s){var l=s.context,c=l.shape,u=e.getRootElement();Ct(c,["bpmn:Participant","bpmn:SubProcess"])&&F(u,"bpmn:Collaboration")&&o(u).filter(function(d){return ZY(d,c)}).forEach(function(d){a(d)})}),this.postExecute("canvas.updateRoot",function(s){var l=s.context,c=l.oldRoot,u=l.newRoot,d=o(c);d.forEach(function(h){F(u,"bpmn:Process")&&a(h,u)})})}K5.$inject=["canvas","commandStack","elementRegistry","eventBus"];We(K5,je);function ZY(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function QY(e,t){for(;e.parent;){if(F(e.parent,t))return e.parent;e=e.parent}}var Kv=Math.max,Yv=Math.min,eJ=20;function KI(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function tJ(e,t,n){var i=n.x,r=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+r,o.height=e.height-r):t.indexOf("s")!==-1&&(o.height=e.height+r),t.indexOf("e")!==-1?o.width=e.width+i:t.indexOf("w")!==-1&&(o.x=e.x+i,o.width=e.width-i),o}function nJ(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function i0(e,t,n){var i=t[e],r=n.min&&n.min[e],o=n.max&&n.max[e];return pt(r)&&(i=(/top|left/.test(e)?Yv:Kv)(i,r)),pt(o)&&(i=(/top|left/.test(e)?Kv:Yv)(i,o)),i}function iJ(e,t){if(!t)return e;var n=at(e);return Dy({top:i0("top",n,t),right:i0("right",n,t),bottom:i0("bottom",n,t),left:i0("left",n,t)})}function rJ(e,t,n,i){var r=at(t),o={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},a=i?at(i):o,s={top:Yv(o.top,a.top),left:Yv(o.left,a.left),bottom:Kv(o.bottom,a.bottom),right:Kv(o.right,a.right)};return Dy(s)}function kh(e,t){return typeof e<"u"?e:eJ}function oJ(e,t){var n,i,r,o;return typeof t=="object"?(n=kh(t.left),i=kh(t.right),r=kh(t.top),o=kh(t.bottom)):n=i=r=o=kh(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+o}}function aJ(e){return!(e.waypoints||e.type==="label")}function YI(e,t){var n;if(e.length===void 0?n=It(e.children,aJ):n=e,n.length)return oJ(yi(n),t)}var fl=Math.abs;function sJ(e,t){return KI(at(t),at(e))}var lJ=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],No=30;function n_(e,t){return t=t||[],e.children.filter(function(n){F(n,"bpmn:Lane")&&(n_(n,t),t.push(n))}),t}function oc(e){return e.children.filter(function(t){return F(t,"bpmn:Lane")})}function Ao(e){return ap(e,lJ)||e}function cJ(e,t){var n=Ao(e),i=F(n,"bpmn:Process")?[]:[n],r=n_(n,i),o=at(e),a=at(t),s=sJ(e,t),l=[],c=_i(e);return r.forEach(function(u){if(u!==e){var d=c?0:s.top,h=c?s.right:0,p=c?0:s.bottom,m=c?s.left:0,v=at(u);s.top&&(fl(v.bottom-o.top)<10&&(p=a.top-v.bottom),fl(v.top-o.top)<5&&(d=a.top-v.top)),s.left&&(fl(v.right-o.left)<10&&(h=a.left-v.right),fl(v.left-o.left)<5&&(m=a.left-v.left)),s.bottom&&(fl(v.top-o.bottom)<10&&(d=a.bottom-v.top),fl(v.bottom-o.bottom)<5&&(p=a.bottom-v.bottom)),s.right&&(fl(v.left-o.right)<10&&(m=a.right-v.left),fl(v.right-o.right)<5&&(h=a.right-v.right)),(d||h||p||m)&&l.push({shape:u,newBounds:nJ(u,{top:d,right:h,bottom:p,left:m})})}}),l}var uJ=500;function Y5(e,t){je.call(this,e);function n(i,r){var o=_i(i),a=oc(r),s=[],l=[],c=[],u=[];if(Au(a,function(_){return o?_.y>i.y?l.push(_):s.push(_):_.x>i.x?u.push(_):c.push(_),_.children}),!!a.length){var d;o?l.length&&s.length?d=i.height/2:d=i.height:u.length&&c.length?d=i.width/2:d=i.width;var h,p,m,v;s.length&&(h=t.calculateAdjustments(s,"y",d,i.y-10),t.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:d},"s")),l.length&&(p=t.calculateAdjustments(l,"y",-d,i.y+i.height+10),t.makeSpace(p.movingShapes,p.resizingShapes,{x:0,y:-d},"n")),c.length&&(m=t.calculateAdjustments(c,"x",d,i.x-10),t.makeSpace(m.movingShapes,m.resizingShapes,{x:d,y:0},"e")),u.length&&(v=t.calculateAdjustments(u,"x",-d,i.x+i.width+10),t.makeSpace(v.movingShapes,v.resizingShapes,{x:-d,y:0},"w"))}}this.postExecuted("shape.delete",uJ,function(i){var r=i.context,o=r.hints,a=r.shape,s=r.oldParent;F(a,"bpmn:Lane")&&(o&&o.nested||n(a,s))})}Y5.$inject=["eventBus","spaceTool"];We(Y5,je);var eA=500;function i_(e,t){t.invoke(je,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",eA,function(i){var r=i.elements;r.filter(function(o){var a=o.host;return tA(o,a)}).map(function(o){return r.indexOf(o)}).forEach(function(o){i.elements[o]=n._replaceShape(r[o])})},!0),this.preExecute("elements.move",eA,function(i){var r=i.shapes,o=i.newHost;r.forEach(function(a,s){var l=a.host;tA(a,pJ(r,l)?l:o)&&(r[s]=n._replaceShape(a))})},!0)}i_.$inject=["bpmnReplace","injector"];We(i_,je);i_.prototype._replaceShape=function(e){var t=dJ(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function dJ(e){var t=Ge(e),n=t.eventDefinitions;return n&&n[0]}function tA(e,t){return!qt(e)&&F(e,"bpmn:BoundaryEvent")&&!t}function pJ(e,t){return e.indexOf(t)!==-1}function J5(e,t,n){je.call(this,e);function i(r,o,a){var s=o.waypoints,l,c,u,d,h,p,m,v=r.outgoing.slice(),_=r.incoming.slice(),b;pt(a.width)?b=ht(a):b=a;var E=Sw(s,b);if(E){if(l=s.slice(0,E.index),c=s.slice(E.index+(E.bendpoint?1:0)),!l.length||!c.length)return;u=E.bendpoint?s[E.index]:b,(l.length===1||!nA(r,l[l.length-1]))&&l.push(iA(u)),(c.length===1||!nA(r,c[0]))&&c.unshift(iA(u))}d=o.source,h=o.target,t.canConnect(d,r,o)&&(n.reconnectEnd(o,r,l||b),p=o),t.canConnect(r,h,o)&&(p?m=n.connect(r,h,{type:o.type,waypoints:c}):(n.reconnectStart(o,r,c||b),m=o));var w=[].concat(p&&It(_,function(x){return x.source===p.source})||[],m&&It(v,function(x){return x.target===m.target})||[]);w.length&&n.removeElements(w)}this.preExecute("elements.move",function(r){var o=r.newParent,a=r.shapes,s=r.delta,l=a[0];if(!(!l||!o)){o&&o.waypoints&&(r.newParent=o=o.parent);var c=ht(l),u={x:c.x+s.x,y:c.y+s.y},d=Wt(o.children,function(h){var p=t.canInsert(a,h);return p&&Sw(h.waypoints,u)});d&&(r.targetFlow=d,r.position=u)}},!0),this.postExecuted("elements.move",function(r){var o=r.shapes,a=r.targetFlow,s=r.position;a&&i(o[0],a,s)},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;t.canInsert(a,o)&&(r.targetFlow=o,r.parent=o.parent)},!0),this.postExecuted("shape.create",function(r){var o=r.shape,a=r.targetFlow,s=r.position;a&&i(o,a,s)},!0)}We(J5,je);J5.$inject=["eventBus","bpmnRules","modeling"];function nA(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function iA(e){return be({},e)}function X5(e,t){je.call(this,e),this.preExecuted("connection.create",function(n){var i=n.context,r=i.connection,o=i.source,a=i.target,s=i.hints;if(!(s&&s.createElementsBehavior===!1)&&ud(r)){var l=[];F(o,"bpmn:EventBasedGateway")?l=a.incoming.filter(c=>c!==r&&ud(c)):l=a.incoming.filter(c=>c!==r&&ud(c)&&F(c.source,"bpmn:EventBasedGateway")),l.forEach(function(c){t.removeConnection(c)})}}),this.preExecuted("shape.replace",function(n){var i=n.context,r=i.newShape;if(F(r,"bpmn:EventBasedGateway")){var o=r.outgoing.filter(ud).reduce(function(a,s){return a.includes(s.target)?a:a.concat(s.target)},[]);o.forEach(function(a){a.incoming.filter(ud).forEach(function(s){const l=a.incoming.filter(ud).filter(function(c){return c.source===r});(s.source!==r||l.length>1)&&t.removeConnection(s)})})}})}X5.$inject=["eventBus","modeling"];We(X5,je);function ud(e){return F(e,"bpmn:SequenceFlow")}var r0=1500,rA=2e3;function JI(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],r0,function(i){var r=i.context,o=r.shape||i.shape,a=i.hover;F(a,"bpmn:Lane")&&!Ct(o,["bpmn:Lane","bpmn:Participant"])&&(i.hover=Ao(a),i.hoverGfx=e.getGraphics(i.hover));var s=n.getRootElement();a!==s&&(o.labelTarget||Ct(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(i.hover=s,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],r0,function(i){var r=i.hover;F(r,"bpmn:Lane")&&(i.hover=Ao(r)||r,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["bendpoint.move.hover"],r0,function(i){var r=i.context,o=i.hover,a=r.type;F(o,"bpmn:Lane")&&/reconnect/.test(a)&&(i.hover=Ao(o)||o,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.start"],r0,function(i){var r=i.context,o=r.start;F(o,"bpmn:Lane")&&(r.start=Ao(o)||o)}),t.on("shape.move.start",rA,function(i){var r=i.shape;F(r,"bpmn:Lane")&&(i.shape=Ao(r)||r)}),t.on("spaceTool.move",rA,function(i){var r=i.hover;r&&F(r,"bpmn:Lane")&&(i.hover=Ao(r))})}JI.$inject=["elementRegistry","eventBus","canvas"];function hJ(e){return e.create("bpmn:Category")}function fJ(e){return e.create("bpmn:CategoryValue")}function mJ(e,t,n){return di(t.get("categoryValue"),e),e.$parent=t,di(n.get("rootElements"),t),t.$parent=n,e}function gJ(e){var t=e.$parent;return t&&(Yn(t.get("categoryValue"),e),e.$parent=null),e}function vJ(e){var t=e.$parent;return t&&(Yn(t.get("rootElements"),e),e.$parent=null),e}var oA=770;function Z5(e,t,n,i,r,o){r.invoke(je,this);function a(){return n.filter(function(m){return F(m,"bpmn:Group")})}function s(m,v){return m.some(function(_){var b=Ge(_),E=b.categoryValueRef&&b.categoryValueRef.$parent;return E===v})}function l(m,v){return m.some(function(_){var b=Ge(_);return b.categoryValueRef===v})}function c(m,v,_){var b=a().filter(function(E){return E.businessObject!==_});v&&!s(b,v)&&vJ(v),m&&!l(b,m)&&gJ(m)}function u(m,v){return mJ(m,v,t.getDefinitions())}function d(m,v){var _=Ge(m),b=_.categoryValueRef;b||(b=_.categoryValueRef=v.categoryValue=v.categoryValue||fJ(e));var E=b.$parent;E||(E=b.$parent=v.category=v.category||hJ(e)),u(b,E,t.getDefinitions())}function h(m,v){var _=v.category,b=v.categoryValue,E=Ge(m);b?(E.categoryValueRef=null,c(b,_,E)):c(null,E.categoryValueRef.$parent,E)}this.execute("label.create",function(m){var v=m.context,_=v.labelTarget;F(_,"bpmn:Group")&&d(_,v)}),this.revert("label.create",function(m){var v=m.context,_=v.labelTarget;F(_,"bpmn:Group")&&h(_,v)}),this.execute("shape.delete",function(m){var v=m.context,_=v.shape,b=Ge(_);if(!(!F(_,"bpmn:Group")||_.labelTarget)){var E=v.categoryValue=b.categoryValueRef,w;E&&(w=v.category=E.$parent,c(E,w,b),b.categoryValueRef=null)}}),this.reverted("shape.delete",function(m){var v=m.context,_=v.shape;if(!(!F(_,"bpmn:Group")||_.labelTarget)){var b=v.category,E=v.categoryValue,w=Ge(_);E&&(w.categoryValueRef=E,u(E,b))}}),this.execute("shape.create",function(m){var v=m.context,_=v.shape;!F(_,"bpmn:Group")||_.labelTarget||Ge(_).categoryValueRef&&d(_,v)}),this.reverted("shape.create",function(m){var v=m.context,_=v.shape;!F(_,"bpmn:Group")||_.labelTarget||Ge(_).categoryValueRef&&h(_,v)});function p(m,v){var _=e.create(m.$type);return o.copyElement(m,_,null,v)}i.on("copyPaste.copyElement",oA,function(m){var v=m.descriptor,_=m.element;if(!(!F(_,"bpmn:Group")||_.labelTarget)){var b=Ge(_);if(b.categoryValueRef){var E=b.categoryValueRef;v.categoryValue=p(E,!0),E.$parent&&(v.category=p(E.$parent,!0))}}}),i.on("copyPaste.pasteElement",oA,function(m){var v=m.descriptor,_=v.businessObject,b=v.categoryValue,E=v.category;b&&(b=_.categoryValueRef=p(b)),E&&(b.$parent=p(E)),delete v.category,delete v.categoryValue})}Z5.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];We(Z5,je);function Rw(e,t,n,i){var r,o,a,s,l;return r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),r==0?null:(o=e.y-n.y,a=e.x-n.x,l=(i.x-n.x)*o-(i.y-n.y)*a,s=l/r,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function XI(e){function t(i,r,o){var a={x:o.x,y:o.y-50},s={x:o.x-50,y:o.y},l=Rw(i,r,o,a),c=Rw(i,r,o,s),u;l&&c?aA(l,o)>aA(c,o)?u=c:u=l:u=l||c,i.original=u}function n(i){var r=i.waypoints;t(r[0],r[1],ht(i.source)),t(r[r.length-1],r[r.length-2],ht(i.target))}e.on("bpmnElement.added",function(i){var r=i.element;r.waypoints&&n(r)})}XI.$inject=["eventBus"];function aA(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Q5(e){je.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=n.context.shape,r=Ge(i),o=Ut(i);if(Ct(r,t)){var a=o.get("isHorizontal");a===void 0&&(a=!0),o.set("isHorizontal",a)}})}Q5.$inject=["eventBus"];We(Q5,je);var ZI=Math.sqrt,QI=Math.min,yJ=Math.max,sA=Math.abs;function lA(e){return Math.pow(e,2)}function Ph(e,t){return ZI(lA(e.x-t.x)+lA(e.y-t.y))}function _J(e,t){var n=0,i,r,o,a,s,l,c,u,d,h,p;for(n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],uA(i,r)?c=[i]:(o=Ph(e,i),a=Ph(e,r),l=QI(o,a),c=bJ(i,r,e,l)),c.length<1)throw new Error("expected between [1, 2] circle -> line intersections");c.length===1&&(u={type:"bendpoint",position:c[0],segmentIndex:n,bendpointIndex:uA(i,c[0])?n:n+1}),c.length===2&&(s=xJ(c[0],c[1]),u={type:"segment",position:s,segmentIndex:n,relativeLocation:Ph(i,s)/Ph(i,r)}),d=Ph(u.position,e),(!p||h>d)&&(p=u,h=d)}return p}function bJ(e,t,n,i){var r=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,l=r*r+o*o,c=r*a+o*s,u=a*a+s*s-i*i,d=c/l,h=u/l,p=d*d-h;if(p<0&&p>-1e-6&&(p=0),p<0)return[];var m=ZI(p),v=-d+m,_=-d-m,b={x:e.x-r*v,y:e.y-o*v};if(p===0)return[b];var E={x:e.x-r*_,y:e.y-o*_};return[b,E].filter(function(w){return wJ(w,e,t)})}function wJ(e,t,n){return cA(e.x,t.x,n.x)&&cA(e.y,t.y,n.y)}function cA(e,t,n){return e>=QI(t,n)-Jv&&e<=yJ(t,n)+Jv}function xJ(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var Jv=.1;function uA(e,t){return sA(e.x-t.x)<=Jv&&sA(e.y-t.y)<=Jv}function EJ(e,t,n,i){var r=n.segmentIndex,o=t.length-e.length;if(i.segmentMove){var a=i.segmentMove.segmentStartIndex,s=i.segmentMove.newSegmentStartIndex;return r===a?s:r>=s?r+o<s?s:r+o:r}if(i.bendpointMove){var l=i.bendpointMove.insert,c=i.bendpointMove.bendpointIndex,u;if(o===0)return r;if(r>=c&&(u=l?r+1:r-1),r<c&&(u=r,l&&n.type!=="bendpoint"&&c-1===r)){var d=tD(t,c);d<n.relativeLocation&&u++}return u}return o===0?r:i.connectionStart&&r===0?0:i.connectionEnd&&r===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function eD(e,t,n,i){var r=0,o=0,a={point:e,delta:{x:0,y:0}},s=_J(e,n),l=s.segmentIndex,c=EJ(n,t,s,i);if(c<0||c>t.length-2||c===null)return a;var u=dA(n,l),d=dA(t,c),h=s.position,p=NJ(u,h),m=SJ(u,d);if(s.type==="bendpoint"){var v=t.length-n.length,_=s.bendpointIndex,b=n[_];if(t.indexOf(b)!==-1)return a;if(v===0){var E=t[_];return r=E.x-s.position.x,o=E.y-s.position.y,{delta:{x:r,y:o},point:{x:e.x+r,y:e.y+o}}}v<0&&_!==0&&_<n.length-1&&(p=tD(n,_))}var w={x:(d[1].x-d[0].x)*p+d[0].x,y:(d[1].y-d[0].y)*p+d[0].y},x=fY({x:e.x-h.x,y:e.y-h.y},m);return r=w.x+x.x-e.x,o=w.y+x.y-e.y,{point:ks(w),delta:ks({x:r,y:o})}}function tD(e,t){var n=Vv(e[t-1],e[t]),i=Vv(e[t],e[t+1]),r=n/(n+i);return r}function SJ(e,t){var n=LP(e),i=LP(t);return i-n}function dA(e,t){return[e[t],e[t+1]]}function NJ(e,t){var n=Vv(e[0],e[1]),i=Vv(e[0],t);return n===0?0:i/n}function kJ(e,t,n,i){var r=ht(e);return eD(r,t,n,i).delta}function lm(e,t,n){var i=tf(t),r=tf(n),o=ca(e,i),a={x:o.x*(n.width/t.width),y:o.y*(n.height/t.height)};return ks({x:r.x+a.x,y:r.y+a.y})}function pA(e,t,n){var i=tf(e),r=tf(t),o=tf(n),a=ca(e,i),s=ca(i,r),l=PJ(i,t,n);if(l)return l;var c={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},u={x:o.x+c.x,y:o.y+c.y};return ks({x:u.x+a.x-e.x,y:u.y+a.y-e.y})}function PJ(e,t,n){var i=at(t),r=at(n);if(AJ(i,r))return null;var o=tr(t,e),a,s,l;if(o==="top")a={x:0,y:r.bottom-i.bottom};else if(o==="bottom")a={x:0,y:r.top-i.top};else if(o==="right")a={x:r.left-i.left,y:0};else if(o==="left")a={x:r.right-i.right,y:0};else return null;return s={x:e.x+a.x,y:e.y+a.y},l=tr(n,s),l!==o?null:a}function AJ(e,t){return TJ(e,t)||CJ(e,t)}function TJ(e,t){return e.right!==t.right&&e.left!==t.left}function CJ(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var hA="name",fA="text";function eE(e,t,n,i){je.call(this,e),this.postExecute("element.updateProperties",r),this.postExecute("element.updateModdleProperties",a=>{Ge(a.context.element)===a.context.moddleElement&&r(a)});function r(a){var s=a.context,l=s.element,c=s.properties;if(hA in c&&t.updateLabel(l,c[hA]),fA in c&&F(l,"bpmn:TextAnnotation")){var u=i.getTextAnnotationBounds({x:l.x,y:l.y,width:l.width,height:l.height},c[fA]||"");t.updateLabel(l,c.text,u)}}this.postExecute(["shape.create","connection.create"],function(a){var s=a.context,l=s.hints||{};if(l.createElementsBehavior!==!1){var c=s.shape||s.connection;qt(c)||!_u(c)||ro(c)&&t.updateLabel(c,ro(c))}}),this.postExecute("shape.delete",function(a){var s=a.context,l=s.labelTarget,c=s.hints||{};l&&c.unsetLabel!==!1&&t.updateLabel(l,null,null,{removeShape:!1})});function o(a){var s=a.context,l=s.connection,c=l.label,u=be({},s.hints),d=s.newWaypoints||l.waypoints,h=s.oldWaypoints;return typeof u.startChanged>"u"&&(u.startChanged=!!u.connectionStart),typeof u.endChanged>"u"&&(u.endChanged=!!u.connectionEnd),kJ(c,d,h,u)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var s=a.context,l=s.hints||{};if(l.labelBehavior!==!1){var c=s.connection,u=c.label,d;!u||!u.parent||(d=o(a),t.moveShape(u,d))}}),this.postExecute(["shape.replace"],function(a){var s=a.context,l=s.newShape,c=s.oldShape,u=Ge(l);u&&_u(u)&&c.label&&l.label&&(l.label.x=c.label.x,l.label.y=c.label.y)}),this.postExecute("shape.resize",function(a){var s=a.context,l=s.shape,c=s.newBounds,u=s.oldBounds;if(jy(l)){var d=l.label,h=ht(d),p=IJ(u),m=MJ(h,p),v=RJ(m,u,c);t.moveShape(d,v)}})}We(eE,je);eE.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function RJ(e,t,n){var i=lm(e,t,n);return ks(ca(i,e))}function MJ(e,t){if(t.length){var n=DJ(e,t);return D5(e,n)}}function IJ(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function DJ(e,t){var n=t.map(function(r){return{line:r,distance:RI(e,r)}}),i=Ga(n,"distance");return i[0].line}function LJ(e,t,n,i){return eD(e,t,n,i).point}function tE(e,t){je.call(this,e);function n(i,r){var o=i.context,a=o.connection,s=be({},o.hints),l=o.newWaypoints||a.waypoints,c=o.oldWaypoints;return typeof s.startChanged>"u"&&(s.startChanged=!!s.connectionStart),typeof s.endChanged>"u"&&(s.endChanged=!!s.connectionEnd),LJ(r,l,c,s)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(i){var r=i.context,o=r.connection,a=o.outgoing,s=o.incoming;s.forEach(function(l){var c=l.waypoints[l.waypoints.length-1],u=n(i,c),d=[].concat(l.waypoints.slice(0,-1),[u]);t.updateWaypoints(l,d)}),a.forEach(function(l){var c=l.waypoints[0],u=n(i,c),d=[].concat([u],l.waypoints.slice(1));t.updateWaypoints(l,d)})}),this.postExecute(["connection.move"],function(i){var r=i.context,o=r.connection,a=o.outgoing,s=o.incoming,l=r.delta;s.forEach(function(c){var u=c.waypoints[c.waypoints.length-1],d={x:u.x+l.x,y:u.y+l.y},h=[].concat(c.waypoints.slice(0,-1),[d]);t.updateWaypoints(c,h)}),a.forEach(function(c){var u=c.waypoints[0],d={x:u.x+l.x,y:u.y+l.y},h=[].concat([d],c.waypoints.slice(1));t.updateWaypoints(c,h)})})}We(tE,je);tE.$inject=["eventBus","modeling"];function r_(e,t,n){var i=a_(e),r=iD(i,t),o=i[0];return r.length?r[r.length-1]:lm(o.original||o,n,t)}function o_(e,t,n){var i=a_(e),r=iD(i,t),o=i[i.length-1];return r.length?r[0]:lm(o.original||o,n,t)}function nE(e,t,n){var i=a_(e),r=nD(t,n),o=i[0];return lm(o.original||o,r,t)}function iE(e,t,n){var i=a_(e),r=nD(t,n),o=i[i.length-1];return lm(o.original||o,r,t)}function nD(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function a_(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function iD(e,t){var n=Zi(e,BJ);return It(n,function(i){return OJ(i,t)})}function OJ(e,t){return tr(t,e,1)==="intersect"}function BJ(e){return e.original||e}function rE(e,t){je.call(this,e),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(FJ(i,r)){var o=jJ(i);o.incoming.forEach(function(a){var s=o_(a,r,i);t.reconnectEnd(a,r,s)}),o.outgoing.forEach(function(a){var s=r_(a,r,i);t.reconnectStart(a,r,s)})}},!0)}rE.$inject=["eventBus","modeling"];We(rE,je);function FJ(e,t){return F(e,"bpmn:Participant")&&Bt(e)&&F(t,"bpmn:Participant")&&!Bt(t)}function jJ(e){var t=Zf([e],!1),n=[],i=[];return t.forEach(function(r){r!==e&&(r.incoming.forEach(function(o){F(o,"bpmn:MessageFlow")&&n.push(o)}),r.outgoing.forEach(function(o){F(o,"bpmn:MessageFlow")&&i.push(o)}))},[]),{incoming:n,outgoing:i}}const $J=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function rD(e){const t=Ge(e);if(!F(t,"bpmn:BoundaryEvent")&&!(F(t,"bpmn:StartEvent")&&Qi(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:$J.some(i=>F(n[0],i))}function oD(e){return F(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function oE(e,t){e.invoke(je,this),this.postExecuted("shape.replace",function(n){const i=n.context.oldShape,r=n.context.newShape,o=n.context.hints;if(!rD(r))return;const a=oD(r);if(o.targetElement&&o.targetElement[a]!==void 0)return;const l=Ge(i).get(a),c=Ge(r).get(a);l!==c&&t.updateProperties(r,{[a]:l})})}oE.$inject=["injector","modeling"];We(oE,je);function aE(e,t){je.call(this,e),this.preExecute("shape.resize",function(n){var i=n.shape,r=Ut(i),o=r&&r.get("label"),a=o&&o.get("bounds");a&&t.updateModdleProperties(i,o,{bounds:void 0})},!0)}We(aE,je);aE.$inject=["eventBus","modeling"];function sE(e,t,n){je.call(this,e),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(!(r.incoming.length!==1||r.outgoing.length!==1)){var o=r.incoming[0],a=r.outgoing[0];if(!(!F(o,"bpmn:SequenceFlow")||!F(a,"bpmn:SequenceFlow"))&&t.canConnect(o.source,a.target,o)){var s=GJ(o.waypoints,a.waypoints);n.reconnectEnd(o,a.target,s)}}})}We(sE,je);sE.$inject=["eventBus","bpmnRules","modeling"];function dd(e){return e.original||e}function GJ(e,t){var n=Rw(dd(e[e.length-2]),dd(e[e.length-1]),dd(t[1]),dd(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[dd(e[0]),dd(t[t.length-1])]}function lE(e,t){je.call(this,e),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;F(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;if(i&&!i.businessObject.participants.length){var r=t.makeProcess(),o=i.children.slice();t.moveElements(o,{x:0,y:0},r)}},!0)}lE.$inject=["eventBus","modeling"];We(lE,je);function cE(e,t,n,i){je.call(this,e);var r=i.get("dragging",!1);function o(l){var c=l.source,u=l.target,d=l.parent;if(d){var h,p;F(l,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(c,u)||(p=!0),n.canConnectMessageFlow(c,u)&&(h="bpmn:MessageFlow")),F(l,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(c,u)||(p=!0),n.canConnectSequenceFlow(c,u)&&(h="bpmn:SequenceFlow")),p&&t.removeConnection(l),h&&t.connect(c,u,{type:h,waypoints:l.waypoints.slice()})}}function a(l){var c=l.context,u=c.connection,d=c.newSource||u.source,h=c.newTarget||u.target,p,m;p=n.canConnect(d,h),!(!p||p.type===u.type)&&(m=t.connect(d,h,{type:p.type,associationDirection:p.associationDirection,waypoints:u.waypoints.slice()}),u.parent&&t.removeConnection(u),c.connection=m,r&&s(u,m))}function s(l,c){var u=r.context(),d=u&&u.payload.previousSelection,h;!d||!d.length||(h=d.indexOf(l),h!==-1&&d.splice(h,1,c))}this.postExecuted("elements.move",function(l){var c=l.closure,u=c.allConnections;ue(u,o)},!0),this.preExecute("connection.reconnect",a),this.postExecuted("element.updateProperties",function(l){var c=l.context,u=c.properties,d=c.element,h=d.businessObject,p;u.default&&(p=Wt(d.outgoing,la({id:d.businessObject.default.id})),p&&t.updateProperties(p,{conditionExpression:void 0})),u.conditionExpression&&h.sourceRef.default===h&&t.updateProperties(d.source,{default:void 0})})}We(cE,je);cE.$inject=["eventBus","modeling","bpmnRules","injector"];function s_(e,t,n,i,r,o){i.invoke(je,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(a){var s=a.context,l=s.parent,c=s.elements,u=Fr(c,function(d,h){var p=t.canReplace([h],h.host||h.parent||l);return p?d.concat(p.replacements):d},[]);u.length&&this._replaceElements(c,u)},this),this.postExecuted(["elements.move"],500,function(a){var s=a.context,l=s.newParent,c=s.newHost,u=[];ue(s.closure.topLevel,function(h){Qi(h)?u=u.concat(h.children):u=u.concat(h)}),u.length===1&&c&&(l=c);var d=t.canReplace(u,l);d&&this._replaceElements(u,d.replacements,c)},this),this.postExecute(["shape.replace"],1500,function(a){var s=a.context,l=s.oldShape,c=s.newShape,u=l.attachers,d;u&&u.length&&(d=t.canReplace(u,c),this._replaceElements(u,d.replacements))},this),this.postExecuted(["shape.replace"],1500,function(a){var s=a.context,l=s.oldShape,c=s.newShape;r.unclaimId(l.businessObject.id,l.businessObject),r.updateProperties(c,{id:l.id})})}We(s_,je);s_.prototype._replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;ue(t,function(o){var a={type:o.newElementType},s=n.get(o.oldElementId),l=e.indexOf(s);e[l]=i.replaceElement(s,a,{select:!1})}),t&&r.select(e)};s_.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var UJ=1500,qJ={width:140,height:120},uE={width:300,height:60},dE={width:60,height:300},W0={width:300,height:150},K0={width:150,height:300},aD={width:140,height:120},sD={width:50,height:30};function lD(e){e.on("resize.start",UJ,function(t){var n=t.context,i=n.shape,r=n.direction,o=n.balanced;(F(i,"bpmn:Lane")||F(i,"bpmn:Participant"))&&(n.resizeConstraints=KJ(i,r,o)),F(i,"bpmn:SubProcess")&&Bt(i)&&(n.minDimensions=aD),F(i,"bpmn:TextAnnotation")&&(n.minDimensions=sD)})}lD.$inject=["eventBus"];var ml=Math.abs,zJ=Math.min,HJ=Math.max;function cD(e,t,n,i){var r=e[t];e[t]=r===void 0?n:i(n,r)}function pd(e,t,n){return cD(e,t,n,zJ)}function hd(e,t,n){return cD(e,t,n,HJ)}var VJ={top:20,left:50,right:20,bottom:20},WJ={top:50,left:20,right:20,bottom:20};function KJ(e,t,n){var i=Ao(e),r=!0,o=!0,a=n_(i,[i]),s=at(e),l={},c={},u=_i(e),d=u?uE:dE;/n/.test(t)?c.top=s.bottom-d.height:/e/.test(t)?c.right=s.left+d.width:/s/.test(t)?c.bottom=s.top+d.height:/w/.test(t)&&(c.left=s.right-d.width),a.forEach(function(m){var v=at(m);u?(v.top<s.top-10&&(r=!1),v.bottom>s.bottom+10&&(o=!1)):(v.left<s.left-10&&(r=!1),v.right>s.right+10&&(o=!1)),/n/.test(t)&&(n&&ml(s.top-v.bottom)<10&&hd(l,"top",v.top+d.height),ml(s.top-v.top)<5&&pd(c,"top",v.bottom-d.height)),/e/.test(t)&&(n&&ml(s.right-v.left)<10&&pd(l,"right",v.right-d.width),ml(s.right-v.right)<5&&hd(c,"right",v.left+d.width)),/s/.test(t)&&(n&&ml(s.bottom-v.top)<10&&pd(l,"bottom",v.bottom-d.height),ml(s.bottom-v.bottom)<5&&hd(c,"bottom",v.top+d.height)),/w/.test(t)&&(n&&ml(s.left-v.right)<10&&hd(l,"left",v.left+d.width),ml(s.left-v.left)<5&&pd(c,"left",v.right-d.width))});var h=i.children.filter(function(m){return!m.hidden&&!m.waypoints&&(F(m,"bpmn:FlowElement")||F(m,"bpmn:Artifact"))}),p=u?VJ:WJ;return h.forEach(function(m){var v=at(m);/n/.test(t)&&(!u||r)&&pd(c,"top",v.top-p.top),/e/.test(t)&&(u||o)&&hd(c,"right",v.right+p.right),/s/.test(t)&&(!u||o)&&hd(c,"bottom",v.bottom+p.bottom),/w/.test(t)&&(u||r)&&pd(c,"left",v.left-p.left)}),{min:c,max:l}}var mA=1001;function uD(e,t){e.on("resize.start",mA+500,function(n){var i=n.context,r=i.shape;(F(r,"bpmn:Lane")||F(r,"bpmn:Participant"))&&(i.balanced=!Bf(n))}),e.on("resize.end",mA,function(n){var i=n.context,r=i.shape,o=i.canExecute,a=i.newBounds;if(F(r,"bpmn:Lane")||F(r,"bpmn:Participant"))return o&&(a=XM(a),t.resizeLane(r,a,i.balanced)),!1})}uD.$inject=["eventBus","modeling"];var YJ=500;function pE(e,t,n,i,r){n.invoke(je,this);function o(u){return Ct(u,["bpmn:ReceiveTask","bpmn:SendTask"])||JJ(u,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(u){var d=e.getDefinitions(),h=d.get("rootElements");return!!Wt(h,la({id:u.id}))}function s(u){if(F(u,"bpmn:ErrorEventDefinition"))return"errorRef";if(F(u,"bpmn:EscalationEventDefinition"))return"escalationRef";if(F(u,"bpmn:MessageEventDefinition"))return"messageRef";if(F(u,"bpmn:SignalEventDefinition"))return"signalRef"}function l(u){if(Ct(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.get("messageRef");var d=u.get("eventDefinitions"),h=d[0];return h.get(s(h))}function c(u,d){if(Ct(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.set("messageRef",d);var h=u.get("eventDefinitions"),p=h[0];return p.set(s(p),d)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var d=u.shape||u.element;if(o(d)){var h=Ge(d),p=l(h),m;p&&!a(p)&&(m=e.getDefinitions().get("rootElements"),di(m,p),u.addedRootElement=p)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var d=u.addedRootElement;if(d){var h=e.getDefinitions().get("rootElements");Yn(h,d)}},!0),t.on("copyPaste.copyElement",function(u){var d=u.descriptor,h=u.element;if(!(h.labelTarget||!o(h))){var p=Ge(h),m=l(p);m&&(d.referencedRootElement=m)}}),t.on("copyPaste.pasteElement",YJ,function(u){var d=u.descriptor,h=d.businessObject,p=d.referencedRootElement;p&&(a(p)||(p=i.copyElement(p,r.create(p.$type))),c(h,p),delete d.referencedRootElement)})}pE.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];We(pE,je);function JJ(e,t){return bt(t)||(t=[t]),Jl(t,function(n){return wp(e,n)})}var dD=Math.max;function pD(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,i=t.axis,r=t.start,o={};return ue(n,function(a){var s=a.id;F(a,"bpmn:Participant")&&(o[s]=ZJ(a,i,r)),F(a,"bpmn:Lane")&&(o[s]=_i(a)?uE:dE),F(a,"bpmn:SubProcess")&&Bt(a)&&(o[s]=aD),F(a,"bpmn:TextAnnotation")&&(o[s]=sD),F(a,"bpmn:Group")&&(o[s]=qJ)}),o})}pD.$inject=["eventBus"];function XJ(e){return e==="x"}function ZJ(e,t,n){var i=_i(e);if(!tX(e))return i?W0:K0;var r=XJ(t),o={};return r?i?o=W0:o={width:eX(e,n,r),height:K0.height}:i?o={width:W0.width,height:QJ(e,n,r)}:o=K0,o}function QJ(e,t,n){var i;return i=nX(e,t,n),dD(W0.height,i)}function eX(e,t,n){var i;return i=iX(e,t,n),dD(K0.width,i)}function tX(e){return!!oc(e).length}function nX(e,t,n){var i=oc(e),r;return r=hE(i,t,n),e.height-r.height+uE.height}function iX(e,t,n){var i=oc(e),r;return r=hE(i,t,n),e.width-r.width+dE.width}function hE(e,t,n){var i,r,o;for(i=0;i<e.length;i++)if(r=e[i],!n&&t>=r.y&&t<=r.y+r.height||n&&t>=r.x&&t<=r.x+r.width)return o=oc(r),o.length?hE(o,t,n):r}var gA=400,rX=600,vA={x:180,y:160};function ac(e,t,n,i,r,o,a){je.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=i,this._bpmnFactory=r,this._bpmnjs=o,this._elementRegistry=a;var s=this;function l(d){return F(d,"bpmn:SubProcess")&&!Bt(d)}function c(d){var h=d.shape,p=d.newRootElement,m=Ge(h);p=s._addDiagram(p||m),d.newRootElement=e.addRootElement(p)}function u(d){var h=d.shape,p=Ge(h);s._removeDiagram(p);var m=d.newRootElement=a.get(_s(p));e.removeRootElement(m)}this.executed("shape.create",function(d){var h=d.shape;l(h)&&c(d)},!0),this.postExecuted("shape.create",function(d){var h=d.shape,p=d.newRootElement;!p||!h.children||(s._showRecursively(h.children),s._moveChildrenToShape(h,p))},!0),this.reverted("shape.create",function(d){var h=d.shape;l(h)&&u(d)},!0),this.preExecuted("shape.delete",function(d){var h=d.shape;if(l(h)){var p=a.get(_s(h));p&&n.removeElements(p.children.slice())}},!0),this.executed("shape.delete",function(d){var h=d.shape;l(h)&&u(d)},!0),this.reverted("shape.delete",function(d){var h=d.shape;l(h)&&c(d)},!0),this.preExecuted("shape.replace",function(d){var h=d.oldShape,p=d.newShape;!l(h)||!l(p)||(d.oldRoot=e.removeRootElement(_s(h)))},!0),this.postExecuted("shape.replace",function(d){var h=d.newShape,p=d.oldRoot,m=e.findRoot(_s(h));if(!(!p||!m)){var v=p.children;n.moveElements(v,{x:0,y:0},m)}},!0),this.executed("element.updateProperties",function(d){var h=d.element;if(F(h,"bpmn:SubProcess")){var p=d.properties,m=d.oldProperties,v=m.id,_=p.id;if(v!==_){if(q0(h)){a.updateId(h,Oc(_)),a.updateId(v,_);return}var b=a.get(Oc(v));b&&a.updateId(Oc(v),Oc(_))}}},!0),this.reverted("element.updateProperties",function(d){var h=d.element;if(F(h,"bpmn:SubProcess")){var p=d.properties,m=d.oldProperties,v=m.id,_=p.id;if(v!==_){if(q0(h)){a.updateId(h,Oc(v)),a.updateId(_,v);return}var b=a.get(Oc(_));b&&a.updateId(b,Oc(v))}}},!0),t.on("element.changed",function(d){var h=d.element;if(q0(h)){var p=h,m=a.get(aP(p));!m||m===p||t.fire("element.changed",{element:m})}}),this.executed("shape.toggleCollapse",gA,function(d){var h=d.shape;F(h,"bpmn:SubProcess")&&(Bt(h)?u(d):(c(d),s._showRecursively(h.children)))},!0),this.reverted("shape.toggleCollapse",gA,function(d){var h=d.shape;F(h,"bpmn:SubProcess")&&(Bt(h)?u(d):(c(d),s._showRecursively(h.children)))},!0),this.postExecuted("shape.toggleCollapse",rX,function(d){var h=d.shape;if(F(h,"bpmn:SubProcess")){var p=d.newRootElement;p&&(Bt(h)?s._moveChildrenToShape(p,h):s._moveChildrenToShape(h,p))}},!0),t.on("copyPaste.createTree",function(d){var h=d.element,p=d.children;if(l(h)){var m=_s(h),v=a.get(m);v&&p.push.apply(p,v.children)}}),t.on("copyPaste.copyElement",function(d){var h=d.descriptor,p=d.element,m=d.elements,v=p.parent,_=F(Ut(v),"bpmndi:BPMNPlane");if(_){var b=aP(v),E=Wt(m,function(w){return w.id===b});E&&(h.parent=E.id)}}),t.on("copyPaste.pasteElement",function(d){var h=d.descriptor;h.parent&&(l(h.parent)||h.parent.hidden)&&(h.hidden=!0)})}We(ac,je);ac.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,i=e.children,r;if(i){i=i.concat(i.reduce(function(c,u){return u.label&&u.label.parent!==e?c.concat(u.label):c},[]));var o=i.filter(function(c){return!c.hidden});if(!o.length){n.moveElements(i,{x:0,y:0},t,{autoResize:!1});return}var a=yi(o);if(!t.x)r={x:vA.x-a.x,y:vA.y-a.y};else{var s=ht(t),l=ht(a);r={x:s.x-l.x,y:s.y-l.y}}n.moveElements(i,r,t,{autoResize:!1})}};ac.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach(function(r){r.hidden=!!t,i=i.concat(r),r.children&&(i=i.concat(n._showRecursively(r.children,r.collapsed||t)))}),i};ac.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};ac.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),r=t.create("bpmndi:BPMNDiagram",{plane:i});i.$parent=r;var o=n.createRoot({id:_s(e),type:e.$type,di:i,businessObject:e,collapsed:!0});return o};ac.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,i=Wt(n,function(r){return r.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(i),1),i};ac.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function fE(e,t){e.invoke(je,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(!(!F(r,"bpmn:SubProcess")||!(F(i,"bpmn:Task")||F(i,"bpmn:CallActivity"))||!Bt(r))){var o=oX(r);t.createShape({type:"bpmn:StartEvent"},o,r)}})}fE.$inject=["injector","modeling"];We(fE,je);function oX(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function mE(e){je.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;F(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&F(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}We(mE,je);mE.$inject=["eventBus"];function gE(e,t){je.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var i=n.shape;if(Bt(i))return;var r=Zf(i);r.forEach(function(a){var s=a.incoming.slice(),l=a.outgoing.slice();ue(s,function(c){o(c,!0)}),ue(l,function(c){o(c,!1)})});function o(a,s){r.indexOf(a.source)!==-1&&r.indexOf(a.target)!==-1||(s?t.reconnectEnd(a,i,ht(i)):t.reconnectStart(a,i,ht(i)))}},!0)}We(gE,je);gE.$inject=["eventBus","modeling"];var Sb=500;function vE(e,t,n){je.call(this,e);function i(a){a.length&&a.forEach(function(s){s.type==="label"&&!s.businessObject.name&&(s.hidden=!0)})}function r(a,s){var l=a.children,c=s,u,d;return u=aX(l).concat([a]),d=YI(u),d?(c.width=Math.max(d.width,c.width),c.height=Math.max(d.height,c.height),c.x=d.x+(d.width-c.width)/2,c.y=d.y+(d.height-c.height)/2):(c.x=a.x+(a.width-c.width)/2,c.y=a.y+(a.height-c.height)/2),c}function o(a,s){return{x:a.x+(a.width-s.width)/2,y:a.y+(a.height-s.height)/2,width:s.width,height:s.height}}this.executed(["shape.toggleCollapse"],Sb,function(a){var s=a.context,l=s.shape;F(l,"bpmn:SubProcess")&&(l.collapsed?Ut(l).isExpanded=!1:(i(l.children),Ut(l).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],Sb,function(a){var s=a.context,l=s.shape;l.collapsed?Ut(l).isExpanded=!1:Ut(l).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],Sb,function(a){var s=a.context.shape,l=t.getDefaultSize(s),c;s.collapsed?c=o(s,l):c=r(s,l),n.resizeShape(s,c,null,{autoResize:s.collapsed?!1:"nwse"})})}We(vE,je);vE.$inject=["eventBus","elementFactory","modeling"];function aX(e){return e.filter(function(t){return!t.hidden})}function yE(e,t,n,i){t.invoke(je,this),this.preExecute("shape.delete",function(r){var o=r.context,a=o.shape,s=a.businessObject;qt(a)||(F(a,"bpmn:Participant")&&Bt(a)&&n.ids.unclaim(s.processRef.id),i.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(r){var o=r.context,a=o.connection,s=a.businessObject;i.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var r=e.getRootElement(),o=r.businessObject;F(r,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}We(yE,je);yE.$inject=["canvas","injector","moddle","modeling"];function _E(e,t){je.call(this,e),this.preExecute("connection.delete",function(n){var i=n.context,r=i.connection,o=r.source;sX(r,o)&&t.updateProperties(o,{default:null})})}We(_E,je);_E.$inject=["eventBus","modeling"];function sX(e,t){if(!F(e,"bpmn:SequenceFlow"))return!1;var n=Ge(t),i=Ge(e);return n.get("default")===i}var lX=500,cX=5e3;function bE(e,t){je.call(this,e);var n;function i(){return n=n||new uX,n.enter(),n}function r(){if(!n)throw new Error("out of bounds release");return n}function o(){if(!n)throw new Error("out of bounds release");var s=n.leave();return s&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),s}var a=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(a,cX,function(s){i()}),this.postExecuted(a,lX,function(s){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(s){var l=s.context,c=l.shape,u=r();c.labelTarget||(F(c,"bpmn:Lane")&&u.addLane(c),F(c,"bpmn:FlowNode")&&u.addFlowNode(c))})}bE.$inject=["eventBus","modeling"];We(bE,je);function uX(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function wE(e,t){je.call(this,e),this.postExecuted("elements.create",function(n){const i=n.context,r=i.elements;for(const o of r)dX(o)&&!hX(o)&&t.updateProperties(o,{isForCompensation:void 0})})}We(wE,je);wE.$inject=["eventBus","modeling"];function dX(e){const t=Ge(e);return t&&t.isForCompensation}function pX(e){return e&&F(e,"bpmn:BoundaryEvent")&&wp(e,"bpmn:CompensateEventDefinition")}function hX(e){return e.incoming.filter(n=>pX(n.source)).length>0}const fX={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",j5],appendBehavior:["type",$5],associationBehavior:["type",G5],attachEventBehavior:["type",e_],boundaryEventBehavior:["type",U5],compensateBoundaryEventBehaviour:["type",q5],createBehavior:["type",z5],createDataObjectBehavior:["type",H5],createParticipantBehavior:["type",V5],dataInputAssociationBehavior:["type",W5],dataStoreBehavior:["type",K5],deleteLaneBehavior:["type",Y5],detachEventBehavior:["type",i_],dropOnFlowBehavior:["type",J5],eventBasedGatewayBehavior:["type",X5],fixHoverBehavior:["type",JI],groupBehavior:["type",Z5],importDockingFix:["type",XI],isHorizontalFix:["type",Q5],labelBehavior:["type",eE],layoutConnectionBehavior:["type",tE],messageFlowBehavior:["type",rE],nonInterruptingBehavior:["type",oE],removeElementBehavior:["type",sE],removeEmbeddedLabelBoundsBehavior:["type",aE],removeParticipantBehavior:["type",lE],replaceConnectionBehavior:["type",cE],replaceElementBehaviour:["type",s_],resizeBehavior:["type",lD],resizeLaneBehavior:["type",uD],rootElementReferenceBehavior:["type",pE],spaceToolBehavior:["type",pD],subProcessPlaneBehavior:["type",ac],subProcessStartEventBehavior:["type",fE],textAnnotationBehavior:["type",mE],toggleCollapseConnectionBehaviour:["type",gE],toggleElementCollapseBehaviour:["type",vE],unclaimIdBehavior:["type",yE],unsetDefaultFlowBehavior:["type",_E],updateFlowNodeRefsBehavior:["type",bE],setCompensationActivityAfterPasteBehavior:["type",wE]};function hD(e,t){var n=tr(e,t,-15);return n!=="intersect"?n:null}function ji(e){Fo.call(this,e)}We(ji,Fo);ji.$inject=["eventBus"];ji.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return mX(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},r=i.targetParent,o=i.targetAttach;if(o)return!1;r&&(n.parent=r);try{return Y0(t,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,i=e.target;return Y0(n,i,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return xD(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return on(i)&&!Xv(t,i)?!1:ku(t,function(r){return on(r)?Y0(r.source,r.target,r):r.host?nf(r,r.host,null,n):Lw(r,i,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return nf(n,t,null,i)||bD(n,t,i)||wD(n,t)||Xv(n,t)}),this.addRule("shape.create",function(e){return Lw(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return nf(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return PD(n,t)})};ji.prototype.canConnectMessageFlow=ND;ji.prototype.canConnectSequenceFlow=kD;ji.prototype.canConnectDataAssociation=EE;ji.prototype.canConnectAssociation=ED;ji.prototype.canConnectCompensationAssociation=SD;ji.prototype.canMove=wD;ji.prototype.canAttach=nf;ji.prototype.canReplace=bD;ji.prototype.canDrop=lp;ji.prototype.canInsert=Xv;ji.prototype.canCreate=Lw;ji.prototype.canConnect=Y0;ji.prototype.canResize=xD;ji.prototype.canCopy=PD;function mX(e){return Mw(e)?null:Ct(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Mw(e){return!e||qt(e)}function gX(e,t){return e===t}function yA(e){do{if(F(e,"bpmn:Process"))return Ge(e);if(F(e,"bpmn:Participant"))return Ge(e).processRef||Ge(e)}while(e=e.parent)}function Iw(e){return F(e,"bpmn:TextAnnotation")}function xE(e){return F(e,"bpmn:Group")&&!e.labelTarget}function fD(e){return F(e,"bpmn:BoundaryEvent")&&Oa(e,"bpmn:CompensateEventDefinition")}function l_(e){return Ge(e).isForCompensation}function vX(e,t){var n=yA(e),i=yA(t);return n===i}function yX(e){return F(e,"bpmn:InteractionNode")&&!F(e,"bpmn:BoundaryEvent")&&(!F(e,"bpmn:Event")||F(e,"bpmn:ThrowEvent")&&gD(e,"bpmn:MessageEventDefinition"))}function _X(e){return F(e,"bpmn:InteractionNode")&&!l_(e)&&(!F(e,"bpmn:Event")||F(e,"bpmn:CatchEvent")&&gD(e,"bpmn:MessageEventDefinition"))&&!(F(e,"bpmn:BoundaryEvent")&&!Oa(e,"bpmn:MessageEventDefinition"))}function _A(e){for(var t=e;t=t.parent;){if(F(t,"bpmn:FlowElementsContainer"))return Ge(t);if(F(t,"bpmn:Participant"))return Ge(t).processRef}return null}function mD(e,t){var n=_A(e),i=_A(t);return n===i}function Oa(e,t){var n=Ge(e);return!!Wt(n.eventDefinitions||[],function(i){return F(i,t)})}function gD(e,t){var n=Ge(e);return(n.eventDefinitions||[]).every(function(i){return F(i,t)})}function bX(e){return F(e,"bpmn:FlowNode")&&!F(e,"bpmn:EndEvent")&&!Qi(e)&&!(F(e,"bpmn:IntermediateThrowEvent")&&Oa(e,"bpmn:LinkEventDefinition"))&&!fD(e)&&!l_(e)}function wX(e){return F(e,"bpmn:FlowNode")&&!F(e,"bpmn:StartEvent")&&!F(e,"bpmn:BoundaryEvent")&&!Qi(e)&&!(F(e,"bpmn:IntermediateCatchEvent")&&Oa(e,"bpmn:LinkEventDefinition"))&&!l_(e)}function xX(e){return F(e,"bpmn:ReceiveTask")||F(e,"bpmn:IntermediateCatchEvent")&&(Oa(e,"bpmn:MessageEventDefinition")||Oa(e,"bpmn:TimerEventDefinition")||Oa(e,"bpmn:ConditionalEventDefinition")||Oa(e,"bpmn:SignalEventDefinition"))}function EX(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function Dw(e,t){var n=EX(t);return n.indexOf(e)!==-1}function Y0(e,t,n){if(Mw(e)||Mw(t))return null;if(!F(n,"bpmn:DataAssociation")){if(ND(e,t))return{type:"bpmn:MessageFlow"};if(kD(e,t))return{type:"bpmn:SequenceFlow"}}var i=EE(e,t);return i||(SD(e,t)?{type:"bpmn:Association",associationDirection:"One"}:ED(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function lp(e,t){return qt(e)||xE(e)?!0:F(t,"bpmn:Participant")&&!Bt(t)?!1:F(e,"bpmn:Participant")?F(t,"bpmn:Process")||F(t,"bpmn:Collaboration"):Ct(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:F(e,"bpmn:Lane")?F(t,"bpmn:Participant")||F(t,"bpmn:Lane"):F(e,"bpmn:BoundaryEvent")&&!SX(e)?!1:F(e,"bpmn:FlowElement")&&!F(e,"bpmn:DataStoreReference")?F(t,"bpmn:FlowElementsContainer")?Bt(t):Ct(t,["bpmn:Participant","bpmn:Lane"]):F(e,"bpmn:DataStoreReference")&&F(t,"bpmn:Collaboration")?Jl(Ge(t).get("participants"),function(n){return!!n.get("processRef")}):Ct(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?Ct(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):F(e,"bpmn:MessageFlow")?F(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function SX(e){return Ge(e).cancelActivity&&(vD(e)||yD(e))}function NX(e){return!qt(e)&&F(e,"bpmn:BoundaryEvent")}function kX(e){return F(e,"bpmn:Lane")}function PX(e){return NX(e)||F(e,"bpmn:IntermediateThrowEvent")&&vD(e)?!0:F(e,"bpmn:IntermediateCatchEvent")&&yD(e)}function vD(e){var t=Ge(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function yD(e){return _D(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function _D(e,t){return t.some(function(n){return Oa(e,n)})}function AX(e){return F(e,"bpmn:ReceiveTask")&&Wt(e.incoming,function(t){return F(t.source,"bpmn:EventBasedGateway")})}function nf(e,t,n,i){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var r=e[0];return qt(r)||!PX(r)||Qi(t)||!F(t,"bpmn:Activity")||l_(t)||i&&!hD(i,t)||AX(t)?!1:"attach"}function bD(e,t,n){if(!t)return!1;var i={replacements:[]};return ue(e,function(r){Qi(t)||F(r,"bpmn:StartEvent")&&r.type!=="label"&&lp(r,t)&&(yV(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),(_V(r)||bV(r)||wV(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),_D(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&F(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),F(t,"bpmn:Transaction")||Oa(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(F(r,"bpmn:EndEvent")&&lp(r,t)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),F(r,"bpmn:BoundaryEvent")&&nf(r,t,null,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),i.replacements.length?i:!1}function wD(e,t){return Jl(e,kX)?!1:t?e.every(function(n){return lp(n,t)}):!0}function Lw(e,t,n,i){return t?qt(e)||xE(e)?!0:gX(n,t)||n&&Dw(n,t)?!1:lp(e,t)||Xv(e,t):!1}function xD(e,t){return F(e,"bpmn:SubProcess")?Bt(e)&&(!t||t.width>=100&&t.height>=80):!!(F(e,"bpmn:Lane")||F(e,"bpmn:Participant")||Iw(e)||xE(e))}function TX(e,t){var n=Iw(e),i=Iw(t);return(n||i)&&n!==i}function ED(e,t){return Dw(t,e)||Dw(e,t)?!1:TX(e,t)?!0:!!EE(e,t)}function SD(e,t){return mD(e,t)&&fD(e)&&F(t,"bpmn:Activity")&&!RX(t,e)&&!Qi(t)}function ND(e,t){return bA(e)&&!bA(t)?!1:yX(e)&&_X(t)&&!vX(e,t)}function kD(e,t){return bX(e)&&wX(t)&&mD(e,t)&&!(F(e,"bpmn:EventBasedGateway")&&!xX(t))}function EE(e,t){return Ct(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Ct(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:Ct(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Ct(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function Xv(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:Ct(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!qt(t)&&F(e,"bpmn:FlowNode")&&!F(e,"bpmn:BoundaryEvent")&&lp(e,t.parent)}function CX(e,t){return e&&t&&e.indexOf(t)!==-1}function PD(e,t){return qt(t)?!0:!(F(t,"bpmn:Lane")&&!CX(e,t.parent))}function bA(e){return ap(e,"bpmn:Process")||ap(e,"bpmn:Collaboration")}function RX(e,t){return e.attachers.includes(t)}const MX={__depends__:[Va],__init__:["bpmnRules"],bpmnRules:["type",ji]};var IX=2e3;function AD(e,t){e.on("saveXML.start",IX,n);function n(){var i=t.getRootElements();ue(i,function(r){var o=Ut(r),a,s;a=Zf([r],!1),a=It(a,function(l){return l!==r&&!l.labelTarget}),s=Zi(a,Ut),o.set("planeElement",s)})}}AD.$inject=["eventBus","canvas"];const DX={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",AD]};function c_(e){je.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,o=i.parent,a=t.getOrdering(r,o);a&&(a.parent!==void 0&&(i.parent=a.parent),i.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,o=i.newParent||r.parent,a=t.getOrdering(r,o);a&&(a.parent!==void 0&&(i.newParent=a.parent),i.newParentIndex=a.index)})}c_.prototype.getOrdering=function(e,t){return null};We(c_,je);function SE(e,t){c_.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function i(a){if(a.labelTarget)return{level:10};var s=Wt(n,function(l){return Ct(a,[l.type])});return s&&s.order||{level:1}}function r(a){var s=a.order;if(s||(a.order=s=i(a)),!s)throw new Error(`no order for <${a.id}>`);return s}function o(a,s,l){for(var c=s;c&&!Ct(c,l);)c=c.parent;if(!c)throw new Error(`no parent for <${a.id}> in <${s&&s.id}>`);return c}this.getOrdering=function(a,s){if(a.labelTarget||F(a,"bpmn:TextAnnotation"))return{parent:t.findRoot(s)||t.getRootElement(),index:-1};var l=r(a);l.containers&&(s=o(a,s,l.containers));var c=s.children.indexOf(a),u=MM(s.children,function(d){return!a.labelTarget&&d.labelTarget?!1:l.level<r(d).level});return u!==-1&&c!==-1&&c<u&&(u-=1),{index:u,parent:s}}}SE.$inject=["eventBus","canvas"];We(SE,c_);const LX={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",SE]};function cm(){}cm.prototype.get=function(){return this._data};cm.prototype.set=function(e){this._data=e};cm.prototype.clear=function(){var e=this._data;return delete this._data,e};cm.prototype.isEmpty=function(){return!this._data};const OX={clipboard:["type",cm]};var BX="drop-ok",wA="drop-not-ok",xA="attach-ok",EA="new-parent",SA="create",FX=2e3;function TD(e,t,n,i,r){function o(l,c,u,d,h){if(!c)return!1;l=It(l,function(E){var w=E.labelTarget;return!E.parent&&!(qt(E)&&l.indexOf(w)!==-1)});var p=Wt(l,function(E){return!on(E)}),m=!1,v=!1,_=!1;kA(l)&&(m=r.allowed("shape.attach",{position:u,shape:p,target:c})),m||(kA(l)?_=r.allowed("shape.create",{position:u,shape:p,source:d,target:c}):_=r.allowed("elements.create",{elements:l,position:u,target:c}));var b=h.connectionTarget;return _||m?(p&&d&&(v=r.allowed("connection.create",{source:b===d?p:d,target:b===d?d:p,hints:{targetParent:c,targetAttach:m}})),{attach:m,connect:v}):_===null||m===null?null:!1}function a(l,c){[xA,BX,wA,EA].forEach(function(u){u===c?e.addMarker(l,u):e.removeMarker(l,u)})}n.on(["create.move","create.hover"],function(l){var c=l.context,u=c.elements,d=l.hover,h=c.source,p=c.hints||{};if(!d){c.canExecute=!1,c.target=null;return}NA(l);var m={x:l.x,y:l.y},v=c.canExecute=d&&o(u,d,m,h,p);d&&v!==null&&(c.target=d,v&&v.attach?a(d,xA):a(d,v?EA:wA))}),n.on(["create.end","create.out","create.cleanup"],function(l){var c=l.hover;c&&a(c,null)}),n.on("create.end",function(l){var c=l.context,u=c.source,d=c.shape,h=c.elements,p=c.target,m=c.canExecute,v=m&&m.attach,_=m&&m.connect,b=c.hints||{};if(m===!1||!p)return!1;NA(l);var E={x:l.x,y:l.y};_?d=i.appendShape(u,d,E,p,{attach:v,connection:_===!0?{}:_,connectionTarget:b.connectionTarget}):(h=i.createElements(h,E,p,be({},b,{attach:v})),d=Wt(h,function(w){return!on(w)})),be(c,{elements:h,shape:d}),be(l,{elements:h,shape:d})});function s(){var l=t.context();l&&l.prefix===SA&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],FX,function(){n.off("elements.changed",s)})}),this.start=function(l,c,u){bt(c)||(c=[c]);var d=Wt(c,function(m){return!on(m)});if(d){u=be({elements:c,hints:{},shape:d},u||{}),ue(c,function(m){pt(m.x)||(m.x=0),pt(m.y)||(m.y=0)});var h=It(c,function(m){return!m.hidden}),p=yi(h);ue(c,function(m){on(m)&&(m.waypoints=Zi(m.waypoints,function(v){return{x:v.x-p.x-p.width/2,y:v.y-p.y-p.height/2}})),be(m,{x:m.x-p.x-p.width/2,y:m.y-p.y-p.height/2})}),t.init(l,SA,{cursor:"grabbing",autoActivate:!0,data:{shape:d,elements:c,context:u}})}}}TD.$inject=["canvas","dragging","eventBus","modeling","rules"];function NA(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function kA(e){return e&&e.length===1&&!on(e[0])}var jX=750;function CD(e,t,n,i,r){function o(a){var s=Qe("g");He(s,r.cls("djs-drag-group",["no-events"]));var l=Qe("g");return a.forEach(function(c){var u;c.hidden||(c.waypoints?(u=n._createContainer("connection",l),n.drawConnection(lu(u),c)):(u=n._createContainer("shape",l),n.drawShape(lu(u),c),Oi(u,c.x,c.y)),i.addDragger(c,s,u))}),s}t.on("create.move",jX,function(a){var s=a.hover,l=a.context,c=l.elements,u=l.dragGroup;u||(u=l.dragGroup=o(c));var d;s?(u.parentNode||(d=e.getActiveLayer(),ft(d,u)),Oi(u,a.x,a.y)):ci(u)}),t.on("create.cleanup",function(a){var s=a.context,l=s.dragGroup;l&&ci(l)})}CD.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const u_={__depends__:[Us,Tp,Va,za],__init__:["create","createPreview"],create:["type",TD],createPreview:["type",CD]};function NE(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var r=t._svg=i.svg;r.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}NE.$inject=["eventBus"];NE.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||$X(0,0)};function $X(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,o=e,a=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,o,a,!1,!1,!1,!1,0,null),n}const um={__init__:["mouse"],mouse:["type",NE]};function ma(e,t,n,i,r,o,a,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=o,this._mouse=a,this._rules=s,r.on("copyPaste.copyElement",function(l){var c=l.descriptor,u=l.element,d=l.elements;c.priority=1,c.id=u.id;var h=Wt(d,function(p){return p===u.parent});h&&(c.parent=u.parent.id),GX(u)&&(c.priority=2,c.host=u.host.id),on(u)&&(c.priority=3,c.source=u.source.id,c.target=u.target.id,c.waypoints=UX(u)),qt(u)&&(c.priority=4,c.labelTarget=u.labelTarget.id),ue(["x","y","width","height"],function(p){pt(u[p])&&(c[p]=u[p])}),c.hidden=u.hidden,c.collapsed=u.collapsed}),r.on("copyPaste.pasteElements",function(l){var c=l.hints;be(c,{createElementsBehavior:!1})})}ma.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];ma.prototype.copy=function(e){var t,n;return bt(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(bt(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};ma.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}};ma.prototype._paste=function(e,t,n,i){ue(e,function(o){pt(o.x)||(o.x=0),pt(o.y)||(o.y=0)});var r=yi(e);return ue(e,function(o){on(o)&&(o.waypoints=Zi(o.waypoints,function(a){return{x:a.x-r.x-r.width/2,y:a.y-r.y-r.height/2}})),be(o,{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2})}),this._modeling.createElements(e,n,t,be({},i))};ma.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},r=[];return ue(e,function(o,a){o=Ga(o,"priority"),ue(o,function(s){var l=be({},Lo(s,["priority"]));i[s.parent]?l.parent=i[s.parent]:delete l.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:l});var c;if(on(l)){l.source=i[s.source],l.target=i[s.target],c=i[s.id]=t.createConnection(l),r.push(c);return}if(qt(l)){l.labelTarget=i[l.labelTarget],c=i[s.id]=t.createLabel(l),r.push(c);return}l.host&&(l.host=i[l.host]),c=i[s.id]=t.createShape(l),r.push(c)})}),r};ma.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(Lo(e,["id"]));return t};ma.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(Lo(e,["id"]));return t};ma.prototype.createShape=function(e){var t=this._elementFactory.createShape(Lo(e,["id"]));return t};ma.prototype.hasRelations=function(e,t){var n,i,r;return!(on(e)&&(i=Wt(t,la({id:e.source.id})),r=Wt(t,la({id:e.target.id})),!i||!r)||qt(e)&&(n=Wt(t,la({id:e.labelTarget.id})),!n))};ma.prototype.createTree=function(e){var t=this._rules,n=this,i={},r=[],o=Iy(e);function a(c,u){return t.allowed("element.copy",{element:c,elements:u})}function s(c,u){var d=Wt(r,function(h){return c===h.element});if(!d){r.push({element:c,depth:u});return}d.depth<u&&(r=l(d,r),r.push({element:d.element,depth:u}))}function l(c,u){var d=u.indexOf(c);return d!==-1&&u.splice(d,1),u}return Au(o,function(c,u,d){if(qt(c))return;ue(c.labels,function(m){s(m,d)});function h(m){m&&m.length&&ue(m,function(v){ue(v.labels,function(_){s(_,d)}),s(v,d)})}ue([c.attachers,c.incoming,c.outgoing],h),s(c,d);var p=[];return c.children&&(p=c.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:c,children:p}),p}),e=Zi(r,function(c){return c.element}),r=Zi(r,function(c){return c.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:c.descriptor,element:c.element,elements:e}),c}),r=Ga(r,function(c){return c.descriptor.priority}),e=Zi(r,function(c){return c.element}),ue(r,function(c){var u=c.depth;if(!n.hasRelations(c.element,e)){AA(c.element,e);return}if(!a(c.element,e)){AA(c.element,e);return}i[u]||(i[u]=[]),i[u].push(c.descriptor)}),i};function GX(e){return!!e.host}function UX(e){return Zi(e.waypoints,function(t){return t=PA(t),t.original&&(t.original=PA(t.original)),t})}function PA(e){return be({},e)}function AA(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const qX={__depends__:[OX,u_,um,Va],__init__:["copyPaste"],copyPaste:["type",ma]};function Nb(e,t,n){bt(n)||(n=[n]),ue(n,function(i){gu(e[i])||(t[i]=e[i])})}var kb=750;function RD(e,t,n){function i(l,c){var u=e.create(l.$type);return n.copyElement(l,u,null,c)}t.on("copyPaste.copyElement",kb,function(l){var c=l.descriptor,u=l.element,d=Ge(u);if(qt(u))return c;var h=c.businessObject=i(d,!0),p=c.di=i(Ut(u),!0);p.bpmnElement=h,Nb(h,c,"name"),Nb(p,c,"isExpanded"),d.default&&(c.default=d.default.id)});var r="-bpmn-js-refs";function o(l){return l[r]=l[r]||{}}function a(l,c){l[r]=c}function s(l,c,u){var d=Ge(l);return l.default&&(u[l.default]={element:d,property:"default"}),l.host&&(Ge(l).attachedToRef=Ge(c[l.host])),Lo(u,Fr(u,function(h,p,m){var v=p.element,_=p.property;return m===l.id&&(v.set(_,d),h.push(l.id)),h},[]))}t.on("copyPaste.pasteElement",function(l){var c=l.cache,u=l.descriptor,d=u.businessObject,h=u.di;if(qt(u)){u.businessObject=Ge(c[u.labelTarget]),u.di=Ut(c[u.labelTarget]);return}d=u.businessObject=i(d),h=u.di=i(h),h.bpmnElement=d,Nb(u,d,["isExpanded","name"]),u.type=d.$type}),t.on("copyPaste.copyElement",kb,function(l){var c=l.descriptor,u=l.element;if(F(u,"bpmn:Participant")){var d=Ge(u);d.processRef&&(c.processRef=i(d.processRef,!0))}}),t.on("copyPaste.pasteElement",function(l){var c=l.descriptor,u=c.processRef;u&&(c.processRef=i(u))}),t.on("copyPaste.pasteElement",kb,function(l){var c=l.cache,u=l.descriptor;a(c,s(u,c,o(c)))})}RD.$inject=["bpmnFactory","eventBus","moddleCopy"];var zX=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function dm(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(i){var r=i.propertyNames;if(!(!r||!r.length))return Ga(r,function(o){return o==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(i){var r=i.parent,o=Ci(r)&&r.$descriptor,a=i.propertyName;if(a&&zX.indexOf(a)!==-1||a&&o&&!Wt(o.properties,la({name:a})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(i){var r=i.property;if(HX(r,"bpmn:ExtensionElements")&&(!r.values||!r.values.length))return!1})}dm.$inject=["eventBus","bpmnFactory","moddle"];dm.prototype.copyElement=function(e,t,n,i=!1){var r=this;n&&!bt(n)&&(n=[n]),n=n||Ow(e.$descriptor);var o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:i});return o===!1||(bt(o)&&(n=o),ue(n,function(a){var s;xr(e,a)&&(s=e.get(a));var l=r.copyProperty(s,t,a,i);if(Ai(l)){var c=r._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:l,propertyName:a});c!==!1&&t.set(a,l)}})),t};dm.prototype.copyProperty=function(e,t,n,i=!1){var r=this,o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:i});if(o!==!1){if(o)return Ci(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;var a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?e&&this._copyId(e,t,i):bt(e)?Fr(e,function(s,l){return o=r.copyProperty(l,t,n,i),o?s.concat(o):s},[]):Ci(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=r._bpmnFactory.create(e.$type),o.$parent=t,o=r.copyElement(e,o,null,i),o):e}};dm.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function Ow(e,t){return Fr(e.properties,function(n,i){return t&&i.default?n:n.concat(i.name)},[])}function HX(e,t){return e&&ui(e.$instanceOf)&&e.$instanceOf(t)}const MD={__depends__:[qX],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",RD],moddleCopy:["type",dm]};var TA=Math.round;function kE(e,t){this._modeling=e,this._eventBus=t}kE.$inject=["modeling","eventBus"];kE.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,r=this._eventBus;r.fire("replace.start",{element:e,attrs:t,hints:n});var o=t.width||e.width,a=t.height||e.height,s=t.x||e.x,l=t.y||e.y,c=TA(s+o/2),u=TA(l+a/2),d=i.replaceShape(e,be({},t,{x:c,y:u,width:o,height:a}),n);return r.fire("replace.end",{element:e,newElement:d,hints:n}),d};function ID(e,t){t.on("replace.end",500,function(n){const{newElement:i,hints:r={}}=n;r.select!==!1&&e.select(i)})}ID.$inject=["selection","eventBus"];const VX={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",ID],replace:["type",kE]};function WX(e,t,n){bt(n)||(n=[n]),ue(n,function(i){gu(e[i])||(t[i]=e[i])})}var KX=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function YX(e,t){var n=e&&xr(e,"collapsed")?e.collapsed:!Bt(e),i;return t&&(xr(t,"collapsed")||xr(t,"isExpanded"))?i=xr(t,"collapsed")?t.collapsed:!t.isExpanded:i=n,n!==i}function DD(e,t,n,i,r,o){function a(s,l,c){c=c||{};var u=l.type,d=s.businessObject;if(o0(d)&&u==="bpmn:SubProcess"&&YX(s,l))return i.toggleCollapse(s),s;var h=e.create(u),p={type:u,businessObject:h};p.di={},u==="bpmn:ExclusiveGateway"&&(p.di.isMarkerVisible=!0),WX(s.di,p.di,["fill","stroke","background-color","border-color","color"]);var m=Ow(d.$descriptor),v=Ow(h.$descriptor,!0),_=JX(m,v);be(h,Is(l,KX));var b=It(_,function(x){return x==="eventDefinitions"?CA(s,l.eventDefinitionType):x==="loopCharacteristics"?!Qi(h):xr(h,x)||x==="processRef"&&l.isExpanded===!1||x==="triggeredByEvent"?!1:x==="isForCompensation"?!Qi(h):!0});if(h=n.copyElement(d,h,b),l.eventDefinitionType&&(CA(h,l.eventDefinitionType)||(p.eventDefinitionType=l.eventDefinitionType,p.eventDefinitionAttrs=l.eventDefinitionAttrs)),F(d,"bpmn:Activity")){if(o0(d))p.isExpanded=Bt(s);else if(l&&xr(l,"isExpanded")){p.isExpanded=l.isExpanded;var E=t.getDefaultSize(h,{isExpanded:p.isExpanded});p.width=E.width,p.height=E.height,p.x=s.x-(p.width-s.width)/2,p.y=s.y-(p.height-s.height)/2}Bt(s)&&!F(d,"bpmn:Task")&&p.isExpanded&&(p.width=s.width,p.height=s.height)}if(o0(d)&&!o0(h)&&(c.moveChildren=!1),F(d,"bpmn:Participant")){l.isExpanded===!0?h.processRef=e.create("bpmn:Process"):c.moveChildren=!1;var w=_i(s);Ut(s).isHorizontal||(Ut(p).isHorizontal=w),p.width=w?s.width:t.getDefaultSize(p).width,p.height=w?t.getDefaultSize(p).height:s.height}return o.allowed("shape.resize",{shape:h})||(p.height=t.getDefaultSize(p).height,p.width=t.getDefaultSize(p).width),h.name=d.name,Ct(d,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&Ct(h,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(h.default=d.default),l.host&&!F(d,"bpmn:BoundaryEvent")&&F(h,"bpmn:BoundaryEvent")&&(p.host=l.host),(p.type==="bpmn:DataStoreReference"||p.type==="bpmn:DataObjectReference")&&(p.x=s.x+(s.width-p.width)/2),r.replaceElement(s,p,{...c,targetElement:l})}this.replaceElement=a}DD.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function o0(e){return F(e,"bpmn:SubProcess")}function CA(e,t){var n=Ge(e);return t&&n.get("eventDefinitions").some(function(i){return F(i,t)})}function JX(e,t){return e.filter(function(n){return t.includes(n)})}const LD={__depends__:[MD,VX,za],bpmnReplace:["type",DD]};var XX=250;function Iu(e){this._eventBus=e,this._tools=[],this._active=null}Iu.$inject=["eventBus"];Iu.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};Iu.prototype.isActive=function(e){return e&&this._active===e};Iu.prototype.length=function(e){return this._tools.length};Iu.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};Iu.prototype.bindEvents=function(e,t){var n=this._eventBus,i=[];n.on(t.tool+".init",function(r){var o=r.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),ue(t,function(r){i.push(r+".ended"),i.push(r+".canceled")}),n.on(i,XX,function(r){this._active&&(ZX(r)||this.setActive(null))},this)};function ZX(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Xl(t,'.group[data-group="tools"]')}const d_={__depends__:[Us],__init__:["toolManager"],toolManager:["type",Iu]};function QX(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function eZ(e,t){var n=[];return ue(e.concat(t),function(i){var r=i.incoming,o=i.outgoing;ue(r.concat(o),function(a){var s=a.source,l=a.target;(Ah(e,s)||Ah(e,l)||Ah(t,s)||Ah(t,l))&&(Ah(n,a)||n.push(a))})}),n}function Ah(e,t){return e.indexOf(t)!==-1}function tZ(e,t,n){var i=e.x,r=e.y,o=e.width,a=e.height,s=n.x,l=n.y;switch(t){case"n":return{x:i,y:r+l,width:o,height:a-l};case"s":return{x:i,y:r,width:o,height:a+l};case"w":return{x:i+s,y:r,width:o-s,height:a};case"e":return{x:i,y:r,width:o+s,height:a};default:throw new Error("unknown direction: "+t)}}var Pb=Math.abs,nZ=Math.round,fs={x:"width",y:"height"},OD="crosshair",gl={n:"top",w:"left",s:"bottom",e:"right"},iZ=1500,a0={n:"s",w:"e",s:"n",e:"w"},s0=20;function jo(e,t,n,i,r,o,a){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=o,this._mouse=a;var s=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(l){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(l.originalEvent)})}),n.on("spaceTool.move",iZ,function(l){var c=l.context,u=c.initialized;u||(u=c.initialized=s.init(l,c)),u&&MA(l)}),n.on("spaceTool.end",function(l){var c=l.context,u=c.axis,d=c.direction,h=c.movingShapes,p=c.resizingShapes,m=c.start;if(c.initialized){MA(l);var v={x:0,y:0};v[u]=nZ(l["d"+u]),s.makeSpace(h,p,v,d,m),n.once("spaceTool.ended",function(_){s.activateSelection(_.originalEvent,!0,!0)})}})}jo.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];jo.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:OD,data:{context:{reactivate:n}},trapClick:!1})};jo.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:OD,data:{context:{}}})};jo.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)};jo.prototype.init=function(e,t){var n=Pb(e.dx)>Pb(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(Pb(i)<5)return!1;i<0&&(i*=-1),Bf(e)&&(i*=-1);var o=QX(n,i),a=this._canvas.getRootElement();!qv(e)&&e.hover&&(a=e.hover);var s=[...Zf(a,!0),...a.attachers||[]],l=this.calculateAdjustments(s,n,i,r),c=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:l.resizingShapes,start:r}),u=rZ(l,n,o,r,c);return be(t,l,{axis:n,direction:o,spaceToolConstraints:u,start:r}),Vy("resize-"+(n==="x"?"ew":"ns")),!0};jo.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,o=[],a=[],s=[],l=[];function c(h){o.includes(h)||o.push(h);var p=h.label;p&&!o.includes(p)&&o.push(p)}function u(h){a.includes(h)||a.push(h)}ue(e,function(h){if(!(!h.parent||qt(h))){if(on(h)){l.push(h);return}var p=h[t],m=p+h[fs[t]];if(oZ(h)&&(n>0&&ht(h)[t]>i||n<0&&ht(h)[t]<i)){s.push(h);return}if(n>0&&p>i||n<0&&m<i){c(h);return}if(p<i&&m>i&&r.allowed("shape.resize",{shape:h})){u(h);return}}}),ue(o,function(h){var p=h.attachers;p&&ue(p,function(m){c(m)})});var d=o.concat(a);return ue(s,function(h){var p=h.host;nu(d,p)&&c(h)}),d=o.concat(a),ue(l,function(h){var p=h.source,m=h.target,v=h.label;nu(d,p)&&nu(d,m)&&v&&c(v)}),{movingShapes:o,resizingShapes:a}};jo.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};jo.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function RA(e){return{top:e.top-s0,right:e.right+s0,bottom:e.bottom+s0,left:e.left-s0}}function MA(e){var t=e.context,n=t.spaceToolConstraints;if(n){var i,r;pt(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),pt(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),pt(n.top)&&(r=Math.max(e.y,n.top),e.dy=e.dy+r-e.y,e.y=r),pt(n.bottom)&&(r=Math.min(e.y,n.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function rZ(e,t,n,i,r){var o=e.movingShapes,a=e.resizingShapes;if(a.length){var s={},l,c;return ue(a,function(u){var d=u.attachers,h=u.children,p=at(u),m=It(h,function(D){return!on(D)&&!qt(D)&&!nu(o,D)&&!nu(a,D)}),v=It(h,function(D){return!on(D)&&!qt(D)&&nu(o,D)}),_,b,E,w=[],x=[],M,B,H,R;m.length&&(b=RA(at(yi(m))),_=i-p[gl[n]]+b[gl[n]],n==="n"?s.bottom=c=pt(c)?Math.min(c,_):_:n==="w"?s.right=c=pt(c)?Math.min(c,_):_:n==="s"?s.top=l=pt(l)?Math.max(l,_):_:n==="e"&&(s.left=l=pt(l)?Math.max(l,_):_)),v.length&&(E=RA(at(yi(v))),_=i-E[gl[a0[n]]]+p[gl[a0[n]]],n==="n"?s.bottom=c=pt(c)?Math.min(c,_):_:n==="w"?s.right=c=pt(c)?Math.min(c,_):_:n==="s"?s.top=l=pt(l)?Math.max(l,_):_:n==="e"&&(s.left=l=pt(l)?Math.max(l,_):_)),d&&d.length&&(d.forEach(function(D){nu(o,D)?w.push(D):x.push(D)}),w.length&&(M=at(yi(w.map(ht))),B=p[gl[a0[n]]]-(M[gl[a0[n]]]-i)),x.length&&(H=at(yi(x.map(ht))),R=H[gl[n]]-(p[gl[n]]-i)),n==="n"?(_=Math.min(B||1/0,R||1/0),s.bottom=c=pt(c)?Math.min(c,_):_):n==="w"?(_=Math.min(B||1/0,R||1/0),s.right=c=pt(c)?Math.min(c,_):_):n==="s"?(_=Math.max(B||-1/0,R||-1/0),s.top=l=pt(l)?Math.max(l,_):_):n==="e"&&(_=Math.max(B||-1/0,R||-1/0),s.left=l=pt(l)?Math.max(l,_):_));var O=r&&r[u.id];O&&(n==="n"?(_=i+u[fs[t]]-O[fs[t]],s.bottom=c=pt(c)?Math.min(c,_):_):n==="w"?(_=i+u[fs[t]]-O[fs[t]],s.right=c=pt(c)?Math.min(c,_):_):n==="s"?(_=i-u[fs[t]]+O[fs[t]],s.top=l=pt(l)?Math.max(l,_):_):n==="e"&&(_=i-u[fs[t]]+O[fs[t]],s.left=l=pt(l)?Math.max(l,_):_))}),s}}function nu(e,t){return e.indexOf(t)!==-1}function oZ(e){return!!e.host}var Ab="djs-dragging",IA="djs-resizing",aZ=250,l0=Math.max;function BD(e,t,n,i,r){function o(a,s){ue(a,function(l){r.addDragger(l,s),n.addMarker(l,Ab)})}e.on("spaceTool.selection.start",function(a){var s=n.getLayer("space"),l=a.context,c={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},u=Qe("g");He(u,i.cls("djs-crosshair-group",["no-events"])),ft(s,u);var d=Qe("path");He(d,"d",c.x),Gt(d).add("djs-crosshair"),ft(u,d);var h=Qe("path");He(h,"d",c.y),Gt(h).add("djs-crosshair"),ft(u,h),l.crosshairGroup=u}),e.on("spaceTool.selection.move",function(a){var s=a.context.crosshairGroup;Oi(s,a.x,a.y)}),e.on("spaceTool.selection.cleanup",function(a){var s=a.context,l=s.crosshairGroup;l&&ci(l)}),e.on("spaceTool.move",aZ,function(a){var s=a.context,l=s.line,c=s.axis,u=s.movingShapes,d=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var h=n.getLayer("space");l=Qe("path"),He(l,"d","M0,0 L0,0"),Gt(l).add("djs-crosshair"),ft(h,l),s.line=l;var p=Qe("g");He(p,i.cls("djs-drag-group",["no-events"])),ft(n.getActiveLayer(),p),o(u,p);var m=s.movingConnections=t.filter(function(x){var M=!1;ue(u,function(O){ue(O.outgoing,function(D){x===D&&(M=!0)})});var B=!1;ue(u,function(O){ue(O.incoming,function(D){x===D&&(B=!0)})});var H=!1;ue(d,function(O){ue(O.outgoing,function(D){x===D&&(H=!0)})});var R=!1;return ue(d,function(O){ue(O.incoming,function(D){x===D&&(R=!0)})}),on(x)&&(M||H)&&(B||R)});o(m,p),s.dragGroup=p}if(!s.frameGroup){var v=Qe("g");He(v,i.cls("djs-frame-group",["no-events"])),ft(n.getActiveLayer(),v);var _=[];ue(d,function(x){var M=r.addFrame(x,v),B=M.getBBox();_.push({element:M,initialBounds:B}),n.addMarker(x,IA)}),s.frameGroup=v,s.frames=_}var b={x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y};He(l,{d:b[c]});var E={x:"y",y:"x"},w={x:a.dx,y:a.dy};w[E[s.axis]]=0,Oi(s.dragGroup,w.x,w.y),ue(s.frames,function(x){var M=x.element,B=x.initialBounds,H,R;s.direction==="e"?He(M,{width:l0(B.width+w.x,5)}):(H=l0(B.width-w.x,5),He(M,{width:H,x:B.x+B.width-H})),s.direction==="s"?He(M,{height:l0(B.height+w.y,5)}):(R=l0(B.height-w.y,5),He(M,{height:R,y:B.y+B.height-R}))})}}),e.on("spaceTool.cleanup",function(a){var s=a.context,l=s.movingShapes,c=s.movingConnections,u=s.resizingShapes,d=s.line,h=s.dragGroup,p=s.frameGroup;ue(l,function(m){n.removeMarker(m,Ab)}),ue(c,function(m){n.removeMarker(m,Ab)}),h&&(ci(d),ci(h)),ue(u,function(m){n.removeMarker(m,IA)}),p&&ci(p)})}BD.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const sZ={__init__:["spaceToolPreview"],__depends__:[Us,Va,d_,Tp,um],spaceTool:["type",jo],spaceToolPreview:["type",BD]};function p_(e){e.invoke(jo,this)}p_.$inject=["injector"];We(p_,jo);p_.prototype.calculateAdjustments=function(e,t,n,i){var r=jo.prototype.calculateAdjustments.call(this,e,t,n,i);return r.resizingShapes=r.resizingShapes.filter(function(o){return!(F(o,"bpmn:TextAnnotation")||lZ(o)&&(t==="y"&&_i(o)||t==="x"&&!_i(o)))}),r};function lZ(e){return F(e,"bpmn:Participant")&&!Ge(e).processRef}const FD={__depends__:[sZ],spaceTool:["type",p_]};function Tn(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Tn.$inject=["eventBus","injector"];Tn.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};Tn.prototype.canExecute=function(e,t){const n={command:e,context:t},i=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r};Tn.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};Tn.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Tn.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Tn.prototype.register=function(e,t){this._setHandler(e,t)};Tn.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};Tn.prototype.canUndo=function(){return!!this._getUndoAction()};Tn.prototype.canRedo=function(){return!!this._getRedoAction()};Tn.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Tn.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Tn.prototype._internalUndo=function(e){const t=e.command,n=e.context,i=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),i.revert&&this._markDirty(i.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};Tn.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const i=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const o of i)if(r=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return r};Tn.prototype._createId=function(){return this._uid++};Tn.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};Tn.prototype._internalExecute=function(e,t){const n=e.command,i=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(i),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(i)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(i),this._fire(n,"postExecuted",e)),this._popAction()};Tn.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)};Tn.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:IM("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};Tn.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=bt(e)?e:[e],t.dirty=t.dirty.concat(e))};Tn.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};Tn.prototype._revertedAction=function(e){this._stackIdx--};Tn.prototype._getHandler=function(e){return this._handlerMap[e]};Tn.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const cZ={commandStack:["type",Tn]};function jl(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var uZ=250,DA=1400;function PE(e,t,n){je.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",DA,function(r){var o=r.context,a=o.shapes,s=o.validatedShapes;o.shapes=LA(a),o.validatedShapes=LA(s)}),i&&t.on("shape.move.start",uZ,function(r){var o=r.context,a=o.shapes,s=[];ue(a,function(l){ue(l.labels,function(c){!c.hidden&&o.shapes.indexOf(c)===-1&&s.push(c),l.labelTarget&&s.push(l)})}),ue(s,function(l){i.makeDraggable(o,l,!0)})}),this.preExecuted("elements.move",DA,function(r){var o=r.context,a=o.closure,s=a.enclosedElements,l=[];ue(s,function(c){ue(c.labels,function(u){s[u.id]||l.push(u)})}),a.addAll(l)}),this.preExecute(["connection.delete","shape.delete"],function(r){var o=r.context,a=o.connection||o.shape;jl(a.labels,function(s){n.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(r){var o=r.context,a=o.shape,s=a.labelTarget;s&&(o.labelTargetIndex=i5(s.labels,a),o.labelTarget=s,a.labelTarget=null)}),this.revert("shape.delete",function(r){var o=r.context,a=o.shape,s=o.labelTarget,l=o.labelTargetIndex;s&&(di(s.labels,a,l),a.labelTarget=s)})}We(PE,je);PE.$inject=["injector","eventBus","modeling"];function LA(e){return It(e,function(t){return e.indexOf(t.labelTarget)===-1})}const dZ={__init__:["labelSupport"],labelSupport:["type",PE]};var pZ=251,OA=1401,BA="attach-ok";function AE(e,t,n,i,r){je.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",OA,function(a){var s=a.context,l=s.shapes,c=s.validatedShapes;s.shapes=hZ(l),s.validatedShapes=fZ(c)}),o&&t.on("shape.move.start",pZ,function(a){var s=a.context,l=s.shapes,c=Bw(l);ue(c,function(u){o.makeDraggable(s,u,!0),ue(u.labels,function(d){o.makeDraggable(s,d,!0)})})}),o&&t.on("shape.move.start",function(a){var s=a.context,l=s.shapes;if(l.length===1){var c=l[0],u=c.host;u&&(n.addMarker(u,BA),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(u,BA)}))}}),this.preExecuted("elements.move",OA,function(a){var s=a.context,l=s.closure,c=s.shapes,u=Bw(c);ue(u,function(d){l.add(d,l.topLevel[d.host.id])})}),this.postExecuted("elements.move",function(a){var s=a.context,l=s.shapes,c=s.newHost,u;c&&l.length!==1||(c?u=l:u=It(l,function(d){var h=d.host;return mZ(d)&&!gZ(l,h)}),ue(u,function(d){r.updateAttachment(d,c)}))}),this.postExecuted("elements.move",function(a){var s=a.context.shapes;ue(s,function(l){ue(l.attachers,function(c){ue(c.outgoing.slice(),function(u){var d=i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});d||r.removeConnection(u)}),ue(c.incoming.slice(),function(u){var d=i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});d||r.removeConnection(u)})})})}),this.postExecute("shape.create",function(a){var s=a.context,l=s.shape,c=s.host;c&&r.updateAttachment(l,c)}),this.postExecute("shape.replace",function(a){var s=a.context,l=s.oldShape,c=s.newShape;jl(l.attachers,function(u){var d=i.allowed("elements.move",{target:c,shapes:[u]});d==="attach"?r.updateAttachment(u,c):r.removeShape(u)}),c.attachers.length&&ue(c.attachers,function(u){var d=pA(u,l,c);r.moveShape(u,d,u.parent)})}),this.postExecute("shape.resize",function(a){var s=a.context,l=s.shape,c=s.oldBounds,u=s.newBounds,d=l.attachers,h=s.hints||{};h.attachSupport!==!1&&ue(d,function(p){var m=pA(p,c,u);r.moveShape(p,m,p.parent),ue(p.labels,function(v){r.moveShape(v,m,v.parent)})})}),this.preExecute("shape.delete",function(a){var s=a.context.shape;jl(s.attachers,function(l){r.removeShape(l)}),s.host&&r.updateAttachment(s,null)})}We(AE,je);AE.$inject=["injector","eventBus","canvas","rules","modeling"];function Bw(e){return Xx(Zi(e,function(t){return t.attachers||[]}))}function hZ(e){var t=Bw(e);return QU("id",e,t)}function fZ(e){var t=yp(e,"id");return It(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function mZ(e){return!!e.host}function gZ(e,t){return e.indexOf(t)!==-1}const vZ={__depends__:[Va],__init__:["attachSupport"],attachSupport:["type",AE]};function $o(e){this._model=e}$o.$inject=["moddle"];$o.prototype._needsId=function(e){return Ct(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};$o.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;F(e,"bpmn:Activity")?t="Activity":F(e,"bpmn:Event")?t="Event":F(e,"bpmn:Gateway")?t="Gateway":Ct(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};$o.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};$o.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};$o.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",be({bpmnElement:e,bounds:this.createDiBounds()},t))};$o.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};$o.prototype.createDiWaypoints=function(e){var t=this;return Zi(e,function(n){return t.createDiWaypoint(n)})};$o.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Is(e,["x","y"]))};$o.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",be({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};$o.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",be({bpmnElement:e},t))};function Gr(e,t,n){je.call(this,e),this._bpmnFactory=t;var i=this;function r(p){var m=p.context,v=m.hints||{},_;!m.cropped&&v.createElementsBehavior!==!1&&(_=m.connection,_.waypoints=n.getCroppedWaypoints(_),m.cropped=!0)}this.executed(["connection.layout","connection.create"],r),this.reverted(["connection.layout"],function(p){delete p.context.cropped});function o(p){var m=p.context;i.updateParent(m.shape||m.connection,m.oldParent)}function a(p){var m=p.context,v=m.shape||m.connection,_=m.parent||m.newParent;i.updateParent(v,_)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Tr(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Tr(a));function s(p){var m=p.context,v=m.oldRoot,_=v.children;ue(_,function(b){F(b,"bpmn:BaseElement")&&i.updateParent(b)})}this.executed(["canvas.updateRoot"],s),this.reverted(["canvas.updateRoot"],s);function l(p){var m=p.context.shape;F(m,"bpmn:BaseElement")&&i.updateBounds(m)}this.executed(["shape.move","shape.create","shape.resize"],Tr(function(p){p.context.shape.type!=="label"&&l(p)})),this.reverted(["shape.move","shape.create","shape.resize"],Tr(function(p){p.context.shape.type!=="label"&&l(p)})),e.on("shape.changed",function(p){p.element.type==="label"&&l({context:{shape:p.element}})});function c(p){i.updateConnection(p.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],Tr(c)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],Tr(c));function u(p){i.updateConnectionWaypoints(p.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],Tr(u)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],Tr(u)),this.executed("connection.reconnect",Tr(function(p){var m=p.context,v=m.connection,_=m.oldSource,b=m.newSource,E=Ge(v),w=Ge(_),x=Ge(b);E.conditionExpression&&!Ct(x,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(m.oldConditionExpression=E.conditionExpression,delete E.conditionExpression),_!==b&&w.default===E&&(m.oldDefault=w.default,delete w.default)})),this.reverted("connection.reconnect",Tr(function(p){var m=p.context,v=m.connection,_=m.oldSource,b=m.newSource,E=Ge(v),w=Ge(_),x=Ge(b);m.oldConditionExpression&&(E.conditionExpression=m.oldConditionExpression),m.oldDefault&&(w.default=m.oldDefault,delete x.default)}));function d(p){i.updateAttachment(p.context)}this.executed(["element.updateAttachment"],Tr(d)),this.reverted(["element.updateAttachment"],Tr(d)),this.executed("element.updateLabel",Tr(h)),this.reverted("element.updateLabel",Tr(h));function h(p){const{element:m}=p.context,v=ro(m),_=Ut(m),b=_&&_.get("label");_u(m)||q0(m)||(v&&!b?_.set("label",t.create("bpmndi:BPMNLabel")):!v&&b&&_.set("label",void 0))}}We(Gr,je);Gr.$inject=["eventBus","bpmnFactory","connectionDocking"];Gr.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject};Gr.prototype.updateParent=function(e,t){if(!qt(e)&&!(F(e,"bpmn:DataStoreReference")&&e.parent&&F(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,r=Ut(e),o=n&&n.businessObject,a=Ut(n);F(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,o,t&&t.businessObject),F(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),F(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(i,o),F(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,o),this.updateDiParent(r,a)}};Gr.prototype.updateBounds=function(e){var t=Ut(e),n=_Z(e);if(n){var i=ca(n,t.get("bounds"));be(n,{x:e.x+i.x,y:e.y+i.y})}var r=qt(e)?this._getLabel(t):t,o=r.bounds;o||(o=this._bpmnFactory.createDiBounds(),r.set("bounds",o)),be(o,{x:e.x,y:e.y,width:e.width,height:e.height})};Gr.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var i,r;F(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),Yn(i,e)),F(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),di(r,e))}};Gr.prototype.updateDiConnection=function(e,t,n){var i=Ut(e),r=Ut(t),o=Ut(n);i.sourceElement&&i.sourceElement.bpmnElement!==Ge(t)&&(i.sourceElement=t&&r),i.targetElement&&i.targetElement.bpmnElement!==Ge(n)&&(i.targetElement=n&&o)};Gr.prototype.updateDiParent=function(e,t){if(t&&!F(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(Yn(n,e),e.$parent=null)}};function yZ(e){for(;e&&!F(e,"bpmn:Definitions");)e=e.$parent;return e}Gr.prototype.getLaneSet=function(e){var t,n;return F(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(F(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};Gr.prototype.updateSemanticParent=function(e,t,n){var i;if(e.$parent!==t&&!((F(e,"bpmn:DataInput")||F(e,"bpmn:DataOutput"))&&(F(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(F(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(F(e,"bpmn:FlowElement")){if(t){if(F(t,"bpmn:Participant"))t=t.processRef;else if(F(t,"bpmn:Lane"))do t=t.$parent.$parent;while(F(t,"bpmn:Lane"))}i="flowElements"}else if(F(e,"bpmn:Artifact")){for(;t&&!F(t,"bpmn:Process")&&!F(t,"bpmn:SubProcess")&&!F(t,"bpmn:Collaboration");)if(F(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;i="artifacts"}else if(F(e,"bpmn:MessageFlow"))i="messageFlows";else if(F(e,"bpmn:Participant")){i="participants";var r=e.processRef,o;r&&(o=yZ(e.$parent||t),e.$parent&&(Yn(o.get("rootElements"),r),r.$parent=null),t&&(di(o.get("rootElements"),r),r.$parent=o))}else F(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":F(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var a;if(e.$parent&&(a=e.$parent.get(i),Yn(a,e)),t?(a=t.get(i),a.push(e),e.$parent=t):e.$parent=null,n){var s=n.get(i);Yn(a,e),t&&(s||(s=[],t.set(i,s)),s.push(e))}}};Gr.prototype.updateConnectionWaypoints=function(e){var t=Ut(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};Gr.prototype.updateConnection=function(e){var t=e.connection,n=Ge(t),i=t.source,r=Ge(i),o=t.target,a=Ge(t.target),s;if(F(n,"bpmn:DataAssociation"))F(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=r,s=e.parent||e.newParent||a,this.updateSemanticParent(n,a,s)):F(n,"bpmn:DataOutputAssociation")&&(s=e.parent||e.newParent||r,this.updateSemanticParent(n,r,s),n.targetRef=a);else{var l=F(n,"bpmn:SequenceFlow");n.sourceRef!==r&&(l&&(Yn(n.sourceRef&&n.sourceRef.get("outgoing"),n),r&&r.get("outgoing")&&r.get("outgoing").push(n)),n.sourceRef=r),n.targetRef!==a&&(l&&(Yn(n.targetRef&&n.targetRef.get("incoming"),n),a&&a.get("incoming")&&a.get("incoming").push(n)),n.targetRef=a)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,i,o)};Gr.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function Tr(e){return function(t){var n=t.context,i=n.shape||n.connection||n.element;F(i,"bpmn:BaseElement")&&e(t)}}function _Z(e){if(F(e,"bpmn:Activity")){var t=Ut(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function sc(e,t){Fs.call(this),this._bpmnFactory=e,this._moddle=t}We(sc,Fs);sc.$inject=["bpmnFactory","moddle"];sc.prototype._baseCreate=Fs.prototype.create;sc.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,be({type:"label",di:n},Lf,t))}return this.createElement(e,t)};sc.prototype.createElement=function(e,t){t=be({},t||{});var n,i=t.businessObject,r=t.di;if(!i){if(!t.type)throw new Error("no shape type specified");i=this._bpmnFactory.create(t.type),S6(i)}if(!wZ(r)){var o=be({},r||{},{id:i.id+"_di"});e==="root"?r=this._bpmnFactory.createDiPlane(i,o):e==="connection"?r=this._bpmnFactory.createDiEdge(i,o):r=this._bpmnFactory.createDiShape(i,o)}F(i,"bpmn:Group")&&(t=be({isFrame:!0},t)),t=bZ(i,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=Fw(r,t,"isExpanded")),Ct(i,["bpmn:Lane","bpmn:Participant"])&&(t=Fw(r,t,"isHorizontal")),F(i,"bpmn:SubProcess")&&(t.collapsed=!Bt(i,r)),F(i,"bpmn:ExclusiveGateway")&&(xr(r,"isMarkerVisible")?r.isMarkerVisible===void 0&&(r.isMarkerVisible=!1):r.isMarkerVisible=!0),Ai(t.triggeredByEvent)&&(i.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Ai(t.cancelActivity)&&(i.cancelActivity=t.cancelActivity,delete t.cancelActivity);var a,s;return t.eventDefinitionType&&(a=i.get("eventDefinitions")||[],s=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(s.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(s),s.$parent=i,i.eventDefinitions=a,delete t.eventDefinitionType),n=this.getDefaultSize(i,r),t=be({id:i.id},n,t,{businessObject:i,di:r}),this._baseCreate(e,t)};sc.prototype.getDefaultSize=function(e,t){var n=Ge(e);if(t=t||Ut(e),F(n,"bpmn:SubProcess"))return Bt(n,t)?{width:350,height:200}:{width:100,height:80};if(F(n,"bpmn:Task"))return{width:100,height:80};if(F(n,"bpmn:Gateway"))return{width:50,height:50};if(F(n,"bpmn:Event"))return{width:36,height:36};if(F(n,"bpmn:Participant")){var i=t.isHorizontal===void 0||t.isHorizontal===!0;return Bt(n,t)?i?{width:600,height:250}:{width:250,height:600}:i?{width:400,height:60}:{width:60,height:400}}return F(n,"bpmn:Lane")?{width:400,height:100}:F(n,"bpmn:DataObjectReference")?{width:36,height:50}:F(n,"bpmn:DataStoreReference")?{width:50,height:50}:F(n,"bpmn:TextAnnotation")?{width:100,height:30}:F(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};sc.prototype.createParticipantShape=function(e){return Ci(e)||(e={isExpanded:e}),e=be({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function bZ(e,t,n){return ue(n,function(i){t=Fw(e,t,i)}),t}function Fw(e,t,n){return t[n]===void 0?t:(e[n]=t[n],Lo(t,[n]))}function wZ(e){return Ct(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function h_(e,t){this._modeling=e,this._canvas=t}h_.$inject=["modeling","canvas"];h_.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;ue(n,function(r){var o={x:0,y:0};Ai(i.left)?o.x=i.left-r.x:Ai(i.right)?o.x=i.right-r.width-r.x:Ai(i.center)?o.x=i.center-Math.round(r.width/2)-r.x:Ai(i.top)?o.y=i.top-r.y:Ai(i.bottom)?o.y=i.bottom-r.height-r.y:Ai(i.middle)&&(o.y=i.middle-Math.round(r.height/2)-r.y),t.moveElements([r],o,r.parent)})};h_.prototype.postExecute=function(e){};function f_(e){this._modeling=e}f_.$inject=["modeling"];f_.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,r=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:r.attach}),e.shape=i};f_.prototype.postExecute=function(e){var t=e.hints||{};xZ(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function xZ(e,t){return Jl(e.outgoing,function(n){return n.target===t})}function m_(e,t){this._canvas=e,this._layouter=t}m_.$inject=["canvas","layouter"];m_.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,o=e.parentIndex,a=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,r,o),t};m_.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var c0=Math.round;function TE(e){this._modeling=e}TE.$inject=["modeling"];TE.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,r=e.position,o=e.hints,a=this._modeling;ue(t,function(d){pt(d.x)||(d.x=0),pt(d.y)||(d.y=0)});var s=It(t,function(d){return!d.hidden}),l=yi(s);ue(t,function(d){on(d)&&(d.waypoints=Zi(d.waypoints,function(h){return{x:c0(h.x-l.x-l.width/2+r.x),y:c0(h.y-l.y-l.height/2+r.y)}})),be(d,{x:c0(d.x-l.x-l.width/2+r.x),y:c0(d.y-l.y-l.height/2+r.y)})});var c=Iy(t),u={};ue(t,function(d){if(on(d)){u[d.id]=pt(i)?a.createConnection(u[d.source.id],u[d.target.id],i,d,d.parent||n,o):a.createConnection(u[d.source.id],u[d.target.id],d,d.parent||n,o);return}var h=be({},o);c.indexOf(d)===-1&&(h.autoResize=!1),qt(d)&&(h=Lo(h,["attach"])),u[d.id]=pt(i)?a.createShape(d,Is(d,["x","y","width","height"]),d.parent||n,i,h):a.createShape(d,Is(d,["x","y","width","height"]),d.parent||n,h)}),e.elements=Zx(u)};var FA=Math.round;function lc(e){this._canvas=e}lc.$inject=["canvas"];lc.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?be(t,n):be(t,{x:n.x-FA(t.width/2),y:n.y-FA(t.height/2)}),this._canvas.addShape(t,i,r),t};lc.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function pm(e){lc.call(this,e)}We(pm,lc);pm.$inject=["canvas"];var EZ=lc.prototype.execute;pm.prototype.execute=function(e){var t=e.shape;return NZ(t),t.labelTarget=e.labelTarget,EZ.call(this,e)};var SZ=lc.prototype.revert;pm.prototype.revert=function(e){return e.shape.labelTarget=null,SZ.call(this,e)};function NZ(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function hm(e,t){this._canvas=e,this._modeling=t}hm.$inject=["canvas","modeling"];hm.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;jl(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),jl(n.outgoing,function(i){t.removeConnection(i,{nested:!0})})};hm.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=i5(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};hm.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,di(n.children,t,i),this._canvas.addConnection(t,n),t};function CE(e,t){this._modeling=e,this._elementRegistry=t}CE.$inject=["modeling","elementRegistry"];CE.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;ue(i,function(r){n.get(r.id)&&(r.waypoints?t.removeConnection(r):t.removeShape(r))})};function fm(e,t){this._canvas=e,this._modeling=t}fm.$inject=["canvas","modeling"];fm.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;jl(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),jl(n.outgoing,function(i){t.removeConnection(i,{nested:!0})}),jl(n.children,function(i){on(i)?t.removeConnection(i,{nested:!0}):t.removeShape(i,{nested:!0})})};fm.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=i5(i.children,n),t.removeShape(n),n};fm.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return di(i.children,n,r),t.addShape(n,i),n};function g_(e){this._modeling=e}g_.$inject=["modeling"];var jA={x:"y",y:"x"};g_.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function o(_,b){_.range.min=Math.min(b[i],_.range.min),_.range.max=Math.max(b[i]+b[r],_.range.max)}function a(_){return _[i]+_[r]/2}function s(_){return _.length-1}function l(_){return _.max-_.min}function c(_,b){var E={y:0};E[i]=_-a(b),E[i]&&(E[jA[i]]=0,t.moveElements([b],E,b.parent))}var u=n[0],d=s(n),h=n[d],p,m,v=0;ue(n,function(_,b){var E,w,x;if(_.elements.length<2){b&&b!==n.length-1&&(o(_,_.elements[0]),v+=l(_.range));return}E=Ga(_.elements,i),w=E[0],b===d&&(w=E[s(E)]),x=a(w),_.range=null,ue(E,function(M){if(c(x,M),_.range===null){_.range={min:M[i],max:M[i]+M[r]};return}o(_,M)}),b&&b!==n.length-1&&(v+=l(_.range))}),m=Math.abs(h.range.min-u.range.max),p=Math.round((m-v)/(n.length-1)),!(p<n.length-1)&&ue(n,function(_,b){var E={},w;_===u||_===h||(w=n[b-1],_.range.max=0,ue(_.elements,function(x,M){E[jA[i]]=0,E[i]=w.range.max-x[i]+p,_.range.min!==x[i]&&(E[i]+=x[i]-_.range.min),E[i]&&t.moveElements([x],E,x.parent),_.range.max=Math.max(x[i]+x[r],M?_.range.max:0)}))})};g_.prototype.postExecute=function(e){};function v_(e,t){this._layouter=e,this._canvas=t}v_.$inject=["layouter","canvas"];v_.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return be(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};v_.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function RE(){}RE.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=Yn(o.children,t),di(i.children,t,r),t.parent=i,ue(t.waypoints,function(a){a.x+=n.x,a.y+=n.y,a.original&&(a.original.x+=n.x,a.original.y+=n.y)}),t};RE.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,o=e.delta;return Yn(n.children,t),di(i.children,t,r),t.parent=i,ue(t.waypoints,function(a){a.x-=o.x,a.y-=o.y,a.original&&(a.original.x-=o.x,a.original.y-=o.y)}),t};function ME(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}ME.prototype.add=function(e,t){return this.addAll([e],t)};ME.prototype.addAll=function(e,t){var n=qq(e,!!t,this);return be(this,n),this};function mm(e){this._modeling=e}mm.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};mm.prototype.moveClosure=function(e,t,n,i,r){var o=this._modeling,a=e.allShapes,s=e.allConnections,l=e.enclosedConnections,c=e.topLevel,u=!1;r&&r.parent===n&&(u=!0),ue(a,function(d){o.moveShape(d,t,c[d.id]&&!u&&n,{recurse:!1,layout:!1})}),ue(s,function(d){var h=!!a[d.source.id],p=!!a[d.target.id];l[d.id]&&h&&p?o.moveConnection(d,t,c[d.id]&&!u&&n):o.layoutConnection(d,{connectionStart:h&&nE(d,d.source,t),connectionEnd:p&&iE(d,d.target,t)})})};mm.prototype.getClosure=function(e){return new ME().addAll(e,!0)};function y_(e){this._helper=new mm(e)}y_.$inject=["modeling"];y_.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};y_.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function Du(e){this._modeling=e,this._helper=new mm(e)}Du.$inject=["modeling"];Du.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldBounds=Is(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=Yn(o.children,t),di(i.children,t,r),be(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t};Du.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;i.layout!==!1&&(ue(t.incoming,function(o){r.layoutConnection(o,{connectionEnd:iE(o,t,n)})}),ue(t.outgoing,function(o){r.layoutConnection(o,{connectionStart:nE(o,t,n)})})),i.recurse!==!1&&this.moveChildren(e)};Du.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return di(n.children,t,i),be(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t};Du.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};Du.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function gm(e){this._modeling=e}gm.$inject=["modeling"];gm.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return bt(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i};gm.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,o=e.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(n&&(!i||o.docking==="source")&&(a.connectionStart=a.connectionStart||$A(bt(r)?r[0]:r)),i&&(!n||o.docking==="target")&&(a.connectionEnd=a.connectionEnd||$A(bt(r)?r[r.length-1]:r)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,a))};gm.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),i&&(r.waypoints=i),r};function $A(e){return e.original||e}function zs(e,t){this._modeling=e,this._rules=t}zs.$inject=["modeling","rules"];zs.prototype.preExecute=function(e){var t=this,n=this._modeling,i=this._rules,r=e.oldShape,o=e.newData,a=e.hints||{},s;function l(m,v,_){return i.allowed("connection.reconnect",{connection:_,source:m,target:v})}var c={x:o.x,y:o.y},u={x:r.x,y:r.y,width:r.width,height:r.height};s=e.newShape=e.newShape||t.createShape(o,c,r.parent,a),r.host&&n.updateAttachment(s,r.host);var d;a.moveChildren!==!1&&(d=r.children.slice(),n.moveElements(d,{x:0,y:0},s,a));var h=r.incoming.slice(),p=r.outgoing.slice();ue(h,function(m){var v=m.source,_=l(v,s,m);_&&t.reconnectEnd(m,s,o_(m,s,u),a)}),ue(p,function(m){var v=m.target,_=l(s,v,m);_&&t.reconnectStart(m,s,r_(m,s,u),a)})};zs.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};zs.prototype.execute=function(e){};zs.prototype.revert=function(e){};zs.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)};zs.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)};zs.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)};function vm(e){this._modeling=e}vm.$inject=["modeling"];vm.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},be(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};vm.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,r=e.hints||{};r.layout!==!1&&(ue(n.incoming,function(o){t.layoutConnection(o,{connectionEnd:o_(o,n,i)})}),ue(n.outgoing,function(o){t.layoutConnection(o,{connectionStart:r_(o,n,i)})}))};vm.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return be(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function cc(e){this._modeling=e}cc.$inject=["modeling"];cc.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,o=e.start,a={};this.moveShapes(i,t),ue(r,function(s){a[s.id]=PZ(s)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(eZ(i,r),t,n,o,i,r,a)};cc.prototype.execute=function(){};cc.prototype.revert=function(){};cc.prototype.moveShapes=function(e,t){var n=this;ue(e,function(i){n._modeling.moveShape(i,t,null,{autoResize:!1,layout:!1,recurse:!1})})};cc.prototype.resizeShapes=function(e,t,n){var i=this;ue(e,function(r){var o=tZ(r,n,t);i._modeling.resizeShape(r,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})};cc.prototype.updateConnectionWaypoints=function(e,t,n,i,r,o,a){var s=this,l=r.concat(o);ue(e,function(c){var u=c.source,d=c.target,h=kZ(c),p=jD(n),m={};vl(l,u)&&vl(l,d)?(h=Zi(h,function(v){return UA(v,i,n)&&(v[p]=v[p]+t[p]),v.original&&UA(v.original,i,n)&&(v.original[p]=v.original[p]+t[p]),v}),s._modeling.updateWaypoints(c,h,{labelBehavior:!1})):(vl(l,u)||vl(l,d))&&(vl(r,u)?m.connectionStart=nE(c,u,t):vl(r,d)?m.connectionEnd=iE(c,d,t):vl(o,u)?m.connectionStart=r_(c,u,a[u.id]):vl(o,d)&&(m.connectionEnd=o_(c,d,a[d.id])),s._modeling.layoutConnection(c,m))})};function GA(e){return be({},e)}function kZ(e){return Zi(e.waypoints,function(t){return t=GA(t),t.original&&(t.original=GA(t.original)),t})}function jD(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function UA(e,t,n){var i=jD(n);if(/e|s/.test(n))return e[i]>t;if(/n|w/.test(n))return e[i]<t}function vl(e,t){return e.indexOf(t)!==-1}function PZ(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function __(e){this._modeling=e}__.$inject=["modeling"];__.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=$D(n),t.collapsed=!t.collapsed;var i=GD(n,t.collapsed);return[t].concat(i)};__.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children,r=UD(i,n);return t.collapsed=!t.collapsed,[t].concat(r)};function $D(e){var t={};return ue(e,function(n){t[n.id]=n.hidden,n.children&&(t=be({},t,$D(n.children)))}),t}function GD(e,t){var n=[];return ue(e,function(i){i.hidden=t,n=n.concat(i),i.children&&(n=n.concat(GD(i.children,i.collapsed||t)))}),n}function UD(e,t){var n=[];return ue(e,function(i){i.hidden=t[i.id],n=n.concat(i),i.children&&(n=n.concat(UD(i.children,t)))}),n}function b_(e){this._modeling=e}b_.$inject=["modeling"];b_.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=qD(i,t),zD(n,t),t.host=n,t};b_.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,qD(n,t),zD(i,t,r),t};function qD(e,t){return Yn(e&&e.attachers,t)}function zD(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),di(i,t,n)}}function IE(){}IE.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};IE.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function en(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}en.$inject=["eventBus","elementFactory","commandStack"];en.prototype.getHandlers=function(){return{"shape.append":f_,"shape.create":lc,"shape.delete":fm,"shape.move":Du,"shape.resize":vm,"shape.replace":zs,"shape.toggleCollapse":__,spaceTool:cc,"label.create":pm,"connection.create":m_,"connection.delete":hm,"connection.move":RE,"connection.layout":v_,"connection.updateWaypoints":IE,"connection.reconnect":gm,"elements.create":TE,"elements.move":y_,"elements.delete":CE,"elements.distribute":g_,"elements.align":h_,"element.updateAttachment":b_}};en.prototype.registerHandlers=function(e){ue(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};en.prototype.moveShape=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=null);var o={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)};en.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};en.prototype.moveElements=function(e,t,n,i){i=i||{};var r=i.attach,o=n,a;r===!0?(a=n,o=n.parent):r===!1&&(a=null);var s={shapes:e,delta:t,newParent:o,newHost:a,hints:i};this._commandStack.execute("elements.move",s)};en.prototype.moveConnection=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)};en.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};en.prototype.createConnection=function(e,t,n,i,r,o){typeof n=="object"&&(o=r,r=i,i=n,n=void 0),i=this._create("connection",i);var a={source:e,target:t,parent:r,parentIndex:n,connection:i,hints:o};return this._commandStack.execute("connection.create",a),a.connection};en.prototype.createShape=function(e,t,n,i,r){typeof i!="number"&&(r=i,i=void 0),r=r||{};var o=r.attach,a,s;e=this._create("shape",e),o?(a=n.parent,s=n):a=n;var l={position:t,shape:e,parent:a,parentIndex:i,host:s,hints:r};return this._commandStack.execute("shape.create",l),l.shape};en.prototype.createElements=function(e,t,n,i,r){bt(e)||(e=[e]),typeof i!="number"&&(r=i,i=void 0),r=r||{};var o={position:t,elements:e,parent:n,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",o),o.elements};en.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape};en.prototype.appendShape=function(e,t,n,i,r){r=r||{},t=this._create("shape",t);var o={source:e,position:n,target:i,shape:t,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",o),o.shape};en.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};en.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)};en.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};en.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};en.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape};en.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};en.prototype.resizeShape=function(e,t,n,i){var r={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)};en.prototype.createSpace=function(e,t,n,i,r){var o={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",o)};en.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)};en.prototype.reconnect=function(e,t,n,i,r){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",o)};en.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,be(i,{docking:"source"}))};en.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,be(i,{docking:"target"}))};en.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)};en.prototype._create=function(e,t){return Ez(t)?t:this._elementFactory.create(e,t)};en.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function ym(e){this._elementRegistry=e}ym.$inject=["elementRegistry"];ym.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var r=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||AZ(n,Ov(i));return HD(n,i),e.oldProperties=o,e.changed=r,r};ym.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return HD(n,t),i};ym.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return F(e,"bpmn:DataObject")?TZ(e,t):[]};function AZ(e,t){return Fr(t,function(n,i){return n[i]=e.get(i),n},{})}function HD(e,t){ue(t,function(n,i){e.set(i,n)})}function TZ(e,t){return t.filter(function(n){return F(n,"bpmn:DataObjectReference")&&Ge(n).dataObjectRef===e})}var Th="default",As="id",VD="di",CZ={width:0,height:0};function _m(e,t,n,i){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=i}_m.$inject=["elementRegistry","moddle","modeling","textRenderer"];_m.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var i=this._elementRegistry,r=this._moddle.ids,o=t.businessObject,a=LZ(e.properties),s=e.oldProperties||RZ(t,a);return WD(a,o)&&(r.unclaim(o[As]),i.updateId(t,a[As]),r.claim(a[As],o)),Th in a&&(a[Th]&&n.push(i.get(a[Th].id)),o[Th]&&n.push(i.get(o[Th].id))),KD(t,a),e.oldProperties=s,e.changed=n,n};_m.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&Ge(n).name;if(i){var r=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,r,CZ)}};_m.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return KD(t,i),WD(n,r)&&(a.unclaim(n[As]),o.updateId(t,i[As]),a.claim(i[As],r)),e.changed};function WD(e,t){return As in e&&e[As]!==t[As]}function RZ(e,t){var n=Ov(t),i=e.businessObject,r=Ut(e);return Fr(n,function(o,a){return a!==VD?o[a]=i.get(a):o[a]=MZ(r,Ov(t.di)),o},{})}function MZ(e,t){return Fr(t,function(n,i){return n[i]=e&&e.get(i),n},{})}function KD(e,t){var n=e.businessObject,i=Ut(e);ue(t,function(r,o){o!==VD?n.set(o,r):i&&IZ(i,r)})}function IZ(e,t){ue(t,function(n,i){e.set(i,n)})}var DZ=["default"];function LZ(e){var t=be({},e);return DZ.forEach(function(n){n in e&&(t[n]=Ge(t[n]))}),t}function w_(e,t){this._canvas=e,this._modeling=t}w_.$inject=["canvas","modeling"];w_.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),o=r.businessObject,a=o.$parent,s=Ut(r);return t.setRootElement(n),t.removeRootElement(r),di(a.rootElements,i),i.$parent=a,Yn(a.rootElements,o),o.$parent=null,r.di=null,s.bpmnElement=i,n.di=s,e.oldRoot=r,[]};w_.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=e.oldRoot,o=r.businessObject,a=i.$parent,s=Ut(n);return t.setRootElement(r),t.removeRootElement(n),Yn(a.rootElements,i),i.$parent=null,di(a.rootElements,o),o.$parent=a,n.di=null,s.bpmnElement=o,r.di=s,[]};function DE(e,t){this._modeling=e,this._spaceTool=t}DE.$inject=["modeling","spaceTool"];DE.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,o=Ao(i),a=o===i,s=a?i:i.parent,l=oc(s),c=_i(i);if(c?r==="left"?r="top":r==="right"&&(r="bottom"):r==="top"?r="left":r==="bottom"&&(r="right"),!l.length){var u=c?{x:i.x+No,y:i.y,width:i.width-No,height:i.height}:{x:i.x,y:i.y+No,width:i.width,height:i.height-No};n.createShape({type:"bpmn:Lane",isHorizontal:c},u,s)}var d=[];Au(o,function(x){return d.push(x),x.label&&d.push(x.label),x===i?[]:It(x.children,function(M){return M!==i})});var h,p,m,v,_;r==="top"?(h=-120,p=i.y,m=p+10,v="n",_="y"):r==="left"?(h=-120,p=i.x,m=p+10,v="w",_="x"):r==="bottom"?(h=120,p=i.y+i.height,m=p-10,v="s",_="y"):r==="right"&&(h=120,p=i.x+i.width,m=p-10,v="e",_="x");var b=t.calculateAdjustments(d,_,h,m),E=c?{x:0,y:h}:{x:h,y:0};t.makeSpace(b.movingShapes,b.resizingShapes,E,v,m);var w=c?{x:i.x+(a?No:0),y:p-(r==="top"?120:0),width:i.width-(a?No:0),height:120}:{x:p-(r==="left"?120:0),y:i.y+(a?No:0),width:120,height:i.height-(a?No:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:c},w,s)};function LE(e){this._modeling=e}LE.$inject=["modeling"];LE.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,i=e.count,r=oc(n),o=r.length;if(o>i)throw new Error(`more than <${i}> child lanes`);var a=_i(n),s=a?n.height:n.width,l=Math.round(s/i),c,u,d,h;for(h=0;h<i;h++)h===i-1?c=s-l*h:c=l,u=a?{x:n.x+No,y:n.y+h*l,width:n.width-No,height:c}:{x:n.x+h*l,y:n.y+No,width:c,height:n.height-No},h<o?t.resizeShape(r[h],u):(d={type:"bpmn:Lane",isHorizontal:a},t.createShape(d,u,n))};function bm(e,t){this._modeling=e,this._spaceTool=t}bm.$inject=["modeling","spaceTool"];bm.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;i!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};bm.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=cJ(e,t);n.resizeShape(e,t),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})};bm.prototype.resizeSpace=function(e,t){var n=this._spaceTool,i=at(e),r=at(t),o=KI(r,i),a=Ao(e),s=[],l=[];Au(a,function(m){return s.push(m),(F(m,"bpmn:Lane")||F(m,"bpmn:Participant"))&&l.push(m),m.children});var c,u,d,h,p;(o.bottom||o.top)&&(c=o.bottom||o.top,u=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),d=o.bottom?"s":"n",h=o.top>0||o.bottom<0?-c:c,p=n.calculateAdjustments(s,"y",h,u),n.makeSpace(p.movingShapes,p.resizingShapes,{x:0,y:c},d)),(o.left||o.right)&&(c=o.right||o.left,u=e.x+(o.right?e.width:0)+(o.right?-10:100),d=o.right?"e":"w",h=o.left>0||o.right<0?-c:c,p=n.calculateAdjustments(l,"x",h,u),n.makeSpace(p.movingShapes,p.resizingShapes,{x:c,y:0},d))};var Gf="flowNodeRef",OE="lanes";function wm(e){this._elementRegistry=e}wm.$inject=["elementRegistry"];wm.prototype._computeUpdates=function(e,t){var n=[],i=[],r={},o=[];function a(u,d){var h=at(d),p={x:u.x+u.width/2,y:u.y+u.height/2};return p.x>h.left&&p.x<h.right&&p.y>h.top&&p.y<h.bottom}function s(u){n.indexOf(u)===-1&&(o.push(u),n.push(u))}function l(u){var d=Ao(u);return r[d.id]||(r[d.id]=n_(d)),r[d.id]}function c(u){if(!u.parent)return[];var d=l(u);return d.filter(function(h){return a(u,h)}).map(function(h){return h.businessObject})}return t.forEach(function(u){var d=Ao(u);if(!(!d||n.indexOf(d)!==-1)){var h=d.children.filter(function(p){return F(p,"bpmn:FlowNode")});h.forEach(s),n.push(d)}}),e.forEach(s),o.forEach(function(u){var d=u.businessObject,h=d.get(OE),p=h.slice(),m=c(u);i.push({flowNode:d,remove:p,add:m})}),t.forEach(function(u){var d=u.businessObject;u.parent||d.get(Gf).forEach(function(h){i.push({flowNode:h,remove:[d],add:[]})})}),i};wm.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var i=n.flowNode,r=i.get(OE);n.remove.forEach(function(o){Yn(r,o),Yn(o.get(Gf),i)}),n.add.forEach(function(o){di(r,o),di(o.get(Gf),i)})}),[]};wm.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var i=n.flowNode,r=i.get(OE);n.add.forEach(function(o){Yn(r,o),Yn(o.get(Gf),i)}),n.remove.forEach(function(o){di(r,o),di(o.get(Gf),i)})}),[]};function x_(e){this._moddle=e}x_.$inject=["moddle"];x_.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.claim(n,i):t.unclaim(n),[]};x_.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.unclaim(n):t.claim(n,i),[]};var OZ={fill:void 0,stroke:void 0};function BE(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(Br(t)){var n=BZ(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}BE.$inject=["commandStack"];BE.prototype.postExecute=function(e){var t=e.elements,n=e.colors||OZ,i=this,r={};"fill"in n&&be(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&be(r,{"border-color":this._normalizeColor(n.stroke)}),ue(t,function(o){var a=on(o)?Is(r,["border-color"]):r,s=Ut(o);if(FZ(a),qt(o))i._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:s.label,properties:{color:r["border-color"]}});else{if(!Ct(s,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;i._commandStack.execute("element.updateProperties",{element:o,properties:{di:a}})}})};function BZ(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function FZ(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var jZ={width:0,height:0};function YD(e,t,n){function i(l,c){var u=l.label||l,d=l.labelTarget||l;return kV(u,c),[u,d]}function r(l){var c=l.element,u=c.businessObject,d=l.newLabel;if(!qt(c)&&_u(c)&&!jy(c)&&!qA(d)){var h=7,p=m5(c);p={x:p.x,y:p.y+h},e.createLabel(c,p,{id:u.id+"_label",businessObject:u,di:c.di})}}function o(l){return l.oldLabel=ro(l.element),i(l.element,l.newLabel)}function a(l){return i(l.element,l.oldLabel)}function s(l){var c=l.element,u=c.label||c,d=l.newLabel,h=l.newBounds,p=l.hints||{};if(!(!qt(u)&&!F(u,"bpmn:TextAnnotation"))){if(qt(u)&&qA(d)){p.removeShape!==!1&&e.removeShape(u,{unsetLabel:!1});return}var m=ro(c);typeof h>"u"&&(h=t.getExternalLabelBounds(u,m)),h&&e.resizeShape(u,h,jZ)}}this.preExecute=r,this.execute=o,this.revert=a,this.postExecute=s}YD.$inject=["modeling","textRenderer","bpmnFactory"];function qA(e){return!e||!e.trim()}function nr(e,t,n,i){en.call(this,e,t,n),this._bpmnRules=i}We(nr,en);nr.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];nr.prototype.getHandlers=function(){var e=en.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=ym,e["element.updateProperties"]=_m,e["canvas.updateRoot"]=w_,e["lane.add"]=DE,e["lane.resize"]=bm,e["lane.split"]=LE,e["lane.updateRefs"]=wm,e["id.updateClaim"]=x_,e["element.setColor"]=BE,e["element.updateLabel"]=YD,e};nr.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})};nr.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,i)};nr.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};nr.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};nr.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};nr.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};nr.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};nr.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};nr.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};nr.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};nr.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};nr.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};nr.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function JD(){}JD.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||ht(t.source||e.source),t.connectionEnd||ht(t.target||e.target)]};var u0=20,$Z=5,Zv=Math.round,zA=20,GZ={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function UZ(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function qZ(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function XD(e,t,n){var i=tr(t,e,$Z),r=n.split(":")[0],o=Zv((t.x-e.x)/2+e.x),a=Zv((t.y-e.y)/2+e.y),s,l,c=qZ(r,i),u=/h|r|l/.test(r),d=!1,h=!1;return c?(s=u?{x:o,y:e.y}:{x:e.x,y:a},l=u?"h:h":"v:v"):(d=UZ(i,r),l=u?"h:v":"v:h",d?u?(h=a===e.y,s={x:e.x+u0*(/l/.test(r)?-1:1),y:h?a+u0:a}):(h=o===e.x,s={x:h?o+u0:o,y:e.y+u0*(/t/.test(r)?-1:1)}):s={x:o,y:a}),{waypoints:FE(e,s,l).concat(s),directions:l,turnNextDirections:h}}function zZ(e,t,n){return XD(e,t,n)}function HZ(e,t,n){var i=XD(t,e,HA(n));return{waypoints:i.waypoints.slice().reverse(),directions:HA(i.directions),turnNextDirections:i.turnNextDirections}}function VZ(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(i=i=="h"?"v":"h");var r=n+":"+i,o=FE(e.waypoints[e.waypoints.length-1],t.waypoints[0],r);return{waypoints:o,directions:r}}function HA(e){return e.split(":").reverse().join(":")}function WZ(e,t,n){var i=Zv((t.x-e.x)/2+e.x),r=Zv((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:i,y:e.y},{x:i,y:t.y}];if(n==="v:v")return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function FE(e,t,n){if(n=n||"h:h",!nQ(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(ZD(n)){var i=zZ(e,t,n),r=HZ(e,t,n),o=VZ(i,r);return[].concat(i.waypoints,o.waypoints,r.waypoints)}return WZ(e,t,n)}function KZ(e,t,n){var i=FE(e,t,n);return i.unshift(e),i.push(t),QD(i)}function YZ(e,t,n,i,r){var o=r&&r.preferredLayouts||[],a=XU(o,"straight")[0]||"h:h",s=GZ[a]||0,l=tr(e,t,s),c=tQ(l,a);n=n||ht(e),i=i||ht(t);var u=c.split(":"),d=WA(n,e,u[0],iQ(l)),h=WA(i,t,u[1],l);return KZ(d,h,c)}function JZ(e,t,n,i,r,o){bt(n)&&(r=n,o=i,n=ht(e),i=ht(t)),o=be({preferredLayouts:[]},o),r=r||[];var a=o.preferredLayouts,s=a.indexOf("straight")!==-1,l;return l=s&&ZZ(e,t,n,i,o),l||(l=o.connectionEnd&&eQ(t,e,i,r),l)||(l=o.connectionStart&&QZ(e,t,n,r),l)?l:!o.connectionStart&&!o.connectionEnd&&r&&r.length?r:YZ(e,t,n,i,o)}function XZ(e,t,n){return e>=t&&e<=n}function VA(e,t,n){var i={x:"width",y:"height"};return XZ(t[e],n[e],n[e]+n[i[e]])}function ZZ(e,t,n,i,r){var o={},a,s;return s=tr(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(a="x"),/left|right/.test(s)&&(a="y"),r.preserveDocking==="target"?VA(a,i,e)?(o[a]=i[a],[{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}},{x:i.x,y:i.y}]):null:VA(a,n,t)?(o[a]=n[a],[{x:n.x,y:n.y},{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y,original:{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y}}]):null):null}function QZ(e,t,n,i){return jE(e,t,n,i)}function eQ(e,t,n,i){var r=i.slice().reverse();return r=jE(e,t,n,r),r?r.reverse():null}function jE(e,t,n,i){function r(u){return u.length<3?!0:u.length>4?!1:!!Wt(u,function(d,h){var p=u[h-1];return p&&Qf(d,p)<3})}function o(u,d,h){var p=Es(d,u);switch(p){case"v":return{x:h.x,y:u.y};case"h":return{x:u.x,y:h.y}}return{x:u.x,y:u.y}}function a(u,d,h){var p;for(p=u.length-2;p!==0;p--)if(jk(u[p],d,zA)||jk(u[p],h,zA))return u.slice(p);return u}if(r(i))return null;var s=i[0],l=i.slice(),c;return l[0]=n,l[1]=o(l[1],s,n),c=a(l,e,t),c!==l&&(l=jE(e,t,n,c)),l&&Es(l)?null:l}function tQ(e,t){if(ZD(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function nQ(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function ZD(e){return e&&/t|r|b|l/.test(e)}function iQ(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function WA(e,t,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function QD(e){return e.reduce(function(t,n,i){var r=t[t.length-1],o=e[i+1];return r5(r,o,n,0)||t.push(n),t},[])}var rQ=-10,oQ=40,aQ={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},sQ={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},$E={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Fh={top:"t",right:"r",bottom:"b",left:"l"};function E_(e){this._elementRegistry=e}We(E_,JD);E_.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,i=t.target||e.target,r=t.waypoints||e.waypoints,o=t.connectionStart,a=t.connectionEnd,s=this._elementRegistry,l,c;if(o||(o=KA(r&&r[0],n)),a||(a=KA(r&&r[r.length-1],i)),(F(e,"bpmn:Association")||F(e,"bpmn:DataAssociation"))&&r&&!YA(n,i))return[].concat([o],r.slice(1,-1),[a]);var u=SI(n,s)?aQ:sQ;return F(e,"bpmn:MessageFlow")?l=cQ(n,i,u):(F(e,"bpmn:SequenceFlow")||YA(n,i))&&(n===i?l={preferredLayouts:mQ(n,e,u)}:F(n,"bpmn:BoundaryEvent")?l={preferredLayouts:gQ(n,i,a,u)}:Uf(n)||Uf(i)?l={preferredLayouts:u.subProcess,preserveDocking:dQ(n)}:F(n,"bpmn:Gateway")?l={preferredLayouts:u.fromGateway}:F(i,"bpmn:Gateway")?l={preferredLayouts:u.toGateway}:l={preferredLayouts:u.default}),l&&(l=be(l,t),c=QD(JZ(n,i,o,a,r,l))),c||[o,a]};function lQ(e){var t=e.host;return tr(ht(e),t,rQ)}function cQ(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:uQ(e,t)}}function uQ(e,t){return F(t,"bpmn:Participant")?"source":F(e,"bpmn:Participant")?"target":Uf(t)?"source":Uf(e)||F(t,"bpmn:Event")?"target":F(e,"bpmn:Event")?"source":null}function dQ(e){return Uf(e)?"target":"source"}function KA(e,t){return e?e.original||e:ht(t)}function YA(e,t){return F(t,"bpmn:Activity")&&F(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function Uf(e){return F(e,"bpmn:SubProcess")&&Bt(e)}function iu(e,t){return e===t}function pQ(e,t){return t.indexOf(e)!==-1}function cp(e){var t=/right|left/.exec(e);return t&&t[0]}function up(e){var t=/top|bottom/.exec(e);return t&&t[0]}function JA(e,t){return $E[e]===t}function hQ(e,t){var n=cp(e),i=$E[n];return t.indexOf(i)!==-1}function fQ(e,t){var n=up(e),i=$E[n];return t.indexOf(i)!==-1}function eL(e){return e==="right"||e==="left"}function mQ(e,t,n){var i=t.waypoints,r=i&&i.length&&tr(i[0],e);return r==="top"?n.loop.fromTop:r==="right"?n.loop.fromRight:r==="left"?n.loop.fromLeft:n.loop.fromBottom}function gQ(e,t,n,i){var r=ht(e),o=ht(t),a=lQ(e),s,l,c=iu(e.host,t),u=pQ(a,["top","right","bottom","left"]),d=tr(o,r,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return c?vQ(a,u,e,t,n,i):(s=yQ(a,d,u,i.isHorizontal),l=_Q(a,d,u,i.isHorizontal),[s+":"+l])}function vQ(e,t,n,i,r,o){var a=t?e:o.isHorizontal?up(e):cp(e),s=Fh[a],l;return t?eL(e)?l=XA("y",n,i,r)?"h":o.boundaryLoop.alternateHorizontalSide:l=XA("x",n,i,r)?"v":o.boundaryLoop.alternateVerticalSide:l=o.boundaryLoop.default,[s+":"+l]}function XA(e,t,n,i){var r=oQ;return!(Tb(e,i,n,r)||Tb(e,i,{x:n.x+n.width,y:n.y+n.height},r)||Tb(e,i,ht(t),r))}function Tb(e,t,n,i){return Math.abs(t[e]-n[e])<i}function yQ(e,t,n,i){if(n)return Fh[e];var r=up(e),o=cp(e),a=up(t),s=cp(t);if(i){if(iu(r,a)||JA(o,s))return Fh[r]}else if(iu(o,s)||JA(r,a))return Fh[o];return Fh[i?o:r]}function _Q(e,t,n,i){return n?eL(e)?hQ(e,t)||iu(e,t)?"h":"v":fQ(e,t)||iu(e,t)?"v":"h":i?iu(up(e),up(t))?"h":"v":iu(cp(e),cp(t))?"v":"h"}E_.$inject=["elementRegistry"];function ZA(e){return be({original:e.point.original||e.point},e.actual)}function uc(e,t){this._elementRegistry=e,this._graphicsFactory=t}uc.$inject=["elementRegistry","graphicsFactory"];uc.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),o=e.waypoints.slice(i.idx+1,r.idx);return o.unshift(ZA(i)),o.push(ZA(r)),o};uc.prototype.getDockingPoint=function(e,t,n){var i=e.waypoints,r,o,a;return r=n?0:i.length-1,o=i[r],a=this._getIntersection(t,e,n),{point:o,actual:a||o,idx:r}};uc.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return dw(i,r,n)};uc.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};uc.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};uc.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const tL={__init__:["modeling","bpmnUpdater"],__depends__:[fX,MX,DX,LX,LD,cZ,dZ,vZ,za,g5,FD],bpmnFactory:["type",$o],bpmnUpdater:["type",Gr],elementFactory:["type",sc],modeling:["type",nr],layouter:["type",E_],connectionDocking:["type",uc]},QA=Math.round;function S_(e,t,n,i,r,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=i,this._layouter=r,this._rules=o}S_.prototype.create=function(e,t,n){const i=this._complexPreview,r=this._connectionDocking,o=this._elementFactory,a=this._eventBus,s=this._layouter,l=this._rules,c=o.createShape(be({type:t},n)),u=a.fire("autoPlace",{source:e,shape:c});if(!u)return;be(c,{x:u.x-QA(c.width/2),y:u.y-QA(c.height/2)});const d=l.allowed("connection.create",{source:e,target:c,hints:{targetParent:e.parent}});let h=null;d&&(h=o.createConnection(d),h.waypoints=s.layoutConnection(h,{source:e,target:c}),h.waypoints=r.getCroppedWaypoints(h,e,c)),i.create({created:[c,h].filter(p=>!If(p))})};S_.prototype.cleanUp=function(){this._complexPreview.cleanUp()};S_.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const bQ={__depends__:[M5,qY,tL],__init__:["appendPreview"],appendPreview:["type",S_]},N_=Object.prototype.toString,wQ=Object.prototype.hasOwnProperty;function xQ(e){return e===void 0}function EQ(e){return e==null}function nL(e){return N_.call(e)==="[object Array]"}function SQ(e){return N_.call(e)==="[object Object]"}function Qv(e){return N_.call(e)==="[object Number]"}function J0(e){const t=N_.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function NQ(e,t){return!EQ(e)&&wQ.call(e,t)}function X0(e,t){let n,i;if(xQ(e))return;const r=nL(e)?PQ:kQ;for(let o in e)if(NQ(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function kQ(e){return e}function PQ(e){return Number(e)}function eT(e,...t){return Object.assign(e,...t)}function AQ(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}function TQ(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}function CQ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var d0={},tT;function RQ(){if(tT)return d0;tT=1;var e,t,n;function i(){e=window.addEventListener?"addEventListener":"attachEvent",t=window.removeEventListener?"removeEventListener":"detachEvent",n=e!=="addEventListener"?"on":""}return d0.bind=function(r,o,a,s){return e||i(),r[e](n+o,a,s||!1),a},d0.unbind=function(r,o,a,s){return t||i(),r[t](n+o,a,s||!1),a},d0}var iL=RQ(),MQ=CQ(iL),rL=AQ({__proto__:null,default:MQ},[iL]),oL=["focus","blur"];function IQ(e,t,n,i,r){return oL.indexOf(n)!==-1&&(r=!0),rL.bind(e,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=TQ(a,t,!0),o.delegateTarget&&i.call(e,o)},r)}function DQ(e,t,n,i){return oL.indexOf(t)!==-1&&(i=!0),rL.unbind(e,t,n,i)}var nT={bind:IQ,unbind:DQ};function LQ(e,t){return t=t||document,t.querySelector(e)}function OQ(e,t){return t=t||document,t.querySelectorAll(e)}function BQ(e){return e.originalEvent||e.srcEvent}function aL(e,t){return(BQ(e)||e).button===t}function sL(e){return aL(e,0)}function FQ(e){return aL(e,1)}function jQ(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function $Q(e,t){return t.appendChild(jQ(e,t))}function GQ(e,t){return $Q(t,e),e}var jw=2,lL={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":jw,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":jw,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function UQ(e,t){return lL[t]?e.style[t]:e.getAttributeNS(null,t)}function qQ(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=lL[i];r?(r===jw&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function zQ(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)qQ(e,r,t[r])}function rf(e,t,n){return typeof t=="string"?UQ(e,t):(zQ(e,t),e)}var GE={svg:"http://www.w3.org/2000/svg"},iT='<svg xmlns="'+GE.svg+'"';function HQ(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(GE.svg)===-1&&(e=iT+e.substring(4)):(e=iT+">"+e+"</svg>",t=!0);var n=VQ(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function VQ(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function cL(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=HQ(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(GE.svg,e),t&&rf(n,t),n}function WQ(e){var t=e.parentNode;return t&&t.removeChild(e),e}function KQ(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function YQ(e){return["M",e.x,e.y]}function Cb(e){return["L",e.x,e.y]}function JQ(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function XQ(e,t){const n=e.length,i=[YQ(e[0])];for(let r=1;r<n;r++){const o=e[r-1],a=e[r],s=e[r+1];if(!s||!t){i.push(Cb(a));continue}const l=Math.min(t,$w(a.x-o.x,a.y-o.y),$w(s.x-a.x,s.y-a.y));if(!l){i.push(Cb(a));continue}const c=p0(a,o,l),u=p0(a,o,l*.5),d=p0(a,s,l),h=p0(a,s,l*.5);i.push(Cb(c)),i.push(JQ(u,h,d))}return i}function p0(e,t,n){const i=t.x-e.x,r=t.y-e.y,o=$w(i,r),a=n/o;return{x:e.x+i*a,y:e.y+r*a}}function $w(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function ZQ(e,t,n){Qv(t)&&(n=t,t=null),t||(t={});const i=cL("path",t);return Qv(n)&&(i.dataset.cornerRadius=String(n)),uL(i,e)}function uL(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return rf(e,{d:KQ(XQ(t,n))}),e}function QQ(e){return!0}function h0(e){return sL(e)||FQ(e)}var rT=500;function dL(e,t,n){var i=this;function r(R,O,D){if(!s(R,O)){var A,L,$;D?L=t.getGraphics(D):(A=O.delegateTarget||O.target,A&&(L=A,D=t.get(L))),!(!L||!D)&&($=e.fire(R,{element:D,gfx:L,originalEvent:O}),$===!1&&(O.stopPropagation(),O.preventDefault()))}}var o={};function a(R){return o[R]}function s(R,O){var D=c[R]||sL;return!D(O)}var l={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},c={"element.contextmenu":QQ,"element.mousedown":h0,"element.mouseup":h0,"element.click":h0,"element.dblclick":h0};function u(R,O,D){var A=l[R];if(!A)throw new Error("unmapped DOM event name <"+R+">");return r(A,O,D)}var d="svg, .djs-element";function h(R,O,D,A){var L=o[D]=function($){r(D,$)};A&&(c[D]=A),L.$delegate=nT.bind(R,d,O,L)}function p(R,O,D){var A=a(D);A&&nT.unbind(R,O,A.$delegate)}function m(R){X0(l,function(O,D){h(R,D,O)})}function v(R){X0(l,function(O,D){p(R,D,O)})}e.on("canvas.destroy",function(R){v(R.svg)}),e.on("canvas.init",function(R){m(R.svg)}),e.on(["shape.added","connection.added"],function(R){var O=R.element,D=R.gfx;e.fire("interactionEvents.createHit",{element:O,gfx:D})}),e.on(["shape.changed","connection.changed"],rT,function(R){var O=R.element,D=R.gfx;e.fire("interactionEvents.updateHit",{element:O,gfx:D})}),e.on("interactionEvents.createHit",rT,function(R){var O=R.element,D=R.gfx;i.createDefaultHit(O,D)}),e.on("interactionEvents.updateHit",function(R){var O=R.element,D=R.gfx;i.updateDefaultHit(O,D)});var _=M("djs-hit djs-hit-stroke"),b=M("djs-hit djs-hit-click-stroke"),E=M("djs-hit djs-hit-all"),w=M("djs-hit djs-hit-no-move"),x={all:E,"click-stroke":b,stroke:_,"no-move":w};function M(R,O){return O=eT({stroke:"white",strokeWidth:15},O||{}),n.cls(R,["no-fill","no-border"],O)}function B(R,O){var D=x[O];if(!D)throw new Error("invalid hit type <"+O+">");return rf(R,D),R}function H(R,O){GQ(R,O)}this.removeHits=function(R){var O=OQ(".djs-hit",R);X0(O,WQ)},this.createDefaultHit=function(R,O){var D=R.waypoints,A=R.isFrame,L;return D?this.createWaypointsHit(O,D):(L=A?"stroke":"all",this.createBoxHit(O,L,{width:R.width,height:R.height}))},this.createWaypointsHit=function(R,O){var D=ZQ(O);return B(D,"stroke"),H(R,D),D},this.createBoxHit=function(R,O,D){D=eT({x:0,y:0},D);var A=cL("rect");return B(A,O),rf(A,D),H(R,A),A},this.updateDefaultHit=function(R,O){var D=LQ(".djs-hit",O);if(D)return R.waypoints?uL(D,R.waypoints):rf(D,{width:R.width,height:R.height}),D},this.fire=r,this.triggerMouseEvent=u,this.mouseHandler=a,this.registerEvent=h,this.unregisterEvent=p}dL.$inject=["eventBus","elementRegistry","styles"];const eee={__init__:["interactionEvents"],interactionEvents:["type",dL]},pL=Object.prototype.toString,tee=Object.prototype.hasOwnProperty;function nee(e){return e===void 0}function iee(e){return e==null}function ree(e){return pL.call(e)==="[object Array]"}function oee(e){const t=pL.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function aee(e,t){return!iee(e)&&tee.call(e,t)}function see(e,t){const n=lee(t);let i;return hL(e,function(r,o){if(n(r,o))return i=r,!1}),i}function hL(e,t){let n,i;if(nee(e))return;const r=ree(e)?uee:cee;for(let o in e)if(aee(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function lee(e){return oee(e)?e:t=>t===e}function cee(e){return e}function uee(e){return Number(e)}function ey(e,t){return e.bind(t)}function Z0(e,...t){return Object.assign(e,...t)}function oT(e,t){let n={},i=Object(e);return hL(t,function(r){r in i&&(n[r]=e[r])}),n}const ri={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};ri.td=ri.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];ri.option=ri.optgroup=[1,'<select multiple="multiple">',"</select>"];ri.thead=ri.tbody=ri.colgroup=ri.caption=ri.tfoot=[1,"<table>","</table>"];ri.polyline=ri.ellipse=ri.polygon=ri.circle=ri.text=ri.line=ri.path=ri.rect=ri.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function dee(e,t=globalThis.document){var c;if(typeof e!="string")throw new TypeError("String expected");const n=/^<!--(.*?)-->$/s.exec(e);if(n)return t.createComment(n[1]);const i=(c=/<([\w:]+)/.exec(e))==null?void 0:c[1];if(!i)return t.createTextNode(e);if(e=e.trim(),i==="body"){const u=t.createElement("html");u.innerHTML=e;const{lastChild:d}=u;return d.remove(),d}let[r,o,a]=Object.hasOwn(ri,i)?ri[i]:ri._default,s=t.createElement("div");for(s.innerHTML=o+e+a;r--;)s=s.lastChild;if(s.firstChild===s.lastChild){const{firstChild:u}=s;return u.remove(),u}const l=t.createDocumentFragment();return l.append(...s.childNodes),l}var pee=dee;const fL=t4(pee);function hee(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}function fee(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var f0={},aT;function mee(){if(aT)return f0;aT=1;var e,t,n;function i(){e=window.addEventListener?"addEventListener":"attachEvent",t=window.removeEventListener?"removeEventListener":"detachEvent",n=e!=="addEventListener"?"on":""}return f0.bind=function(r,o,a,s){return e||i(),r[e](n+o,a,s||!1),a},f0.unbind=function(r,o,a,s){return t||i(),r[t](n+o,a,s||!1),a},f0}var mL=mee(),gee=fee(mL),eo=hee({__proto__:null,default:gee},[mL]);function vee(e,t){return t=t||document,t.querySelector(e)}function Gw(e){e.parentNode&&e.parentNode.removeChild(e)}var sT=Math.min,lT=Math.max;function Rb(e){e.preventDefault()}function of(e){e.stopPropagation()}function yee(e){return e.nodeType===Node.TEXT_NODE}function _ee(e){return[].slice.call(e)}function ga(e){this.container=e.container,this.parent=fL('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=vee("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=ey(this.autoResize,this),this.handlePaste=ey(this.handlePaste,this)}ga.prototype.create=function(e,t,n,i){var r=this,o=this.parent,a=this.content,s=this.container;i=this.options=i||{},t=this.style=t||{};var l=oT(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);Z0(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},l);var c=oT(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return Z0(a.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},c),i.centerVertically&&Z0(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},c),a.innerText=n,eo.bind(a,"keydown",this.keyHandler),eo.bind(a,"mousedown",of),eo.bind(a,"paste",r.handlePaste),i.autoResize&&eo.bind(a,"input",this.autoResize),i.resizable&&this.resizable(t),s.appendChild(o),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),o};ga.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var i;if(e.clipboardData?i=e.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),t.autoResize){var r=this.autoResize(n);r&&this.resizeHandler(r)}};ga.prototype.insertText=function(e){e=bee(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};ga.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,i=t.endContainer,r=t.startOffset,o=t.endOffset,a=t.commonAncestorContainer,s=_ee(a.childNodes),l,c;if(yee(a)){var u=n.textContent;n.textContent=u.substring(0,r)+e+u.substring(o),l=n,c=r+e.length}else if(n===this.content&&i===this.content){var d=document.createTextNode(e);this.content.insertBefore(d,s[r]),l=d,c=d.textContent.length}else{var h=s.indexOf(n),p=s.indexOf(i);s.forEach(function(m,v){v===h?m.textContent=n.textContent.substring(0,r)+e+i.textContent.substring(o):v>h&&v<=p&&Gw(m)}),l=n,c=r+e.length}l&&c!==void 0&&setTimeout(function(){self.setSelection(l,c)})};ga.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}};ga.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=fL('<div class="djs-direct-editing-resize-handle"></div>');var s,l,c,u,d=function(m){Rb(m),of(m),s=m.clientX,l=m.clientY;var v=t.getBoundingClientRect();c=v.width,u=v.height,eo.bind(document,"mousemove",h),eo.bind(document,"mouseup",p)},h=function(m){Rb(m),of(m);var v=sT(lT(c+m.clientX-s,i),o),_=sT(lT(u+m.clientY-l,r),a);t.style.width=v+"px",t.style.height=_+"px",e.resizeHandler({width:c,height:u,dx:m.clientX-s,dy:m.clientY-l})},p=function(m){Rb(m),of(m),eo.unbind(document,"mousemove",h,!1),eo.unbind(document,"mouseup",p,!1)};eo.bind(n,"mousedown",d)}Z0(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};ga.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),eo.unbind(t,"keydown",this.keyHandler),eo.unbind(t,"mousedown",of),eo.unbind(t,"input",this.autoResize),eo.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Gw(n)),Gw(e)};ga.prototype.getValue=function(){return this.content.innerText.trim()};ga.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};ga.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};function bee(e){return e.replace(/\r\n|\r|\n/g,`
`)}function Go(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new ga({container:t.getContainer(),keyHandler:ey(this._handleKey,this),resizeHandler:ey(this._handleResize,this)})}Go.$inject=["eventBus","canvas"];Go.prototype.registerProvider=function(e){this._providers.push(e)};Go.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};Go.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};Go.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};Go.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};Go.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue(),o=e.context.text;(r!==o||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}};Go.prototype.getValue=function(){return this._textbox.getValue()};Go.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};Go.prototype._handleResize=function(e){this._fire("resize",e)};Go.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=see(this._providers,function(i){return(t=i.activate(e))?i:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const gL={__depends__:[eee],__init__:["directEditing"],directEditing:["type",Go]};function cT(e){return function(t){var n=t.target,i=Ge(e),r=i.eventDefinitions&&i.eventDefinitions[0],o=i.$type===n.type,a=(r&&r.$type)===n.eventDefinitionType,s=!!n.triggeredByEvent==!!i.triggeredByEvent,l=n.isExpanded===void 0||n.isExpanded===Bt(e);return!o||!a||!s||!l}}var wee=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],xee=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],Eee=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],See=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],Nee=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],kee=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],vL=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],Pee=vL,uT=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],Aee=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],Tee=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],Cee=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],Ree=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],Mee=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],Iee=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];const dT={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function ho(e,t,n,i,r,o,a,s){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=o,this._translate=a,this._moddleCopy=s,this._register()}ho.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];ho.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};ho.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,i=[];if(bt(e)||!n.allowed("shape.replace",{element:e}))return{};var r=cT(e);return F(t,"bpmn:DataObjectReference")?this._createEntries(e,Aee):F(t,"bpmn:DataStoreReference")&&!F(e.parent,"bpmn:Collaboration")?this._createEntries(e,Tee):F(t,"bpmn:StartEvent")&&!F(t.$parent,"bpmn:SubProcess")?(i=It(wee,r),this._createEntries(e,i)):F(t,"bpmn:Participant")?(i=It(Iee,function(o){return Bt(e)!==o.target.isExpanded}),this._createEntries(e,i)):F(t,"bpmn:StartEvent")&&Qi(t.$parent)?(i=It(Ree,function(o){var a=o.target,s=a.isInterrupting!==!1,l=t.isInterrupting===s;return r(o)||!r(o)&&!l}),this._createEntries(e,i)):F(t,"bpmn:StartEvent")&&!Qi(t.$parent)&&F(t.$parent,"bpmn:SubProcess")?(i=It(xee,r),this._createEntries(e,i)):F(t,"bpmn:EndEvent")?(i=It(See,function(o){var a=o.target;return a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!F(t.$parent,"bpmn:Transaction")?!1:r(o)}),this._createEntries(e,i)):F(t,"bpmn:BoundaryEvent")?(i=It(Cee,function(o){var a=o.target;if(a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!F(t.attachedToRef,"bpmn:Transaction"))return!1;var s=a.cancelActivity!==!1,l=t.cancelActivity==s;return r(o)||!r(o)&&!l}),this._createEntries(e,i)):F(t,"bpmn:IntermediateCatchEvent")||F(t,"bpmn:IntermediateThrowEvent")?(i=It(Eee,r),this._createEntries(e,i)):F(t,"bpmn:Gateway")?(i=It(Nee,r),this._createEntries(e,i)):F(t,"bpmn:Transaction")?(i=It(vL,r),this._createEntries(e,i)):Qi(t)&&Bt(e)?(i=It(Pee,r),this._createEntries(e,i)):F(t,"bpmn:SubProcess")&&Bt(e)?(i=It(kee,r),this._createEntries(e,i)):F(t,"bpmn:AdHocSubProcess")&&!Bt(e)?(i=It(uT,function(o){var a=o.target,s=a.type==="bpmn:SubProcess",l=a.isExpanded===!0;return cT(a)&&(!s||l)}),this._createEntries(e,i)):F(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,Mee):F(t,"bpmn:FlowNode")?(i=It(uT,r),F(t,"bpmn:SubProcess")&&!Bt(e)&&(i=It(i,function(o){return o.label!=="Sub-process (collapsed)"})),this._createEntries(e,i)):{}};ho.prototype.getPopupMenuHeaderEntries=function(e){var t={};return F(e,"bpmn:Activity")&&!Qi(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),F(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),F(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),F(e,"bpmn:SubProcess")&&!F(e,"bpmn:Transaction")&&!Qi(e)&&(t={...t,...this._getAdHocHeaderEntries(e)}),rD(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};ho.prototype._createEntries=function(e,t){var n={},i=this;return ue(t,function(r){n[r.actionName]=i._createEntry(r,e)}),n};ho.prototype._createSequenceFlowEntries=function(e,t){var n=Ge(e),i={},r=this._modeling,o=this._moddle,a=this;return ue(t,function(s){switch(s.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(F(n.sourceRef,"bpmn:ExclusiveGateway")||F(n.sourceRef,"bpmn:InclusiveGateway")||F(n.sourceRef,"bpmn:ComplexGateway")||F(n.sourceRef,"bpmn:Activity"))&&(i={...i,[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&F(n.sourceRef,"bpmn:Activity")&&(i={...i,[s.actionName]:a._createEntry(s,e,function(){var l=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:l})})});break;default:F(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(i={...i,[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e,{conditionExpression:void 0})})}),(F(n.sourceRef,"bpmn:ExclusiveGateway")||F(n.sourceRef,"bpmn:InclusiveGateway")||F(n.sourceRef,"bpmn:ComplexGateway")||F(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(i={...i,[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e.source,{default:void 0})})})}}),i};ho.prototype._createEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement,o=function(){return r(t,e.target)},a=e.label;return a&&typeof a=="function"&&(a=a(t)),n=n||o,{label:i(a),className:e.className,action:n}};ho.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function i(c,u){if(u.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}const d=e.businessObject.get("loopCharacteristics"),h=t._moddle.create(u.options.loopCharacteristics);d&&t._moddleCopy.copyElement(d,h),h.set("isSequential",u.options.isSequential),t._modeling.updateProperties(e,{loopCharacteristics:h})}var r=Ge(e),o=r.loopCharacteristics,a,s,l;return o&&(a=o.isSequential,s=o.isSequential===void 0,l=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:l,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:a,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:s,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};ho.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,i=e.businessObject.dataObjectRef;if(!i)return{};function r(a,s){t._modeling.updateModdleProperties(e,i,{isCollection:!s.active})}var o=i.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:r}}};ho.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,i=this._translate;function r(a,s){var l=s.active,c;l||(c=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:c})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:i("Participant multiplicity"),active:!!o,action:r}}};ho.prototype._getAdHocHeaderEntries=function(e){var t=this._translate,n=Ge(e),i=F(n,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement;return{"toggle-adhoc":{className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:i,action:function(o,a){return i?r(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):r(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}}};ho.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=Ge(e),i=this,r=oD(e),o=F(e,"bpmn:BoundaryEvent")?dT["intermediate-event-non-interrupting"]:dT["start-event-non-interrupting"],a=!n[r];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:a,action:function(){i._modeling.updateProperties(e,{[r]:!!a})}}}};const Dee={__depends__:[T5,LD,M5],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",ho]};function xm(e,t,n,i,r,o,a,s,l,c,u,d,h){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=a,this._create=s,this._popupMenu=l,this._canvas=c,this._rules=u,this._translate=d,this._eventBus=n,this._appendPreview=h,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(p){var m=p.context,v=m.shape;if(!(!Bf(p)||!i.isOpen(v))){var _=i.getEntries(v);_.replace&&_.replace.action.click(p,v)}}),n.on("contextPad.close",function(){h.cleanUp()})}xm.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];xm.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&be(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(i,r){t.removeElements(r.slice())}}}}),n};xm.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return bt(t)?ku(e,n=>t.includes(n)):t};xm.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,a=this._popupMenu,s=this._autoPlace,l=this._translate,c=this._appendPreview,u={};if(e.type==="label")return this._isDeleteAllowed([e])&&be(u,m()),u;var d=e.businessObject;function h(w,x){r.start(w,x)}function p(w,x){n.removeElements([x])}function m(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:l("Delete"),action:{click:p}}}}function v(w){var x=5,M=t.getPad(w).html,B=M.getBoundingClientRect(),H={x:B.left,y:B.bottom+x};return H}function _(w,x,M,B){function H(D,A){var L=i.createShape(be({type:w},B));o.start(D,L,{source:A})}var R=s?function(D,A){var L=i.createShape(be({type:w},B));s.append(A,L)}:H,O=s?function(D,A){return c.create(A,w,B),()=>{c.cleanUp()}}:null;return{group:"model",className:x,title:M,action:{dragstart:H,click:R,hover:O}}}function b(w){return function(x,M){n.splitLane(M,w),t.open(M,!0)}}if(Ct(d,["bpmn:Lane","bpmn:Participant"])&&Bt(e)){var E=oc(e);be(u,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:l("Add lane above"),action:{click:function(w,x){n.addLane(x,"top")}}}}),E.length<2&&((_i(e)?e.height>=120:e.width>=120)&&be(u,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:l("Divide into two lanes"),action:{click:b(2)}}}),(_i(e)?e.height>=180:e.width>=180)&&be(u,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:l("Divide into three lanes"),action:{click:b(3)}}})),be(u,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:l("Add lane below"),action:{click:function(w,x){n.addLane(x,"bottom")}}}})}return F(d,"bpmn:FlowNode")&&(F(d,"bpmn:EventBasedGateway")?be(u,{"append.receive-task":_("bpmn:ReceiveTask","bpmn-icon-receive-task",l("Append receive task")),"append.message-intermediate-event":_("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",l("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":_("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",l("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":_("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",l("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":_("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",l("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):pT(d,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?be(u,{"append.compensation-activity":_("bpmn:Task","bpmn-icon-task",l("Append compensation activity"),{isForCompensation:!0})}):!F(d,"bpmn:EndEvent")&&!d.isForCompensation&&!pT(d,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!Qi(d)&&be(u,{"append.end-event":_("bpmn:EndEvent","bpmn-icon-end-event-none",l("Append end event")),"append.gateway":_("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",l("Append gateway")),"append.append-task":_("bpmn:Task","bpmn-icon-task",l("Append task")),"append.intermediate-event":_("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",l("Append intermediate/boundary event"))})),a.isEmpty(e,"bpmn-replace")||be(u,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:l("Change element"),action:{click:function(w,x){var M=be(v(x),{cursor:{x:w.x,y:w.y}});a.open(x,"bpmn-replace",M,{title:l("Change element"),width:300,search:!0})}}}}),F(d,"bpmn:SequenceFlow")&&be(u,{"append.text-annotation":_("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),Ct(d,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&be(u,{"append.text-annotation":_("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect to other element"),action:{click:h,dragstart:h}}}),F(d,"bpmn:TextAnnotation")&&be(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using association"),action:{click:h,dragstart:h}}}),Ct(d,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&be(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:l("Connect using data input association"),action:{click:h,dragstart:h}}}),F(d,"bpmn:Group")&&be(u,{"append.text-annotation":_("bpmn:TextAnnotation","bpmn-icon-text-annotation",l("Add text annotation"))}),this._isDeleteAllowed([e])&&be(u,m()),u};function pT(e,t,n){var i=e.$instanceOf(t),r=!1,o=e.eventDefinitions||[];return ue(o,function(a){a.$type===n&&(r=!0)}),i&&r}const Lee={__depends__:[bQ,gL,eI,za,B5,u_,Dee],__init__:["contextPadProvider"],contextPadProvider:["type",xm]};var Oee={horizontal:["x","width"],vertical:["y","height"]},hT=5;function Hs(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var i=t.allowed("elements.distribute",{elements:n});return bt(i)?i:i?n:[]})}Hs.$inject=["modeling","rules"];Hs.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};Hs.prototype.trigger=function(e,t){var n=this._modeling,i,r;if(!(e.length<3)&&(this._setOrientation(t),r=this._filterElements(e),i=this._createGroups(r),!(i.length<=2)))return n.distributeElements(i,this._axis,this._dimension),i};Hs.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(ue(t,function(o){r=o(r,n,i)}),r):e};Hs.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var o=Ga(e,i);return ue(o,function(a,s){var l=n._findRange(a,i,r),c,u=t[t.length-1];u&&n._hasIntersection(u.range,l)?t[t.length-1].elements.push(a):(c={range:l,elements:[a]},t.push(c))}),t};Hs.prototype._setOrientation=function(e){var t=Oee[e];this._axis=t[0],this._dimension=t[1]};Hs.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};Hs.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+hT,max:t+n-hT}};const Bee={__init__:["distributeElements"],distributeElements:["type",Hs]};function k_(e){Fo.call(this,e)}k_.$inject=["eventBus"];We(k_,Fo);k_.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=It(t,function(n){var i=Ct(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)}),t=Iy(t),t.length<3?!1:t})};var fT={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},Fee=900;function Em(e,t,n,i){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",Fee,this)}Em.$inject=["popupMenu","distributeElements","translate","rules"];Em.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&be(t,this._getEntries(e)),t};Em.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};Em.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,i=this._popupMenu,r={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:fT.horizontal,action:function(o,a){t.trigger(e,"horizontal"),i.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:fT.vertical,action:function(o,a){t.trigger(e,"vertical"),i.close()}}};return r};const jee={__depends__:[T5,Bee],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",k_],distributeElementsMenuProvider:["type",Em]};var yL="is not a registered action",$ee="is already registered";function Uo(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}Uo.$inject=["eventBus","injector"];Uo.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),l=e.get("keyboardMove",!1),c=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&i&&this.register("copy",function(){var u=i.get();if(u.length)return o.copy(u)}),o&&this.register("paste",function(){o.paste()}),r&&this.register("stepZoom",function(u){r.stepZoom(u.value)}),a&&this.register("zoom",function(u){a.zoom(u.value)}),n&&i&&s&&this.register("removeSelection",function(){var u=i.get();if(u.length){var d=s.allowed("elements.delete",{elements:u}),h;d!==!1&&(bt(d)?h=d:h=u,h.length&&n.removeElements(h.slice()))}}),l&&this.register("moveCanvas",function(u){l.moveCanvas(u)}),c&&this.register("moveSelection",function(u){c.moveSelection(u.direction,u.accelerated)})};Uo.prototype.trigger=function(e,t){if(!this._actions[e])throw UE(e,yL);return this._actions[e](t)};Uo.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);ue(e,function(i,r){n._registerAction(r,i)})};Uo.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw UE(e,$ee);this._actions[e]=t};Uo.prototype.unregister=function(e){if(!this.isRegistered(e))throw UE(e,yL);this._actions[e]=void 0};Uo.prototype.getActions=function(){return Object.keys(this._actions)};Uo.prototype.isRegistered=function(e){return!!this._actions[e]};function UE(e,t){return new Error(e+" "+t)}const Gee={__init__:["editorActions"],editorActions:["type",Uo]};function P_(e){e.invoke(Uo,this)}We(P_,Uo);P_.$inject=["injector"];P_.prototype._registerDefaultActions=function(e){Uo.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),r=e.get("spaceTool",!1),o=e.get("lassoTool",!1),a=e.get("handTool",!1),s=e.get("globalConnect",!1),l=e.get("distributeElements",!1),c=e.get("alignElements",!1),u=e.get("directEditing",!1),d=e.get("searchPad",!1),h=e.get("modeling",!1),p=e.get("contextPad",!1);t&&n&&i&&this._registerAction("selectElements",function(){var m=t.getRootElement(),v=n.filter(function(_){return _!==m});return i.select(v),v}),r&&this._registerAction("spaceTool",function(){r.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),i&&l&&this._registerAction("distributeElements",function(m){var v=i.get(),_=m.type;v.length&&l.trigger(v,_)}),i&&c&&this._registerAction("alignElements",function(m){var v=i.get(),_=[],b=m.type;v.length&&(_=It(v,function(E){return!F(E,"bpmn:Lane")}),c.trigger(_,b))}),i&&h&&this._registerAction("setColor",function(m){var v=i.get();v.length&&h.setColor(v,m)}),i&&u&&this._registerAction("directEditing",function(){var m=i.get();m.length&&u.activate(m[0])}),d&&this._registerAction("find",function(){d.toggle()}),t&&h&&this._registerAction("moveToOrigin",function(){var m=t.getRootElement(),v,_;F(m,"bpmn:Collaboration")?_=n.filter(function(b){return F(b.parent,"bpmn:Collaboration")}):_=n.filter(function(b){return b!==m&&!F(b.parent,"bpmn:SubProcess")}),v=yi(_),h.moveElements(_,{x:-v.x,y:-v.y},m)}),i&&p&&this._registerAction("replaceElement",function(m){p.triggerEntry("replace","click",m)})};const Uee={__depends__:[Gee],editorActions:["type",P_]};function _L(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,i=t.shape;Ct(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}_L.$inject=["eventBus"];var Q0=10;function Mb(e,t,n){return n||(n="round"),Math[n](e/t)*t}var qee=1200,zee=800;function dc(e,t,n){var i=!n||n.active!==!1;this._eventBus=t;var r=this;t.on("diagram.init",zee,function(){r.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],qee,function(o){var a=o.originalEvent;if(!(!r.active||a&&oo(a))){var s=o.context,l=s.gridSnappingContext;l||(l=s.gridSnappingContext={}),["x","y"].forEach(function(c){var u={},d=Vee(o,c,e);d&&(u.offset=d);var h=Hee(o,c);h&&be(u,h),sp(o,c)||r.snapEvent(o,c,u)})}})}dc.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);Kn(e,t,i)};dc.prototype.getGridSpacing=function(){return Q0};dc.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=Mb(e,Q0);var i,r;return t&&t.min&&(i=t.min,pt(i)&&(i=Mb(i+n,Q0,"ceil"),e=Math.max(e,i))),t&&t.max&&(r=t.max,pt(r)&&(r=Mb(r+n,Q0,"floor"),e=Math.min(e,r))),e-=n,e};dc.prototype.isActive=function(){return this.active};dc.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};dc.prototype.toggleActive=function(){this.setActive(!this.active)};dc.$inject=["elementRegistry","eventBus","config.gridSnapping"];function Hee(e,t){var n=e.context,i=n.createConstraints,r=n.resizeConstraints||{},o=n.gridSnappingContext,a=o.snapConstraints;if(a&&a[t])return a[t];a||(a=o.snapConstraints={}),a[t]||(a[t]={});var s=n.direction;i&&(ev(t)?(a.x.min=i.left,a.x.max=i.right):(a.y.min=i.top,a.y.max=i.bottom));var l=r.min,c=r.max;return l&&(ev(t)?gT(s)?a.x.max=l.left:a.x.min=l.right:mT(s)?a.y.max=l.top:a.y.min=l.bottom),c&&(ev(t)?gT(s)?a.x.min=c.left:a.x.max=c.right:mT(s)?a.y.min=c.top:a.y.max=c.bottom),a[t]}function Vee(e,t,n){var i=e.context,r=e.shape,o=i.gridSnappingContext,a=o.snapLocation,s=o.snapOffset;return s&&pt(s[t])||(s||(s=o.snapOffset={}),pt(s[t])||(s[t]=0),!r)||(n.get(r.id)||(ev(t)?s[t]+=r[t]+r.width/2:s[t]+=r[t]+r.height/2),!a)||(t==="x"?/left/.test(a)?s[t]-=r.width/2:/right/.test(a)&&(s[t]+=r.width/2):/top/.test(a)?s[t]-=r.height/2:/bottom/.test(a)&&(s[t]+=r.height/2)),s[t]}function ev(e){return e==="x"}function mT(e){return e.indexOf("n")!==-1}function gT(e){return e.indexOf("w")!==-1}function Lu(e,t){je.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,o=r.hints||{},a=o.autoResize;if(a){var s=r.shape,l=r.newBounds;Br(a)?r.newBounds=n.snapComplex(l,a):r.newBounds=n.snapSimple(s,l)}})}Lu.$inject=["eventBus","gridSnapping","modeling"];We(Lu,je);Lu.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Lu.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Lu.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),r=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),r&&(i?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),be(e,o),e};Lu.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),r=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),i&&(r?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),be(e,o),e};var Wee=2e3;function bL(e,t){e.on(["spaceTool.move","spaceTool.end"],Wee,function(n){var i=n.context;if(i.initialized){var r=i.axis,o;r==="x"?(o=t.snapValue(n.dx),n.x=n.x+o-n.dx,n.dx=o):(o=t.snapValue(n.dy),n.y=n.y+o-n.dy,n.dy=o)}})}bL.$inject=["eventBus","gridSnapping"];const Kee={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Lu],gridSnappingSpaceToolBehavior:["type",bL]},Yee={__depends__:[Kee],__init__:["gridSnapping"],gridSnapping:["type",dc]};var Jee=2e3;function wL(e,t,n){e.on("autoPlace",Jee,function(i){var r=i.source,o=ht(r),a=i.shape,s=NI(r,a,n);return["x","y"].forEach(function(l){var c={};s[l]!==o[l]&&(s[l]>o[l]?c.min=s[l]:c.max=s[l],F(a,"bpmn:TextAnnotation")&&(Xee(l)?c.offset=-a.width/2:c.offset=-a.height/2),s[l]=t.snapValue(s[l],c))}),s})}wL.$inject=["eventBus","gridSnapping","elementRegistry"];function Xee(e){return e==="x"}var Zee=1750;function xL(e,t,n){t.on(["create.start","shape.move.start"],Zee,function(i){var r=i.context,o=r.shape,a=e.getRootElement();if(!(!F(o,"bpmn:Participant")||!F(a,"bpmn:Process")||!a.children.length)){var s=r.createConstraints;s&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))}})}xL.$inject=["canvas","eventBus","gridSnapping"];var Qee=3e3;function A_(e,t,n){je.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],Qee,function(r){var o=r.context,a=o.connection,s=o.hints||{},l=a.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||ete(l)&&n.updateWaypoints(a,i.snapMiddleSegments(l))})}A_.$inject=["eventBus","gridSnapping","modeling"];We(A_,je);A_.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var i=1;i<e.length-2;i++)n=ite(t,e[i],e[i+1]),e[i]=n[0],e[i+1]=n[1];return e};function ete(e){return e.length>3}function tte(e){return e==="h"}function nte(e){return e==="v"}function ite(e,t,n){var i=Es(t,n),r={};return tte(i)&&(r.y=e.snapValue(t.y)),nte(i)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=be({},t,r),n=be({},n,r)),[t,n]}const rte={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",wL],gridSnappingParticipantBehavior:["type",xL],gridSnappingLayoutConnectionBehavior:["type",A_]},ote={__depends__:[Yee,rte],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",_L]};var ate=30,EL=30;function Sm(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,o=i.gfx;if(F(r,"bpmn:Lane"))return n._createParticipantHit(r,o);if(F(r,"bpmn:Participant"))return Bt(r)?n._createParticipantHit(r,o):n._createDefaultHit(r,o);if(F(r,"bpmn:SubProcess"))return Bt(r)?n._createSubProcessHit(r,o):n._createDefaultHit(r,o)})}Sm.$inject=["eventBus","interactionEvents"];Sm.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};Sm.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=_i(e)?{width:ate,height:e.height}:{width:e.width,height:EL};return this._interactionEvents.createBoxHit(t,"all",n),!0};Sm.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:EL}),!0};const ste={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Sm]};function T_(e){e.invoke(Sp,this)}We(T_,Sp);T_.$inject=["injector"];T_.prototype.registerBindings=function(e,t){Sp.prototype.registerBindings.call(this,e,t);function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("selectElements",function(i){var r=i.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["s","S"],r))return t.trigger("spaceTool"),!0}),n("lassoTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["l","L"],r))return t.trigger("lassoTool"),!0}),n("handTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["h","H"],r))return t.trigger("handTool"),!0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["c","C"],r))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["e","E"],r))return t.trigger("directEditing"),!0}),n("replaceElement",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["r","R"],r))return t.trigger("replaceElement",r),!0})};const lte={__depends__:[x5],__init__:["keyboardBindings"],keyboardBindings:["type",T_]};var cte={moveSpeed:1,moveSpeedAccelerated:10},ute=1500,vT="left",yT="up",_T="right",bT="down",dte={ArrowLeft:vT,Left:vT,ArrowUp:yT,Up:yT,ArrowRight:_T,Right:_T,ArrowDown:bT,Down:bT},pte={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function SL(e,t,n,i,r){var o=this;this._config=be({},cte,e||{}),t.addListener(ute,function(a){var s=a.keyEvent,l=dte[s.key];if(l&&!t.isCmd(s)){var c=t.isShift(s);return o.moveSelection(l,c),!0}}),this.moveSelection=function(a,s){var l=r.get();if(l.length){var c=this._config[s?"moveSpeedAccelerated":"moveSpeed"],u=pte[a](c),d=i.allowed("elements.move",{shapes:l});d&&n.moveElements(l,u)}}}SL.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const hte={__depends__:[x5,za],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",SL]};var wT=10;function Nm(e,t,n,i){this._dragging=i,this._rules=t;var r=this;function o(l,c){var u=l.shape,d=l.direction,h=l.resizeConstraints,p;l.delta=c,p=tJ(u,d,c),l.newBounds=iJ(p,h),l.canExecute=r.canResize(l)}function a(l){var c=l.resizeConstraints,u=l.minBounds;c===void 0&&(u===void 0&&(u=r.computeMinResizeBox(l)),l.resizeConstraints={min:at(u)})}function s(l){var c=l.shape,u=l.canExecute,d=l.newBounds;if(u){if(d=XM(d),!fte(c,d))return;n.resizeShape(c,d)}}e.on("resize.start",function(l){a(l.context)}),e.on("resize.move",function(l){var c={x:l.dx,y:l.dy};o(l.context,c)}),e.on("resize.end",function(l){s(l.context)})}Nm.prototype.canResize=function(e){var t=this._rules,n=Is(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};Nm.prototype.activate=function(e,t,n){var i=this._dragging,r,o;if(typeof n=="string"&&(n={direction:n}),r=be({shape:t},n),o=r.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,NL(t,o),"resize",{autoActivate:!0,cursor:mte(o),data:{shape:t,context:r}})};Nm.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,i,r;return i=e.minDimensions||{width:wT,height:wT},r=YI(t,e.childrenBoxPadding),rJ(n,t,i,r)};Nm.$inject=["eventBus","rules","modeling","dragging"];function fte(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function NL(e,t){var n=ht(e),i=at(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function mte(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var xT="djs-resizing",ET="resize-not-ok",gte=500;function kL(e,t,n){function i(o){var a=o.shape,s=o.newBounds,l=o.frame;l||(l=o.frame=n.addFrame(a,t.getActiveLayer()),t.addMarker(a,xT)),s.width>5&&He(l,{x:s.x,width:s.width}),s.height>5&&He(l,{y:s.y,height:s.height}),o.canExecute?Gt(l).remove(ET):Gt(l).add(ET)}function r(o){var a=o.shape,s=o.frame;s&&ci(o.frame),t.removeMarker(a,xT)}e.on("resize.move",gte,function(o){i(o.context)}),e.on("resize.cleanup",function(o){r(o.context)})}kL.$inject=["eventBus","canvas","previewSupport"];var m0=-6,g0=8,v0=20,Ch="djs-resizer",vte=["n","w","s","e","nw","ne","se","sw"];function pc(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",function(o){var a=o.newSelection;r.removeResizers(),a.length===1&&ue(a,pa(r.addResizer,r))}),e.on("shape.changed",function(o){var a=o.element;n.isSelected(a)&&(r.removeResizers(),r.addResizer(a))})}pc.prototype.makeDraggable=function(e,t,n){var i=this._resize;function r(o){nc(o)&&i.activate(o,e,n)}Vt.bind(t,"mousedown",r),Vt.bind(t,"touchstart",r)};pc.prototype._createResizer=function(e,t,n,i){var r=this._getResizersParent(),o=yte(i),a=Qe("g");Gt(a).add(Ch),Gt(a).add(Ch+"-"+e.id),Gt(a).add(Ch+"-"+i),ft(r,a);var s=Qe("rect");He(s,{x:-g0/2+o.x,y:-g0/2+o.y,width:g0,height:g0}),Gt(s).add(Ch+"-visual"),ft(a,s);var l=Qe("rect");return He(l,{x:-v0/2+o.x,y:-v0/2+o.y,width:v0,height:v0}),Gt(l).add(Ch+"-hit"),ft(a,l),j0(a,t,n),a};pc.prototype.createResizer=function(e,t){var n=NL(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)};pc.prototype.addResizer=function(e){var t=this;on(e)||!this._resize.canResize({shape:e})||ue(vte,function(n){t.createResizer(e,n)})};pc.prototype.removeResizers=function(){var e=this._getResizersParent();Ry(e)};pc.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};pc.$inject=["eventBus","canvas","selection","resize"];function yte(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-m0:e.indexOf("w")!==-1&&(t.x=m0),e.indexOf("s")!==-1?t.y=-m0:e.indexOf("n")!==-1&&(t.y=m0),t}const PL={__depends__:[Va,Us,Tp],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Nm],resizePreview:["type",kL],resizeHandles:["type",pc]};var _te=2e3;function km(e,t,n,i,r,o,a){this._bpmnFactory=t,this._canvas=n,this._modeling=r,this._textRenderer=a,i.registerProvider(this),e.on("element.dblclick",function(l){s(l.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){i.isActive()&&i.complete()}),e.on(["shape.remove","connection.remove"],_te,function(l){i.isActive(l.element)&&i.cancel()}),e.on(["commandStack.changed"],function(l){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(l){o.removeResizers()}),e.on("create.end",500,function(l){var c=l.context,u=c.shape,d=l.context.canExecute,h=l.isTouch;h||d&&(c.hints&&c.hints.createElementsBehavior===!1||s(u))}),e.on("autoPlace.end",500,function(l){s(l.shape)});function s(l,c){(c||Ct(l,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||qE(l))&&i.activate(l)}}km.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];km.prototype.activate=function(e){var t=ro(e);if(t!==void 0){var n={text:t},i=this.getEditingBBox(e);be(n,i);var r={},o=n.style||{};return be(o,{backgroundColor:null,border:null}),(Ct(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||qE(e))&&be(r,{centerVertically:!0}),_u(e)&&(be(r,{autoResize:!0}),be(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),F(e,"bpmn:TextAnnotation")&&(be(r,{resizable:!0,autoResize:!0}),be(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),be(n,{options:r,style:o}),n}};km.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r={x:i.x+i.width/2,y:i.y+i.height/2},o={x:i.x,y:i.y},a=t.zoom(),s=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),c=l.fontSize*a,u=l.lineHeight,d=s.fontSize*a,h=s.lineHeight,p={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(F(e,"bpmn:Lane")||xte(e)){var m=_i(e),v=m?{width:i.height,height:30*a,x:i.x-i.height/2+15*a,y:r.y-30*a/2}:{width:i.width,height:30*a};be(o,v),be(p,{fontSize:d+"px",lineHeight:h,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:m?"rotate(-90deg)":null})}if(wte(e)){var _=_i(e),b=_?{width:i.width,height:i.height}:{width:i.height,height:i.width,x:r.x-i.height/2,y:r.y-i.width/2};be(o,b),be(p,{fontSize:d+"px",lineHeight:h,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:_?null:"rotate(-90deg)"})}(Ct(e,["bpmn:Task","bpmn:CallActivity"])||qE(e))&&(be(o,{width:i.width,height:i.height}),be(p,{fontSize:d+"px",lineHeight:h,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"})),bte(e)&&(be(o,{width:i.width,x:i.x}),be(p,{fontSize:d+"px",lineHeight:h,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"}));var E=90*a,w=7*a,x=4*a;if(n.labelTarget&&(be(o,{width:E,height:i.height+w+x,x:r.x-E/2,y:i.y-w}),be(p,{fontSize:c+"px",lineHeight:u,paddingTop:w+"px",paddingBottom:x+"px"})),_u(n)&&!jy(n)&&!qt(n)){var M=m5(e),B=t.getAbsoluteBBox({x:M.x,y:M.y,width:0,height:0}),H=c+w+x;be(o,{width:E,height:H,x:B.x-E/2,y:B.y-H/2}),be(p,{fontSize:c+"px",lineHeight:u,paddingTop:w+"px",paddingBottom:x+"px"})}return F(e,"bpmn:TextAnnotation")&&(be(o,{width:i.width,height:i.height,minWidth:30*a,minHeight:10*a}),be(p,{textAlign:"left",paddingTop:5*a+"px",paddingBottom:7*a+"px",paddingLeft:7*a+"px",paddingRight:5*a+"px",fontSize:d+"px",lineHeight:h})),{bounds:o,style:p}};km.prototype.update=function(e,t,n,i){var r,o;F(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/o.width*i.width,height:e.height/o.height*i.height}),Ete(t)&&(t=null),this._modeling.updateLabel(e,t,r)};function qE(e){return F(e,"bpmn:SubProcess")&&!Bt(e)}function bte(e){return F(e,"bpmn:SubProcess")&&Bt(e)}function wte(e){return F(e,"bpmn:Participant")&&!Bt(e)}function xte(e){return F(e,"bpmn:Participant")&&Bt(e)}function Ete(e){return!e||!e.trim()}var ST="djs-element-hidden",NT="djs-label-hidden";function AL(e,t,n){var i=this,r=t.getDefaultLayer(),o,a,s;e.on("directEditing.activate",function(l){var c=l.active;if(o=c.element.label||c.element,F(o,"bpmn:TextAnnotation")){a=t.getAbsoluteBBox(o),s=Qe("g");var u=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),d=i.path=Qe("path");He(d,{d:u,strokeWidth:2,stroke:Ste(o)}),ft(s,d),ft(r,s),Oi(s,o.x,o.y)}F(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,ST):(F(o,"bpmn:Task")||F(o,"bpmn:CallActivity")||F(o,"bpmn:SubProcess")||F(o,"bpmn:Participant")||F(o,"bpmn:Lane"))&&t.addMarker(o,NT)}),e.on("directEditing.resize",function(l){if(F(o,"bpmn:TextAnnotation")){var c=l.height,u=l.dy,d=Math.max(o.height/a.height*(c+u),0),h=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:d,position:{mx:0,my:0}});He(i.path,{d:h})}}),e.on(["directEditing.complete","directEditing.cancel"],function(l){var c=l.active;c&&(t.removeMarker(c.element.label||c.element,ST),t.removeMarker(o,NT)),o=void 0,a=void 0,s&&(ci(s),s=void 0)})}AL.$inject=["eventBus","canvas","pathMap"];function Ste(e,t){var n=Ut(e);return n.get("stroke")||t||"black"}const Nte={__depends__:[g5,PL,gL],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",km],labelEditingPreview:["type",AL]};var kte=new om("tt");function Pte(e){var t=_n('<div class="djs-tooltip-container" />');return Ji(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function Ate(e,t,n){Ji(e,{left:t+"px",top:n+"px"})}function zE(e,t){e.style.display=t===!1?"none":""}var TL="djs-tooltip",Ib="."+TL;function kr(e,t){this._eventBus=e,this._canvas=t,this._ids=kte,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=Pte(t.getContainer());var n=this;Ir.bind(this._tooltipRoot,Ib,"mousedown",function(i){i.stopPropagation()}),Ir.bind(this._tooltipRoot,Ib,"mouseover",function(i){n.trigger("mouseover",i)}),Ir.bind(this._tooltipRoot,Ib,"mouseout",function(i){n.trigger("mouseout",i)}),this._init()}kr.$inject=["eventBus","canvas"];kr.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=be({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};kr.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(pr(n,"data-tooltip-id"));i&&(e==="mouseover"&&i.timeout&&this.clearTimeout(i),e==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))};kr.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};kr.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};kr.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};kr.prototype.remove=function(e){var t=this.get(e);t&&(vu(t.html),vu(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};kr.prototype.show=function(){zE(this._tooltipRoot)};kr.prototype.hide=function(){zE(this._tooltipRoot,!1)};kr.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i};kr.prototype._addTooltip=function(e){var t=e.id,n=e.html,i,r=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),Br(n)&&(n=_n(n)),i=_n('<div data-tooltip-id="'+t+'" class="'+TL+'">'),Ji(i,{position:"absolute"}),i.appendChild(n),e.type&&In(i).add("djs-tooltip-"+e.type),e.className&&In(i).add(e.className),e.htmlContainer=i,r.appendChild(i),this._tooltips[t]=e,this._updateTooltip(e)};kr.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;Ate(n,t.x,t.y)};kr.prototype._updateTooltipVisibilty=function(e){ue(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,r=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(r=!1),zE(i,r))})};kr.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const Tte={__init__:["tooltips"],tooltips:["type",kr]};var Cte="flow elements must be children of pools/participants";function CL(e,t,n){function i(r,o,a){t.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(r){var o=r.context,a=o.shape,s=o.target;F(s,"bpmn:Collaboration")&&F(a,"bpmn:FlowNode")&&i(r,n(Cte))})}CL.$inject=["eventBus","tooltips","translate"];const Rte={__depends__:[Tte],__init__:["modelingFeedback"],modelingFeedback:["type",CL]};var Mte=500,Ite=1250,Dte=1500,ty=Math.round;function Lte(e){return{x:e.x+ty(e.width/2),y:e.y+ty(e.height/2)}}function RL(e,t,n,i,r){function o(s,l,c,u){return r.allowed("elements.move",{shapes:s,delta:l,position:c,target:u})}e.on("shape.move.start",Dte,function(s){var l=s.context,c=s.shape,u=i.get().slice();u.indexOf(c)===-1&&(u=[c]),u=Ote(u),be(l,{shapes:u,validatedShapes:u,shape:c})}),e.on("shape.move.start",Ite,function(s){var l=s.context,c=l.validatedShapes,u;if(u=l.canExecute=o(c),!u)return!1}),e.on("shape.move.move",Mte,function(s){var l=s.context,c=l.validatedShapes,u=s.hover,d={x:s.dx,y:s.dy},h={x:s.x,y:s.y},p;if(p=o(c,d,h,u),l.delta=d,l.canExecute=p,p===null){l.target=null;return}l.target=u}),e.on("shape.move.end",function(s){var l=s.context,c=l.delta,u=l.canExecute,d=u==="attach",h=l.shapes;if(u===!1)return!1;c.x=ty(c.x),c.y=ty(c.y),!(c.x===0&&c.y===0)&&n.moveElements(h,c,l.target,{primaryShape:l.shape,attach:d})}),e.on("element.mousedown",function(s){if(nc(s)){var l=xp(s);if(!l)throw new Error("must supply DOM mousedown event");return a(l,s.element)}});function a(s,l,c,u){if(Ci(c)&&(u=c,c=!1),!(l.waypoints||!l.parent)&&!Gt(s.target).has("djs-hit-no-move")){var d=Lte(l);return t.init(s,d,"shape.move",{cursor:"grabbing",autoActivate:c,data:{shape:l,context:u||{}}}),!0}}this.start=a}RL.$inject=["eventBus","dragging","modeling","selection","rules"];function Ote(e){var t=yp(e,"id");return It(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var kT=499,Db="djs-dragging",PT="drop-ok",AT="drop-not-ok",TT="new-parent",CT="attach-ok";function ML(e,t,n,i){function r(l){var c=o(l),u=Bte(c);return u}function o(l){var c=Zf(l,!0),u=c.flatMap(p=>(p.incoming||[]).concat(p.outgoing||[])),d=c.concat(u),h=[...new Set(d)];return h}function a(l,c){[CT,PT,AT,TT].forEach(function(u){u===c?t.addMarker(l,u):t.removeMarker(l,u)})}function s(l,c,u){i.addDragger(c,l.dragGroup),u&&t.addMarker(c,Db),l.allDraggedElements?l.allDraggedElements.push(c):l.allDraggedElements=[c]}e.on("shape.move.start",kT,function(l){var c=l.context,u=c.shapes,d=c.allDraggedElements,h=r(u);if(!c.dragGroup){var p=Qe("g");He(p,n.cls("djs-drag-group",["no-events"]));var m=t.getActiveLayer();ft(m,p),c.dragGroup=p}h.forEach(function(v){i.addDragger(v,c.dragGroup)}),d?d=Xx([d,o(u)]):d=o(u),ue(d,function(v){t.addMarker(v,Db)}),c.allDraggedElements=d,c.differentParents=Fte(u)}),e.on("shape.move.move",kT,function(l){var c=l.context,u=c.dragGroup,d=c.target,h=c.shape.parent,p=c.canExecute;d&&(p==="attach"?a(d,CT):c.canExecute&&h&&d.id!==h.id?a(d,TT):a(d,c.canExecute?PT:AT)),Oi(u,l.dx,l.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(l){var c=l.context,u=c.target;u&&a(u,null)}),e.on("shape.move.cleanup",function(l){var c=l.context,u=c.allDraggedElements,d=c.dragGroup;ue(u,function(h){t.removeMarker(h,Db)}),d&&ci(d)}),this.makeDraggable=s}ML.$inject=["eventBus","canvas","styles","previewSupport"];function Bte(e){var t=It(e,function(n){return on(n)?Wt(e,la({id:n.source.id}))&&Wt(e,la({id:n.target.id})):!0});return t}function Fte(e){return ZU(yp(e,function(t){return t.parent&&t.parent.id}))!==1}const jte={__depends__:[_5,za,y5,Va,Us,Tp],__init__:["move","movePreview"],move:["type",RL],movePreview:["type",ML]};var IL=".djs-palette-toggle",DL=".entry",$te=IL+", "+DL,Uw="djs-palette-",Gte="shown",qw="open",RT="two-column",Ute=1e3;function Jn(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}Jn.$inject=["eventBus","canvas"];Jn.prototype.registerProvider=function(e,t){t||(t=e,e=Ute),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};Jn.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(zte,{})};Jn.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};Jn.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=_n(Jn.HTML_MARKUP);n.appendChild(i),In(n).add(Uw+Gte),Ir.bind(i,$te,"click",function(r){var o=r.delegateTarget;if(Cy(o,IL))return e.toggle();e.trigger("click",r)}),Vt.bind(i,"mousedown",function(r){r.stopPropagation()}),Ir.bind(i,DL,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})};Jn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};Jn.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,r,o=In(n),a=In(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(RT,r),a.toggle(Uw+RT,r),"open"in e&&(o.toggle(qw,e.open),a.toggle(Uw+qw,e.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})};Jn.prototype._update=function(){var e=rn(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Ty(e),ue(t,function(n,i){var r=n.group||"default",o=rn("[data-group="+Of(r)+"]",e);o||(o=_n('<div class="group"></div>'),pr(o,"data-group",r),e.appendChild(o));var a=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=_n(a);if(o.appendChild(s),!n.separator&&(pr(s,"data-action",i),n.title&&pr(s,"title",n.title),n.className&&qte(s,n.className),n.imageUrl)){var l=_n("<img>");pr(l,"src",n.imageUrl),s.appendChild(l)}}),this.open()};Jn.prototype.trigger=function(e,t,n){var i,r,o=t.delegateTarget||t.target;return o?(i=pr(o,"data-action"),r=t.originalEvent||t,this.triggerEntry(i,e,r,n)):t.preventDefault()};Jn.prototype.triggerEntry=function(e,t,n,i){var r=this._entries,o,a;if(o=r[e],!!o&&(a=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(ui(a)){if(t==="click")return a(n,i)}else if(a[t])return a[t](n,i);n.preventDefault()}};Jn.prototype._layoutChanged=function(){this._toggleState({})};Jn.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n};Jn.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};Jn.prototype.open=function(){this._toggleState({open:!0})};Jn.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Jn.prototype.isActiveTool=function(e){return e&&this._activeTool===e};Jn.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=rn(".djs-palette-entries",this._container),this._toolsContainer=rn("[data-group=tools]",t)),n=this._toolsContainer,ue(n.children,function(i){var r=i.getAttribute("data-action");if(r){var o=In(i);r=r.replace("-tool",""),o.contains("entry")&&r===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};Jn.prototype.isOpen=function(){return In(this._container).has(qw)};Jn.prototype._getParentContainer=function(){return this._canvas.getContainer()};Jn.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function qte(e,t){var n=In(e),i=bt(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}function zte(e,t){var n=t.getPaletteEntries();return ui(n)?n(e):(ue(n,function(i,r){e[r]=i}),e)}const Hte={__init__:["palette"],palette:["type",Jn]};var LL="crosshair";function Ou(e,t,n,i,r,o,a){this._selection=r,this._dragging=n,this._mouse=a;var s=this,l={create:function(c){var u=t.getActiveLayer(),d;d=c.frame=Qe("rect"),He(d,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),ft(u,d)},update:function(c){var u=c.frame,d=c.bbox;He(u,{x:d.x,y:d.y,width:d.width,height:d.height})},remove:function(c){c.frame&&ci(c.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(c){var u=c.originalEvent.target;!c.hover&&!(u instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(c.originalEvent,!0)})}),e.on("lasso.end",0,function(c){var u=c.context,d=Lb(c),h=i.filter(function(m){return m}),p=qv(c);s.select(h,d,p?u.selection:[])}),e.on("lasso.start",function(c){var u=c.context;u.bbox=Lb(c),l.create(u),u.selection=r.get()}),e.on("lasso.move",function(c){var u=c.context;u.bbox=Lb(c),l.update(u)}),e.on("lasso.cleanup",function(c){var u=c.context;l.remove(u)}),e.on("element.mousedown",1500,function(c){if(qv(c))return s.activateLasso(c.originalEvent),!0})}Ou.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];Ou.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:LL,data:{context:{}}})};Ou.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:LL,data:{context:{}},keepSelection:!0})};Ou.prototype.select=function(e,t,n=[]){var i=zq(e,t);this._selection.select([...n,...Zx(i)])};Ou.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Ou.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function Lb(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}const Vte={__depends__:[d_,um],__init__:["lassoTool"],lassoTool:["type",Ou]};var Ob=1500,OL="grab";function Cp(e,t,n,i,r,o){this._dragging=n,this._mouse=o;var a=this,s=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",Ob,function(l){if(Bf(l))return a.activateMove(l.originalEvent,!0),!1}),s&&s.addListener(Ob,function(l){if(!(!MT(l.keyEvent)||a.isActive())){var c=a._mouse.getLastMoveEvent();a.activateMove(c,!!c)}},"keyboard.keydown"),s&&s.addListener(Ob,function(l){!MT(l.keyEvent)||!a.isActive()||a.toggle()},"keyboard.keyup"),e.on("hand.end",function(l){var c=l.originalEvent.target;if(!l.hover&&!(c instanceof SVGElement))return!1;e.once("hand.ended",function(){a.activateMove(l.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(l){var c=t.viewbox().scale;t.scroll({dx:l.dx*c,dy:l.dy*c})}),e.on("hand.move.end",function(l){var c=l.context,u=c.reactivate;return!Bf(l)&&u&&e.once("hand.move.ended",function(d){a.activateHand(d.originalEvent,!0,!0)}),!1})}Cp.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];Cp.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:OL,data:{context:n||{}}})};Cp.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:OL,data:{context:{reactivate:n}}})};Cp.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};Cp.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function MT(e){return gi("Space",e)}const Wte={__depends__:[d_,um],__init__:["handTool"],handTool:["type",Cp]};var IT="connect-ok",DT="connect-not-ok";function Rp(e,t,n,i,r,o,a){var s=this;this._dragging=t,this._rules=o,this._mouse=a,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(l){var c=l.context,u=l.hover,d=c.canStartConnect=s.canStartConnect(u);d!==null&&(c.startTarget=u,i.addMarker(u,d?IT:DT))}),e.on(["global-connect.out","global-connect.cleanup"],function(l){var c=l.context.startTarget,u=l.context.canStartConnect;c&&i.removeMarker(c,u?IT:DT)}),e.on(["global-connect.ended"],function(l){var c=l.context,u=c.startTarget,d={x:l.x,y:l.y},h=s.canStartConnect(u);if(h)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,u,d)}),!1})}Rp.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];Rp.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};Rp.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};Rp.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};Rp.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const Kte={__depends__:[B5,Va,Us,d_,um],globalConnect:["type",Rp]};function HE(e,t,n,i,r,o,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=a,this._translate=s,e.registerProvider(this)}HE.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];HE.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,r=this._lassoTool,o=this._handTool,a=this._globalConnect,s=this._translate;function l(d,h,p,m,v){function _(b){var E=n.createShape(be({type:d},v));t.start(b,E)}return{group:h,className:p,title:m,action:{dragstart:_,click:_}}}function c(d){var h=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),p=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:h});t.start(d,[h,p],{hints:{autoSelect:[h]}})}function u(d){t.start(d,n.createParticipantShape())}return be(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate hand tool"),action:{click:function(d){o.activateHand(d)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate lasso tool"),action:{click:function(d){r.activateSelection(d)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate create/remove space tool"),action:{click:function(d){i.activateSelection(d)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate global connect tool"),action:{click:function(d){a.start(d)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create start event")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create intermediate/boundary event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create end event")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",s("Create gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",s("Create task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create data object reference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:s("Create expanded sub-process"),action:{dragstart:c,click:c}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create pool/participant"),action:{dragstart:u,click:u}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",s("Create group"))}),e};const Yte={__depends__:[Hte,u_,FD,Vte,Wte,Kte,Gy],__init__:["paletteProvider"],paletteProvider:["type",HE]};var Jte=250;function VE(e,t,n,i,r){je.call(this,e);function o(s){var l=s.canExecute.replacements;ue(l,function(c){var u=c.oldElementId,d={type:c.newElementType};if(!s.visualReplacements[u]){var h=t.get(u);be(d,{x:h.x,y:h.y});var p=n.createShape(d);i.addShape(p,h.parent);var m=rn('[data-element-id="'+Of(h.id)+'"]',s.dragGroup);m&&He(m,{display:"none"});var v=r.addDragger(p,s.dragGroup);s.visualReplacements[u]=v,i.removeShape(p)}})}function a(s){var l=s.visualReplacements;ue(l,function(c,u){var d=rn('[data-element-id="'+Of(u)+'"]',s.dragGroup);d&&He(d,{display:"inline"}),c.remove(),l[u]&&delete l[u]})}e.on("shape.move.move",Jte,function(s){var l=s.context,c=l.canExecute;l.visualReplacements||(l.visualReplacements={}),c&&c.replacements?o(l):a(l)})}VE.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];We(VE,je);const Xte={__depends__:[Tp],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",VE]};var Zte=1250,Bb=40,Qte=20,ene=10,LT=20,BL=["x","y"],tne=Math.abs;function FL(e){e.on(["connect.hover","connect.move","connect.end"],Zte,function(t){var n=t.context,i=n.canExecute,r=n.start,o=n.hover,a=n.source,s=n.target;t.originalEvent&&oo(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&o&&nne(t,o,ane(o)),o&&one(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=Co(r),Ct(o,["bpmn:Event","bpmn:Gateway"])&&OT(t,Co(o)),Ct(o,["bpmn:Task","bpmn:SubProcess"])&&ine(t,o),F(a,"bpmn:BoundaryEvent")&&s===a.host&&rne(t)):jL(i,"bpmn:MessageFlow")?(F(r,"bpmn:Event")&&(n.connectionStart=Co(r)),F(o,"bpmn:Event")&&OT(t,Co(o))):n.connectionStart=n.initialConnectionStart)})}FL.$inject=["eventBus"];function nne(e,t,n){BL.forEach(function(i){var r=$L(i,t);e[i]<t[i]+n?Kn(e,i,t[i]+n):e[i]>t[i]+r-n&&Kn(e,i,t[i]+r-n)})}function ine(e,t){var n=Co(t);BL.forEach(function(i){sne(e,t,i)&&Kn(e,i,n[i])})}function rne(e){var t=e.context,n=t.source,i=t.target;if(!lne(t)){var r=Co(n),o=tr(r,i,-10),a=[];/top|bottom/.test(o)&&a.push("x"),/left|right/.test(o)&&a.push("y"),a.forEach(function(s){var l=e[s],c;tne(l-r[s])<Bb&&(l>r[s]?c=r[s]+Bb:c=r[s]-Bb,Kn(e,s,c))})}}function OT(e,t){Kn(e,"x",t.x),Kn(e,"y",t.y)}function jL(e,t){return e&&e.type===t}function one(e,t){return Jl(t,function(n){return jL(e,n)})}function $L(e,t){return e==="x"?t.width:t.height}function ane(e){return F(e,"bpmn:Task")?ene:Qte}function sne(e,t,n){return e[n]>t[n]+LT&&e[n]<t[n]+$L(n,t)-LT}function lne(e){var t=e.hover,n=e.source;return t&&n&&t===n}function hc(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}hc.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};hc.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};hc.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};hc.prototype.getSnapLocations=function(){return this._snapLocations};hc.prototype.setSnapLocations=function(e){this._snapLocations=e};hc.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new C_,n.initDefaults(this._defaultSnaps)),n};function C_(){this._snapValues={}}C_.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};C_.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&kY(e[n],r[n],i)};C_.prototype.initDefaults=function(e){var t=this;ue(e||{},function(n,i){ue(n,function(r){t.add(i,r)})})};var cne=1250;function Wa(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],cne,function(r){var o=r.context,a=o.shape,s=o.snapContext,l=o.target;if(!(r.originalEvent&&oo(r.originalEvent))&&!(sp(r)||!l)){var c=s.pointsForTarget(l);c.initialized||(c=i.addSnapTargetPoints(c,a,l),c.initialized=!0),n.snap(r,c)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}Wa.$inject=["elementRegistry","eventBus","snapping"];Wa.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,i=n.shape,r=n.snapContext;r||(r=n.snapContext=new hc);var o;t.get(i.id)?o=Co(i,e):o={x:e.x+Co(i).x,y:e.y+Co(i).y};var a={x:o.x-i.width/2,y:o.y-i.height/2},s={x:o.x+i.width/2,y:o.y+i.height/2};return r.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),qt(i)||(r.setSnapOrigin("top-left",{x:a.x-e.x,y:a.y-e.y}),r.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),r};Wa.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return ue(i,function(r){if(qt(r)){qt(t)&&e.add("mid",Co(r));return}if(on(r)){if(r.waypoints.length<3)return;var o=r.waypoints.slice(1,-1);ue(o,function(a){e.add("mid",a)});return}e.add("mid",Co(r))}),!pt(t.x)||!pt(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",Co(t)),e};Wa.prototype.getSnapTargets=function(e,t){return GI(t).filter(function(n){return!une(n)})};function une(e){return!!e.hidden}var BT=1500;function Mp(e,t){t.invoke(Wa,this),e.on(["create.move","create.end"],BT,fne),e.on(["create.move","create.end","shape.move.move","shape.move.end"],BT,function(n){var i=n.context,r=i.canExecute,o=i.target,a=r&&(r==="attach"||r.attach);a&&!sp(n)&&dne(n,o)})}We(Mp,Wa);Mp.$inject=["eventBus","injector"];Mp.prototype.initSnap=function(e){var t=Wa.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return ue(n.outgoing,function(r){var o=r.waypoints[0];o=o.original||o,t.setSnapOrigin(r.id+"-docking",jT(o,i,e))}),ue(n.incoming,function(r){var o=r.waypoints[r.waypoints.length-1];o=o.original||o,t.setSnapOrigin(r.id+"-docking",jT(o,i,e))}),F(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};Mp.prototype.addSnapTargetPoints=function(e,t,n){Wa.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);ue(i,function(o){(hne(o)||pne([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",jI(o)),e.add("bottom-right",$I(o)))});var r=this._elementRegistry;return ue(t.incoming,function(o){if(r.get(t.id)){FT(i,o.source)||e.add("mid",ht(o.source));var a=o.waypoints[0];e.add(o.id+"-docking",a.original||a)}}),ue(t.outgoing,function(o){if(r.get(t.id)){FT(i,o.target)||e.add("mid",ht(o.target));var a=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",a.original||a)}}),F(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};Mp.prototype.getSnapTargets=function(e,t){return Wa.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!F(n,"bpmn:Lane")})};function dne(e,t){var n=at(t),i=hD(e,t),r=e.context,o=r.shape,a;o.parent?a={x:0,y:0}:a=ht(o),/top/.test(i)?Kn(e,"y",n.top-a.y):/bottom/.test(i)&&Kn(e,"y",n.bottom-a.y),/left/.test(i)?Kn(e,"x",n.left-a.x):/right/.test(i)&&Kn(e,"x",n.right-a.x)}function pne(e,t){return e.every(function(n){return F(n,t)})}function hne(e){return F(e,"bpmn:SubProcess")&&Bt(e)?!0:F(e,"bpmn:Participant")}function fne(e){var t=e.context,n=t.createConstraints;if(n){var i=n.top,r=n.right,o=n.bottom,a=n.left;(a&&a>=e.x||r&&r<=e.x)&&Kn(e,"x",e.x),(i&&i>=e.y||o&&o<=e.y)&&Kn(e,"y",e.y)}}function FT(e,t){return e.indexOf(t)!==-1}function jT(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var mne=1250;function Pm(e,t){var n=this;e.on(["resize.start"],function(i){n.initSnap(i)}),e.on(["resize.move","resize.end"],mne,function(i){var r=i.context,o=r.shape,a=o.parent,s=r.direction,l=r.snapContext;if(!(i.originalEvent&&oo(i.originalEvent))&&!sp(i)){var c=l.pointsForTarget(a);c.initialized||(c=n.addSnapTargetPoints(c,o,a,s),c.initialized=!0),yne(s)&&Kn(i,"x",i.x),_ne(s)&&Kn(i,"y",i.y),t.snap(i,c)}}),e.on(["resize.cleanup"],function(){t.hide()})}Pm.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,r=t.snapContext;r||(r=t.snapContext=new hc);var o=GL(n,i);return r.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),r};Pm.prototype.addSnapTargetPoints=function(e,t,n,i){var r=this.getSnapTargets(t,n);return ue(r,function(o){e.add("corner",$I(o)),e.add("corner",jI(o))}),e.add("corner",GL(t,i)),e};Pm.$inject=["eventBus","snapping"];Pm.prototype.getSnapTargets=function(e,t){return GI(t).filter(function(n){return!gne(n,e)&&!on(n)&&!vne(n)&&!qt(n)})};function GL(e,t){var n=ht(e),i=at(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function gne(e,t){return e.host===t}function vne(e){return!!e.hidden}function yne(e){return e==="n"||e==="s"}function _ne(e){return e==="e"||e==="w"}var bne=7,wne=1e3;function fc(e){this._canvas=e,this._asyncHide=DM(pa(this.hide,this),wne)}fc.$inject=["canvas"];fc.prototype.snap=function(e,t){var n=e.context,i=n.snapContext,r=i.getSnapLocations(),o={x:sp(e,"x"),y:sp(e,"y")};ue(r,function(a){var s=i.getSnapOrigin(a),l={x:e.x+s.x,y:e.y+s.y};if(ue(["x","y"],function(c){var u;o[c]||(u=t.snap(l,a,c,bne),u!==void 0&&(o[c]={value:u,originValue:u-s[c]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),ue(["x","y"],function(a){var s=o[a];Ci(s)&&Kn(e,a,s.originValue)})};fc.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=Qe("path");return He(n,{d:"M0,0 L0,0"}),Gt(n).add("djs-snap-line"),ft(t,n),{update:function(i){pt(i)?e==="horizontal"?He(n,{d:"M-100000,"+i+" L+100000,"+i,display:""}):He(n,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):He(n,{display:"none"})}}};fc.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};fc.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};fc.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};fc.prototype.hide=function(){ue(this._snapLines,function(e){e.update()})};const xne={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",Wa],resizeSnapping:["type",Pm],snapping:["type",fc]},Ene={__depends__:[xne],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",FL],createMoveSnapping:["type",Mp]};var UL=300;function mt(e,t,n,i){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=i,this._container=this._getBoxHtml(),this._searchInput=rn(mt.INPUT_SELECTOR,this._container),this._resultsContainer=rn(mt.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}mt.$inject=["canvas","eventBus","selection","translate"];mt.prototype._bindEvents=function(){var e=this;function t(n,i,r,o){e._eventMaps.push({el:n,type:r,listener:Ir.bind(n,i,r,o)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,mt.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,mt.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,mt.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,mt.INPUT_SELECTOR,"keydown",function(n){gi("ArrowUp",n)&&n.preventDefault(),gi("ArrowDown",n)&&n.preventDefault()}),t(this._container,mt.INPUT_SELECTOR,"keyup",function(n){if(gi("Escape",n))return e.close();if(gi("Enter",n)){var i=e._getCurrentResult();return i?e._select(i):e.close(!1)}if(gi("ArrowUp",n))return e._scrollToDirection(!0);if(gi("ArrowDown",n))return e._scrollToDirection();gi(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};mt.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){Ir.unbind(e.el,e.type,e.listener)})};mt.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n=n.filter(function(r){return!t._canvas.getRootElements().includes(r.element)}),!n.length){this._clearMarkers(),this._selection.select(null);return}n.forEach(function(r){var o=r.element.id,a=t._createResultNode(r,o);t._results[o]={element:r.element,node:a}});var i=rn(mt.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}};mt.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};mt.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}};mt.prototype._clearResults=function(){Ty(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};mt.prototype._clearMarkers=function(){for(var e in this._results)this._canvas.removeMarker(this._results[e].element,"djs-search-preselected")};mt.prototype._getCurrentResult=function(){return rn(mt.RESULT_SELECTED_SELECTOR,this._resultsContainer)};mt.prototype._createResultNode=function(e,t){var n=_n(mt.RESULT_HTML);return e.primaryTokens.length>0&&$T(n,e.primaryTokens,mt.RESULT_PRIMARY_HTML),$T(n,e.secondaryTokens,mt.RESULT_SECONDARY_HTML),pr(n,mt.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};mt.prototype.registerProvider=function(e){this._searchProvider=e};mt.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._bindEvents(),this._open=!0,In(this._canvas.getContainer()).add("djs-search-open"),In(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};mt.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,In(this._canvas.getContainer()).remove("djs-search-open"),In(this._container).remove("open"),this._clearMarkers(),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"))};mt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};mt.prototype.isOpen=function(){return this._open};mt.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){this._clearMarkers(),t&&In(t).remove(mt.RESULT_SELECTED_CLASS);var n=pr(e,mt.RESULT_ID_ATTRIBUTE),i=this._results[n].element;In(e).add(mt.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(i,{top:UL}),this._selection.select(i),this._canvas.addMarker(i,"djs-search-preselected"),this._eventBus.fire("searchPad.preselected",i)}};mt.prototype._select=function(e){var t=pr(e,mt.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:UL}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};mt.prototype._getBoxHtml=function(){const e=_n(mt.BOX_HTML),t=rn(mt.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function $T(e,t,n){var i=Sne(t),r=_n(n);r.innerHTML=i,e.appendChild(r)}function Sne(e){var t="";return e.forEach(function(n){n.matched?t+='<b class="'+mt.RESULT_HIGHLIGHT_CLASS+'">'+gw(n.matched)+"</b>":t+=gw(n.normal)}),t!==""?t:null}mt.CONTAINER_SELECTOR=".djs-search-container";mt.INPUT_SELECTOR=".djs-search-input input";mt.RESULTS_CONTAINER_SELECTOR=".djs-search-results";mt.RESULT_SELECTOR=".djs-search-result";mt.RESULT_SELECTED_CLASS="djs-search-result-selected";mt.RESULT_SELECTED_SELECTOR="."+mt.RESULT_SELECTED_CLASS;mt.RESULT_ID_ATTRIBUTE="data-result-id";mt.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";mt.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;mt.RESULT_HTML='<div class="djs-search-result"></div>';mt.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';mt.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const Nne={__depends__:[Gy,qy,za],searchPad:["type",mt]};function WE(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}WE.$inject=["elementRegistry","searchPad","canvas"];WE.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(i){return!qt(i)&&!t.includes(i)});return n.reduce(function(i,r){var o=ro(r),a=qT(o,e),s=qT(r.id,e);return ny(a)||ny(s)?[...i,{primaryTokens:a,secondaryTokens:s,element:r}]:i},[]).sort(function(i,r){return GT(i.primaryTokens,r.primaryTokens)||GT(i.secondaryTokens,r.secondaryTokens)||UT(ro(i.element),ro(r.element))||UT(i.element.id,r.element.id)}).map(function(i){return{element:i.element,primaryTokens:i.primaryTokens.map(function(r){return Lo(r,["index"])}),secondaryTokens:i.secondaryTokens.map(function(r){return Lo(r,["index"])})}})};function zw(e){return"matched"in e}function ny(e){return e.find(zw)}function GT(e,t){const n=ny(e),i=ny(t);if(n&&!i)return-1;if(!n&&i)return 1;if(!n&&!i)return 0;const r=e.find(zw),o=t.find(zw);return r.index<o.index?-1:r.index>o.index?1:0}function UT(e="",t=""){return e.localeCompare(t)}function qT(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return r>-1?(r!==0&&n.push({normal:i.slice(0,r),index:0}),n.push({matched:i.slice(r,r+t.length),index:r}),t.length+r<e.length&&n.push({normal:i.slice(r+t.length),index:r+t.length})):n.push({normal:i,index:0}),n}const kne={__depends__:[Nne],__init__:["bpmnSearch"],bpmnSearch:["type",WE]};var Pne='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function ja(e){rm.call(this,e)}We(ja,rm);ja.Viewer=ic;ja.NavigatedViewer=Ff;ja.prototype.createDiagram=function(){return this.importXML(Pne)};ja.prototype._interactionModules=[V6,J6,Q6];ja.prototype._modelingModules=[jK,M5,lY,nY,AY,B5,DY,Lee,MD,u_,jee,Uee,ote,ste,lte,hte,Nte,tL,Rte,jte,Yte,Xte,PL,Ene,kne];ja.prototype._modules=[].concat(ic.prototype._modules,ja.prototype._interactionModules,ja.prototype._modelingModules);const zT={"Activate the hand tool":"Ativar ferramenta de mo","Activate hand tool":"Ativar ferramenta de mo","Hand tool":"Ferramenta de mo","Activate the lasso tool":"Ativar ferramenta de lao","Activate lasso tool":"Ativar ferramenta de lao","Lasso tool":"Ferramenta de lao","Activate the create/remove space tool":"Ativar ferramenta de criar/remover espao","Activate create/remove space tool":"Ativar ferramenta de criar/remover espao","Create/remove space tool":"Ferramenta de criar/remover espao","Space tool":"Ferramenta de espao","Activate the global connect tool":"Ativar ferramenta de conexo global","Activate global connect tool":"Ativar ferramenta de conexo global","Global connect tool":"Ferramenta de conexo global","Connect tool":"Ferramenta de conexo","Create StartEvent":"Criar Evento de Incio","Create EndEvent":"Criar Evento de Fim","Create Task":"Criar Tarefa","Create Gateway":"Criar Gateway","Create Intermediate/Boundary Event":"Criar Evento Intermedirio","Create Pool/Participant":"Criar Pool/Participante","Create DataObjectReference":"Criar Objeto de Dados","Create DataStoreReference":"Criar Armazm de Dados","Create Group":"Criar Grupo","Create expanded SubProcess":"Criar Sub-Processo expandido","Create CallActivity":"Criar Atividade de Chamada","Append Task":"Adicionar Tarefa","Append EndEvent":"Adicionar Evento de Fim","Append Gateway":"Adicionar Gateway","Append Intermediate/Boundary Event":"Adicionar Evento Intermedirio","Append TextAnnotation":"Adicionar Anotao","Connect using Sequence/MessageFlow or Association":"Conectar usando Fluxo de Sequncia/Mensagem","Connect using DataInputAssociation":"Conectar usando Associao de Entrada","Change type":"Alterar tipo",Delete:"Excluir",Remove:"Remover",Task:"Tarefa","Send Task":"Tarefa de Envio","Receive Task":"Tarefa de Recebimento","User Task":"Tarefa de Usurio","Manual Task":"Tarefa Manual","Business Rule Task":"Tarefa de Regra de Negcio","Service Task":"Tarefa de Servio","Script Task":"Tarefa de Script","Call Activity":"Atividade de Chamada","Sub Process (collapsed)":"Sub-Processo (recolhido)","Sub Process (expanded)":"Sub-Processo (expandido)","Exclusive Gateway":"Gateway Exclusivo","Parallel Gateway":"Gateway Paralelo","Inclusive Gateway":"Gateway Inclusivo","Complex Gateway":"Gateway Complexo","Event based Gateway":"Gateway baseado em Evento","Start Event":"Evento de Incio","Intermediate Throw Event":"Evento Intermedirio de Envio","End Event":"Evento de Fim","Message Start Event":"Evento de Incio por Mensagem","Timer Start Event":"Evento de Incio por Temporizador","Conditional Start Event":"Evento de Incio Condicional","Signal Start Event":"Evento de Incio por Sinal","Message Intermediate Catch Event":"Evento Intermedirio de Captura de Mensagem","Message Intermediate Throw Event":"Evento Intermedirio de Envio de Mensagem","Timer Intermediate Catch Event":"Evento Intermedirio de Temporizador","Escalation Intermediate Throw Event":"Evento Intermedirio de Escalao","Conditional Intermediate Catch Event":"Evento Intermedirio Condicional","Link Intermediate Catch Event":"Evento Intermedirio de Link (Captura)","Link Intermediate Throw Event":"Evento Intermedirio de Link (Envio)","Compensation Intermediate Throw Event":"Evento Intermedirio de Compensao","Signal Intermediate Catch Event":"Evento Intermedirio de Captura de Sinal","Signal Intermediate Throw Event":"Evento Intermedirio de Envio de Sinal","Message End Event":"Evento de Fim por Mensagem","Escalation End Event":"Evento de Fim por Escalao","Error End Event":"Evento de Fim por Erro","Cancel End Event":"Evento de Fim por Cancelamento","Compensation End Event":"Evento de Fim por Compensao","Signal End Event":"Evento de Fim por Sinal","Terminate End Event":"Evento de Fim por Terminao","Message Boundary Event":"Evento de Limite por Mensagem","Timer Boundary Event":"Evento de Limite por Temporizador","Escalation Boundary Event":"Evento de Limite por Escalao","Conditional Boundary Event":"Evento de Limite Condicional","Error Boundary Event":"Evento de Limite por Erro","Cancel Boundary Event":"Evento de Limite por Cancelamento","Signal Boundary Event":"Evento de Limite por Sinal","Compensation Boundary Event":"Evento de Limite por Compensao","Non-interrupting Message Boundary Event":"Evento de Limite por Mensagem (No-interruptivo)","Non-interrupting Timer Boundary Event":"Evento de Limite por Temporizador (No-interruptivo)","Non-interrupting Escalation Boundary Event":"Evento de Limite por Escalao (No-interruptivo)","Non-interrupting Conditional Boundary Event":"Evento de Limite Condicional (No-interruptivo)","Non-interrupting Signal Boundary Event":"Evento de Limite por Sinal (No-interruptivo)",Participant:"Participante",Pool:"Pool",Lane:"Raia","Data Object":"Objeto de Dados","Data Store":"Armazm de Dados","Text Annotation":"Anotao de Texto",Group:"Grupo","Sequence Flow":"Fluxo de Sequncia","Message Flow":"Fluxo de Mensagem",Association:"Associao","Data Association":"Associao de Dados","Append {type}":"Adicionar {type}","Add Lane above":"Adicionar Raia acima","Add Lane below":"Adicionar Raia abaixo","Divide into two Lanes":"Dividir em duas Raias","Divide into three Lanes":"Dividir em trs Raias","element name":"nome do elemento","no parent for {element} in {parent}":"sem pai para {element} em {parent}","no shape type specified":"tipo de forma no especificado","flow elements must be children of pools/participants":"elementos de fluxo devem ser filhos de pools/participantes","no process or collaboration to display":"nenhum processo ou colaborao para exibir","element {element} referenced by {referenced}#{property} not yet drawn":"elemento {element} referenciado por {referenced}#{property} ainda no desenhado","out of bounds release":"liberao fora dos limites","more than {count} child lanes":"mais de {count} raias filhas"};function Hw(e,t){return t=t||{},(zT[e]||e).replace(/{([^}]+)}/g,function(i,r){const o=t[r];return o!==void 0?zT[o]||o:"{"+r+"}"})}const Ane={translate:["value",Hw]};var Tne=1e3;function fo(e){this._eventBus=e}fo.$inject=["eventBus"];function Cne(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}fo.prototype.on=function(e,t,n,i,r,o){if((J0(t)||Qv(t))&&(o=r,r=i,i=n,n=t,t=null),J0(n)&&(o=r,r=i,i=n,n=Tne),SQ(r)&&(o=r,r=!1),!J0(i))throw new Error("handlerFn must be a function");nL(e)||(e=[e]);var a=this._eventBus;X0(e,function(s){var l=["commandStack",s,t].filter(function(c){return c}).join(".");a.on(l,n,r?Cne(i,o):i,o)})};fo.prototype.canExecute=Vs("canExecute");fo.prototype.preExecute=Vs("preExecute");fo.prototype.preExecuted=Vs("preExecuted");fo.prototype.execute=Vs("execute");fo.prototype.executed=Vs("executed");fo.prototype.postExecute=Vs("postExecute");fo.prototype.postExecuted=Vs("postExecuted");fo.prototype.revert=Vs("revert");fo.prototype.reverted=Vs("reverted");function Vs(e){return function(n,i,r,o,a){(J0(n)||Qv(n))&&(a=o,o=r,r=i,i=n,n=null),this.on(n,e,i,r,o,a)}}function Ip(e){fo.call(this,e),this.init()}Ip.$inject=["eventBus"];We(Ip,fo);Ip.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){i.canExecute(r,t,function(o,a,s){return n(o)},!0)})};Ip.prototype.init=function(){};function R_(e){Ip.call(this,e)}We(R_,Ip);R_.$inject=["eventBus"];R_.prototype.init=function(){this.addRule("shape.resize",1500,function(e){const t=e.shape;if(t&&t.type==="bpmn:Task"){const n=t.businessObject;if(n&&n.name&&n.name.startsWith("__IMAGE__:"))return{minBounds:{width:50,height:50}}}})};const Rne={__init__:["customResizeProvider"],customResizeProvider:["type",R_]};function Mne(e,t,n,i){const r=e.x,o=e.y,a=t.x,s=t.y,l=n.x,c=n.y,u=i.x,d=i.y,h=(r-a)*(c-d)-(o-s)*(l-u);if(Math.abs(h)<1e-4)return null;const p=((r-l)*(c-d)-(o-c)*(l-u))/h,m=-((r-a)*(o-c)-(o-s)*(r-l))/h;return p>.01&&p<.99&&m>.01&&m<.99?{x:r+p*(a-r),y:o+p*(s-o)}:null}function Ine(e,t){const n=[],i=e.waypoints;return!i||i.length<2||(t.forEach(r=>{if(r!==e&&!(!r.waypoints||r.waypoints.length<2))for(let o=0;o<i.length-1;o++){const a=i[o],s=i[o+1];for(let l=0;l<r.waypoints.length-1;l++){const c=r.waypoints[l],u=r.waypoints[l+1],d=Mne(a,s,c,u);d&&n.push({point:d,segmentIndex:o})}}}),n.sort((r,o)=>{if(r.segmentIndex!==o.segmentIndex)return r.segmentIndex-o.segmentIndex;const a=i[r.segmentIndex],s=i[o.segmentIndex],l=Math.hypot(r.point.x-a.x,r.point.y-a.y),c=Math.hypot(o.point.x-s.x,o.point.y-s.y);return l-c})),n}function Dne(e,t,n=8){if(!e||e.length<2)return"";if(!t||t.length===0){let o=`M ${e[0].x} ${e[0].y}`;for(let a=1;a<e.length;a++)o+=` L ${e[a].x} ${e[a].y}`;return o}let i=`M ${e[0].x} ${e[0].y}`,r=0;for(let o=0;o<e.length-1;o++){const a=e[o],s=e[o+1],l=[];for(;r<t.length&&t[r].segmentIndex===o;)l.push(t[r].point),r++;if(l.length===0)i+=` L ${s.x} ${s.y}`;else{const c=s.x-a.x,u=s.y-a.y,d=Math.hypot(c,u),h=c/d,p=u/d;l.forEach(m=>{const v={x:m.x-h*n,y:m.y-p*n},_={x:m.x+h*n,y:m.y+p*n};i+=` L ${v.x} ${v.y}`,i+=` A ${n} ${n} 0 0 1 ${_.x} ${_.y}`}),i+=` L ${s.x} ${s.y}`}}return i}function qL(e,t,n){const i=()=>{const r=t.filter(o=>o.waypoints);r.forEach(o=>{const a=Ine(o,r);if(a.length>0){const s=n.getGraphics(o);if(s){const l=s.querySelector("path.djs-visual");if(l){const c=Dne(o.waypoints,a);l.setAttribute("d",c)}}}})};e.on("connection.changed",i),e.on("connection.added",i),e.on("shape.move.end",i),e.on("commandStack.changed",i),e.on("import.done",()=>{setTimeout(i,100)})}qL.$inject=["eventBus","elementRegistry","canvas"];const Lne={__init__:["connectionCrossings"],connectionCrossings:["type",qL]},One=`<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0"
  id="Definitions_ComercialV9"
  targetNamespace="http://fyness.com/bpmn/comercial-v9">

    <bpmn2:collaboration id="Collaboration_Comercial">
    <bpmn2:participant id="Participant_Educacao" name=" EDUCAO - Alunos (6 Meses Grtis)" processRef="Process_Educacao" />
    <bpmn2:participant id="Participant_Indicacao" name=" INDICAO - Parceiro (Ativo + Passivo)" processRef="Process_Indicacao" />
    <bpmn2:participant id="Participant_Conteudo" name=" PRODUO CONTEDO - Instagram" processRef="Process_Conteudo" />
    <bpmn2:participant id="Participant_Prospeccao" name=" PROSPECO ATIVA - Redes Sociais" processRef="Process_Prospeccao" />
    <bpmn2:participant id="Participant_Google" name=" GOOGLE ADS - Alta Inteno" processRef="Process_Google" />
    <bpmn2:participant id="Participant_Meta" name=" META ADS - Descoberta" processRef="Process_Meta" />
    <bpmn2:participant id="Participant_Nucleo" name=" NCLEO FINANCEIRO - Gateway Asaas" processRef="Process_Nucleo" />
  </bpmn2:collaboration>

    <bpmn2:process id="Process_Educacao" isExecutable="false">

    <bpmn2:startEvent id="Start_Educacao_Software" name="Comprou Software (Semestral)">
      <bpmn2:documentation>PORTA A: Comprou o SOFTWARE (plano semestral)
Mentalidade: "Comprei a FERRAMENTA"
Bnus: Ganha Curso de Gesto Completo</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Edu_Soft_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:startEvent id="Start_Educacao_Curso" name="Comprou Curso (Mtodo)">
      <bpmn2:documentation>PORTA B: Comprou o CURSO (mtodo)
Mentalidade: "Comprei o CONHECIMENTO"
Bnus: Ganha 6 Meses Fyness Grtis</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Edu_Curso_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:endEvent id="End_Cliente_Ativo_Educacao" name="Cliente Ativo (Renovado)">
      <bpmn2:incoming>Flow_Edu_Renov_Anual</bpmn2:incoming>
      <bpmn2:incoming>Flow_Edu_Renov_Mensal</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:endEvent id="End_Cliente_Perdido_Educacao" name="Cliente Perdido (Churn)">
      <bpmn2:documentation>CHURN - MOTIVOS PROVVEIS:
- No viu valor
- No criou hbito
- Problema financeiro
- Voltou para planilha

AO PS-CHURN: Grupo de nurturing de longo prazo (contedo educativo)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Recuperou_Nao</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:task id="Task_Aula_Setup" name="Aula Trava-Zap: Setup em 10 min">
      <bpmn2:documentation> AULA INAUGURAL (TRAVA-ZAP):

ESTRATGIA: Aula curta e direta ao ponto
DURAO: 10 minutos mximo

CONTEDO:
1. Login no Fyness
2. Conectar WhatsApp
3. Fazer 1 lanamento de teste
4. Ver o grfico aparecer

GANCHO: "Voc vai lanar SUA primeira receita agora."</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Email_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Setup_1</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_CS_Liga_Ativacao" name="CS liga: Ajuda no Zoom">
      <bpmn2:documentation> LIGAO CS (D+7 - NO ATIVOU):

SCRIPT:
"Oi [Nome], vi que voc garantiu os 6 meses mas ainda no fez o setup.
Tem algo travando?

Posso te ajudar no Zoom agora em 15 minutos?"

OBJETIVO: Destravar. Se recusar 2x, marcar como "risco de cancelamento".</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Ativou_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_CS_Ativa</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_M1_Desafio_DRE" name="M1: Desafio do Primeiro DRE na Comunidade">
      <bpmn2:documentation> MS 1 - DESAFIO PRIMEIRO DRE:

MENSAGEM COMUNIDADE:
"Pessoal, quem vai postar o primeiro DRE do ms at sexta?
Quem postar ganha um Relatrio Personalizado comigo."

PSICOLOGIA: Gamificao + Prova Social
OBJETIVO: Criar hbito de uso mensal</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Merge_Ativa</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_M1</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_Renovacao_Anual" name="Anual: 20% desconto + Curso 2.0">
      <bpmn2:documentation> RENOVAO ANUAL (IDEAL):

BENEFCIOS:
- 20% de desconto
- Acesso ao Curso 2.0 (Gesto Avanada)
- Suporte prioritrio
- Garantia de histrico vitalcio

MENSAGEM:
"Parabns! Voc garantiu mais 12 meses de tranquilidade.
Seu histrico est seguro e voc agora tem acesso ao mdulo avanado."</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Tipo_Anual</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Renov_Anual</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_Renovacao_Mensal" name="Mensal: Preo cheio recorrente">
      <bpmn2:documentation> RENOVAO MENSAL:

CONDIES:
- Preo cheio mensal
- Mantm histrico
- Pode mudar para anual a qualquer momento

MENSAGEM:
"Seu plano mensal est ativo. Voc mantm todo o histrico.
Dica: Mudando para anual voc economiza 20%."</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Tipo_Mensal</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Renov_Mensal</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_Bloqueio_Leitura" name="Bloqueio Lgico: Modo Leitura com Cadeado">
      <bpmn2:documentation> BLOQUEIO LGICO (MODO LEITURA):

O QUE ACONTECE:
- Ele entra no Fyness
- V os grficos lindos dele
- Mas o boto de microfone (udio) est bloqueado com cadeado
- Boto "Novo Lanamento" tambm bloqueado

MENSAGEM NA TELA:
"Sua licena expirou. Renove para continuar controlando seu lucro."

OBJETIVO: Mostrar o que ele vai PERDER se no renovar.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Renovou_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Bloqueio</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_CS_Recuperacao" name="CS Liga Final: Vai jogar 6 meses fora?">
      <bpmn2:documentation> LIGAO CS (RECOVERY FINAL):

SCRIPT:
"[Nome], vi que sua licena expirou.

Voc tem 6 meses de histrico valioso a.
Vai jogar isso fora e voltar pra planilha?

Consegui liberar uma condio especial pra voc renovar agora."

URGNCIA: ltima chance antes de perder os dados.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Bloqueio</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_CS_Recovery</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:serviceTask id="Task_Tag_Software" name="Tag: [CLIENTE_BUNDLE_SOFT]">
      <bpmn2:documentation>CRM ACTION:
Tag: [CLIENTE_BUNDLE_SOFT]
Perfil: Comprou ferramenta, ganhou mtodo
Bnus: Curso Completo de Gesto Financeira</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Soft_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Soft_2</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:serviceTask id="Task_Tag_Curso" name="Tag: [ALUNO_BUNDLE_CURSO]">
      <bpmn2:documentation>CRM ACTION:
Tag: [ALUNO_BUNDLE_CURSO]
Perfil: Comprou mtodo, ganhou ferramenta
Bnus: 6 Meses Fyness Free</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Curso_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Curso_2</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_Email_BoasVindas" name="E-mail: Acesso Liberado (Curso + Software)">
      <bpmn2:documentation> E-MAIL DE BOAS-VINDAS HBRIDO:

ASSUNTO: "Acesso Liberado: Sua Mquina de Lucro (Curso + Software)"

CORPO:
"Parabns! Voc garantiu 6 meses de tranquilidade.

Sua Ferramenta (Fyness): [Link de Ativao]
Seu Manual (Curso): [Link da rea de Membros]

Misso #1: Assista agora  'Aula Inaugural' no curso para configurar o Fyness em 10 minutos."

OBJETIVO: Instalao Imediata. Se no configurar na 1 semana, cancela.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Merge_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Email_1</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_M3_Checkpoint" name="M3: E-mail de Progresso - Economizou R$ X">
      <bpmn2:documentation> MS 3 - CHECKPOINT DE VALOR:

E-MAIL PERSONALIZADO:
"[Nome], voc j tem 90 dias de histrico no Fyness.

Nesse perodo voc:
- Lanou R$ [X] em receitas
- Evitou R$ [Y] em vazamentos
- Economizou [Z] horas de planilha

Nos prximos 3 meses, vamos te mostrar como dobrar esse controle."

OBJETIVO: Mostrar ROI tangvel</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_M2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_M3</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D150_Aviso" name="D+150 (30 dias antes): Aviso Perda de Histrico">
      <bpmn2:documentation> D+150 - AVISO DE PERDA (30 DIAS ANTES):

PSICOLOGIA: Averso  Perda. Ningum quer perder os dados.

MENSAGEM:
"Fala [Nome]. Faltam 30 dias para encerrar seu ciclo de 6 meses.

Voc tem um banco de dados valioso da sua empresa aqui.

Pra voc no perder esse histrico e ter que voltar pra planilha,
o [Scio] liberou uma condio de renovao exclusiva."

CTA: "Quero Garantir Minha Renovao"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_M5</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_D150</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:exclusiveGateway id="Gateway_Merge_Entrada" name="Merge">
      <bpmn2:incoming>Flow_Edu_Soft_2</bpmn2:incoming>
      <bpmn2:incoming>Flow_Edu_Curso_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Merge_1</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Ativou_D7" name="Fez 1 lanamento?">
      <bpmn2:documentation>CHECKPOINT D+7:
Mtrica: Pelo menos 1 lanamento no sistema?
SIM  Continua jornada
NO  CS Liga para Ativar</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Timer_D7</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Ativou_Nao</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Edu_Ativou_Sim</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Merge_Ativacao" name="Merge">
      <bpmn2:incoming>Flow_Edu_Ativou_Sim</bpmn2:incoming>
      <bpmn2:incoming>Flow_Edu_CS_Ativa</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Merge_Ativa</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Renovou" name="Renovou?">
      <bpmn2:documentation>CHECKPOINT D+180:
Renovou o plano?
SIM  Qual tipo de renovao?
NO  Recovery Flow</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_30d</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Renovou_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Edu_Renovou_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Tipo_Renovacao" name="Tipo?">
      <bpmn2:documentation>Tipo de Renovao:
- Anual (ideal)
- Mensal (aceitvel)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_Renovou_Sim</bpmn2:incoming>
      <bpmn2:incoming>Flow_Edu_Recuperou_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Tipo_Anual</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Edu_Tipo_Mensal</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Recuperou" name="Recuperou?">
      <bpmn2:documentation>RESULTADO RECOVERY:
SIM  Volta para renovao
NO  Cliente perdido</bpmn2:documentation>
      <bpmn2:incoming>Flow_Edu_CS_Recovery</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Recuperou_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Edu_Recuperou_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_D7" name="7 dias">
      <bpmn2:incoming>Flow_Edu_Setup_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_Timer_D7</bpmn2:outgoing>
      <bpmn2:timerEventDefinition><bpmn2:timeDuration>P7D</bpmn2:timeDuration></bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_M2" name="60 dias">
      <bpmn2:incoming>Flow_Edu_M1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_M2</bpmn2:outgoing>
      <bpmn2:timerEventDefinition><bpmn2:timeDuration>P60D</bpmn2:timeDuration></bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_M5" name="90 dias">
      <bpmn2:incoming>Flow_Edu_M3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_M5</bpmn2:outgoing>
      <bpmn2:timerEventDefinition><bpmn2:timeDuration>P90D</bpmn2:timeDuration></bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_30d" name="30 dias">
      <bpmn2:incoming>Flow_Edu_D150</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Edu_30d</bpmn2:outgoing>
      <bpmn2:timerEventDefinition><bpmn2:timeDuration>P30D</bpmn2:timeDuration></bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:sequenceFlow id="Flow_Edu_Soft_1" sourceRef="Start_Educacao_Software" targetRef="Task_Tag_Software" />
    <bpmn2:sequenceFlow id="Flow_Edu_Soft_2" sourceRef="Task_Tag_Software" targetRef="Gateway_Merge_Entrada" />
    <bpmn2:sequenceFlow id="Flow_Edu_Curso_1" sourceRef="Start_Educacao_Curso" targetRef="Task_Tag_Curso" />
    <bpmn2:sequenceFlow id="Flow_Edu_Curso_2" sourceRef="Task_Tag_Curso" targetRef="Gateway_Merge_Entrada" />
    <bpmn2:sequenceFlow id="Flow_Edu_Merge_1" sourceRef="Gateway_Merge_Entrada" targetRef="Task_Email_BoasVindas" />
    <bpmn2:sequenceFlow id="Flow_Edu_Email_1" sourceRef="Task_Email_BoasVindas" targetRef="Task_Aula_Setup" />
    <bpmn2:sequenceFlow id="Flow_Edu_Setup_1" sourceRef="Task_Aula_Setup" targetRef="IntermediateTimer_D7" />
    <bpmn2:sequenceFlow id="Flow_Edu_Timer_D7" sourceRef="IntermediateTimer_D7" targetRef="Gateway_Ativou_D7" />
    <bpmn2:sequenceFlow id="Flow_Edu_Ativou_Nao" name="NO" sourceRef="Gateway_Ativou_D7" targetRef="Task_CS_Liga_Ativacao" />
    <bpmn2:sequenceFlow id="Flow_Edu_Ativou_Sim" name="SIM" sourceRef="Gateway_Ativou_D7" targetRef="Gateway_Merge_Ativacao" />
    <bpmn2:sequenceFlow id="Flow_Edu_CS_Ativa" sourceRef="Task_CS_Liga_Ativacao" targetRef="Gateway_Merge_Ativacao" />
    <bpmn2:sequenceFlow id="Flow_Edu_Merge_Ativa" sourceRef="Gateway_Merge_Ativacao" targetRef="Task_M1_Desafio_DRE" />
    <bpmn2:sequenceFlow id="Flow_Edu_M1" sourceRef="Task_M1_Desafio_DRE" targetRef="IntermediateTimer_M2" />
    <bpmn2:sequenceFlow id="Flow_Edu_M2" sourceRef="IntermediateTimer_M2" targetRef="Task_M3_Checkpoint" />
    <bpmn2:sequenceFlow id="Flow_Edu_M3" sourceRef="Task_M3_Checkpoint" targetRef="IntermediateTimer_M5" />
    <bpmn2:sequenceFlow id="Flow_Edu_M5" sourceRef="IntermediateTimer_M5" targetRef="Task_D150_Aviso" />
    <bpmn2:sequenceFlow id="Flow_Edu_D150" sourceRef="Task_D150_Aviso" targetRef="IntermediateTimer_30d" />
    <bpmn2:sequenceFlow id="Flow_Edu_30d" sourceRef="IntermediateTimer_30d" targetRef="Gateway_Renovou" />
    <bpmn2:sequenceFlow id="Flow_Edu_Renovou_Sim" name="SIM" sourceRef="Gateway_Renovou" targetRef="Gateway_Tipo_Renovacao" />
    <bpmn2:sequenceFlow id="Flow_Edu_Renovou_Nao" name="NO" sourceRef="Gateway_Renovou" targetRef="Task_Bloqueio_Leitura" />
    <bpmn2:sequenceFlow id="Flow_Edu_Tipo_Anual" name="Anual" sourceRef="Gateway_Tipo_Renovacao" targetRef="Task_Renovacao_Anual" />
    <bpmn2:sequenceFlow id="Flow_Edu_Tipo_Mensal" name="Mensal" sourceRef="Gateway_Tipo_Renovacao" targetRef="Task_Renovacao_Mensal" />
    <bpmn2:sequenceFlow id="Flow_Edu_Renov_Anual" sourceRef="Task_Renovacao_Anual" targetRef="End_Cliente_Ativo_Educacao" />
    <bpmn2:sequenceFlow id="Flow_Edu_Renov_Mensal" sourceRef="Task_Renovacao_Mensal" targetRef="End_Cliente_Ativo_Educacao" />
    <bpmn2:sequenceFlow id="Flow_Edu_Bloqueio" sourceRef="Task_Bloqueio_Leitura" targetRef="Task_CS_Recuperacao" />
    <bpmn2:sequenceFlow id="Flow_Edu_CS_Recovery" sourceRef="Task_CS_Recuperacao" targetRef="Gateway_Recuperou" />
    <bpmn2:sequenceFlow id="Flow_Edu_Recuperou_Sim" name="SIM" sourceRef="Gateway_Recuperou" targetRef="Gateway_Tipo_Renovacao" />
    <bpmn2:sequenceFlow id="Flow_Edu_Recuperou_Nao" name="NO" sourceRef="Gateway_Recuperou" targetRef="End_Cliente_Perdido_Educacao" />

  </bpmn2:process>

  <bpmn2:process id="Process_Indicacao" isExecutable="false">

    <bpmn2:startEvent id="Start_Indicacao_Ativo" name="Parceiro Entrega Contato">
      <bpmn2:documentation>CENRIO A (ATIVO): O parceiro entrega o contato do lead.
SLA: &lt; 30 minutos para primeiro contato.
Moeda de troca: Reputao do parceiro.</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Ind_Ativo_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:startEvent id="Start_Indicacao_Passivo" name="Lead Procura (Indicao)">
      <bpmn2:documentation>CENRIO B (PASSIVO): O lead procura voc mencionando o parceiro.
Resposta: Tempo real (no usar automao burra).</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Ind_Passivo_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:endEvent id="End_Perdido_Motivo_Indicacao" name="Lost (Motivo Registrado)">
      <bpmn2:incoming>Flow_Ind_Motivo</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:endEvent id="End_Bloqueio_Indicacao" name="Bloqueou/Saiu do Grupo">
      <bpmn2:incoming>Flow_Ind_Nurturing</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:serviceTask id="Task_Tag_Ativo" name="Cadastrar + Tag [INDICAO: PARCEIRO]">
      <bpmn2:documentation>CRM ACTION:
1. Cadastrar lead no sistema
2. Adicionar tag obrigatria: [INDICAO: NOME_DO_PARCEIRO]
3. Definir prioridade: SLA &lt; 30 min
4. Notificar vendedor responsvel</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Ativo_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Ativo_2</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:serviceTask id="Task_Tag_Passivo" name="Identificar Parceiro + Tag">
      <bpmn2:documentation>CRM ACTION:
1. Perguntar: "Qual nome do parceiro que te indicou?"
2. Cadastrar lead
3. Adicionar tag: [INDICAO: NOME_DO_PARCEIRO]
4. Resposta em tempo real (WhatsApp/Instagram)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Passivo_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Passivo_2</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:serviceTask id="Task_D0_Instagram_Indicacao" name="D0 - Instagram (Final do Dia) - Social Selling">
      <bpmn2:documentation> FINAL DO DIA - SOCIAL SELLING:

AO MANUAL DO VENDEDOR:
1. Seguir a empresa/perfil do lead no Instagram
2. Curtir 2 fotos recentes (no mais que isso)

POR QU?
- Mostra que voc  real
- Mostra interesse genuno
- Cria proximidade social antes da venda

IMPORTANTE: No mandar DM no Instagram. Isso  s warming.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_D0_Zap1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D0_Insta</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:serviceTask id="Task_Trial7d_Indicacao" name="Liberao Trial 7d VIP">
      <bpmn2:documentation>AO:
1. Cadastro simplificado
2. Vendedor libera acesso e manda link de login

DIFERENCIAL:
"T liberando seu acesso aqui. J deixei configurado do jeito que o [Parceiro] usa."

MONITORAMENTO: Sistema monitora uso em 48h.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Demo</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Trial</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:serviceTask id="Task_GrupoNurturing_Indicacao" name="Grupo WhatsApp Nurturing">
      <bpmn2:documentation>NURTURING - GRUPO WHATSAPP:
Lead que no converteu  adicionado em grupo de WhatsApp para:
- Receber promoes especiais
- Ver casos de sucesso do parceiro
- Ofertas de reativao

CONSIDERADO PERDIDO: Apenas se bloquear/sair do grupo</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Nurturing</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_D0_WhatsApp1_Indicacao" name="D0 - WhatsApp 1 (Min 15) - udio Pessoal">
      <bpmn2:documentation> MINUTO 15 (Sem resposta na ligao):

MENSAGEM:
"Fala [Nome], tudo bem? O [Nome do Parceiro] me passou seu contato e disse que voc precisava organizar o financeiro a urgente. Ele me fez prometer que eu ia te dar um atendimento VIP. Pode falar?"

OBJETIVO: Reforar autoridade emprestada via udio pessoal.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_D0_NaoAtendeu</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D0_Zap1</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D1_WhatsApp2_Indicacao" name="D1 - WhatsApp 2 (Tarde) - Cobrana do Amigo">
      <bpmn2:documentation> DIA 1 - TARDE (Se visualizou e no respondeu):

MENSAGEM:
"Opa [Nome]. O [Parceiro] me mandou msg aqui perguntando se a gente j tinha conseguido se falar. Disse pra ele que voc devia estar na correria.

Consegue ouvir um udio de 30s se eu te mandar? S pra eu te mostrar o que ele viu aqui que mudou o jogo pra ele."

GATILHO MENTAL: Compromisso social + Prova de que o parceiro est acompanhando.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_D0_Merge</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D1_Zap2</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D3_WhatsApp3_Indicacao" name="D3 - WhatsApp 3 (Manh) - Bastidor do Parceiro">
      <bpmn2:documentation> DIA 3 - MANH (Ainda est morno):

MENSAGEM:
"Lembrei de voc. O [Parceiro] adora essa funo aqui de DRE no WhatsApp [Mandar Print/Vdeo].

Imagina voc tendo essa clareza na sexta-feira  tarde? Tenho um horrio livre s 15h, bora?"

GATILHO MENTAL: Espelhamento - "Se funciona pro parceiro, funciona pra mim"
PROVA SOCIAL: Print/vdeo real do parceiro usando.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_D1_Zap2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D3_Zap3</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D6_WhatsApp4_Indicacao" name="D6 - WhatsApp 4 (Tarde) - Ultimato VIP">
      <bpmn2:documentation> DIA 6 - TARDE (A semana virou e nada):

MENSAGEM:
"Fala [Nome]. Seguinte: como voc veio pelo [Parceiro], eu tinha separado a iseno da taxa de adeso + o bnus de implantao pra voc.

Mas o sistema vai resetar essa condio amanh.

Voc quer segurar essa vaga ou posso liberar pra outro? Sem presso, s pra eu no segurar  toa."

GATILHO MENTAL: Escassez de relacionamento + Benefcio exclusivo + Elegncia no ultimato.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_D3_Zap3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D6_Zap4</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D10_WhatsApp5_Indicacao" name="D10 - WhatsApp 5 (Manh) - Break-up Elegante">
      <bpmn2:documentation> DIA 10 - MANH (O BREAK-UP ELEGANTE):

MENSAGEM:
"Vou assumir que a rotina te engoliu ou voc resolveu continuar como est.

Vou encerrar seu atendimento por aqui para no ficar te incomodando e no chatear o [Parceiro].

Se o caos voltar, meu nmero  esse. Um abrao e sucesso!"

OBJETIVO: Encerrar o ciclo de venda ativa sem queimar a ponte.
DIFERENCIAL: Menciona o parceiro para no queimar o relacionamento dele tambm.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_D6_Zap4</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D10_Check</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_AvisaParceiro" name="Avisar Parceiro (Validar Ego)">
      <bpmn2:documentation>SCRIPT:
"Grande [Parceiro]! S pra avisar que o [Lead] j  nosso cliente e t sendo super bem cuidado. Obrigado pela confiana!

Se tiver mais algum sofrendo com planilha, manda pra c."

POR QUE ISSO  VITAL?
- Valida o ego do parceiro
- Estimula novas indicaes</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Aviso</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:userTask id="Task_QuebraGelo_Ativo" name="WhatsApp udio - Script Ativo">
      <bpmn2:documentation>SCRIPT CENRIO A (Voc chama):

"Fala [Nome do Lead], tudo bem? Aqui  o [Seu Nome] da Fyness.

O [Nome do Parceiro] me passou seu contato agora h pouco e me disse que voc  um cara 100%, mas que a gesto financeira a t tirando seu sono, igual tirava o dele.

Ele me fez prometer que eu ia te dar uma ateno VIP aqui. Pode falar 2 minutinhos?"

OBJETIVO: Transferir confiana do parceiro para voc.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Ativo_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Ativo_3</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_QuebraGelo_Passivo" name="WhatsApp udio - Script Passivo">
      <bpmn2:documentation>SCRIPT CENRIO B (Ele chama):

"Opa [Nome], que honra! O [Nome do Parceiro]  um grande parceiro nosso.

Se voc  amigo dele, j  de casa. Me conta, ele te mostrou como a gente organizou o caixa dele?"

OBJETIVO: Validar a relao e mostrar resultado do parceiro.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Passivo_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Passivo_3</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D0_Ligacao_Indicacao" name="D0 - Ligao (Min 0) - A Carteirada">
      <bpmn2:documentation> AUTORIDADE EMPRESTADA - MINUTO 0:

SCRIPT SE ATENDER:
"Fala [Nome]! Aqui  o [Vendedor]. O [Parceiro] me falou muito bem da sua empresa e disse que voc precisava organizar o financeiro. T na frente do computador?"

OBJETIVO: Transferir a autoridade do parceiro imediatamente.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Merged</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D0_Lig</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D0_Qualifica_Indicacao" name="D0 - Qualifica (Autoridade Parceiro)">
      <bpmn2:documentation> ATENDEU - CARTEIRADA:

SCRIPT:
"O [Parceiro] me fez prometer que eu ia te dar um atendimento VIP aqui. Ele me disse que o financeiro a t tirando seu sono, igual tirava o dele antes.

Voc t usando planilha hoje ou caderno?"

OBJETIVO: Qualificar usando a confiana do parceiro como moeda.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_D0_Atendeu</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D0_Check</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_SelecaoMotivo_Indicacao" name="CRM: Selecionar Motivo da Perda">
      <bpmn2:documentation> MARCAR COMO PERDIDO (LOST):
Vendedor deve selecionar o motivo real da perda:

MOTIVOS OBRIGATRIOS:
 Sem Contato (Ghosting) - Nunca respondeu
 Preo - Achou caro
 Concorrncia - Fechou com outro
 Desqualificado - No  decisor / Curioso
 Timing - "No  o momento"
 Outro - Especificar

CRM ACTION: Marcar lead como LOST com motivo + TAG [INDICAO: NOME_DO_PARCEIRO].

IMPORTANTE: Avisar o parceiro que o lead no converteu (para no cobrar comisso inexistente).</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Respondeu_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Motivo</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_FlashDemo_Indicacao" name="Flash Demo Contextualizada">
      <bpmn2:documentation>AO: Gravar tela do celular ou mandar udio simulando a dor especfica que o parceiro comentou.

SCRIPT VISUAL:
"Olha [Nome], o [Parceiro] gosta disso aqui : ele manda o udio 'Gastei 100 reais no almoo' e a IA j lana.  essa agilidade que voc busca?"

NO mostre demo genrica. Mostre o que o PARCEIRO gosta.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_D0_Converteu_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Demo</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_PressaoSocial" name="Ligao - Presso Social">
      <bpmn2:documentation>SCRIPT (Ligao ou udio):

"Fala [Lead]! O sistema me avisou aqui que voc ainda no lanou nada.

Cara, no deixa o [Parceiro] ficar na sua frente na organizao! Rs.

Tem alguma dvida ou foi s a correria? Vamos lanar o primeiro juntos agora?"

GATILHO MENTAL: Compromisso social com o parceiro.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_NaoUsou</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Pressao</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D1_Lembrete" name="D+1 - Lembrete (Compromisso)">
      <bpmn2:documentation>SCRIPT:
"E a [Lead], conseguiu ver o vdeo que te mandei? O [Parceiro] me perguntou hoje se a gente j tinha se falado."

GATILHO MENTAL: Compromisso.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Pressao</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Usou</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D1</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D3_ProvaSocial" name="D+3 - Prova Social">
      <bpmn2:documentation>SCRIPT:
"Olha esse resultado aqui de uma empresa do mesmo ramo que o seu. Imagina voc tendo esse controle..."

Anexar print ou vdeo de caso de sucesso similar.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_D1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D3</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D5_Ultimato" name="D+5 - Ultimato Elegante">
      <bpmn2:documentation>SCRIPT:
"Vou imaginar que a semana t catica a. Vou segurar sua condio especial de indicao at amanh, beleza? Depois volta pro preo normal."

ESCASSEZ + ELEGNCIA.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_D3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D5</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_Atendeu_D0_Indicacao" name="Atendeu?">
      <bpmn2:incoming>Flow_Ind_D0_Lig</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D0_Atendeu</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_D0_NaoAtendeu</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Converteu_D0_Indicacao" name="Fechou na hora?">
      <bpmn2:incoming>Flow_Ind_D0_Check</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D0_Converteu_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_D0_Converteu_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Merge_D0_Indicacao" name="Merge D0">
      <bpmn2:incoming>Flow_Ind_D0_Insta</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_D0_Merge</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Converteu_Indicacao" name="Converteu?">
      <bpmn2:incoming>Flow_Ind_D10_Check</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Converteu_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Converteu_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Respondeu_Breakup_Indicacao" name="Respondeu?">
      <bpmn2:incoming>Flow_Ind_Check_Breakup</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Respondeu_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Respondeu_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_MergeIndicacao" name="Merge">
      <bpmn2:incoming>Flow_Ind_Ativo_3</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Passivo_3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Merged</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_UsouEm48h" name="Usou o sistema?">
      <bpmn2:incoming>Flow_Ind_Timer_Check</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_NaoUsou</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Usou</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Converteu_Indicacao" name="Converteu?">
      <bpmn2:incoming>Flow_Ind_D5</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_24h_Breakup_Indicacao" name="24h">
      <bpmn2:documentation> TIMER PS-BREAKUP:
Aguarda 24h para ver se o lead responde ao ultimato elegante.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Converteu_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Check_Breakup</bpmn2:outgoing>
      <bpmn2:timerEventDefinition>
        <bpmn2:timeDuration>PT24H</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_48h" name="48h">
      <bpmn2:documentation>O GUARDIO DE 48H:
Sistema detecta se houve 0 lanamentos em 48h.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Trial</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Timer_Check</bpmn2:outgoing>
      <bpmn2:timerEventDefinition>
        <bpmn2:timeDuration>PT48H</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateThrowEvent id="LinkThrow_Indicacao" name=" Checkout">
      <bpmn2:incoming>Flow_Ind_D0_Converteu_Sim</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Converteu_Sim</bpmn2:incoming>
      <bpmn2:linkEventDefinition name="Link_Checkout" />
    </bpmn2:intermediateThrowEvent>

    <bpmn2:sequenceFlow id="Flow_Ind_Ativo_1" sourceRef="Start_Indicacao_Ativo" targetRef="Task_Tag_Ativo" />
    <bpmn2:sequenceFlow id="Flow_Ind_Ativo_2" sourceRef="Task_Tag_Ativo" targetRef="Task_QuebraGelo_Ativo" />
    <bpmn2:sequenceFlow id="Flow_Ind_Ativo_3" sourceRef="Task_QuebraGelo_Ativo" targetRef="Gateway_MergeIndicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Passivo_1" sourceRef="Start_Indicacao_Passivo" targetRef="Task_Tag_Passivo" />
    <bpmn2:sequenceFlow id="Flow_Ind_Passivo_2" sourceRef="Task_Tag_Passivo" targetRef="Task_QuebraGelo_Passivo" />
    <bpmn2:sequenceFlow id="Flow_Ind_Passivo_3" sourceRef="Task_QuebraGelo_Passivo" targetRef="Gateway_MergeIndicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Merged" sourceRef="Gateway_MergeIndicacao" targetRef="Task_D0_Ligacao_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Demo" sourceRef="Task_FlashDemo_Indicacao" targetRef="Task_Trial7d_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Trial" sourceRef="Task_Trial7d_Indicacao" targetRef="IntermediateTimer_48h" />
    <bpmn2:sequenceFlow id="Flow_Ind_Timer_Check" sourceRef="IntermediateTimer_48h" targetRef="Gateway_UsouEm48h" />
    <bpmn2:sequenceFlow id="Flow_Ind_NaoUsou" name="No" sourceRef="Gateway_UsouEm48h" targetRef="Task_PressaoSocial" />
    <bpmn2:sequenceFlow id="Flow_Ind_Usou" name="Sim" sourceRef="Gateway_UsouEm48h" targetRef="Task_D1_Lembrete" />
    <bpmn2:sequenceFlow id="Flow_Ind_Pressao" sourceRef="Task_PressaoSocial" targetRef="Task_D1_Lembrete" />
    <bpmn2:sequenceFlow id="Flow_Ind_D1" sourceRef="Task_D1_Lembrete" targetRef="Task_D3_ProvaSocial" />
    <bpmn2:sequenceFlow id="Flow_Ind_D3" sourceRef="Task_D3_ProvaSocial" targetRef="Task_D5_Ultimato" />
    <bpmn2:sequenceFlow id="Flow_Ind_D5" sourceRef="Task_D5_Ultimato" targetRef="Gateway_Converteu_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Sim" name="Sim" sourceRef="Gateway_Converteu_Indicacao" targetRef="Task_AvisaParceiro" />
    <bpmn2:sequenceFlow id="Flow_Ind_Aviso" sourceRef="Task_AvisaParceiro" targetRef="LinkThrow_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Nao" name="No" sourceRef="Gateway_Converteu_Indicacao" targetRef="Task_GrupoNurturing_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Nurturing" sourceRef="Task_GrupoNurturing_Indicacao" targetRef="End_Bloqueio_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D0_Lig" sourceRef="Task_D0_Ligacao_Indicacao" targetRef="Gateway_Atendeu_D0_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D0_Atendeu" name="Sim" sourceRef="Gateway_Atendeu_D0_Indicacao" targetRef="Task_D0_Qualifica_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D0_NaoAtendeu" name="No" sourceRef="Gateway_Atendeu_D0_Indicacao" targetRef="Task_D0_WhatsApp1_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D0_Check" sourceRef="Task_D0_Qualifica_Indicacao" targetRef="Gateway_Converteu_D0_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D0_Converteu_Sim" name="Sim" sourceRef="Gateway_Converteu_D0_Indicacao" targetRef="LinkThrow_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D0_Converteu_Nao" name="No" sourceRef="Gateway_Converteu_D0_Indicacao" targetRef="Task_FlashDemo_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D0_Zap1" sourceRef="Task_D0_WhatsApp1_Indicacao" targetRef="Task_D0_Instagram_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D0_Insta" sourceRef="Task_D0_Instagram_Indicacao" targetRef="Gateway_Merge_D0_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D0_Merge" sourceRef="Gateway_Merge_D0_Indicacao" targetRef="Task_D1_WhatsApp2_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D1_Zap2" sourceRef="Task_D1_WhatsApp2_Indicacao" targetRef="Task_D3_WhatsApp3_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D3_Zap3" sourceRef="Task_D3_WhatsApp3_Indicacao" targetRef="Task_D6_WhatsApp4_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D6_Zap4" sourceRef="Task_D6_WhatsApp4_Indicacao" targetRef="Task_D10_WhatsApp5_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_D10_Check" sourceRef="Task_D10_WhatsApp5_Indicacao" targetRef="Gateway_Converteu_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Converteu_Sim" name="Sim" sourceRef="Gateway_Converteu_Indicacao" targetRef="LinkThrow_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Converteu_Nao" name="No" sourceRef="Gateway_Converteu_Indicacao" targetRef="IntermediateTimer_24h_Breakup_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Check_Breakup" sourceRef="IntermediateTimer_24h_Breakup_Indicacao" targetRef="Gateway_Respondeu_Breakup_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Respondeu_Nao" name="No" sourceRef="Gateway_Respondeu_Breakup_Indicacao" targetRef="Task_SelecaoMotivo_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Motivo" sourceRef="Task_SelecaoMotivo_Indicacao" targetRef="End_Perdido_Motivo_Indicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Respondeu_Sim" name="Sim" sourceRef="Gateway_Respondeu_Breakup_Indicacao" targetRef="Task_GrupoNurturing_Indicacao" />

  </bpmn2:process>

  <bpmn2:process id="Process_Conteudo" isExecutable="false">

    <bpmn2:startEvent id="Start_Conteudo_Pessoal" name="Instagram Pessoal">
      <bpmn2:documentation>ENTRADA: Lead comenta/interage no story de um SCIO/PARCEIRO.

CONTEXTO:  um seguidor do perfil pessoal que confia no indivduo, no na marca.

GATILHO MENTAL: Autoridade emprestada do lder.</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Cont_Pessoal_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:startEvent id="Start_Conteudo_Empresa" name="Instagram SaaS">
      <bpmn2:documentation>ENTRADA: Lead comenta/envia direct no perfil OFICIAL da Fyness.

CONTEXTO:  um seguidor frio que busca PRODUTO, no pessoa.

GATILHO MENTAL: Soluo de problema (dor funcional).</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Cont_Empresa_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:endEvent id="End_Bloqueio_Conteudo" name="Bloqueou/Saiu do Grupo">
      <bpmn2:incoming>Flow_Cont_Nurturing</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:endEvent id="End_Perdido_Conteudo" name="Lost (Motivo Registrado)">
      <bpmn2:incoming>Flow_Cont_Motivo</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:serviceTask id="Task_ManyChat_Pessoal" name="ManyChat: Responde Comentrio + Pede Zap">
      <bpmn2:documentation>AUTOMAO MANYCHAT:
1. Detecta comentrio no story do scio
2. Responde automaticamente via Direct:
   "Opa! Vi que voc curtiu o story. Vou te chamar no Zap, beleza?"
3. Captura nmero de telefone
4. Tag no CRM: [CONTEDO: PESSOAL]

IMPORTANTE: Scio no faz venda. Transfere para SDR/Closer.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Pessoal_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Pessoal_2</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:serviceTask id="Task_GrupoNurturing_Conteudo" name="Grupo WhatsApp Nurturing">
      <bpmn2:documentation>NURTURING - GRUPO WHATSAPP:
Lead que respondeu mas no converteu  adicionado em grupo de WhatsApp para:
- Receber promoes especiais
- Ver cases de sucesso de seguidores que viraram clientes
- Ofertas de reativao (Black Friday, Ano Novo, etc.)

CONSIDERADO PERDIDO: Apenas se bloquear/sair do grupo.

CRM ACTION: Tag [NURTURING: CONTEDO]</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Respondeu_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Nurturing</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:userTask id="Task_WhatsApp_Pessoal" name="D0 - WhatsApp - Autoridade Emprestada do Scio">
      <bpmn2:documentation>SCRIPT - AUTORIDADE EMPRESTADA:
"Fala [Nome]! Aqui  o [Vendedor] da equipe do [Nome do Scio].

Ele viu que voc interagiu no Story dele sobre [Assunto X] e me pediu pra te dar uma ateno VIP aqui.

Voc quer organizar o financeiro igual ele faz ou s estava curioso?"

GATILHO: Ele  F. Quer o MTODO e o SUCESSO do scio.

PRXIMO PASSO:
- Se engajou  Flash Demo
- Se ghostou  Cadncia D1-D3-D7</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Pessoal_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Pessoal_3</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_FlashDemo_Pessoal" name="D0 - Flash Demo - Bastidor (Espelho)">
      <bpmn2:documentation>ABORDAGEM: ESPELHO DO SCIO.

SCRIPT VISUAL (Vdeo/udio):
"Olha [Nome], o [Scio] usa assim: ele grava um udio 'Gastei 300 reais no almoo da equipe' e a IA j lana automtico.  essa agilidade que voc busca?"

GATILHO: Lead quer ser igual ao dolo.

IMPORTANTE: No mostra todos os recursos. Mostra apenas o QUE O SCIO USA.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Pessoal_3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Pessoal_Merge</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_SDR_Empresa" name="SDR: Qualifica Manual no Direct">
      <bpmn2:documentation>QUALIFICAO MANUAL:
SDR responde manualmente no Direct para QUALIFICAR antes de passar pro Zap.

SCRIPT:
"Oi [Nome], vi sua mensagem! S pra eu te ajudar melhor: voc  o dono do negcio ou cuida da parte financeira?"

OBJETIVO:
- Desqualificar curiosos
- Identificar decisor
- Capturar nmero de WhatsApp

Tag no CRM: [CONTEDO: EMPRESA]</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Empresa_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Empresa_2</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_WhatsApp_Empresa" name="D0 - WhatsApp - Abordagem Consultiva">
      <bpmn2:documentation>SCRIPT - ABORDAGEM CONSULTIVA:
"Oi [Nome], recebi seu contato pelo Instagram da Fyness.

Vi que voc perguntou sobre o preo. Antes de te passar, deixa eu te perguntar: hoje voc usa planilha ou caderno?"

GATILHO: Ele  COMPRADOR FRIO. Quer a FERRAMENTA.

OBJETIVO: Descobrir a dor para contextualizar demo.

PRXIMO PASSO: Flash Demo focada na DOR.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Empresa_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Empresa_3</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_FlashDemo_Empresa" name="D0 - Flash Demo - Funo (Dor)">
      <bpmn2:documentation>ABORDAGEM: SOLUO DE DOR.

SCRIPT VISUAL (Vdeo/udio):
"Voc falou que usa planilha, n? Ento olha esse recurso: voc manda um udio 'Vendi 500 reais' e o sistema j lana. Sem digitar nada."

GATILHO: Lead quer RESOLVER o problema, no copiar ningum.

IMPORTANTE: Mostra apenas a funo que RESOLVE A DOR dele. Nada mais.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Empresa_3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Empresa_Merge</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D1_Repost_Conteudo" name="D1 - Repost do Story do Scio">
      <bpmn2:documentation>ESTRATGIA: Prova social + FOMO.

SCRIPT:
"[Nome], acabei de ver o [Scio] postando mais um story usando o sistema. Voc viu? Ele falou que no consegue mais viver sem rs.

Quer que eu te mostre de novo como funciona?"

GATILHO MENTAL:
- Prova social (scio usa diariamente)
- FOMO (voc t ficando pra trs)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Imediato_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_D1</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D3_Prova_Conteudo" name="D3 - Print: Seguidor que Virou Cliente">
      <bpmn2:documentation>ESTRATGIA: Prova social irrefutvel.

SCRIPT:
"Olha esse print que recebi ontem:  um seguidor do [Scio] igual voc que tava na dvida. Olha o que ele mandou depois de 2 dias usando:

[PRINT DE DEPOIMENTO REAL]

Quer testar tambm ou prefere continuar na planilha?"

GATILHO MENTAL: Ele vai se arrepender se no testar.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_D1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_D3</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D7_Fechamento_Conteudo" name="D7 - Fechamento com Bnus">
      <bpmn2:documentation>ESTRATGIA: Ultimato elegante + Bnus.

SCRIPT:
"Fala [Nome]! Vou imaginar que a semana t catica a.

Consegui segurar um bnus VIP pra voc at amanh:
- Onboarding prioritrio comigo
- Configurao inicial inclusa

Depois disso volta pro atendimento normal. Bora garantir?"

GATILHO MENTAL:
- Escassez (prazo at amanh)
- Exclusividade (bnus VIP)
- Elegncia (no culpa o lead)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_D3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_D7</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_SelecaoMotivo_Conteudo" name="CRM: Selecionar Motivo da Perda">
      <bpmn2:documentation> MARCAR COMO PERDIDO (LOST):
Vendedor deve selecionar o motivo real da perda:

MOTIVOS OBRIGATRIOS:
 Sem Contato (Ghosting) - Nunca respondeu aps D7
 Preo - Achou caro
 Concorrncia - Fechou com outro
 Desqualificado - No  decisor / Curioso
 Timing - "No  o momento"
 Outro - Especificar

CRM ACTION: Marcar lead como LOST com motivo + TAG:
- [CONTEDO: PESSOAL] ou [CONTEDO: EMPRESA]
- Canal de origem (Instagram do Scio X ou Instagram Fyness)

IMPORTANTE: Dados vo para anlise de performance de contedo.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Respondeu_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Motivo</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_Merge_Conteudo" name="Merge dos Caminhos">
      <bpmn2:incoming>Flow_Cont_Pessoal_Merge</bpmn2:incoming>
      <bpmn2:incoming>Flow_Cont_Empresa_Merge</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Merged</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Converteu_Imediato_Conteudo" name="Fechou na hora?">
      <bpmn2:documentation>DECISO: Lead converteu imediatamente aps Flash Demo?

SIM  Checkout
NO  Cadncia de follow-up (D1, D3, D7)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Merged</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Imediato_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Cont_Imediato_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Converteu_Conteudo" name="Converteu?">
      <bpmn2:documentation>DECISO: Lead converteu aps cadncia D1-D3-D7?

SIM  Checkout
NO  Break-up (24h para responder)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_D7</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Converteu_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Cont_Converteu_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Respondeu_Conteudo" name="Respondeu?">
      <bpmn2:documentation>DECISO: Lead respondeu aps as 24h?

SIM  Grupo Nurturing (mantm aquecido)
NO  Selecionar Motivo da Perda (LOST)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Timer</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Respondeu_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Cont_Respondeu_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_24h_Conteudo" name="24h">
      <bpmn2:documentation> TIMER PS-BREAKUP:
Aguarda 24h para ver se o lead responde ao ultimato elegante do D7.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Cont_Converteu_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Cont_Timer</bpmn2:outgoing>
      <bpmn2:timerEventDefinition>
        <bpmn2:timeDuration>PT24H</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateThrowEvent id="LinkThrow_Conteudo" name=" Checkout">
      <bpmn2:incoming>Flow_Cont_Imediato_Sim</bpmn2:incoming>
      <bpmn2:incoming>Flow_Cont_Converteu_Sim</bpmn2:incoming>
      <bpmn2:linkEventDefinition name="Link_Checkout" />
    </bpmn2:intermediateThrowEvent>

    <bpmn2:sequenceFlow id="Flow_Cont_Pessoal_1" sourceRef="Start_Conteudo_Pessoal" targetRef="Task_ManyChat_Pessoal" />
    <bpmn2:sequenceFlow id="Flow_Cont_Pessoal_2" sourceRef="Task_ManyChat_Pessoal" targetRef="Task_WhatsApp_Pessoal" />
    <bpmn2:sequenceFlow id="Flow_Cont_Pessoal_3" sourceRef="Task_WhatsApp_Pessoal" targetRef="Task_FlashDemo_Pessoal" />
    <bpmn2:sequenceFlow id="Flow_Cont_Pessoal_Merge" sourceRef="Task_FlashDemo_Pessoal" targetRef="Gateway_Merge_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Empresa_1" sourceRef="Start_Conteudo_Empresa" targetRef="Task_SDR_Empresa" />
    <bpmn2:sequenceFlow id="Flow_Cont_Empresa_2" sourceRef="Task_SDR_Empresa" targetRef="Task_WhatsApp_Empresa" />
    <bpmn2:sequenceFlow id="Flow_Cont_Empresa_3" sourceRef="Task_WhatsApp_Empresa" targetRef="Task_FlashDemo_Empresa" />
    <bpmn2:sequenceFlow id="Flow_Cont_Empresa_Merge" sourceRef="Task_FlashDemo_Empresa" targetRef="Gateway_Merge_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Merged" sourceRef="Gateway_Merge_Conteudo" targetRef="Gateway_Converteu_Imediato_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Imediato_Sim" name="Sim" sourceRef="Gateway_Converteu_Imediato_Conteudo" targetRef="LinkThrow_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Imediato_Nao" name="No" sourceRef="Gateway_Converteu_Imediato_Conteudo" targetRef="Task_D1_Repost_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_D1" sourceRef="Task_D1_Repost_Conteudo" targetRef="Task_D3_Prova_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_D3" sourceRef="Task_D3_Prova_Conteudo" targetRef="Task_D7_Fechamento_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_D7" sourceRef="Task_D7_Fechamento_Conteudo" targetRef="Gateway_Converteu_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Converteu_Sim" name="Sim" sourceRef="Gateway_Converteu_Conteudo" targetRef="LinkThrow_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Converteu_Nao" name="No" sourceRef="Gateway_Converteu_Conteudo" targetRef="IntermediateTimer_24h_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Timer" sourceRef="IntermediateTimer_24h_Conteudo" targetRef="Gateway_Respondeu_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Respondeu_Sim" name="Sim" sourceRef="Gateway_Respondeu_Conteudo" targetRef="Task_GrupoNurturing_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Nurturing" sourceRef="Task_GrupoNurturing_Conteudo" targetRef="End_Bloqueio_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Respondeu_Nao" name="No" sourceRef="Gateway_Respondeu_Conteudo" targetRef="Task_SelecaoMotivo_Conteudo" />
    <bpmn2:sequenceFlow id="Flow_Cont_Motivo" sourceRef="Task_SelecaoMotivo_Conteudo" targetRef="End_Perdido_Conteudo" />

  </bpmn2:process>

  <bpmn2:process id="Process_Prospeccao" isExecutable="false">

    <bpmn2:startEvent id="Start_Prospeccao" name="Prospeco">
      <bpmn2:outgoing>Flow_Prosp_1</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:task id="Task_Prosp_Placeholder" name="[EXPANDIR] Redes Sociais">
      <bpmn2:incoming>Flow_Prosp_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Prosp_2</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:intermediateThrowEvent id="LinkThrow_Prospeccao" name=" Checkout">
      <bpmn2:incoming>Flow_Prosp_2</bpmn2:incoming>
      <bpmn2:linkEventDefinition name="Link_Checkout" />
    </bpmn2:intermediateThrowEvent>

    <bpmn2:sequenceFlow id="Flow_Prosp_1" sourceRef="Start_Prospeccao" targetRef="Task_Prosp_Placeholder" />
    <bpmn2:sequenceFlow id="Flow_Prosp_2" sourceRef="Task_Prosp_Placeholder" targetRef="LinkThrow_Prospeccao" />

  </bpmn2:process>

  <bpmn2:process id="Process_Google" isExecutable="false">

    <bpmn2:startEvent id="Start_Google" name="Landing Page (Google Ads)">
      <bpmn2:documentation>Lead pesquisou "Gesto Financeira PME" e clicou no anncio.
Alta inteno de compra.</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Goo_Start</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:endEvent id="End_Bloqueio_Google" name="Descadastrou/Bloqueou">
      <bpmn2:incoming>Flow_Goo_Nurturing</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:endEvent id="End_Perdido_Motivo_Google" name="Lost (Motivo Registrado)">
      <bpmn2:incoming>Flow_Goo_Motivo</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:endEvent id="End_Pago_Google" name=" Pagou (Ativo)">
      <bpmn2:incoming>Flow_Goo_Mandou</bpmn2:incoming>
      <bpmn2:incoming>Flow_Goo_Alerta</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:serviceTask id="Task_AutomacaoBoasVindas" name="Automao D0 - Boas-vindas">
      <bpmn2:documentation>AUTOMAO IMEDIATA (D0):
1. Criao da conta no sistema
2. Envio de WhatsApp automtico

MENSAGEM:
"Parabns [Nome]!  Sua IA t pronta.

Salva meu nmero e manda o primeiro udio: 'Gastei 50 reais de almoo'."

OBJETIVO: Primeira vitria rpida.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Sucesso</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_BoasVindas</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:serviceTask id="Task_RecuperacaoCarrinho" name="Recuperao (10 min)">
      <bpmn2:documentation>AUTOMAO (10 MIN DEPOIS):
Disparo de recuperao se carto recusou ou fechou a aba.

MENSAGEM:
"Oi [Nome], vi que deu erro no pagamento do Anual.

O banco s vezes barra o limite. Tenta esse link do Semestral que costuma passar direto: [Link]"

DOWNSELL: Anual  Semestral  Trimestral</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Falha</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Recuperacao</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:subProcess id="SubProcess_Trial_Google" name="Trial 7 Dias - Cadncia de Ativao">
      <bpmn2:documentation>SUB-PROCESSO TRIAL 7 DIAS:
Cadncia de nurturing ativa durante o perodo trial.
Objetivo: garantir o "aha moment" nos primeiros 2-3 dias
e maximizar converso ao fim dos 7 dias.

CADNCIA INTERNA:
D0: Boas-vindas + Guia Rpido (primeiro valor em 5 min)
D1: Check de uso + Dica feature-chave (ativar aha moment)
D2: Case de sucesso de cliente similar (prova social)
D3: Check 48h de uso profundo (ponto de deciso)
D5: "Faltam 2 dias" + suporte (urgncia)
D6: Oferta de converso (incentivo final)
D7: Expirao  merge com fechamento principal</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Trial_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Trial_End</bpmn2:outgoing>

      <bpmn2:startEvent id="Start_Trial" name="Trial Ativado">
        <bpmn2:outgoing>Flow_Trial_D0</bpmn2:outgoing>
      </bpmn2:startEvent>

      <bpmn2:serviceTask id="Task_Trial_D0_BoasVindas" name="D0 - Boas-vindas + Guia Rpido">
        <bpmn2:documentation>ONBOARDING IMEDIATO:
- E-mail/WhatsApp de boas-vindas com vdeo de 2 min
- Guia rpido: "3 passos para seu primeiro lanamento"
- CTA: "Faa seu primeiro lanamento agora"

OBJETIVO: Primeiro valor em menos de 5 minutos.</bpmn2:documentation>
        <bpmn2:incoming>Flow_Trial_D0</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D0_D1</bpmn2:outgoing>
      </bpmn2:serviceTask>

      <bpmn2:intermediateCatchEvent id="Timer_Trial_24h" name="24h">
        <bpmn2:incoming>Flow_Trial_D0_D1</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D1_Check</bpmn2:outgoing>
        <bpmn2:timerEventDefinition>
          <bpmn2:timeDuration>PT24H</bpmn2:timeDuration>
        </bpmn2:timerEventDefinition>
      </bpmn2:intermediateCatchEvent>

      <bpmn2:exclusiveGateway id="Gateway_Trial_D1_Uso" name="Usou D0?">
        <bpmn2:incoming>Flow_Trial_D1_Check</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D1_Sim</bpmn2:outgoing>
        <bpmn2:outgoing>Flow_Trial_D1_Nao</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>

      <bpmn2:sendTask id="Task_Trial_D1_Dica" name="D1 - Dica Feature-Chave">
        <bpmn2:documentation>SE USOU:
"Vi que voc j fez seu primeiro lanamento! 
Agora experimenta [feature-chave]   onde a mgica acontece."

SE NO USOU:
"Ainda no testou? Normal, a rotina engole. Olha s como  rpido: [vdeo 60s]
Leva 2 minutos pra sentir a diferena."</bpmn2:documentation>
        <bpmn2:incoming>Flow_Trial_D1_Sim</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D1_Merge</bpmn2:outgoing>
      </bpmn2:sendTask>

      <bpmn2:sendTask id="Task_Trial_D1_Reengajamento" name="D1 - Reengajamento (No Usou)">
        <bpmn2:documentation>REENGAJAMENTO SUAVE:
"Ainda no testou? Normal, a rotina engole.
Olha s como  rpido: [vdeo 60s]
Leva 2 minutos pra sentir a diferena."

INCLUI: Link direto para primeiro lanamento.</bpmn2:documentation>
        <bpmn2:incoming>Flow_Trial_D1_Nao</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D1_Merge2</bpmn2:outgoing>
      </bpmn2:sendTask>

      <bpmn2:exclusiveGateway id="Gateway_Trial_D1_Merge" name="Merge D1">
        <bpmn2:incoming>Flow_Trial_D1_Merge</bpmn2:incoming>
        <bpmn2:incoming>Flow_Trial_D1_Merge2</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D1_D2</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>

      <bpmn2:intermediateCatchEvent id="Timer_Trial_D2" name="24h">
        <bpmn2:incoming>Flow_Trial_D1_D2</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D2_Start</bpmn2:outgoing>
        <bpmn2:timerEventDefinition>
          <bpmn2:timeDuration>PT24H</bpmn2:timeDuration>
        </bpmn2:timerEventDefinition>
      </bpmn2:intermediateCatchEvent>

      <bpmn2:sendTask id="Task_Trial_D2_Case" name="D2 - Case de Sucesso">
        <bpmn2:documentation>PROVA SOCIAL:
"O [Cliente X] do mesmo ramo que voc economizou 4h/semana
no primeiro ms. Olha o depoimento dele: [link/print]

Voc t no caminho certo. Qualquer dvida, me chama!"</bpmn2:documentation>
        <bpmn2:incoming>Flow_Trial_D2_Start</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D2_D3</bpmn2:outgoing>
      </bpmn2:sendTask>

      <bpmn2:intermediateCatchEvent id="Timer_Trial_D3" name="24h">
        <bpmn2:incoming>Flow_Trial_D2_D3</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D3_Check</bpmn2:outgoing>
        <bpmn2:timerEventDefinition>
          <bpmn2:timeDuration>PT24H</bpmn2:timeDuration>
        </bpmn2:timerEventDefinition>
      </bpmn2:intermediateCatchEvent>

      <bpmn2:exclusiveGateway id="Gateway_Trial_D3_Uso" name="Usou em 48h?">
        <bpmn2:incoming>Flow_Trial_D3_Check</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D3_Sim</bpmn2:outgoing>
        <bpmn2:outgoing>Flow_Trial_D3_Nao</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>

      <bpmn2:sendTask id="Task_Trial_D3_Parabens" name="D3 - Parabns + Prximo Nvel">
        <bpmn2:documentation>REFORO POSITIVO (SE USOU):
"Show! Vi que voc j t usando [feature X]. 
Agora experimenta [feature Y]  os clientes que usam convertem 2x mais."</bpmn2:documentation>
        <bpmn2:incoming>Flow_Trial_D3_Sim</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D3_Merge1</bpmn2:outgoing>
      </bpmn2:sendTask>

      <bpmn2:userTask id="Task_Trial_D3_Resgate" name="D3 - Ligao de Resgate">
        <bpmn2:documentation>AO HUMANA (SE NO USOU EM 48H):
"Voc buscou no Google porque tinha um problema urgente.
O problema sumiu ou a rotina te engoliu?
Vamos lanar o primeiro gasto agora na linha?"

OBJETIVO: Resgatar antes de perder. Se no ativar at D3,
a chance de converso cai drasticamente.</bpmn2:documentation>
        <bpmn2:incoming>Flow_Trial_D3_Nao</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D3_Merge2</bpmn2:outgoing>
      </bpmn2:userTask>

      <bpmn2:exclusiveGateway id="Gateway_Trial_D3_Merge" name="Merge D3">
        <bpmn2:incoming>Flow_Trial_D3_Merge1</bpmn2:incoming>
        <bpmn2:incoming>Flow_Trial_D3_Merge2</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D3_D5</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>

      <bpmn2:intermediateCatchEvent id="Timer_Trial_D5" name="48h">
        <bpmn2:incoming>Flow_Trial_D3_D5</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D5_Start</bpmn2:outgoing>
        <bpmn2:timerEventDefinition>
          <bpmn2:timeDuration>PT48H</bpmn2:timeDuration>
        </bpmn2:timerEventDefinition>
      </bpmn2:intermediateCatchEvent>

      <bpmn2:sendTask id="Task_Trial_D5_Urgencia" name="D5 - Faltam 2 Dias + Suporte">
        <bpmn2:documentation>URGNCIA + SUPORTE:
"Seu trial expira em 2 dias! 
Quer que eu te ajude a configurar algo especfico antes?
Agenda 15 min comigo e resolvo qualquer dvida: [link agenda]"

OBJETIVO: Criar senso de urgncia + oferecer ajuda genuna.</bpmn2:documentation>
        <bpmn2:incoming>Flow_Trial_D5_Start</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D5_D6</bpmn2:outgoing>
      </bpmn2:sendTask>

      <bpmn2:intermediateCatchEvent id="Timer_Trial_D6" name="24h">
        <bpmn2:incoming>Flow_Trial_D5_D6</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D6_Start</bpmn2:outgoing>
        <bpmn2:timerEventDefinition>
          <bpmn2:timeDuration>PT24H</bpmn2:timeDuration>
        </bpmn2:timerEventDefinition>
      </bpmn2:intermediateCatchEvent>

      <bpmn2:sendTask id="Task_Trial_D6_Oferta" name="D6 - Oferta de Converso">
        <bpmn2:documentation>INCENTIVO FINAL:
"Amanh seu trial acaba. Pra quem converte ANTES de expirar,
tenho uma condio especial:
 20% OFF no primeiro trimestre + Onboarding VIP grtis.

Esse desconto some amanh s 23:59. Bora?"

INCLUI: Link direto para checkout com cupom aplicado.</bpmn2:documentation>
        <bpmn2:incoming>Flow_Trial_D6_Start</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D6_D7</bpmn2:outgoing>
      </bpmn2:sendTask>

      <bpmn2:intermediateCatchEvent id="Timer_Trial_D7" name="24h">
        <bpmn2:incoming>Flow_Trial_D6_D7</bpmn2:incoming>
        <bpmn2:outgoing>Flow_Trial_D7_End</bpmn2:outgoing>
        <bpmn2:timerEventDefinition>
          <bpmn2:timeDuration>PT24H</bpmn2:timeDuration>
        </bpmn2:timerEventDefinition>
      </bpmn2:intermediateCatchEvent>

      <bpmn2:endEvent id="End_Trial" name="Trial Expirado">
        <bpmn2:incoming>Flow_Trial_D7_End</bpmn2:incoming>
      </bpmn2:endEvent>

      <bpmn2:sequenceFlow id="Flow_Trial_D0" sourceRef="Start_Trial" targetRef="Task_Trial_D0_BoasVindas" />
      <bpmn2:sequenceFlow id="Flow_Trial_D0_D1" sourceRef="Task_Trial_D0_BoasVindas" targetRef="Timer_Trial_24h" />
      <bpmn2:sequenceFlow id="Flow_Trial_D1_Check" sourceRef="Timer_Trial_24h" targetRef="Gateway_Trial_D1_Uso" />
      <bpmn2:sequenceFlow id="Flow_Trial_D1_Sim" name="Sim" sourceRef="Gateway_Trial_D1_Uso" targetRef="Task_Trial_D1_Dica" />
      <bpmn2:sequenceFlow id="Flow_Trial_D1_Nao" name="No" sourceRef="Gateway_Trial_D1_Uso" targetRef="Task_Trial_D1_Reengajamento" />
      <bpmn2:sequenceFlow id="Flow_Trial_D1_Merge" sourceRef="Task_Trial_D1_Dica" targetRef="Gateway_Trial_D1_Merge" />
      <bpmn2:sequenceFlow id="Flow_Trial_D1_Merge2" sourceRef="Task_Trial_D1_Reengajamento" targetRef="Gateway_Trial_D1_Merge" />
      <bpmn2:sequenceFlow id="Flow_Trial_D1_D2" sourceRef="Gateway_Trial_D1_Merge" targetRef="Timer_Trial_D2" />
      <bpmn2:sequenceFlow id="Flow_Trial_D2_Start" sourceRef="Timer_Trial_D2" targetRef="Task_Trial_D2_Case" />
      <bpmn2:sequenceFlow id="Flow_Trial_D2_D3" sourceRef="Task_Trial_D2_Case" targetRef="Timer_Trial_D3" />
      <bpmn2:sequenceFlow id="Flow_Trial_D3_Check" sourceRef="Timer_Trial_D3" targetRef="Gateway_Trial_D3_Uso" />
      <bpmn2:sequenceFlow id="Flow_Trial_D3_Sim" name="Sim" sourceRef="Gateway_Trial_D3_Uso" targetRef="Task_Trial_D3_Parabens" />
      <bpmn2:sequenceFlow id="Flow_Trial_D3_Nao" name="No" sourceRef="Gateway_Trial_D3_Uso" targetRef="Task_Trial_D3_Resgate" />
      <bpmn2:sequenceFlow id="Flow_Trial_D3_Merge1" sourceRef="Task_Trial_D3_Parabens" targetRef="Gateway_Trial_D3_Merge" />
      <bpmn2:sequenceFlow id="Flow_Trial_D3_Merge2" sourceRef="Task_Trial_D3_Resgate" targetRef="Gateway_Trial_D3_Merge" />
      <bpmn2:sequenceFlow id="Flow_Trial_D3_D5" sourceRef="Gateway_Trial_D3_Merge" targetRef="Timer_Trial_D5" />
      <bpmn2:sequenceFlow id="Flow_Trial_D5_Start" sourceRef="Timer_Trial_D5" targetRef="Task_Trial_D5_Urgencia" />
      <bpmn2:sequenceFlow id="Flow_Trial_D5_D6" sourceRef="Task_Trial_D5_Urgencia" targetRef="Timer_Trial_D6" />
      <bpmn2:sequenceFlow id="Flow_Trial_D6_Start" sourceRef="Timer_Trial_D6" targetRef="Task_Trial_D6_Oferta" />
      <bpmn2:sequenceFlow id="Flow_Trial_D6_D7" sourceRef="Task_Trial_D6_Oferta" targetRef="Timer_Trial_D7" />
      <bpmn2:sequenceFlow id="Flow_Trial_D7_End" sourceRef="Timer_Trial_D7" targetRef="End_Trial" />
    </bpmn2:subProcess>

    <bpmn2:serviceTask id="Task_GrupoNurturing_Google" name="Grupo Promoes + Remarketing">
      <bpmn2:documentation>NURTURING - LISTA PROMOES:
Lead Google que no converteu vai para lista de:
- Remarketing via Google Ads
- E-mails com promoes especiais
- WhatsApp com ofertas relmpago

CONSIDERADO PERDIDO: Apenas se descadastrar/bloquear</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Respondeu_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Nurturing</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_D0_WhatsApp1_Prova_Google" name="D0 - WhatsApp 1 (Min 5) - A Prova">
      <bpmn2:documentation> MINUTO 5 (Sem resposta na ligao):

MENSAGEM:
"Oi [Nome], tentei te ligar. Vi que buscou sobre gesto. D uma olhada em como a gente resolve isso em 3 segundos com IA: [udio Flash Demo + Print]"

OBJETIVO: Mostrar a prova real sem precisar de ligao.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_D0_NaoAtendeu</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D0_Zap1</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D0_WhatsApp2_Ajuda_Google" name="D0 - WhatsApp 2 (Tarde) - A Ajuda">
      <bpmn2:documentation> TARDE (Sem resposta):

MENSAGEM:
"Conseguiu ver o vdeo? Se quiser, te libero um acesso de 7 dias pra voc testar na prtica. Me avisa."

OBJETIVO: Oferecer o trial sem presso.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_D0_Zap1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D0_Zap2</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D1_WhatsApp3_Diferenca_Google" name="D1 - WhatsApp 3 (Manh) - A Diferena">
      <bpmn2:documentation> DIA 1 - MANH:
Ele provavelmente est cotando Conta Azul ou Omie.

MENSAGEM:
"E a [Nome]. Uma dvida rpida: voc prefere ficar preenchendo formulrio chato (igual nos outros sistemas) ou prefere mandar udio no Zap? S pra eu saber o que te mostrar."

OBJETIVO: Matar a concorrncia mostrando a diferena.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_D0_Merge</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D1_Zap3</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D3_WhatsApp4_Case_Google" name="D3 - WhatsApp 4 - A Cobrana Social">
      <bpmn2:documentation> DIA 3 - COBRANA SOCIAL (Se ele sumiu/Ghosting):

MENSAGEM:
"Lembrei de voc. Esse cliente aqui  do seu ramo [Mandar Print de Relatrio/Depoimento]. Ele organizou o caixa em 2 dias. Falta o que pra gente fazer o mesmo a?"

CRM: Mover para etapa "Tentativa de Contato 3".

OBJETIVO: Soft touch mostrando prova social do nicho dele.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_D1_Lig2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D3_Zap4</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D5_WhatsApp5_Pressao_Google" name="D5 - WhatsApp 5 - A Presso">
      <bpmn2:documentation> DIA 5 - PRESSO DO BENEFCIO:
Lead est morno. Hora de provocar.

MENSAGEM:
"[Nome], o sistema segura seu pr-cadastro com a condio de iseno de taxa de adeso at amanh. Depois volta pro preo cheio. Consegue falar hoje  tarde?"

GATILHO MENTAL: Escassez + Benefcio.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_D3_Zap4</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D5_Zap5</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D7_WhatsApp6_Breakup_Google" name="D7 - WhatsApp 6 - Break-up (Ultimato)">
      <bpmn2:documentation> DIA 7 - O ULTIMATO (BREAK-UP):
Tudo ou nada. Tcnica de "retirar a oferta".

MENSAGEM:
"Fala [Nome]. Como no tivemos retorno, vou assumir que organizar o financeiro no  prioridade agora ou voc decidiu continuar com as planilhas.

Vou encerrar seu processo por aqui para no te incomodar mais.

Se no futuro o caos voltar, meu contato  esse. Abrao!"

OBJETIVO: Provocar reao ou confirmar desinteresse.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Converteu_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Breakup</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:userTask id="Task_ClickCheckout_Self" name="Clica 'Testar Agora/Assinar'">
      <bpmn2:documentation>PERFIL APRESSADO:
J comparou, gostou da promessa, quer resolver agora (mesmo que seja 3 da manh).

CTA na LP: "Testar Agora" ou "Assinar Anual"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Self</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Self_1</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_PreencheDados_Self" name="Preenche Dados + Carto">
      <bpmn2:documentation>FORMULRIO DE CHECKOUT:
- Nome completo
- E-mail
- Telefone (WhatsApp)
- CPF/CNPJ
- Dados do carto

MONITORAMENTO: Tempo no formulrio (abandono > 2 min)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Self_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Self_2</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_AlertaHumano_Google" name="Alerta Humano - Ligar AGORA">
      <bpmn2:documentation>ALERTA PARA VENDEDOR:
"Cliente [Nome] pagou e no usou. Ligar agora."

SCRIPT LIGAO:
"[Nome], vi que voc assinou mas ainda no mandou o primeiro udio.

T com dvida de como funciona? Vamos fazer juntos agora na linha?"

OBJETIVO: Ativao forada antes de pedir chargeback.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_NaoMandou</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Alerta</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_ClickWhatsApp" name="Clica WhatsApp">
      <bpmn2:documentation>PERFIL DESCONFIADO:
Gostou mas tem dvida se funciona pro nicho dele ou quer negociar.

CTA na LP: "Falar com Especialista"</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Zap</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Zap_1</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_SpeedToLead_Google" name="Speed to Lead &lt; 5 min">
      <bpmn2:documentation>REGRA DE OURO: Vendedor responde em &lt; 5 minutos.

SCRIPT ABERTURA:
"Opa, tudo bem? Vi que veio do Google. Voc t usando planilha hoje ou o caderno?"

OBJETIVO: Qualificar rapidamente a dor.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Zap_1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Zap_2</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_FlashDemo_Google" name="Flash Demo (udio + Print)">
      <bpmn2:documentation>A PROVA REAL:
Para matar objeo "ser que funciona?", vendedor faz a mgica.

AO:
Manda udio simulando gasto do nicho dele + Print do relatrio pronto.

SCRIPT:
"Olha a mgica: eu mandei esse udio de 3s e o sistema j gerou o DRE.  essa liberdade que voc quer?"

GATILHO MENTAL: Prova social + Facilidade.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Zap_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Zap_3</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_OfertaTrial_Google" name="Oferta Trial 7d">
      <bpmn2:documentation>O GANCHO:

SCRIPT:
"Vou liberar 7 dias grtis pra voc brincar. Se a IA no te economizar 2 horas na semana, voc nem precisa assinar."

OBJEO ELIMINADA: "E se no der certo?"  Risco zero.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Zap_3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_ToGatewayTrial</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_AceitouTrial_Google" name="Aceitou Trial?">
      <bpmn2:incoming>Flow_Goo_ToGatewayTrial</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Trial_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Goo_Trial_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:userTask id="Task_D7_Fechamento_Google" name="D7 - Fechamento (Escada Downsell)">
      <bpmn2:documentation>O FECHAMENTO BINRIO (D7 - FINAL DO TRIAL):

ESCADA DE DOWNSELL:

Tentativa 1: Plano Anual (R$ 1.497)
- Foco: Maior desconto + Caixa antecipado
- Script: "Voc testou, viu que funciona. Vou te dar 40% de desconto no anual."

Tentativa 2 (Se recusar/falhar): Plano Semestral (R$ 997)
- Argumento: "O limite do carto no passou? Faz o semestral que alivia a parcela."

Tentativa 3 (Misericrdia): Plano Trimestral (R$ 561)
- Argumento: "Faz o seguinte: no casa comigo. Namora por 3 meses.  um teste pago pra voc organizar a casa."

OBJETIVO: No perder o cliente. Se ele no pode pagar o ideal, ele paga o possvel.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_D5_Lig3</bpmn2:incoming>
      <bpmn2:incoming>Flow_Goo_Trial_End</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D7</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D0_Ligacao1_Google" name="D0 - Ligao Imediata (Min 1)">
      <bpmn2:documentation> SPEED TO LEAD - MINUTO 1:
Lead acabou de se cadastrar ou chamar.

AO: Ligar IMEDIATAMENTE.

SCRIPT:
"[Nome], aqui  o [Vendedor] da Fyness. Vi que voc acabou de preencher o cadastro. T na frente do computador agora?"

OBJETIVO: Qualificar a dor e agendar demo se atender.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Recuperacao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D0_Lig1</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D0_Qualifica_Google" name="D0 - Qualifica e Agenda Demo">
      <bpmn2:documentation> ATENDEU:

QUALIFICAO:
"Voc t usando planilha hoje ou o caderno?"
"Quanto tempo voc perde por semana organizando isso?"

PITCH:
"Vou te mostrar como a gente resolve isso em 3 segundos com IA. Pode ver a tela agora?"

AO: Agenda demo ou faz demo ao vivo.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_D0_Atendeu</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D0_Qualificou</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D1_Ligacao2_Google" name="D1 - Ligao 2 (Tarde)">
      <bpmn2:documentation> DIA 1 - TARDE:

SCRIPT:
"T com a sua ficha de pr-cadastro aqui. S falta um 'ok' pra eu liberar seu teste. T na correria?"

OBJETIVO: Mostrar que ele est sendo acompanhado pessoalmente.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_D1_Zap3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D1_Lig2</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_D5_Ligacao3_Google" name="D5 - Ligao 3 (ltima Tentativa)">
      <bpmn2:documentation> DIA 5 - LTIMA TENTATIVA DE VOZ:

SCRIPT:
"[Nome], vi que voc ainda no definiu. T com alguma dvida ou quer que eu te mostre algo especfico do seu ramo?"

OBJETIVO: ltima chance de falar antes do ultimato D7.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_D5_Zap5</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D5_Lig3</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_SelecaoMotivo_Google" name="CRM: Selecionar Motivo da Perda">
      <bpmn2:documentation> MARCAR COMO PERDIDO (LOST):
Vendedor deve selecionar o motivo real da perda:

MOTIVOS OBRIGATRIOS:
 Sem Contato (Ghosting) - Nunca respondeu
 Preo - Achou caro e no aceitou Downsell
 Concorrncia - Fechou com outro
 Desqualificado - No  dono de empresa / Curioso
 Timing - "No  o momento" (vlido)
 Outro - Especificar

CRM ACTION: Marcar lead como LOST com motivo selecionado.

MTRICA CRTICA: Taxa de converso por motivo de perda.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Respondeu_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Motivo</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_CaminhoGoogle" name="Qual boto clicou?">
      <bpmn2:incoming>Flow_Goo_Start</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Self</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Goo_Zap</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Pagamento_Self" name="Pagamento?">
      <bpmn2:incoming>Flow_Goo_Self_2</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Sucesso</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Goo_Falha</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_PrimeiroAudio" name="Mandou udio?">
      <bpmn2:incoming>Flow_Goo_Check24h</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_NaoMandou</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Goo_Mandou</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Converteu_Google" name="Converteu?">
      <bpmn2:incoming>Flow_Goo_D7</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Converteu_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Goo_Converteu_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Atendeu_D0_Google" name="Atendeu?">
      <bpmn2:incoming>Flow_Goo_D0_Lig1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D0_Atendeu</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Goo_D0_NaoAtendeu</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Merge_D0_Google" name="Merge D0">
      <bpmn2:incoming>Flow_Goo_D0_Qualificou</bpmn2:incoming>
      <bpmn2:incoming>Flow_Goo_D0_Zap2</bpmn2:incoming>
      <bpmn2:incoming>Flow_Goo_Trial_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_D0_Merge</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Respondeu_Breakup_Google" name="Respondeu?">
      <bpmn2:incoming>Flow_Goo_Check_Breakup</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Respondeu_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Goo_Respondeu_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_24h_Google" name="24h">
      <bpmn2:documentation>O GUARDIO DE ATIVAO:
Monitora se cliente pagou mas NO usou em 24h.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_BoasVindas</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Check24h</bpmn2:outgoing>
      <bpmn2:timerEventDefinition>
        <bpmn2:timeDuration>PT24H</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_24h_Breakup_Google" name="24h">
      <bpmn2:documentation> TIMER PS-BREAKUP:
Aguarda 24h para ver se o lead responde ao ultimato.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Goo_Breakup</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Goo_Check_Breakup</bpmn2:outgoing>
      <bpmn2:timerEventDefinition>
        <bpmn2:timeDuration>PT24H</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateThrowEvent id="LinkThrow_Google" name=" Checkout">
      <bpmn2:incoming>Flow_Goo_Converteu_Sim</bpmn2:incoming>
      <bpmn2:linkEventDefinition name="Link_Checkout" />
    </bpmn2:intermediateThrowEvent>

    <bpmn2:sequenceFlow id="Flow_Goo_Start" sourceRef="Start_Google" targetRef="Gateway_CaminhoGoogle" />
    <bpmn2:sequenceFlow id="Flow_Goo_Self" name="Checkout Direto" sourceRef="Gateway_CaminhoGoogle" targetRef="Task_ClickCheckout_Self" />
    <bpmn2:sequenceFlow id="Flow_Goo_Self_1" sourceRef="Task_ClickCheckout_Self" targetRef="Task_PreencheDados_Self" />
    <bpmn2:sequenceFlow id="Flow_Goo_Self_2" sourceRef="Task_PreencheDados_Self" targetRef="Gateway_Pagamento_Self" />
    <bpmn2:sequenceFlow id="Flow_Goo_Sucesso" name="Sucesso" sourceRef="Gateway_Pagamento_Self" targetRef="Task_AutomacaoBoasVindas" />
    <bpmn2:sequenceFlow id="Flow_Goo_Falha" name="Falha/Abandono" sourceRef="Gateway_Pagamento_Self" targetRef="Task_RecuperacaoCarrinho" />
    <bpmn2:sequenceFlow id="Flow_Goo_BoasVindas" sourceRef="Task_AutomacaoBoasVindas" targetRef="IntermediateTimer_24h_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Recuperacao" sourceRef="Task_RecuperacaoCarrinho" targetRef="Task_D0_Ligacao1_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Check24h" sourceRef="IntermediateTimer_24h_Google" targetRef="Gateway_PrimeiroAudio" />
    <bpmn2:sequenceFlow id="Flow_Goo_NaoMandou" name="No" sourceRef="Gateway_PrimeiroAudio" targetRef="Task_AlertaHumano_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Mandou" name="Sim" sourceRef="Gateway_PrimeiroAudio" targetRef="End_Pago_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Alerta" sourceRef="Task_AlertaHumano_Google" targetRef="End_Pago_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Zap" name="WhatsApp" sourceRef="Gateway_CaminhoGoogle" targetRef="Task_ClickWhatsApp" />
    <bpmn2:sequenceFlow id="Flow_Goo_Zap_1" sourceRef="Task_ClickWhatsApp" targetRef="Task_SpeedToLead_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Zap_2" sourceRef="Task_SpeedToLead_Google" targetRef="Task_FlashDemo_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Zap_3" sourceRef="Task_FlashDemo_Google" targetRef="Task_OfertaTrial_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_ToGatewayTrial" sourceRef="Task_OfertaTrial_Google" targetRef="Gateway_AceitouTrial_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Trial_Sim" name="Sim (Aceitou)" sourceRef="Gateway_AceitouTrial_Google" targetRef="SubProcess_Trial_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Trial_Nao" name="No (Recusou)" sourceRef="Gateway_AceitouTrial_Google" targetRef="Gateway_Merge_D0_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Trial_End" sourceRef="SubProcess_Trial_Google" targetRef="Task_D7_Fechamento_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D7" sourceRef="Task_D7_Fechamento_Google" targetRef="Gateway_Converteu_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Converteu_Sim" name="Sim" sourceRef="Gateway_Converteu_Google" targetRef="LinkThrow_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Converteu_Nao" name="No" sourceRef="Gateway_Converteu_Google" targetRef="Task_D7_WhatsApp6_Breakup_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Nurturing" sourceRef="Task_GrupoNurturing_Google" targetRef="End_Bloqueio_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D0_Lig1" sourceRef="Task_D0_Ligacao1_Google" targetRef="Gateway_Atendeu_D0_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D0_Atendeu" name="Sim" sourceRef="Gateway_Atendeu_D0_Google" targetRef="Task_D0_Qualifica_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D0_NaoAtendeu" name="No" sourceRef="Gateway_Atendeu_D0_Google" targetRef="Task_D0_WhatsApp1_Prova_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D0_Qualificou" sourceRef="Task_D0_Qualifica_Google" targetRef="Gateway_Merge_D0_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D0_Zap1" sourceRef="Task_D0_WhatsApp1_Prova_Google" targetRef="Task_D0_WhatsApp2_Ajuda_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D0_Zap2" sourceRef="Task_D0_WhatsApp2_Ajuda_Google" targetRef="Gateway_Merge_D0_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D0_Merge" sourceRef="Gateway_Merge_D0_Google" targetRef="Task_D1_WhatsApp3_Diferenca_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D1_Zap3" sourceRef="Task_D1_WhatsApp3_Diferenca_Google" targetRef="Task_D1_Ligacao2_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D1_Lig2" sourceRef="Task_D1_Ligacao2_Google" targetRef="Task_D3_WhatsApp4_Case_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D3_Zap4" sourceRef="Task_D3_WhatsApp4_Case_Google" targetRef="Task_D5_WhatsApp5_Pressao_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D5_Zap5" sourceRef="Task_D5_WhatsApp5_Pressao_Google" targetRef="Task_D5_Ligacao3_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_D5_Lig3" sourceRef="Task_D5_Ligacao3_Google" targetRef="Task_D7_Fechamento_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Breakup" sourceRef="Task_D7_WhatsApp6_Breakup_Google" targetRef="IntermediateTimer_24h_Breakup_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Check_Breakup" sourceRef="IntermediateTimer_24h_Breakup_Google" targetRef="Gateway_Respondeu_Breakup_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Respondeu_Nao" name="No" sourceRef="Gateway_Respondeu_Breakup_Google" targetRef="Task_SelecaoMotivo_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Motivo" sourceRef="Task_SelecaoMotivo_Google" targetRef="End_Perdido_Motivo_Google" />
    <bpmn2:sequenceFlow id="Flow_Goo_Respondeu_Sim" name="Sim" sourceRef="Gateway_Respondeu_Breakup_Google" targetRef="Task_GrupoNurturing_Google" />

  </bpmn2:process>

  <bpmn2:process id="Process_Meta" isExecutable="false">

    <bpmn2:startEvent id="Start_Meta" name="Meta Ads">
      <bpmn2:outgoing>Flow_Meta_Start</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:endEvent id="End_Perdido_Meta" name="Lost (Motivo Registrado)">
      <bpmn2:incoming>Flow_Meta_Motivo</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:endEvent id="End_Bloqueio_Meta" name="Descadastrou/Bloqueou">
      <bpmn2:incoming>Flow_Meta_Nurturing</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:serviceTask id="Task_GrupoNurturing_Meta" name="Grupo de Nurturing">
      <bpmn2:documentation> NURTURING - LISTA DE AQUECIMENTO:

Lead Meta que no converteu mas respondeu vai para:
- Lista de e-mail marketing
- Grupo de promoes no WhatsApp
- Campanhas de remarketing Meta Ads

CONSIDERADO PERDIDO: Apenas se bloquear ou descadastrar.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_Respondeu_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_Nurturing</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_WhatsApp_D0_Meta" name="D0 - WhatsApp (Min 0-5) - Abordagem Ativa">
      <bpmn2:documentation> SPEED TO LEAD - META ADS (0-5 MINUTOS):

MENSAGEM INICIAL:
"Oi [Nome]! Vi que voc acabou de preencher o formulrio sobre gesto financeira.

Trabalha com [Segmento] mesmo? "

OBJETIVO: Quebra de gelo e confirmao de interesse real.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_Filtro</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_D0_Zap</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_FlashDemo_D0_Meta" name="D0 - Flash Demo - udio + Print">
      <bpmn2:documentation> FLASH DEMO - PROVA IMEDIATA:

MENSAGEM (aps resposta ou 15min):
"Olha s que demais. Voc manda um udio falando o que precisa lanar e a IA j organiza tudo.

[udio Flash Demo 20s]
[Print de resultado]

Testou algo parecido antes ou  a primeira vez vendo isso?"

OBJETIVO: Mostrar o produto funcionando antes de qualquer pitch.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_D0_Zap</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_FlashDemo</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D1_WhatsApp_Meta" name="D1 - WhatsApp (Manh) - A Curiosidade">
      <bpmn2:documentation> DIA 1 - A CURIOSIDADE:

Lead Meta  frio. Precisa de nutrio antes de venda.

MENSAGEM:
"Bom dia [Nome]!

Voc usa planilha, caderno ou j tem algum sistema hoje pra controlar o caixa?"

OBJETIVO: Entender a dor atual e gerar engajamento atravs da pergunta.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_Fechou_Nao</bpmn2:incoming>
      <bpmn2:incoming>Flow_Meta_Interessado_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_D1</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D3_WhatsApp_Meta" name="D3 - WhatsApp (Tarde) - A Prova Social">
      <bpmn2:documentation> DIA 3 - PROVA SOCIAL:

MENSAGEM:
"[Nome], lembrei de voc hoje.

Esse cliente aqui  do ramo de [Segmento] tambm. Olha o antes e depois dele em 7 dias:

[Print de Depoimento/Resultado]

Muita gente do seu ramo t usando. Voc j organizou a ou continua no improviso?"

OBJETIVO: Mostrar que o nicho dele j usa e tem resultados.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_D1</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_D3</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D6_WhatsApp_Meta" name="D6 - WhatsApp (Manh) - Contedo Educativo">
      <bpmn2:documentation> DIA 6 - EDUCAO (Soft Touch):

Lead ainda no comprou. Hora de educar sem vender.

MENSAGEM:
"Bom dia [Nome]!

Fiz esse vdeo rpido mostrando os 3 erros que TODO dono de [Segmento] comete no controle financeiro (e como evitar):

[Link para Vdeo Curto 2-3min]

Vale a pena assistir. Abrao!"

OBJETIVO: Gerar valor sem pedir nada em troca. Construir autoridade.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_D3</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_D6</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D9_WhatsApp_Meta" name="D9 - WhatsApp (Tarde) - Oferta Irresistvel">
      <bpmn2:documentation> DIA 9 - A OFERTA IRRESISTVEL:

Hora de fazer a oferta com escassez.

MENSAGEM:
"E a [Nome], vou te fazer uma proposta:

T com 5 vagas essa semana pra liberar teste de 7 dias GRTIS + Onboarding personalizado (valor R$ 497) sem custo.

Mas s at sexta.

Se organizar o financeiro  prioridade, me confirma que eu separo uma vaga pra voc. Se no for, sem problema, a gente se fala mais pra frente.

Bora?"

OBJETIVO: Criar senso de urgncia e oportunidade limitada.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_D6</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_D9</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D14_WhatsApp_Meta" name="D14 - WhatsApp - Break-up Elegante">
      <bpmn2:documentation> DIA 14 - BREAK-UP ELEGANTE:

Tcnica de "take away" sem queimar a ponte.

MENSAGEM:
"Fala [Nome]!

Como no tivemos retorno, vou assumir que organizar o financeiro no  prioridade agora ou voc j resolveu de outra forma.

Vou parar de te cutucar por aqui pra no incomodar 

Mas fica o meu contato. Se um dia o caos voltar (e ele sempre volta haha),  s chamar.

Sucesso a! "

OBJETIVO: Dar a ltima chance de resposta ou encerrar educadamente.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_D9</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_D14</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:userTask id="Task_PaginaFiltro_Meta" name="Pgina de Filtro + Formulrio">
      <bpmn2:documentation> PGINA DE FILTRO META ADS:

Lead vem de anncio de descoberta (topo de funil).

LANDING PAGE:
- Ttulo: "Transforme udios em organizao financeira"
- Filtro de qualificao: "Voc  dono/gestor?"
- Formulrio: Nome, WhatsApp, Segmento

OBJETIVO: Capturar contato qualificado antes da abordagem.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_Start</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_Filtro</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:userTask id="Task_SelecaoMotivo_Meta" name="CRM: Selecionar Motivo da Perda">
      <bpmn2:documentation> MARCAR COMO PERDIDO (LOST):

MOTIVOS OBRIGATRIOS:
 Sem Contato (Ghosting) - Nunca respondeu
 Preo - Achou caro
 No  Pblico-Alvo - Curioso/Estudante
 Concorrncia - Fechou com outro
 Timing - "No  o momento"
 Outro - Especificar

CRM ACTION: Marcar lead como LOST com motivo.

MTRICA: Taxa de converso Meta Ads por motivo de perda.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_Respondeu_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_Motivo</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_Interessado_D0_Meta" name="Interessado?">
      <bpmn2:incoming>Flow_Meta_FlashDemo</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_Interessado_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Meta_Interessado_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Converteu_Imediato_Meta" name="Fechou na hora?">
      <bpmn2:incoming>Flow_Meta_Interessado_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_Fechou_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Meta_Fechou_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Converteu_Meta" name="Converteu?">
      <bpmn2:incoming>Flow_Meta_D14</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_Converteu_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Meta_Converteu_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Respondeu_Meta" name="Respondeu?">
      <bpmn2:incoming>Flow_Meta_Timer24h</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_Respondeu_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Meta_Respondeu_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_24h_Meta" name="24h">
      <bpmn2:documentation> TIMER PS-BREAKUP:
Aguarda 24h para ver se o lead responde ao ultimato.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Meta_Converteu_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Meta_Timer24h</bpmn2:outgoing>
      <bpmn2:timerEventDefinition>
        <bpmn2:timeDuration>PT24H</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateThrowEvent id="LinkThrow_Meta" name=" Checkout">
      <bpmn2:incoming>Flow_Meta_Fechou_Sim</bpmn2:incoming>
      <bpmn2:incoming>Flow_Meta_Converteu_Sim</bpmn2:incoming>
      <bpmn2:linkEventDefinition name="Link_Checkout" />
    </bpmn2:intermediateThrowEvent>

    <bpmn2:sequenceFlow id="Flow_Meta_Start" sourceRef="Start_Meta" targetRef="Task_PaginaFiltro_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Filtro" sourceRef="Task_PaginaFiltro_Meta" targetRef="Task_WhatsApp_D0_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_D0_Zap" sourceRef="Task_WhatsApp_D0_Meta" targetRef="Task_FlashDemo_D0_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_FlashDemo" sourceRef="Task_FlashDemo_D0_Meta" targetRef="Gateway_Interessado_D0_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Interessado_Sim" name="Sim" sourceRef="Gateway_Interessado_D0_Meta" targetRef="Gateway_Converteu_Imediato_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Interessado_Nao" name="No" sourceRef="Gateway_Interessado_D0_Meta" targetRef="Task_D1_WhatsApp_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Fechou_Sim" name="Sim" sourceRef="Gateway_Converteu_Imediato_Meta" targetRef="LinkThrow_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Fechou_Nao" name="No" sourceRef="Gateway_Converteu_Imediato_Meta" targetRef="Task_D1_WhatsApp_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_D1" sourceRef="Task_D1_WhatsApp_Meta" targetRef="Task_D3_WhatsApp_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_D3" sourceRef="Task_D3_WhatsApp_Meta" targetRef="Task_D6_WhatsApp_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_D6" sourceRef="Task_D6_WhatsApp_Meta" targetRef="Task_D9_WhatsApp_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_D9" sourceRef="Task_D9_WhatsApp_Meta" targetRef="Task_D14_WhatsApp_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_D14" sourceRef="Task_D14_WhatsApp_Meta" targetRef="Gateway_Converteu_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Converteu_Sim" name="Sim" sourceRef="Gateway_Converteu_Meta" targetRef="LinkThrow_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Converteu_Nao" name="No" sourceRef="Gateway_Converteu_Meta" targetRef="IntermediateTimer_24h_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Timer24h" sourceRef="IntermediateTimer_24h_Meta" targetRef="Gateway_Respondeu_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Respondeu_Sim" name="Sim" sourceRef="Gateway_Respondeu_Meta" targetRef="Task_GrupoNurturing_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Respondeu_Nao" name="No" sourceRef="Gateway_Respondeu_Meta" targetRef="Task_SelecaoMotivo_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Nurturing" sourceRef="Task_GrupoNurturing_Meta" targetRef="End_Bloqueio_Meta" />
    <bpmn2:sequenceFlow id="Flow_Meta_Motivo" sourceRef="Task_SelecaoMotivo_Meta" targetRef="End_Perdido_Meta" />

  </bpmn2:process>

  <bpmn2:process id="Process_Nucleo" isExecutable="false">

    <bpmn2:endEvent id="End_Cliente_Ativo" name=" Cliente Ativo">
      <bpmn2:documentation>CLIENTE CONVERTIDO E ATIVO
Acesso liberado
Receita capturada
Onboarding em andamento</bpmn2:documentation>
      <bpmn2:incoming>Flow_Para_Cliente_Ativo</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:endEvent id="End_Pagamento_Falhou" name=" Pagamento Falhou">
      <bpmn2:documentation>LEAD PERDIDO POR PAGAMENTO
Tentativas esgotadas:
- Anual: Recusado
- Semestral: Recusado
- Trimestral: Recusado

Prximas aes:
- Adicionar ao grupo de nurturing
- Remarketing futuro
- Possvel follow-up em 30 dias</bpmn2:documentation>
      <bpmn2:incoming>Flow_Trimestral_Recusado</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:task id="Task_Checkout_Anual" name="Checkout: Plano Anual (R$ 1.497)">
      <bpmn2:documentation>DEGRAU 1: OFERTA PRINCIPAL
Valor: R$ 1.497/ano (R$ 124,75/ms)
Estratgia: Mximo cashflow antecipado
Parcelamento: At 12x no carto (juros por conta do cliente)
Link: hotmart.com/fyness-anual
Gateway: Hotmart + Asaas (fallback)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Para_Anual</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Anual_Para_Gateway</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_Split_Parceiro" name="Split: 30% Comisso Parceiro">
      <bpmn2:documentation>SPLIT AUTOMTICO (SE TAG: INDICACAO)
Gateway: Asaas Split Payments
Parceiro recebe: 30% do valor (R$ 449,10 no Anual)
Timing: D+30 (aps garantia)
Nota: Apenas para leads vindos de Lane_Indicacao</bpmn2:documentation>
      <bpmn2:incoming>Flow_Anual_Aprovado</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Split_Para_Onboarding</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_Onboarding_Pago" name="Onboarding: Acesso Imediato">
      <bpmn2:documentation>ONBOARDING CLIENTE PAGANTE:
1. E-mail de boas-vindas com credenciais
2. Acesso liberado ao sistema Fyness
3. WhatsApp de boas-vindas + link de suporte
4. Adiciona ao grupo VIP de clientes
5. Envia tutorial de primeiros passos
Timing: Imediato (webhook ps-pagamento)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Split_Para_Onboarding</bpmn2:incoming>
      <bpmn2:incoming>Flow_Semestral_Aprovado</bpmn2:incoming>
      <bpmn2:incoming>Flow_Trimestral_Aprovado</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Para_Cliente_Ativo</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_Webhook_Falha" name="Webhook: Detecta Falha no Pagamento">
      <bpmn2:documentation>DETECO AUTOMTICA DE RECUSA
Sistema: Webhook do gateway de pagamento
Trigger: Carto recusado por:
- Limite insuficiente
- Segurana do banco
- Dados incorretos
Ao: Dispara sequncia de downsell automtico</bpmn2:documentation>
      <bpmn2:incoming>Flow_Anual_Recusado</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Falha_Para_WhatsApp</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_WhatsApp_5min" name="WhatsApp Automtico: Link Semestral (5min)">
      <bpmn2:documentation>DOWNSELL AUTOMTICO (5 MINUTOS APS FALHA)
Via: WhatsApp (ManyChat ou Evolution API)
Script:
"Oi [Nome], vi aqui que o banco barrou a transao do plano Anual por segurana ou limite.

Isso  super comum com valores maiores!

Tenta esse link do Semestral que costuma passar direto (valor menor, mesmo benefcio):
[Link Semestral]

Qualquer coisa me chama! "

Link: hotmart.com/fyness-semestral</bpmn2:documentation>
      <bpmn2:incoming>Flow_Falha_Para_WhatsApp</bpmn2:incoming>
      <bpmn2:outgoing>Flow_WhatsApp_Para_Semestral</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_Checkout_Semestral" name="Checkout: Plano Semestral (R$ 997)">
      <bpmn2:documentation>DEGRAU 2: DOWNSELL AUTOMTICO
Valor: R$ 997/semestre (R$ 166,17/ms)
Estratgia: Ticket menor, mais fcil de passar no carto
Parcelamento: At 12x no carto
Link: hotmart.com/fyness-semestral
Nota: NO fica exposto no site principal</bpmn2:documentation>
      <bpmn2:incoming>Flow_WhatsApp_Para_Semestral</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Semestral_Para_Gateway</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_Vendedor_Trimestral" name="Vendedor: Oferta Manual Trimestral">
      <bpmn2:documentation>DEGRAU 3: CARTA NA MANGA DO VENDEDOR
Timing: D+2 aps falha do Semestral
Responsvel: SDR/Closer
Canal: WhatsApp ou ligao
Argumento:
"[Nome], entendo que o timing no est ideal agora.

No casa comigo. Que tal namorar por 3 meses?

 um teste pago de R$ 561 pra voc organizar a casa e decidir se vale continuar.

Se em 90 dias no mudou nada, cancela. Sem problema.

Bora testar?"

Link: hotmart.com/fyness-trimestral (NO EXPOSTO NO SITE)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Timer_Para_Vendedor</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Vendedor_Para_Trimestral</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:task id="Task_Checkout_Trimestral" name="Checkout: Plano Trimestral (R$ 561)">
      <bpmn2:documentation>DEGRAU 3: LAST RESORT (NO PBLICO)
Valor: R$ 561/trimestre (R$ 187/ms)
Estratgia: Teste pago, menor compromisso
Parcelamento: At 3x no carto
Link: hotmart.com/fyness-trimestral (privado)
Uso: Apenas para recuperao manual via vendedor</bpmn2:documentation>
      <bpmn2:incoming>Flow_Vendedor_Para_Trimestral</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Trimestral_Para_Gateway</bpmn2:outgoing>
    </bpmn2:task>

    <bpmn2:exclusiveGateway id="Gateway_Checkout_Merge" name="Direciona Checkout">
      <bpmn2:incoming>Flow_Nucleo_Entrada</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Para_Anual</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Pagamento_Anual" name="Pagamento Anual Aprovado?">
      <bpmn2:incoming>Flow_Anual_Para_Gateway</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Anual_Aprovado</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Anual_Recusado</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Pagamento_Semestral" name="Pagamento Semestral Aprovado?">
      <bpmn2:incoming>Flow_Semestral_Para_Gateway</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Semestral_Aprovado</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Semestral_Recusado</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:exclusiveGateway id="Gateway_Pagamento_Trimestral" name="Pagamento Trimestral Aprovado?">
      <bpmn2:incoming>Flow_Trimestral_Para_Gateway</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Trimestral_Aprovado</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Trimestral_Recusado</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:intermediateCatchEvent id="LinkCatch_Merge" name=" Checkout (Todas as Fontes)">
      <bpmn2:documentation>CONVERGNCIA DE 5 CANAIS:
- Indicao (Ativo + Passivo)
- Contedo (Perfil Pessoal + Empresa)
- Prospeco (Redes Sociais)
- Google Ads (Alta Inteno)
- Meta Ads (Funil Frio)</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Nucleo_Entrada</bpmn2:outgoing>
      <bpmn2:linkEventDefinition name="Link_Checkout" />
    </bpmn2:intermediateCatchEvent>

    <bpmn2:intermediateCatchEvent id="IntermediateTimer_D2" name=" Timer: 48h">
      <bpmn2:documentation>COOLING OFF PERIOD
Aguarda 2 dias antes da ltima tentativa
Permite que cliente resolva questes bancrias
Evita spam excessivo</bpmn2:documentation>
      <bpmn2:incoming>Flow_Semestral_Recusado</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Timer_Para_Vendedor</bpmn2:outgoing>
      <bpmn2:timerEventDefinition>
        <bpmn2:timeDuration>PT48H</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>

    <bpmn2:sequenceFlow id="Flow_Nucleo_Entrada" sourceRef="LinkCatch_Merge" targetRef="Gateway_Checkout_Merge" />
    <bpmn2:sequenceFlow id="Flow_Para_Anual" sourceRef="Gateway_Checkout_Merge" targetRef="Task_Checkout_Anual" />
    <bpmn2:sequenceFlow id="Flow_Anual_Para_Gateway" sourceRef="Task_Checkout_Anual" targetRef="Gateway_Pagamento_Anual" />
    <bpmn2:sequenceFlow id="Flow_Anual_Aprovado" name="SIM" sourceRef="Gateway_Pagamento_Anual" targetRef="Task_Split_Parceiro" />
    <bpmn2:sequenceFlow id="Flow_Anual_Recusado" name="NO" sourceRef="Gateway_Pagamento_Anual" targetRef="Task_Webhook_Falha" />
    <bpmn2:sequenceFlow id="Flow_Split_Para_Onboarding" sourceRef="Task_Split_Parceiro" targetRef="Task_Onboarding_Pago" />
    <bpmn2:sequenceFlow id="Flow_Para_Cliente_Ativo" sourceRef="Task_Onboarding_Pago" targetRef="End_Cliente_Ativo" />
    <bpmn2:sequenceFlow id="Flow_Falha_Para_WhatsApp" sourceRef="Task_Webhook_Falha" targetRef="Task_WhatsApp_5min" />
    <bpmn2:sequenceFlow id="Flow_WhatsApp_Para_Semestral" sourceRef="Task_WhatsApp_5min" targetRef="Task_Checkout_Semestral" />
    <bpmn2:sequenceFlow id="Flow_Semestral_Para_Gateway" sourceRef="Task_Checkout_Semestral" targetRef="Gateway_Pagamento_Semestral" />
    <bpmn2:sequenceFlow id="Flow_Semestral_Aprovado" name="SIM" sourceRef="Gateway_Pagamento_Semestral" targetRef="Task_Onboarding_Pago" />
    <bpmn2:sequenceFlow id="Flow_Semestral_Recusado" name="NO" sourceRef="Gateway_Pagamento_Semestral" targetRef="IntermediateTimer_D2" />
    <bpmn2:sequenceFlow id="Flow_Timer_Para_Vendedor" sourceRef="IntermediateTimer_D2" targetRef="Task_Vendedor_Trimestral" />
    <bpmn2:sequenceFlow id="Flow_Vendedor_Para_Trimestral" sourceRef="Task_Vendedor_Trimestral" targetRef="Task_Checkout_Trimestral" />
    <bpmn2:sequenceFlow id="Flow_Trimestral_Para_Gateway" sourceRef="Task_Checkout_Trimestral" targetRef="Gateway_Pagamento_Trimestral" />
    <bpmn2:sequenceFlow id="Flow_Trimestral_Aprovado" name="SIM" sourceRef="Gateway_Pagamento_Trimestral" targetRef="Task_Onboarding_Pago" />
    <bpmn2:sequenceFlow id="Flow_Trimestral_Recusado" name="NO" sourceRef="Gateway_Pagamento_Trimestral" targetRef="End_Pagamento_Falhou" />

  </bpmn2:process>


    <!-- DIAGRAMA (Posies - Gerado automaticamente) -->
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_Comercial">

      <!-- Pool Shapes -->
      <bpmndi:BPMNShape id="Shape_Participant_Educacao" bpmnElement="Participant_Educacao" isHorizontal="true" bioc:stroke="#51cf66" bioc:fill="#e0ffe0">
        <dc:Bounds x="160" y="80" width="4400" height="520" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Participant_Indicacao" bpmnElement="Participant_Indicacao" isHorizontal="true" bioc:stroke="#ff6b6b" bioc:fill="#ffe0e0">
        <dc:Bounds x="160" y="650" width="4400" height="630" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Participant_Conteudo" bpmnElement="Participant_Conteudo" isHorizontal="true" bioc:stroke="#9775fa" bioc:fill="#f0e0ff">
        <dc:Bounds x="160" y="1330" width="4400" height="520" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Participant_Prospeccao" bpmnElement="Participant_Prospeccao" isHorizontal="true" bioc:stroke="#fa5252" bioc:fill="#ffe0e0">
        <dc:Bounds x="160" y="1900" width="4400" height="160" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Participant_Google" bpmnElement="Participant_Google" isHorizontal="true" bioc:stroke="#4dabf7" bioc:fill="#e0f0ff">
        <dc:Bounds x="160" y="2110" width="4400" height="520" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Participant_Meta" bpmnElement="Participant_Meta" isHorizontal="true" bioc:stroke="#cc5de8" bioc:fill="#f3e0ff">
        <dc:Bounds x="160" y="2680" width="4400" height="410" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Shape_Participant_Nucleo" bpmnElement="Participant_Nucleo" isHorizontal="true" bioc:stroke="#868e96" bioc:fill="#f0f0f0">
        <dc:Bounds x="160" y="3140" width="4400" height="410" />
      </bpmndi:BPMNShape>

      <!-- Educacao elements -->
      <bpmndi:BPMNShape id="Shape_Start_Educacao_Curso" bpmnElement="Start_Educacao_Curso">
        <dc:Bounds x="232" y="112" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Tag_Curso" bpmnElement="Task_Tag_Curso">
        <dc:Bounds x="355" y="90" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Merge_Entrada" bpmnElement="Gateway_Merge_Entrada">
        <dc:Bounds x="535" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Email_BoasVindas" bpmnElement="Task_Email_BoasVindas">
        <dc:Bounds x="665" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Aula_Setup" bpmnElement="Task_Aula_Setup">
        <dc:Bounds x="820" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_IntermediateTimer_D7" bpmnElement="IntermediateTimer_D7">
        <dc:Bounds x="1007" y="222" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Ativou_D7" bpmnElement="Gateway_Ativou_D7">
        <dc:Bounds x="1155" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Merge_Ativacao" bpmnElement="Gateway_Merge_Ativacao">
        <dc:Bounds x="1465" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_M1_Desafio_DRE" bpmnElement="Task_M1_Desafio_DRE">
        <dc:Bounds x="1595" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_IntermediateTimer_M2" bpmnElement="IntermediateTimer_M2">
        <dc:Bounds x="1782" y="222" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_M3_Checkpoint" bpmnElement="Task_M3_Checkpoint">
        <dc:Bounds x="1905" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_IntermediateTimer_M5" bpmnElement="IntermediateTimer_M5">
        <dc:Bounds x="2092" y="222" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D150_Aviso" bpmnElement="Task_D150_Aviso">
        <dc:Bounds x="2215" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_IntermediateTimer_30d" bpmnElement="IntermediateTimer_30d">
        <dc:Bounds x="2402" y="222" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Renovou" bpmnElement="Gateway_Renovou">
        <dc:Bounds x="2550" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Tipo_Renovacao" bpmnElement="Gateway_Tipo_Renovacao">
        <dc:Bounds x="2705" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Renovacao_Anual" bpmnElement="Task_Renovacao_Anual">
        <dc:Bounds x="2835" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Cliente_Ativo_Educacao" bpmnElement="End_Cliente_Ativo_Educacao">
        <dc:Bounds x="3022" y="222" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Start_Educacao_Software" bpmnElement="Start_Educacao_Software">
        <dc:Bounds x="232" y="332" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Tag_Software" bpmnElement="Task_Tag_Software">
        <dc:Bounds x="355" y="310" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_CS_Liga_Ativacao" bpmnElement="Task_CS_Liga_Ativacao">
        <dc:Bounds x="1285" y="310" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Renovacao_Mensal" bpmnElement="Task_Renovacao_Mensal">
        <dc:Bounds x="2835" y="310" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Bloqueio_Leitura" bpmnElement="Task_Bloqueio_Leitura">
        <dc:Bounds x="2525" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_CS_Recuperacao" bpmnElement="Task_CS_Recuperacao">
        <dc:Bounds x="2680" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Recuperou" bpmnElement="Gateway_Recuperou">
        <dc:Bounds x="2860" y="435" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Cliente_Perdido_Educacao" bpmnElement="End_Cliente_Perdido_Educacao">
        <dc:Bounds x="3022" y="442" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- Indicacao elements -->
      <bpmndi:BPMNShape id="Shape_Start_Indicacao_Ativo" bpmnElement="Start_Indicacao_Ativo">
        <dc:Bounds x="232" y="682" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Tag_Ativo" bpmnElement="Task_Tag_Ativo">
        <dc:Bounds x="355" y="660" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_QuebraGelo_Ativo" bpmnElement="Task_QuebraGelo_Ativo">
        <dc:Bounds x="510" y="660" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_MergeIndicacao" bpmnElement="Gateway_MergeIndicacao">
        <dc:Bounds x="690" y="785" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D0_Ligacao_Indicacao" bpmnElement="Task_D0_Ligacao_Indicacao">
        <dc:Bounds x="820" y="770" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Atendeu_D0_Indicacao" bpmnElement="Gateway_Atendeu_D0_Indicacao">
        <dc:Bounds x="1000" y="785" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D0_Qualifica_Indicacao" bpmnElement="Task_D0_Qualifica_Indicacao">
        <dc:Bounds x="1130" y="770" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Converteu_D0_Indicacao" bpmnElement="Gateway_Converteu_D0_Indicacao">
        <dc:Bounds x="1310" y="785" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Merge_D0_Indicacao" bpmnElement="Gateway_Merge_D0_Indicacao">
        <dc:Bounds x="1620" y="785" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D1_WhatsApp2_Indicacao" bpmnElement="Task_D1_WhatsApp2_Indicacao">
        <dc:Bounds x="1750" y="770" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D3_WhatsApp3_Indicacao" bpmnElement="Task_D3_WhatsApp3_Indicacao">
        <dc:Bounds x="1905" y="770" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D6_WhatsApp4_Indicacao" bpmnElement="Task_D6_WhatsApp4_Indicacao">
        <dc:Bounds x="2060" y="770" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D10_WhatsApp5_Indicacao" bpmnElement="Task_D10_WhatsApp5_Indicacao">
        <dc:Bounds x="2215" y="770" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Converteu_Indicacao" bpmnElement="Gateway_Converteu_Indicacao">
        <dc:Bounds x="2395" y="785" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_LinkThrow_Indicacao" bpmnElement="LinkThrow_Indicacao">
        <dc:Bounds x="2557" y="792" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_AvisaParceiro" bpmnElement="Task_AvisaParceiro">
        <dc:Bounds x="2680" y="770" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Start_Indicacao_Passivo" bpmnElement="Start_Indicacao_Passivo">
        <dc:Bounds x="232" y="902" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Tag_Passivo" bpmnElement="Task_Tag_Passivo">
        <dc:Bounds x="355" y="880" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_QuebraGelo_Passivo" bpmnElement="Task_QuebraGelo_Passivo">
        <dc:Bounds x="510" y="880" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D0_WhatsApp1_Indicacao" bpmnElement="Task_D0_WhatsApp1_Indicacao">
        <dc:Bounds x="975" y="880" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D0_Instagram_Indicacao" bpmnElement="Task_D0_Instagram_Indicacao">
        <dc:Bounds x="1130" y="880" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_FlashDemo_Indicacao" bpmnElement="Task_FlashDemo_Indicacao">
        <dc:Bounds x="1440" y="990" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Trial7d_Indicacao" bpmnElement="Task_Trial7d_Indicacao">
        <dc:Bounds x="1580" y="990" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_IntermediateTimer_48h" bpmnElement="IntermediateTimer_48h">
        <dc:Bounds x="1702" y="1012" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_UsouEm48h" bpmnElement="Gateway_UsouEm48h">
        <dc:Bounds x="1820" y="1005" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_PressaoSocial" bpmnElement="Task_PressaoSocial">
        <dc:Bounds x="1940" y="1100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D1_Lembrete" bpmnElement="Task_D1_Lembrete">
        <dc:Bounds x="1960" y="990" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D3_ProvaSocial" bpmnElement="Task_D3_ProvaSocial">
        <dc:Bounds x="2100" y="990" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D5_Ultimato" bpmnElement="Task_D5_Ultimato">
        <dc:Bounds x="2240" y="990" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_IntermediateTimer_24h_Breakup_Indicacao" bpmnElement="IntermediateTimer_24h_Breakup_Indicacao">
        <dc:Bounds x="2402" y="1122" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Respondeu_Breakup_Indicacao" bpmnElement="Gateway_Respondeu_Breakup_Indicacao">
        <dc:Bounds x="2550" y="1115" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_SelecaoMotivo_Indicacao" bpmnElement="Task_SelecaoMotivo_Indicacao">
        <dc:Bounds x="2680" y="1100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Perdido_Motivo_Indicacao" bpmnElement="End_Perdido_Motivo_Indicacao">
        <dc:Bounds x="2867" y="1122" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_GrupoNurturing_Indicacao" bpmnElement="Task_GrupoNurturing_Indicacao">
        <dc:Bounds x="2680" y="990" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Bloqueio_Indicacao" bpmnElement="End_Bloqueio_Indicacao">
        <dc:Bounds x="2867" y="1012" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- Conteudo elements -->
      <bpmndi:BPMNShape id="Shape_Start_Conteudo_Empresa" bpmnElement="Start_Conteudo_Empresa">
        <dc:Bounds x="232" y="1362" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_SDR_Empresa" bpmnElement="Task_SDR_Empresa">
        <dc:Bounds x="355" y="1340" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_WhatsApp_Empresa" bpmnElement="Task_WhatsApp_Empresa">
        <dc:Bounds x="510" y="1340" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_FlashDemo_Empresa" bpmnElement="Task_FlashDemo_Empresa">
        <dc:Bounds x="665" y="1340" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Merge_Conteudo" bpmnElement="Gateway_Merge_Conteudo">
        <dc:Bounds x="845" y="1465" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Converteu_Imediato_Conteudo" bpmnElement="Gateway_Converteu_Imediato_Conteudo">
        <dc:Bounds x="1000" y="1465" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D1_Repost_Conteudo" bpmnElement="Task_D1_Repost_Conteudo">
        <dc:Bounds x="1130" y="1450" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D3_Prova_Conteudo" bpmnElement="Task_D3_Prova_Conteudo">
        <dc:Bounds x="1285" y="1450" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D7_Fechamento_Conteudo" bpmnElement="Task_D7_Fechamento_Conteudo">
        <dc:Bounds x="1440" y="1450" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Converteu_Conteudo" bpmnElement="Gateway_Converteu_Conteudo">
        <dc:Bounds x="1620" y="1465" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_LinkThrow_Conteudo" bpmnElement="LinkThrow_Conteudo">
        <dc:Bounds x="1782" y="1472" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Start_Conteudo_Pessoal" bpmnElement="Start_Conteudo_Pessoal">
        <dc:Bounds x="232" y="1582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_ManyChat_Pessoal" bpmnElement="Task_ManyChat_Pessoal">
        <dc:Bounds x="355" y="1560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_WhatsApp_Pessoal" bpmnElement="Task_WhatsApp_Pessoal">
        <dc:Bounds x="510" y="1560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_FlashDemo_Pessoal" bpmnElement="Task_FlashDemo_Pessoal">
        <dc:Bounds x="665" y="1560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_IntermediateTimer_24h_Conteudo" bpmnElement="IntermediateTimer_24h_Conteudo">
        <dc:Bounds x="1627" y="1692" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Respondeu_Conteudo" bpmnElement="Gateway_Respondeu_Conteudo">
        <dc:Bounds x="1775" y="1685" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_GrupoNurturing_Conteudo" bpmnElement="Task_GrupoNurturing_Conteudo">
        <dc:Bounds x="1905" y="1670" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Bloqueio_Conteudo" bpmnElement="End_Bloqueio_Conteudo">
        <dc:Bounds x="2092" y="1692" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_SelecaoMotivo_Conteudo" bpmnElement="Task_SelecaoMotivo_Conteudo">
        <dc:Bounds x="1905" y="1560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Perdido_Conteudo" bpmnElement="End_Perdido_Conteudo">
        <dc:Bounds x="2092" y="1582" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- Prospeccao elements -->
      <bpmndi:BPMNShape id="Shape_Start_Prospeccao" bpmnElement="Start_Prospeccao">
        <dc:Bounds x="232" y="1932" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Prosp_Placeholder" bpmnElement="Task_Prosp_Placeholder">
        <dc:Bounds x="355" y="1910" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_LinkThrow_Prospeccao" bpmnElement="LinkThrow_Prospeccao">
        <dc:Bounds x="542" y="1932" width="36" height="36" />
      </bpmndi:BPMNShape>

                  <!-- Google elements -->
      <bpmndi:BPMNShape id="Task_ClickCheckout_Self_di" bpmnElement="Task_ClickCheckout_Self">
        <dc:Bounds x="500" y="2170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_PreencheDados_Self_di" bpmnElement="Task_PreencheDados_Self">
        <dc:Bounds x="640" y="2170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Pagamento_Self_di" bpmnElement="Gateway_Pagamento_Self">
        <dc:Bounds x="780" y="2185" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_AutomacaoBoasVindas_di" bpmnElement="Task_AutomacaoBoasVindas">
        <dc:Bounds x="870" y="2170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="IntermediateTimer_24h_Google_di" bpmnElement="IntermediateTimer_24h_Google">
        <dc:Bounds x="1010" y="2192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_PrimeiroAudio_di" bpmnElement="Gateway_PrimeiroAudio">
        <dc:Bounds x="1090" y="2185" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_AlertaHumano_Google_di" bpmnElement="Task_AlertaHumano_Google">
        <dc:Bounds x="1180" y="2170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_Pago_Google_di" bpmnElement="End_Pago_Google">
        <dc:Bounds x="1332" y="2192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Start_Google_di" bpmnElement="Start_Google">
        <dc:Bounds x="250" y="2302" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_CaminhoGoogle_di" bpmnElement="Gateway_CaminhoGoogle">
        <dc:Bounds x="370" y="2295" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_MergeTrial_di" bpmnElement="Gateway_MergeTrial">
        <dc:Bounds x="1100" y="2295" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D0_Ligacao1_Google_di" bpmnElement="Task_D0_Ligacao1_Google">
        <dc:Bounds x="1230" y="2280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Atendeu_D0_Google_di" bpmnElement="Gateway_Atendeu_D0_Google">
        <dc:Bounds x="1380" y="2295" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D0_Qualifica_Google_di" bpmnElement="Task_D0_Qualifica_Google">
        <dc:Bounds x="1480" y="2280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Merge_D0_Google_di" bpmnElement="Gateway_Merge_D0_Google">
        <dc:Bounds x="1750" y="2295" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D1_WhatsApp3_Diferenca_Google_di" bpmnElement="Task_D1_WhatsApp3_Diferenca_Google">
        <dc:Bounds x="1880" y="2280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D1_Ligacao2_Google_di" bpmnElement="Task_D1_Ligacao2_Google">
        <dc:Bounds x="2020" y="2280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D3_WhatsApp4_Case_Google_di" bpmnElement="Task_D3_WhatsApp4_Case_Google">
        <dc:Bounds x="2160" y="2280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D5_WhatsApp5_Pressao_Google_di" bpmnElement="Task_D5_WhatsApp5_Pressao_Google">
        <dc:Bounds x="2300" y="2280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D5_Ligacao3_Google_di" bpmnElement="Task_D5_Ligacao3_Google">
        <dc:Bounds x="2440" y="2280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D7_Fechamento_Google_di" bpmnElement="Task_D7_Fechamento_Google">
        <dc:Bounds x="2580" y="2280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Converteu_Google_di" bpmnElement="Gateway_Converteu_Google">
        <dc:Bounds x="2720" y="2295" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="LinkThrow_Google_di" bpmnElement="LinkThrow_Google">
        <dc:Bounds x="2830" y="2302" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ClickWhatsApp_di" bpmnElement="Task_ClickWhatsApp">
        <dc:Bounds x="500" y="2390" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_SpeedToLead_Google_di" bpmnElement="Task_SpeedToLead_Google">
        <dc:Bounds x="640" y="2390" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_FlashDemo_Google_di" bpmnElement="Task_FlashDemo_Google">
        <dc:Bounds x="780" y="2390" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_OfertaTrial_Google_di" bpmnElement="Task_OfertaTrial_Google">
        <dc:Bounds x="920" y="2390" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_AceitouTrial_Google_di" bpmnElement="Gateway_AceitouTrial_Google" isMarkerVisible="true">
        <dc:Bounds x="1050" y="2405" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D0_WhatsApp1_Prova_Google_di" bpmnElement="Task_D0_WhatsApp1_Prova_Google">
        <dc:Bounds x="1480" y="2390" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D0_WhatsApp2_Ajuda_Google_di" bpmnElement="Task_D0_WhatsApp2_Ajuda_Google">
        <dc:Bounds x="1620" y="2390" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_D7_WhatsApp6_Breakup_Google_di" bpmnElement="Task_D7_WhatsApp6_Breakup_Google">
        <dc:Bounds x="2830" y="2390" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="IntermediateTimer_24h_Breakup_Google_di" bpmnElement="IntermediateTimer_24h_Breakup_Google">
        <dc:Bounds x="2972" y="2412" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Respondeu_Breakup_Google_di" bpmnElement="Gateway_Respondeu_Breakup_Google">
        <dc:Bounds x="3050" y="2405" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_GrupoNurturing_Google_di" bpmnElement="Task_GrupoNurturing_Google">
        <dc:Bounds x="3140" y="2390" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_Bloqueio_Google_di" bpmnElement="End_Bloqueio_Google">
        <dc:Bounds x="3282" y="2412" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_RecuperacaoCarrinho_di" bpmnElement="Task_RecuperacaoCarrinho">
        <dc:Bounds x="870" y="2500" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SubProcess_Trial_Google_di" bpmnElement="SubProcess_Trial_Google" isExpanded="true">
        <dc:Bounds x="1010" y="2490" width="1540" height="220" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Start_Trial_di" bpmnElement="Start_Trial">
        <dc:Bounds x="1030" y="2582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Trial_D0_BoasVindas_di" bpmnElement="Task_Trial_D0_BoasVindas">
        <dc:Bounds x="1090" y="2560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Timer_Trial_24h_di" bpmnElement="Timer_Trial_24h">
        <dc:Bounds x="1212" y="2582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Trial_D1_Uso_di" bpmnElement="Gateway_Trial_D1_Uso">
        <dc:Bounds x="1270" y="2575" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Trial_D1_Dica_di" bpmnElement="Task_Trial_D1_Dica">
        <dc:Bounds x="1345" y="2510" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Trial_D1_Reengajamento_di" bpmnElement="Task_Trial_D1_Reengajamento">
        <dc:Bounds x="1345" y="2620" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Trial_D1_Merge_di" bpmnElement="Gateway_Trial_D1_Merge">
        <dc:Bounds x="1470" y="2575" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Timer_Trial_D2_di" bpmnElement="Timer_Trial_D2">
        <dc:Bounds x="1542" y="2582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Trial_D2_Case_di" bpmnElement="Task_Trial_D2_Case">
        <dc:Bounds x="1600" y="2560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Timer_Trial_D3_di" bpmnElement="Timer_Trial_D3">
        <dc:Bounds x="1722" y="2582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Trial_D3_Uso_di" bpmnElement="Gateway_Trial_D3_Uso">
        <dc:Bounds x="1780" y="2575" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Trial_D3_Parabens_di" bpmnElement="Task_Trial_D3_Parabens">
        <dc:Bounds x="1855" y="2510" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Trial_D3_Resgate_di" bpmnElement="Task_Trial_D3_Resgate">
        <dc:Bounds x="1855" y="2620" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Trial_D3_Merge_di" bpmnElement="Gateway_Trial_D3_Merge">
        <dc:Bounds x="1980" y="2575" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Timer_Trial_D5_di" bpmnElement="Timer_Trial_D5">
        <dc:Bounds x="2052" y="2582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Trial_D5_Urgencia_di" bpmnElement="Task_Trial_D5_Urgencia">
        <dc:Bounds x="2110" y="2560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Timer_Trial_D6_di" bpmnElement="Timer_Trial_D6">
        <dc:Bounds x="2232" y="2582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Trial_D6_Oferta_di" bpmnElement="Task_Trial_D6_Oferta">
        <dc:Bounds x="2290" y="2560" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Timer_Trial_D7_di" bpmnElement="Timer_Trial_D7">
        <dc:Bounds x="2412" y="2582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_Trial_di" bpmnElement="End_Trial">
        <dc:Bounds x="2472" y="2582" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_SelecaoMotivo_Google_di" bpmnElement="Task_SelecaoMotivo_Google">
        <dc:Bounds x="3140" y="2500" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_Perdido_Motivo_Google_di" bpmnElement="End_Perdido_Motivo_Google">
        <dc:Bounds x="3282" y="2522" width="36" height="36" />
      </bpmndi:BPMNShape>
      <!-- Meta elements -->
      <bpmndi:BPMNShape id="Shape_Start_Meta" bpmnElement="Start_Meta">
        <dc:Bounds x="232" y="2712" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_PaginaFiltro_Meta" bpmnElement="Task_PaginaFiltro_Meta">
        <dc:Bounds x="355" y="2690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_WhatsApp_D0_Meta" bpmnElement="Task_WhatsApp_D0_Meta">
        <dc:Bounds x="510" y="2690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_FlashDemo_D0_Meta" bpmnElement="Task_FlashDemo_D0_Meta">
        <dc:Bounds x="665" y="2690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Interessado_D0_Meta" bpmnElement="Gateway_Interessado_D0_Meta">
        <dc:Bounds x="845" y="2705" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Converteu_Imediato_Meta" bpmnElement="Gateway_Converteu_Imediato_Meta">
        <dc:Bounds x="1000" y="2705" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D1_WhatsApp_Meta" bpmnElement="Task_D1_WhatsApp_Meta">
        <dc:Bounds x="1130" y="2690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D3_WhatsApp_Meta" bpmnElement="Task_D3_WhatsApp_Meta">
        <dc:Bounds x="1285" y="2690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D6_WhatsApp_Meta" bpmnElement="Task_D6_WhatsApp_Meta">
        <dc:Bounds x="1440" y="2690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D9_WhatsApp_Meta" bpmnElement="Task_D9_WhatsApp_Meta">
        <dc:Bounds x="1595" y="2690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D14_WhatsApp_Meta" bpmnElement="Task_D14_WhatsApp_Meta">
        <dc:Bounds x="1750" y="2690" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Converteu_Meta" bpmnElement="Gateway_Converteu_Meta">
        <dc:Bounds x="1930" y="2705" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_LinkThrow_Meta" bpmnElement="LinkThrow_Meta">
        <dc:Bounds x="2092" y="2712" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_IntermediateTimer_24h_Meta" bpmnElement="IntermediateTimer_24h_Meta">
        <dc:Bounds x="1937" y="2822" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Respondeu_Meta" bpmnElement="Gateway_Respondeu_Meta">
        <dc:Bounds x="2085" y="2815" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_GrupoNurturing_Meta" bpmnElement="Task_GrupoNurturing_Meta">
        <dc:Bounds x="2215" y="2800" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Bloqueio_Meta" bpmnElement="End_Bloqueio_Meta">
        <dc:Bounds x="2402" y="2822" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_SelecaoMotivo_Meta" bpmnElement="Task_SelecaoMotivo_Meta">
        <dc:Bounds x="2215" y="2910" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Perdido_Meta" bpmnElement="End_Perdido_Meta">
        <dc:Bounds x="2402" y="2932" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- Nucleo elements -->
      <bpmndi:BPMNShape id="Shape_LinkCatch_Merge" bpmnElement="LinkCatch_Merge">
        <dc:Bounds x="232" y="3172" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Checkout_Merge" bpmnElement="Gateway_Checkout_Merge">
        <dc:Bounds x="380" y="3165" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Checkout_Anual" bpmnElement="Task_Checkout_Anual">
        <dc:Bounds x="510" y="3150" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Pagamento_Anual" bpmnElement="Gateway_Pagamento_Anual">
        <dc:Bounds x="690" y="3165" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Split_Parceiro" bpmnElement="Task_Split_Parceiro">
        <dc:Bounds x="820" y="3150" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Onboarding_Pago" bpmnElement="Task_Onboarding_Pago">
        <dc:Bounds x="975" y="3150" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Cliente_Ativo" bpmnElement="End_Cliente_Ativo">
        <dc:Bounds x="1162" y="3172" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Webhook_Falha" bpmnElement="Task_Webhook_Falha">
        <dc:Bounds x="665" y="3260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_WhatsApp_5min" bpmnElement="Task_WhatsApp_5min">
        <dc:Bounds x="820" y="3260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Checkout_Semestral" bpmnElement="Task_Checkout_Semestral">
        <dc:Bounds x="975" y="3260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Pagamento_Semestral" bpmnElement="Gateway_Pagamento_Semestral">
        <dc:Bounds x="1155" y="3275" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_IntermediateTimer_D2" bpmnElement="IntermediateTimer_D2">
        <dc:Bounds x="1162" y="3392" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Vendedor_Trimestral" bpmnElement="Task_Vendedor_Trimestral">
        <dc:Bounds x="1285" y="3370" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Checkout_Trimestral" bpmnElement="Task_Checkout_Trimestral">
        <dc:Bounds x="1440" y="3370" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Pagamento_Trimestral" bpmnElement="Gateway_Pagamento_Trimestral">
        <dc:Bounds x="1620" y="3385" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Pagamento_Falhou" bpmnElement="End_Pagamento_Falhou">
        <dc:Bounds x="1782" y="3392" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- Educacao edges -->
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Soft_1" bpmnElement="Flow_Edu_Soft_1">
        <di:waypoint x="268" y="350" />
        <di:waypoint x="355" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Soft_2" bpmnElement="Flow_Edu_Soft_2">
        <di:waypoint x="455" y="350" />
        <di:waypoint x="485" y="350" />
        <di:waypoint x="485" y="240" />
        <di:waypoint x="535" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Curso_1" bpmnElement="Flow_Edu_Curso_1">
        <di:waypoint x="268" y="130" />
        <di:waypoint x="355" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Curso_2" bpmnElement="Flow_Edu_Curso_2">
        <di:waypoint x="455" y="130" />
        <di:waypoint x="485" y="130" />
        <di:waypoint x="485" y="240" />
        <di:waypoint x="535" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Merge_1" bpmnElement="Flow_Edu_Merge_1">
        <di:waypoint x="585" y="240" />
        <di:waypoint x="665" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Email_1" bpmnElement="Flow_Edu_Email_1">
        <di:waypoint x="765" y="240" />
        <di:waypoint x="820" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Setup_1" bpmnElement="Flow_Edu_Setup_1">
        <di:waypoint x="920" y="240" />
        <di:waypoint x="1007" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Timer_D7" bpmnElement="Flow_Edu_Timer_D7">
        <di:waypoint x="1043" y="240" />
        <di:waypoint x="1155" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Ativou_Nao" bpmnElement="Flow_Edu_Ativou_Nao">
        <di:waypoint x="1205" y="240" />
        <di:waypoint x="1235" y="240" />
        <di:waypoint x="1235" y="350" />
        <di:waypoint x="1285" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Ativou_Sim" bpmnElement="Flow_Edu_Ativou_Sim">
        <di:waypoint x="1205" y="240" />
        <di:waypoint x="1465" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_CS_Ativa" bpmnElement="Flow_Edu_CS_Ativa">
        <di:waypoint x="1385" y="350" />
        <di:waypoint x="1415" y="350" />
        <di:waypoint x="1415" y="240" />
        <di:waypoint x="1465" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Merge_Ativa" bpmnElement="Flow_Edu_Merge_Ativa">
        <di:waypoint x="1515" y="240" />
        <di:waypoint x="1595" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_M1" bpmnElement="Flow_Edu_M1">
        <di:waypoint x="1695" y="240" />
        <di:waypoint x="1782" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_M2" bpmnElement="Flow_Edu_M2">
        <di:waypoint x="1818" y="240" />
        <di:waypoint x="1905" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_M3" bpmnElement="Flow_Edu_M3">
        <di:waypoint x="2005" y="240" />
        <di:waypoint x="2092" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_M5" bpmnElement="Flow_Edu_M5">
        <di:waypoint x="2128" y="240" />
        <di:waypoint x="2215" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_D150" bpmnElement="Flow_Edu_D150">
        <di:waypoint x="2315" y="240" />
        <di:waypoint x="2402" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_30d" bpmnElement="Flow_Edu_30d">
        <di:waypoint x="2438" y="240" />
        <di:waypoint x="2550" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Renovou_Sim" bpmnElement="Flow_Edu_Renovou_Sim">
        <di:waypoint x="2600" y="240" />
        <di:waypoint x="2705" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Renovou_Nao" bpmnElement="Flow_Edu_Renovou_Nao">
        <di:waypoint x="2575" y="265" />
        <di:waypoint x="2575" y="420" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Tipo_Anual" bpmnElement="Flow_Edu_Tipo_Anual">
        <di:waypoint x="2755" y="240" />
        <di:waypoint x="2835" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Tipo_Mensal" bpmnElement="Flow_Edu_Tipo_Mensal">
        <di:waypoint x="2755" y="240" />
        <di:waypoint x="2785" y="240" />
        <di:waypoint x="2785" y="350" />
        <di:waypoint x="2835" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Renov_Anual" bpmnElement="Flow_Edu_Renov_Anual">
        <di:waypoint x="2935" y="240" />
        <di:waypoint x="3022" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Renov_Mensal" bpmnElement="Flow_Edu_Renov_Mensal">
        <di:waypoint x="2935" y="350" />
        <di:waypoint x="2965" y="350" />
        <di:waypoint x="2965" y="240" />
        <di:waypoint x="3022" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Bloqueio" bpmnElement="Flow_Edu_Bloqueio">
        <di:waypoint x="2625" y="460" />
        <di:waypoint x="2680" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_CS_Recovery" bpmnElement="Flow_Edu_CS_Recovery">
        <di:waypoint x="2780" y="460" />
        <di:waypoint x="2860" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Recuperou_Sim" bpmnElement="Flow_Edu_Recuperou_Sim">
        <di:waypoint x="2885" y="435" />
        <di:waypoint x="2885" y="399" />
        <di:waypoint x="2730" y="399" />
        <di:waypoint x="2730" y="265" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Edu_Recuperou_Nao" bpmnElement="Flow_Edu_Recuperou_Nao">
        <di:waypoint x="2910" y="460" />
        <di:waypoint x="3022" y="460" />
      </bpmndi:BPMNEdge>

      <!-- Indicacao edges -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Ativo_1" bpmnElement="Flow_Ind_Ativo_1">
        <di:waypoint x="268" y="700" />
        <di:waypoint x="355" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Ativo_2" bpmnElement="Flow_Ind_Ativo_2">
        <di:waypoint x="455" y="700" />
        <di:waypoint x="510" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Ativo_3" bpmnElement="Flow_Ind_Ativo_3">
        <di:waypoint x="610" y="700" />
        <di:waypoint x="640" y="700" />
        <di:waypoint x="640" y="810" />
        <di:waypoint x="690" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Passivo_1" bpmnElement="Flow_Ind_Passivo_1">
        <di:waypoint x="268" y="920" />
        <di:waypoint x="355" y="920" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Passivo_2" bpmnElement="Flow_Ind_Passivo_2">
        <di:waypoint x="455" y="920" />
        <di:waypoint x="510" y="920" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Passivo_3" bpmnElement="Flow_Ind_Passivo_3">
        <di:waypoint x="610" y="920" />
        <di:waypoint x="640" y="920" />
        <di:waypoint x="640" y="810" />
        <di:waypoint x="690" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Merged" bpmnElement="Flow_Ind_Merged">
        <di:waypoint x="740" y="810" />
        <di:waypoint x="820" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Demo" bpmnElement="Flow_Ind_Demo">
        <di:waypoint x="1540" y="1030" />
        <di:waypoint x="1580" y="1030" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Trial" bpmnElement="Flow_Ind_Trial">
        <di:waypoint x="1680" y="1030" />
        <di:waypoint x="1702" y="1030" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Timer_Check" bpmnElement="Flow_Ind_Timer_Check">
        <di:waypoint x="1738" y="1030" />
        <di:waypoint x="1820" y="1030" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_NaoUsou" bpmnElement="Flow_Ind_NaoUsou">
        <di:waypoint x="1845" y="1055" />
        <di:waypoint x="1845" y="1140" />
        <di:waypoint x="1940" y="1140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Usou" bpmnElement="Flow_Ind_Usou">
        <di:waypoint x="1870" y="1030" />
        <di:waypoint x="1960" y="1030" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Pressao" bpmnElement="Flow_Ind_Pressao">
        <di:waypoint x="2010" y="1100" />
        <di:waypoint x="2010" y="1070" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D1" bpmnElement="Flow_Ind_D1">
        <di:waypoint x="2060" y="1030" />
        <di:waypoint x="2100" y="1030" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D3" bpmnElement="Flow_Ind_D3">
        <di:waypoint x="2200" y="1030" />
        <di:waypoint x="2240" y="1030" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D5" bpmnElement="Flow_Ind_D5">
        <di:waypoint x="2340" y="1030" />
        <di:waypoint x="2420" y="1030" />
        <di:waypoint x="2420" y="810" />
        <di:waypoint x="2395" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Sim" bpmnElement="Flow_Ind_Sim">
        <di:waypoint x="2445" y="810" />
        <di:waypoint x="2680" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Aviso" bpmnElement="Flow_Ind_Aviso">
        <di:waypoint x="2730" y="850" />
        <di:waypoint x="2730" y="870" />
        <di:waypoint x="2575" y="870" />
        <di:waypoint x="2575" y="828" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Nao" bpmnElement="Flow_Ind_Nao">
        <di:waypoint x="2445" y="810" />
        <di:waypoint x="2475" y="810" />
        <di:waypoint x="2475" y="1030" />
        <di:waypoint x="2680" y="1030" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Nurturing" bpmnElement="Flow_Ind_Nurturing">
        <di:waypoint x="2780" y="1030" />
        <di:waypoint x="2867" y="1030" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D0_Lig" bpmnElement="Flow_Ind_D0_Lig">
        <di:waypoint x="920" y="810" />
        <di:waypoint x="1000" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D0_Atendeu" bpmnElement="Flow_Ind_D0_Atendeu">
        <di:waypoint x="1050" y="810" />
        <di:waypoint x="1130" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D0_NaoAtendeu" bpmnElement="Flow_Ind_D0_NaoAtendeu">
        <di:waypoint x="1025" y="835" />
        <di:waypoint x="1025" y="880" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D0_Check" bpmnElement="Flow_Ind_D0_Check">
        <di:waypoint x="1230" y="810" />
        <di:waypoint x="1310" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D0_Converteu_Sim" bpmnElement="Flow_Ind_D0_Converteu_Sim">
        <di:waypoint x="1360" y="810" />
        <di:waypoint x="2557" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D0_Converteu_Nao" bpmnElement="Flow_Ind_D0_Converteu_Nao">
        <di:waypoint x="1335" y="835" />
        <di:waypoint x="1335" y="1030" />
        <di:waypoint x="1440" y="1030" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D0_Zap1" bpmnElement="Flow_Ind_D0_Zap1">
        <di:waypoint x="1075" y="920" />
        <di:waypoint x="1130" y="920" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D0_Insta" bpmnElement="Flow_Ind_D0_Insta">
        <di:waypoint x="1230" y="920" />
        <di:waypoint x="1260" y="920" />
        <di:waypoint x="1260" y="810" />
        <di:waypoint x="1620" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D0_Merge" bpmnElement="Flow_Ind_D0_Merge">
        <di:waypoint x="1670" y="810" />
        <di:waypoint x="1750" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D1_Zap2" bpmnElement="Flow_Ind_D1_Zap2">
        <di:waypoint x="1850" y="810" />
        <di:waypoint x="1905" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D3_Zap3" bpmnElement="Flow_Ind_D3_Zap3">
        <di:waypoint x="2005" y="810" />
        <di:waypoint x="2060" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D6_Zap4" bpmnElement="Flow_Ind_D6_Zap4">
        <di:waypoint x="2160" y="810" />
        <di:waypoint x="2215" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_D10_Check" bpmnElement="Flow_Ind_D10_Check">
        <di:waypoint x="2315" y="810" />
        <di:waypoint x="2395" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Converteu_Sim" bpmnElement="Flow_Ind_Converteu_Sim">
        <di:waypoint x="2445" y="810" />
        <di:waypoint x="2557" y="810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Converteu_Nao" bpmnElement="Flow_Ind_Converteu_Nao">
        <di:waypoint x="2420" y="835" />
        <di:waypoint x="2420" y="1122" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Check_Breakup" bpmnElement="Flow_Ind_Check_Breakup">
        <di:waypoint x="2438" y="1140" />
        <di:waypoint x="2550" y="1140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Respondeu_Nao" bpmnElement="Flow_Ind_Respondeu_Nao">
        <di:waypoint x="2600" y="1140" />
        <di:waypoint x="2680" y="1140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Motivo" bpmnElement="Flow_Ind_Motivo">
        <di:waypoint x="2780" y="1140" />
        <di:waypoint x="2867" y="1140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Respondeu_Sim" bpmnElement="Flow_Ind_Respondeu_Sim">
        <di:waypoint x="2600" y="1140" />
        <di:waypoint x="2630" y="1140" />
        <di:waypoint x="2630" y="1030" />
        <di:waypoint x="2680" y="1030" />
      </bpmndi:BPMNEdge>

      <!-- Conteudo edges -->
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Pessoal_1" bpmnElement="Flow_Cont_Pessoal_1">
        <di:waypoint x="268" y="1600" />
        <di:waypoint x="355" y="1600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Pessoal_2" bpmnElement="Flow_Cont_Pessoal_2">
        <di:waypoint x="455" y="1600" />
        <di:waypoint x="510" y="1600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Pessoal_3" bpmnElement="Flow_Cont_Pessoal_3">
        <di:waypoint x="610" y="1600" />
        <di:waypoint x="665" y="1600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Pessoal_Merge" bpmnElement="Flow_Cont_Pessoal_Merge">
        <di:waypoint x="765" y="1600" />
        <di:waypoint x="795" y="1600" />
        <di:waypoint x="795" y="1490" />
        <di:waypoint x="845" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Empresa_1" bpmnElement="Flow_Cont_Empresa_1">
        <di:waypoint x="268" y="1380" />
        <di:waypoint x="355" y="1380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Empresa_2" bpmnElement="Flow_Cont_Empresa_2">
        <di:waypoint x="455" y="1380" />
        <di:waypoint x="510" y="1380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Empresa_3" bpmnElement="Flow_Cont_Empresa_3">
        <di:waypoint x="610" y="1380" />
        <di:waypoint x="665" y="1380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Empresa_Merge" bpmnElement="Flow_Cont_Empresa_Merge">
        <di:waypoint x="765" y="1380" />
        <di:waypoint x="795" y="1380" />
        <di:waypoint x="795" y="1490" />
        <di:waypoint x="845" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Merged" bpmnElement="Flow_Cont_Merged">
        <di:waypoint x="895" y="1490" />
        <di:waypoint x="1000" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Imediato_Sim" bpmnElement="Flow_Cont_Imediato_Sim">
        <di:waypoint x="1050" y="1490" />
        <di:waypoint x="1782" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Imediato_Nao" bpmnElement="Flow_Cont_Imediato_Nao">
        <di:waypoint x="1050" y="1490" />
        <di:waypoint x="1130" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_D1" bpmnElement="Flow_Cont_D1">
        <di:waypoint x="1230" y="1490" />
        <di:waypoint x="1285" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_D3" bpmnElement="Flow_Cont_D3">
        <di:waypoint x="1385" y="1490" />
        <di:waypoint x="1440" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_D7" bpmnElement="Flow_Cont_D7">
        <di:waypoint x="1540" y="1490" />
        <di:waypoint x="1620" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Converteu_Sim" bpmnElement="Flow_Cont_Converteu_Sim">
        <di:waypoint x="1670" y="1490" />
        <di:waypoint x="1782" y="1490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Converteu_Nao" bpmnElement="Flow_Cont_Converteu_Nao">
        <di:waypoint x="1645" y="1515" />
        <di:waypoint x="1645" y="1692" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Timer" bpmnElement="Flow_Cont_Timer">
        <di:waypoint x="1663" y="1710" />
        <di:waypoint x="1775" y="1710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Respondeu_Sim" bpmnElement="Flow_Cont_Respondeu_Sim">
        <di:waypoint x="1825" y="1710" />
        <di:waypoint x="1905" y="1710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Nurturing" bpmnElement="Flow_Cont_Nurturing">
        <di:waypoint x="2005" y="1710" />
        <di:waypoint x="2092" y="1710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Respondeu_Nao" bpmnElement="Flow_Cont_Respondeu_Nao">
        <di:waypoint x="1825" y="1710" />
        <di:waypoint x="1855" y="1710" />
        <di:waypoint x="1855" y="1600" />
        <di:waypoint x="1905" y="1600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Cont_Motivo" bpmnElement="Flow_Cont_Motivo">
        <di:waypoint x="2005" y="1600" />
        <di:waypoint x="2092" y="1600" />
      </bpmndi:BPMNEdge>

      <!-- Prospeccao edges -->
      <bpmndi:BPMNEdge id="Edge_Flow_Prosp_1" bpmnElement="Flow_Prosp_1">
        <di:waypoint x="268" y="1950" />
        <di:waypoint x="355" y="1950" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Prosp_2" bpmnElement="Flow_Prosp_2">
        <di:waypoint x="455" y="1950" />
        <di:waypoint x="542" y="1950" />
      </bpmndi:BPMNEdge>

                  <!-- Google edges -->
      <bpmndi:BPMNEdge id="Flow_Goo_Start_di" bpmnElement="Flow_Goo_Start">
        <di:waypoint x="286" y="2320" />
        <di:waypoint x="370" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Self_di" bpmnElement="Flow_Goo_Self">
        <di:waypoint x="395" y="2295" />
        <di:waypoint x="395" y="2210" />
        <di:waypoint x="500" y="2210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Self_1_di" bpmnElement="Flow_Goo_Self_1">
        <di:waypoint x="600" y="2210" />
        <di:waypoint x="640" y="2210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Self_2_di" bpmnElement="Flow_Goo_Self_2">
        <di:waypoint x="740" y="2210" />
        <di:waypoint x="780" y="2210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Sucesso_di" bpmnElement="Flow_Goo_Sucesso">
        <di:waypoint x="830" y="2210" />
        <di:waypoint x="870" y="2210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Falha_di" bpmnElement="Flow_Goo_Falha">
        <di:waypoint x="805" y="2235" />
        <di:waypoint x="805" y="2540" />
        <di:waypoint x="870" y="2540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_BoasVindas_di" bpmnElement="Flow_Goo_BoasVindas">
        <di:waypoint x="970" y="2210" />
        <di:waypoint x="1010" y="2210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Recuperacao_di" bpmnElement="Flow_Goo_Recuperacao">
        <di:waypoint x="970" y="2540" />
        <di:waypoint x="1070" y="2540" />
        <di:waypoint x="1070" y="2320" />
        <di:waypoint x="1100" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Check24h_di" bpmnElement="Flow_Goo_Check24h">
        <di:waypoint x="1046" y="2210" />
        <di:waypoint x="1090" y="2210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_NaoMandou_di" bpmnElement="Flow_Goo_NaoMandou">
        <di:waypoint x="1140" y="2210" />
        <di:waypoint x="1180" y="2210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Mandou_di" bpmnElement="Flow_Goo_Mandou">
        <di:waypoint x="1115" y="2185" />
        <di:waypoint x="1115" y="2155" />
        <di:waypoint x="1350" y="2155" />
        <di:waypoint x="1350" y="2192" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Alerta_di" bpmnElement="Flow_Goo_Alerta">
        <di:waypoint x="1280" y="2210" />
        <di:waypoint x="1332" y="2210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Zap_di" bpmnElement="Flow_Goo_Zap">
        <di:waypoint x="395" y="2345" />
        <di:waypoint x="395" y="2430" />
        <di:waypoint x="500" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Zap_1_di" bpmnElement="Flow_Goo_Zap_1">
        <di:waypoint x="600" y="2430" />
        <di:waypoint x="640" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Zap_2_di" bpmnElement="Flow_Goo_Zap_2">
        <di:waypoint x="740" y="2430" />
        <di:waypoint x="780" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Zap_3_di" bpmnElement="Flow_Goo_Zap_3">
        <di:waypoint x="880" y="2430" />
        <di:waypoint x="920" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_ToGatewayTrial_di" bpmnElement="Flow_Goo_ToGatewayTrial">
        <di:waypoint x="1020" y="2430" />
        <di:waypoint x="1050" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Trial_Sim_di" bpmnElement="Flow_Goo_Trial_Sim">
        <di:waypoint x="1075" y="2455" />
        <di:waypoint x="1075" y="2600" />
        <di:waypoint x="1010" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Trial_Nao_di" bpmnElement="Flow_Goo_Trial_Nao">
        <di:waypoint x="1100" y="2430" />
        <di:waypoint x="1200" y="2430" />
        <di:waypoint x="1200" y="2320" />
        <di:waypoint x="1750" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Trial_End_di" bpmnElement="Flow_Goo_Trial_End">
        <di:waypoint x="2550" y="2600" />
        <di:waypoint x="2570" y="2600" />
        <di:waypoint x="2570" y="2360" />
      </bpmndi:BPMNEdge>
      <!-- Sub-processo Trial edges internas -->
      <bpmndi:BPMNEdge id="Flow_Trial_D0_di" bpmnElement="Flow_Trial_D0">
        <di:waypoint x="1066" y="2600" />
        <di:waypoint x="1090" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D0_D1_di" bpmnElement="Flow_Trial_D0_D1">
        <di:waypoint x="1190" y="2600" />
        <di:waypoint x="1212" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D1_Check_di" bpmnElement="Flow_Trial_D1_Check">
        <di:waypoint x="1248" y="2600" />
        <di:waypoint x="1270" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D1_Sim_di" bpmnElement="Flow_Trial_D1_Sim">
        <di:waypoint x="1295" y="2575" />
        <di:waypoint x="1295" y="2550" />
        <di:waypoint x="1345" y="2550" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D1_Nao_di" bpmnElement="Flow_Trial_D1_Nao">
        <di:waypoint x="1295" y="2625" />
        <di:waypoint x="1295" y="2660" />
        <di:waypoint x="1345" y="2660" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D1_Merge_di" bpmnElement="Flow_Trial_D1_Merge">
        <di:waypoint x="1445" y="2550" />
        <di:waypoint x="1495" y="2550" />
        <di:waypoint x="1495" y="2575" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D1_Merge2_di" bpmnElement="Flow_Trial_D1_Merge2">
        <di:waypoint x="1445" y="2660" />
        <di:waypoint x="1495" y="2660" />
        <di:waypoint x="1495" y="2625" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D1_D2_di" bpmnElement="Flow_Trial_D1_D2">
        <di:waypoint x="1520" y="2600" />
        <di:waypoint x="1542" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D2_Start_di" bpmnElement="Flow_Trial_D2_Start">
        <di:waypoint x="1578" y="2600" />
        <di:waypoint x="1600" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D2_D3_di" bpmnElement="Flow_Trial_D2_D3">
        <di:waypoint x="1700" y="2600" />
        <di:waypoint x="1722" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D3_Check_di" bpmnElement="Flow_Trial_D3_Check">
        <di:waypoint x="1758" y="2600" />
        <di:waypoint x="1780" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D3_Sim_di" bpmnElement="Flow_Trial_D3_Sim">
        <di:waypoint x="1805" y="2575" />
        <di:waypoint x="1805" y="2550" />
        <di:waypoint x="1855" y="2550" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D3_Nao_di" bpmnElement="Flow_Trial_D3_Nao">
        <di:waypoint x="1805" y="2625" />
        <di:waypoint x="1805" y="2660" />
        <di:waypoint x="1855" y="2660" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D3_Merge1_di" bpmnElement="Flow_Trial_D3_Merge1">
        <di:waypoint x="1955" y="2550" />
        <di:waypoint x="2005" y="2550" />
        <di:waypoint x="2005" y="2575" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D3_Merge2_di" bpmnElement="Flow_Trial_D3_Merge2">
        <di:waypoint x="1955" y="2660" />
        <di:waypoint x="2005" y="2660" />
        <di:waypoint x="2005" y="2625" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D3_D5_di" bpmnElement="Flow_Trial_D3_D5">
        <di:waypoint x="2030" y="2600" />
        <di:waypoint x="2052" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D5_Start_di" bpmnElement="Flow_Trial_D5_Start">
        <di:waypoint x="2088" y="2600" />
        <di:waypoint x="2110" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D5_D6_di" bpmnElement="Flow_Trial_D5_D6">
        <di:waypoint x="2210" y="2600" />
        <di:waypoint x="2232" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D6_Start_di" bpmnElement="Flow_Trial_D6_Start">
        <di:waypoint x="2268" y="2600" />
        <di:waypoint x="2290" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D6_D7_di" bpmnElement="Flow_Trial_D6_D7">
        <di:waypoint x="2390" y="2600" />
        <di:waypoint x="2412" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Trial_D7_End_di" bpmnElement="Flow_Trial_D7_End">
        <di:waypoint x="2448" y="2600" />
        <di:waypoint x="2472" y="2600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D0_Lig1_di" bpmnElement="Flow_Goo_D0_Lig1">
        <di:waypoint x="1330" y="2320" />
        <di:waypoint x="1380" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D0_Atendeu_di" bpmnElement="Flow_Goo_D0_Atendeu">
        <di:waypoint x="1430" y="2320" />
        <di:waypoint x="1480" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D0_NaoAtendeu_di" bpmnElement="Flow_Goo_D0_NaoAtendeu">
        <di:waypoint x="1405" y="2345" />
        <di:waypoint x="1405" y="2430" />
        <di:waypoint x="1480" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D0_Qualificou_di" bpmnElement="Flow_Goo_D0_Qualificou">
        <di:waypoint x="1580" y="2320" />
        <di:waypoint x="1750" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D0_Zap1_di" bpmnElement="Flow_Goo_D0_Zap1">
        <di:waypoint x="1580" y="2430" />
        <di:waypoint x="1620" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D0_Zap2_di" bpmnElement="Flow_Goo_D0_Zap2">
        <di:waypoint x="1720" y="2430" />
        <di:waypoint x="1740" y="2430" />
        <di:waypoint x="1740" y="2320" />
        <di:waypoint x="1750" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D0_Merge_di" bpmnElement="Flow_Goo_D0_Merge">
        <di:waypoint x="1800" y="2320" />
        <di:waypoint x="1880" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D1_Zap3_di" bpmnElement="Flow_Goo_D1_Zap3">
        <di:waypoint x="1980" y="2320" />
        <di:waypoint x="2020" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D1_Lig2_di" bpmnElement="Flow_Goo_D1_Lig2">
        <di:waypoint x="2120" y="2320" />
        <di:waypoint x="2160" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D3_Zap4_di" bpmnElement="Flow_Goo_D3_Zap4">
        <di:waypoint x="2260" y="2320" />
        <di:waypoint x="2300" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D5_Zap5_di" bpmnElement="Flow_Goo_D5_Zap5">
        <di:waypoint x="2400" y="2320" />
        <di:waypoint x="2440" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D5_Lig3_di" bpmnElement="Flow_Goo_D5_Lig3">
        <di:waypoint x="2540" y="2320" />
        <di:waypoint x="2580" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_D7_di" bpmnElement="Flow_Goo_D7">
        <di:waypoint x="2680" y="2320" />
        <di:waypoint x="2720" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Converteu_Sim_di" bpmnElement="Flow_Goo_Converteu_Sim">
        <di:waypoint x="2770" y="2320" />
        <di:waypoint x="2830" y="2320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Converteu_Nao_di" bpmnElement="Flow_Goo_Converteu_Nao">
        <di:waypoint x="2745" y="2345" />
        <di:waypoint x="2745" y="2430" />
        <di:waypoint x="2830" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Breakup_di" bpmnElement="Flow_Goo_Breakup">
        <di:waypoint x="2930" y="2430" />
        <di:waypoint x="2972" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Check_Breakup_di" bpmnElement="Flow_Goo_Check_Breakup">
        <di:waypoint x="3008" y="2430" />
        <di:waypoint x="3050" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Respondeu_Sim_di" bpmnElement="Flow_Goo_Respondeu_Sim">
        <di:waypoint x="3100" y="2430" />
        <di:waypoint x="3140" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Respondeu_Nao_di" bpmnElement="Flow_Goo_Respondeu_Nao">
        <di:waypoint x="3075" y="2455" />
        <di:waypoint x="3075" y="2540" />
        <di:waypoint x="3140" y="2540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Nurturing_di" bpmnElement="Flow_Goo_Nurturing">
        <di:waypoint x="3240" y="2430" />
        <di:waypoint x="3282" y="2430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Goo_Motivo_di" bpmnElement="Flow_Goo_Motivo">
        <di:waypoint x="3240" y="2540" />
        <di:waypoint x="3282" y="2540" />
      </bpmndi:BPMNEdge>
      <!-- Meta edges -->
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Start" bpmnElement="Flow_Meta_Start">
        <di:waypoint x="268" y="2730" />
        <di:waypoint x="355" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Filtro" bpmnElement="Flow_Meta_Filtro">
        <di:waypoint x="455" y="2730" />
        <di:waypoint x="510" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_D0_Zap" bpmnElement="Flow_Meta_D0_Zap">
        <di:waypoint x="610" y="2730" />
        <di:waypoint x="665" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_FlashDemo" bpmnElement="Flow_Meta_FlashDemo">
        <di:waypoint x="765" y="2730" />
        <di:waypoint x="845" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Interessado_Sim" bpmnElement="Flow_Meta_Interessado_Sim">
        <di:waypoint x="895" y="2730" />
        <di:waypoint x="1000" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Interessado_Nao" bpmnElement="Flow_Meta_Interessado_Nao">
        <di:waypoint x="895" y="2730" />
        <di:waypoint x="1130" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Fechou_Sim" bpmnElement="Flow_Meta_Fechou_Sim">
        <di:waypoint x="1050" y="2730" />
        <di:waypoint x="2092" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Fechou_Nao" bpmnElement="Flow_Meta_Fechou_Nao">
        <di:waypoint x="1050" y="2730" />
        <di:waypoint x="1130" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_D1" bpmnElement="Flow_Meta_D1">
        <di:waypoint x="1230" y="2730" />
        <di:waypoint x="1285" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_D3" bpmnElement="Flow_Meta_D3">
        <di:waypoint x="1385" y="2730" />
        <di:waypoint x="1440" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_D6" bpmnElement="Flow_Meta_D6">
        <di:waypoint x="1540" y="2730" />
        <di:waypoint x="1595" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_D9" bpmnElement="Flow_Meta_D9">
        <di:waypoint x="1695" y="2730" />
        <di:waypoint x="1750" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_D14" bpmnElement="Flow_Meta_D14">
        <di:waypoint x="1850" y="2730" />
        <di:waypoint x="1930" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Converteu_Sim" bpmnElement="Flow_Meta_Converteu_Sim">
        <di:waypoint x="1980" y="2730" />
        <di:waypoint x="2092" y="2730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Converteu_Nao" bpmnElement="Flow_Meta_Converteu_Nao">
        <di:waypoint x="1955" y="2755" />
        <di:waypoint x="1955" y="2822" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Timer24h" bpmnElement="Flow_Meta_Timer24h">
        <di:waypoint x="1973" y="2840" />
        <di:waypoint x="2085" y="2840" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Respondeu_Sim" bpmnElement="Flow_Meta_Respondeu_Sim">
        <di:waypoint x="2135" y="2840" />
        <di:waypoint x="2215" y="2840" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Respondeu_Nao" bpmnElement="Flow_Meta_Respondeu_Nao">
        <di:waypoint x="2135" y="2840" />
        <di:waypoint x="2165" y="2840" />
        <di:waypoint x="2165" y="2950" />
        <di:waypoint x="2215" y="2950" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Nurturing" bpmnElement="Flow_Meta_Nurturing">
        <di:waypoint x="2315" y="2840" />
        <di:waypoint x="2402" y="2840" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Meta_Motivo" bpmnElement="Flow_Meta_Motivo">
        <di:waypoint x="2315" y="2950" />
        <di:waypoint x="2402" y="2950" />
      </bpmndi:BPMNEdge>

      <!-- Nucleo edges -->
      <bpmndi:BPMNEdge id="Edge_Flow_Nucleo_Entrada" bpmnElement="Flow_Nucleo_Entrada">
        <di:waypoint x="268" y="3190" />
        <di:waypoint x="380" y="3190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Para_Anual" bpmnElement="Flow_Para_Anual">
        <di:waypoint x="430" y="3190" />
        <di:waypoint x="510" y="3190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Anual_Para_Gateway" bpmnElement="Flow_Anual_Para_Gateway">
        <di:waypoint x="610" y="3190" />
        <di:waypoint x="690" y="3190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Anual_Aprovado" bpmnElement="Flow_Anual_Aprovado">
        <di:waypoint x="740" y="3190" />
        <di:waypoint x="820" y="3190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Anual_Recusado" bpmnElement="Flow_Anual_Recusado">
        <di:waypoint x="715" y="3215" />
        <di:waypoint x="715" y="3260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Split_Para_Onboarding" bpmnElement="Flow_Split_Para_Onboarding">
        <di:waypoint x="920" y="3190" />
        <di:waypoint x="975" y="3190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Para_Cliente_Ativo" bpmnElement="Flow_Para_Cliente_Ativo">
        <di:waypoint x="1075" y="3190" />
        <di:waypoint x="1162" y="3190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Falha_Para_WhatsApp" bpmnElement="Flow_Falha_Para_WhatsApp">
        <di:waypoint x="765" y="3300" />
        <di:waypoint x="820" y="3300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_WhatsApp_Para_Semestral" bpmnElement="Flow_WhatsApp_Para_Semestral">
        <di:waypoint x="920" y="3300" />
        <di:waypoint x="975" y="3300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Semestral_Para_Gateway" bpmnElement="Flow_Semestral_Para_Gateway">
        <di:waypoint x="1075" y="3300" />
        <di:waypoint x="1155" y="3300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Semestral_Aprovado" bpmnElement="Flow_Semestral_Aprovado">
        <di:waypoint x="1180" y="3275" />
        <di:waypoint x="1180" y="3239" />
        <di:waypoint x="1025" y="3239" />
        <di:waypoint x="1025" y="3230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Semestral_Recusado" bpmnElement="Flow_Semestral_Recusado">
        <di:waypoint x="1180" y="3325" />
        <di:waypoint x="1180" y="3392" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Timer_Para_Vendedor" bpmnElement="Flow_Timer_Para_Vendedor">
        <di:waypoint x="1198" y="3410" />
        <di:waypoint x="1285" y="3410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Vendedor_Para_Trimestral" bpmnElement="Flow_Vendedor_Para_Trimestral">
        <di:waypoint x="1385" y="3410" />
        <di:waypoint x="1440" y="3410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Trimestral_Para_Gateway" bpmnElement="Flow_Trimestral_Para_Gateway">
        <di:waypoint x="1540" y="3410" />
        <di:waypoint x="1620" y="3410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Trimestral_Aprovado" bpmnElement="Flow_Trimestral_Aprovado">
        <di:waypoint x="1645" y="3385" />
        <di:waypoint x="1645" y="3349" />
        <di:waypoint x="1025" y="3349" />
        <di:waypoint x="1025" y="3230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Trimestral_Recusado" bpmnElement="Flow_Trimestral_Recusado">
        <di:waypoint x="1670" y="3410" />
        <di:waypoint x="1782" y="3410" />
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</bpmn2:definitions>`,Bne=One,HT=`<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"
                   xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
                   xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
                   xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
                   id="Definitions_Indicacoes"
                   targetNamespace="http://fyness.com/bpmn/indicacoes">

  <bpmn2:collaboration id="Collaboration_Indicacoes">
    <bpmn2:participant id="Participant_Indicacoes" name="INDICACOES - O FUNIL DA CONFIANCA" processRef="Process_Indicacoes" />
  </bpmn2:collaboration>

  <bpmn2:process id="Process_Indicacoes" name="Fluxo de Indicacoes" isExecutable="false">

    <bpmn2:laneSet id="LaneSet_Indicacoes">
      <bpmn2:lane id="Lane_Indicacoes" name="INDICACOES - Funil da Confianca (7d Trial + Bonus Parceiro)">
        <!-- GATEWAY DE ENTRADA -->
        <bpmn2:flowNodeRef>Start_Indicacao</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_TipoEntrada</bpmn2:flowNodeRef>
        <!-- CENARIO A: ATIVO (Parceiro entrega contato) -->
        <bpmn2:flowNodeRef>Task_TagIndicacao</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_ContatoAtivo</bpmn2:flowNodeRef>
        <!-- CENARIO B: PASSIVO (Lead te procura) -->
        <bpmn2:flowNodeRef>Task_TagPassivo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_ContatoPassivo</bpmn2:flowNodeRef>
        <!-- MERGE E LIGACAO -->
        <bpmn2:flowNodeRef>Gateway_MergeContato</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_LigacaoParceiro</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_Atendeu</bpmn2:flowNodeRef>
        <!-- PATH NAO ATENDEU - CADENCIA DO PARCEIRO -->
        <bpmn2:flowNodeRef>Task_D1_ParceiroPerguntou</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D3_VideoBastidor</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D5_BonusExpirando</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_D7_Despedida</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_Respondeu</bpmn2:flowNodeRef>
        <!-- FLASH DEMO -->
        <bpmn2:flowNodeRef>Task_FlashDemo</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_QuerTrial</bpmn2:flowNodeRef>
        <!-- TRIAL 7 DIAS COM GUARDIAO -->
        <bpmn2:flowNodeRef>Task_AtivarTrial</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_Guardiao_Ind</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_AlertaInativo</bpmn2:flowNodeRef>
        <!-- VITRINE BINARIA D7 -->
        <bpmn2:flowNodeRef>Task_OfertaAnual</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_FechouAnual</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_OfertaSemestral</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_FechouSemestral</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Task_OfertaTrimestral</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>Gateway_FechouTrimestral</bpmn2:flowNodeRef>
        <!-- POS-CONVERSAO -->
        <bpmn2:flowNodeRef>Task_NotificaParceiro</bpmn2:flowNodeRef>
        <!-- FINALIZACOES -->
        <bpmn2:flowNodeRef>End_Checkout_Ind</bpmn2:flowNodeRef>
        <bpmn2:flowNodeRef>End_Perdido_Ind</bpmn2:flowNodeRef>
      </bpmn2:lane>
    </bpmn2:laneSet>

    <!-- ==================== GATEWAY DE ENTRADA ==================== -->

    <bpmn2:startEvent id="Start_Indicacao" name="Lead Indicado">
      <bpmn2:documentation>ENTRADA DO LEAD INDICADO:
O lead entra por um de dois caminhos:
- Cenario A: Parceiro te entrega o contato (ATIVO)
- Cenario B: Lead te procura dizendo que conhece o parceiro (PASSIVO)</bpmn2:documentation>
      <bpmn2:outgoing>Flow_Ind_Start</bpmn2:outgoing>
    </bpmn2:startEvent>

    <bpmn2:exclusiveGateway id="Gateway_TipoEntrada" name="Como Chegou?">
      <bpmn2:documentation>GATEWAY DE ENTRADA:

CENARIO A - ATIVO:
Parceiro te manda o Zap do lead.
Voce precisa dar o "Oi" inicial com autoridade emprestada.

CENARIO B - PASSIVO:
Lead clica no link ou te chama dizendo "O [Parceiro] me falou de voce".
Tratamento VIP imediato.</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Start</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Ativo</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Passivo</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <!-- ==================== CENARIO A: ATIVO (Parceiro entrega contato) ==================== -->

    <bpmn2:serviceTask id="Task_TagIndicacao" name="Tag [INDICACAO: PARCEIRO]">
      <bpmn2:documentation>TAGUEAMENTO DO LEAD:
- Tag: [INDICACAO: NOME_DO_PARCEIRO]
- Origem: ATIVO (parceiro entregou)
- Medir qual parceiro traz os melhores clientes</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Ativo</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_2A</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_ContatoAtivo" name="Oi Inicial (Autoridade Emprestada)">
      <bpmn2:documentation>PRIMEIRO CONTATO - CENARIO ATIVO:

SCRIPT WHATSAPP:
"Oi [Lead], aqui e o [Vendedor] da Fyness!

O [Parceiro] me passou seu contato e pediu MUITO
pra eu falar contigo. Ele ta usando o sistema
na [Empresa dele] e quis que voce visse tambem.

Posso te ligar rapidinho pra te mostrar o que ele viu?"

OBJETIVO: Usar autoridade do parceiro para abrir conversa</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_2A</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_3A</bpmn2:outgoing>
    </bpmn2:sendTask>

    <!-- ==================== CENARIO B: PASSIVO (Lead te procura) ==================== -->

    <bpmn2:serviceTask id="Task_TagPassivo" name="Tag [INDICACAO: PARCEIRO]">
      <bpmn2:documentation>TAGUEAMENTO DO LEAD:
- Tag: [INDICACAO: NOME_DO_PARCEIRO]
- Origem: PASSIVO (lead veio sozinho)
- Identificar qual parceiro indicou</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Passivo</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_2B</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_ContatoPassivo" name="Resposta VIP Imediata">
      <bpmn2:documentation>PRIMEIRO CONTATO - CENARIO PASSIVO:

SCRIPT WHATSAPP:
"[Lead]! Que bom que voce veio!

O [Parceiro] ja tinha me falado de voce,
tava te esperando! Ele me contou que voce
tambem ta na correria com a gestao da [Empresa].

Deixa eu te mostrar rapidinho o que ele viu
e curtiu tanto. Posso te ligar agora?"

OBJETIVO: Tratamento VIP, valorizar que veio por indicacao</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_2B</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_3B</bpmn2:outgoing>
    </bpmn2:sendTask>

    <!-- ==================== MERGE E LIGACAO ==================== -->

    <bpmn2:exclusiveGateway id="Gateway_MergeContato" name="Merge">
      <bpmn2:incoming>Flow_Ind_3A</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_3B</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_4</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:userTask id="Task_LigacaoParceiro" name="Ligacao (Cita Parceiro no 1o Segundo)">
      <bpmn2:documentation>LIGACAO COM AUTORIDADE EMPRESTADA:

ABRIR A LIGACAO CITANDO O PARCEIRO NO 1o SEGUNDO!

SCRIPT:
"[Lead]! Aqui e o [Vendedor], o [PARCEIRO] me cobrou
pra te ligar! Ele ficou empolgado com o que a gente
fez pra academia dele e insistiu que eu te mostrasse."

"Ele comentou que voce sofre com [DOR ESPECIFICA].
Deixa eu te mostrar em 2 minutinhos o que ele viu
aqui no Zap... e voce me diz se faz sentido pra voce."

OBJETIVO: Quebrar o gelo usando confianca do parceiro</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_4</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_5</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_Atendeu" name="Atendeu?">
      <bpmn2:documentation>DECISAO: Lead atendeu a ligacao?

SIM -> Flash Demo imediata
NAO -> Cadencia do Parceiro (D1 a D7)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_5</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Atendeu</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_NaoAtendeu</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <!-- ==================== PATH NAO ATENDEU - CADENCIA DO PARCEIRO ==================== -->

    <bpmn2:sendTask id="Task_D1_ParceiroPerguntou" name="D+1: [Parceiro] Perguntou se Ja Mostrei">
      <bpmn2:documentation>CADENCIA D+1 - PRESSAO SOCIAL POSITIVA:

WHATSAPP:
"Fala [Lead], o [Parceiro] me perguntou se eu ja
tinha te mostrado o sistema. Ta na correria?

Me da um toque quando tiver 5 minutinhos
que te mostro rapidinho!"

OBJETIVO: Usar nome do parceiro como alavanca (sem ser chato)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_NaoAtendeu</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_6</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D3_VideoBastidor" name="D+3: Video de Bastidor">
      <bpmn2:documentation>CADENCIA D+3 - VIDEO DE BASTIDOR:

WHATSAPP + VIDEO CURTO:
"[Lead], gravei esse video rapidinho mostrando
um resultado foda que a gente fez essa semana.

O [Parceiro] ja viu e curtiu demais.
Da uma olhada quando puder!"

[ANEXAR VIDEO DE 30-60 SEG MOSTRANDO RESULTADO]

OBJETIVO: Prova social em video, resultado real</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_6</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_7</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D5_BonusExpirando" name="D+5: Bonus do Parceiro Expirando">
      <bpmn2:documentation>CADENCIA D+5 - URGENCIA DO BONUS:

WHATSAPP:
"[Lead], nao quero que voce perca o bonus
que o [Parceiro] conseguiu pra voce!

Ele me pediu pra garantir que voce testasse
antes de expirar. Conseguiu dar uma olhada?"

OBJETIVO: Criar urgencia usando o nome do parceiro</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_7</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_8</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:sendTask id="Task_D7_Despedida" name="D+7: Mensagem de Despedida">
      <bpmn2:documentation>CADENCIA D+7 - DESPEDIDA ELEGANTE:

WHATSAPP:
"[Lead], vou liberar o link pro bonus expirar.

Nao quero te encher, mas se precisar de mim
no futuro, o contato e este. O [Parceiro]
sabe me achar tambem!

Sucesso ai na [Empresa]! Abraco"

OBJETIVO: Fechar ciclo com elegancia, nao queimar ponte</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_8</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_9</bpmn2:outgoing>
    </bpmn2:sendTask>

    <bpmn2:exclusiveGateway id="Gateway_Respondeu" name="Respondeu na Cadencia?">
      <bpmn2:documentation>DECISAO: Lead respondeu durante a cadencia D1-D7?

SIM -> Flash Demo
NAO -> Lead Perdido (mas nao descartado)</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_9</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Respondeu</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_NaoRespondeu</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <!-- ==================== FLASH DEMO ==================== -->

    <bpmn2:userTask id="Task_FlashDemo" name="Flash Demo (IA Processando Gasto Real)">
      <bpmn2:documentation>FLASH DEMO COM PROVA DE VALOR:

SCRIPT DE ABERTURA:
"O [Parceiro] me disse que voce queria ver isso...
Deixa eu te mostrar a IA processando um gasto real."

DURANTE A DEMO:
- Mostrar IA categorizando despesa em tempo real
- Usar exemplo similar ao do parceiro
- "Isso aqui o [Parceiro] usa todo dia..."

FECHAMENTO:
"Faz sentido pra [Empresa]? Quer testar 7 dias
com o bonus que o [Parceiro] conseguiu pra voce?"

OBJETIVO: Prova de valor INSTANTANEA</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Atendeu</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Respondeu</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_10</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_QuerTrial" name="Quer Trial?">
      <bpmn2:incoming>Flow_Ind_10</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Trial_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Trial_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <!-- ==================== TRIAL 7 DIAS COM GUARDIAO ==================== -->

    <bpmn2:serviceTask id="Task_AtivarTrial" name="Ativar Trial 7 Dias">
      <bpmn2:documentation>ATIVACAO DO TRIAL:
- Liberar acesso completo por 7 dias
- Tag: [TRIAL_INDICACAO: PARCEIRO]
- Configurar Guardiao para monitorar uso
- Agendar cadencia de fechamento D7

OBJETIVO: Fazer o lead "sentir o gosto" da organizacao</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Trial_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_11</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:serviceTask id="Task_Guardiao_Ind" name="Guardiao: Monitorar Uso no Trial">
      <bpmn2:documentation>GUARDIAO DO TRIAL INDICACAO:

MONITORAR:
- Login diario
- Funcionalidades usadas
- Tempo na plataforma
- Dados cadastrados

REGRA DE ALERTA:
Se nao logar em 48h -> Dispara alerta de inatividade

OBJETIVO: Nao deixar o lead esfriar durante o trial</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_11</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_12</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Inativo</bpmn2:outgoing>
    </bpmn2:serviceTask>

    <bpmn2:sendTask id="Task_AlertaInativo" name="Alerta: Ta Conseguindo Acessar?">
      <bpmn2:documentation>ALERTA DE INATIVIDADE (48H SEM LOGIN):

WHATSAPP:
"[Lead], vi que voce nao conseguiu entrar ainda.
Ta conseguindo acessar?

O [Parceiro] me pediu pra garantir que voce
testasse direitinho. Quer que eu te ajude?"

OBJETIVO: Reengajar lead inativo antes de esfriar</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Inativo</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_VoltaGuardiao</bpmn2:outgoing>
    </bpmn2:sendTask>

    <!-- ==================== VITRINE BINARIA D7 ==================== -->

    <bpmn2:userTask id="Task_OfertaAnual" name="D7: Oferta Anual R$1.497 + Bonus Parceiro">
      <bpmn2:documentation>VITRINE BINARIA - OFERTA PRINCIPAL:

LIGACAO D7:
"[Lead], seu trial termina hoje! Antes de falar
de planos, me conta: o que voce mais curtiu?"

[OUVIR E VALIDAR]

OFERTA PRINCIPAL:
"Como voce veio pela indicacao do [Parceiro],
tenho uma condicao especial:

PLANO ANUAL: R$ 1.497 (12x R$ 124,75)
+ BONUS DO PARCEIRO: 1 mes extra gratis!
+ Consultoria de setup inclusa

O [Parceiro] fechou esse mesmo plano.
Faz sentido pra voce?"

OBJETIVO: Fechar no plano de maior valor</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_12</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_VoltaGuardiao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_13</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_FechouAnual" name="Fechou Anual?">
      <bpmn2:incoming>Flow_Ind_13</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Anual_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Anual_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:userTask id="Task_OfertaSemestral" name="Recuperacao: Semestral R$997">
      <bpmn2:documentation>VITRINE BINARIA - RECUPERACAO:

SE RESISTIR AO ANUAL:
"Entendo! Olha, se o anual pesa agora,
tenho o SEMESTRAL por R$ 997 (6x R$ 166).

Voce ainda ganha o bonus do [Parceiro]
e pode fazer upgrade depois se quiser.

O que acha?"

OBJETIVO: Oferecer alternativa sem perder a venda</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Anual_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_14</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_FechouSemestral" name="Fechou Semestral?">
      <bpmn2:incoming>Flow_Ind_14</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Semestral_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Semestral_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <bpmn2:userTask id="Task_OfertaTrimestral" name="Downsell Final: Trimestral R$561">
      <bpmn2:documentation>VITRINE BINARIA - DOWNSELL FINAL:

ULTIMA TENTATIVA (VENDEDOR):
"[Lead], ultima opcao que consigo fazer:
TRIMESTRAL por R$ 561 (3x R$ 187).

E o minimo pra voce comecar a organizar
a [Empresa] e sentir o resultado.

Depois voce decide se quer continuar.
Topa testar por 3 meses?"

OBJETIVO: Nao perder o lead, converter no minimo</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Semestral_Nao</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_15</bpmn2:outgoing>
    </bpmn2:userTask>

    <bpmn2:exclusiveGateway id="Gateway_FechouTrimestral" name="Fechou Trimestral?">
      <bpmn2:incoming>Flow_Ind_15</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Trimestral_Sim</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_Ind_Trimestral_Nao</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>

    <!-- ==================== POS-CONVERSAO ==================== -->

    <bpmn2:sendTask id="Task_NotificaParceiro" name="Notifica Parceiro: Indicado Fechou!">
      <bpmn2:documentation>NOTIFICACAO AO PARCEIRO:

WHATSAPP PARA O PARCEIRO:
"[Parceiro], boa noticia!

O [Lead] que voce indicou FECHOU com a gente!
Muito obrigado pela indicacao, voce e demais!

Sua comissao de 30% ja ta garantida no sistema.
Valeu mesmo! Manda mais que a gente cuida!"

OBJETIVO:
- Agradecer e fortalecer relacionamento
- Lembrar da comissao (30% split automatico)
- Incentivar mais indicacoes</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Anual_Sim</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Semestral_Sim</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Trimestral_Sim</bpmn2:incoming>
      <bpmn2:outgoing>Flow_Ind_Checkout</bpmn2:outgoing>
    </bpmn2:sendTask>

    <!-- ==================== FINALIZACOES ==================== -->

    <bpmn2:endEvent id="End_Checkout_Ind" name="Vai pro Checkout">
      <bpmn2:documentation>LEAD CONVERTIDO - VAI PRO CHECKOUT:
- Direcionar para Gateway Checkout (Centro)
- Split 30% automatico para o parceiro via Asaas
- Onboarding de cliente pago</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_Checkout</bpmn2:incoming>
    </bpmn2:endEvent>

    <bpmn2:endEvent id="End_Perdido_Ind" name="Lead Nao Converteu">
      <bpmn2:documentation>LEAD NAO CONVERTEU:

IMPORTANTE: Nao descartar completamente!
- Manter em lista de remarketing
- Notificar parceiro com cuidado
- Deixar porta aberta

MSG PARA PARCEIRO:
"[Parceiro], o [Lead] decidiu esperar um pouco.
Valeu pela indicacao! Se ele mudar de ideia,
a gente atende na hora."</bpmn2:documentation>
      <bpmn2:incoming>Flow_Ind_NaoRespondeu</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Trial_Nao</bpmn2:incoming>
      <bpmn2:incoming>Flow_Ind_Trimestral_Nao</bpmn2:incoming>
    </bpmn2:endEvent>

    <!-- ==================== SEQUENCE FLOWS ==================== -->

    <!-- Gateway de Entrada -->
    <bpmn2:sequenceFlow id="Flow_Ind_Start" sourceRef="Start_Indicacao" targetRef="Gateway_TipoEntrada" />
    <bpmn2:sequenceFlow id="Flow_Ind_Ativo" name="Ativo (Parceiro Entregou)" sourceRef="Gateway_TipoEntrada" targetRef="Task_TagIndicacao" />
    <bpmn2:sequenceFlow id="Flow_Ind_Passivo" name="Passivo (Lead Veio)" sourceRef="Gateway_TipoEntrada" targetRef="Task_TagPassivo" />

    <!-- Cenario A -->
    <bpmn2:sequenceFlow id="Flow_Ind_2A" sourceRef="Task_TagIndicacao" targetRef="Task_ContatoAtivo" />
    <bpmn2:sequenceFlow id="Flow_Ind_3A" sourceRef="Task_ContatoAtivo" targetRef="Gateway_MergeContato" />

    <!-- Cenario B -->
    <bpmn2:sequenceFlow id="Flow_Ind_2B" sourceRef="Task_TagPassivo" targetRef="Task_ContatoPassivo" />
    <bpmn2:sequenceFlow id="Flow_Ind_3B" sourceRef="Task_ContatoPassivo" targetRef="Gateway_MergeContato" />

    <!-- Merge e Ligacao -->
    <bpmn2:sequenceFlow id="Flow_Ind_4" sourceRef="Gateway_MergeContato" targetRef="Task_LigacaoParceiro" />
    <bpmn2:sequenceFlow id="Flow_Ind_5" sourceRef="Task_LigacaoParceiro" targetRef="Gateway_Atendeu" />
    <bpmn2:sequenceFlow id="Flow_Ind_Atendeu" name="Sim" sourceRef="Gateway_Atendeu" targetRef="Task_FlashDemo" />
    <bpmn2:sequenceFlow id="Flow_Ind_NaoAtendeu" name="Nao" sourceRef="Gateway_Atendeu" targetRef="Task_D1_ParceiroPerguntou" />

    <!-- Cadencia do Parceiro -->
    <bpmn2:sequenceFlow id="Flow_Ind_6" sourceRef="Task_D1_ParceiroPerguntou" targetRef="Task_D3_VideoBastidor" />
    <bpmn2:sequenceFlow id="Flow_Ind_7" sourceRef="Task_D3_VideoBastidor" targetRef="Task_D5_BonusExpirando" />
    <bpmn2:sequenceFlow id="Flow_Ind_8" sourceRef="Task_D5_BonusExpirando" targetRef="Task_D7_Despedida" />
    <bpmn2:sequenceFlow id="Flow_Ind_9" sourceRef="Task_D7_Despedida" targetRef="Gateway_Respondeu" />
    <bpmn2:sequenceFlow id="Flow_Ind_Respondeu" name="Sim" sourceRef="Gateway_Respondeu" targetRef="Task_FlashDemo" />
    <bpmn2:sequenceFlow id="Flow_Ind_NaoRespondeu" name="Nao" sourceRef="Gateway_Respondeu" targetRef="End_Perdido_Ind" />

    <!-- Flash Demo -->
    <bpmn2:sequenceFlow id="Flow_Ind_10" sourceRef="Task_FlashDemo" targetRef="Gateway_QuerTrial" />
    <bpmn2:sequenceFlow id="Flow_Ind_Trial_Sim" name="Sim" sourceRef="Gateway_QuerTrial" targetRef="Task_AtivarTrial" />
    <bpmn2:sequenceFlow id="Flow_Ind_Trial_Nao" name="Nao" sourceRef="Gateway_QuerTrial" targetRef="End_Perdido_Ind" />

    <!-- Trial com Guardiao -->
    <bpmn2:sequenceFlow id="Flow_Ind_11" sourceRef="Task_AtivarTrial" targetRef="Task_Guardiao_Ind" />
    <bpmn2:sequenceFlow id="Flow_Ind_12" name="Usando" sourceRef="Task_Guardiao_Ind" targetRef="Task_OfertaAnual" />
    <bpmn2:sequenceFlow id="Flow_Ind_Inativo" name="48h Sem Login" sourceRef="Task_Guardiao_Ind" targetRef="Task_AlertaInativo" />
    <bpmn2:sequenceFlow id="Flow_Ind_VoltaGuardiao" sourceRef="Task_AlertaInativo" targetRef="Task_OfertaAnual" />

    <!-- Vitrine Binaria -->
    <bpmn2:sequenceFlow id="Flow_Ind_13" sourceRef="Task_OfertaAnual" targetRef="Gateway_FechouAnual" />
    <bpmn2:sequenceFlow id="Flow_Ind_Anual_Sim" name="Sim" sourceRef="Gateway_FechouAnual" targetRef="Task_NotificaParceiro" />
    <bpmn2:sequenceFlow id="Flow_Ind_Anual_Nao" name="Nao" sourceRef="Gateway_FechouAnual" targetRef="Task_OfertaSemestral" />
    <bpmn2:sequenceFlow id="Flow_Ind_14" sourceRef="Task_OfertaSemestral" targetRef="Gateway_FechouSemestral" />
    <bpmn2:sequenceFlow id="Flow_Ind_Semestral_Sim" name="Sim" sourceRef="Gateway_FechouSemestral" targetRef="Task_NotificaParceiro" />
    <bpmn2:sequenceFlow id="Flow_Ind_Semestral_Nao" name="Nao" sourceRef="Gateway_FechouSemestral" targetRef="Task_OfertaTrimestral" />
    <bpmn2:sequenceFlow id="Flow_Ind_15" sourceRef="Task_OfertaTrimestral" targetRef="Gateway_FechouTrimestral" />
    <bpmn2:sequenceFlow id="Flow_Ind_Trimestral_Sim" name="Sim" sourceRef="Gateway_FechouTrimestral" targetRef="Task_NotificaParceiro" />
    <bpmn2:sequenceFlow id="Flow_Ind_Trimestral_Nao" name="Nao" sourceRef="Gateway_FechouTrimestral" targetRef="End_Perdido_Ind" />

    <!-- Checkout -->
    <bpmn2:sequenceFlow id="Flow_Ind_Checkout" sourceRef="Task_NotificaParceiro" targetRef="End_Checkout_Ind" />

  </bpmn2:process>

  <!-- ==================== DIAGRAMA VISUAL (BPMNDI) ==================== -->

  <bpmndi:BPMNDiagram id="BPMNDiagram_Indicacoes">
    <bpmndi:BPMNPlane id="BPMNPlane_Indicacoes" bpmnElement="Collaboration_Indicacoes">

      <!-- Participant e Lane -->
      <bpmndi:BPMNShape id="Shape_Participant_Ind" bpmnElement="Participant_Indicacoes" isHorizontal="true">
        <dc:Bounds x="120" y="60" width="2600" height="520" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Lane_Indicacoes" bpmnElement="Lane_Indicacoes" isHorizontal="true">
        <dc:Bounds x="150" y="60" width="2570" height="520" />
      </bpmndi:BPMNShape>

      <!-- Gateway de Entrada -->
      <bpmndi:BPMNShape id="Shape_Start_Indicacao" bpmnElement="Start_Indicacao">
        <dc:Bounds x="200" y="282" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_TipoEntrada" bpmnElement="Gateway_TipoEntrada" isMarkerVisible="true">
        <dc:Bounds x="275" y="275" width="50" height="50" />
      </bpmndi:BPMNShape>

      <!-- Cenario A: Ativo (linha superior y=160) -->
      <bpmndi:BPMNShape id="Shape_Task_TagIndicacao" bpmnElement="Task_TagIndicacao">
        <dc:Bounds x="360" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_ContatoAtivo" bpmnElement="Task_ContatoAtivo">
        <dc:Bounds x="490" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>

      <!-- Cenario B: Passivo (linha inferior y=380) -->
      <bpmndi:BPMNShape id="Shape_Task_TagPassivo" bpmnElement="Task_TagPassivo">
        <dc:Bounds x="360" y="370" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_ContatoPassivo" bpmnElement="Task_ContatoPassivo">
        <dc:Bounds x="490" y="370" width="100" height="60" />
      </bpmndi:BPMNShape>

      <!-- Merge e Ligacao (linha principal y=270) -->
      <bpmndi:BPMNShape id="Shape_Gateway_MergeContato" bpmnElement="Gateway_MergeContato" isMarkerVisible="true">
        <dc:Bounds x="625" y="275" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_LigacaoParceiro" bpmnElement="Task_LigacaoParceiro">
        <dc:Bounds x="710" y="270" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Atendeu" bpmnElement="Gateway_Atendeu" isMarkerVisible="true">
        <dc:Bounds x="845" y="275" width="50" height="50" />
      </bpmndi:BPMNShape>

      <!-- Cadencia do Parceiro (linha inferior y=420) -->
      <bpmndi:BPMNShape id="Shape_Task_D1_ParceiroPerguntou" bpmnElement="Task_D1_ParceiroPerguntou">
        <dc:Bounds x="820" y="420" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D3_VideoBastidor" bpmnElement="Task_D3_VideoBastidor">
        <dc:Bounds x="950" y="420" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D5_BonusExpirando" bpmnElement="Task_D5_BonusExpirando">
        <dc:Bounds x="1080" y="420" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_D7_Despedida" bpmnElement="Task_D7_Despedida">
        <dc:Bounds x="1210" y="420" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_Respondeu" bpmnElement="Gateway_Respondeu" isMarkerVisible="true">
        <dc:Bounds x="1345" y="425" width="50" height="50" />
      </bpmndi:BPMNShape>

      <!-- Flash Demo (linha principal y=270) -->
      <bpmndi:BPMNShape id="Shape_Task_FlashDemo" bpmnElement="Task_FlashDemo">
        <dc:Bounds x="930" y="270" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_QuerTrial" bpmnElement="Gateway_QuerTrial" isMarkerVisible="true">
        <dc:Bounds x="1065" y="275" width="50" height="50" />
      </bpmndi:BPMNShape>

      <!-- Trial com Guardiao (linha superior y=140) -->
      <bpmndi:BPMNShape id="Shape_Task_AtivarTrial" bpmnElement="Task_AtivarTrial">
        <dc:Bounds x="1150" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_Guardiao_Ind" bpmnElement="Task_Guardiao_Ind">
        <dc:Bounds x="1280" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_AlertaInativo" bpmnElement="Task_AlertaInativo">
        <dc:Bounds x="1280" y="270" width="100" height="60" />
      </bpmndi:BPMNShape>

      <!-- Vitrine Binaria (linha superior y=140) -->
      <bpmndi:BPMNShape id="Shape_Task_OfertaAnual" bpmnElement="Task_OfertaAnual">
        <dc:Bounds x="1420" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_FechouAnual" bpmnElement="Gateway_FechouAnual" isMarkerVisible="true">
        <dc:Bounds x="1555" y="145" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_OfertaSemestral" bpmnElement="Task_OfertaSemestral">
        <dc:Bounds x="1640" y="220" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_FechouSemestral" bpmnElement="Gateway_FechouSemestral" isMarkerVisible="true">
        <dc:Bounds x="1775" y="225" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_OfertaTrimestral" bpmnElement="Task_OfertaTrimestral">
        <dc:Bounds x="1860" y="300" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Gateway_FechouTrimestral" bpmnElement="Gateway_FechouTrimestral" isMarkerVisible="true">
        <dc:Bounds x="1995" y="305" width="50" height="50" />
      </bpmndi:BPMNShape>

      <!-- Pos-Conversao -->
      <bpmndi:BPMNShape id="Shape_Task_NotificaParceiro" bpmnElement="Task_NotificaParceiro">
        <dc:Bounds x="2100" y="140" width="100" height="60" />
      </bpmndi:BPMNShape>

      <!-- Finalizacoes -->
      <bpmndi:BPMNShape id="Shape_End_Checkout_Ind" bpmnElement="End_Checkout_Ind">
        <dc:Bounds x="2262" y="152" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_Perdido_Ind" bpmnElement="End_Perdido_Ind">
        <dc:Bounds x="2132" y="432" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- ===== EDGES ===== -->

      <!-- Gateway de Entrada -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Start" bpmnElement="Flow_Ind_Start">
        <di:waypoint x="236" y="300" />
        <di:waypoint x="275" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Ativo" bpmnElement="Flow_Ind_Ativo">
        <di:waypoint x="300" y="275" />
        <di:waypoint x="300" y="170" />
        <di:waypoint x="360" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Passivo" bpmnElement="Flow_Ind_Passivo">
        <di:waypoint x="300" y="325" />
        <di:waypoint x="300" y="400" />
        <di:waypoint x="360" y="400" />
      </bpmndi:BPMNEdge>

      <!-- Cenario A -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_2A" bpmnElement="Flow_Ind_2A">
        <di:waypoint x="460" y="170" />
        <di:waypoint x="490" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_3A" bpmnElement="Flow_Ind_3A">
        <di:waypoint x="590" y="170" />
        <di:waypoint x="650" y="170" />
        <di:waypoint x="650" y="275" />
      </bpmndi:BPMNEdge>

      <!-- Cenario B -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_2B" bpmnElement="Flow_Ind_2B">
        <di:waypoint x="460" y="400" />
        <di:waypoint x="490" y="400" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_3B" bpmnElement="Flow_Ind_3B">
        <di:waypoint x="590" y="400" />
        <di:waypoint x="650" y="400" />
        <di:waypoint x="650" y="325" />
      </bpmndi:BPMNEdge>

      <!-- Merge e Ligacao -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_4" bpmnElement="Flow_Ind_4">
        <di:waypoint x="675" y="300" />
        <di:waypoint x="710" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_5" bpmnElement="Flow_Ind_5">
        <di:waypoint x="810" y="300" />
        <di:waypoint x="845" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Atendeu" bpmnElement="Flow_Ind_Atendeu">
        <di:waypoint x="895" y="300" />
        <di:waypoint x="930" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_NaoAtendeu" bpmnElement="Flow_Ind_NaoAtendeu">
        <di:waypoint x="870" y="325" />
        <di:waypoint x="870" y="420" />
      </bpmndi:BPMNEdge>

      <!-- Cadencia do Parceiro -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_6" bpmnElement="Flow_Ind_6">
        <di:waypoint x="920" y="450" />
        <di:waypoint x="950" y="450" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_7" bpmnElement="Flow_Ind_7">
        <di:waypoint x="1050" y="450" />
        <di:waypoint x="1080" y="450" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_8" bpmnElement="Flow_Ind_8">
        <di:waypoint x="1180" y="450" />
        <di:waypoint x="1210" y="450" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_9" bpmnElement="Flow_Ind_9">
        <di:waypoint x="1310" y="450" />
        <di:waypoint x="1345" y="450" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Respondeu" bpmnElement="Flow_Ind_Respondeu">
        <di:waypoint x="1370" y="425" />
        <di:waypoint x="1370" y="300" />
        <di:waypoint x="1030" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_NaoRespondeu" bpmnElement="Flow_Ind_NaoRespondeu">
        <di:waypoint x="1395" y="450" />
        <di:waypoint x="2132" y="450" />
      </bpmndi:BPMNEdge>

      <!-- Flash Demo -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_10" bpmnElement="Flow_Ind_10">
        <di:waypoint x="1030" y="300" />
        <di:waypoint x="1065" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Trial_Sim" bpmnElement="Flow_Ind_Trial_Sim">
        <di:waypoint x="1090" y="275" />
        <di:waypoint x="1090" y="170" />
        <di:waypoint x="1150" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Trial_Nao" bpmnElement="Flow_Ind_Trial_Nao">
        <di:waypoint x="1090" y="325" />
        <di:waypoint x="1090" y="450" />
        <di:waypoint x="2132" y="450" />
      </bpmndi:BPMNEdge>

      <!-- Trial com Guardiao -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_11" bpmnElement="Flow_Ind_11">
        <di:waypoint x="1250" y="170" />
        <di:waypoint x="1280" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_12" bpmnElement="Flow_Ind_12">
        <di:waypoint x="1380" y="170" />
        <di:waypoint x="1420" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Inativo" bpmnElement="Flow_Ind_Inativo">
        <di:waypoint x="1330" y="200" />
        <di:waypoint x="1330" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_VoltaGuardiao" bpmnElement="Flow_Ind_VoltaGuardiao">
        <di:waypoint x="1380" y="300" />
        <di:waypoint x="1400" y="300" />
        <di:waypoint x="1400" y="170" />
        <di:waypoint x="1420" y="170" />
      </bpmndi:BPMNEdge>

      <!-- Vitrine Binaria -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_13" bpmnElement="Flow_Ind_13">
        <di:waypoint x="1520" y="170" />
        <di:waypoint x="1555" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Anual_Sim" bpmnElement="Flow_Ind_Anual_Sim">
        <di:waypoint x="1605" y="170" />
        <di:waypoint x="2100" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Anual_Nao" bpmnElement="Flow_Ind_Anual_Nao">
        <di:waypoint x="1580" y="195" />
        <di:waypoint x="1580" y="250" />
        <di:waypoint x="1640" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_14" bpmnElement="Flow_Ind_14">
        <di:waypoint x="1740" y="250" />
        <di:waypoint x="1775" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Semestral_Sim" bpmnElement="Flow_Ind_Semestral_Sim">
        <di:waypoint x="1800" y="225" />
        <di:waypoint x="1800" y="170" />
        <di:waypoint x="2100" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Semestral_Nao" bpmnElement="Flow_Ind_Semestral_Nao">
        <di:waypoint x="1800" y="275" />
        <di:waypoint x="1800" y="330" />
        <di:waypoint x="1860" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_15" bpmnElement="Flow_Ind_15">
        <di:waypoint x="1960" y="330" />
        <di:waypoint x="1995" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Trimestral_Sim" bpmnElement="Flow_Ind_Trimestral_Sim">
        <di:waypoint x="2020" y="305" />
        <di:waypoint x="2020" y="170" />
        <di:waypoint x="2100" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Trimestral_Nao" bpmnElement="Flow_Ind_Trimestral_Nao">
        <di:waypoint x="2020" y="355" />
        <di:waypoint x="2020" y="450" />
        <di:waypoint x="2132" y="450" />
      </bpmndi:BPMNEdge>

      <!-- Checkout -->
      <bpmndi:BPMNEdge id="Edge_Flow_Ind_Checkout" bpmnElement="Flow_Ind_Checkout">
        <di:waypoint x="2200" y="170" />
        <di:waypoint x="2262" y="170" />
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</bpmn2:definitions>`,VT={"Activate global connect tool":"Ativar conexo global","Activate the global connect tool":"Ativar conexo global","Activate hand tool":"Mover canvas","Activate the hand tool":"Mover canvas","Activate lasso tool":"Selecionar mltiplos","Activate the lasso tool":"Selecionar mltiplos","Activate create/remove space tool":"Criar/remover espao","Activate the create/remove space tool":"Criar/remover espao","Create StartEvent":"Criar Incio","Create start event":"Criar Incio","Create Start Event":"Criar Incio","Create EndEvent":"Criar Fim","Create end event":"Criar Fim","Create End Event":"Criar Fim","Create Task":"Criar Tarefa","Create task":"Criar Tarefa","Create Gateway":"Criar Gateway","Create gateway":"Criar Gateway","Create exclusive gateway":"Criar Gateway Exclusivo","Create Exclusive Gateway":"Criar Gateway Exclusivo","Create parallel gateway":"Criar Gateway Paralelo","Create Parallel Gateway":"Criar Gateway Paralelo","Create Intermediate/Boundary Event":"Criar Evento Intermedirio","Create intermediate/boundary event":"Criar Evento Intermedirio","Create IntermediateThrowEvent":"Criar Evento Intermedirio","Create Pool/Participant":"Criar Pool","Create pool/participant":"Criar Pool","Create Participant":"Criar Participante","Create participant":"Criar Participante","Create DataObjectReference":"Criar Dados","Create data object reference":"Criar Dados","Create Data Object Reference":"Criar Dados","Create DataStoreReference":"Criar Armazm","Create data store reference":"Criar Armazm","Create Data Store Reference":"Criar Armazm","Create Group":"Criar Grupo","Create group":"Criar Grupo","Create expanded SubProcess":"Criar Sub-Processo","Create expanded sub-process":"Criar Sub-Processo","Create Expanded SubProcess":"Criar Sub-Processo","Create SubProcess":"Criar Sub-Processo","Create CallActivity":"Criar Chamada Externa","Create call activity":"Criar Chamada Externa","Create Call Activity":"Criar Chamada Externa","Append Task":"Adicionar Tarefa","Append task":"Adicionar Tarefa","Append EndEvent":"Adicionar Fim","Append end event":"Adicionar Fim","Append End Event":"Adicionar Fim","Append Gateway":"Adicionar Gateway","Append gateway":"Adicionar Gateway","Append Intermediate/Boundary Event":"Adicionar Evento","Append intermediate/boundary event":"Adicionar Evento","Append TextAnnotation":"Adicionar Anotao","Append text annotation":"Adicionar Anotao","Connect using Sequence/MessageFlow or Association":"Conectar","Connect using sequence/message flow or association":"Conectar","Connect using DataInputAssociation":"Conectar Dados",Connect:"Conectar","Change type":"Alterar tipo","Change element":"Alterar elemento",Delete:"Excluir",Remove:"Remover","Edit label":"Editar rtulo",Copy:"Copiar",Paste:"Colar",Undo:"Desfazer",Redo:"Refazer"},Fne=ce.forwardRef(function({xml:t,onXmlChange:n,onElementSelect:i,onFluxosClick:r,showGrid:o=!0,onGridToggle:a,onAddImage:s},l){const c=ce.useRef(null),u=ce.useRef(null),d=ce.useRef(t),[h,p]=ce.useState(!0),[m,v]=ce.useState(null),[_,b]=ce.useState(100),[E,w]=ce.useState(!1);ce.useImperativeHandle(l,()=>({async saveSVG(){if(u.current)try{const{svg:D}=await u.current.saveSVG();return D}catch(D){return console.error("Erro ao exportar SVG:",D),null}return null},setElementColor(D,A){if(u.current&&D)try{u.current.get("modeling").setColor([D],{fill:A.fill,stroke:A.stroke})}catch(L){console.error("Erro ao mudar cor:",L)}},addCallActivity(D,A){if(!u.current)return console.error("Modeler no disponvel"),null;try{const L=u.current,$=L.get("modeling"),Z=L.get("elementFactory"),me=L.get("canvas"),ge=L.get("elementRegistry"),pe=me.getRootElement();if(!pe||!pe.businessObject)return console.error("RootElement invlido"),null;let te=pe;if((pe.businessObject.$type||pe.type)==="bpmn:Collaboration"){const K=ge.filter(ee=>ee.type==="bpmn:Lane");if(K.length>0)te=K[0];else{const ee=ge.filter(T=>T.type==="bpmn:Participant");if(ee.length>0)te=ee[0];else return console.error("Colaborao sem participantes"),alert("Adicione uma Pool/Participante ao diagrama antes de adicionar fluxos."),null}}const we="CallActivity_"+D.replace(/-/g,"").substring(0,8),I=Z.createShape({type:"bpmn:CallActivity"}),z={x:250,y:200};return $.createShape(I,z,te),$.updateProperties(I,{name:A}),I.flowId=D,setTimeout(()=>{try{$.setColor([I],{fill:"#fef3c7",stroke:"#f59e0b"})}catch(K){console.warn("No foi possvel aplicar cor:",K)}},200),console.log("CallActivity criado com sucesso:",I.id,"para flowId:",D),I}catch(L){return console.error("Erro ao criar CallActivity:",L),alert("Erro ao criar elemento: "+L.message),null}},hasFlowElement(D){if(!u.current)return!1;try{return u.current.get("elementRegistry").filter($=>$.type==="bpmn:CallActivity"&&$.flowId===D).length>0}catch{return!1}},removeFlowElement(D){if(!u.current)return!1;try{const A=u.current.get("modeling"),$=u.current.get("elementRegistry").filter(Z=>Z.type==="bpmn:CallActivity"&&Z.flowId===D);return $.length>0?(A.removeElements($),!0):!1}catch(A){return console.error("Erro ao remover elemento:",A),!1}},createImageOverlayForElement(D,A,L){if(!u.current)return;const $=u.current,Z=$.get("overlays"),me=L==="circle"?"50%":L==="rounded"?"12px":"4px",ge=document.createElement("div");ge.className="bpmn-image-overlay",ge.setAttribute("data-format",L),ge.style.cssText=`
        width: ${D.width}px;
        height: ${D.height}px;
        overflow: hidden;
        border-radius: ${me};
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        pointer-events: none;
        background: white;
      `;const pe=document.createElement("img");pe.src=A,pe.draggable=!1,pe.style.cssText=`
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      `,ge.appendChild(pe),Z.add(D.id,{position:{top:0,left:0},html:ge});const te=()=>{const T=document.querySelector(`[data-element-id="${D.id}"]`);T&&(T.setAttribute("data-image-element","true"),T.setAttribute("data-image-format",L),T.querySelectorAll("text, tspan").forEach(P=>{P.style.display="none",P.style.visibility="hidden"}))};setTimeout(te,50),setTimeout(te,200);const le=$.get("eventBus"),ye=$.get("modeling"),we=(T,N)=>{ge.style.width=T+"px",ge.style.height=N+"px"},I=T=>{try{const N=T.businessObject;if(N&&N.name&&N.name.startsWith("__IMAGE__:")){const P=N.name.substring(10),j=JSON.parse(P);j.width=T.width,j.height=T.height,ye.updateProperties(T,{name:"__IMAGE__:"+JSON.stringify(j)})}}catch(N){console.error("Erro ao salvar dimenses:",N)}},z=T=>{if(T.shape&&T.shape.id===D.id){const N=T.newBounds;N&&we(N.width,N.height)}},K=T=>{const N=T.element;N&&N.id===D.id&&(we(N.width,N.height),setTimeout(te,10))},ee=T=>{var P;const N=(P=T.context)==null?void 0:P.shape;N&&N.id===D.id&&(we(N.width,N.height),I(N))};le.on("resize.move",z),le.on("shape.changed",K),le.on("commandStack.shape.resize.postExecuted",ee)},restoreImageOverlays(){if(!u.current)return;u.current.get("elementRegistry").forEach(L=>{if(L.businessObject&&L.businessObject.name)try{if(L.businessObject.name.startsWith("__IMAGE__:")){const $=L.businessObject.name.substring(10),Z=JSON.parse($);this.createImageOverlayForElement(L,Z.url,Z.format)}}catch{}})},addImageOverlay(D,A=300,L=300,$="square"){if(console.log("addImageOverlay chamado:",{imageUrl:D==null?void 0:D.substring(0,50),x:A,y:L,format:$}),!u.current)return console.error("modelerRef.current  null"),null;try{const Z=u.current,me=Z.get("modeling"),ge=Z.get("elementFactory"),pe=Z.get("canvas"),te=Z.get("elementRegistry"),le=pe.getRootElement();if(!le||!le.businessObject)return console.error("RootElement invlido"),null;let ye=le;const I=le.businessObject.$type||le.type;if(console.log("Root type:",I),I==="bpmn:Collaboration"){const Y=te.filter(ae=>ae.type==="bpmn:Lane");if(Y.length>0)ye=Y[0],console.log("Usando Lane como pai:",ye.id);else{const ae=te.filter(ke=>ke.type==="bpmn:Participant");if(ae.length>0)ye=ae[0],console.log("Usando Participant como pai:",ye.id);else return console.error("Colaborao sem participantes - no  possvel adicionar elementos"),alert("Adicione uma Pool/Participante ao diagrama antes de inserir imagens."),null}}const z=120,K=ge.createShape({type:"bpmn:Task",width:z,height:z}),ee=pe.viewbox(),T={x:ee.x+ee.width/2,y:ee.y+ee.height/2};console.log("Criando shape em:",ye.id,"posio:",T),me.createShape(K,T,ye);const N=K.id;console.log("Shape criado com sucesso, ID:",N);let P=1;te.forEach(Y=>{var ae,ke;(ke=(ae=Y.businessObject)==null?void 0:ae.name)!=null&&ke.startsWith("__IMAGE__:")&&P++});const j=JSON.stringify({url:D,format:$,displayName:`Imagem ${P}`});return me.updateProperties(K,{name:"__IMAGE__:"+j}),this.createImageOverlayForElement(K,D,$),N}catch(Z){return console.error("Erro ao adicionar imagem:",Z),console.error("Stack:",Z.stack),null}},getModeler(){return u.current},updateElementProperties(D,A){if(!u.current||!D)return!1;try{return u.current.get("modeling").updateProperties(D,A),!0}catch(L){return console.error("Erro ao atualizar propriedades:",L),!1}},async loadComercialTemplate(){if(!u.current)return!1;try{await u.current.importXML(Bne);const D=u.current.get("canvas");D.zoom(.7);const A=D.viewbox(),L=u.current.get("elementRegistry");let $=1/0,Z=1/0,me=-1/0,ge=-1/0;if(L.forEach(te=>{te.x!==void 0&&te.y!==void 0&&($=Math.min($,te.x),Z=Math.min(Z,te.y),me=Math.max(me,te.x+(te.width||0)),ge=Math.max(ge,te.y+(te.height||0)))}),$!==1/0){const te=($+me)/2,le=(Z+ge)/2;D.viewbox({x:te-A.width/2,y:le-A.height/2,width:A.width,height:A.height})}setTimeout(()=>{const te=u.current.get("overlays");L.forEach(le=>{var we,I;if((I=(we=le.businessObject)==null?void 0:we.name)==null?void 0:I.includes("[ROBO]")){const z=document.querySelector(`[data-element-id="${le.id}"]`);if(z){z.setAttribute("data-robot-task","true");const ee=z.querySelector(".djs-visual");ee&&(ee.querySelectorAll("circle").forEach(N=>{N.style.display="none"}),ee.querySelectorAll("path").forEach((N,P)=>{P>0&&(N.style.display="none")}));const T=z.querySelector(".djs-label text");if(T&&le.businessObject.name){const N=le.businessObject.name;if(N.includes("[ROBO]")){const P=N.replace(/\[ROBO\]\s*/g,"");T.textContent=P}}}try{te.remove({element:le.id,type:"robot-icon"})}catch{}const K=document.createElement("div");K.className="robot-icon-overlay",K.innerHTML=`
                <svg viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px;">
                  <rect x="3" y="11" width="18" height="10" rx="2" />
                  <circle cx="12" cy="5" r="2" />
                  <line x1="12" y1="7" x2="12" y2="11" />
                  <line x1="8" y1="16" x2="8" y2="16" stroke-width="3" />
                  <line x1="16" y1="16" x2="16" y2="16" stroke-width="3" />
                </svg>
              `,te.add(le.id,"robot-icon",{position:{top:5,left:5},html:K})}})},300);const{xml:pe}=await u.current.saveXML({format:!0});return n&&n(pe),!0}catch(D){return console.error("Erro ao carregar template comercial:",D),!1}}}),[n]);const x=ce.useCallback(()=>{if(u.current)try{const A=u.current.get("canvas").zoom();b(Math.round(A*100))}catch{}},[]),M=ce.useCallback(async()=>{if(!u.current){console.error("modelerRef.current no disponvel");return}console.log("=== INICIANDO ADIO DE RAIA INDICAES ===");try{const{xml:D}=await u.current.saveXML({format:!0});console.log("XML atual obtido, tamanho:",D.length);const A=new DOMParser,L=new XMLSerializer,$=A.parseFromString(D,"text/xml"),Z=$.querySelector("parsererror");if(Z){console.error("Erro ao parsear XML atual:",Z.textContent),alert("Erro ao processar diagrama atual");return}console.log("Template indicaes tamanho:",HT.length);const me=A.parseFromString(HT,"text/xml"),ge=me.querySelector("parsererror");if(ge){console.error("Erro ao parsear template indicaes:",ge.textContent),alert("Erro no template de indicaes");return}let pe=$.querySelector("process");pe||(pe=$.getElementsByTagName("bpmn2:process")[0]),pe||(pe=$.getElementsByTagName("bpmn:process")[0]);let te=$.querySelector("laneSet");te||(te=$.getElementsByTagName("bpmn2:laneSet")[0]),te||(te=$.getElementsByTagName("bpmn:laneSet")[0]);let le=$.querySelector("BPMNPlane");if(le||(le=$.getElementsByTagName("bpmndi:BPMNPlane")[0]),console.log("Elementos encontrados no diagrama atual:",{process:!!pe,laneSet:!!te,diagram:!!le}),!pe||!te||!le){alert("Por favor, carregue um diagrama com Lanes primeiro (ex: Comercial)");return}let ye=me.querySelector("process");ye||(ye=me.getElementsByTagName("bpmn2:process")[0]);let we=me.querySelector("lane");we||(we=me.getElementsByTagName("bpmn2:lane")[0]);let I=me.querySelector("BPMNPlane");if(I||(I=me.getElementsByTagName("bpmndi:BPMNPlane")[0]),console.log("Elementos encontrados no template indicaes:",{process:!!ye,lane:!!we,diagram:!!I}),!we||!ye||!I){console.error("Elementos de indicaes no encontrados"),alert("Erro: template de indicaes invlido");return}let z=0;const K=Array.from(le.childNodes).filter(se=>se.nodeName&&(se.nodeName.includes("BPMNShape")||se.nodeName==="bpmndi:BPMNShape"));console.log("Shapes existentes encontrados:",K.length),K.forEach(se=>{const Ne=se.querySelector("Bounds")||se.getElementsByTagName("dc:Bounds")[0]||se.getElementsByTagName("Bounds")[0];if(Ne){const Me=parseFloat(Ne.getAttribute("y"))||0,Ce=parseFloat(Ne.getAttribute("height"))||0;Me+Ce>z&&(z=Me+Ce)}}),console.log("MaxY calculado:",z);const ee=z+80;console.log("OffsetY para nova raia:",ee),console.log("Copiando Lane para LaneSet...");const T=$.importNode(we,!0);te.appendChild(T),console.log("Lane adicionada ao LaneSet");const N=[],P=[],j=Array.from(ye.childNodes).filter(se=>se.nodeType===1);console.log("Filhos do processo de indicaes:",j.length),j.forEach(se=>{const Ne=(se.tagName||se.nodeName||"").toLowerCase();Ne.includes("laneset")||(Ne.includes("sequenceflow")?P.push(se):N.push(se))}),console.log("Elementos no-flow:",N.length),console.log("Elementos flow:",P.length),N.forEach(se=>{const Ne=$.importNode(se,!0);pe.appendChild(Ne)}),console.log("Elementos no-flow adicionados"),P.forEach(se=>{const Ne=$.importNode(se,!0);pe.appendChild(Ne)}),console.log("Elementos flow adicionados");const Y=Array.from(I.childNodes).filter(se=>se.nodeName&&(se.nodeName.includes("BPMNShape")||se.nodeName==="bpmndi:BPMNShape")),ae=Array.from(I.childNodes).filter(se=>se.nodeName&&(se.nodeName.includes("BPMNEdge")||se.nodeName==="bpmndi:BPMNEdge"));console.log("Shapes no template indicaes:",Y.length),console.log("Edges no template indicaes:",ae.length);const ke=Array.from(le.childNodes).filter(se=>se.nodeName&&(se.nodeName.includes("BPMNEdge")||se.nodeName==="bpmndi:BPMNEdge")),Ae=ke.length>0?ke[0]:null;console.log("Edges existentes:",ke.length);const Le=$.createElementNS("http://www.omg.org/spec/BPMN/20100524/DI","bpmndi:BPMNShape");Le.setAttribute("id","Shape_Lane_Indicacoes_Added"),Le.setAttribute("bpmnElement","Lane_Indicacoes"),Le.setAttribute("isHorizontal","true");const q=$.createElementNS("http://www.omg.org/spec/DD/20100524/DC","dc:Bounds");q.setAttribute("x","150"),q.setAttribute("y",String(ee)),q.setAttribute("width","2570"),q.setAttribute("height","520"),Le.appendChild(q),Ae?le.insertBefore(Le,Ae):le.appendChild(Le);let Te=0;Y.forEach(se=>{const Ne=se.getAttribute("bpmnElement");if(Ne&&!Ne.includes("Participant")&&!Ne.includes("Lane")){const Me=$.importNode(se,!0),Ce=Me.querySelector("Bounds")||Me.getElementsByTagName("dc:Bounds")[0];if(Ce){const qe=parseFloat(Ce.getAttribute("y"))||0;Ce.setAttribute("y",String(qe+ee))}Ae?le.insertBefore(Me,Ae):le.appendChild(Me),Te++}}),console.log("Shapes adicionados ao diagrama:",Te);let _e=0;ae.forEach(se=>{const Ne=$.importNode(se,!0);Array.from(Ne.childNodes).filter(Ce=>Ce.nodeName&&(Ce.nodeName.includes("waypoint")||Ce.nodeName==="di:waypoint")).forEach(Ce=>{const qe=parseFloat(Ce.getAttribute("y"))||0;Ce.setAttribute("y",String(qe+ee))}),le.appendChild(Ne),_e++}),console.log("Edges adicionados ao diagrama:",_e);const X=Array.from(le.childNodes).filter(se=>se.nodeName&&(se.nodeName.includes("BPMNShape")||se.nodeName==="bpmndi:BPMNShape")).find(se=>{var Ne;return se.getAttribute&&((Ne=se.getAttribute("bpmnElement"))==null?void 0:Ne.includes("Participant"))});if(X){const se=X.querySelector("Bounds")||X.getElementsByTagName("dc:Bounds")[0];if(se){const Ne=parseFloat(se.getAttribute("height"))||2e3,Me=Ne+600;se.setAttribute("height",String(Me)),console.log("Altura do Participant atualizada:",Ne,"->",Me)}}else console.warn("Participant shape no encontrado");let he=L.serializeToString($);console.log("XML serializado, tamanho:",he.length),he=he.replace(/xmlns:ns\d+="[^"]*"/g,""),he=he.replace(/ns\d+:/g,""),console.log("XML mesclado gerado, importando..."),console.log("Primeiros 500 chars do XML:",he.substring(0,500));try{const se=await u.current.importXML(he);se.warnings&&se.warnings.length>0&&console.warn("Warnings ao importar:",se.warnings),console.log("XML importado com sucesso!"),u.current.get("canvas").zoom(.4);const{xml:Me}=await u.current.saveXML({format:!0});n&&n(Me),console.log("=== RAIA INDICAES ADICIONADA COM SUCESSO ==="),alert("Raia de Indicaes adicionada com sucesso!")}catch(se){console.error("Erro ao importar XML:",se),console.error("Mensagem:",se.message),console.log("XML completo para debug (primeiros 2000 chars):",he.substring(0,2e3)),alert("Erro ao importar diagrama: "+se.message)}}catch(D){console.error("Erro ao adicionar raia de indicaes:",D),console.error("Stack:",D.stack),alert("Erro ao adicionar raia: "+D.message)}},[n]);ce.useEffect(()=>{const D=c.current;if(!D)return;const A=D.querySelector(".bjs-container");A&&(o?A.classList.add("grid-enabled"):A.classList.remove("grid-enabled"))},[o]),ce.useEffect(()=>{const D=A=>{E&&!A.target.closest("[data-raia-menu]")&&w(!1)};return document.addEventListener("click",D),()=>document.removeEventListener("click",D)},[E]),ce.useEffect(()=>{const D=c.current;if(!D||!d.current)return;const L=setTimeout(async()=>{p(!0),v(null);try{const $=new ja({container:D,keyboard:{bindTo:document},additionalModules:[Ane,Rne,Lne]});u.current=$,await $.importXML(d.current);const Z=$.get("canvas");Z.zoom(1);const me=Z.viewbox();if(Z.getRootElement()){const _e=$.get("elementRegistry");let oe=1/0,X=1/0,he=-1/0,se=-1/0;if(_e.forEach(Ne=>{Ne.x!==void 0&&Ne.y!==void 0&&(oe=Math.min(oe,Ne.x),X=Math.min(X,Ne.y),he=Math.max(he,Ne.x+(Ne.width||0)),se=Math.max(se,Ne.y+(Ne.height||0)))}),oe!==1/0){const Ne=(oe+he)/2,Me=(X+se)/2;Z.viewbox({x:Ne-me.width/2,y:Me-me.height/2,width:me.width,height:me.height})}}b(100),(()=>{const _e={Participant_Educacao:{stroke:"#51cf66",fill:"#e0ffe0"},Participant_Indicacao:{stroke:"#ff6b6b",fill:"#ffe0e0"},Participant_Conteudo:{stroke:"#9775fa",fill:"#f0e0ff"},Participant_Prospeccao:{stroke:"#fa5252",fill:"#ffe0e0"},Participant_Google:{stroke:"#4dabf7",fill:"#e0f0ff"},Participant_Meta:{stroke:"#cc5de8",fill:"#f3e0ff"},Participant_Nucleo:{stroke:"#868e96",fill:"#f0f0f0"}};setTimeout(()=>{Object.keys(_e).forEach(oe=>{var he;const X=(he=c.current)==null?void 0:he.querySelector(`[data-element-id="${oe}"]`);if(X){const se=X.querySelector("rect");se?(se.setAttribute("fill",_e[oe].fill),se.setAttribute("stroke",_e[oe].stroke),se.setAttribute("stroke-width","2"),console.log(` Cor SVG aplicada  lane: ${oe}`,_e[oe])):console.warn(` Rect no encontrado para lane: ${oe}`)}else console.warn(` Elemento no encontrado para lane: ${oe}`)})},500)})(),(()=>{const _e={Participant_Educacao:" EDUCAO - Alunos (6 Meses Grtis)",Participant_Indicacao:" INDICAO - Parceiro (Ativo + Passivo)",Participant_Conteudo:" PRODUO CONTEDO - Instagram",Participant_Prospeccao:" PROSPECO ATIVA - Redes Sociais",Participant_Google:" GOOGLE ADS - Alta Inteno",Participant_Meta:" META ADS - Descoberta",Participant_Nucleo:" NCLEO FINANCEIRO - Gateway Asaas"};setTimeout(()=>{Object.keys(_e).forEach(oe=>{var he;const X=(he=c.current)==null?void 0:he.querySelector(`[data-element-id="${oe}"]`);if(X){let se=X.querySelector(".djs-label");se||(se=document.createElementNS("http://www.w3.org/2000/svg","g"),se.setAttribute("class","djs-label"),X.appendChild(se));let Ne=se.querySelector("text");Ne||(Ne=document.createElementNS("http://www.w3.org/2000/svg","text"),se.appendChild(Ne)),Ne.setAttribute("x","10"),Ne.setAttribute("y","20"),Ne.setAttribute("style","font-family: Inter, sans-serif; font-size: 13px; font-weight: 700; fill: #1e293b; writing-mode: tb; text-orientation: upright;"),Ne.textContent=_e[oe],console.log(` Label aplicada  lane: ${oe}`)}else console.warn(` Lane no encontrada: ${oe}`)})},600)})(),setTimeout(()=>{const _e=$.get("elementRegistry"),oe=$.get("overlays"),X=$.get("eventBus"),he=$.get("modeling");_e.forEach(se=>{if(se.businessObject&&se.businessObject.name)try{if(se.businessObject.name.startsWith("__IMAGE__:")){const Ne=se.businessObject.name.substring(10),Me=JSON.parse(Ne),Ce=Me.width||se.width,qe=Me.height||se.height;Me.width&&Me.height&&(se.width!==Me.width||se.height!==Me.height)&&he.resizeShape(se,{x:se.x,y:se.y,width:Me.width,height:Me.height});const nt=Me.format==="circle"?"50%":Me.format==="rounded"?"12px":"4px",dt=document.createElement("div");dt.className="bpmn-image-overlay",dt.style.cssText=`
                    width: ${Ce}px;
                    height: ${qe}px;
                    overflow: hidden;
                    border-radius: ${nt};
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    pointer-events: none;
                    background: white;
                  `;const Nt=document.createElement("img");Nt.src=Me.url,Nt.draggable=!1,Nt.style.cssText=`
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    display: block;
                  `,dt.appendChild(Nt),oe.add(se.id,{position:{top:0,left:0},html:dt});const Ye=()=>{const it=document.querySelector(`[data-element-id="${se.id}"]`);it&&(it.setAttribute("data-image-element","true"),it.setAttribute("data-image-format",Me.format),it.querySelectorAll("text, tspan").forEach(et=>{et.style.display="none",et.style.visibility="hidden"}))};setTimeout(Ye,50),setTimeout(Ye,200),setTimeout(Ye,500);const gt=(it,wt)=>{dt.style.width=it+"px",dt.style.height=wt+"px"},Xe=it=>{try{const wt=it.businessObject;if(wt&&wt.name&&wt.name.startsWith("__IMAGE__:")){const et=JSON.parse(wt.name.substring(10));et.width=it.width,et.height=it.height,he.updateProperties(it,{name:"__IMAGE__:"+JSON.stringify(et)})}}catch(wt){console.error("Erro ao salvar dimenses:",wt)}},bn=it=>{if(it.shape&&it.shape.id===se.id){const wt=it.newBounds;wt&&gt(wt.width,wt.height)}},zt=it=>{const wt=it.element;wt&&wt.id===se.id&&(gt(wt.width,wt.height),setTimeout(Ye,10))},Pt=it=>{var et;const wt=(et=it.context)==null?void 0:et.shape;wt&&wt.id===se.id&&(gt(wt.width,wt.height),Xe(wt))};X.on("resize.move",bn),X.on("shape.changed",zt),X.on("commandStack.shape.resize.postExecuted",Pt),console.log("Imagem restaurada:",se.id,"dimenses:",Ce,"x",qe)}}catch{}})},200);const ye=()=>{const _e=$.get("elementRegistry"),oe=$.get("overlays");_e.forEach(X=>{var se,Ne;if((Ne=(se=X.businessObject)==null?void 0:se.name)==null?void 0:Ne.includes("[ROBO]")){const Me=document.querySelector(`[data-element-id="${X.id}"]`);if(Me){Me.setAttribute("data-robot-task","true");const nt=Me.querySelector(".djs-visual");nt&&(nt.querySelectorAll("circle").forEach(dt=>{dt.style.display="none"}),nt.querySelectorAll("path").forEach((dt,Nt)=>{Nt>0&&(dt.style.display="none")}))}try{oe.remove({element:X.id,type:"robot-icon"})}catch{}const Ce=document.createElement("div");Ce.className="robot-icon-overlay",Ce.innerHTML=`
                <svg viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px;">
                  <rect x="3" y="11" width="18" height="10" rx="2" />
                  <circle cx="12" cy="5" r="2" />
                  <line x1="12" y1="7" x2="12" y2="11" />
                  <line x1="8" y1="16" x2="8" y2="16" stroke-width="3" />
                  <line x1="16" y1="16" x2="16" y2="16" stroke-width="3" />
                  <path d="M9 21v-1" />
                  <path d="M15 21v-1" />
                </svg>
              `,oe.add(X.id,"robot-icon",{position:{top:5,left:5},html:Ce});const qe=Me.querySelector(".djs-label text");if(qe&&X.businessObject.name){const nt=X.businessObject.name;if(nt.includes("[ROBO]")){const dt=nt.replace(/\[ROBO\]\s*/g,"");qe.textContent=dt}}}})};setTimeout(ye,300);const we=$.get("eventBus");we.on("shape.added",({element:_e})=>{var oe,X;(X=(oe=_e.businessObject)==null?void 0:oe.name)!=null&&X.includes("[ROBO]")&&setTimeout(ye,50)}),we.on("shape.changed",({element:_e})=>{var oe,X;(X=(oe=_e.businessObject)==null?void 0:oe.name)!=null&&X.includes("[ROBO]")&&setTimeout(ye,50)});const I=D.querySelector(".bjs-container");I&&o&&I.classList.add("grid-enabled"),we.on("canvas.viewbox.changed",x),new MutationObserver(()=>{const _e=document.querySelector(".djs-popup-body");if(!_e||document.querySelector('[data-action="replace-with-robot-task"]')||_e.querySelectorAll(".entry").length===0)return;console.log(' Adicionando opo "Tarefa Automatizada" ao menu...');const X=$.get("selection").get()[0];if(!X)return;if(X.type&&(X.type.includes("Task")||X.type==="bpmn:Task")){const se=document.createElement("div");se.className="entry",se.setAttribute("data-action","replace-with-robot-task"),se.innerHTML=`
              <span class="robot-menu-icon" style="font-size: 20px; margin-right: 8px;"></span>
              <span>Tarefa Automatizada</span>
            `,se.style.cursor="pointer",se.style.padding="8px 12px",se.style.display="flex",se.style.alignItems="center",se.addEventListener("mouseenter",()=>{se.style.backgroundColor="#f3f4f6"}),se.addEventListener("mouseleave",()=>{se.style.backgroundColor=""}),se.addEventListener("click",()=>{const Ne=$.get("bpmnReplace"),Me=$.get("modeling");let Ce=X.businessObject.name||"Automao";Ce.includes("[ROBO]")||(Ce="[ROBO] "+Ce);const qe=Ne.replaceElement(X,{type:"bpmn:ServiceTask"});Me.updateProperties(qe,{name:Ce});const nt=document.querySelector(".djs-popup");nt&&nt.remove()}),_e.appendChild(se)}}).observe(document.body,{childList:!0,subtree:!0}),$.on("commandStack.changed",async()=>{try{const{xml:_e}=await $.saveXML({format:!0});n&&n(_e)}catch(_e){console.error("Erro ao exportar:",_e)}}),$.on("selection.changed",_e=>{var oe;i&&i(((oe=_e.newSelection)==null?void 0:oe[0])||null)});const K=$.get("editorActions"),ee=$.get("copyPaste"),T=$.get("selection"),N=$.get("clipboard"),P=_e=>{if(_e.target.tagName==="INPUT"||_e.target.tagName==="TEXTAREA")return;const X=navigator.platform.toUpperCase().indexOf("MAC")>=0?_e.metaKey:_e.ctrlKey;if(X&&_e.key==="c"){const he=T.get();he.length>0&&(_e.preventDefault(),ee.copy(he),console.log("Elementos copiados:",he.length))}else if(X&&_e.key==="v"){if(_e.preventDefault(),N.isEmpty&&N.isEmpty()){console.log("Clipboard vazio");return}ee.paste(),console.log("Elementos colados")}else if(X&&_e.key==="x"){const he=T.get();he.length>0&&(_e.preventDefault(),ee.copy(he),$.get("modeling").removeElements(he),console.log("Elementos recortados:",he.length))}};document.addEventListener("keydown",P),u.current._copyPasteHandler=P;let j=document.getElementById("bpmn-tooltip");j||(j=document.createElement("div"),j.id="bpmn-tooltip",j.style.cssText=`
            position: fixed;
            background: #1e293b;
            color: white;
            padding: 8px 14px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            white-space: nowrap;
            z-index: 100000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.1s ease;
            box-shadow: 0 4px 16px rgba(0,0,0,0.25);
          `,document.body.appendChild(j));const Y=_e=>{const oe=_e.currentTarget,X=oe.getAttribute("data-tooltip");if(!X)return;const he=oe.getBoundingClientRect();j.textContent=X,j.style.opacity="1",j.style.left=he.right+12+"px",j.style.top=he.top+he.height/2+"px",j.style.transform="translateY(-50%)"},ae=()=>{j.style.opacity="0"},ke=()=>{D.querySelectorAll(".djs-palette .entry, .djs-context-pad .entry").forEach(oe=>{const X=oe.getAttribute("title");if(!X||oe.hasAttribute("data-tooltip-setup"))return;const he=VT[X]||Hw(X);oe.setAttribute("data-tooltip",he),oe.removeAttribute("title"),oe.setAttribute("data-tooltip-setup","true"),oe.addEventListener("mouseenter",Y),oe.addEventListener("mouseleave",ae)})},Ae=setInterval(()=>{D.querySelectorAll(".djs-palette .entry[title], .djs-context-pad .entry[title]").length>0&&ke()},100);setTimeout(()=>clearInterval(Ae),5e3),new MutationObserver(_e=>{let oe=!1;_e.forEach(X=>{if(X.addedNodes.length>0&&(oe=!0),X.type==="attributes"&&X.attributeName==="title"){const he=X.target;if(he.hasAttribute("title")&&!he.hasAttribute("data-tooltip-setup")){const se=he.getAttribute("title"),Ne=VT[se]||Hw(se);he.setAttribute("data-tooltip",Ne),he.removeAttribute("title"),he.setAttribute("data-tooltip-setup","true"),he.addEventListener("mouseenter",Y),he.addEventListener("mouseleave",ae)}}}),oe&&setTimeout(ke,50)}).observe(D,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["title"]}),setTimeout(ke,200),setTimeout(ke,500),setTimeout(ke,1e3);const q=()=>{const _e=D.querySelector(".djs-palette");!_e||_e.hasAttribute("data-scroll-setup")||(_e.setAttribute("data-scroll-setup","true"),_e.addEventListener("wheel",oe=>{if(_e.scrollHeight>_e.clientHeight){oe.stopPropagation();const he=_e.scrollTop===0,se=_e.scrollTop+_e.clientHeight>=_e.scrollHeight;(he&&oe.deltaY<0||se&&oe.deltaY>0)&&oe.preventDefault()}},{passive:!1}))};setTimeout(q,300),setTimeout(q,600);const Te=()=>{const _e=D.querySelector(".djs-palette");if(!_e||_e.querySelector(".fluxos-entry"))return;const oe=document.createElement("div");oe.className="separator",oe.style.cssText=`
            margin: 6px 8px;
            width: calc(100% - 16px);
            height: 1px;
            background: #e2e8f0;
            border: none;
          `;const X=document.createElement("div");X.className="entry fluxos-entry",X.setAttribute("data-tooltip","Gerenciar Fluxos"),X.setAttribute("data-tooltip-setup","true"),X.style.cssText=`
            width: 36px;
            height: 36px;
            min-height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin: 2px auto;
            transition: all 0.15s ease;
            cursor: pointer;
          `,X.innerHTML=`
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#6366f1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
              <line x1="12" y1="11" x2="12" y2="17"></line>
              <line x1="9" y1="14" x2="15" y2="14"></line>
            </svg>
          `,X.addEventListener("mouseenter",Ne=>{X.style.background="#f1f5f9",X.style.transform="scale(1.05)",Y(Ne)}),X.addEventListener("mouseleave",()=>{X.style.background="",X.style.transform="",ae()}),X.addEventListener("click",()=>{r&&r()});const he=document.createElement("div");he.className="entry image-entry",he.setAttribute("data-tooltip","Adicionar Imagem"),he.setAttribute("data-tooltip-setup","true"),he.style.cssText=`
            width: 36px;
            height: 36px;
            min-height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin: 2px auto;
            transition: all 0.15s ease;
            cursor: pointer;
          `,he.innerHTML=`
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
          `,he.addEventListener("mouseenter",Ne=>{he.style.background="#f1f5f9",he.style.transform="scale(1.05)",Y(Ne)}),he.addEventListener("mouseleave",()=>{he.style.background="",he.style.transform="",ae()}),he.addEventListener("click",()=>{s&&s()});const se=document.createElement("div");se.className="entry robot-entry",se.setAttribute("data-tooltip","Tarefa Automatizada (Rob)"),se.setAttribute("data-tooltip-setup","true"),se.style.cssText=`
            width: 36px;
            height: 36px;
            min-height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin: 2px auto;
            transition: all 0.15s ease;
            cursor: pointer;
          `,se.innerHTML=`
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 0.8;">
              <rect x="3" y="11" width="18" height="10" rx="2" />
              <circle cx="12" cy="5" r="2" />
              <line x1="12" y1="7" x2="12" y2="11" />
              <line x1="8" y1="16" x2="8" y2="16" stroke-width="3" />
              <line x1="16" y1="16" x2="16" y2="16" stroke-width="3" />
            </svg>
          `,se.addEventListener("mouseenter",Ne=>{se.style.background="#f5f3ff",se.style.transform="scale(1.05)",Y(Ne)}),se.addEventListener("mouseleave",()=>{se.style.background="",se.style.transform="",ae()}),se.addEventListener("click",()=>{try{const Ne=$.get("modeling"),Me=$.get("elementFactory"),Ce=$.get("canvas"),qe=$.get("elementRegistry"),nt=Ce.getRootElement();let dt=nt;if((nt.businessObject.$type||nt.type)==="bpmn:Collaboration"){const zt=qe.filter(Pt=>Pt.type==="bpmn:Lane");if(zt.length>0)dt=zt[0];else{const Pt=qe.filter(it=>it.type==="bpmn:Participant");Pt.length>0&&(dt=Pt[0])}}const gt=Me.createShape({type:"bpmn:ServiceTask"}),Xe=Ce.viewbox(),bn={x:Xe.x+Xe.width/2,y:Xe.y+Xe.height/2};Ne.createShape(gt,bn,dt),Ne.updateProperties(gt,{name:"[ROBO] Nova Automao"}),setTimeout(()=>{Ne.setColor([gt],{fill:"#f5f3ff",stroke:"#8b5cf6"})},100),console.log("Tarefa automatizada criada:",gt.id)}catch(Ne){console.error("Erro ao criar tarefa automatizada:",Ne)}}),_e.appendChild(oe),_e.appendChild(X),_e.appendChild(he)};setTimeout(Te,300),setTimeout(Te,600),p(!1)}catch($){console.error("Erro BPMN:",$),v($.message||"Erro ao carregar diagrama"),p(!1)}},100);return()=>{clearTimeout(L),u.current&&(u.current._copyPasteHandler&&document.removeEventListener("keydown",u.current._copyPasteHandler),u.current.destroy(),u.current=null)}},[x]);const B=ce.useCallback(()=>{var A;const D=(A=u.current)==null?void 0:A.get("canvas");D&&(D.zoom(D.zoom()*1.2),x())},[x]),H=ce.useCallback(()=>{var A;const D=(A=u.current)==null?void 0:A.get("canvas");D&&(D.zoom(D.zoom()/1.2),x())},[x]),R=ce.useCallback(()=>{var A;const D=(A=u.current)==null?void 0:A.get("canvas");D&&(D.zoom("fit-viewport"),x())},[x]),O=ce.useCallback(()=>{var A;const D=(A=u.current)==null?void 0:A.get("canvas");D&&(D.zoom(1),x())},[x]);return g.jsxs("div",{className:"relative w-full h-full",style:{minHeight:"500px"},children:[h&&g.jsx("div",{className:"absolute inset-0 bg-white/90 flex items-center justify-center z-10",children:g.jsxs("div",{className:"flex flex-col items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"text-slate-600",children:"Carregando..."})]})}),m&&g.jsx("div",{className:"absolute inset-0 bg-red-50 flex items-center justify-center z-10",children:g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md text-center",children:[g.jsx("h3",{className:"text-red-600 font-bold mb-2",children:"Erro ao carregar diagrama"}),g.jsx("p",{className:"text-slate-600 text-sm",children:m})]})}),!h&&!m&&g.jsx("div",{className:"absolute top-4 right-4 z-20",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-lg flex items-center border border-slate-200",children:[g.jsx("button",{onClick:H,className:"px-3 py-2 hover:bg-slate-100 border-r border-slate-200",title:"Diminuir zoom",children:g.jsx("span",{className:"text-xl font-bold text-slate-600",children:""})}),g.jsxs("button",{onClick:O,className:"px-4 py-2 hover:bg-slate-100 border-r border-slate-200 text-sm font-semibold text-slate-700 min-w-[70px]",title:"Resetar para 100%",children:[_,"%"]}),g.jsx("button",{onClick:B,className:"px-3 py-2 hover:bg-slate-100 border-r border-slate-200",title:"Aumentar zoom",children:g.jsx("span",{className:"text-xl font-bold text-slate-600",children:"+"})}),g.jsx("button",{onClick:R,className:"px-3 py-2 hover:bg-slate-100 border-r border-slate-200",title:"Ajustar  tela",children:g.jsx("svg",{className:"w-5 h-5 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),g.jsx("button",{onClick:a,className:`px-3 py-2 hover:bg-slate-100 transition-colors border-r border-slate-200 ${o?"bg-indigo-50":""}`,title:o?"Desativar grade":"Ativar grade",children:g.jsx("svg",{className:`w-5 h-5 ${o?"text-indigo-600":"text-slate-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}),g.jsxs("div",{className:"relative","data-raia-menu":!0,children:[g.jsxs("button",{onClick:()=>w(!E),className:`px-3 py-2 hover:bg-slate-100 transition-colors flex items-center gap-1 ${E?"bg-emerald-50":""}`,title:"Adicionar Raia",children:[g.jsx("svg",{className:`w-5 h-5 ${E?"text-emerald-600":"text-slate-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),g.jsx("span",{className:`text-xs font-medium ${E?"text-emerald-600":"text-slate-600"}`,children:"Raia"})]}),E&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-white rounded-lg shadow-xl border border-slate-200 py-1 min-w-[180px] z-50",children:[g.jsxs("button",{onClick:async()=>{w(!1),await M()},className:"w-full px-4 py-2 text-left hover:bg-emerald-50 flex items-center gap-2 text-sm",children:[g.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),g.jsxs("div",{children:[g.jsx("div",{className:"font-medium text-slate-700",children:"Indicaes"}),g.jsx("div",{className:"text-xs text-slate-500",children:"Funil da Confiana"})]})]}),g.jsx("div",{className:"border-t border-slate-100 my-1"}),g.jsx("div",{className:"px-4 py-2 text-xs text-slate-400 italic",children:"Mais raias em breve..."})]})]})]})}),g.jsx("div",{ref:c,className:"w-full h-full bg-white",style:{minHeight:"500px"}})]})}),jne=[{name:"Azul",fill:"#dbeafe",stroke:"#3b82f6"},{name:"Verde",fill:"#dcfce7",stroke:"#22c55e"},{name:"Roxo",fill:"#ede9fe",stroke:"#8b5cf6"},{name:"Laranja",fill:"#ffedd5",stroke:"#f97316"},{name:"Cyan",fill:"#cffafe",stroke:"#06b6d4"},{name:"Rosa",fill:"#fce7f3",stroke:"#ec4899"},{name:"Amarelo",fill:"#fef3c7",stroke:"#f59e0b"},{name:"Vermelho",fill:"#fecaca",stroke:"#ef4444"},{name:"Teal",fill:"#ccfbf1",stroke:"#14b8a6"},{name:"Indigo",fill:"#e0e7ff",stroke:"#6366f1"}],tv=e=>{var t,n;return(n=(t=e==null?void 0:e.businessObject)==null?void 0:t.name)==null?void 0:n.startsWith("__IMAGE__:")},$ne=e=>{try{if(tv(e)){const t=e.businessObject.name.substring(10);return JSON.parse(t)}}catch(t){console.error("Erro ao parsear dados de imagem:",t)}return null};function Gne({element:e,onUpdate:t,onColorChange:n}){var M;const[i,r]=ce.useState(""),[o,a]=ce.useState(""),[s,l]=ce.useState(null),[c,u]=ce.useState(null);ce.useEffect(()=>{if(e){const B=e.businessObject;if(tv(e)){const R=$ne(e);u(R),r((R==null?void 0:R.displayName)||"Imagem")}else u(null),r(B.name||"");const H=B.documentation;H&&H.length>0?a(H[0].text||""):a(""),l(null)}else r(""),a(""),l(null),u(null)},[e]);const d=B=>{l(B),n&&e&&n(e,B)},h=B=>{r(B.target.value)},p=()=>{if(t&&e)if(c){const B={...c,displayName:i};t(e,{name:"__IMAGE__:"+JSON.stringify(B)})}else t(e,{name:i})},m=()=>{p()},v=B=>{B.key==="Enter"&&(B.preventDefault(),p(),B.target.blur())},_=B=>{a(B.target.value)},b=()=>{t&&e&&t(e,{documentation:o?[{text:o}]:[]})},E=()=>{b()},w=B=>{var O;if(!B)return"";if(tv(B))return"Imagem";const H=B.type||((O=B.businessObject)==null?void 0:O.$type)||"";return{"bpmn:Task":"Tarefa","bpmn:UserTask":"Tarefa de Usurio","bpmn:ServiceTask":"Tarefa de Servio","bpmn:ScriptTask":"Tarefa de Script","bpmn:ManualTask":"Tarefa Manual","bpmn:BusinessRuleTask":"Tarefa de Regra","bpmn:SendTask":"Tarefa de Envio","bpmn:ReceiveTask":"Tarefa de Recebimento","bpmn:StartEvent":"Evento de Incio","bpmn:EndEvent":"Evento de Fim","bpmn:IntermediateCatchEvent":"Evento Intermedirio","bpmn:IntermediateThrowEvent":"Evento Intermedirio","bpmn:BoundaryEvent":"Evento de Limite","bpmn:ExclusiveGateway":"Gateway Exclusivo","bpmn:ParallelGateway":"Gateway Paralelo","bpmn:InclusiveGateway":"Gateway Inclusivo","bpmn:EventBasedGateway":"Gateway de Evento","bpmn:SubProcess":"Sub-Processo","bpmn:CallActivity":"Atividade de Chamada","bpmn:Participant":"Pool","bpmn:Lane":"Raia","bpmn:SequenceFlow":"Fluxo de Sequncia","bpmn:MessageFlow":"Fluxo de Mensagem","bpmn:DataObject":"Objeto de Dados","bpmn:DataStore":"Armazm de Dados","bpmn:TextAnnotation":"Anotao"}[H]||H.replace("bpmn:","")},x=B=>{var R;if(!B)return null;if(tv(B))return g.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[g.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2",strokeWidth:2}),g.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 15l-5-5L5 21"})]});const H=B.type||((R=B.businessObject)==null?void 0:R.$type)||"";return H.includes("Task")?g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}):H.includes("Event")?g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:2})}):H.includes("Gateway")?g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3l9 9-9 9-9-9 9-9z"})}):H.includes("SubProcess")?g.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[g.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeWidth:2}),g.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M12 8v8M8 12h8"})]}):H.includes("Participant")||H.includes("Lane")?g.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[g.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"1",strokeWidth:2}),g.jsx("line",{x1:"6",y1:"4",x2:"6",y2:"20",strokeWidth:2})]}):g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})};return e?g.jsxs("div",{className:"w-80 bg-white border-l border-slate-200 flex flex-col overflow-hidden",children:[g.jsx("div",{className:"p-4 border-b border-slate-200 bg-slate-50",children:g.jsx("h2",{className:"font-semibold text-slate-700",children:"Propriedades"})}),g.jsx("div",{className:"p-4 border-b border-slate-200 bg-fyness-light",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 bg-fyness-primary/10 rounded-lg flex items-center justify-center text-fyness-primary",children:x(e)}),g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Tipo"}),g.jsx("p",{className:"font-medium text-slate-700",children:w(e)})]})]})}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wide mb-1",children:"ID"}),g.jsx("input",{type:"text",value:e.id||"",readOnly:!0,className:"w-full px-3 py-2 bg-slate-100 border border-slate-200 rounded-md text-sm text-slate-600 cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wide mb-1",children:"Nome"}),g.jsx("input",{type:"text",value:i,onChange:h,onBlur:m,onKeyDown:v,placeholder:"Digite o nome do elemento...",className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent"}),g.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Pressione Enter para salvar"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wide mb-1",children:"Documentao"}),g.jsx("textarea",{value:o,onChange:_,onBlur:E,placeholder:"Adicione uma descrio ou notas...",rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent resize-none"}),g.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Clique fora para salvar"})]}),e.type&&!e.type.includes("Flow")&&!e.type.includes("Association")&&g.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[g.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wide mb-2",children:"Cor do Elemento"}),g.jsx("div",{className:"grid grid-cols-5 gap-2",children:jne.map(B=>g.jsx("button",{onClick:()=>d(B),title:B.name,className:`w-10 h-10 rounded-lg border-2 transition-all hover:scale-110 ${(s==null?void 0:s.name)===B.name?"ring-2 ring-offset-2 ring-slate-400":""}`,style:{backgroundColor:B.fill,borderColor:B.stroke}},B.name))}),s&&g.jsxs("p",{className:"text-xs text-slate-500 mt-2 text-center",children:["Cor selecionada: ",s.name]})]}),((M=e.type)==null?void 0:M.includes("SequenceFlow"))&&g.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[g.jsx("label",{className:"block text-xs font-medium text-slate-500 uppercase tracking-wide mb-1",children:"Condio (Expresso)"}),g.jsx("input",{type:"text",placeholder:"Ex: ${approved == true}",className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent font-mono"})]})]}),g.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:g.jsx("p",{className:"text-xs text-slate-400 text-center",children:"Use o canvas para editar visualmente"})})]}):g.jsxs("div",{className:"w-80 bg-white border-l border-slate-200 flex flex-col",children:[g.jsx("div",{className:"p-4 border-b border-slate-200 bg-slate-50",children:g.jsx("h2",{className:"font-semibold text-slate-700",children:"Propriedades"})}),g.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:g.jsxs("div",{className:"text-center text-slate-400",children:[g.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),g.jsx("p",{className:"text-sm",children:"Selecione um elemento no diagrama para editar suas propriedades"})]})})]})}function WT(){const{id:e}=$F(),t=Kf(),[n,i]=ce.useState(null),[r,o]=ce.useState(null),[a,s]=ce.useState(null),[l,c]=ce.useState(!1),[u,d]=ce.useState(!1),[h,p]=ce.useState(!1),[m,v]=ce.useState(""),[_,b]=ce.useState(!1),[E,w]=ce.useState(!0),x=ce.useRef(null),M=ce.useRef(e),B=ce.useRef(null),[H,R]=ce.useState(!1),[O,D]=ce.useState(!1),[A,L]=ce.useState([]),[$,Z]=ce.useState(!1),[me,ge]=ce.useState(""),[pe,te]=ce.useState(!0),[le,ye]=ce.useState(!1),[we,I]=ce.useState(""),[z,K]=ce.useState("square");ce.useEffect(()=>{(async()=>{const X=await Bh();L(X.map(Gc))})()},[]);const ee=ce.useMemo(()=>{if(!n||!A.length)return null;const oe=n.parentId?A.find(se=>se.id===n.parentId):null,X=A.filter(se=>se.parentId===n.id),he=(se,Ne=[])=>{if(!(se!=null&&se.parentId))return Ne;const Me=A.find(Ce=>Ce.id===se.parentId);return Me?(Ne.unshift(Me),he(Me,Ne)):Ne};return{parent:oe,children:X,ancestors:he(n),level:n.level||0,isRoot:n.isRoot||!n.parentId}},[n,A]),T=oe=>{const X=[{bg:"bg-green-500",text:"text-green-600",light:"bg-green-50",border:"border-green-400"},{bg:"bg-blue-500",text:"text-blue-600",light:"bg-blue-50",border:"border-blue-400"},{bg:"bg-purple-500",text:"text-purple-600",light:"bg-purple-50",border:"border-purple-400"},{bg:"bg-orange-500",text:"text-orange-600",light:"bg-orange-50",border:"border-orange-400"},{bg:"bg-pink-500",text:"text-pink-600",light:"bg-pink-50",border:"border-pink-400"}];return X[oe%X.length]};ce.useEffect(()=>{(async()=>{if(w(!0),e){const X=await Z9(e);if(X){const he=Gc(X);i(he),o(he.xml),v(he.name),x.current=he.xml,M.current=he.id}else console.warn("Projeto no encontrado:",e),t("/")}else{const X=O1;o(X),v("Novo Diagrama"),x.current=X}w(!1)})()},[e,t]),ce.useEffect(()=>{r&&x.current&&d(r!==x.current)},[r]),ce.useEffect(()=>{if(!r||!u||!n)return;const oe=setTimeout(async()=>{c(!0);try{M.current&&await Kc(M.current,{xml:r,name:m})&&(x.current=r,d(!1),p(!0),setTimeout(()=>p(!1),2e3))}catch(X){console.error("Erro no auto-save:",X)}finally{c(!1)}},500);return()=>clearTimeout(oe)},[r,u,n,m]);const N=ce.useCallback(oe=>{o(oe)},[]),P=ce.useCallback(oe=>{s(oe)},[]),j=ce.useCallback(async()=>{if(r){c(!0);try{if(M.current&&n)await Kc(M.current,{xml:r,name:m})&&(x.current=r,d(!1));else{const oe=await W1({name:m,xml:r,isTemplate:!1});if(oe){const X=Gc(oe);i(X),M.current=X.id,x.current=r,d(!1),window.history.replaceState(null,"",`/editor/${X.id}`)}}p(!0),setTimeout(()=>p(!1),2e3)}catch(oe){console.error("Erro ao salvar:",oe)}finally{c(!1)}}},[r,n,m]);ce.useEffect(()=>{const oe=X=>{(X.ctrlKey||X.metaKey)&&X.key==="s"&&(X.preventDefault(),j())};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[j]);const Y=async()=>{M.current&&n&&await Kc(M.current,{name:m}),b(!1)},ae=ce.useCallback((oe,X)=>{B.current&&B.current.setElementColor(oe,X)},[]),ke=ce.useCallback((oe,X)=>{B.current&&B.current.updateElementProperties(oe,X)},[]),Ae=async()=>{if(!me.trim()||!n)return;if(await W1({name:me.trim(),xml:O1,companyId:n.companyId,parentId:n.id,level:(n.level||0)+1,isRoot:!1,isTemplate:!1})){const X=await Bh();L(X.map(Gc)),Z(!1),ge("")}},Le=async oe=>{if(!n||!oe||!B.current)return;if(B.current.hasFlowElement(oe.id)){alert("Este fluxo j foi adicionado ao canvas!");return}if(B.current.addCallActivity(oe.id,oe.name)){const he=(oe.level||0)+1;if(await Kc(n.id,{parentId:oe.id,level:he,isRoot:!1})){i(Me=>({...Me,parentId:oe.id,level:he,isRoot:!1}));const Ne=await Bh();L(Ne.map(Gc))}}},q=async()=>{if(!n||!B.current)return;if(ee!=null&&ee.parent&&B.current.removeFlowElement(ee.parent.id),await Kc(n.id,{parentId:null,level:0,isRoot:!0})){i(he=>({...he,parentId:null,level:0,isRoot:!0}));const X=await Bh();L(X.map(Gc))}},Te=()=>{if(!r)return;const oe=new Blob([r],{type:"application/xml"}),X=URL.createObjectURL(oe),he=document.createElement("a");he.href=X,he.download=`${m.replace(/\s+/g,"_")}.bpmn`,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(X)},_e=async()=>{if(B.current){R(!0);try{const oe=await B.current.saveSVG();if(!oe)throw new Error("No foi possvel exportar o diagrama");const X=document.createElement("canvas"),he=X.getContext("2d"),se=new Image,Ne=new Blob([oe],{type:"image/svg+xml;charset=utf-8"}),Me=URL.createObjectURL(Ne);await new Promise((Ce,qe)=>{se.onload=()=>{X.width=se.width*2,X.height=se.height*2,he.fillStyle="#ffffff",he.fillRect(0,0,X.width,X.height),he.drawImage(se,0,0,X.width,X.height);const dt=X.toDataURL("image/png"),Nt=new ut({orientation:X.width>X.height?"landscape":"portrait",unit:"px",format:[X.width,X.height]});Nt.addImage(dt,"PNG",0,0,X.width,X.height),Nt.save(`${m.replace(/\s+/g,"_")}.pdf`),URL.revokeObjectURL(Me),Ce()},se.onerror=qe,se.src=Me})}catch(oe){console.error("Erro ao exportar PDF:",oe),alert("Erro ao gerar PDF. Tente novamente.")}finally{R(!1)}}};return E||!r?g.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-100",children:g.jsxs("div",{className:"flex flex-col items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 border-4 border-fyness-primary border-t-transparent rounded-full animate-spin"}),g.jsx("span",{className:"text-slate-600",children:"Carregando editor..."})]})}):g.jsxs("div",{className:"h-screen flex flex-col bg-slate-100 overflow-hidden",children:[g.jsx("header",{className:"bg-white border-b border-slate-200 shadow-sm flex-shrink-0 z-30",children:g.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{onClick:()=>t("/"),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Voltar ao Dashboard",children:g.jsx("svg",{className:"w-5 h-5 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-fyness-primary to-fyness-secondary rounded-lg flex items-center justify-center",children:g.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}),g.jsxs("button",{onClick:()=>b(!0),className:"group flex items-center gap-1 hover:bg-slate-100 px-2 py-1 rounded-lg transition-colors",children:[g.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:m}),g.jsx("svg",{className:"w-4 h-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),u&&g.jsx("span",{className:"text-xs text-amber-600 bg-amber-50 px-2 py-0.5 rounded-full",children:"No salvo"})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:()=>{window.confirm("Isso substituir o diagrama atual pelo Template Comercial. Deseja continuar?")&&B.current&&B.current.loadComercialTemplate()},className:"flex items-center gap-2 px-3 py-2 border border-purple-300 bg-purple-50 rounded-lg text-purple-600 hover:bg-purple-100 transition-colors text-sm",title:"Carregar Template Comercial",children:[g.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[g.jsx("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),g.jsx("circle",{cx:"12",cy:"5",r:"2"}),g.jsx("line",{x1:"12",y1:"7",x2:"12",y2:"11"})]}),g.jsx("span",{children:"Comercial"})]}),g.jsx("button",{onClick:_e,disabled:H,className:"flex items-center gap-2 px-3 py-2 border border-slate-300 rounded-lg text-slate-600 hover:bg-slate-50 transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:"Baixar PDF",children:H?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}),g.jsx("span",{children:"Gerando..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),g.jsx("span",{children:"PDF"})]})}),g.jsxs("button",{onClick:Te,className:"flex items-center gap-2 px-3 py-2 border border-slate-300 rounded-lg text-slate-600 hover:bg-slate-50 transition-colors text-sm",title:"Baixar XML",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),g.jsx("span",{children:"XML"})]}),g.jsx("button",{onClick:j,disabled:l||!u,className:"flex items-center gap-2 px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:l?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),g.jsx("span",{children:"Salvando..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),g.jsx("span",{children:"Salvar"})]})})]})]})}),ee&&(ee.ancestors.length>0||ee.children.length>0)&&g.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-4 py-2 flex items-center gap-2 overflow-x-auto",children:[g.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:"Hierarquia:"}),ee.ancestors.map((oe,X)=>g.jsxs("span",{className:"flex items-center gap-1 flex-shrink-0",children:[g.jsx("button",{onClick:()=>t(`/editor/${oe.id}`),className:`text-xs px-2 py-1 rounded ${T(X).light} ${T(X).text} hover:opacity-80 transition-opacity`,children:oe.name}),g.jsx("svg",{className:"w-3 h-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},oe.id)),g.jsxs("span",{className:`text-xs px-2 py-1 rounded font-semibold ${T(ee.level).bg} text-white flex-shrink-0`,children:[m," (Atual)"]}),ee.children.length>0&&g.jsxs(g.Fragment,{children:[g.jsx("svg",{className:"w-3 h-3 text-slate-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),g.jsxs("span",{className:"text-xs text-slate-500 flex-shrink-0",children:[ee.children.length," fluxo",ee.children.length!==1?"s":""," dependente",ee.children.length!==1?"s":""]})]})]}),g.jsxs("div",{className:"flex-1 flex overflow-hidden",style:{height:ee&&(ee.ancestors.length>0||ee.children.length>0)?"calc(100vh - 104px)":"calc(100vh - 64px)"},children:[g.jsx("div",{className:`bg-white border-r border-slate-200 transition-all duration-300 flex flex-col ${O?"w-64":"w-0"} overflow-hidden`,children:O&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"p-3 border-b border-slate-200 flex items-center justify-between bg-gradient-to-r from-amber-50 to-orange-50",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-7 h-7 bg-amber-500 rounded-lg flex items-center justify-center",children:g.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"})})}),g.jsx("h3",{className:"font-bold text-slate-800 text-sm",children:"Fluxos"})]}),g.jsx("button",{onClick:()=>D(!1),className:"p-1 hover:bg-white/50 rounded",children:g.jsx("svg",{className:"w-4 h-4 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto",children:[g.jsx("div",{className:"p-3 bg-blue-50 border-b border-blue-100",children:g.jsxs("p",{className:"text-[11px] text-blue-700",children:[g.jsx("strong",{children:"Clique"})," em um fluxo para adicion-lo ao canvas como pr-requisito deste fluxo."]})}),g.jsxs("div",{className:"p-2",children:[g.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Adicionar Pr-requisito"}),g.jsxs("div",{className:"space-y-1",children:[A.filter(oe=>oe.id!==(n==null?void 0:n.id)&&oe.companyId===(n==null?void 0:n.companyId)).map(oe=>{const X=oe.id===(n==null?void 0:n.parentId);return g.jsx("button",{onClick:()=>!X&&Le(oe),disabled:X,className:`w-full p-2 rounded-lg border-2 text-left transition-all group ${X?"bg-amber-50 border-amber-300 cursor-default":"bg-white border-slate-200 hover:border-amber-400 hover:bg-amber-50 hover:shadow-md cursor-pointer"}`,children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-8 h-8 rounded border-2 flex items-center justify-center flex-shrink-0 ${X?"bg-amber-100 border-amber-400":"bg-slate-50 border-slate-300 group-hover:bg-amber-100 group-hover:border-amber-400"}`,children:g.jsx("div",{className:`w-5 h-5 rounded-sm border ${X?"border-amber-500":"border-slate-400 group-hover:border-amber-500"}`,children:g.jsx("div",{className:`w-full h-full rounded-sm border ${X?"border-amber-400":"border-slate-300 group-hover:border-amber-400"}`})})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-xs font-semibold text-slate-700 truncate",children:oe.name}),X&&g.jsx("p",{className:"text-[10px] text-amber-600 font-medium",children:"Pr-requisito atual"})]}),!X&&g.jsx("svg",{className:"w-4 h-4 text-slate-300 group-hover:text-amber-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]})},oe.id)}),A.filter(oe=>oe.id!==(n==null?void 0:n.id)&&oe.companyId===(n==null?void 0:n.companyId)).length===0&&g.jsx("div",{className:"p-3 bg-slate-50 rounded-lg text-center",children:g.jsx("p",{className:"text-xs text-slate-500",children:"Nenhum outro fluxo disponvel"})})]})]}),g.jsx("div",{className:"border-t border-slate-200 my-2"}),g.jsxs("div",{className:"p-2",children:[g.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:"Status Atual"}),ee!=null&&ee.parent?g.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("span",{className:"text-[10px] font-bold text-amber-700 uppercase",children:"Pr-requisito:"}),g.jsx("button",{onClick:q,className:"text-[10px] text-red-500 hover:text-red-700 hover:underline",children:"Remover"})]}),g.jsxs("button",{onClick:()=>t(`/editor/${ee.parent.id}`),className:"w-full p-2 bg-white rounded border border-amber-300 hover:shadow-md transition-all text-left",children:[g.jsx("p",{className:"text-sm font-bold text-slate-800",children:ee.parent.name}),g.jsx("p",{className:"text-[10px] text-slate-500",children:"Clique para abrir"})]})]}):g.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),g.jsx("span",{className:"text-sm font-bold text-green-700",children:"Fluxo Raiz"})]}),g.jsx("p",{className:"text-[10px] text-green-600 mt-1",children:"Este fluxo no tem pr-requisitos"})]})]}),(ee==null?void 0:ee.children.length)>0&&g.jsxs("div",{className:"p-2 border-t border-slate-200",children:[g.jsxs("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-1",children:["Fluxos que dependem deste (",ee.children.length,")"]}),g.jsx("div",{className:"space-y-1",children:ee.children.map(oe=>g.jsx("button",{onClick:()=>t(`/editor/${oe.id}`),className:"w-full p-2 bg-slate-50 rounded-lg border border-slate-200 hover:bg-slate-100 text-left transition-all",children:g.jsx("p",{className:"text-xs font-medium text-slate-700 truncate",children:oe.name})},oe.id))})]})]})]})}),g.jsx("div",{className:"flex-1 relative h-full",children:g.jsx(Fne,{ref:B,xml:r,onXmlChange:N,onElementSelect:P,onFluxosClick:()=>D(!O),showGrid:pe,onGridToggle:()=>te(!pe),onAddImage:()=>ye(!0)})}),a&&g.jsx(Gne,{element:a,onUpdate:ke,onColorChange:ae})]}),h&&g.jsxs("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50 animate-fade-in",children:[g.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),g.jsx("span",{children:"Projeto salvo com sucesso!"})]}),_&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[g.jsx("div",{className:"p-6 border-b border-slate-200",children:g.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Renomear Projeto"})}),g.jsxs("div",{className:"p-6",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Projeto"}),g.jsx("input",{type:"text",value:m,onChange:oe=>v(oe.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",placeholder:"Digite o nome do projeto...",autoFocus:!0,onKeyDown:oe=>{oe.key==="Enter"&&Y(),oe.key==="Escape"&&b(!1)}})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[g.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),g.jsx("button",{onClick:Y,disabled:!m.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Salvar"})]})]})}),$&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[g.jsx("div",{className:"p-6 border-b border-slate-200",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 bg-fyness-primary/10 rounded-lg flex items-center justify-center",children:g.jsx("svg",{className:"w-5 h-5 text-fyness-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Criar Sub-Fluxo"}),g.jsxs("p",{className:"text-sm text-slate-500",children:["Dentro de: ",m]})]})]})}),g.jsxs("div",{className:"p-6",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Sub-Fluxo"}),g.jsx("input",{type:"text",value:me,onChange:oe=>ge(oe.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent",placeholder:"Ex: Validao de Documentos...",autoFocus:!0,onKeyDown:oe=>{oe.key==="Enter"&&me.trim()&&Ae(),oe.key==="Escape"&&(Z(!1),ge(""))}}),g.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Este fluxo ser criado como dependente do fluxo atual (Nvel ",((ee==null?void 0:ee.level)||0)+1,")"]})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[g.jsx("button",{onClick:()=>{Z(!1),ge("")},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),g.jsxs("button",{onClick:Ae,disabled:!me.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Criar Sub-Fluxo"]})]})]})}),le&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[g.jsx("div",{className:"p-6 border-b border-slate-200",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:g.jsxs("svg",{className:"w-5 h-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[g.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2",strokeWidth:2}),g.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5",strokeWidth:2}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 15l-5-5L5 21"})]})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Adicionar Imagem"}),g.jsx("p",{className:"text-sm text-slate-500",children:"Selecione uma imagem do computador"})]})]})}),g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Selecionar Imagem"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"file",accept:"image/*",onChange:oe=>{var he;const X=(he=oe.target.files)==null?void 0:he[0];if(X){const se=new FileReader;se.onload=Ne=>{I(Ne.target.result)},se.readAsDataURL(X)}},className:"hidden",id:"image-upload"}),g.jsx("label",{htmlFor:"image-upload",className:"flex items-center justify-center gap-3 w-full px-4 py-6 border-2 border-dashed border-slate-300 rounded-lg cursor-pointer hover:border-green-500 hover:bg-green-50 transition-colors",children:we?g.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),g.jsx("span",{className:"text-sm font-medium",children:"Imagem selecionada - clique para trocar"})]}):g.jsxs(g.Fragment,{children:[g.jsx("svg",{className:"w-8 h-8 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),g.jsxs("div",{className:"text-center",children:[g.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Clique para selecionar"}),g.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPG, GIF at 10MB"})]})]})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Formato"}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsxs("button",{type:"button",onClick:()=>K("square"),className:`p-3 border-2 rounded-lg flex flex-col items-center gap-2 transition-all ${z==="square"?"border-green-500 bg-green-50":"border-slate-200 hover:border-slate-300"}`,children:[g.jsx("div",{className:"w-10 h-10 bg-slate-300 rounded-none"}),g.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Quadrado"})]}),g.jsxs("button",{type:"button",onClick:()=>K("rounded"),className:`p-3 border-2 rounded-lg flex flex-col items-center gap-2 transition-all ${z==="rounded"?"border-green-500 bg-green-50":"border-slate-200 hover:border-slate-300"}`,children:[g.jsx("div",{className:"w-10 h-10 bg-slate-300 rounded-lg"}),g.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Arredondado"})]}),g.jsxs("button",{type:"button",onClick:()=>K("circle"),className:`p-3 border-2 rounded-lg flex flex-col items-center gap-2 transition-all ${z==="circle"?"border-green-500 bg-green-50":"border-slate-200 hover:border-slate-300"}`,children:[g.jsx("div",{className:"w-10 h-10 bg-slate-300 rounded-full"}),g.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Redondo"})]})]})]}),we&&g.jsxs("div",{className:"mt-4",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Pr-visualizao"}),g.jsx("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50 flex items-center justify-center",children:g.jsx("img",{src:we,alt:"Preview",className:`w-24 h-24 object-cover ${z==="circle"?"rounded-full":z==="rounded"?"rounded-xl":"rounded-none"}`})}),g.jsx("p",{className:"text-xs text-slate-500 mt-2 text-center",children:"Arraste os cantos da imagem no canvas para redimensionar"})]})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-end",children:[g.jsx("button",{onClick:()=>{ye(!1),I(""),K("square")},className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),g.jsxs("button",{onClick:()=>{B.current&&we&&B.current.addImageOverlay(we,300,300,z),ye(!1),I(""),K("square")},disabled:!we,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Imagem"]})]})]})}),g.jsxs("div",{className:"fixed bottom-4 right-4 text-xs text-slate-400 z-20",children:[g.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-200 rounded text-slate-600",children:"Ctrl"})," + ",g.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-200 rounded text-slate-600",children:"S"})," para salvar"]})]})}const Fb=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0),Une=e=>{const t=Math.floor(e/60),n=e%60;return`${t}h ${n}m`};function y0({title:e,value:t,subtitle:n,icon:i,color:r="blue",href:o}){const a={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",orange:"bg-orange-50 text-orange-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"},s=g.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 hover:shadow-md transition-shadow",children:g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-slate-500 font-medium",children:e}),g.jsx("p",{className:"text-2xl font-bold text-slate-800 mt-1",children:t}),n&&g.jsx("p",{className:"text-sm text-slate-500 mt-1",children:n})]}),i&&g.jsx("div",{className:`p-3 rounded-lg ${a[r]}`,children:g.jsx(i,{})})]})});return o?g.jsx(Hc,{to:o,children:s}):s}const qne=()=>g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),zne=()=>g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Hne=()=>g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Vne=()=>g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})});function Wne(){var c;const e={full_name:"Admin"},[t,n]=ce.useState({tasksInProgress:0,tasksDone:0,hoursWorked:0,totalCost:0,eventsToday:0,meetingCostToday:0}),[i,r]=ce.useState([]),[o,a]=ce.useState([]),[s,l]=ce.useState(!0);return ce.useEffect(()=>{l(!1)},[]),s?g.jsx("div",{className:"flex items-center justify-center h-64",children:g.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Ola, ",((c=e==null?void 0:e.full_name)==null?void 0:c.split(" ")[0])||"Usuario","!"]}),g.jsx("p",{className:"text-slate-500",children:"Aqui esta um resumo do seu dia"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[g.jsx(y0,{title:"Tarefas em Andamento",value:t.tasksInProgress,subtitle:`${t.tasksDone} concluidas`,icon:qne,color:"blue",href:"/routine"}),g.jsx(y0,{title:"Tempo Trabalhado",value:Une(t.hoursWorked),subtitle:"Esta semana",icon:zne,color:"green"}),g.jsx(y0,{title:"Custo Total",value:Fb(t.totalCost),subtitle:"Esta semana",icon:Hne,color:"purple"}),g.jsx(y0,{title:"Reunioes Hoje",value:t.eventsToday,subtitle:Fb(t.meetingCostToday),icon:Vne,color:"orange",href:"/agenda"})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[g.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[g.jsx("h3",{className:"font-semibold text-slate-800",children:"Tarefas Recentes"}),g.jsx(Hc,{to:"/routine",className:"text-sm text-blue-600 hover:text-blue-700",children:"Ver todas"})]}),g.jsx("div",{className:"divide-y divide-slate-100",children:i.length===0?g.jsx("div",{className:"p-8 text-center text-slate-500",children:"Nenhuma tarefa encontrada"}):i.map(u=>g.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:g.jsxs("div",{className:"flex items-start justify-between gap-4",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-medium text-slate-800",children:u.title}),g.jsx("p",{className:"text-sm text-slate-500 truncate",children:u.description})]}),g.jsx("span",{className:`
                      px-2 py-1 text-xs font-medium rounded
                      ${u.status==="done"?"bg-green-100 text-green-700":u.status==="doing"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"}
                    `,children:u.status==="done"?"Concluido":u.status==="doing"?"Em andamento":u.status==="blocked"?"Bloqueado":"A fazer"})]})},u.id))})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[g.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[g.jsx("h3",{className:"font-semibold text-slate-800",children:"Agenda de Hoje"}),g.jsx(Hc,{to:"/agenda",className:"text-sm text-blue-600 hover:text-blue-700",children:"Ver agenda"})]}),g.jsx("div",{className:"divide-y divide-slate-100",children:o.length===0?g.jsx("div",{className:"p-8 text-center text-slate-500",children:"Nenhum evento hoje"}):o.map(u=>g.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:g.jsxs("div",{className:"flex items-start justify-between gap-4",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-sm font-medium text-slate-800",children:new Date(u.start_datetime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),g.jsx("span",{className:"text-slate-300",children:"-"}),g.jsx("span",{className:"text-sm text-slate-500",children:new Date(u.end_datetime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),g.jsx("h4",{className:"font-medium text-slate-800",children:u.title}),u.event_participants&&g.jsxs("p",{className:"text-sm text-slate-500",children:[u.event_participants.length," participante(s)"]})]}),g.jsx("span",{className:"text-sm font-medium text-purple-600",children:Fb(u.total_cost)})]})},u.id))})]})]}),g.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-6 text-white",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Acoes Rapidas"}),g.jsxs("div",{className:"flex flex-wrap gap-3",children:[g.jsx(Hc,{to:"/routine",className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors text-sm font-medium",children:"+ Nova Tarefa"}),g.jsx(Hc,{to:"/agenda",className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors text-sm font-medium",children:"+ Novo Evento"}),g.jsx(Hc,{to:"/sales",className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors text-sm font-medium",children:"Ver Fluxos BPMN"})]})]})]})}const Kne=()=>g.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),Yne=()=>g.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})}),Jne=()=>g.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),Xne=()=>g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Zne={low:"bg-slate-100 text-slate-600",medium:"bg-blue-100 text-blue-700",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"},Qne={low:"Baixa",medium:"Media",high:"Alta",urgent:"Urgente"},KT=e=>{if(!e||e<=0)return"0h 0m";const t=Math.floor(e/60),n=e%60;return t>0?`${t}h ${n}m`:`${n}m`},YT=e=>e==null?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);function eie({task:e,onUpdate:t,onStartTimer:n,onStopTimer:i,isDragging:r=!1,className:o=""}){var H,R,O;const a={id:"temp-user"},[s,l]=ce.useState(e.is_timer_running||!1),[c,u]=ce.useState(e.actual_time||0),[d,h]=ce.useState(null),[p,m]=ce.useState(!1),v=e.estimated_time||0,_=v>0?Math.min(c/v*100,100):0,b=c>v&&v>0,E=v>0?(c-v)/v*100:0;ce.useEffect(()=>{let D;return s&&e.timer_started_at&&(D=setInterval(()=>{const A=new Date(e.timer_started_at),$=Math.floor((new Date-A)/6e4);u((e.actual_time||0)+$)},1e3)),()=>{D&&clearInterval(D)}},[s,e.timer_started_at,e.actual_time]),ce.useEffect(()=>{l(e.is_timer_running||!1),e.is_timer_running||u(e.actual_time||0)},[e.is_timer_running,e.actual_time]);const w=ce.useCallback(async()=>{if(!p){m(!0);try{const{data:D,error:A}=await Li.from("time_entries").insert({task_id:e.id,user_id:a.id,start_time:new Date().toISOString()}).select().single();if(A)throw A;h(D.id);const{error:L}=await Li.from("tasks").update({is_timer_running:!0,timer_started_at:new Date().toISOString(),status:e.status==="todo"?"doing":e.status}).eq("id",e.id);if(L)throw L;l(!0),n&&n(e.id,D.id),t&&t()}catch(D){console.error("Erro ao iniciar timer:",D),alert("Erro ao iniciar timer: "+D.message)}finally{m(!1)}}},[e,a,n,t,p]),x=ce.useCallback(async()=>{if(!p){m(!0);try{const D=d||await M();if(D){const{data:A,error:L}=await Li.rpc("stop_time_entry",{entry_id:D});L&&await Li.from("time_entries").update({end_time:new Date().toISOString()}).eq("id",D)}await Li.from("tasks").update({is_timer_running:!1,timer_started_at:null}).eq("id",e.id),l(!1),h(null),i&&i(e.id),t&&t()}catch(D){console.error("Erro ao parar timer:",D),alert("Erro ao parar timer: "+D.message)}finally{m(!1)}}},[e,d,i,t,p]),M=async()=>{const{data:D}=await Li.from("time_entries").select("id").eq("task_id",e.id).is("end_time",null).order("start_time",{ascending:!1}).limit(1).single();return D==null?void 0:D.id},B=["bg-white rounded-lg shadow-sm border-2 transition-all duration-200",r?"opacity-50 rotate-2 scale-105":"",b?"border-red-500 shadow-red-100":"border-transparent hover:border-blue-300",s?"ring-2 ring-green-500 ring-opacity-50":"",o].filter(Boolean).join(" ");return g.jsxs("div",{className:B,children:[g.jsxs("div",{className:"p-3 pb-2",children:[g.jsxs("div",{className:"flex items-start justify-between gap-2",children:[g.jsx("h3",{className:"font-medium text-slate-800 text-sm leading-tight flex-1",children:e.title}),g.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${Zne[e.priority]}`,children:Qne[e.priority]})]}),e.description&&g.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-2",children:e.description})]}),g.jsx("div",{className:"px-3",children:g.jsx("div",{className:"h-1.5 bg-slate-100 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full transition-all duration-300 ${b?"bg-red-500":_>80?"bg-orange-500":"bg-blue-500"}`,style:{width:`${Math.min(_,100)}%`}})})}),g.jsx("div",{className:"px-3 pt-2",children:g.jsxs("div",{className:"flex items-center justify-between text-xs",children:[g.jsxs("div",{className:"flex items-center gap-1 text-slate-600",children:[g.jsx(Xne,{}),g.jsx("span",{className:s?"text-green-600 font-medium":"",children:KT(c)}),g.jsx("span",{className:"text-slate-400",children:"/"}),g.jsx("span",{children:KT(v)})]}),b&&g.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[g.jsx(Jne,{}),g.jsxs("span",{className:"font-medium",children:["+",Math.round(E),"%"]})]})]})}),g.jsx("div",{className:"px-3 pt-1",children:g.jsxs("div",{className:"flex items-center justify-between text-xs",children:[g.jsx("span",{className:"text-slate-500",children:"Custo:"}),g.jsxs("div",{children:[g.jsx("span",{className:`font-medium ${b?"text-red-600":"text-slate-700"}`,children:YT(e.actual_cost||0)}),e.estimated_cost>0&&g.jsxs("span",{className:"text-slate-400 ml-1",children:["/ ",YT(e.estimated_cost)]})]})]})}),g.jsxs("div",{className:"p-3 pt-2 border-t border-slate-100 mt-2",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[(H=e.assigned_profile)!=null&&H.avatar_url?g.jsx("img",{src:e.assigned_profile.avatar_url,alt:e.assigned_profile.full_name,className:"w-6 h-6 rounded-full"}):g.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs font-medium text-slate-600",children:(((R=e.assigned_profile)==null?void 0:R.full_name)||"?")[0].toUpperCase()}),g.jsx("span",{className:"text-xs text-slate-500 truncate max-w-[80px]",children:((O=e.assigned_profile)==null?void 0:O.full_name)||"Sem responsavel"})]}),g.jsx("div",{className:"flex items-center gap-1",children:s?g.jsx("button",{onClick:x,disabled:p,className:"p-1.5 rounded-full bg-red-100 text-red-600 hover:bg-red-200 transition-colors disabled:opacity-50",title:"Parar timer",children:g.jsx(Yne,{})}):g.jsx("button",{onClick:w,disabled:p||e.status==="done",className:"p-1.5 rounded-full bg-green-100 text-green-600 hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.status==="done"?"Task finalizada":"Iniciar timer",children:g.jsx(Kne,{})})})]}),e.due_date&&g.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Prazo: ",new Date(e.due_date).toLocaleDateString("pt-BR")]})]}),s&&g.jsxs("div",{className:"absolute top-0 right-0 w-3 h-3",children:[g.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75 animate-ping"}),g.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]})}const JT=[{id:"todo",title:"A Fazer",color:"bg-slate-500"},{id:"doing",title:"Em Andamento",color:"bg-blue-500"},{id:"done",title:"Concluido",color:"bg-green-500"}],tie=()=>g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})});function nie(){const e={id:"temp-user"},[t,n]=ce.useState([]),[i,r]=ce.useState(!0),[o,a]=ce.useState(!1),[s,l]=ce.useState({title:"",description:"",priority:"medium",estimated_time:60}),c=ce.useCallback(async()=>{try{const{data:p,error:m}=await Li.from("tasks").select(`
          *,
          assigned_profile:profiles!tasks_assigned_to_fkey (
            id,
            full_name,
            avatar_url
          )
        `).or(`assigned_to.eq.${e.id},created_by.eq.${e.id}`).order("order_index",{ascending:!0});if(m)throw m;n(p||[])}catch(p){console.error("Erro ao carregar tarefas:",p)}finally{r(!1)}},[e==null?void 0:e.id]);ce.useEffect(()=>{c()},[c]);const u=async p=>{p.preventDefault();try{const{error:m}=await Li.from("tasks").insert({title:s.title,description:s.description,priority:s.priority,estimated_time:s.estimated_time,status:"todo",assigned_to:e.id,created_by:e.id});if(m)throw m;a(!1),l({title:"",description:"",priority:"medium",estimated_time:60}),c()}catch(m){console.error("Erro ao criar tarefa:",m),alert("Erro ao criar tarefa: "+m.message)}},d=async(p,m)=>{try{const{error:v}=await Li.from("tasks").update({status:m}).eq("id",p);if(v)throw v;c()}catch(v){console.error("Erro ao mover tarefa:",v)}},h=p=>t.filter(m=>m.status===p);return i?g.jsx("div",{className:"flex items-center justify-center h-64",children:g.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Minha Rotina"}),g.jsx("p",{className:"text-slate-500",children:"Gerencie suas tarefas e controle seu tempo"})]}),g.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[g.jsx(tie,{}),"Nova Tarefa"]})]}),g.jsx("div",{className:"flex-1 flex gap-4 overflow-x-auto pb-4",children:JT.map(p=>g.jsxs("div",{className:"flex-1 min-w-[300px] max-w-[400px] bg-slate-100 rounded-xl p-4",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.jsx("div",{className:`w-3 h-3 rounded-full ${p.color}`}),g.jsx("h3",{className:"font-semibold text-slate-700",children:p.title}),g.jsx("span",{className:"ml-auto px-2 py-0.5 bg-white rounded-full text-xs font-medium text-slate-600",children:h(p.id).length})]}),g.jsxs("div",{className:"space-y-3",children:[h(p.id).map(m=>g.jsx(eie,{task:m,onUpdate:c},m.id)),h(p.id).length===0&&g.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Nenhuma tarefa"}),p.id!=="done"&&h(p.id).length>0&&g.jsxs("div",{className:"pt-2 border-t border-slate-200 mt-4",children:[g.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Mover para:"}),g.jsx("div",{className:"flex gap-2",children:JT.filter(m=>m.id!==p.id).map(m=>g.jsx("button",{onClick:()=>{const v=h(p.id)[0];v&&d(v.id,m.id)},className:"flex-1 py-1 text-xs text-slate-600 bg-white rounded hover:bg-slate-50 transition-colors",children:m.title},m.id))})]})]})]},p.id))}),o&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:[g.jsx("div",{className:"p-4 border-b border-slate-200",children:g.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Nova Tarefa"})}),g.jsxs("form",{onSubmit:u,className:"p-4 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Titulo"}),g.jsx("input",{type:"text",value:s.title,onChange:p=>l({...s,title:p.target.value}),required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Revisar relatorio mensal"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descricao"}),g.jsx("textarea",{value:s.description,onChange:p=>l({...s,description:p.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Detalhes da tarefa..."})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Prioridade"}),g.jsxs("select",{value:s.priority,onChange:p=>l({...s,priority:p.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[g.jsx("option",{value:"low",children:"Baixa"}),g.jsx("option",{value:"medium",children:"Media"}),g.jsx("option",{value:"high",children:"Alta"}),g.jsx("option",{value:"urgent",children:"Urgente"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tempo Estimado (min)"}),g.jsx("input",{type:"number",value:s.estimated_time,onChange:p=>l({...s,estimated_time:parseInt(p.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),g.jsxs("div",{className:"flex gap-3 pt-4",children:[g.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors",children:"Cancelar"}),g.jsx("button",{type:"submit",className:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Criar Tarefa"})]})]})]})})]})}const zL="agenda_events",bs=[{id:"1",name:"Admin",color:"#6366f1"},{id:"2",name:"Operador 1",color:"#22c55e"},{id:"3",name:"Operador 2",color:"#f97316"},{id:"4",name:"Operador 3",color:"#ec4899"}],KE=[{id:"meeting",label:"Reuniao",color:"#6366f1"},{id:"os",label:"Ordem de Servico",color:"#f97316"},{id:"task",label:"Tarefa",color:"#22c55e"},{id:"personal",label:"Pessoal",color:"#64748b"}],HL=Array.from({length:16},(e,t)=>t+7),YE=["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],Rh=["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];function M_(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function iie(e,t){const n=new Date(e,t,1),i=new Date(e,t+1,0),r=n.getDay(),o=[];for(let s=r-1;s>=0;s--){const l=new Date(e,t,-s);o.push({date:l,isCurrentMonth:!1})}for(let s=1;s<=i.getDate();s++)o.push({date:new Date(e,t,s),isCurrentMonth:!0});const a=42-o.length;for(let s=1;s<=a;s++)o.push({date:new Date(e,t+1,s),isCurrentMonth:!1});return o}function VL(e){const t=new Date(e);return t.setDate(t.getDate()-t.getDay()),Array.from({length:7},(n,i)=>{const r=new Date(t);return r.setDate(r.getDate()+i),r})}function wu(e){return e.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}function fd(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}function rie(){const e=new Date,t=e.getFullYear(),n=e.getMonth(),i=e.getDate();e.getDay();const r=(o,a,s=0)=>new Date(t,n,i+o,a,s).toISOString();return[{id:"seed_1",title:"Daily Standup",description:"Alinhamento diario da equipe",startDate:r(0,9,0),endDate:r(0,9,30),assignee:"1",type:"meeting",color:"#6366f1",createdAt:r(-1,8)},{id:"seed_2",title:"O.S. #142 - Manutencao Servidor",description:"Atualizar pacotes e reiniciar servicos",startDate:r(0,10,0),endDate:r(0,12,0),assignee:"2",type:"os",color:"#f97316",createdAt:r(-1,8)},{id:"seed_3",title:"Revisar proposta comercial",description:"Cliente Acme Corp - contrato anual",startDate:r(0,14,0),endDate:r(0,15,0),assignee:"1",type:"task",color:"#22c55e",createdAt:r(-1,8)},{id:"seed_4",title:"O.S. #143 - Deploy Frontend",description:"Deploy da versao 2.1 em producao",startDate:r(0,15,30),endDate:r(0,16,30),assignee:"3",type:"os",color:"#f97316",createdAt:r(-1,8)},{id:"seed_5",title:"Reuniao com cliente",description:"Apresentacao do projeto BPMN",startDate:r(1,10,0),endDate:r(1,11,30),assignee:"1",type:"meeting",color:"#6366f1",createdAt:r(-1,8)},{id:"seed_6",title:"O.S. #144 - Corrigir bug login",description:"Bug reportado pelo cliente - tela branca apos login",startDate:r(1,13,0),endDate:r(1,15,0),assignee:"2",type:"os",color:"#f97316",createdAt:r(-1,8)},{id:"seed_7",title:"Treino da equipe",description:"Workshop sobre boas praticas React",startDate:r(1,16,0),endDate:r(1,17,30),assignee:"4",type:"task",color:"#22c55e",createdAt:r(-1,8)},{id:"seed_8",title:"Sprint Planning",description:"Planejamento da sprint 14",startDate:r(2,9,0),endDate:r(2,10,30),assignee:"1",type:"meeting",color:"#6366f1",createdAt:r(-1,8)},{id:"seed_9",title:"O.S. #145 - Configurar backup",description:"Configurar backup automatico do banco",startDate:r(2,11,0),endDate:r(2,13,0),assignee:"3",type:"os",color:"#f97316",createdAt:r(-1,8)},{id:"seed_10",title:"Retrospectiva Sprint 13",description:"O que foi bom, o que melhorar",startDate:r(5,14,0),endDate:r(5,15,0),assignee:"1",type:"meeting",color:"#6366f1",createdAt:r(-1,8)},{id:"seed_11",title:"O.S. #146 - Migrar banco de dados",description:"Migrar tabelas para novo schema",startDate:r(5,9,0),endDate:r(5,12,0),assignee:"2",type:"os",color:"#f97316",createdAt:r(-1,8)},{id:"seed_12",title:"Almoco de integracao",description:"Confraternizacao mensal da equipe",startDate:r(6,12,0),endDate:r(6,13,30),assignee:"4",type:"personal",color:"#64748b",createdAt:r(-1,8)},{id:"seed_13",title:"O.S. #140 - Setup ambiente",description:"Configurar ambiente de desenvolvimento novo colaborador",startDate:r(-2,9,0),endDate:r(-2,11,0),assignee:"3",type:"os",color:"#f97316",createdAt:r(-3,8)},{id:"seed_14",title:"Reuniao de resultados",description:"Apresentacao de KPIs do mes",startDate:r(-1,15,0),endDate:r(-1,16,0),assignee:"1",type:"meeting",color:"#6366f1",createdAt:r(-3,8)}]}function oie(){try{const e=JSON.parse(localStorage.getItem(zL)||"null");if(e===null){const t=rie();return WL(t),t}return e}catch{return[]}}function WL(e){localStorage.setItem(zL,JSON.stringify(e))}function aie(){const e=new Date,[t,n]=ce.useState([]),[i,r]=ce.useState(e),[o,a]=ce.useState("month"),[s,l]=ce.useState(!1),[c,u]=ce.useState(null),[d,h]=ce.useState(null),[p,m]=ce.useState(bs.map(A=>A.id)),v=A=>{m(L=>L.includes(A)?L.length===1?bs.map($=>$.id):L.filter($=>$!==A):[...L,A])},[_,b]=ce.useState({title:"",description:"",startDate:fd(e),startTime:"09:00",endDate:fd(e),endTime:"10:00",assignee:"1",type:"task"});ce.useEffect(()=>{n(oie())},[]);const E=ce.useCallback(A=>{n(A),WL(A)},[]),w=A=>{const L=fd(A||i);u(null),b({title:"",description:"",startDate:L,startTime:"09:00",endDate:L,endTime:"10:00",assignee:"1",type:"task"}),l(!0)},x=A=>{const L=new Date(A.startDate),$=new Date(A.endDate);u(A),b({title:A.title,description:A.description||"",startDate:fd(L),startTime:wu(L),endDate:fd($),endTime:wu($),assignee:A.assignee||"1",type:A.type||"task"}),l(!0)},M=()=>{if(!_.title.trim())return;const A=new Date(`${_.startDate}T${_.startTime}:00`),L=new Date(`${_.endDate}T${_.endTime}:00`),$=KE.find(Z=>Z.id===_.type);if(c){const Z=t.map(me=>me.id===c.id?{...me,title:_.title,description:_.description,startDate:A.toISOString(),endDate:L.toISOString(),assignee:_.assignee,type:_.type,color:$.color}:me);E(Z)}else{const Z={id:`evt_${Date.now()}`,title:_.title,description:_.description,startDate:A.toISOString(),endDate:L.toISOString(),assignee:_.assignee,type:_.type,color:$.color,createdAt:new Date().toISOString()};E([...t,Z])}l(!1)},B=A=>{E(t.filter(L=>L.id!==A)),h(null),l(!1)},H=A=>{const L=new Date(i);o==="month"?L.setMonth(L.getMonth()+A):o==="week"?L.setDate(L.getDate()+A*7):L.setDate(L.getDate()+A),r(L)},R=()=>r(new Date),O=ce.useCallback(A=>t.filter(L=>{const $=new Date(L.startDate);return M_($,A)&&p.includes(L.assignee)}),[t,p]),D=ce.useMemo(()=>{if(o==="month")return`${Rh[i.getMonth()]} ${i.getFullYear()}`;if(o==="week"){const A=VL(i),L=A[0],$=A[6];return L.getMonth()===$.getMonth()?`${L.getDate()} - ${$.getDate()} ${Rh[L.getMonth()]} ${L.getFullYear()}`:`${L.getDate()} ${Rh[L.getMonth()].slice(0,3)} - ${$.getDate()} ${Rh[$.getMonth()].slice(0,3)} ${$.getFullYear()}`}return`${i.getDate()} de ${Rh[i.getMonth()]} de ${i.getFullYear()}`},[i,o]);return g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("button",{onClick:()=>w(),className:"flex items-center gap-2 px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors text-sm font-medium shadow-sm",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Novo Evento"]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:()=>H(-1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx("svg",{className:"w-4 h-4 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),g.jsx("button",{onClick:R,className:"px-3 py-1.5 text-sm font-medium text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:"Hoje"}),g.jsx("button",{onClick:()=>H(1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx("svg",{className:"w-4 h-4 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),g.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:D})]}),g.jsx("div",{className:"flex items-center bg-slate-100 rounded-lg p-0.5",children:["month","week","day"].map(A=>g.jsx("button",{onClick:()=>a(A),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${o===A?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:A==="month"?"Mes":A==="week"?"Semana":"Dia"},A))})]}),g.jsxs("div",{className:"flex-1 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[o==="month"&&g.jsx(sie,{currentDate:i,today:e,getEventsForDay:O,onDayClick:A=>{r(A),a("day")},onEventClick:x}),o==="week"&&g.jsx(lie,{currentDate:i,today:e,getEventsForDay:O,onEventClick:x,onSlotClick:A=>w(A)}),o==="day"&&g.jsx(cie,{currentDate:i,today:e,getEventsForDay:O,onEventClick:x,onSlotClick:()=>w(i)})]}),g.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs",children:[g.jsx("span",{className:"font-medium text-slate-500 mr-1",children:"Filtrar:"}),bs.map(A=>{const L=p.includes(A.id);return g.jsxs("button",{onClick:()=>v(A.id),className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full border transition-all ${L?"border-transparent text-white shadow-sm":"border-slate-200 text-slate-400 bg-white"}`,style:L?{backgroundColor:A.color}:{},children:[g.jsx("div",{className:`w-2 h-2 rounded-full ${L?"bg-white/80":""}`,style:L?{}:{backgroundColor:A.color}}),g.jsx("span",{className:"font-medium",children:A.name})]},A.id)}),p.length<bs.length&&g.jsx("button",{onClick:()=>m(bs.map(A=>A.id)),className:"px-2 py-1 text-slate-400 hover:text-slate-600 transition-colors",children:"Mostrar todos"})]}),s&&g.jsx(uie,{form:_,setForm:b,editing:!!c,onSave:M,onClose:()=>l(!1),onDelete:()=>h(c==null?void 0:c.id)}),d&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full mx-4 overflow-hidden",children:[g.jsxs("div",{className:"p-6",children:[g.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),g.jsx("h3",{className:"text-lg font-semibold text-slate-800 text-center mb-2",children:"Excluir Evento?"}),g.jsx("p",{className:"text-sm text-slate-500 text-center",children:"Esta acao nao pode ser desfeita."})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-center",children:[g.jsx("button",{onClick:()=>h(null),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),g.jsx("button",{onClick:()=>B(d),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Excluir"})]})]})})]})}function sie({currentDate:e,today:t,getEventsForDay:n,onDayClick:i,onEventClick:r}){const o=ce.useMemo(()=>iie(e.getFullYear(),e.getMonth()),[e]);return g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsx("div",{className:"grid grid-cols-7 border-b border-slate-200",children:YE.map(a=>g.jsx("div",{className:"px-2 py-2 text-center text-xs font-semibold text-slate-500 uppercase",children:a},a))}),g.jsx("div",{className:"flex-1 grid grid-cols-7 grid-rows-6",children:o.map(({date:a,isCurrentMonth:s},l)=>{const c=n(a),u=M_(a,t);return g.jsxs("div",{onClick:()=>i(a),className:`border-b border-r border-slate-100 p-1 min-h-[80px] cursor-pointer hover:bg-slate-50 transition-colors ${s?"":"bg-slate-50/50"}`,children:[g.jsx("div",{className:`text-xs font-medium mb-1 w-6 h-6 flex items-center justify-center rounded-full ${u?"bg-fyness-primary text-white":s?"text-slate-700":"text-slate-400"}`,children:a.getDate()}),g.jsxs("div",{className:"space-y-0.5",children:[c.slice(0,3).map(d=>{const h=bs.find(p=>p.id===d.assignee);return g.jsxs("div",{onClick:p=>{p.stopPropagation(),r(d)},className:"text-[10px] px-1.5 py-0.5 rounded truncate text-white font-medium cursor-pointer hover:opacity-80 transition-opacity",style:{backgroundColor:d.color||"#6366f1"},title:`${d.title} - ${(h==null?void 0:h.name)||""}`,children:[wu(new Date(d.startDate))," ",d.title]},d.id)}),c.length>3&&g.jsxs("div",{className:"text-[10px] text-slate-500 font-medium px-1",children:["+",c.length-3," mais"]})]})]},l)})})]})}function lie({currentDate:e,today:t,getEventsForDay:n,onEventClick:i,onSlotClick:r}){const o=ce.useMemo(()=>VL(e),[e]);return g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] border-b border-slate-200",children:[g.jsx("div",{className:"border-r border-slate-200"}),o.map((a,s)=>{const l=M_(a,t);return g.jsxs("div",{className:"px-2 py-2 text-center border-r border-slate-100",children:[g.jsx("div",{className:"text-xs text-slate-500 uppercase",children:YE[a.getDay()]}),g.jsx("div",{className:`text-lg font-semibold mt-0.5 w-8 h-8 flex items-center justify-center rounded-full mx-auto ${l?"bg-fyness-primary text-white":"text-slate-800"}`,children:a.getDate()})]},s)})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:g.jsx("div",{className:"grid grid-cols-[60px_repeat(7,1fr)]",children:HL.map(a=>g.jsxs("div",{className:"contents",children:[g.jsx("div",{className:"h-14 border-r border-b border-slate-100 flex items-start justify-end pr-2 pt-0.5",children:g.jsxs("span",{className:"text-[10px] text-slate-400 font-medium",children:[String(a).padStart(2,"0"),":00"]})}),o.map((s,l)=>{const u=n(s).filter(d=>new Date(d.startDate).getHours()===a);return g.jsx("div",{onClick:()=>{const d=new Date(s);d.setHours(a,0,0,0),r(d)},className:"h-14 border-r border-b border-slate-100 relative cursor-pointer hover:bg-blue-50/30 transition-colors",children:u.map(d=>{const h=new Date(d.startDate),p=new Date(d.endDate),m=Math.max((p-h)/36e5,.5),v=h.getMinutes()/60*56,_=Math.min(m*56,56*4),b=bs.find(E=>E.id===d.assignee);return g.jsxs("div",{onClick:E=>{E.stopPropagation(),i(d)},className:"absolute left-0.5 right-0.5 rounded px-1.5 py-0.5 text-white text-[10px] overflow-hidden cursor-pointer hover:opacity-90 transition-opacity z-10 shadow-sm",style:{backgroundColor:d.color||"#6366f1",top:`${v}px`,height:`${_}px`,minHeight:"20px"},title:`${d.title} - ${(b==null?void 0:b.name)||""}`,children:[g.jsx("div",{className:"font-semibold truncate",children:d.title}),g.jsxs("div",{className:"opacity-80 truncate",children:[wu(h)," - ",wu(p)]}),b&&g.jsx("div",{className:"opacity-70 truncate",children:b.name})]},d.id)})},l)})]},a))})})]})}function cie({currentDate:e,today:t,getEventsForDay:n,onEventClick:i,onSlotClick:r}){const o=ce.useMemo(()=>n(e),[n,e]),a=M_(e,t);return g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 flex items-center gap-3",children:[g.jsxs("div",{className:`w-12 h-12 rounded-full flex flex-col items-center justify-center ${a?"bg-fyness-primary text-white":"bg-slate-100 text-slate-700"}`,children:[g.jsx("span",{className:"text-[10px] uppercase leading-none",children:YE[e.getDay()]}),g.jsx("span",{className:"text-lg font-bold leading-none",children:e.getDate()})]}),g.jsx("div",{children:g.jsxs("span",{className:"text-sm text-slate-500",children:[o.length," evento",o.length!==1?"s":""]})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:g.jsx("div",{className:"grid grid-cols-[60px_1fr]",children:HL.map(s=>{const l=o.filter(c=>new Date(c.startDate).getHours()===s);return g.jsxs("div",{className:"contents",children:[g.jsx("div",{className:"h-16 border-r border-b border-slate-100 flex items-start justify-end pr-2 pt-1",children:g.jsxs("span",{className:"text-xs text-slate-400 font-medium",children:[String(s).padStart(2,"0"),":00"]})}),g.jsx("div",{onClick:r,className:"h-16 border-b border-slate-100 relative cursor-pointer hover:bg-blue-50/30 transition-colors",children:l.map(c=>{const u=new Date(c.startDate),d=new Date(c.endDate),h=(d-u)/6e4,p=u.getMinutes()/60*64,m=Math.max(h/60*64,28),v=bs.find(b=>b.id===c.assignee),_=KE.find(b=>b.id===c.type);return g.jsxs("div",{onClick:b=>{b.stopPropagation(),i(c)},className:"absolute left-1 right-4 rounded-lg px-3 py-1.5 text-white overflow-hidden cursor-pointer hover:opacity-90 transition-opacity z-10 shadow-sm",style:{backgroundColor:c.color||"#6366f1",top:`${p}px`,minHeight:`${m}px`},children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx("span",{className:"font-semibold text-sm truncate",children:c.title}),_&&g.jsx("span",{className:"text-[10px] bg-white/20 px-1.5 py-0.5 rounded-full whitespace-nowrap",children:_.label})]}),g.jsxs("div",{className:"text-xs opacity-80 mt-0.5",children:[wu(u)," - ",wu(d),v&&g.jsx("span",{className:"ml-2",children:v.name})]}),c.description&&g.jsx("div",{className:"text-xs opacity-70 mt-0.5 truncate",children:c.description})]},c.id)})})]},s)})})})]})}function uie({form:e,setForm:t,editing:n,onSave:i,onClose:r,onDelete:o}){const a=(s,l)=>t(c=>({...c,[s]:l}));return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4 overflow-hidden",children:[g.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[g.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:n?"Editar Evento":"Novo Evento"}),g.jsx("button",{onClick:r,className:"p-1 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Titulo"}),g.jsx("input",{type:"text",value:e.title,onChange:s=>a("title",s.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm",placeholder:"Ex: Reuniao de equipe",autoFocus:!0,onKeyDown:s=>{s.key==="Enter"&&i(),s.key==="Escape"&&r()}})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Data Inicio"}),g.jsx("input",{type:"date",value:e.startDate,onChange:s=>a("startDate",s.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hora Inicio"}),g.jsx("input",{type:"time",value:e.startTime,onChange:s=>a("startTime",s.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm"})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Data Fim"}),g.jsx("input",{type:"date",value:e.endDate,onChange:s=>a("endDate",s.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hora Fim"}),g.jsx("input",{type:"time",value:e.endTime,onChange:s=>a("endTime",s.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm"})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Responsavel"}),g.jsx("select",{value:e.assignee,onChange:s=>a("assignee",s.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm",children:bs.map(s=>g.jsx("option",{value:s.id,children:s.name},s.id))})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tipo"}),g.jsx("select",{value:e.type,onChange:s=>a("type",s.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm",children:KE.map(s=>g.jsx("option",{value:s.id,children:s.label},s.id))})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descricao"}),g.jsx("textarea",{value:e.description,onChange:s=>a("description",s.target.value),rows:3,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm resize-none",placeholder:"Detalhes do evento..."})]})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex items-center justify-between",children:[g.jsx("div",{children:n&&g.jsx("button",{onClick:o,className:"px-3 py-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:"Excluir"})}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors text-sm",children:"Cancelar"}),g.jsx("button",{onClick:i,disabled:!e.title.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Salvar":"Criar Evento"})]})]})]})})}const KL="os_orders",ru=[{id:"1",name:"Admin",color:"#6366f1"},{id:"2",name:"Operador 1",color:"#22c55e"},{id:"3",name:"Operador 2",color:"#f97316"},{id:"4",name:"Operador 3",color:"#ec4899"}],Vw=[{id:"low",label:"Baixa",color:"bg-slate-100 text-slate-600",dot:"bg-slate-400"},{id:"medium",label:"Media",color:"bg-yellow-100 text-yellow-700",dot:"bg-yellow-400"},{id:"high",label:"Alta",color:"bg-orange-100 text-orange-700",dot:"bg-orange-500"},{id:"urgent",label:"Urgente",color:"bg-red-100 text-red-700",dot:"bg-red-500"}],YL={available:"Disponivel",in_progress:"Em Andamento",done:"Concluida"},XT=[{id:"red",title:"Urgente / Alta",color:"from-red-500 to-red-600",priorities:["urgent","high"],emptyText:"Nenhuma O.S. urgente"},{id:"yellow",title:"Media",color:"from-yellow-400 to-amber-500",priorities:["medium"],emptyText:"Nenhuma O.S. media"},{id:"green",title:"Baixa",color:"from-green-500 to-emerald-600",priorities:["low"],emptyText:"Nenhuma O.S. de baixa prioridade"}],ZT={title:"",description:"",priority:"medium",client:"",location:"",notes:"",estimatedStart:"",estimatedEnd:""};function Xc(e){return e?new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function QT(e){return e?new Date(e+(e.length===10?"T12:00:00":"")).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}function die(){const e=new Date().toISOString(),t=n=>{const i=new Date;return i.setDate(i.getDate()+n),i.toISOString().split("T")[0]};return[{id:"os_1",number:142,title:"Manutencao Servidor",description:"Atualizar pacotes e reiniciar servicos do servidor principal. Verificar logs de erro e garantir estabilidade apos reinicio.",client:"Acme Corp",location:"Servidor AWS - us-east-1",notes:"Agendar janela de manutencao fora do horario comercial",priority:"high",status:"in_progress",assignee:"2",sortOrder:0,estimatedStart:t(-1),estimatedEnd:t(1),actualStart:t(0),actualEnd:"",createdAt:e,updatedAt:e},{id:"os_2",number:143,title:"Deploy Frontend v2.1",description:"Deploy da versao 2.1 em producao com novas features de dashboard e correcoes de UI.",client:"Interno",location:"Vercel - producao",notes:"Rodar testes e2e antes do deploy",priority:"medium",status:"in_progress",assignee:"3",sortOrder:0,estimatedStart:t(0),estimatedEnd:t(2),actualStart:t(0),actualEnd:"",createdAt:e,updatedAt:e},{id:"os_3",number:144,title:"Corrigir bug login",description:"Tela branca apos login reportada pelo cliente. Erro no redirect apos autenticacao OAuth.",client:"Acme Corp",location:"App Web - Producao",notes:"Prioridade maxima - cliente impactado",priority:"urgent",status:"available",assignee:null,sortOrder:1,estimatedStart:t(0),estimatedEnd:t(0),actualStart:"",actualEnd:"",createdAt:e,updatedAt:e},{id:"os_4",number:145,title:"Configurar backup automatico",description:"Configurar backup diario do banco PostgreSQL com retencao de 30 dias.",client:"Interno",location:"Supabase - PostgreSQL",notes:"",priority:"medium",status:"available",assignee:null,sortOrder:1,estimatedStart:t(1),estimatedEnd:t(3),actualStart:"",actualEnd:"",createdAt:e,updatedAt:e},{id:"os_5",number:146,title:"Migrar banco de dados",description:"Migrar tabelas para novo schema RBAC conforme documentacao.",client:"Interno",location:"Supabase",notes:"Fazer backup antes da migracao",priority:"high",status:"available",assignee:null,sortOrder:2,estimatedStart:t(2),estimatedEnd:t(5),actualStart:"",actualEnd:"",createdAt:e,updatedAt:e},{id:"os_6",number:147,title:"Instalar certificado SSL",description:"Renovar e instalar certificado SSL no dominio principal e subdominio API.",client:"Fyness",location:"DNS Cloudflare",notes:"Certificado vence em 5 dias",priority:"low",status:"available",assignee:null,sortOrder:0,estimatedStart:t(3),estimatedEnd:t(5),actualStart:"",actualEnd:"",createdAt:e,updatedAt:e},{id:"os_7",number:140,title:"Setup ambiente dev",description:"Configurar ambiente de desenvolvimento para novo colaborador incluindo acessos, IDE e repositorios.",client:"Interno",location:"Workstation local",notes:"Novo dev comeca segunda-feira",priority:"medium",status:"done",assignee:"3",sortOrder:2,estimatedStart:t(-5),estimatedEnd:t(-3),actualStart:t(-5),actualEnd:t(-3),createdAt:e,updatedAt:e},{id:"os_8",number:141,title:"Atualizar documentacao API",description:"Documentar novos endpoints da API v3 no Swagger e atualizar README.",client:"Interno",location:"Repositorio GitHub",notes:"",priority:"low",status:"done",assignee:"1",sortOrder:1,estimatedStart:t(-4),estimatedEnd:t(-2),actualStart:t(-4),actualEnd:t(-1),createdAt:e,updatedAt:e}]}function pie(){try{const e=JSON.parse(localStorage.getItem(KL)||"null");if(e===null||e.length>0&&e[0].sortOrder===void 0){const t=die();return JL(t),t}return e}catch{return[]}}function JL(e){localStorage.setItem(KL,JSON.stringify(e))}function hie(){var K,ee;const[e,t]=ce.useState([]),[n,i]=ce.useState(null),[r,o]=ce.useState(!1),[a,s]=ce.useState(null),[l,c]=ce.useState(null),[u,d]=ce.useState("all"),[h]=ce.useState("1"),[p,m]=ce.useState({...ZT}),[v,_]=ce.useState(!1),[b,E]=ce.useState(0),[w,x]=ce.useState(null),[M,B]=ce.useState(null),[H,R]=ce.useState(null);ce.useEffect(()=>{t(pie())},[]);const O=ce.useCallback(T=>{t(T),JL(T)},[]),D=ce.useMemo(()=>e.reduce((T,N)=>Math.max(T,N.number||0),0)+1,[e]),A=ce.useMemo(()=>u==="all"?e:e.filter(T=>T.assignee===u||T.status==="available"),[e,u]),L=ce.useMemo(()=>A.filter(T=>T.status!=="done"),[A]),$=ce.useMemo(()=>A.filter(T=>T.status==="done"),[A]),Z=ce.useMemo(()=>{const T={};return XT.forEach(N=>{T[N.id]=L.filter(P=>N.priorities.includes(P.priority)).sort((P,j)=>(P.sortOrder??0)-(j.sortOrder??0))}),T},[L]),me=()=>{s(null),m({...ZT}),o(!0)},ge=T=>{s(T),m({title:T.title,description:T.description||"",priority:T.priority||"medium",client:T.client||"",location:T.location||"",notes:T.notes||"",estimatedStart:T.estimatedStart||"",estimatedEnd:T.estimatedEnd||""}),o(!0)},pe=()=>{if(!p.title.trim())return;const T=new Date().toISOString();if(a){const N=e.map(P=>P.id===a.id?{...P,...p,updatedAt:T}:P);O(N),(n==null?void 0:n.id)===a.id&&i({...n,...p,updatedAt:T})}else{const N={id:`os_${Date.now()}`,number:D,...p,status:"available",assignee:null,sortOrder:e.length,createdAt:T,updatedAt:T};O([...e,N]),i(N)}o(!1)},te=T=>{O(e.filter(N=>N.id!==T)),c(null),(n==null?void 0:n.id)===T&&i(null)},le=(T,N)=>{const P=new Date().toISOString(),j=e.map(Y=>Y.id===T?{...Y,assignee:N||h,status:"in_progress",actualStart:P,updatedAt:P}:Y);if(O(j),(n==null?void 0:n.id)===T){const Y=j.find(ae=>ae.id===T);i(Y)}},ye=T=>{const N=new Date().toISOString(),P=e.map(j=>j.id===T?{...j,assignee:null,status:"available",updatedAt:N}:j);O(P),(n==null?void 0:n.id)===T&&i(P.find(j=>j.id===T))},we=T=>{const N=new Date().toISOString(),P=e.map(j=>j.id!==T?j:j.status==="available"?{...j,assignee:h,status:"in_progress",actualStart:N,updatedAt:N}:j.status==="in_progress"?{...j,status:"done",actualEnd:N,updatedAt:N}:j);O(P),(n==null?void 0:n.id)===T&&i(P.find(j=>j.id===T))},I=T=>{const N=new Date().toISOString(),P=e.map(j=>j.id!==T?j:j.status==="done"?{...j,status:"in_progress",actualEnd:"",updatedAt:N}:j.status==="in_progress"?{...j,assignee:null,status:"available",actualStart:"",updatedAt:N}:j);O(P),(n==null?void 0:n.id)===T&&i(P.find(j=>j.id===T))},z=(T,N,P,j)=>{const Y=new Date().toISOString(),ae=e.find(_e=>_e.id===T);if(!ae)return;const ke=N.priorities.includes(ae.priority)?ae.priority:N.priorities[N.priorities.length-1],Ae=e.filter(_e=>_e.id!==T&&N.priorities.includes(_e.id===T?ke:_e.priority)).sort((_e,oe)=>(_e.sortOrder??0)-(oe.sortOrder??0));let Le=Ae.length;if(P){const _e=Ae.findIndex(oe=>oe.id===P);_e!==-1&&(Le=j==="before"?_e:_e+1)}Ae.splice(Le,0,{...ae,priority:ke});const q={};Ae.forEach((_e,oe)=>{q[_e.id]=oe});const Te=e.map(_e=>_e.id===T?{..._e,priority:ke,sortOrder:q[_e.id]??_e.sortOrder,updatedAt:Y}:q[_e.id]!==void 0?{..._e,sortOrder:q[_e.id]}:_e);O(Te),(n==null?void 0:n.id)===T&&i(Te.find(_e=>_e.id===T))};return n?g.jsx(mie,{order:n,currentUser:h,onBack:()=>i(null),onEdit:()=>ge(n),onClaim:T=>le(n.id,T),onRelease:()=>ye(n.id),onMoveForward:()=>we(n.id),onMoveBack:()=>I(n.id),onDelete:()=>c(n.id)}):g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("button",{onClick:me,className:"flex items-center gap-2 px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors text-sm font-medium shadow-sm",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nova O.S."]}),g.jsxs("span",{className:"text-sm text-slate-500",children:[e.length," ordem",e.length!==1?"s":""]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{htmlFor:"filter-member",className:"text-xs font-medium text-slate-500",children:"Filtrar:"}),g.jsxs("div",{className:"relative",children:[g.jsxs("select",{id:"filter-member",value:u,onChange:T=>d(T.target.value),className:"appearance-none pl-3 pr-8 py-1.5 text-sm border border-slate-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent cursor-pointer",children:[g.jsx("option",{value:"all",children:"Todos os funcionarios"}),ru.map(T=>g.jsx("option",{value:T.id,children:T.name},T.id))]}),g.jsx("svg",{className:"w-4 h-4 text-slate-400 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u!=="all"&&g.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 text-xs rounded-full font-medium text-white shadow-sm",style:{backgroundColor:((K=ru.find(T=>T.id===u))==null?void 0:K.color)||"#6366f1"},children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-white/70"}),(ee=ru.find(T=>T.id===u))==null?void 0:ee.name,g.jsx("button",{onClick:()=>d("all"),className:"ml-1 hover:bg-white/20 rounded-full p-0.5 transition-colors",children:g.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),g.jsx("div",{className:"flex-1 grid grid-cols-3 gap-4 min-h-0",children:XT.map(T=>{const N=Z[T.id]||[],P=M===T.id&&!H;return g.jsxs("div",{className:`flex flex-col rounded-xl border-2 overflow-hidden transition-all duration-200 ${P?"border-fyness-primary bg-fyness-primary/5 shadow-lg":"border-slate-200 bg-slate-50"}`,onDragOver:j=>{j.preventDefault(),B(T.id)},onDragEnter:j=>{j.preventDefault(),B(T.id)},onDragLeave:j=>{j.currentTarget.contains(j.relatedTarget)||(B(null),R(null))},onDrop:j=>{j.preventDefault();const Y=j.dataTransfer.getData("text/plain");Y&&z(Y,T,H==null?void 0:H.cardId,H==null?void 0:H.position),B(null),R(null),x(null)},children:[g.jsxs("div",{className:`bg-gradient-to-r ${T.color} px-4 py-3 flex items-center gap-2`,children:[g.jsx("h3",{className:"text-sm font-semibold text-white",children:T.title}),g.jsx("span",{className:"bg-white/20 text-white text-xs px-2 py-0.5 rounded-full font-medium",children:N.length})]}),g.jsx("div",{className:`flex-1 overflow-y-auto p-3 space-y-0 min-h-[100px] ${P?"bg-fyness-primary/5":""}`,children:N.length===0?g.jsx("div",{className:`text-center py-8 text-sm ${P?"text-fyness-primary font-medium":"text-slate-400"}`,children:P?"Soltar aqui":T.emptyText}):N.map(j=>g.jsx(fie,{order:j,onClick:()=>i(j),isDragging:w===j.id,dropPosition:(H==null?void 0:H.cardId)===j.id?H.position:null,onDragStart:()=>x(j.id),onDragEnd:()=>{x(null),B(null),R(null)},onCardDragOver:Y=>R({cardId:j.id,position:Y})},j.id))})]},T.id)})}),$.length>0&&g.jsxs("div",{className:"mt-4",children:[g.jsxs("button",{onClick:()=>_(!v),className:"flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-800 transition-colors",children:[g.jsx("svg",{className:`w-4 h-4 transition-transform ${v?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),g.jsxs("span",{className:"flex items-center gap-2",children:["Concluidas",g.jsx("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded-full font-medium",children:$.length})]})]}),v&&(()=>{const N=Math.ceil($.length/15),P=Math.min(b,N-1),j=$.slice(P*15,(P+1)*15);return g.jsxs("div",{className:"mt-3 bg-white rounded-xl border border-slate-200 overflow-hidden",children:[g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[g.jsx("th",{className:"text-left px-4 py-2.5 text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"O.S."}),g.jsx("th",{className:"text-left px-4 py-2.5 text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Titulo"}),g.jsx("th",{className:"text-left px-4 py-2.5 text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Cliente"}),g.jsx("th",{className:"text-left px-4 py-2.5 text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Responsavel"}),g.jsx("th",{className:"text-left px-4 py-2.5 text-[10px] font-semibold text-green-500 uppercase tracking-wider",children:"Inicio Real"}),g.jsx("th",{className:"text-left px-4 py-2.5 text-[10px] font-semibold text-green-500 uppercase tracking-wider",children:"Fim Real"})]})}),g.jsx("tbody",{children:j.map(Y=>{const ae=ru.find(ke=>ke.id===Y.assignee);return g.jsxs("tr",{onClick:()=>i(Y),className:"border-b border-slate-100 last:border-b-0 hover:bg-slate-50 cursor-pointer transition-colors",children:[g.jsxs("td",{className:"px-4 py-2.5 font-bold text-slate-400",children:["#",Y.number]}),g.jsx("td",{className:"px-4 py-2.5 font-medium text-slate-800",children:Y.title}),g.jsx("td",{className:"px-4 py-2.5 text-slate-500",children:Y.client||"-"}),g.jsx("td",{className:"px-4 py-2.5",children:ae?g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-white text-[9px] font-bold",style:{backgroundColor:ae.color},children:ae.name.charAt(0)}),g.jsx("span",{className:"text-slate-600",children:ae.name})]}):g.jsx("span",{className:"text-slate-400 italic",children:"-"})}),g.jsx("td",{className:"px-4 py-2.5 text-slate-600",children:Xc(Y.actualStart)}),g.jsx("td",{className:"px-4 py-2.5 text-slate-600",children:Xc(Y.actualEnd)})]},Y.id)})})]}),N>1&&g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50",children:[g.jsxs("span",{className:"text-xs text-slate-500",children:[P*15+1,"-",Math.min((P+1)*15,$.length)," de ",$.length]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:()=>E(Math.max(0,P-1)),disabled:P===0,className:"px-2.5 py-1 text-xs rounded-lg border border-slate-300 text-slate-600 hover:bg-white transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:"Anterior"}),Array.from({length:N},(Y,ae)=>g.jsx("button",{onClick:()=>E(ae),className:`w-7 h-7 text-xs rounded-lg transition-colors ${ae===P?"bg-fyness-primary text-white":"border border-slate-300 text-slate-600 hover:bg-white"}`,children:ae+1},ae)),g.jsx("button",{onClick:()=>E(Math.min(N-1,P+1)),disabled:P===N-1,className:"px-2.5 py-1 text-xs rounded-lg border border-slate-300 text-slate-600 hover:bg-white transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:"Proximo"})]})]})]})})()]}),r&&g.jsx(gie,{form:p,setForm:m,editing:!!a,number:(a==null?void 0:a.number)||D,onSave:pe,onClose:()=>o(!1),onDelete:a?()=>{c(a.id),o(!1)}:null}),l&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full mx-4 overflow-hidden",children:[g.jsxs("div",{className:"p-6",children:[g.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),g.jsx("h3",{className:"text-lg font-semibold text-slate-800 text-center mb-2",children:"Excluir O.S.?"}),g.jsx("p",{className:"text-sm text-slate-500 text-center",children:"Esta acao nao pode ser desfeita."})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-center",children:[g.jsx("button",{onClick:()=>c(null),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors",children:"Cancelar"}),g.jsx("button",{onClick:()=>te(l),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Excluir"})]})]})})]})}function fie({order:e,onClick:t,isDragging:n,dropPosition:i,onDragStart:r,onDragEnd:o,onCardDragOver:a}){const s=ru.find(d=>d.id===e.assignee),l=e.status==="available"?"bg-slate-100 text-slate-600":e.status==="in_progress"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700",c=e.status==="available"?"bg-slate-400":e.status==="in_progress"?"bg-blue-500":"bg-green-500",u=d=>{d.preventDefault(),d.stopPropagation();const h=d.currentTarget.getBoundingClientRect(),m=d.clientY-h.top<h.height/2?"before":"after";a(m)};return g.jsxs("div",{className:"py-1",children:[i==="before"&&g.jsx("div",{className:"h-1 bg-fyness-primary rounded-full mx-1 mb-1 animate-pulse"}),g.jsxs("div",{draggable:!0,onDragStart:d=>{d.dataTransfer.setData("text/plain",e.id),d.dataTransfer.effectAllowed="move",r()},onDragEnd:o,onDragOver:u,onClick:t,className:`bg-white rounded-lg border border-slate-200 p-3 transition-all cursor-grab active:cursor-grabbing group ${n?"opacity-40 scale-95 shadow-none":"hover:shadow-md hover:border-fyness-primary/30"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[g.jsxs("span",{className:"text-xs font-bold text-slate-400",children:["O.S. #",e.number]}),g.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] font-medium px-1.5 py-0.5 rounded-full ${l}`,children:[g.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${c}`}),YL[e.status]]})]}),g.jsx("h4",{className:"text-sm font-semibold text-slate-800 mb-1 group-hover:text-fyness-primary transition-colors",children:e.title}),e.client&&g.jsx("p",{className:"text-[11px] text-slate-400 mb-1",children:e.client}),g.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-slate-100",children:[s?g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-white text-[9px] font-bold",style:{backgroundColor:s.color},children:s.name.charAt(0)}),g.jsx("span",{className:"text-xs text-slate-600",children:s.name})]}):g.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sem responsavel"}),g.jsx("svg",{className:"w-4 h-4 text-slate-300 group-hover:text-fyness-primary transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]})]}),i==="after"&&g.jsx("div",{className:"h-1 bg-fyness-primary rounded-full mx-1 mt-1 animate-pulse"})]})}function mie({order:e,currentUser:t,onBack:n,onEdit:i,onClaim:r,onRelease:o,onMoveForward:a,onMoveBack:s,onDelete:l}){const c=ru.find(v=>v.id===e.assignee),u=Vw.find(v=>v.id===e.priority)||Vw[1],d=e.assignee===t,[h,p]=ce.useState(!1),m=()=>{window.print()};return g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4 print:hidden",children:[g.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-sm text-slate-600 hover:text-slate-800 transition-colors",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar ao Kanban"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="available"&&g.jsxs("div",{className:"relative",children:[g.jsx("button",{onClick:()=>p(!h),className:"px-3 py-1.5 bg-fyness-primary text-white text-sm rounded-lg hover:bg-fyness-secondary transition-colors font-medium",children:"Pegar O.S."}),h&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>p(!1)}),g.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-1 z-40 min-w-[160px]",children:[g.jsx("div",{className:"px-3 py-1.5 text-[10px] font-semibold text-slate-400 uppercase",children:"Atribuir a:"}),ru.map(v=>g.jsxs("button",{onClick:()=>{r(v.id),p(!1)},className:"w-full px-3 py-1.5 text-left text-xs text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[g.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-white text-[8px] font-bold",style:{backgroundColor:v.color},children:v.name.charAt(0)}),v.name," ",v.id===t&&g.jsx("span",{className:"text-slate-400 ml-auto",children:"(eu)"})]},v.id))]})]})]}),e.status==="in_progress"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:a,className:"px-3 py-1.5 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600 transition-colors font-medium",children:"Concluir"}),d&&g.jsx("button",{onClick:o,className:"px-3 py-1.5 border border-orange-300 text-orange-600 text-sm rounded-lg hover:bg-orange-50 transition-colors",children:"Devolver"})]}),e.status==="done"&&g.jsx("button",{onClick:s,className:"px-3 py-1.5 border border-slate-300 text-slate-600 text-sm rounded-lg hover:bg-slate-50 transition-colors",children:"Reabrir"}),g.jsx("button",{onClick:i,className:"px-3 py-1.5 border border-slate-300 text-slate-600 text-sm rounded-lg hover:bg-slate-50 transition-colors",children:"Editar"}),g.jsxs("button",{onClick:m,className:"px-3 py-1.5 border border-slate-300 text-slate-600 text-sm rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-1.5",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimir"]}),g.jsx("button",{onClick:l,className:"px-3 py-1.5 border border-red-200 text-red-500 text-sm rounded-lg hover:bg-red-50 transition-colors",children:"Excluir"})]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:g.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl border border-slate-200 shadow-sm print:shadow-none print:border-none print:max-w-none",children:[g.jsx("div",{className:"border-b-2 border-slate-800 p-8 pb-6",children:g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-fyness-primary to-fyness-secondary rounded-xl flex items-center justify-center print:bg-slate-800",children:g.jsx("span",{className:"text-white font-bold text-lg",children:"F"})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"FYNESS"}),g.jsx("p",{className:"text-xs text-slate-500",children:"Gestao de Processos"})]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"ORDEM DE SERVICO"}),g.jsxs("p",{className:"text-3xl font-black text-fyness-primary mt-1 print:text-slate-800",children:["#",String(e.number).padStart(3,"0")]})]})]})}),g.jsxs("div",{className:"grid grid-cols-2 border-b border-slate-200",children:[g.jsxs("div",{className:"p-4 border-r border-slate-200",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Status"}),g.jsx("div",{className:"mt-1",children:g.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold ${e.status==="available"?"bg-slate-100 text-slate-700":e.status==="in_progress"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:[g.jsx("span",{className:`w-2 h-2 rounded-full ${e.status==="available"?"bg-slate-400":e.status==="in_progress"?"bg-blue-500":"bg-green-500"}`}),YL[e.status]]})})]}),g.jsxs("div",{className:"p-4",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Prioridade"}),g.jsx("div",{className:"mt-1",children:g.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold ${u.color}`,children:[g.jsx("span",{className:`w-2 h-2 rounded-full ${u.dot}`}),u.label]})})]})]}),g.jsxs("div",{className:"grid grid-cols-2 border-b border-slate-200",children:[g.jsxs("div",{className:"p-4 border-r border-slate-200",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Data de Abertura"}),g.jsx("p",{className:"text-sm text-slate-800 mt-1 font-medium",children:Xc(e.createdAt)})]}),g.jsxs("div",{className:"p-4",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Ultima Atualizacao"}),g.jsx("p",{className:"text-sm text-slate-800 mt-1 font-medium",children:Xc(e.updatedAt)})]})]}),g.jsxs("div",{className:"grid grid-cols-4 border-b border-slate-200",children:[g.jsxs("div",{className:"p-4 border-r border-slate-200",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Previsao de Inicio"}),g.jsx("p",{className:"text-sm text-slate-800 mt-1 font-medium",children:QT(e.estimatedStart)})]}),g.jsxs("div",{className:"p-4 border-r border-slate-200",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Previsao de Entrega"}),g.jsx("p",{className:"text-sm text-slate-800 mt-1 font-medium",children:QT(e.estimatedEnd)})]}),g.jsxs("div",{className:"p-4 border-r border-slate-200",children:[g.jsx("label",{className:"text-[10px] font-semibold text-green-500 uppercase tracking-wider",children:"Inicio Real"}),g.jsx("p",{className:"text-sm text-slate-800 mt-1 font-medium",children:Xc(e.actualStart)})]}),g.jsxs("div",{className:"p-4",children:[g.jsx("label",{className:"text-[10px] font-semibold text-green-500 uppercase tracking-wider",children:"Fim Real"}),g.jsx("p",{className:"text-sm text-slate-800 mt-1 font-medium",children:Xc(e.actualEnd)})]})]}),g.jsxs("div",{className:"grid grid-cols-2 border-b border-slate-200",children:[g.jsxs("div",{className:"p-4 border-r border-slate-200",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Cliente / Solicitante"}),g.jsx("p",{className:"text-sm text-slate-800 mt-1 font-medium",children:e.client||"-"})]}),g.jsxs("div",{className:"p-4",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Local / Ambiente"}),g.jsx("p",{className:"text-sm text-slate-800 mt-1 font-medium",children:e.location||"-"})]})]}),g.jsxs("div",{className:"p-4 border-b border-slate-200",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Responsavel"}),c?g.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[g.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:c.color},children:c.name.charAt(0)}),g.jsx("span",{className:"text-sm font-medium text-slate-800",children:c.name})]}):g.jsx("p",{className:"text-sm text-slate-400 mt-1 italic",children:"Nao atribuido"})]}),g.jsxs("div",{className:"p-6 border-b border-slate-200",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Titulo do Servico"}),g.jsx("h3",{className:"text-lg font-bold text-slate-800 mt-1",children:e.title})]}),g.jsxs("div",{className:"p-6 border-b border-slate-200",children:[g.jsx("label",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wider",children:"Descricao do Servico"}),g.jsx("p",{className:"text-sm text-slate-700 mt-2 leading-relaxed whitespace-pre-wrap",children:e.description||"Sem descricao."})]}),e.notes&&g.jsxs("div",{className:"p-6 border-b border-slate-200 bg-amber-50/50",children:[g.jsx("label",{className:"text-[10px] font-semibold text-amber-600 uppercase tracking-wider",children:"Observacoes"}),g.jsx("p",{className:"text-sm text-slate-700 mt-2 leading-relaxed whitespace-pre-wrap",children:e.notes})]}),g.jsxs("div",{className:"p-8 grid grid-cols-2 gap-12",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"border-b border-slate-300 mb-2 h-16"}),g.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Solicitante"})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"border-b border-slate-300 mb-2 h-16"}),g.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Responsavel pela Execucao"})]})]}),g.jsx("div",{className:"bg-slate-50 px-8 py-3 text-center border-t border-slate-200 rounded-b-xl",children:g.jsxs("p",{className:"text-[10px] text-slate-400",children:["Fyness - Gestao de Processos Empresariais | Documento gerado em ",Xc(new Date().toISOString())]})})]})})]})}function gie({form:e,setForm:t,editing:n,number:i,onSave:r,onClose:o,onDelete:a}){const s=(l,c)=>t(u=>({...u,[l]:c}));return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4 overflow-hidden max-h-[90vh] flex flex-col",children:[g.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between shrink-0",children:[g.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:n?`Editar O.S. #${i}`:`Nova O.S. #${i}`}),g.jsx("button",{onClick:o,className:"p-1 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Titulo do Servico *"}),g.jsx("input",{type:"text",value:e.title,onChange:l=>s("title",l.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm",placeholder:"Ex: Manutencao do servidor principal",autoFocus:!0,onKeyDown:l=>{l.key==="Escape"&&o()}})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cliente / Solicitante"}),g.jsx("input",{type:"text",value:e.client,onChange:l=>s("client",l.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm",placeholder:"Ex: Acme Corp"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Local / Ambiente"}),g.jsx("input",{type:"text",value:e.location,onChange:l=>s("location",l.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm",placeholder:"Ex: Servidor AWS"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Prioridade"}),g.jsx("div",{className:"flex gap-2",children:Vw.map(l=>g.jsxs("button",{onClick:()=>s("priority",l.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg border text-sm transition-all ${e.priority===l.id?`${l.color} border-transparent font-medium`:"border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:[g.jsx("div",{className:`w-2 h-2 rounded-full ${l.dot}`}),l.label]},l.id))})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Previsao de Inicio"}),g.jsx("input",{type:"date",value:e.estimatedStart,onChange:l=>s("estimatedStart",l.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Previsao de Entrega"}),g.jsx("input",{type:"date",value:e.estimatedEnd,onChange:l=>s("estimatedEnd",l.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descricao do Servico"}),g.jsx("textarea",{value:e.description,onChange:l=>s("description",l.target.value),rows:4,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm resize-none",placeholder:"Descreva o servico a ser executado..."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observacoes"}),g.jsx("textarea",{value:e.notes,onChange:l=>s("notes",l.target.value),rows:2,className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fyness-primary focus:border-transparent text-sm resize-none",placeholder:"Observacoes adicionais..."})]})]}),g.jsxs("div",{className:"p-6 bg-slate-50 flex items-center justify-between shrink-0",children:[g.jsx("div",{children:a&&g.jsx("button",{onClick:a,className:"px-3 py-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:"Excluir"})}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:o,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-100 transition-colors text-sm",children:"Cancelar"}),g.jsx("button",{onClick:r,disabled:!e.title.trim(),className:"px-4 py-2 bg-fyness-primary text-white rounded-lg hover:bg-fyness-secondary transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Salvar":"Gerar O.S."})]})]})]})})}function vie(){return g.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Configuracoes"}),g.jsx("p",{className:"text-slate-500",children:"Em construcao..."})]})}const yie=()=>g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),_ie=()=>g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),bie=()=>g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),wie=()=>g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),xie=()=>g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),Eie=()=>g.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Sie=()=>g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})});function md({to:e,icon:t,label:n,isCollapsed:i,badge:r}){const o=Yl(),a=o.pathname===e||o.pathname.startsWith(e+"/");return g.jsxs(mj,{to:e,className:`
        flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
        ${a?"bg-blue-50 text-blue-700 font-medium":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"}
        ${i?"justify-center":""}
      `,title:i?n:void 0,children:[g.jsx(t,{}),!i&&g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"flex-1",children:n}),r&&g.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-600 rounded-full",children:r})]})]})}function Nie(){const[e,t]=ce.useState(!0),[n,i]=ce.useState(!1),r=async()=>{console.log("Logout")};return g.jsxs("aside",{onMouseEnter:()=>t(!1),onMouseLeave:()=>t(!0),className:`
        flex flex-col bg-white border-r border-slate-200 transition-all duration-300
        ${e?"w-16":"w-64"}
      `,children:[g.jsx("div",{className:"h-16 flex items-center justify-center px-4 border-b border-slate-200",children:e?g.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-white font-bold text-sm",children:"F"})}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:g.jsx("span",{className:"text-white font-bold text-sm",children:"F"})}),g.jsx("span",{className:"font-bold text-slate-800",children:"Fyness OS"})]})}),g.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:[g.jsx(md,{to:"/dashboard",icon:yie,label:"Dashboard",isCollapsed:e}),g.jsx(md,{to:"/sales",icon:_ie,label:"Processos",isCollapsed:e}),g.jsx(md,{to:"/routine",icon:bie,label:"Minha Rotina",isCollapsed:e}),g.jsx(md,{to:"/agenda",icon:wie,label:"Agenda",isCollapsed:e}),g.jsx(md,{to:"/financial",icon:xie,label:"Ordens de Servico",isCollapsed:e}),g.jsx("div",{className:"my-4 border-t border-slate-200"}),g.jsx(md,{to:"/settings",icon:Eie,label:"Configuracoes",isCollapsed:e})]}),g.jsx("div",{className:"p-3 border-t border-slate-200",children:g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>i(!n),className:`
              w-full flex items-center gap-3 p-2 rounded-lg hover:bg-slate-100 transition-colors
              ${e?"justify-center":""}
            `,children:[g.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-medium",children:"A"}),!e&&g.jsxs("div",{className:"flex-1 text-left",children:[g.jsx("div",{className:"text-sm font-medium text-slate-800 truncate",children:"Admin"}),g.jsx("div",{className:"text-xs text-slate-500 truncate",children:"Administrador"})]})]}),n&&g.jsxs("div",{className:`
              absolute bottom-full mb-2 bg-white border border-slate-200 rounded-lg shadow-lg py-1 z-50
              ${e?"left-0":"left-0 right-0"}
            `,children:[g.jsx("button",{onClick:()=>{},className:"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-100",children:"Meu Perfil"}),g.jsxs("button",{onClick:r,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[g.jsx(Sie,{}),"Sair"]})]})]})})]})}const e4={"/dashboard":"Dashboard","/sales":"Processos","/sales/editor":"Editor de Fluxo","/routine":"Minha Rotina","/agenda":"Agenda","/financial":"Ordens de Servico","/settings":"Configuracoes"},kie=()=>g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})});function Pie(e){if(!e||e.length<2)return[];const t=e.toLowerCase(),n=[];try{JSON.parse(localStorage.getItem("os_orders")||"[]").forEach(r=>{(r.title&&r.title.toLowerCase().includes(t)||r.client&&r.client.toLowerCase().includes(t)||r.description&&r.description.toLowerCase().includes(t)||r.number&&String(r.number).includes(t))&&n.push({type:"os",label:`O.S. #${r.number} - ${r.title}`,sub:r.client||"Sem cliente",route:"/financial",id:r.id})})}catch{}try{JSON.parse(localStorage.getItem("agenda_events")||"[]").forEach(r=>{(r.title&&r.title.toLowerCase().includes(t)||r.description&&r.description.toLowerCase().includes(t))&&n.push({type:"event",label:r.title,sub:r.description||"",route:"/agenda",id:r.id})})}catch{}return n.slice(0,8)}function Aie(){const e=Yl(),t=Kf(),[n,i]=ce.useState(""),[r,o]=ce.useState([]),[a,s]=ce.useState(!1),l=ce.useRef(null),c=ce.useCallback(m=>{i(m),m.length>=2?(o(Pie(m)),s(!0)):(o([]),s(!1))},[]),u=m=>{i(""),s(!1),t(m.route)};ce.useEffect(()=>{const m=v=>{l.current&&!l.current.contains(v.target)&&s(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const d=()=>{for(const[m,v]of Object.entries(e4))if(e.pathname===m||e.pathname.startsWith(m+"/"))return v;return"Dashboard"},p=(()=>{const m=e.pathname.split("/").filter(Boolean);return m.map((v,_)=>{const b="/"+m.slice(0,_+1).join("/"),E=e4[b]||v.charAt(0).toUpperCase()+v.slice(1);return{path:b,title:E}})})();return g.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 px-6 flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsxs("nav",{className:"flex items-center gap-2 text-sm",children:[g.jsx("span",{className:"text-slate-400",children:"Inicio"}),p.map((m,v)=>g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-slate-300",children:"/"}),g.jsx("span",{className:v===p.length-1?"text-slate-800 font-medium":"text-slate-500",children:m.title})]},m.path))]}),g.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:d()})]}),g.jsx("div",{className:"flex items-center gap-4",children:g.jsxs("div",{className:"relative hidden md:block",ref:l,children:[g.jsx("input",{type:"text",placeholder:"Buscar O.S., eventos...",value:n,onChange:m=>c(m.target.value),onFocus:()=>{n.length>=2&&s(!0)},className:"w-64 pl-10 pr-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),g.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:g.jsx(kie,{})}),a&&g.jsx("div",{className:"absolute top-full mt-1 left-0 right-0 bg-white border border-slate-200 rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",children:r.length===0?g.jsxs("div",{className:"px-4 py-3 text-sm text-slate-400 text-center",children:["Nenhum resultado para ",n,""]}):r.map((m,v)=>g.jsxs("button",{onClick:()=>u(m),className:"w-full px-4 py-2.5 text-left hover:bg-slate-50 flex items-center gap-3 transition-colors border-b border-slate-100 last:border-b-0",children:[g.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center text-white text-[10px] font-bold shrink-0 ${m.type==="os"?"bg-fyness-primary":"bg-amber-500"}`,children:m.type==="os"?"OS":"AG"}),g.jsxs("div",{className:"min-w-0 flex-1",children:[g.jsx("div",{className:"text-sm font-medium text-slate-800 truncate",children:m.label}),g.jsx("div",{className:"text-[11px] text-slate-400 truncate",children:m.sub})]})]},`${m.type}-${m.id}-${v}`))})]})})]})}function Tie(){return g.jsxs("div",{className:"min-h-screen flex bg-slate-50",children:[g.jsx(Nie,{}),g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden transition-all duration-300",children:[g.jsx(Aie,{}),g.jsx("main",{className:"flex-1 overflow-auto p-6",children:g.jsx(nj,{})})]})]})}function Cie(){return g.jsx(rj,{children:g.jsxs(Qo,{element:g.jsx(Tie,{}),children:[g.jsx(Qo,{path:"/",element:g.jsx(tj,{to:"/dashboard",replace:!0})}),g.jsx(Qo,{path:"/dashboard",element:g.jsx(Wne,{})}),g.jsx(Qo,{path:"/sales",element:g.jsx(e$,{})}),g.jsx(Qo,{path:"/sales/editor/:id?",element:g.jsx(WT,{})}),g.jsx(Qo,{path:"/routine",element:g.jsx(nie,{})}),g.jsx(Qo,{path:"/agenda",element:g.jsx(aie,{})}),g.jsx(Qo,{path:"/financial",element:g.jsx(hie,{})}),g.jsx(Qo,{path:"/settings",element:g.jsx(vie,{})}),g.jsx(Qo,{path:"/editor/:id?",element:g.jsx(WT,{})})]})})}const Rie=()=>{const e=()=>{document.querySelectorAll("div").forEach(n=>{const i=n.textContent||"";n.className,(i.trim().toLowerCase()==="supabase"||i.toLowerCase().includes("supabase")&&i.length<50)&&(console.log("Removendo badge do Supabase:",n),n.style.display="none !important",n.remove())}),document.querySelectorAll('a[href*="supabase"]').forEach(n=>{console.log("Removendo link Supabase:",n),n.style.display="none",n.remove()})};new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0}),setInterval(e,500),setTimeout(e,50),setTimeout(e,200),setTimeout(e,500),setTimeout(e,1e3),setTimeout(e,2e3)};Rie();jb.createRoot(document.getElementById("root")).render(g.jsx(p4.StrictMode,{children:g.jsx(pj,{children:g.jsx(Cie,{})})}));export{cn as _,Iie as c,t4 as g};
